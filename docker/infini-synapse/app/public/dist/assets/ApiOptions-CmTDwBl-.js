import{d as O,bl as K,ad as Z,r as L,es as ee,w as te,c as e,G as i,K as x,a9 as w,ef as ae,bX as oe,aD as re}from"./index-Dos_jaru.js";import{u as se}from"./ai-BrJzjZTF.js";import{a as ie,F as n}from"./index-COeu_3bB.js";import{S as N,i as A,C as M}from"./index-B6MIkBqU.js";import{I as q}from"./index-DXY6kBhX.js";function ne(s){if(s)switch(s.apiProvider){case"anthropic":if(!s.apiKey)return"You must provide a valid API key or choose a different provider.";break;case"openai-native":if(!s.openAiNativeApiKey)return"You must provide a valid API key or choose a different provider.";break;case"deepseek":if(!s.deepSeekApiKey)return"You must provide a valid API key or choose a different provider.";break;case"deepseek-aliyun":if(!s.deepSeekAliyunKey)return"You must provide a valid API key or choose a different provider.";break;case"qwen":if(!s.qwenApiKey)return"You must provide a valid API key or choose a different provider.";break;case"openai":if(!s.openAiBaseUrl||!s.openAiApiKey||!s.openAiModelId)return"You must provide a valid base URL, API key, and model ID.";break}}const Y="claude-3-7-sonnet-20250219",B={"claude-3-7-sonnet-20250219":{maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsComputerUse:!0,supportsPromptCache:!0,inputPrice:3,outputPrice:15,cacheWritesPrice:3.75,cacheReadsPrice:.3},"claude-3-5-sonnet-20241022":{maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsComputerUse:!0,supportsPromptCache:!0,inputPrice:3,outputPrice:15,cacheWritesPrice:3.75,cacheReadsPrice:.3},"claude-3-5-haiku-20241022":{maxTokens:8192,contextWindow:2e5,supportsImages:!1,supportsPromptCache:!0,inputPrice:.8,outputPrice:4,cacheWritesPrice:1,cacheReadsPrice:.08},"claude-3-opus-20240229":{maxTokens:4096,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!0,inputPrice:15,outputPrice:75,cacheWritesPrice:18.75,cacheReadsPrice:1.5},"claude-3-haiku-20240307":{maxTokens:4096,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!0,inputPrice:.25,outputPrice:1.25,cacheWritesPrice:.3,cacheReadsPrice:.03}},I={maxTokens:-1,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:0,outputPrice:0,temperature:0},ue="gpt-4o",Q={"o3-mini":{maxTokens:1e5,contextWindow:2e5,supportsImages:!1,supportsPromptCache:!0,inputPrice:1.1,outputPrice:4.4,cacheReadsPrice:.55},o1:{maxTokens:1e5,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!1,inputPrice:15,outputPrice:60,cacheReadsPrice:7.5},"o1-preview":{maxTokens:32768,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!0,inputPrice:15,outputPrice:60,cacheReadsPrice:7.5},"o1-mini":{maxTokens:65536,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!0,inputPrice:1.1,outputPrice:4.4,cacheReadsPrice:.55},"gpt-4o":{maxTokens:4096,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!0,inputPrice:2.5,outputPrice:10,cacheReadsPrice:1.25},"gpt-4o-mini":{maxTokens:16384,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!0,inputPrice:.15,outputPrice:.6,cacheReadsPrice:.075},"gpt-4.5-preview":{maxTokens:16384,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:75,outputPrice:150}},pe="2024-08-01-preview",ce="deepseek-chat",_={"deepseek-chat":{maxTokens:8e3,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!0,inputPrice:.27,outputPrice:1.1,cacheWritesPrice:.27,cacheReadsPrice:.07},"deepseek-reasoner":{maxTokens:8e3,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!0,inputPrice:.55,outputPrice:2.19,cacheWritesPrice:.55,cacheReadsPrice:.14}},le="deepseek-v3",j={"deepseek-v3":{maxTokens:8e3,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!0,inputPrice:0,outputPrice:.28,cacheWritesPrice:.14,cacheReadsPrice:.014},"deepseek-r1":{maxTokens:8e3,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!0,inputPrice:0,outputPrice:2.19,cacheWritesPrice:.55,cacheReadsPrice:.14}},de="qwen-coder-plus-latest",Pe="qwen-coder-plus-latest",$={"qwen2.5-coder-32b-instruct":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.002,outputPrice:.006,cacheWritesPrice:.002,cacheReadsPrice:.006},"qwen2.5-coder-14b-instruct":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.002,outputPrice:.006,cacheWritesPrice:.002,cacheReadsPrice:.006},"qwen2.5-coder-7b-instruct":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.001,outputPrice:.002,cacheWritesPrice:.001,cacheReadsPrice:.002},"qwen2.5-coder-3b-instruct":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen2.5-coder-1.5b-instruct":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen2.5-coder-0.5b-instruct":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen-coder-plus-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:3.5,outputPrice:7,cacheWritesPrice:3.5,cacheReadsPrice:7},"qwen-plus-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.8,outputPrice:2,cacheWritesPrice:.8,cacheReadsPrice:.2},"qwen-turbo-latest":{maxTokens:1e6,contextWindow:1e6,supportsImages:!1,supportsPromptCache:!1,inputPrice:.8,outputPrice:2,cacheWritesPrice:.8,cacheReadsPrice:2},"qwen-max-latest":{maxTokens:30720,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:2.4,outputPrice:9.6,cacheWritesPrice:2.4,cacheReadsPrice:9.6},"qwen-coder-plus":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:3.5,outputPrice:7,cacheWritesPrice:3.5,cacheReadsPrice:7},"qwen-plus":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.8,outputPrice:2,cacheWritesPrice:.8,cacheReadsPrice:.2},"qwen-turbo":{maxTokens:1e6,contextWindow:1e6,supportsImages:!1,supportsPromptCache:!1,inputPrice:.3,outputPrice:.6,cacheWritesPrice:.3,cacheReadsPrice:.6},"qwen-max":{maxTokens:30720,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:2.4,outputPrice:9.6,cacheWritesPrice:2.4,cacheReadsPrice:9.6},"deepseek-v3":{maxTokens:8e3,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!0,inputPrice:0,outputPrice:.28,cacheWritesPrice:.14,cacheReadsPrice:.014},"deepseek-r1":{maxTokens:8e3,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!0,inputPrice:0,outputPrice:2.19,cacheWritesPrice:.55,cacheReadsPrice:.14},"qwen-vl-max":{maxTokens:30720,contextWindow:32768,supportsImages:!0,supportsPromptCache:!1,inputPrice:3,outputPrice:9,cacheWritesPrice:3,cacheReadsPrice:9},"qwen-vl-max-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!0,supportsPromptCache:!1,inputPrice:3,outputPrice:9,cacheWritesPrice:3,cacheReadsPrice:9},"qwen-vl-plus":{maxTokens:6e3,contextWindow:8e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:1.5,outputPrice:4.5,cacheWritesPrice:1.5,cacheReadsPrice:4.5},"qwen-vl-plus-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!0,supportsPromptCache:!1,inputPrice:1.5,outputPrice:4.5,cacheWritesPrice:1.5,cacheReadsPrice:4.5}},G={"qwen2.5-coder-32b-instruct":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.002,outputPrice:.006,cacheWritesPrice:.002,cacheReadsPrice:.006},"qwen2.5-coder-14b-instruct":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.002,outputPrice:.006,cacheWritesPrice:.002,cacheReadsPrice:.006},"qwen2.5-coder-7b-instruct":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.001,outputPrice:.002,cacheWritesPrice:.001,cacheReadsPrice:.002},"qwen2.5-coder-3b-instruct":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen2.5-coder-1.5b-instruct":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen2.5-coder-0.5b-instruct":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen-coder-plus-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:3.5,outputPrice:7,cacheWritesPrice:3.5,cacheReadsPrice:7},"qwen-plus-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.8,outputPrice:2,cacheWritesPrice:.8,cacheReadsPrice:.2},"qwen-turbo-latest":{maxTokens:1e6,contextWindow:1e6,supportsImages:!1,supportsPromptCache:!1,inputPrice:.8,outputPrice:2,cacheWritesPrice:.8,cacheReadsPrice:2},"qwen-max-latest":{maxTokens:30720,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:2.4,outputPrice:9.6,cacheWritesPrice:2.4,cacheReadsPrice:9.6},"qwq-plus-latest":{maxTokens:8192,contextWindow:131071,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwq-plus":{maxTokens:8192,contextWindow:131071,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen-coder-plus":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:3.5,outputPrice:7,cacheWritesPrice:3.5,cacheReadsPrice:7},"qwen-plus":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.8,outputPrice:2,cacheWritesPrice:.8,cacheReadsPrice:.2},"qwen-turbo":{maxTokens:1e6,contextWindow:1e6,supportsImages:!1,supportsPromptCache:!1,inputPrice:.3,outputPrice:.6,cacheWritesPrice:.3,cacheReadsPrice:.6},"qwen-max":{maxTokens:30720,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:2.4,outputPrice:9.6,cacheWritesPrice:2.4,cacheReadsPrice:9.6},"qwen-vl-max":{maxTokens:30720,contextWindow:32768,supportsImages:!0,supportsPromptCache:!1,inputPrice:3,outputPrice:9,cacheWritesPrice:3,cacheReadsPrice:9},"qwen-vl-max-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!0,supportsPromptCache:!1,inputPrice:3,outputPrice:9,cacheWritesPrice:3,cacheReadsPrice:9},"qwen-vl-plus":{maxTokens:6e3,contextWindow:8e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:1.5,outputPrice:4.5,cacheWritesPrice:1.5,cacheReadsPrice:4.5},"qwen-vl-plus-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!0,supportsPromptCache:!1,inputPrice:1.5,outputPrice:4.5,cacheWritesPrice:1.5,cacheReadsPrice:4.5}};function E(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!re(s)}const ke=O({props:{onDone:{type:Function},showModelOptions:{type:Boolean,required:!0},isPopup:{type:Boolean,default:!1}},setup:s=>{var F,V;const{showModelOptions:u,isPopup:v}=K(s),m=se(),{state:y,modifyState:o}=Z(m),{postMessage:W}=m,C=L(!!((F=o.value.apiConfiguration)!=null&&F.anthropicBaseUrl)),D=L(!!((V=o.value.apiConfiguration)!=null&&V.azureApiVersion)),T=L(!1),{onDone:U}=s,p=g=>k=>{var t;o.value.apiConfiguration={...(t=o.value)==null?void 0:t.apiConfiguration,[g]:k}},{selectedProvider:f,selectedModelId:X,selectedModelInfo:H}=K(ee(()=>{var g;return R((g=o.value)==null?void 0:g.apiConfiguration)})),b=g=>{let k;return e(n,{label:"Model",rules:[{required:!0,message:"Please select a model"}]},{default:()=>[e(N,{value:X.value,placeholder:"Select a model...",onChange:t=>p("apiModelId")(t)},E(k=Object.keys(g).map(t=>e(A,{key:t,value:t},E(t)?t:{default:()=>[t]})))?k:{default:()=>[k]})]})},J=()=>{const g=ne(o.value.apiConfiguration);let k=o.value.apiConfiguration;g&&(k=void 0),W({type:"updateSettings",planActSeparateModelsSetting:o.value.planActSeparateModelsSetting,apiConfiguration:k}),U==null||U()};return te(f,(g,k)=>{var t,a,r,c,l,h;if(g!==((a=(t=y.value)==null?void 0:t.apiConfiguration)==null?void 0:a.apiProvider)){const{selectedProvider:d,selectedModelId:P}=R(o.value.apiConfiguration);p("apiProvider")(d),p("apiModelId")(P)}else if(g===((c=(r=y.value)==null?void 0:r.apiConfiguration)==null?void 0:c.apiProvider)){const{selectedProvider:d,selectedModelId:P}=R((l=y.value)==null?void 0:l.apiConfiguration);p("apiProvider")(d),p("apiModelId")(P)}else{const{selectedProvider:d,selectedModelId:P}=R(o.value.apiConfiguration);p("apiProvider")(d),p("apiModelId")(P)}(h=o.value.apiConfiguration)!=null&&h.qwenApiLine||p("qwenApiLine")("china")},{immediate:!0}),()=>e(x,null,[e("style",null,[`
          .settings-form .ant-form-item {
                margin-bottom: ${v.value?"10px":"15px"};
          }
`]),e(ie,{model:o.value,onFinish:J,layout:"vertical",class:"settings-form overflow-scroll h-full",style:{width:"100%"},size:v.value?"middle":"small"},{default:()=>{var g,k;return[e(n,{label:"API provider",rules:[{required:!0,message:"Please select API Provider"}]},{default:()=>[e(N,{value:f.value,placeholder:"please select API Provider",onChange:t=>p("apiProvider")(t)},{default:()=>[e(A,{value:"anthropic"},{default:()=>[i("Anthropic")]}),e(A,{value:"deepseek"},{default:()=>[i("Deepseek")]}),e(A,{value:"openai"},{default:()=>[i("OpenAi Compatible")]}),e(A,{value:"openai-native"},{default:()=>[i("OpenAi")]}),e(A,{value:"deepseek-aliyun"},{default:()=>[i("Aliyun Deepseek")]}),e(A,{value:"qwen"},{default:()=>[i("Aliyun Qwen")]})]})]}),f.value==="anthropic"&&e(x,null,[e(n,{label:"Anthropic API Key",rules:[{required:!0,message:"Please enter API Key",trigger:"blur"},{min:1,message:"api key length must be at least 1 characters",trigger:"blur"}]},{default:()=>{var t,a;return[e(w,{value:((a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.apiKey)||"",type:"password",placeholder:"Enter API Key...",onChange:r=>p("apiKey")(r.target.value)},null)]}}),e(n,null,{default:()=>[e(M,{checked:C.value,onChange:t=>{const a=t.target.checked;C.value=a,a||p("anthropicBaseUrl")("")}},{default:()=>[i("Use custom base URL")]})]}),C.value&&e(n,null,{default:()=>{var t,a;return[e(w,{type:"url",value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.anthropicBaseUrl,placeholder:"Default: https://api.anthropic.com",onChange:r=>p("anthropicBaseUrl")(r.target.value)},null)]}}),e(n,null,{default:()=>{var t,a;return[e("div",null,[e("span",null,[i("This key is stored locally and only used to make API requests from this extension.")]),!((a=(t=o.value)==null?void 0:t.apiConfiguration)!=null&&a.apiKey)&&e("a",{href:"https://console.anthropic.com/settings/keys",style:{display:"inline",fontSize:"inherit"},target:"_blank"},[i("You can get an Anthropic API key by signing up here.")])])]}})]),f.value==="openai-native"&&e(x,null,[e(n,{label:"OpenAI API Key",rules:[{required:!0,message:"Please enter API Key",trigger:"blur"},{min:1,message:"api key length must be at least 1 characters",trigger:"blur"}]},{default:()=>{var t,a;return[e(w,{value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiNativeApiKey,type:"password",placeholder:"Enter API Key...",onChange:r=>p("openAiNativeApiKey")(r.target.value)},null)]}}),e(n,null,{default:()=>{var t,a;return[e("div",null,[e("span",null,[i("This key is stored locally and only used to make API requests from this extension.")]),!((a=(t=o.value)==null?void 0:t.apiConfiguration)!=null&&a.openAiNativeApiKey)&&e("a",{href:"https://platform.openai.com/api-keys",style:{display:"inline",fontSize:"inherit"},target:"_blank"},[i("You can get an OpenAI API key by signing up here.")])])]}})]),f.value==="deepseek"&&e(x,null,[e(n,{label:"DeepSeek API Key",rules:[{required:!0,message:"Please enter API Key",trigger:"blur"},{min:1,message:"api key length must be at least 1 characters",trigger:"blur"}]},{default:()=>{var t,a;return[e(w,{value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.deepSeekApiKey,type:"password",placeholder:"Enter API Key...",onChange:r=>p("deepSeekApiKey")(r.target.value)},null)]}}),e(n,null,{default:()=>{var t,a;return[e("div",null,[e("span",null,[i("This key is stored locally and only used to make API requests from this extension.")]),!((a=(t=o.value)==null?void 0:t.apiConfiguration)!=null&&a.deepSeekApiKey)&&e("a",{href:"https://www.deepseek.com/",style:{display:"inline",fontSize:"inherit"},target:"_blank"},[i("You can get a DeepSeek API key by signing up here.")])])]}})]),f.value==="qwen"&&e(x,null,[e(n,{label:"Alibaba API Line",rules:[{required:!0,message:"Please select qwen API line"}]},{default:()=>{var t,a;return[e(N,{value:((a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.qwenApiLine)??"china",placeholder:"Please select qwen API line",onChange:r=>p("qwenApiLine")(r)},{default:()=>[e(A,{value:"china"},{default:()=>[i("China API")]}),e(A,{value:"international"},{default:()=>[i("International API")]})]})]}}),e(n,null,{default:()=>[i("Please select the appropriate API interface based on your location. If you are in China, choose the China API interface. Otherwise, choose the International API interface.")]}),e(n,{label:"Qwen API Key",rules:[{required:!0,message:"Please enter API Key",trigger:"blur"},{min:1,message:"api key length must be at least 1 characters",trigger:"blur"}]},{default:()=>{var t,a;return[e(w,{value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.qwenApiKey,type:"password",placeholder:"Enter API Key...",onChange:r=>p("qwenApiKey")(r.target.value)},null)]}}),e(n,null,{default:()=>{var t,a;return[e("div",null,[e("span",null,[i("This key is stored locally and only used to make API requests from this extension.")]),!((a=(t=o.value)==null?void 0:t.apiConfiguration)!=null&&a.qwenApiKey)&&e("a",{href:"https://bailian.console.aliyun.com/",style:{display:"inline",fontSize:"inherit"},target:"_blank"},[i("You can get a Qwen API key by signing up here.")])])]}})]),f.value==="deepseek-aliyun"&&e(x,null,[e(n,{label:"Aliyun DeepSeek API Key",rules:[{required:!0,message:"Please enter API Key",trigger:"blur"},{min:1,message:"api key length must be at least 1 characters",trigger:"blur"}]},{default:()=>{var t,a;return[e(w,{value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.deepSeekAliyunKey,type:"password",placeholder:"Enter API Key...",onChange:r=>p("deepSeekAliyunKey")(r.target.value)},null)]}}),e(n,null,{default:()=>{var t,a;return[e("div",null,[e("span",null,[i("This key is stored locally and only used to make API requests from this extension.")]),!((a=(t=o.value)==null?void 0:t.apiConfiguration)!=null&&a.deepSeekAliyunKey)&&e("a",{href:"https://bailian.console.aliyun.com/",style:{display:"inline",fontSize:"inherit"},target:"_blank"},[i("You can get a Aliyun DeepSeek API key by signing up here.")])])]}})]),f.value==="openai"&&e(x,null,[e(n,{label:"Base URL",rules:[{required:!0,message:"Please enter Base URL",trigger:"blur"},{min:1,message:"Base url length must be at least 1 characters",trigger:"blur"}]},{default:()=>{var t,a;return[e(w,{type:"url",value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiBaseUrl,placeholder:"Enter Base URL...",onChange:r=>p("openAiBaseUrl")(r.target.value)},null)]}}),e(n,{label:"API Key",rules:[{required:!0,message:"Please enter API Key",trigger:"blur"},{min:1,message:"Api key length must be at least 1 characters",trigger:"blur"}]},{default:()=>{var t,a;return[e(w,{value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiApiKey,type:"password",placeholder:"Enter API Key...",onChange:r=>p("openAiApiKey")(r.target.value)},null)]}}),e(n,{label:"Model ID",rules:[{required:!0,message:"Please enter Model ID",trigger:"blur"},{min:1,message:"Model id length must be at least 6 characters",trigger:"blur"}]},{default:()=>{var t,a;return[e(w,{value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiModelId,placeholder:"Enter Model ID...",onChange:r=>p("openAiModelId")(r.target.value)},null)]}}),e(n,null,{default:()=>[e(M,{checked:D.value,onChange:t=>{const a=t.target.checked;D.value=a,a||p("azureApiVersion")("")}},{default:()=>[i("Set Azure API version")]})]}),D.value&&e(n,null,{default:()=>{var t,a;return[e(w,{value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.azureApiVersion,placeholder:`Default: ${pe}`,onChange:r=>p("azureApiVersion")(r.target.value)},null)]}}),e("div",{style:{color:"var(--descriptionForeground)",display:"flex",margin:"10px 0",cursor:"pointer",alignItems:"center"},onClick:()=>T.value=!T.value},[e("span",{class:`codicon ${T.value?"codicon-chevron-down":"codicon-chevron-right"}`,style:{marginRight:"4px"}},null),e("span",{style:{fontWeight:700,textTransform:"uppercase"}},[i("Model Configuration")])]),T.value&&e(x,null,[e(n,null,{default:()=>{var t,a;return[e(M,{checked:!!((a=(t=o.value.apiConfiguration)==null?void 0:t.openAiModelInfo)!=null&&a.supportsImages),onChange:r=>{var h;const c=r.target.checked;let l=(h=o.value.apiConfiguration)!=null&&h.openAiModelInfo?o.value.apiConfiguration.openAiModelInfo:{...I};l.supportsImages=c,c||p("openAiModelInfo")(l)}},{default:()=>[i("Supports Images")]})]}}),e(n,null,{default:()=>{var t,a;return[e(M,{checked:!!((a=(t=o.value.apiConfiguration)==null?void 0:t.openAiModelInfo)!=null&&a.supportsComputerUse),onChange:r=>{var h;const c=r.target.checked;let l=(h=o.value.apiConfiguration)!=null&&h.openAiModelInfo?o.value.apiConfiguration.openAiModelInfo:{...I};l.supportsComputerUse=c,c||p("openAiModelInfo")(l)}},{default:()=>[i("Supports Computer Use")]})]}}),e(n,{label:"Context Window Size"},{default:()=>{var t,a,r,c,l;return[e(q,{value:(r=(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiModelInfo)!=null&&r.contextWindow?(l=(c=o.value.apiConfiguration)==null?void 0:c.openAiModelInfo)==null?void 0:l.contextWindow:I.contextWindow,placeholder:"",onChange:h=>{var P;let d=(P=o.value.apiConfiguration)!=null&&P.openAiModelInfo?o.value.apiConfiguration.openAiModelInfo:{...I};d.contextWindow=Number(h),p("openAiModelInfo")(d)}},null)]}}),e(n,{label:"Max Output Tokens"},{default:()=>{var t,a,r,c,l;return[e(q,{value:(r=(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiModelInfo)!=null&&r.maxTokens?(l=(c=o.value.apiConfiguration)==null?void 0:c.openAiModelInfo)==null?void 0:l.maxTokens:I.maxTokens,placeholder:"",onChange:h=>{var P;let d=(P=o.value.apiConfiguration)!=null&&P.openAiModelInfo?o.value.apiConfiguration.openAiModelInfo:{...I};d.maxTokens=Number(h),p("openAiModelInfo")(d)}},null)]}}),e(n,{label:"Input Price / 1M tokens"},{default:()=>{var t,a,r,c,l;return[e(q,{value:(r=(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiModelInfo)!=null&&r.inputPrice?(l=(c=o.value.apiConfiguration)==null?void 0:c.openAiModelInfo)==null?void 0:l.inputPrice:I.inputPrice,placeholder:"",onChange:h=>{var P;let d=(P=o.value.apiConfiguration)!=null&&P.openAiModelInfo?o.value.apiConfiguration.openAiModelInfo:{...I};d.inputPrice=Number(h),p("openAiModelInfo")(d)}},null)]}}),e(n,{label:"Output Price / 1M tokens"},{default:()=>{var t,a,r,c,l;return[e(q,{value:(r=(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiModelInfo)!=null&&r.outputPrice?(l=(c=o.value.apiConfiguration)==null?void 0:c.openAiModelInfo)==null?void 0:l.outputPrice:I.outputPrice,placeholder:"",onChange:h=>{var P;let d=(P=o.value.apiConfiguration)!=null&&P.openAiModelInfo?o.value.apiConfiguration.openAiModelInfo:{...I};d.outputPrice=Number(h),p("openAiModelInfo")(d)}},null)]}}),e(n,{label:"Temperature"},{default:()=>{var t,a,r,c,l;return[e(q,{value:(r=(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiModelInfo)!=null&&r.temperature?(l=(c=o.value.apiConfiguration)==null?void 0:c.openAiModelInfo)==null?void 0:l.temperature:I.temperature,placeholder:"",onChange:h=>{var P;let d=(P=o.value.apiConfiguration)!=null&&P.openAiModelInfo?o.value.apiConfiguration.openAiModelInfo:{...I};d.temperature=Number(h),p("openAiModelInfo")(d)}},null)]}})])]),f.value!=="openai"&&u.value&&e(x,null,[f.value==="anthropic"&&b(B),f.value==="openai-native"&&b(Q),f.value==="deepseek"&&b(_),f.value==="deepseek-aliyun"&&b(j),f.value==="qwen"&&b(((k=(g=o.value)==null?void 0:g.apiConfiguration)==null?void 0:k.qwenApiLine)==="china"?G:$),e(me,{modelInfo:H.value},null)]),!v.value&&e(n,{label:"Custom Instructions"},{default:()=>{var t;return[e(ae,{value:(t=o.value)==null?void 0:t.customInstructions,placeholder:'e.g. "Run unit tests at the end", "Use TypeScript with async/await", "Speak in Spanish"',onChange:a=>o.value.customInstructions=a.target.value??""},null),e("p",{style:{fontSize:"12px",marginTop:"5px",color:"var(--descriptionForeground)"}},[i("These instructions are added to the end of the system prompt sent with every request.")])]}}),!v.value&&e(n,{style:{marginBottom:5}},{default:()=>{var t;return[e(M,{checked:(t=o.value)==null?void 0:t.planActSeparateModelsSetting,onChange:a=>{const r=a.target.checked===!0;o.value.planActSeparateModelsSetting=r}},{default:()=>[i("Use different models for Plan and Act modes")]}),e("p",{style:{fontSize:"12px",marginTop:"5px",color:"var(--descriptionForeground)"}},[i("Switching between Plan and Act mode will persist the API and model used in the previous mode. This may be helpful e.g. when using a strong reasoning model to architect a plan for a cheaper coding model to act on.")])]}}),e(n,null,{default:()=>[e(oe,{type:"primary",htmlType:"submit",class:"w-full"},{default:()=>[i("Done")]})]})]}})])}}),me=O({props:{modelInfo:{type:Object,required:!0}},setup:s=>{const{modelInfo:u}=K(s),v=[()=>e(z,{key:"supportsImages",isSupported:u.value.supportsImages??!1,supportsLabel:"Supports images",doesNotSupportLabel:"Does not support images"},null),()=>e(z,{key:"supportsComputerUse",isSupported:u.value.supportsComputerUse??!1,supportsLabel:"Supports computer use",doesNotSupportLabel:"Does not support computer use"},null),()=>e(z,{key:"supportsPromptCache",isSupported:u.value.supportsPromptCache,supportsLabel:"Supports prompt caching",doesNotSupportLabel:"Does not support prompt caching"},null),()=>{var m;return u.value.maxTokens!==void 0&&u.value.maxTokens>0&&e("span",{key:"maxTokens"},[e("span",{style:{fontWeight:500}},[i("Max output:")])," ",(m=u.value.maxTokens)==null?void 0:m.toLocaleString(),i(" tokens")])},()=>u.value.inputPrice!==void 0&&u.value.inputPrice>0&&e("span",{key:"inputPrice"},[e("span",{style:{fontWeight:500}},[i("Input price:")])," ",S(u.value.inputPrice),i("/million tokens")]),()=>u.value.supportsPromptCache&&u.value.cacheWritesPrice&&e("span",{key:"cacheWritesPrice"},[e("span",{style:{fontWeight:500}},[i("Cache writes price:")])," ",S(u.value.cacheWritesPrice||0),i("/million tokens")]),()=>u.value.supportsPromptCache&&u.value.cacheReadsPrice&&e("span",{key:"cacheReadsPrice"},[e("span",{style:{fontWeight:500}},[i("Cache reads price:")])," ",S(u.value.cacheReadsPrice||0),i("/million tokens")]),()=>u.value.outputPrice!==void 0&&u.value.outputPrice>0&&e("span",{key:"outputPrice"},[e("span",{style:{fontWeight:500}},[i("Output price:")])," ",S(u.value.outputPrice),i("/million tokens")])].filter(m=>m()!==void 0);return()=>e("p",{style:{fontSize:"12px",marginTop:"2px",color:"var(--descriptionForeground)"}},[v.map((m,y)=>e("div",{key:y},[m()]))])}}),z=O({props:{isSupported:{type:Boolean,required:!0},supportsLabel:{type:String,required:!0},doesNotSupportLabel:{type:String,required:!0}},setup:s=>{const{isSupported:u,supportsLabel:v,doesNotSupportLabel:m}=K(s);return()=>e("span",{style:{fontWeight:500,color:u.value?"var(--successForeground)":"var(--errorForeground)"}},[e("i",{class:`codicon codicon-${u.value?"check":"x"}`,style:{marginRight:4,marginBottom:u.value?1:-1,fontSize:u.value?11:13,fontWeight:700,display:"inline-block",verticalAlign:"bottom"}},null),u.value?v.value:m.value])}}),S=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(s);function R(s){const u=(s==null?void 0:s.apiProvider)||"anthropic",v=s==null?void 0:s.apiModelId,m=(y,o)=>{let W,C;return v&&v in y?(W=v,C=y[v]):(W=o,C=y[o]),{selectedProvider:u,selectedModelId:W,selectedModelInfo:C}};switch(u){case"anthropic":return m(B,Y);case"openai-native":return m(Q,ue);case"deepseek":return m(_,ce);case"deepseek-aliyun":return m(j,le);case"qwen":const y=(s==null?void 0:s.qwenApiLine)==="china"?G:$,o=(s==null?void 0:s.qwenApiLine)==="china"?Pe:de;return m(y,o);case"openai":return{selectedProvider:u,selectedModelId:(s==null?void 0:s.openAiModelId)||"",selectedModelInfo:(s==null?void 0:s.openAiModelInfo)||I};default:return m(B,Y)}}export{ke as A,R as n,ne as v};
