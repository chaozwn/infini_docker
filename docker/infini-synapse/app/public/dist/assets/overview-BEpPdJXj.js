import{t as te,i as se,u as ae,a as ie,b as ne,c as oe,d as le}from"./install-Ctb9Q3K_.js";import{d as Y,s as j,e as P,b5 as re,b as E,b6 as ue,w as U,am as W,o as ce,f as fe,b7 as de,aD as ve,F as w,a1 as pe,r as f,n as me,q as he,v as V,c as d,E as k,aq as ge,k as _e}from"./index-xILFvC6p.js";import I from"./overview-header-item-DZkXGrQq.js";import{f as F}from"./index-BteXtNVv.js";import{a as R}from"./index-C0m2iGAn.js";import{C as Oe}from"./index-nJ6Hh7E2.js";import"./_castArrayLikeObject-tuUV6ov5.js";import"./_arrayIncludesWith-DbV0gfeD.js";import"./_baseUniq-CN2PPb1A.js";import"./index-huArR9Po.js";import"./collapseMotion-BTtFF6ah.js";import"./useRefs-GYf3EJWi.js";import"./pick-DTmDJZmp.js";import"./isMobile-BbN7I0i_.js";import"./useMergedState-BZJDsHAZ.js";import"./PlusOutlined-C4Zza3mj.js";const we=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function be(e){function o(t){return(...l)=>{if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[t].apply(e.value,l)}}function s(){const t=Object.create(null);return we.forEach(l=>{t[l]=o(l)}),t}return s()}function xe(e,o,s){U([s,e,o],([t,l,r],y,b)=>{let u=null;if(t&&l&&r){const{offsetWidth:g,offsetHeight:_}=t,T=r===!0?{}:r,{throttle:x=100,onResize:v}=T;let a=!1;const c=()=>{l.resize(),v==null||v()},p=x?te(c,x):c;u=new ResizeObserver(()=>{!a&&(a=!0,t.offsetWidth===g&&t.offsetHeight===_)||p()}),u.observe(t)}b(()=>{u&&(u.disconnect(),u=null)})})}const Ee={autoresize:[Boolean,Object]},ye=/^on[^a-z]/,q=e=>ye.test(e);function Te(e){const o={};for(const s in e)q(s)||(o[s]=e[s]);return o}function D(e,o){const s=ve(e)?w(e):e;return s&&typeof s=="object"&&"value"in s?s.value||o:s||o}const Le="ecLoadingOptions";function ze(e,o,s){const t=P(Le,{}),l=E(()=>({...D(t,{}),...s==null?void 0:s.value}));W(()=>{const r=e.value;r&&(o.value?r.showLoading(l.value):r.hideLoading())})}const Ae={loading:Boolean,loadingOptions:Object};let A=null;const Z="x-vue-echarts";function Se(){if(A!=null)return A;if(typeof HTMLElement>"u"||typeof customElements>"u")return A=!1;try{new Function("tag","class EChartsElement extends HTMLElement{__dispose=null;disconnectedCallback(){this.__dispose&&(this.__dispose(),this.__dispose=null)}}customElements.get(tag)==null&&customElements.define(tag,EChartsElement);")(Z)}catch{return A=!1}return A=!0}document.head.appendChild(document.createElement("style")).textContent=`x-vue-echarts{display:block;width:100%;height:100%;min-width:0}
`;const Ce=Se(),Ne="ecTheme",$e="ecInitOptions",ke="ecUpdateOptions",G=/(^&?~?!?)native:/;var K=Y({name:"echarts",props:{option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean,...Ee,...Ae},emits:{},inheritAttrs:!1,setup(e,{attrs:o}){const s=j(),t=j(),l=j(),r=P(Ne,null),y=P($e,null),b=P(ke,null),{autoresize:u,manualUpdate:g,loading:_,loadingOptions:T}=re(e),x=E(()=>l.value||e.option||null),v=E(()=>e.theme||D(r,{})),a=E(()=>e.initOptions||D(y,{})),c=E(()=>e.updateOptions||D(b,{})),p=E(()=>Te(o)),O={},S=ue().proxy.$listeners,C={};S?Object.keys(S).forEach(n=>{G.test(n)?O[n.replace(G,"$1")]=S[n]:C[n]=S[n]}):Object.keys(o).filter(n=>q(n)).forEach(n=>{let i=n.charAt(2).toLowerCase()+n.slice(3);if(i.indexOf("native:")===0){const L=`on${i.charAt(7).toUpperCase()}${i.slice(8)}`;O[L]=o[n];return}i.substring(i.length-4)==="Once"&&(i=`~${i.substring(0,i.length-4)}`),C[i]=o[n]});function N(n){if(!s.value)return;const i=t.value=se(s.value,v.value,a.value);e.group&&(i.group=e.group),Object.keys(C).forEach(z=>{let m=C[z];if(!m)return;let h=z.toLowerCase();h.charAt(0)==="~"&&(h=h.substring(1),m.__once__=!0);let B=i;if(h.indexOf("zr:")===0&&(B=i.getZr(),h=h.substring(3)),m.__once__){delete m.__once__;const X=m;m=(...ee)=>{X(...ee),B.off(h,m)}}B.on(h,m)});function L(){i&&!i.isDisposed()&&i.resize()}function H(){const z=n||x.value;z&&i.setOption(z,c.value)}u.value?pe(()=>{L(),H()}):H()}function J(n,i){e.manualUpdate&&(l.value=n),t.value?t.value.setOption(n,i||{}):N(n)}function M(){t.value&&(t.value.dispose(),t.value=void 0)}let $=null;U(g,n=>{typeof $=="function"&&($(),$=null),n||($=U(()=>e.option,(i,L)=>{i&&(t.value?t.value.setOption(i,{notMerge:i!==L,...c.value}):N())},{deep:!0}))},{immediate:!0}),U([v,a],()=>{M(),N()},{deep:!0}),W(()=>{e.group&&t.value&&(t.value.group=e.group)});const Q=be(t);return ze(t,_,T),xe(t,u,s),ce(()=>{N()}),fe(()=>{Ce&&s.value?s.value.__dispose=M:M()}),{chart:t,root:s,setOption:J,nonEventAttrs:p,nativeListeners:O,...Q}},render(){const e={...this.nonEventAttrs,...this.nativeListeners};return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",de(Z,e)}});const Ie={class:"netdisk-overview-container"},Pe={class:"ov-header"},Ue={class:"ov-content"},De=Y({name:"NetDiskOverview",__name:"overview",setup(e){ae([ie,ne,oe,le]);const o=f(!1),s=f(0),t=f("B"),l=f(0),r=f(0),y=f("B"),b=f(0),u=f("flow"),g=f({tooltip:{trigger:"axis",formatter:a=>`<div>${a[0].name}号</div><div>${a[0].marker} ${a[0].seriesName}：${a[0].value}MB</div>`},xAxis:{type:"category",boundaryGap:!1,axisLine:{show:!1},splitLine:{show:!1},data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}MB"},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},grid:{show:!1,top:"5%",right:"2%",left:"5%",bottom:"8%"},series:[{name:"使用流量",data:[],type:"line",smooth:.6,areaStyle:{color:"#8cc6f2"},itemStyle:{opacity:0},lineStyle:{color:"#8cc6f2"}}]}),_=f({tooltip:{trigger:"axis",formatter:a=>`<div>${a[0].name}号</div><div>${a[0].marker} ${a[0].seriesName}：${a[0].value}MB</div>`},xAxis:{type:"category",boundaryGap:!1,axisLine:{show:!1},splitLine:{show:!1},data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}MB"},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},grid:{show:!1,top:"5%",right:"2%",left:"5%",bottom:"8%"},series:[{name:"占用空间",data:[],type:"line",smooth:.6,areaStyle:{color:"#8cc6f2"},itemStyle:{opacity:0},lineStyle:{color:"#8cc6f2"}}]}),T=async()=>{try{x();const a=await ge.netDiskOverview.netDiskOverviewSpace(),c=F(a.spaceSize).split(" ");s.value=Number(c[0]),t.value=c[1],l.value=a.fileSize;const p=F(a.flowSize).split(" ");r.value=Number(p[0]),y.value=p[1],b.value=a.hitSize,g.value.xAxis.data=a.flowTrend.times,g.value.series[0].data=a.flowTrend.datas.map(O=>(O/1024/1024).toFixed()),_.value.xAxis.data=a.sizeTrend.times,_.value.series[0].data=a.sizeTrend.datas.map(O=>(O/1024/1024).toFixed())}finally{v()}},x=()=>{o.value=!0},v=()=>{o.value=!1};return T(),(a,c)=>(me(),he("div",Ie,[V("div",Pe,[d(I,{title:"存储总量",value:s.value,suffix:t.value},null,8,["value","suffix"]),d(I,{title:"文件数量",value:l.value,suffix:"个"},null,8,["value"]),d(I,{title:"下载流量",value:r.value,suffix:y.value},null,8,["value","suffix"]),d(I,{title:"GET请求次数",value:b.value,suffix:"次"},null,8,["value"])]),V("div",Ue,[d(w(Oe),{shadow:"hover"},{default:k(()=>[d(w(R),{modelValue:u.value,"onUpdate:modelValue":c[0]||(c[0]=p=>u.value=p),"destroy-inactive-tab-pane":""},{default:k(()=>[d(w(R).TabPane,{key:"flow",tab:"流量趋势"},{default:k(()=>[d(w(K),{option:g.value,style:{height:"320px"},autoresize:""},null,8,["option"])]),_:1}),d(w(R).TabPane,{key:"space",tab:"容量趋势"},{default:k(()=>[d(w(K),{option:_.value,style:{height:"320px"},autoresize:""},null,8,["option"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])]))}}),et=_e(De,[["__scopeId","data-v-8299a4ee"]]);export{et as default};
