import{d as O,b5 as K,ab as Z,r as U,c1 as ee,w as te,c as e,x as i,J as y,a7 as x,bL as ae,bD as oe,az as se}from"./index-xILFvC6p.js";import{u as re}from"./ai-BKqzNhcZ.js";import{a as ie,F as n}from"./index-CJBistm3.js";import{S as N,a as A,C as q}from"./index-BlCeSx5_.js";import{I as T}from"./index-CUELb_gB.js";function ne(r){if(r)switch(r.apiProvider){case"anthropic":if(!r.apiKey)return"You must provide a valid API key or choose a different provider.";break;case"openai-native":if(!r.openAiNativeApiKey)return"You must provide a valid API key or choose a different provider.";break;case"deepseek":if(!r.deepSeekApiKey)return"You must provide a valid API key or choose a different provider.";break;case"deepseek-aliyun":if(!r.deepSeekAliyunKey)return"You must provide a valid API key or choose a different provider.";break;case"qwen":if(!r.qwenApiKey)return"You must provide a valid API key or choose a different provider.";break;case"openai":if(!r.openAiBaseUrl||!r.openAiApiKey||!r.openAiModelId)return"You must provide a valid base URL, API key, and model ID.";break}}const Y="claude-3-7-sonnet-20250219",B={"claude-3-7-sonnet-20250219":{maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsComputerUse:!0,supportsPromptCache:!0,inputPrice:3,outputPrice:15,cacheWritesPrice:3.75,cacheReadsPrice:.3},"claude-3-5-sonnet-20241022":{maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsComputerUse:!0,supportsPromptCache:!0,inputPrice:3,outputPrice:15,cacheWritesPrice:3.75,cacheReadsPrice:.3},"claude-3-5-haiku-20241022":{maxTokens:8192,contextWindow:2e5,supportsImages:!1,supportsPromptCache:!0,inputPrice:.8,outputPrice:4,cacheWritesPrice:1,cacheReadsPrice:.08},"claude-3-opus-20240229":{maxTokens:4096,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!0,inputPrice:15,outputPrice:75,cacheWritesPrice:18.75,cacheReadsPrice:1.5},"claude-3-haiku-20240307":{maxTokens:4096,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!0,inputPrice:.25,outputPrice:1.25,cacheWritesPrice:.3,cacheReadsPrice:.03}},I={maxTokens:-1,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:0,outputPrice:0,temperature:0},ce="gpt-4o",Q={"o3-mini":{maxTokens:1e5,contextWindow:2e5,supportsImages:!1,supportsPromptCache:!0,inputPrice:1.1,outputPrice:4.4,cacheReadsPrice:.55},o1:{maxTokens:1e5,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!1,inputPrice:15,outputPrice:60,cacheReadsPrice:7.5},"o1-preview":{maxTokens:32768,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!0,inputPrice:15,outputPrice:60,cacheReadsPrice:7.5},"o1-mini":{maxTokens:65536,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!0,inputPrice:1.1,outputPrice:4.4,cacheReadsPrice:.55},"gpt-4o":{maxTokens:4096,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!0,inputPrice:2.5,outputPrice:10,cacheReadsPrice:1.25},"gpt-4o-mini":{maxTokens:16384,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!0,inputPrice:.15,outputPrice:.6,cacheReadsPrice:.075},"gpt-4.5-preview":{maxTokens:16384,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:75,outputPrice:150}},ue="2024-08-01-preview",pe="deepseek-chat",_={"deepseek-chat":{maxTokens:8e3,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!0,inputPrice:.27,outputPrice:1.1,cacheWritesPrice:.27,cacheReadsPrice:.07},"deepseek-reasoner":{maxTokens:8e3,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!0,inputPrice:.55,outputPrice:2.19,cacheWritesPrice:.55,cacheReadsPrice:.14}},le="deepseek-v3",j={"deepseek-v3":{maxTokens:8e3,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!0,inputPrice:0,outputPrice:.28,cacheWritesPrice:.14,cacheReadsPrice:.014},"deepseek-r1":{maxTokens:8e3,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!0,inputPrice:0,outputPrice:2.19,cacheWritesPrice:.55,cacheReadsPrice:.14}},de="qwen-coder-plus-latest",Pe="qwen-coder-plus-latest",$={"qwen3-235b-a22b":{maxTokens:16384,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:2,outputPrice:8,cacheWritesPrice:2,cacheReadsPrice:8},"qwen3-32b":{maxTokens:16384,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:2,outputPrice:8,cacheWritesPrice:2,cacheReadsPrice:8},"qwen3-30b-a3b":{maxTokens:16384,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.75,outputPrice:3,cacheWritesPrice:.75,cacheReadsPrice:3},"qwen3-14b":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:1,outputPrice:4,cacheWritesPrice:1,cacheReadsPrice:4},"qwen3-8b":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.5,outputPrice:2,cacheWritesPrice:.5,cacheReadsPrice:2},"qwen3-4b":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.3,outputPrice:1.2,cacheWritesPrice:.3,cacheReadsPrice:1.2},"qwen3-1.7b":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:.3,outputPrice:1.2,cacheWritesPrice:.3,cacheReadsPrice:1.2},"qwen3-0.6b":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:.3,outputPrice:1.2,cacheWritesPrice:.3,cacheReadsPrice:1.2},"qwen2.5-coder-32b-instruct":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.002,outputPrice:.006,cacheWritesPrice:.002,cacheReadsPrice:.006},"qwen2.5-coder-14b-instruct":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.002,outputPrice:.006,cacheWritesPrice:.002,cacheReadsPrice:.006},"qwen2.5-coder-7b-instruct":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.001,outputPrice:.002,cacheWritesPrice:.001,cacheReadsPrice:.002},"qwen2.5-coder-3b-instruct":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen2.5-coder-1.5b-instruct":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen2.5-coder-0.5b-instruct":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen-coder-plus-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:3.5,outputPrice:7,cacheWritesPrice:3.5,cacheReadsPrice:7},"qwen-plus-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.8,outputPrice:2,cacheWritesPrice:.8,cacheReadsPrice:.2},"qwen-turbo-latest":{maxTokens:1e6,contextWindow:1e6,supportsImages:!1,supportsPromptCache:!1,inputPrice:.8,outputPrice:2,cacheWritesPrice:.8,cacheReadsPrice:2},"qwen-max-latest":{maxTokens:30720,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:2.4,outputPrice:9.6,cacheWritesPrice:2.4,cacheReadsPrice:9.6},"qwen-coder-plus":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:3.5,outputPrice:7,cacheWritesPrice:3.5,cacheReadsPrice:7},"qwen-plus":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.8,outputPrice:2,cacheWritesPrice:.8,cacheReadsPrice:.2},"qwen-turbo":{maxTokens:1e6,contextWindow:1e6,supportsImages:!1,supportsPromptCache:!1,inputPrice:.3,outputPrice:.6,cacheWritesPrice:.3,cacheReadsPrice:.6},"qwen-max":{maxTokens:30720,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:2.4,outputPrice:9.6,cacheWritesPrice:2.4,cacheReadsPrice:9.6},"deepseek-v3":{maxTokens:8e3,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!0,inputPrice:0,outputPrice:.28,cacheWritesPrice:.14,cacheReadsPrice:.014},"deepseek-r1":{maxTokens:8e3,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!0,inputPrice:0,outputPrice:2.19,cacheWritesPrice:.55,cacheReadsPrice:.14},"qwen-vl-max":{maxTokens:30720,contextWindow:32768,supportsImages:!0,supportsPromptCache:!1,inputPrice:3,outputPrice:9,cacheWritesPrice:3,cacheReadsPrice:9},"qwen-vl-max-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!0,supportsPromptCache:!1,inputPrice:3,outputPrice:9,cacheWritesPrice:3,cacheReadsPrice:9},"qwen-vl-plus":{maxTokens:6e3,contextWindow:8e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:1.5,outputPrice:4.5,cacheWritesPrice:1.5,cacheReadsPrice:4.5},"qwen-vl-plus-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!0,supportsPromptCache:!1,inputPrice:1.5,outputPrice:4.5,cacheWritesPrice:1.5,cacheReadsPrice:4.5}},J={"qwen3-235b-a22b":{maxTokens:16384,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:2,outputPrice:8,cacheWritesPrice:2,cacheReadsPrice:8},"qwen3-32b":{maxTokens:16384,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:2,outputPrice:8,cacheWritesPrice:2,cacheReadsPrice:8},"qwen3-30b-a3b":{maxTokens:16384,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.75,outputPrice:3,cacheWritesPrice:.75,cacheReadsPrice:3},"qwen3-14b":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:1,outputPrice:4,cacheWritesPrice:1,cacheReadsPrice:4},"qwen3-8b":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.5,outputPrice:2,cacheWritesPrice:.5,cacheReadsPrice:2},"qwen3-4b":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.3,outputPrice:1.2,cacheWritesPrice:.3,cacheReadsPrice:1.2},"qwen3-1.7b":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:.3,outputPrice:1.2,cacheWritesPrice:.3,cacheReadsPrice:1.2},"qwen3-0.6b":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:.3,outputPrice:1.2,cacheWritesPrice:.3,cacheReadsPrice:1.2},"qwen2.5-coder-32b-instruct":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.002,outputPrice:.006,cacheWritesPrice:.002,cacheReadsPrice:.006},"qwen2.5-coder-14b-instruct":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.002,outputPrice:.006,cacheWritesPrice:.002,cacheReadsPrice:.006},"qwen2.5-coder-7b-instruct":{maxTokens:8192,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.001,outputPrice:.002,cacheWritesPrice:.001,cacheReadsPrice:.002},"qwen2.5-coder-3b-instruct":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen2.5-coder-1.5b-instruct":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen2.5-coder-0.5b-instruct":{maxTokens:8192,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen-coder-plus-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:3.5,outputPrice:7,cacheWritesPrice:3.5,cacheReadsPrice:7},"qwen-plus-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.8,outputPrice:2,cacheWritesPrice:.8,cacheReadsPrice:.2},"qwen-turbo-latest":{maxTokens:1e6,contextWindow:1e6,supportsImages:!1,supportsPromptCache:!1,inputPrice:.8,outputPrice:2,cacheWritesPrice:.8,cacheReadsPrice:2},"qwen-max-latest":{maxTokens:30720,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:2.4,outputPrice:9.6,cacheWritesPrice:2.4,cacheReadsPrice:9.6},"qwq-plus-latest":{maxTokens:8192,contextWindow:131071,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwq-plus":{maxTokens:8192,contextWindow:131071,supportsImages:!1,supportsPromptCache:!1,inputPrice:0,outputPrice:0,cacheWritesPrice:0,cacheReadsPrice:0},"qwen-coder-plus":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:3.5,outputPrice:7,cacheWritesPrice:3.5,cacheReadsPrice:7},"qwen-plus":{maxTokens:129024,contextWindow:131072,supportsImages:!1,supportsPromptCache:!1,inputPrice:.8,outputPrice:2,cacheWritesPrice:.8,cacheReadsPrice:.2},"qwen-turbo":{maxTokens:1e6,contextWindow:1e6,supportsImages:!1,supportsPromptCache:!1,inputPrice:.3,outputPrice:.6,cacheWritesPrice:.3,cacheReadsPrice:.6},"qwen-max":{maxTokens:30720,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:2.4,outputPrice:9.6,cacheWritesPrice:2.4,cacheReadsPrice:9.6},"qwen-vl-max":{maxTokens:30720,contextWindow:32768,supportsImages:!0,supportsPromptCache:!1,inputPrice:3,outputPrice:9,cacheWritesPrice:3,cacheReadsPrice:9},"qwen-vl-max-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!0,supportsPromptCache:!1,inputPrice:3,outputPrice:9,cacheWritesPrice:3,cacheReadsPrice:9},"qwen-vl-plus":{maxTokens:6e3,contextWindow:8e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:1.5,outputPrice:4.5,cacheWritesPrice:1.5,cacheReadsPrice:4.5},"qwen-vl-plus-latest":{maxTokens:129024,contextWindow:131072,supportsImages:!0,supportsPromptCache:!1,inputPrice:1.5,outputPrice:4.5,cacheWritesPrice:1.5,cacheReadsPrice:4.5}};function E(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!se(r)}const ke=O({props:{onDone:{type:Function},showModelOptions:{type:Boolean,required:!0},isPopup:{type:Boolean,default:!1}},setup:r=>{var F,V;const{showModelOptions:c,isPopup:v}=K(r),m=re(),{state:w,modifyState:o}=Z(m),{postMessage:C}=m,W=U(!!((F=o.value.apiConfiguration)!=null&&F.anthropicBaseUrl)),D=U(!!((V=o.value.apiConfiguration)!=null&&V.azureApiVersion)),M=U(!1),{onDone:L}=r,u=g=>k=>{var t;o.value.apiConfiguration={...(t=o.value)==null?void 0:t.apiConfiguration,[g]:k}},{selectedProvider:f,selectedModelId:G,selectedModelInfo:H}=K(ee(()=>{var g;return S((g=o.value)==null?void 0:g.apiConfiguration)})),b=g=>{let k;return e(n,{label:"Model",rules:[{required:!0,message:"Please select a model"}]},{default:()=>[e(N,{value:G.value,placeholder:"Select a model...",onChange:t=>u("apiModelId")(t)},E(k=Object.keys(g).map(t=>e(A,{key:t,value:t},E(t)?t:{default:()=>[t]})))?k:{default:()=>[k]})]})},X=()=>{const g=ne(o.value.apiConfiguration);let k=o.value.apiConfiguration;g&&(k=void 0),C({type:"updateSettings",planActSeparateModelsSetting:o.value.planActSeparateModelsSetting,apiConfiguration:k}),L==null||L()};return te(f,(g,k)=>{var t,a,s,p,l,h;if(g!==((a=(t=w.value)==null?void 0:t.apiConfiguration)==null?void 0:a.apiProvider)){const{selectedProvider:d,selectedModelId:P}=S(o.value.apiConfiguration);u("apiProvider")(d),u("apiModelId")(P)}else if(g===((p=(s=w.value)==null?void 0:s.apiConfiguration)==null?void 0:p.apiProvider)){const{selectedProvider:d,selectedModelId:P}=S((l=w.value)==null?void 0:l.apiConfiguration);u("apiProvider")(d),u("apiModelId")(P)}else{const{selectedProvider:d,selectedModelId:P}=S(o.value.apiConfiguration);u("apiProvider")(d),u("apiModelId")(P)}(h=o.value.apiConfiguration)!=null&&h.qwenApiLine||u("qwenApiLine")("china")},{immediate:!0}),()=>e(y,null,[e("style",null,[`
          .settings-form .ant-form-item {
                margin-bottom: ${v.value?"10px":"15px"};
          }
`]),e(ie,{model:o.value,onFinish:X,layout:"vertical",class:"settings-form overflow-scroll h-full",style:{width:"100%"},size:v.value?"middle":"small"},{default:()=>{var g,k;return[e(n,{label:"API provider",rules:[{required:!0,message:"Please select API Provider"}]},{default:()=>[e(N,{value:f.value,placeholder:"please select API Provider",onChange:t=>u("apiProvider")(t)},{default:()=>[e(A,{value:"anthropic"},{default:()=>[i("Anthropic")]}),e(A,{value:"deepseek"},{default:()=>[i("Deepseek")]}),e(A,{value:"openai"},{default:()=>[i("OpenAi Compatible")]}),e(A,{value:"openai-native"},{default:()=>[i("OpenAi")]}),e(A,{value:"deepseek-aliyun"},{default:()=>[i("Aliyun Deepseek")]}),e(A,{value:"qwen"},{default:()=>[i("Aliyun Qwen")]})]})]}),f.value==="anthropic"&&e(y,null,[e(n,{label:"Anthropic API Key",rules:[{required:!0,message:"Please enter API Key",trigger:"blur"},{min:1,message:"api key length must be at least 1 characters",trigger:"blur"}]},{default:()=>{var t,a;return[e(x,{value:((a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.apiKey)||"",type:"password",placeholder:"Enter API Key...",onChange:s=>u("apiKey")(s.target.value)},null)]}}),e(n,null,{default:()=>[e(q,{checked:W.value,onChange:t=>{const a=t.target.checked;W.value=a,a||u("anthropicBaseUrl")("")}},{default:()=>[i("Use custom base URL")]})]}),W.value&&e(n,null,{default:()=>{var t,a;return[e(x,{type:"url",value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.anthropicBaseUrl,placeholder:"Default: https://api.anthropic.com",onChange:s=>u("anthropicBaseUrl")(s.target.value)},null)]}}),e(n,null,{default:()=>{var t,a;return[e("div",null,[e("span",null,[i("This key is stored locally and only used to make API requests from this extension.")]),!((a=(t=o.value)==null?void 0:t.apiConfiguration)!=null&&a.apiKey)&&e("a",{href:"https://console.anthropic.com/settings/keys",style:{display:"inline",fontSize:"inherit"},target:"_blank"},[i("You can get an Anthropic API key by signing up here.")])])]}})]),f.value==="openai-native"&&e(y,null,[e(n,{label:"OpenAI API Key",rules:[{required:!0,message:"Please enter API Key",trigger:"blur"},{min:1,message:"api key length must be at least 1 characters",trigger:"blur"}]},{default:()=>{var t,a;return[e(x,{value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiNativeApiKey,type:"password",placeholder:"Enter API Key...",onChange:s=>u("openAiNativeApiKey")(s.target.value)},null)]}}),e(n,null,{default:()=>{var t,a;return[e("div",null,[e("span",null,[i("This key is stored locally and only used to make API requests from this extension.")]),!((a=(t=o.value)==null?void 0:t.apiConfiguration)!=null&&a.openAiNativeApiKey)&&e("a",{href:"https://platform.openai.com/api-keys",style:{display:"inline",fontSize:"inherit"},target:"_blank"},[i("You can get an OpenAI API key by signing up here.")])])]}})]),f.value==="deepseek"&&e(y,null,[e(n,{label:"DeepSeek API Key",rules:[{required:!0,message:"Please enter API Key",trigger:"blur"},{min:1,message:"api key length must be at least 1 characters",trigger:"blur"}]},{default:()=>{var t,a;return[e(x,{value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.deepSeekApiKey,type:"password",placeholder:"Enter API Key...",onChange:s=>u("deepSeekApiKey")(s.target.value)},null)]}}),e(n,null,{default:()=>{var t,a;return[e("div",null,[e("span",null,[i("This key is stored locally and only used to make API requests from this extension.")]),!((a=(t=o.value)==null?void 0:t.apiConfiguration)!=null&&a.deepSeekApiKey)&&e("a",{href:"https://www.deepseek.com/",style:{display:"inline",fontSize:"inherit"},target:"_blank"},[i("You can get a DeepSeek API key by signing up here.")])])]}})]),f.value==="qwen"&&e(y,null,[e(n,{label:"Alibaba API Line",rules:[{required:!0,message:"Please select qwen API line"}]},{default:()=>{var t,a;return[e(N,{value:((a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.qwenApiLine)??"china",placeholder:"Please select qwen API line",onChange:s=>u("qwenApiLine")(s)},{default:()=>[e(A,{value:"china"},{default:()=>[i("China API")]}),e(A,{value:"international"},{default:()=>[i("International API")]})]})]}}),e(n,null,{default:()=>[i("Please select the appropriate API interface based on your location. If you are in China, choose the China API interface. Otherwise, choose the International API interface.")]}),e(n,{label:"Qwen API Key",rules:[{required:!0,message:"Please enter API Key",trigger:"blur"},{min:1,message:"api key length must be at least 1 characters",trigger:"blur"}]},{default:()=>{var t,a;return[e(x,{value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.qwenApiKey,type:"password",placeholder:"Enter API Key...",onChange:s=>u("qwenApiKey")(s.target.value)},null)]}}),e(n,null,{default:()=>{var t,a;return[e("div",null,[e("span",null,[i("This key is stored locally and only used to make API requests from this extension.")]),!((a=(t=o.value)==null?void 0:t.apiConfiguration)!=null&&a.qwenApiKey)&&e("a",{href:"https://bailian.console.aliyun.com/",style:{display:"inline",fontSize:"inherit"},target:"_blank"},[i("You can get a Qwen API key by signing up here.")])])]}})]),f.value==="deepseek-aliyun"&&e(y,null,[e(n,{label:"Aliyun DeepSeek API Key",rules:[{required:!0,message:"Please enter API Key",trigger:"blur"},{min:1,message:"api key length must be at least 1 characters",trigger:"blur"}]},{default:()=>{var t,a;return[e(x,{value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.deepSeekAliyunKey,type:"password",placeholder:"Enter API Key...",onChange:s=>u("deepSeekAliyunKey")(s.target.value)},null)]}}),e(n,null,{default:()=>{var t,a;return[e("div",null,[e("span",null,[i("This key is stored locally and only used to make API requests from this extension.")]),!((a=(t=o.value)==null?void 0:t.apiConfiguration)!=null&&a.deepSeekAliyunKey)&&e("a",{href:"https://bailian.console.aliyun.com/",style:{display:"inline",fontSize:"inherit"},target:"_blank"},[i("You can get a Aliyun DeepSeek API key by signing up here.")])])]}})]),f.value==="openai"&&e(y,null,[e(n,{label:"Base URL",rules:[{required:!0,message:"Please enter Base URL",trigger:"blur"},{min:1,message:"Base url length must be at least 1 characters",trigger:"blur"}]},{default:()=>{var t,a;return[e(x,{type:"url",value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiBaseUrl,placeholder:"Enter Base URL...",onChange:s=>u("openAiBaseUrl")(s.target.value)},null)]}}),e(n,{label:"API Key",rules:[{required:!0,message:"Please enter API Key",trigger:"blur"},{min:1,message:"Api key length must be at least 1 characters",trigger:"blur"}]},{default:()=>{var t,a;return[e(x,{value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiApiKey,type:"password",placeholder:"Enter API Key...",onChange:s=>u("openAiApiKey")(s.target.value)},null)]}}),e(n,{label:"Model ID",rules:[{required:!0,message:"Please enter Model ID",trigger:"blur"},{min:1,message:"Model id length must be at least 6 characters",trigger:"blur"}]},{default:()=>{var t,a;return[e(x,{value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiModelId,placeholder:"Enter Model ID...",onChange:s=>u("openAiModelId")(s.target.value)},null)]}}),e(n,null,{default:()=>[e(q,{checked:D.value,onChange:t=>{const a=t.target.checked;D.value=a,a||u("azureApiVersion")("")}},{default:()=>[i("Set Azure API version")]})]}),D.value&&e(n,null,{default:()=>{var t,a;return[e(x,{value:(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.azureApiVersion,placeholder:`Default: ${ue}`,onChange:s=>u("azureApiVersion")(s.target.value)},null)]}}),e("div",{style:{color:"var(--descriptionForeground)",display:"flex",margin:"10px 0",cursor:"pointer",alignItems:"center"},onClick:()=>M.value=!M.value},[e("span",{class:`codicon ${M.value?"codicon-chevron-down":"codicon-chevron-right"}`,style:{marginRight:"4px"}},null),e("span",{style:{fontWeight:700,textTransform:"uppercase"}},[i("Model Configuration")])]),M.value&&e(y,null,[e(n,null,{default:()=>{var t,a;return[e(q,{checked:!!((a=(t=o.value.apiConfiguration)==null?void 0:t.openAiModelInfo)!=null&&a.supportsImages),onChange:s=>{var h;const p=s.target.checked;let l=(h=o.value.apiConfiguration)!=null&&h.openAiModelInfo?o.value.apiConfiguration.openAiModelInfo:{...I};l.supportsImages=p,p||u("openAiModelInfo")(l)}},{default:()=>[i("Supports Images")]})]}}),e(n,null,{default:()=>{var t,a;return[e(q,{checked:!!((a=(t=o.value.apiConfiguration)==null?void 0:t.openAiModelInfo)!=null&&a.supportsComputerUse),onChange:s=>{var h;const p=s.target.checked;let l=(h=o.value.apiConfiguration)!=null&&h.openAiModelInfo?o.value.apiConfiguration.openAiModelInfo:{...I};l.supportsComputerUse=p,p||u("openAiModelInfo")(l)}},{default:()=>[i("Supports Computer Use")]})]}}),e(n,{label:"Context Window Size"},{default:()=>{var t,a,s,p,l;return[e(T,{value:(s=(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiModelInfo)!=null&&s.contextWindow?(l=(p=o.value.apiConfiguration)==null?void 0:p.openAiModelInfo)==null?void 0:l.contextWindow:I.contextWindow,placeholder:"",onChange:h=>{var P;let d=(P=o.value.apiConfiguration)!=null&&P.openAiModelInfo?o.value.apiConfiguration.openAiModelInfo:{...I};d.contextWindow=Number(h),u("openAiModelInfo")(d)}},null)]}}),e(n,{label:"Max Output Tokens"},{default:()=>{var t,a,s,p,l;return[e(T,{value:(s=(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiModelInfo)!=null&&s.maxTokens?(l=(p=o.value.apiConfiguration)==null?void 0:p.openAiModelInfo)==null?void 0:l.maxTokens:I.maxTokens,placeholder:"",onChange:h=>{var P;let d=(P=o.value.apiConfiguration)!=null&&P.openAiModelInfo?o.value.apiConfiguration.openAiModelInfo:{...I};d.maxTokens=Number(h),u("openAiModelInfo")(d)}},null)]}}),e(n,{label:"Input Price / 1M tokens"},{default:()=>{var t,a,s,p,l;return[e(T,{value:(s=(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiModelInfo)!=null&&s.inputPrice?(l=(p=o.value.apiConfiguration)==null?void 0:p.openAiModelInfo)==null?void 0:l.inputPrice:I.inputPrice,placeholder:"",onChange:h=>{var P;let d=(P=o.value.apiConfiguration)!=null&&P.openAiModelInfo?o.value.apiConfiguration.openAiModelInfo:{...I};d.inputPrice=Number(h),u("openAiModelInfo")(d)}},null)]}}),e(n,{label:"Output Price / 1M tokens"},{default:()=>{var t,a,s,p,l;return[e(T,{value:(s=(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiModelInfo)!=null&&s.outputPrice?(l=(p=o.value.apiConfiguration)==null?void 0:p.openAiModelInfo)==null?void 0:l.outputPrice:I.outputPrice,placeholder:"",onChange:h=>{var P;let d=(P=o.value.apiConfiguration)!=null&&P.openAiModelInfo?o.value.apiConfiguration.openAiModelInfo:{...I};d.outputPrice=Number(h),u("openAiModelInfo")(d)}},null)]}}),e(n,{label:"Temperature"},{default:()=>{var t,a,s,p,l;return[e(T,{value:(s=(a=(t=o.value)==null?void 0:t.apiConfiguration)==null?void 0:a.openAiModelInfo)!=null&&s.temperature?(l=(p=o.value.apiConfiguration)==null?void 0:p.openAiModelInfo)==null?void 0:l.temperature:I.temperature,placeholder:"",onChange:h=>{var P;let d=(P=o.value.apiConfiguration)!=null&&P.openAiModelInfo?o.value.apiConfiguration.openAiModelInfo:{...I};d.temperature=Number(h),u("openAiModelInfo")(d)}},null)]}})])]),f.value!=="openai"&&c.value&&e(y,null,[f.value==="anthropic"&&b(B),f.value==="openai-native"&&b(Q),f.value==="deepseek"&&b(_),f.value==="deepseek-aliyun"&&b(j),f.value==="qwen"&&b(((k=(g=o.value)==null?void 0:g.apiConfiguration)==null?void 0:k.qwenApiLine)==="china"?J:$),e(me,{modelInfo:H.value},null)]),!v.value&&e(n,{label:"Custom Instructions"},{default:()=>{var t;return[e(ae,{value:(t=o.value)==null?void 0:t.customInstructions,placeholder:'e.g. "Run unit tests at the end", "Use TypeScript with async/await", "Speak in Spanish"',onChange:a=>o.value.customInstructions=a.target.value??""},null),e("p",{style:{fontSize:"12px",marginTop:"5px",color:"var(--descriptionForeground)"}},[i("These instructions are added to the end of the system prompt sent with every request.")])]}}),!v.value&&e(n,{style:{marginBottom:5}},{default:()=>{var t;return[e(q,{checked:(t=o.value)==null?void 0:t.planActSeparateModelsSetting,onChange:a=>{const s=a.target.checked===!0;o.value.planActSeparateModelsSetting=s}},{default:()=>[i("Use different models for Plan and Act modes")]}),e("p",{style:{fontSize:"12px",marginTop:"5px",color:"var(--descriptionForeground)"}},[i("Switching between Plan and Act mode will persist the API and model used in the previous mode. This may be helpful e.g. when using a strong reasoning model to architect a plan for a cheaper coding model to act on.")])]}}),e(n,null,{default:()=>[e(oe,{type:"primary",htmlType:"submit",class:"w-full"},{default:()=>[i("Done")]})]})]}})])}}),me=O({props:{modelInfo:{type:Object,required:!0}},setup:r=>{const{modelInfo:c}=K(r),v=[()=>e(z,{key:"supportsImages",isSupported:c.value.supportsImages??!1,supportsLabel:"Supports images",doesNotSupportLabel:"Does not support images"},null),()=>e(z,{key:"supportsComputerUse",isSupported:c.value.supportsComputerUse??!1,supportsLabel:"Supports computer use",doesNotSupportLabel:"Does not support computer use"},null),()=>e(z,{key:"supportsPromptCache",isSupported:c.value.supportsPromptCache,supportsLabel:"Supports prompt caching",doesNotSupportLabel:"Does not support prompt caching"},null),()=>{var m;return c.value.maxTokens!==void 0&&c.value.maxTokens>0&&e("span",{key:"maxTokens"},[e("span",{style:{fontWeight:500}},[i("Max output:")])," ",(m=c.value.maxTokens)==null?void 0:m.toLocaleString(),i(" tokens")])},()=>c.value.inputPrice!==void 0&&c.value.inputPrice>0&&e("span",{key:"inputPrice"},[e("span",{style:{fontWeight:500}},[i("Input price:")])," ",R(c.value.inputPrice),i("/million tokens")]),()=>c.value.supportsPromptCache&&c.value.cacheWritesPrice&&e("span",{key:"cacheWritesPrice"},[e("span",{style:{fontWeight:500}},[i("Cache writes price:")])," ",R(c.value.cacheWritesPrice||0),i("/million tokens")]),()=>c.value.supportsPromptCache&&c.value.cacheReadsPrice&&e("span",{key:"cacheReadsPrice"},[e("span",{style:{fontWeight:500}},[i("Cache reads price:")])," ",R(c.value.cacheReadsPrice||0),i("/million tokens")]),()=>c.value.outputPrice!==void 0&&c.value.outputPrice>0&&e("span",{key:"outputPrice"},[e("span",{style:{fontWeight:500}},[i("Output price:")])," ",R(c.value.outputPrice),i("/million tokens")])].filter(m=>m()!==void 0);return()=>e("p",{style:{fontSize:"12px",marginTop:"2px",color:"var(--descriptionForeground)"}},[v.map((m,w)=>e("div",{key:w},[m()]))])}}),z=O({props:{isSupported:{type:Boolean,required:!0},supportsLabel:{type:String,required:!0},doesNotSupportLabel:{type:String,required:!0}},setup:r=>{const{isSupported:c,supportsLabel:v,doesNotSupportLabel:m}=K(r);return()=>e("span",{style:{fontWeight:500,color:c.value?"var(--successForeground)":"var(--errorForeground)"}},[e("i",{class:`codicon codicon-${c.value?"check":"x"}`,style:{marginRight:4,marginBottom:c.value?1:-1,fontSize:c.value?11:13,fontWeight:700,display:"inline-block",verticalAlign:"bottom"}},null),c.value?v.value:m.value])}}),R=r=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(r);function S(r){const c=(r==null?void 0:r.apiProvider)||"anthropic",v=r==null?void 0:r.apiModelId,m=(w,o)=>{let C,W;return v&&v in w?(C=v,W=w[v]):(C=o,W=w[o]),{selectedProvider:c,selectedModelId:C,selectedModelInfo:W}};switch(c){case"anthropic":return m(B,Y);case"openai-native":return m(Q,ce);case"deepseek":return m(_,pe);case"deepseek-aliyun":return m(j,le);case"qwen":const w=(r==null?void 0:r.qwenApiLine)==="china"?J:$,o=(r==null?void 0:r.qwenApiLine)==="china"?Pe:de;return m(w,o);case"openai":return{selectedProvider:c,selectedModelId:(r==null?void 0:r.openAiModelId)||"",selectedModelInfo:(r==null?void 0:r.openAiModelInfo)||I};default:return m(B,Y)}}export{ke as A,S as n,ne as v};
