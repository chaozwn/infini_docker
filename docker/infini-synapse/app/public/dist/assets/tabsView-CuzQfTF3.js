import{bf as A,C,Y as L,r as M,b as p,bg as l,w as O,R as _,Z as y,bh as D,M as k}from"./index-f6N2PmCM.js";const F=[_,y,D],j=A("tabs-view",()=>{const o=C(),T=L(),t=M([]),P=p(()=>t.value.filter(e=>e&&!c(e)&&l.hasRoute(e.name))),i=p(()=>t.value.find(e=>e&&!c(e)&&e.fullPath===o.fullPath)),c=e=>{var s;return((s=e.meta)==null?void 0:s.hideInTabs)||F.some(a=>a===e.name)},n=e=>{const s=k(),a=l.getRoutes(),u=e.reduce((r,f)=>{var v,h,m;if(f.name&&l.hasRoute(f.name)){const b=(m=(h=(v=a.find(w=>w.name===f.name))==null?void 0:v.components)==null?void 0:h.default)==null?void 0:m.name;b&&r.push(b)}return r},[]);s.remove(u)},R=e=>({...e,matched:e.matched.map(s=>{const{meta:a,path:u,name:r}=s;return{meta:a,path:u,name:r}})}),d=e=>c(e)?!1:(t.value.some(a=>a.fullPath==e.fullPath)||t.value.push(R(e)),!0),x=e=>{const s=t.value.findIndex(a=>a.fullPath==e.fullPath);n(t.value.splice(0,s))},g=e=>{const s=t.value.findIndex(a=>a.fullPath==e.fullPath);n(t.value.splice(s+1))},E=e=>{const s=t.value.findIndex(a=>a.fullPath===e.fullPath);if(s!==-1){const a=t.value.splice(s,1);n(t.value),t.value=a}},I=e=>{const s=t.value.findIndex(u=>u.fullPath==e.fullPath),a=Object.is(i.value,t.value[s]);if(n(t.value.splice(s,1)),a){const u=t.value[Math.max(0,t.value.length-1)];l.push(u)}},S=()=>{n(t.value),t.value=[]},N=e=>{const s=l.currentRoute.value,a=t.value.find(u=>u.fullPath===s.fullPath);a&&(a.meta.title=e)};return O(()=>o.fullPath,()=>{d(o)},{immediate:!0}),window.addEventListener("beforeunload",()=>{T.layoutSetting.cacheTabs||(c(o)?t.value=[t.value[0]]:t.value=[i.value||t.value[0]],t.value=t.value.filter(Boolean))}),{tabsList:t,getTabsList:P,getCurrentTab:i,addTabs:d,closeLeftTabs:x,closeRightTabs:g,closeOtherTabs:E,closeCurrentTab:I,closeAllTabs:S,updateTabTitle:N}},{persist:{pick:["tabsList"]}});export{j as u};
