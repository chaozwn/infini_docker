import{d as C,r as i,b as E,n as N,q as A,v as g,c as s,E as r,x as y,J as S,aq as q,bv as z,V as I,b2 as L,k as M}from"./index-xILFvC6p.js";import{_ as U,M as $}from"./index-huArR9Po.js";import{D as F}from"./index-DjyhJka5.js";import{c as J}from"./cloneDeep-DOQCGcdx.js";import{_ as P}from"./index-Cw9sezyn.js";import"./_baseUniq-CN2PPb1A.js";import"./_arrayIncludesWith-DbV0gfeD.js";import"./collapseMotion-BTtFF6ah.js";import"./move-BgR_7ULJ.js";import"./RightOutlined-B8VFUM5r.js";import"./index-BQJ5s33I.js";import"./FileOutlined-BPIWEwF1.js";import"./debounce-CLt6A2Mw.js";const j={style:{"--border":1},class:"header"},G=C({name:"DeptTree",__name:"DeptTree",emits:["select","init"],setup(H,{emit:D}){const m=D,d=i(""),p=i([]),l=i([]),_=i(!0),c=i(!0),f=E(()=>v(J(p.value),d.value)),v=(t,e="")=>t.filter(n=>{var a,o;return(a=n.children)!=null&&a.length&&(n.children=v(n.children,e),n.children.length)?!0:(o=n.name)==null?void 0:o.includes(e)}),h=async()=>{c.value=!0,p.value=await q.systemDept.deptList({}).finally(()=>c.value=!1),l.value=[...l.value,...p.value.map(t=>Number(t.id))],m("init",p.value)},T=t=>{m("select",t[0])},x=(t,e=[])=>t.reduce((n,a)=>{var o;return n.push(a.id),(o=a.children)!=null&&o.length&&x(a.children,n),n},e),k=()=>{l.value=x(f.value)},K=t=>{l.value=t,_.value=!1};return h(),(t,e)=>{const n=z,a=I,o=U,b=$,V=F,w=P,B=L;return N(),A(S,null,[g("div",j,[e[5]||(e[5]=g("div",{class:"title"},"组织架构",-1)),s(n,{value:d.value,"onUpdate:value":e[0]||(e[0]=u=>d.value=u),size:"small",placeholder:"搜索"},null,8,["value"]),s(V,null,{overlay:r(()=>[s(b,null,{default:r(()=>[s(o,{onClick:k},{default:r(()=>e[3]||(e[3]=[y(" 展开全部 ")])),_:1}),s(o,{onClick:e[1]||(e[1]=u=>l.value=[])},{default:r(()=>e[4]||(e[4]=[y(" 折叠全部 ")])),_:1})]),_:1})]),default:r(()=>[s(a,{icon:"ant-design:more-outlined",size:"20",class:"flex-shrink-0"})]),_:1})]),s(B,{spinning:c.value},{default:r(()=>[s(w,{expandedKeys:l.value,"onUpdate:expandedKeys":e[2]||(e[2]=u=>l.value=u),class:"min-h-[1xl]","auto-expand-parent":_.value,"tree-data":f.value,"field-names":{key:"id",title:"name"},onSelect:T,onExpand:K},null,8,["expandedKeys","auto-expand-parent","tree-data"])]),_:1},8,["spinning"])],64)}}}),le=M(G,[["__scopeId","data-v-f42d3ef3"]]);export{le as default};
