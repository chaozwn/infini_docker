var yde=Object.defineProperty;var U4=t=>{throw TypeError(t)};var bde=(t,e,n)=>e in t?yde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var yt=(t,e,n)=>bde(t,typeof e!="symbol"?e+"":e,n),L_=(t,e,n)=>e.has(t)||U4("Cannot "+n);var re=(t,e,n)=>(L_(t,e,"read from private field"),n?n.call(t):e.get(t)),tn=(t,e,n)=>e.has(t)?U4("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ht=(t,e,n,r)=>(L_(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Qe=(t,e,n)=>(L_(t,e,"access private method"),n);var _m=(t,e,n,r)=>({set _(i){ht(t,e,i,n)},get _(){return re(t,e,r)}});import{c as V,I as iU,e as De,F as p1,s as s0,w as Wi,c$ as X4,d8 as xde,d as Xt,ad as fp,aV as bn,r as st,em as wde,ao as bf,G as We,a8 as G1,bX as ol,J as aU,as as Cu,K as Or,a9 as _de,ef as oU,aT as dp,h as mv,f as pi,p as Pl,en as Sde,o as on,bK as sU,a3 as Ah,eo as Ede,ep as mC,eq as He,k as It,er as lU,dU as Sm,es as kD,et as Ode,aS as Ns,M as Z4,eu as kde,a2 as Ade,ev as Tde,ew as Mde,D as Cde}from"./index-3Y2L8Jwy.js";import{n as Hx,A as uU}from"./ApiOptions-Cb2oqpO3.js";import{u as pu,f as K4}from"./ai-BTldo0bR.js";import{C as ka,a as Aa,M as Pde,b as Dde}from"./McpToolRow-BMva2QDQ.js";import{T as AD}from"./index-DlLSGNDJ.js";import{P as cU,T as Ide}from"./index-CF01qfge.js";import{C as R_,S as fU,i as H1}from"./index-B8FgbjNq.js";import{P as J4}from"./Text-C1nkbX9y.js";import{D as Lde,a as Rde,b as Q4}from"./index-1O-QuJ0e.js";import{D as dU}from"./index-CglLHKrX.js";import{w as e5,P as mi,D as yC,r as Mo,e as kc,f as Ci,S as l0,g as t5,l as N_,_ as ge,m as gt,h as Ur,j as En,k as xr,n as Tr,M as ws,o as Ac,A as hU,C as qo,p as Nde,q as pU,s as oe,v as at,x as gU,R as Fde,y as tu,z as n5,B as Wo,E as TD,F as mt,I as bC,G as zde,H as _s,T as Em,J as ro,K as xC,L as jde,N as Yx,O as Bde,Q as ga,U as Ux,V as Df,W as nt,X as r5,Y as If,Z as vU,$ as nu,a0 as oo,a1 as Xx,a2 as mU,a3 as ut,a4 as Ms,a5 as ii,a6 as $de,a7 as Vde,a8 as za,a9 as yU,aa as u0,ab as xf,ac as bU,ad as Th,ae as xU,af as Co,ag as pn,ah as yv,ai as Rt,aj as Dr,ak as MD,al as uh,am as qde,an as Wde,ao as Gde,ap as Hde,aq as wU,ar as Yde,as as Jt,at as Tc,au as Ude,av as c0,aw as xa,ax as CD,ay as xl,az as ai,aA as Xde,aB as Zde,aC as _U,aD as Yl,aE as Xr,aF as PD,aG as Zx,aH as ur,aI as Kde,aJ as Jde,aK as Yn,aL as bv,aM as Qde,aN as Kn,aO as ehe,aP as the,aQ as nhe,aR as wf,aS as SU,aT as rhe,aU as f0,aV as d0,aW as DD,aX as ihe,aY as ahe,aZ as EU,a_ as ohe,a$ as i5,b0 as OU,b1 as she,b2 as lhe,u as Fo,b3 as kU,b4 as F_,b5 as g1,b6 as AU,b7 as Wg,b8 as Y1,b9 as TU,ba as MU,bb as Om,bc as Ra,bd as U1,be as uhe,bf as io,bg as Mc,bh as ID,bi as Ss,bj as wC,bk as ch,bl as X1,bm as che,bn as fhe,bo as zo,bp as xv,bq as wv,br as Kx,bs as dhe,bt as hhe,bu as Z1,bv as phe,bw as ghe,bx as Jx,by as Qx,bz as CU,bA as _v,bB as la,bC as ja,bD as so,bE as ua,bF as nh,bG as e2,bH as Ks,bI as vhe,bJ as hp,bK as lo,bL as mhe,bM as yhe,bN as PU,bO as DU,bP as bhe,bQ as pg,bR as IU,bS as xhe,bT as whe,bU as a5,bV as td,bW as Hi,bX as o5,bY as hl,bZ as _he,b_ as K1,b$ as LD,c0 as Yi,c1 as LU,c2 as She,t as Ehe,c3 as Sv,c4 as Ohe,c5 as RU,c6 as NU,c7 as khe,c8 as Ahe,c9 as The,ca as Ev,cb as t2,cc as FU,cd as Mhe,ce as Che,cf as n2,cg as Phe,ch as Dhe,ci as r2,cj as Ihe,ck as zU,cl as jU,cm as Lhe,cn as Rhe,co as Nhe,cp as _C,cq as J1,cr as Fhe,cs as zhe,ct as i2,cu as jhe,cv as s5,cw as l5,cx as Bhe,cy as u5,cz as nc,cA as $he,cB as Vhe,cC as c5,cD as qhe,cE as SC,cF as Whe,cG as Ghe,cH as Hhe,cI as BU,cJ as Yhe,cK as Uhe,cL as Xhe,cM as EC,cN as OC,cO as Zhe,cP as z_,cQ as Khe,cR as Jhe,cS as $U,cT as j_,cU as Qhe,cV as epe,cW as f5,cX as tpe,cY as npe,cZ as km,c_ as rpe,c$ as ipe,d0 as tt,d1 as te,d2 as oi,d3 as we,d4 as B_,d5 as Ov,a as ape,b as ope,c as spe,d as lpe}from"./install-Ctb9Q3K_.js";import{U as upe}from"./index-CsNtKM2u.js";import"./index-DmAlrLea.js";import"./cloneDeep-CPvluXjr.js";import"./useFlexGapSupport-DgSEdSzR.js";import"./useRefs-Coab_dzV.js";import"./_arrayIncludesWith-DbV0gfeD.js";import"./debounce-DqV1iSPJ.js";import"./QuestionCircleOutlined-Dfq7iidB.js";import"./collapseMotion-CaWKbpu5.js";import"./_castArrayLikeObject-Cmo_jate.js";import"./index-xEjtWmqS.js";import"./DownOutlined-Cygx6sjI.js";import"./isMobile-BbN7I0i_.js";import"./RightOutlined-CveUqwtZ.js";import"./FileOutlined-BjpGz_RI.js";import"./useMergedState-fatNDSdO.js";import"./LeftOutlined-PhT-UbT5.js";import"./zh_CN-CAyhejr6.js";import"./index-CPSWVOFO.js";import"./index-Ds4E8NUa.js";import"./index-CujHLiDk.js";import"./index-V-ILxsgN.js";import"./_baseUniq-GBykg-gc.js";import"./move-sJvsL9am.js";import"./CheckOutlined-TKs2sWhg.js";import"./EnterOutlined-DyjPwoPv.js";import"./CopyOutlined-CAxvSpc5.js";import"./isNumeric-DjvBa-1E.js";import"./index-DbtwYZ6E.js";var cpe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]},name:"dollar-circle",theme:"outlined"};function d5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){fpe(t,i,n[i])})}return t}function fpe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a2=function(e,n){var r=d5({},e,n.attrs);return V(iU,d5({},r,{icon:cpe}),null)};a2.displayName="DollarCircleOutlined";a2.inheritAttrs=!1;var dpe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"};function h5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?Object(arguments[e]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){hpe(t,i,n[i])})}return t}function hpe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var RD=function(e,n){var r=h5({},e,n.attrs);return V(iU,h5({},r,{icon:dpe}),null)};RD.displayName="InboxOutlined";RD.inheritAttrs=!1;var ppe=1e-8;function p5(t,e){return Math.abs(t-e)<ppe}function $p(t,e,n){var r=0,i=t[0];if(!i)return!1;for(var a=1;a<t.length;a++){var o=t[a];r+=e5(i[0],i[1],o[0],o[1],e,n),i=o}var s=t[0];return(!p5(i[0],s[0])||!p5(i[1],s[1]))&&(r+=e5(i[0],i[1],s[0],s[1],e,n)),r!==0}function VU(t,e,n,r,i,a,o,s){var l=i-t,u=a-e,c=n-t,f=r-e,d=Math.sqrt(c*c+f*f);c/=d,f/=d;var h=l*c+u*f,p=h/d;p*=d;var g=o[0]=t+p*c,v=o[1]=e+p*f;return Math.sqrt((g-i)*(g-i)+(v-a)*(v-a))}var Vu=new mi,Nr=new mi,Bi=new mi,qu=new mi,Hs=new mi,Q1=[],va=new mi;function gpe(t,e){if(e<=180&&e>0){e=e/180*Math.PI,Vu.fromArray(t[0]),Nr.fromArray(t[1]),Bi.fromArray(t[2]),mi.sub(qu,Vu,Nr),mi.sub(Hs,Bi,Nr);var n=qu.len(),r=Hs.len();if(!(n<.001||r<.001)){qu.scale(1/n),Hs.scale(1/r);var i=qu.dot(Hs),a=Math.cos(e);if(a<i){var o=VU(Nr.x,Nr.y,Bi.x,Bi.y,Vu.x,Vu.y,Q1);va.fromArray(Q1),va.scaleAndAdd(Hs,o/Math.tan(Math.PI-e));var s=Bi.x!==Nr.x?(va.x-Nr.x)/(Bi.x-Nr.x):(va.y-Nr.y)/(Bi.y-Nr.y);if(isNaN(s))return;s<0?mi.copy(va,Nr):s>1&&mi.copy(va,Bi),va.toArray(t[1])}}}}function vpe(t,e,n){if(n<=180&&n>0){n=n/180*Math.PI,Vu.fromArray(t[0]),Nr.fromArray(t[1]),Bi.fromArray(t[2]),mi.sub(qu,Nr,Vu),mi.sub(Hs,Bi,Nr);var r=qu.len(),i=Hs.len();if(!(r<.001||i<.001)){qu.scale(1/r),Hs.scale(1/i);var a=qu.dot(e),o=Math.cos(n);if(a<o){var s=VU(Nr.x,Nr.y,Bi.x,Bi.y,Vu.x,Vu.y,Q1);va.fromArray(Q1);var l=Math.PI/2,u=Math.acos(Hs.dot(e)),c=l+u-n;if(c>=l)mi.copy(va,Bi);else{va.scaleAndAdd(Hs,s/Math.tan(Math.PI/2-c));var f=Bi.x!==Nr.x?(va.x-Nr.x)/(Bi.x-Nr.x):(va.y-Nr.y)/(Bi.y-Nr.y);if(isNaN(f))return;f<0?mi.copy(va,Nr):f>1&&mi.copy(va,Bi)}va.toArray(t[1])}}}}function $_(t,e,n,r){var i=n==="normal",a=i?t:t.ensureState(n);a.ignore=e;var o=r.get("smooth");o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=r.getModel("lineStyle").getLineStyle();i?t.useStyle(s):a.style=s}function mpe(t,e){var n=e.smooth,r=e.points;if(r)if(t.moveTo(r[0][0],r[0][1]),n>0&&r.length>=3){var i=t5(r[0],r[1]),a=t5(r[1],r[2]);if(!i||!a){t.lineTo(r[1][0],r[1][1]),t.lineTo(r[2][0],r[2][1]);return}var o=Math.min(i,a)*n,s=N_([],r[1],r[0],o/i),l=N_([],r[1],r[2],o/a),u=N_([],s,l,.5);t.bezierCurveTo(s[0],s[1],s[0],s[1],u[0],u[1]),t.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var c=1;c<r.length;c++)t.lineTo(r[c][0],r[c][1])}function qU(t,e,n){var r=t.getTextGuideLine(),i=t.getTextContent();if(!i){r&&t.removeTextGuideLine();return}for(var a=e.normal,o=a.get("show"),s=i.ignore,l=0;l<yC.length;l++){var u=yC[l],c=e[u],f=u==="normal";if(c){var d=c.get("show"),h=f?s:Mo(i.states[u]&&i.states[u].ignore,s);if(h||!Mo(d,o)){var p=f?r:r&&r.states[u];p&&(p.ignore=!0),r&&$_(r,!0,u,c);continue}r||(r=new kc,t.setTextGuideLine(r),!f&&(s||!o)&&$_(r,!0,"normal",e.normal),t.stateProxy&&(r.stateProxy=t.stateProxy)),$_(r,!1,u,c)}}if(r){Ci(r.style,n),r.style.fill=null;var g=a.get("showAbove"),v=t.textGuideLineConfig=t.textGuideLineConfig||{};v.showAbove=g||!1,r.buildPath=mpe}}function WU(t,e){e=e||"labelLine";for(var n={normal:t.getModel(e)},r=0;r<l0.length;r++){var i=l0[r];n[i]=t.getModel([i,e])}return n}var Vp=Nde.value;function Am(t,e){return Ci({show:e},t)}var ype=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.optionUpdated=function(){var n=this.get("boundaryGap"),r=this.get("splitNumber"),i=this.get("scale"),a=this.get("axisLine"),o=this.get("axisTick"),s=this.get("axisLabel"),l=this.get("axisName"),u=this.get(["axisName","show"]),c=this.get(["axisName","formatter"]),f=this.get("axisNameGap"),d=this.get("triggerEvent"),h=gt(this.get("indicator")||[],function(p){p.max!=null&&p.max>0&&!p.min?p.min=0:p.min!=null&&p.min<0&&!p.max&&(p.max=0);var g=l;p.color!=null&&(g=Ci({color:p.color},l));var v=Ur(En(p),{boundaryGap:n,splitNumber:r,scale:i,axisLine:a,axisTick:o,axisLabel:s,name:p.text,showName:u,nameLocation:"end",nameGap:f,nameTextStyle:g,triggerEvent:d},!1);if(xr(c)){var m=v.name;v.name=c.replace("{value}",m??"")}else Tr(c)&&(v.name=c(v.name,v));var y=new ws(v,null,this.ecModel);return Ac(y,hU.prototype),y.mainType="radar",y.componentIndex=this.componentIndex,y},this);this._indicatorModels=h},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:Ur({lineStyle:{color:"#bbb"}},Vp.axisLine),axisLabel:Am(Vp.axisLabel,!1),axisTick:Am(Vp.axisTick,!1),splitLine:Am(Vp.splitLine,!0),splitArea:Am(Vp.splitArea,!0),indicator:[]},e}(qo),bpe=["axisLine","axisTickLabel","axisName"],xpe=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=this.group;a.removeAll(),this._buildAxes(n),this._buildSplitLineAndArea(n)},e.prototype._buildAxes=function(n){var r=n.coordinateSystem,i=r.getIndicatorAxes(),a=gt(i,function(o){var s=o.model.get("showName")?o.name:"",l=new pU(o.model,{axisName:s,position:[r.cx,r.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});oe(a,function(o){oe(bpe,o.add,o),this.group.add(o.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(n){var r=n.coordinateSystem,i=r.getIndicatorAxes();if(!i.length)return;var a=n.get("shape"),o=n.getModel("splitLine"),s=n.getModel("splitArea"),l=o.getModel("lineStyle"),u=s.getModel("areaStyle"),c=o.get("show"),f=s.get("show"),d=l.get("color"),h=u.get("color"),p=at(d)?d:[d],g=at(h)?h:[h],v=[],m=[];function y(F,z,N){var L=N%z.length;return F[L]=F[L]||[],L}if(a==="circle")for(var b=i[0].getTicksCoords(),x=r.cx,w=r.cy,_=0;_<b.length;_++){if(c){var E=y(v,p,_);v[E].push(new gU({shape:{cx:x,cy:w,r:b[_].coord}}))}if(f&&_<b.length-1){var E=y(m,g,_);m[E].push(new Fde({shape:{cx:x,cy:w,r0:b[_].coord,r:b[_+1].coord}}))}}else for(var S,O=gt(i,function(F,z){var N=F.getTicksCoords();return S=S==null?N.length-1:Math.min(N.length-1,S),gt(N,function(L){return r.coordToPoint(L.coord,z)})}),A=[],_=0;_<=S;_++){for(var T=[],I=0;I<i.length;I++)T.push(O[I][_]);if(T[0]&&T.push(T[0].slice()),c){var E=y(v,p,_);v[E].push(new kc({shape:{points:T}}))}if(f&&A){var E=y(m,g,_-1);m[E].push(new tu({shape:{points:T.concat(A)}}))}A=T.slice().reverse()}var D=l.getLineStyle(),R=u.getAreaStyle();oe(m,function(F,z){this.group.add(n5(F,{style:Ci({stroke:"none",fill:g[z%g.length]},R),silent:!0}))},this),oe(v,function(F,z){this.group.add(n5(F,{style:Ci({fill:"none",stroke:p[z%p.length]},D),silent:!0}))},this)},e.type="radar",e}(Wo),wpe=function(t){ge(e,t);function e(n,r,i){var a=t.call(this,n,r,i)||this;return a.type="value",a.angle=0,a.name="",a}return e}(TD),_pe=function(){function t(e,n,r){this.dimensions=[],this._model=e,this._indicatorAxes=gt(e.getIndicatorModels(),function(i,a){var o="indicator_"+a,s=new wpe(o,new bC);return s.name=i.get("name"),s.model=i,i.axis=s,this.dimensions.push(o),s},this),this.resize(e,r)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(e,n){var r=this._indicatorAxes[n];return this.coordToPoint(r.dataToCoord(e),n)},t.prototype.coordToPoint=function(e,n){var r=this._indicatorAxes[n],i=r.angle,a=this.cx+e*Math.cos(i),o=this.cy-e*Math.sin(i);return[a,o]},t.prototype.pointToData=function(e){var n=e[0]-this.cx,r=e[1]-this.cy,i=Math.sqrt(n*n+r*r);n/=i,r/=i;for(var a=Math.atan2(-r,n),o=1/0,s,l=-1,u=0;u<this._indicatorAxes.length;u++){var c=this._indicatorAxes[u],f=Math.abs(a-c.angle);f<o&&(s=c,l=u,o=f)}return[l,+(s&&s.coordToData(i))]},t.prototype.resize=function(e,n){var r=e.get("center"),i=n.getWidth(),a=n.getHeight(),o=Math.min(i,a)/2;this.cx=mt(r[0],i),this.cy=mt(r[1],a),this.startAngle=e.get("startAngle")*Math.PI/180;var s=e.get("radius");(xr(s)||_s(s))&&(s=[0,s]),this.r0=mt(s[0],o),this.r=mt(s[1],o),oe(this._indicatorAxes,function(l,u){l.setExtent(this.r0,this.r);var c=this.startAngle+u*Math.PI*2/this._indicatorAxes.length;c=Math.atan2(Math.sin(c),Math.cos(c)),l.angle=c},this)},t.prototype.update=function(e,n){var r=this._indicatorAxes,i=this._model;oe(r,function(s){s.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(s,l){if(!(s.get("coordinateSystem")!=="radar"||e.getComponent("radar",s.get("radarIndex"))!==i)){var u=s.getData();oe(r,function(c){c.scale.unionExtentFromData(u,u.mapDimension(c.dim))})}},this);var a=i.get("splitNumber"),o=new bC;o.setExtent(0,a),o.setInterval(1),oe(r,function(s,l){zde(s.scale,s.model,o)})},t.prototype.convertToPixel=function(e,n,r){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(e,n,r){return console.warn("Not implemented."),null},t.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},t.create=function(e,n){var r=[];return e.eachComponent("radar",function(i){var a=new t(i,e,n);r.push(a),i.coordinateSystem=a}),e.eachSeriesByType("radar",function(i){i.get("coordinateSystem")==="radar"&&(i.coordinateSystem=r[i.get("radarIndex")||0])}),r},t.dimensions=[],t}();function Spe(t){t.registerCoordinateSystem("radar",_pe),t.registerComponentModel(ype),t.registerComponentView(xpe),t.registerVisual({seriesType:"radar",reset:function(e){var n=e.getData();n.each(function(r){n.setItemVisual(r,"legendIcon","roundRect")}),n.setVisual("legendIcon","roundRect")}})}var g5=xC,ND=function(t){ge(e,t);function e(n){var r=t.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new Em,r._rawTransformable=new Em,r.name=n,r}return e.prototype.setBoundingRect=function(n,r,i,a){return this._rect=new ro(n,r,i,a),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(n,r,i,a){this._transformTo(n,r,i,a),this._viewRect=new ro(n,r,i,a)},e.prototype._transformTo=function(n,r,i,a){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new ro(n,r,i,a));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},e.prototype.setCenter=function(n,r){n&&(this._center=[mt(n[0],r.getWidth()),mt(n[1],r.getHeight())],this._updateCenterAndZoom())},e.prototype.setZoom=function(n){n=n||1;var r=this.zoomLimit;r&&(r.max!=null&&(n=Math.min(r.max,n)),r.min!=null&&(n=Math.max(r.min,n))),this._zoom=n,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var n=this.getBoundingRect(),r=n.x+n.width/2,i=n.y+n.height/2;return[r,i]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var n=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,i=this.getDefaultCenter(),a=this.getCenter(),o=this.getZoom();a=xC([],a,n),i=xC([],i,n),r.originX=a[0],r.originY=a[1],r.x=i[0]-a[0],r.y=i[1]-a[1],r.scaleX=r.scaleY=o,this._updateTransform()},e.prototype._updateTransform=function(){var n=this._roamTransformable,r=this._rawTransformable;r.parent=n,n.updateTransform(),r.updateTransform(),jde(this.transform||(this.transform=[]),r.transform||Yx()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],Bde(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var n=this._rawTransformable,r=this._roamTransformable,i=new Em;return i.transform=r.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var n=this.getBoundingRect().clone();return n.applyTransform(this.transform),n},e.prototype.dataToPoint=function(n,r,i){var a=r?this._rawTransform:this.transform;return i=i||[],a?g5(i,n,a):ga(i,n)},e.prototype.pointToData=function(n){var r=this.invTransform;return r?g5([],n,r):[n[0],n[1]]},e.prototype.convertToPixel=function(n,r,i){var a=v5(r);return a===this?a.dataToPoint(i):null},e.prototype.convertFromPixel=function(n,r,i){var a=v5(r);return a===this?a.pointToData(i):null},e.prototype.containPoint=function(n){return this.getViewRectAfterRoam().contain(n[0],n[1])},e.dimensions=["x","y"],e}(Em);function v5(t){var e=t.seriesModel;return e?e.coordinateSystem:null}function m5(t,e){return t.pointToProjected?t.pointToProjected(e):t.pointToData(e)}function GU(t,e,n,r){var i=t.getZoom(),a=t.getCenter(),o=e.zoom,s=t.projectedToPoint?t.projectedToPoint(a):t.dataToPoint(a);if(e.dx!=null&&e.dy!=null&&(s[0]-=e.dx,s[1]-=e.dy,t.setCenter(m5(t,s),r)),o!=null){t.scaleX*=o,t.scaleY*=o;var l=(e.originX-t.x)*(o-1),u=(e.originY-t.y)*(o-1);t.x-=l,t.y-=u,t.updateTransform(),t.setCenter(m5(t,s),r),t.setZoom(o*i)}return{center:t.getCenter(),zoom:t.getZoom()}}var y5="\0_ec_interaction_mutex";function Epe(t,e,n){var r=FD(t);r[e]=n}function Ope(t,e,n){var r=FD(t),i=r[e];i===n&&(r[e]=null)}function b5(t,e){return!!FD(t)[e]}function FD(t){return t[y5]||(t[y5]={})}Ux({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Df);var o2=function(t){ge(e,t);function e(n){var r=t.call(this)||this;r._zr=n;var i=nt(r._mousedownHandler,r),a=nt(r._mousemoveHandler,r),o=nt(r._mouseupHandler,r),s=nt(r._mousewheelHandler,r),l=nt(r._pinchHandler,r);return r.enable=function(u,c){this.disable(),this._opt=Ci(En(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(n.on("mousedown",i),n.on("mousemove",a),n.on("mouseup",o)),(u===!0||u==="scale"||u==="zoom")&&(n.on("mousewheel",s),n.on("pinch",l))},r.disable=function(){n.off("mousedown",i),n.off("mousemove",a),n.off("mouseup",o),n.off("mousewheel",s),n.off("pinch",l)},r}return e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(n){this.pointerChecker=n},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(n){if(!r5(n)){for(var r=n.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var i=n.offsetX,a=n.offsetY;this.pointerChecker&&this.pointerChecker(n,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},e.prototype._mousemoveHandler=function(n){if(!(!this._dragging||!v1("moveOnMouseMove",n,this._opt)||n.gestureEvent==="pinch"||b5(this._zr,"globalPan"))){var r=n.offsetX,i=n.offsetY,a=this._x,o=this._y,s=r-a,l=i-o;this._x=r,this._y=i,this._opt.preventDefaultMouseMove&&If(n.event),HU(this,"pan","moveOnMouseMove",n,{dx:s,dy:l,oldX:a,oldY:o,newX:r,newY:i,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(n){r5(n)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(n){var r=v1("zoomOnMouseWheel",n,this._opt),i=v1("moveOnMouseWheel",n,this._opt),a=n.wheelDelta,o=Math.abs(a),s=n.offsetX,l=n.offsetY;if(!(a===0||!r&&!i)){if(r){var u=o>3?1.4:o>1?1.2:1.1,c=a>0?u:1/u;V_(this,"zoom","zoomOnMouseWheel",n,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(i){var f=Math.abs(a),d=(a>0?1:-1)*(f>3?.4:f>1?.15:.05);V_(this,"scrollMove","moveOnMouseWheel",n,{scrollDelta:d,originX:s,originY:l,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(n){if(!b5(this._zr,"globalPan")){var r=n.pinchScale>1?1.1:1/1.1;V_(this,"zoom",null,n,{scale:r,originX:n.pinchX,originY:n.pinchY,isAvailableBehavior:null})}},e}(vU);function V_(t,e,n,r,i){t.pointerChecker&&t.pointerChecker(r,i.originX,i.originY)&&(If(r.event),HU(t,e,n,r,i))}function HU(t,e,n,r,i){i.isAvailableBehavior=nt(v1,null,n,r),t.trigger(e,i)}function v1(t,e,n){var r=n[t];return!t||r&&(!xr(r)||e.event[r+"Key"])}function YU(t,e,n){var r=t.target;r.x+=e,r.y+=n,r.dirty()}function UU(t,e,n,r){var i=t.target,a=t.zoomLimit,o=t.zoom=t.zoom||1;if(o*=e,a){var s=a.min||0,l=a.max||1/0;o=Math.max(Math.min(l,o),s)}var u=o/t.zoom;t.zoom=o,i.x-=(n-i.x)*(u-1),i.y-=(r-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var kpe={axisPointer:1,tooltip:1,brush:1};function zD(t,e,n){var r=e.getComponentByElement(t.topTarget),i=r&&r.coordinateSystem;return r&&r!==n&&!kpe.hasOwnProperty(r.mainType)&&i&&i.model!==n}function Ape(t){Tpe(t),Mpe(t)}function Tpe(t){if(!t.parallel){var e=!1;oe(t.series,function(n){n&&n.type==="parallel"&&(e=!0)}),e&&(t.parallel=[{}])}}function Mpe(t){var e=nu(t.parallelAxis);oe(e,function(n){if(oo(n)){var r=n.parallelIndex||0,i=nu(t.parallel)[r];i&&i.parallelAxisDefault&&Ur(n,i.parallelAxisDefault,!1)}})}var Cpe=5,Ppe=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){this._model=n,this._api=i,this._handlers||(this._handlers={},oe(Dpe,function(a,o){i.getZr().on(o,this._handlers[o]=nt(a,this))},this)),Xx(this,"_throttledDispatchExpand",n.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(n,r){mU(this,"_throttledDispatchExpand"),oe(this._handlers,function(i,a){r.getZr().off(a,i)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(n){this._dispatchExpand(n)},e.prototype._dispatchExpand=function(n){n&&this._api.dispatchAction(ut({type:"parallelAxisExpand"},n))},e.type="parallel",e}(Wo),Dpe={mousedown:function(t){q_(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(q_(this,"click")&&e){var n=[t.offsetX,t.offsetY],r=Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2);if(r>Cpe)return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);i.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!(this._mouseDownPoint||!q_(this,"mousemove"))){var e=this._model,n=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),r=n.behavior;r==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand(r==="none"?null:{axisExpandWindow:n.axisExpandWindow,animation:r==="jump"?null:{duration:0}})}}};function q_(t,e){var n=t._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===e}var Ipe=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(){t.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(n){var r=this.option;n&&Ur(r,n,!0),this._initDimensions()},e.prototype.contains=function(n,r){var i=n.get("parallelIndex");return i!=null&&r.getComponent("parallel",i)===this},e.prototype.setAxisExpand=function(n){oe(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){n.hasOwnProperty(r)&&(this.option[r]=n[r])},this)},e.prototype._initDimensions=function(){var n=this.dimensions=[],r=this.parallelAxisIndex=[],i=Ms(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(a){return(a.get("parallelIndex")||0)===this.componentIndex},this);oe(i,function(a){n.push("dim"+a.get("dim")),r.push(a.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(qo),Lpe=function(t){ge(e,t);function e(n,r,i,a,o){var s=t.call(this,n,r,i)||this;return s.type=a||"value",s.axisIndex=o,s}return e.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},e}(TD);function nd(t,e,n,r,i,a){t=t||0;var o=n[1]-n[0];if(i!=null&&(i=wd(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),r==="all"){var s=Math.abs(e[1]-e[0]);s=wd(s,[0,o]),i=a=wd(s,[i,a]),r=0}e[0]=wd(e[0],n),e[1]=wd(e[1],n);var l=W_(e,r);e[r]+=t;var u=i||0,c=n.slice();l.sign<0?c[0]+=u:c[1]-=u,e[r]=wd(e[r],c);var f;return f=W_(e,r),i!=null&&(f.sign!==l.sign||f.span<i)&&(e[1-r]=e[r]+l.sign*i),f=W_(e,r),a!=null&&f.span>a&&(e[1-r]=e[r]+f.sign*a),e}function W_(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function wd(t,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,t))}var G_=oe,XU=Math.min,ZU=Math.max,x5=Math.floor,Rpe=Math.ceil,w5=bU,Npe=Math.PI,Fpe=function(){function t(e,n,r){this.type="parallel",this._axesMap=ii(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,n,r)}return t.prototype._init=function(e,n,r){var i=e.dimensions,a=e.parallelAxisIndex;G_(i,function(o,s){var l=a[s],u=n.getComponent("parallelAxis",l),c=this._axesMap.set(o,new Lpe(o,$de(u),[0,0],u.get("type"),l)),f=c.type==="category";c.onBand=f&&u.get("boundaryGap"),c.inverse=u.get("inverse"),u.axis=c,c.model=u,c.coordinateSystem=u.coordinateSystem=this},this)},t.prototype.update=function(e,n){this._updateAxesFromSeries(this._model,e)},t.prototype.containPoint=function(e){var n=this._makeLayoutInfo(),r=n.axisBase,i=n.layoutBase,a=n.pixelDimIndex,o=e[1-a],s=e[a];return o>=r&&o<=r+n.axisLength&&s>=i&&s<=i+n.layoutLength},t.prototype.getModel=function(){return this._model},t.prototype._updateAxesFromSeries=function(e,n){n.eachSeries(function(r){if(e.contains(r,n)){var i=r.getData();G_(this.dimensions,function(a){var o=this._axesMap.get(a);o.scale.unionExtentFromData(i,i.mapDimension(a)),Vde(o.scale,o.model)},this)}},this)},t.prototype.resize=function(e,n){this._rect=za(e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),this._layoutAxes()},t.prototype.getRect=function(){return this._rect},t.prototype._makeLayoutInfo=function(){var e=this._model,n=this._rect,r=["x","y"],i=["width","height"],a=e.get("layout"),o=a==="horizontal"?0:1,s=n[i[o]],l=[0,s],u=this.dimensions.length,c=Tm(e.get("axisExpandWidth"),l),f=Tm(e.get("axisExpandCount")||0,[0,u]),d=e.get("axisExpandable")&&u>3&&u>f&&f>1&&c>0&&s>0,h=e.get("axisExpandWindow"),p;if(h)p=Tm(h[1]-h[0],l),h[1]=h[0]+p;else{p=Tm(c*(f-1),l);var g=e.get("axisExpandCenter")||x5(u/2);h=[c*g-p/2],h[1]=h[0]+p}var v=(s-p)/(u-f);v<3&&(v=0);var m=[x5(w5(h[0]/c,1))+1,Rpe(w5(h[1]/c,1))-1],y=v/c*h[0];return{layout:a,pixelDimIndex:o,layoutBase:n[r[o]],layoutLength:s,axisBase:n[r[1-o]],axisLength:n[i[1-o]],axisExpandable:d,axisExpandWidth:c,axisCollapseWidth:v,axisExpandWindow:h,axisCount:u,winInnerIndices:m,axisExpandWindow0Pos:y}},t.prototype._layoutAxes=function(){var e=this._rect,n=this._axesMap,r=this.dimensions,i=this._makeLayoutInfo(),a=i.layout;n.each(function(o){var s=[0,i.axisLength],l=o.inverse?1:0;o.setExtent(s[l],s[1-l])}),G_(r,function(o,s){var l=(i.axisExpandable?jpe:zpe)(s,i),u={horizontal:{x:l.position,y:i.axisLength},vertical:{x:0,y:l.position}},c={horizontal:Npe/2,vertical:0},f=[u[a].x+e.x,u[a].y+e.y],d=c[a],h=Yx();yU(h,h,d),u0(h,h,f),this._axesLayout[o]={position:f,rotation:d,transform:h,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},t.prototype.getAxis=function(e){return this._axesMap.get(e)},t.prototype.dataToPoint=function(e,n){return this.axisCoordToPoint(this._axesMap.get(n).dataToCoord(e),n)},t.prototype.eachActiveState=function(e,n,r,i){r==null&&(r=0),i==null&&(i=e.count());var a=this._axesMap,o=this.dimensions,s=[],l=[];oe(o,function(v){s.push(e.mapDimension(v)),l.push(a.get(v).model)});for(var u=this.hasAxisBrushed(),c=r;c<i;c++){var f=void 0;if(!u)f="normal";else{f="active";for(var d=e.getValues(s,c),h=0,p=o.length;h<p;h++){var g=l[h].getActiveState(d[h]);if(g==="inactive"){f="inactive";break}}}n(f,c)}},t.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,n=this._axesMap,r=!1,i=0,a=e.length;i<a;i++)n.get(e[i]).model.getActiveState()!=="normal"&&(r=!0);return r},t.prototype.axisCoordToPoint=function(e,n){var r=this._axesLayout[n];return xf([e,0],r.transform)},t.prototype.getAxisLayout=function(e){return En(this._axesLayout[e])},t.prototype.getSlidedAxisExpandWindow=function(e){var n=this._makeLayoutInfo(),r=n.pixelDimIndex,i=n.axisExpandWindow.slice(),a=i[1]-i[0],o=[0,n.axisExpandWidth*(n.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:i};var s=e[r]-n.layoutBase-n.axisExpandWindow0Pos,l,u="slide",c=n.axisCollapseWidth,f=this._model.get("axisExpandSlideTriggerArea"),d=f[0]!=null;if(c)d&&c&&s<a*f[0]?(u="jump",l=s-a*f[2]):d&&c&&s>a*(1-f[0])?(u="jump",l=s-a*(1-f[2])):(l=s-a*f[1])>=0&&(l=s-a*(1-f[1]))<=0&&(l=0),l*=n.axisExpandWidth/c,l?nd(l,i,o,"all"):u="none";else{var h=i[1]-i[0],p=o[1]*s/h;i=[ZU(0,p-h/2)],i[1]=XU(o[1],i[0]+h),i[0]=i[1]-h}return{axisExpandWindow:i,behavior:u}},t}();function Tm(t,e){return XU(ZU(t,e[0]),e[1])}function zpe(t,e){var n=e.layoutLength/(e.axisCount-1);return{position:n*t,axisNameAvailableWidth:n,axisLabelShow:!0}}function jpe(t,e){var n=e.layoutLength,r=e.axisExpandWidth,i=e.axisCount,a=e.axisCollapseWidth,o=e.winInnerIndices,s,l=a,u=!1,c;return t<o[0]?(s=t*a,c=a):t<=o[1]?(s=e.axisExpandWindow0Pos+t*r-e.axisExpandWindow[0],l=r,u=!0):(s=n-(i-1-t)*a,c=a),{position:s,axisNameAvailableWidth:l,axisLabelShow:u,nameTruncateMaxWidth:c}}function Bpe(t,e){var n=[];return t.eachComponent("parallel",function(r,i){var a=new Fpe(r,t,e);a.name="parallel_"+i,a.resize(r,e),r.coordinateSystem=a,a.model=r,n.push(a)}),t.eachSeries(function(r){if(r.get("coordinateSystem")==="parallel"){var i=r.getReferringComponents("parallel",Th).models[0];r.coordinateSystem=i.coordinateSystem}}),n}var $pe={create:Bpe},kC=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.activeIntervals=[],n}return e.prototype.getAreaSelectStyle=function(){return xU([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(n){var r=this.activeIntervals=En(n);if(r)for(var i=r.length-1;i>=0;i--)Co(r[i])},e.prototype.getActiveState=function(n){var r=this.activeIntervals;if(!r.length)return"normal";if(n==null||isNaN(+n))return"inactive";if(r.length===1){var i=r[0];if(i[0]<=n&&n<=i[1])return"active"}else for(var a=0,o=r.length;a<o;a++)if(r[a][0]<=n&&n<=r[a][1])return"active";return"inactive"},e}(qo);Ac(kC,hU);var Lf=!0,h0=Math.min,Mh=Math.max,Vpe=Math.pow,qpe=1e4,Wpe=6,Gpe=6,_5="globalPan",Hpe={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Ype={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},S5={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Upe=0,jD=function(t){ge(e,t);function e(n){var r=t.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=n,r.group=new pn,r._uid="brushController_"+Upe++,oe(tge,function(i,a){this._handlers[a]=nt(i,this)},r),r}return e.prototype.enableBrush=function(n){return this._brushType&&this._doDisableBrush(),n.brushType&&this._doEnableBrush(n),this},e.prototype._doEnableBrush=function(n){var r=this._zr;this._enableGlobalPan||Epe(r,_5,this._uid),oe(this._handlers,function(i,a){r.on(a,i)}),this._brushType=n.brushType,this._brushOption=Ur(En(S5),n,!0)},e.prototype._doDisableBrush=function(){var n=this._zr;Ope(n,_5,this._uid),oe(this._handlers,function(r,i){n.off(i,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(n){if(n&&n.length){var r=this._panels={};oe(n,function(i){r[i.panelId]=En(i)})}else this._panels=null;return this},e.prototype.mount=function(n){n=n||{},this._enableGlobalPan=n.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:n.x||0,y:n.y||0,rotation:n.rotation||0,scaleX:n.scaleX||1,scaleY:n.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(n){n=gt(n,function(d){return Ur(En(S5),d,!0)});var r="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new yv(i,n,u,l).add(c).update(c).remove(f).execute(),this;function l(d,h){return(d.id!=null?d.id:r+h)+"-"+d.brushType}function u(d,h){return l(d.__brushOption,h)}function c(d,h){var p=n[d];if(h!=null&&i[h]===s)a[d]=i[h];else{var g=a[d]=h!=null?(i[h].__brushOption=p,i[h]):JU(o,KU(o,p));BD(o,g)}}function f(d){i[d]!==s&&o.group.remove(i[d])}},e.prototype.unmount=function(){return this.enableBrush(!1),AC(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(vU);function KU(t,e){var n=s2[e.brushType].createCover(t,e);return n.__brushOption=e,eX(n,e),t.group.add(n),n}function JU(t,e){var n=$D(e);return n.endCreating&&(n.endCreating(t,e),eX(e,e.__brushOption)),e}function QU(t,e){var n=e.__brushOption;$D(e).updateCoverShape(t,e,n.range,n)}function eX(t,e){var n=e.z;n==null&&(n=qpe),t.traverse(function(r){r.z=n,r.z2=n})}function BD(t,e){$D(e).updateCommon(t,e),QU(t,e)}function $D(t){return s2[t.__brushOption.brushType]}function VD(t,e,n){var r=t._panels;if(!r)return Lf;var i,a=t._transform;return oe(r,function(o){o.isTargetByCursor(e,n,a)&&(i=o)}),i}function tX(t,e){var n=t._panels;if(!n)return Lf;var r=e.__brushOption.panelId;return r!=null?n[r]:Lf}function AC(t){var e=t._covers,n=e.length;return oe(e,function(r){t.group.remove(r)},t),e.length=0,!!n}function Rf(t,e){var n=gt(t._covers,function(r){var i=r.__brushOption,a=En(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});t.trigger("brush",{areas:n,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Xpe(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],r=e[0],i=n[0]-r[0],a=n[1]-r[1],o=Vpe(i*i+a*a,.5);return o>Wpe}function nX(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function rX(t,e,n,r){var i=new pn;return i.add(new Dr({name:"main",style:qD(n),silent:!0,draggable:!0,cursor:"move",drift:Rt(E5,t,e,i,["n","s","w","e"]),ondragend:Rt(Rf,e,{isEnd:!0})})),oe(r,function(a){i.add(new Dr({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Rt(E5,t,e,i,a),ondragend:Rt(Rf,e,{isEnd:!0})}))}),i}function iX(t,e,n,r){var i=r.brushStyle.lineWidth||0,a=Mh(i,Gpe),o=n[0][0],s=n[1][0],l=o-i/2,u=s-i/2,c=n[0][1],f=n[1][1],d=c-a+i/2,h=f-a+i/2,p=c-o,g=f-s,v=p+i,m=g+i;Dl(t,e,"main",o,s,p,g),r.transformable&&(Dl(t,e,"w",l,u,a,m),Dl(t,e,"e",d,u,a,m),Dl(t,e,"n",l,u,v,a),Dl(t,e,"s",l,h,v,a),Dl(t,e,"nw",l,u,a,a),Dl(t,e,"ne",d,u,a,a),Dl(t,e,"sw",l,h,a,a),Dl(t,e,"se",d,h,a,a))}function TC(t,e){var n=e.__brushOption,r=n.transformable,i=e.childAt(0);i.useStyle(qD(n)),i.attr({silent:!r,cursor:r?"move":"default"}),oe([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=e.childOfName(a.join("")),s=a.length===1?MC(t,a[0]):Kpe(t,a);o&&o.attr({silent:!r,invisible:!r,cursor:r?Ype[s]+"-resize":null})})}function Dl(t,e,n,r,i,a,o){var s=e.childOfName(n);s&&s.setShape(Qpe(WD(t,e,[[r,i],[r+a,i+o]])))}function qD(t){return Ci({strokeNoScale:!0},t.brushStyle)}function aX(t,e,n,r){var i=[h0(t,n),h0(e,r)],a=[Mh(t,n),Mh(e,r)];return[[i[0],a[0]],[i[1],a[1]]]}function Zpe(t){return uh(t.group)}function MC(t,e){var n={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=MD(n[e],Zpe(t));return r[i]}function Kpe(t,e){var n=[MC(t,e[0]),MC(t,e[1])];return(n[0]==="e"||n[0]==="w")&&n.reverse(),n.join("")}function E5(t,e,n,r,i,a){var o=n.__brushOption,s=t.toRectRange(o.range),l=oX(e,i,a);oe(r,function(u){var c=Hpe[u];s[c[0]][c[1]]+=l[c[0]]}),o.range=t.fromRectRange(aX(s[0][0],s[1][0],s[0][1],s[1][1])),BD(e,n),Rf(e,{isEnd:!1})}function Jpe(t,e,n,r){var i=e.__brushOption.range,a=oX(t,n,r);oe(i,function(o){o[0]+=a[0],o[1]+=a[1]}),BD(t,e),Rf(t,{isEnd:!1})}function oX(t,e,n){var r=t.group,i=r.transformCoordToLocal(e,n),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function WD(t,e,n){var r=tX(t,e);return r&&r!==Lf?r.clipPath(n,t._transform):En(n)}function Qpe(t){var e=h0(t[0][0],t[1][0]),n=h0(t[0][1],t[1][1]),r=Mh(t[0][0],t[1][0]),i=Mh(t[0][1],t[1][1]);return{x:e,y:n,width:r-e,height:i-n}}function ege(t,e,n){if(!(!t._brushType||nge(t,e.offsetX,e.offsetY))){var r=t._zr,i=t._covers,a=VD(t,e,n);if(!t._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(a===Lf||s.panelId===a.panelId)&&s2[s.brushType].contain(i[o],n[0],n[1]))return}a&&r.setCursorStyle("crosshair")}}function CC(t){var e=t.event;e.preventDefault&&e.preventDefault()}function PC(t,e,n){return t.childOfName("main").contain(e,n)}function sX(t,e,n,r){var i=t._creatingCover,a=t._creatingPanel,o=t._brushOption,s;if(t._track.push(n.slice()),Xpe(t)||i){if(a&&!i){o.brushMode==="single"&&AC(t);var l=En(o);l.brushType=O5(l.brushType,a),l.panelId=a===Lf?null:a.panelId,i=t._creatingCover=KU(t,l),t._covers.push(i)}if(i){var u=s2[O5(t._brushType,a)],c=i.__brushOption;c.range=u.getCreatingRange(WD(t,i,t._track)),r&&(JU(t,i),u.updateCommon(t,i)),QU(t,i),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&VD(t,e,n)&&AC(t)&&(s={isEnd:r,removeOnClick:!0});return s}function O5(t,e){return t==="auto"?e.defaultBrushType:t}var tge={mousedown:function(t){if(this._dragging)k5(this,t);else if(!t.target||!t.target.draggable){CC(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var n=this._creatingPanel=VD(this,t,e);n&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,n=t.offsetY,r=this.group.transformCoordToLocal(e,n);if(ege(this,t,r),this._dragging){CC(t);var i=sX(this,t,r,!1);i&&Rf(this,i)}},mouseup:function(t){k5(this,t)}};function k5(t,e){if(t._dragging){CC(e);var n=e.offsetX,r=e.offsetY,i=t.group.transformCoordToLocal(n,r),a=sX(t,e,i,!0);t._dragging=!1,t._track=[],t._creatingCover=null,a&&Rf(t,a)}}function nge(t,e,n){var r=t._zr;return e<0||e>r.getWidth()||n<0||n>r.getHeight()}var s2={lineX:A5(0),lineY:A5(1),rect:{createCover:function(t,e){function n(r){return r}return rX({toRectRange:n,fromRectRange:n},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=nX(t);return aX(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,r){iX(t,e,n,r)},updateCommon:TC,contain:PC},polygon:{createCover:function(t,e){var n=new pn;return n.add(new kc({name:"main",style:qD(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new tu({name:"main",draggable:!0,drift:Rt(Jpe,t,e),ondragend:Rt(Rf,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,r){e.childAt(0).setShape({points:WD(t,e,n)})},updateCommon:TC,contain:PC}};function A5(t){return{createCover:function(e,n){return rX({toRectRange:function(r){var i=[r,[0,100]];return t&&i.reverse(),i},fromRectRange:function(r){return r[t]}},e,n,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var n=nX(e),r=h0(n[0][t],n[1][t]),i=Mh(n[0][t],n[1][t]);return[r,i]},updateCoverShape:function(e,n,r,i){var a,o=tX(e,n);if(o!==Lf&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(t);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[r,a];t&&l.reverse(),iX(e,n,l,i)},updateCommon:TC,contain:PC}}function lX(t){return t=GD(t),function(e){return qde(e,t)}}function uX(t,e){return t=GD(t),function(n){var r=e??n,i=r?t.width:t.height,a=r?t.x:t.y;return[a,a+(i||0)]}}function cX(t,e,n){var r=GD(t);return function(i,a){return r.contain(a[0],a[1])&&!zD(i,e,n)}}function GD(t){return ro.create(t)}var rge=["axisLine","axisTickLabel","axisName"],ige=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){t.prototype.init.apply(this,arguments),(this._brushController=new jD(r.getZr())).on("brush",nt(this._onBrush,this))},e.prototype.render=function(n,r,i,a){if(!age(n,r,a)){this.axisModel=n,this.api=i,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new pn,this.group.add(this._axisGroup),!!n.get("show")){var s=sge(n,r),l=s.coordinateSystem,u=n.getAreaSelectStyle(),c=u.width,f=n.axis.dim,d=l.getAxisLayout(f),h=ut({strokeContainThreshold:c},d),p=new pU(n,h);oe(rge,p.add,p),this._axisGroup.add(p.getGroup()),this._refreshBrushController(h,u,n,s,c,i),Wde(o,this._axisGroup,n)}}},e.prototype._refreshBrushController=function(n,r,i,a,o,s){var l=i.axis.getExtent(),u=l[1]-l[0],c=Math.min(30,Math.abs(u)*.1),f=ro.create({x:l[0],y:-o/2,width:u,height:o});f.x-=c,f.width+=2*c,this._brushController.mount({enableGlobalPan:!0,rotation:n.rotation,x:n.position[0],y:n.position[1]}).setPanels([{panelId:"pl",clipPath:lX(f),isTargetByCursor:cX(f,s,a),getLinearBrushOtherExtent:uX(f,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers(oge(i))},e.prototype._onBrush=function(n){var r=n.areas,i=this.axisModel,a=i.axis,o=gt(r,function(s){return[a.coordToData(s.range[0],!0),a.coordToData(s.range[1],!0)]});(!i.option.realtime===n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:i.id,intervals:o})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(Wo);function age(t,e,n){return n&&n.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:n})[0]===t}function oge(t){var e=t.axis;return gt(t.activeIntervals,function(n){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(n[0],!0),e.dataToCoord(n[1],!0)]}})}function sge(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}var lge={type:"axisAreaSelect",event:"axisAreaSelected"};function uge(t){t.registerAction(lge,function(e,n){n.eachComponent({mainType:"parallelAxis",query:e},function(r){r.axis.model.setActiveIntervals(e.intervals)})}),t.registerAction("parallelAxisExpand",function(e,n){n.eachComponent({mainType:"parallel",query:e},function(r){r.setAxisExpand(e)})})}var cge={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function fge(t){t.registerComponentView(Ppe),t.registerComponentModel(Ipe),t.registerCoordinateSystem("parallel",$pe),t.registerPreprocessor(Ape),t.registerComponentModel(kC),t.registerComponentView(ige),Gde(t,"parallel",kC,cge),uge(t)}function dge(t,e){var n=t.existing;if(e.id=t.keyInfo.id,!e.type&&n&&(e.type=n.type),e.parentId==null){var r=e.parentOption;r?e.parentId=r.id:n&&(e.parentId=n.parentId)}e.parentOption=null}function T5(t,e){var n;return oe(e,function(r){t[r]!=null&&t[r]!=="auto"&&(n=!0)}),n}function hge(t,e,n){var r=ut({},n),i=t[e],a=n.$action||"merge";a==="merge"?i?(Ur(i,r,!0),wU(i,r,{ignoreSize:!0}),Yde(n,i),Mm(n,i),Mm(n,i,"shape"),Mm(n,i,"style"),Mm(n,i,"extra"),n.clipPath=i.clipPath):t[e]=r:a==="replace"?t[e]=r:a==="remove"&&i&&(t[e]=null)}var fX=["transition","enterFrom","leaveTo"],pge=fX.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function Mm(t,e,n){if(n&&(!t[n]&&e[n]&&(t[n]={}),t=t[n],e=e[n]),!(!t||!e))for(var r=n?fX:pge,i=0;i<r.length;i++){var a=r[i];t[a]==null&&e[a]!=null&&(t[a]=e[a])}}function gge(t,e){if(t&&(t.hv=e.hv=[T5(e,["left","right"]),T5(e,["top","bottom"])],t.type==="group")){var n=t,r=e;n.width==null&&(n.width=r.width=0),n.height==null&&(n.height=r.height=0)}}var vge=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.preventAutoZ=!0,n}return e.prototype.mergeOption=function(n,r){var i=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,n,r),this.option.elements=i},e.prototype.optionUpdated=function(n,r){var i=this.option,a=(r?i:n).elements,o=i.elements=r?[]:i.elements,s=[];this._flatten(a,s,null);var l=Hde(o,s,"normalMerge"),u=this._elOptionsToUpdate=[];oe(l,function(c,f){var d=c.newOption;d&&(u.push(d),dge(c,d),hge(o,f,d),gge(o[f],d))},this),i.elements=Ms(o,function(c){return c&&delete c.$action,c!=null})},e.prototype._flatten=function(n,r,i){oe(n,function(a){if(a){i&&(a.parentOption=i),r.push(a);var o=a.children;o&&o.length&&this._flatten(o,r,a),delete a.children}},this)},e.prototype.useElOptionsToUpdate=function(){var n=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,n},e.type="graphic",e.defaultOption={elements:[]},e}(qo);function mge(t,e,n,r){return t&&(t.legacy||t.legacy!==!1&&!n&&!r&&e!=="tspan"&&(e==="text"||Jt(t,"text")))}function yge(t,e,n){var r=t,i,a,o;if(e==="text")o=r;else{o={},Jt(r,"text")&&(o.text=r.text),Jt(r,"rich")&&(o.rich=r.rich),Jt(r,"textFill")&&(o.fill=r.textFill),Jt(r,"textStroke")&&(o.stroke=r.textStroke),Jt(r,"fontFamily")&&(o.fontFamily=r.fontFamily),Jt(r,"fontSize")&&(o.fontSize=r.fontSize),Jt(r,"fontStyle")&&(o.fontStyle=r.fontStyle),Jt(r,"fontWeight")&&(o.fontWeight=r.fontWeight),a={type:"text",style:o,silent:!0},i={};var s=Jt(r,"textPosition");i.position=s?r.textPosition:"inside",Jt(r,"textPosition")&&(i.position=r.textPosition),Jt(r,"textOffset")&&(i.offset=r.textOffset),Jt(r,"textRotation")&&(i.rotation=r.textRotation),Jt(r,"textDistance")&&(i.distance=r.textDistance)}return M5(o,t),oe(o.rich,function(l){M5(l,l)}),{textConfig:i,textContent:a}}function M5(t,e){e&&(e.font=e.textFont||e.font,Jt(e,"textStrokeWidth")&&(t.lineWidth=e.textStrokeWidth),Jt(e,"textAlign")&&(t.align=e.textAlign),Jt(e,"textVerticalAlign")&&(t.verticalAlign=e.textVerticalAlign),Jt(e,"textLineHeight")&&(t.lineHeight=e.textLineHeight),Jt(e,"textWidth")&&(t.width=e.textWidth),Jt(e,"textHeight")&&(t.height=e.textHeight),Jt(e,"textBackgroundColor")&&(t.backgroundColor=e.textBackgroundColor),Jt(e,"textPadding")&&(t.padding=e.textPadding),Jt(e,"textBorderColor")&&(t.borderColor=e.textBorderColor),Jt(e,"textBorderWidth")&&(t.borderWidth=e.textBorderWidth),Jt(e,"textBorderRadius")&&(t.borderRadius=e.textBorderRadius),Jt(e,"textBoxShadowColor")&&(t.shadowColor=e.textBoxShadowColor),Jt(e,"textBoxShadowBlur")&&(t.shadowBlur=e.textBoxShadowBlur),Jt(e,"textBoxShadowOffsetX")&&(t.shadowOffsetX=e.textBoxShadowOffsetX),Jt(e,"textBoxShadowOffsetY")&&(t.shadowOffsetY=e.textBoxShadowOffsetY))}var dX={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},C5=Tc(dX);Ude(c0,function(t,e){return t[e]=1,t},{});c0.join(", ");var eb=["","style","shape","extra"],Ch=xa();function HD(t,e,n,r,i){var a=t+"Animation",o=_U(t,r,i)||{},s=Ch(e).userDuring;return o.duration>0&&(o.during=s?nt(Ege,{el:e,userDuring:s}):null,o.setToFinal=!0,o.scope=t),ut(o,n[a]),o}function H_(t,e,n,r){r=r||{};var i=r.dataIndex,a=r.isInit,o=r.clearStyle,s=n.isAnimationEnabled(),l=Ch(t),u=e.style;l.userDuring=e.during;var c={},f={};if(kge(t,e,f),D5("shape",e,f),D5("extra",e,f),!a&&s&&(Oge(t,e,c),P5("shape",t,e,c),P5("extra",t,e,c),Age(t,e,u,c)),f.style=u,xge(t,f,o),_ge(t,e),s)if(a){var d={};oe(eb,function(p){var g=p?e[p]:e;g&&g.enterFrom&&(p&&(d[p]=d[p]||{}),ut(p?d[p]:d,g.enterFrom))});var h=HD("enter",t,e,n,i);h.duration>0&&t.animateFrom(d,h)}else wge(t,e,i||0,n,c);hX(t,e),u?t.dirty():t.markRedraw()}function hX(t,e){for(var n=Ch(t).leaveToProps,r=0;r<eb.length;r++){var i=eb[r],a=i?e[i]:e;a&&a.leaveTo&&(n||(n=Ch(t).leaveToProps={}),i&&(n[i]=n[i]||{}),ut(i?n[i]:n,a.leaveTo))}}function bge(t,e,n,r){if(t){var i=t.parent,a=Ch(t).leaveToProps;if(a){var o=HD("update",t,e,n,0);o.done=function(){i.remove(t)},t.animateTo(a,o)}else i.remove(t)}}function _f(t){return t==="all"}function xge(t,e,n){var r=e.style;if(!t.isGroup&&r){if(n){t.useStyle({});for(var i=t.animators,a=0;a<i.length;a++){var o=i[a];o.targetName==="style"&&o.changeTarget(t.style)}}t.setStyle(r)}e.style=null,t.attr(e),e.style=r}function wge(t,e,n,r,i){{var a=HD("update",t,e,r,n);a.duration>0&&t.animateFrom(i,a)}}function _ge(t,e){Jt(e,"silent")&&(t.silent=e.silent),Jt(e,"ignore")&&(t.ignore=e.ignore),t instanceof CD&&Jt(e,"invisible")&&(t.invisible=e.invisible),t instanceof xl&&Jt(e,"autoBatch")&&(t.autoBatch=e.autoBatch)}var $s={},Sge={setTransform:function(t,e){return $s.el[t]=e,this},getTransform:function(t){return $s.el[t]},setShape:function(t,e){var n=$s.el,r=n.shape||(n.shape={});return r[t]=e,n.dirtyShape&&n.dirtyShape(),this},getShape:function(t){var e=$s.el.shape;if(e)return e[t]},setStyle:function(t,e){var n=$s.el,r=n.style;return r&&(r[t]=e,n.dirtyStyle&&n.dirtyStyle()),this},getStyle:function(t){var e=$s.el.style;if(e)return e[t]},setExtra:function(t,e){var n=$s.el.extra||($s.el.extra={});return n[t]=e,this},getExtra:function(t){var e=$s.el.extra;if(e)return e[t]}};function Ege(){var t=this,e=t.el;if(e){var n=Ch(e).userDuring,r=t.userDuring;if(n!==r){t.el=t.userDuring=null;return}$s.el=e,r(Sge)}}function P5(t,e,n,r){var i=n[t];if(i){var a=e[t],o;if(a){var s=n.transition,l=i.transition;if(l)if(!o&&(o=r[t]={}),_f(l))ut(o,a);else for(var u=nu(l),c=0;c<u.length;c++){var f=u[c],d=a[f];o[f]=d}else if(_f(s)||ai(s,t)>=0){!o&&(o=r[t]={});for(var h=Tc(a),c=0;c<h.length;c++){var f=h[c],d=a[f];Tge(i[f],d)&&(o[f]=d)}}}}}function D5(t,e,n){var r=e[t];if(r)for(var i=n[t]={},a=Tc(r),o=0;o<a.length;o++){var s=a[o];i[s]=Xde(r[s])}}function Oge(t,e,n){for(var r=e.transition,i=_f(r)?c0:nu(r||[]),a=0;a<i.length;a++){var o=i[a];if(!(o==="style"||o==="shape"||o==="extra")){var s=t[o];n[o]=s}}}function kge(t,e,n){for(var r=0;r<C5.length;r++){var i=C5[r],a=dX[i],o=e[i];o&&(n[a[0]]=o[0],n[a[1]]=o[1])}for(var r=0;r<c0.length;r++){var s=c0[r];e[s]!=null&&(n[s]=e[s])}}function Age(t,e,n,r){if(n){var i=t.style,a;if(i){var o=n.transition,s=e.transition;if(o&&!_f(o)){var l=nu(o);!a&&(a=r.style={});for(var u=0;u<l.length;u++){var c=l[u],f=i[c];a[c]=f}}else if(t.getAnimationStyleProps&&(_f(s)||_f(o)||ai(s,"style")>=0)){var d=t.getAnimationStyleProps(),h=d?d.style:null;if(h){!a&&(a=r.style={});for(var p=Tc(n),u=0;u<p.length;u++){var c=p[u];if(h[c]){var f=i[c];a[c]=f}}}}}}}function Tge(t,e){return Zde(t)?t!==e:t!=null&&isFinite(t)}var pX=xa(),Mge=["percent","easing","shape","style","extra"];function Cge(t){t.stopAnimation("keyframe"),t.attr(pX(t))}function DC(t,e,n){if(!(!n.isAnimationEnabled()||!e)){if(at(e)){oe(e,function(s){DC(t,s,n)});return}var r=e.keyframes,i=e.duration;if(n&&i==null){var a=_U("enter",n,0);i=a&&a.duration}if(!(!r||!i)){var o=pX(t);oe(eb,function(s){if(!(s&&!t[s])){var l;r.sort(function(u,c){return u.percent-c.percent}),oe(r,function(u){var c=t.animators,f=s?u[s]:u;if(f){var d=Tc(f);if(s||(d=Ms(d,function(g){return ai(Mge,g)<0})),!!d.length){l||(l=t.animate(s,e.loop,!0),l.scope="keyframe");for(var h=0;h<c.length;h++)c[h]!==l&&c[h].targetName===l.targetName&&c[h].stopTracks(d);s&&(o[s]=o[s]||{});var p=s?o[s]:o;oe(d,function(g){p[g]=((s?t[s]:t)||{})[g]}),l.whenWithKeys(i*u.percent,f,d,u.easing)}}}),l&&l.delay(e.delay||0).duration(i).start(e.easing)}})}}}var I5={path:null,compoundPath:null,group:pn,image:bv,text:Xr},Oo=xa(),Pge=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(){this._elMap=ii()},e.prototype.render=function(n,r,i){n!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=n,this._updateElements(n),this._relocate(n,i)},e.prototype._updateElements=function(n){var r=n.useElOptionsToUpdate();if(r){var i=this._elMap,a=this.group,o=n.get("z"),s=n.get("zlevel");oe(r,function(l){var u=Yl(l.id,null),c=u!=null?i.get(u):null,f=Yl(l.parentId,null),d=f!=null?i.get(f):a,h=l.type,p=l.style;h==="text"&&p&&l.hv&&l.hv[1]&&(p.textVerticalAlign=p.textBaseline=p.verticalAlign=p.align=null);var g=l.textContent,v=l.textConfig;if(p&&mge(p,h,!!v,!!g)){var m=yge(p,h);!v&&m.textConfig&&(v=l.textConfig=m.textConfig),!g&&m.textContent&&(g=m.textContent)}var y=Dge(l),b=l.$action||"merge",x=b==="merge",w=b==="replace";if(x){var _=!c,E=c;_?E=L5(u,d,l.type,i):(E&&(Oo(E).isNew=!1),Cge(E)),E&&(H_(E,y,n,{isInit:_}),R5(E,l,o,s))}else if(w){m1(c,l,i,n);var S=L5(u,d,l.type,i);S&&(H_(S,y,n,{isInit:!0}),R5(S,l,o,s))}else b==="remove"&&(hX(c,l),m1(c,l,i,n));var O=i.get(u);if(O&&g)if(x){var A=O.getTextContent();A?A.attr(g):O.setTextContent(new Xr(g))}else w&&O.setTextContent(new Xr(g));if(O){var T=l.clipPath;if(T){var I=T.type,D=void 0,_=!1;if(x){var R=O.getClipPath();_=!R||Oo(R).type!==I,D=_?IC(I):R}else w&&(_=!0,D=IC(I));O.setClipPath(D),H_(D,T,n,{isInit:_}),DC(D,T.keyframeAnimation,n)}var F=Oo(O);O.setTextConfig(v),F.option=l,Ige(O,n,l),PD({el:O,componentModel:n,itemName:O.name,itemTooltipOption:l.tooltip}),DC(O,l.keyframeAnimation,n)}})}},e.prototype._relocate=function(n,r){for(var i=n.option.elements,a=this.group,o=this._elMap,s=r.getWidth(),l=r.getHeight(),u=["x","y"],c=0;c<i.length;c++){var f=i[c],d=Yl(f.id,null),h=d!=null?o.get(d):null;if(!(!h||!h.isGroup)){var p=h.parent,g=p===a,v=Oo(h),m=Oo(p);v.width=mt(v.option.width,g?s:m.width)||0,v.height=mt(v.option.height,g?l:m.height)||0}}for(var c=i.length-1;c>=0;c--){var f=i[c],d=Yl(f.id,null),h=d!=null?o.get(d):null;if(h){var p=h.parent,m=Oo(p),y=p===a?{width:s,height:l}:{width:m.width,height:m.height},b={},x=Zx(h,f,y,null,{hv:f.hv,boundingMode:f.bounding},b);if(!Oo(h).isNew&&x){for(var w=f.transition,_={},E=0;E<u.length;E++){var S=u[E],O=b[S];w&&(_f(w)||ai(w,S)>=0)?_[S]=O:h[S]=O}ur(h,_,n,0)}else h.attr(b)}}},e.prototype._clear=function(){var n=this,r=this._elMap;r.each(function(i){m1(i,Oo(i).option,r,n._lastGraphicModel)}),this._elMap=ii()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(Wo);function IC(t){var e=Jt(I5,t)?I5[t]:Kde(t),n=new e({});return Oo(n).type=t,n}function L5(t,e,n,r){var i=IC(n);return e.add(i),r.set(t,i),Oo(i).id=t,Oo(i).isNew=!0,i}function m1(t,e,n,r){var i=t&&t.parent;i&&(t.type==="group"&&t.traverse(function(a){m1(a,e,n,r)}),bge(t,e,r),n.removeKey(Oo(t).id))}function R5(t,e,n,r){t.isGroup||oe([["cursor",CD.prototype.cursor],["zlevel",r||0],["z",n||0],["z2",0]],function(i){var a=i[0];Jt(e,a)?t[a]=Mo(e[a],i[1]):t[a]==null&&(t[a]=i[1])}),oe(Tc(e),function(i){if(i.indexOf("on")===0){var a=e[i];t[i]=Tr(a)?a:null}}),Jt(e,"draggable")&&(t.draggable=e.draggable),e.name!=null&&(t.name=e.name),e.id!=null&&(t.id=e.id)}function Dge(t){return t=ut({},t),oe(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(Jde),function(e){delete t[e]}),t}function Ige(t,e,n){var r=Yn(t).eventData;!t.silent&&!t.ignore&&!r&&(r=Yn(t).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name}),r&&(r.info=n.info)}function Lge(t){t.registerComponentModel(vge),t.registerComponentView(Pge),t.registerPreprocessor(function(e){var n=e.graphic;at(n)?!n[0]||!n[0].elements?e.graphic=[{elements:n}]:e.graphic=[e.graphic[0]]:n&&!n.elements&&(e.graphic=[{elements:[n]}])})}var N5=["x","y","radius","angle","single"],Rge=["cartesian2d","polar","singleAxis"];function Nge(t){var e=t.get("coordinateSystem");return ai(Rge,e)>=0}function Wu(t){return t+"Axis"}function Fge(t,e){var n=ii(),r=[],i=ii();t.eachComponent({mainType:"dataZoom",query:e},function(c){i.get(c.uid)||s(c)});var a;do a=!1,t.eachComponent("dataZoom",o);while(a);function o(c){!i.get(c.uid)&&l(c)&&(s(c),a=!0)}function s(c){i.set(c.uid,!0),r.push(c),u(c)}function l(c){var f=!1;return c.eachTargetAxis(function(d,h){var p=n.get(d);p&&p[h]&&(f=!0)}),f}function u(c){c.eachTargetAxis(function(f,d){(n.get(f)||n.set(f,[]))[d]=!0})}return r}function gX(t){var e=t.ecModel,n={infoList:[],infoMap:ii()};return t.eachTargetAxis(function(r,i){var a=e.getComponent(Wu(r),i);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,l=n.infoMap.get(s);l||(l={model:o,axisModels:[]},n.infoList.push(l),n.infoMap.set(s,l)),l.axisModels.push(a)}}}),n}var Y_=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},t}(),p0=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return e.prototype.init=function(n,r,i){var a=F5(n);this.settledOption=a,this.mergeDefaultAndTheme(n,i),this._doInit(a)},e.prototype.mergeOption=function(n){var r=F5(n);Ur(this.option,n,!0),Ur(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(n){var r=this.option;this._setDefaultThrottle(n),this._updateRangeUse(n);var i=this.settledOption;oe([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(r[a[0]]=i[a[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var n=this.get("orient",!0),r=this._targetAxisInfoMap=ii(),i=this._fillSpecifiedTargetAxis(r);i?this._orient=n||this._makeAutoOrientByTargetAxis():(this._orient=n||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(n){var r=!1;return oe(N5,function(i){var a=this.getReferringComponents(Wu(i),Qde);if(a.specified){r=!0;var o=new Y_;oe(a.models,function(s){o.add(s.componentIndex)}),n.set(i,o)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(n,r){var i=this.ecModel,a=!0;if(a){var o=r==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===r}});l(s,"single")}function l(u,c){var f=u[0];if(f){var d=new Y_;if(d.add(f.componentIndex),n.set(c,d),a=!1,c==="x"||c==="y"){var h=f.getReferringComponents("grid",Th).models[0];h&&oe(u,function(p){f.componentIndex!==p.componentIndex&&h===p.getReferringComponents("grid",Th).models[0]&&d.add(p.componentIndex)})}}}a&&oe(N5,function(u){if(a){var c=i.findComponents({mainType:Wu(u),filter:function(d){return d.get("type",!0)==="category"}});if(c[0]){var f=new Y_;f.add(c[0].componentIndex),n.set(u,f),a=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var n;return this.eachTargetAxis(function(r){!n&&(n=r)},this),n==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(n){if(n.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(n){var r=this._rangePropMode,i=this.get("rangeMode");oe([["start","startValue"],["end","endValue"]],function(a,o){var s=n[a[0]]!=null,l=n[a[1]]!=null;s&&!l?r[o]="percent":!s&&l?r[o]="value":i?r[o]=i[o]:s&&(r[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var n;return this.eachTargetAxis(function(r,i){n==null&&(n=this.ecModel.getComponent(Wu(r),i))},this),n},e.prototype.eachTargetAxis=function(n,r){this._targetAxisInfoMap.each(function(i,a){oe(i.indexList,function(o){n.call(r,a,o)})})},e.prototype.getAxisProxy=function(n,r){var i=this.getAxisModel(n,r);if(i)return i.__dzAxisProxy},e.prototype.getAxisModel=function(n,r){var i=this._targetAxisInfoMap.get(n);if(i&&i.indexMap[r])return this.ecModel.getComponent(Wu(n),r)},e.prototype.setRawRange=function(n){var r=this.option,i=this.settledOption;oe([["start","startValue"],["end","endValue"]],function(a){(n[a[0]]!=null||n[a[1]]!=null)&&(r[a[0]]=i[a[0]]=n[a[0]],r[a[1]]=i[a[1]]=n[a[1]])},this),this._updateRangeUse(n)},e.prototype.setCalculatedRange=function(n){var r=this.option;oe(["start","startValue","end","endValue"],function(i){r[i]=n[i]})},e.prototype.getPercentRange=function(){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataPercentWindow()},e.prototype.getValueRange=function(n,r){if(n==null&&r==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(n,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(n){if(n)return n.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var u=this.getAxisProxy(o,s.indexList[l]);if(u.hostedBy(this))return u;r||(r=u)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(qo);function F5(t){var e={};return oe(["start","end","startValue","endValue","throttle"],function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}var zge=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="dataZoom.select",e}(p0),YD=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i,a){this.dataZoomModel=n,this.ecModel=r,this.api=i},e.type="dataZoom",e}(Wo),jge=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="dataZoom.select",e}(YD),Xd=oe,z5=Co,Bge=function(){function t(e,n,r,i){this._dimName=e,this._axisIndex=n,this.ecModel=i,this._dataZoomModel=r}return t.prototype.hostedBy=function(e){return this._dataZoomModel===e},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(n){if(Nge(n)){var r=Wu(this._dimName),i=n.getReferringComponents(r,Th).models[0];i&&this._axisIndex===i.componentIndex&&e.push(n)}},this),e},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return En(this._minMaxSpan)},t.prototype.calculateDataWindow=function(e){var n=this._dataExtent,r=this.getAxisModel(),i=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],u;Xd(["start","end"],function(d,h){var p=e[d],g=e[d+"Value"];a[h]==="percent"?(p==null&&(p=o[h]),g=i.parse(Kn(p,o,n))):(u=!0,g=g==null?n[h]:i.parse(g),p=Kn(g,n,o)),l[h]=g==null||isNaN(g)?n[h]:g,s[h]=p==null||isNaN(p)?o[h]:p}),z5(l),z5(s);var c=this._minMaxSpan;u?f(l,s,n,o,!1):f(s,l,o,n,!0);function f(d,h,p,g,v){var m=v?"Span":"ValueSpan";nd(0,d,p,"all",c["min"+m],c["max"+m]);for(var y=0;y<2;y++)h[y]=Kn(d[y],p,g,!0),v&&(h[y]=i.parse(h[y]))}return{valueWindow:l,percentWindow:s}},t.prototype.reset=function(e){if(e===this._dataZoomModel){var n=this.getTargetSeriesModels();this._dataExtent=$ge(this,this._dimName,n),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(e,n){if(e!==this._dataZoomModel)return;var r=this._dimName,i=this.getTargetSeriesModels(),a=e.get("filterMode"),o=this._valueWindow;if(a==="none")return;Xd(i,function(l){var u=l.getData(),c=u.mapDimensionsAll(r);if(c.length){if(a==="weakFilter"){var f=u.getStore(),d=gt(c,function(h){return u.getDimensionIndex(h)},u);u.filterSelf(function(h){for(var p,g,v,m=0;m<c.length;m++){var y=f.get(d[m],h),b=!isNaN(y),x=y<o[0],w=y>o[1];if(b&&!x&&!w)return!0;b&&(v=!0),x&&(p=!0),w&&(g=!0)}return v&&p&&g})}else Xd(c,function(h){if(a==="empty")l.setData(u=u.map(h,function(g){return s(g)?g:NaN}));else{var p={};p[h]=o,u.selectRange(p)}});Xd(c,function(h){u.setApproximateExtent(o,h)})}});function s(l){return l>=o[0]&&l<=o[1]}},t.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},n=this._dataZoomModel,r=this._dataExtent;Xd(["min","max"],function(i){var a=n.get(i+"Span"),o=n.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=Kn(r[0]+o,r,[0,100],!0):a!=null&&(o=Kn(a,[0,100],r,!0)-r[0]),e[i+"Span"]=a,e[i+"ValueSpan"]=o},this)},t.prototype._setAxisModel=function(){var e=this.getAxisModel(),n=this._percentWindow,r=this._valueWindow;if(n){var i=ehe(r,[0,500]);i=Math.min(i,20);var a=e.axis.scale.rawExtentInfo;n[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(i)),n[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(i)),a.freeze()}},t}();function $ge(t,e,n){var r=[1/0,-1/0];Xd(n,function(o){the(r,o.getData(),e)});var i=t.getAxisModel(),a=nhe(i.axis.scale,i,r).calculate();return[a.min,a.max]}var Vge={getTargetSeries:function(t){function e(i){t.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=t.getComponent(Wu(o),s);i(o,s,l,a)})})}e(function(i,a,o,s){o.__dzAxisProxy=null});var n=[];e(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new Bge(i,a,s,t),n.push(o.__dzAxisProxy))});var r=ii();return oe(n,function(i){oe(i.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(t,e){t.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(r,i){n.getAxisProxy(r,i).reset(n)}),n.eachTargetAxis(function(r,i){n.getAxisProxy(r,i).filterData(n,e)})}),t.eachComponent("dataZoom",function(n){var r=n.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),a=r.getDataValueWindow();n.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};function qge(t){t.registerAction("dataZoom",function(e,n){var r=Fge(n,e);oe(r,function(i){i.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var j5=!1;function UD(t){j5||(j5=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,Vge),qge(t),t.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function Wge(t){t.registerComponentModel(zge),t.registerComponentView(jge),UD(t)}var ko=function(){function t(){}return t}(),vX={};function Zd(t,e){vX[t]=e}function mX(t){return vX[t]}var Gge=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var n=this.ecModel;oe(this.option.feature,function(r,i){var a=mX(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(n)),Ur(r,a.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(qo);function Hge(t,e,n){var r=e.getBoxLayoutParams(),i=e.get("padding"),a={width:n.getWidth(),height:n.getHeight()},o=za(r,a,i);wf(e.get("orient"),t,e.get("itemGap"),o.width,o.height),Zx(t,r,a,i)}function yX(t,e){var n=SU(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),t=new Dr({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),t}var Yge=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r,i,a){var o=this.group;if(o.removeAll(),!n.get("show"))return;var s=+n.get("itemSize"),l=n.get("orient")==="vertical",u=n.get("feature")||{},c=this._features||(this._features={}),f=[];oe(u,function(p,g){f.push(g)}),new yv(this._featureNames||[],f).add(d).update(d).remove(Rt(d,null)).execute(),this._featureNames=f;function d(p,g){var v=f[p],m=f[g],y=u[v],b=new ws(y,n,n.ecModel),x;if(a&&a.newTitle!=null&&a.featureName===v&&(y.title=a.newTitle),v&&!m){if(Uge(v))x={onclick:b.option.onclick,featureName:v};else{var w=mX(v);if(!w)return;x=new w}c[v]=x}else if(x=c[m],!x)return;x.uid=rhe("toolbox-feature"),x.model=b,x.ecModel=r,x.api=i;var _=x instanceof ko;if(!v&&m){_&&x.dispose&&x.dispose(r,i);return}if(!b.get("show")||_&&x.unusable){_&&x.remove&&x.remove(r,i);return}h(b,x,v),b.setIconStatus=function(E,S){var O=this.option,A=this.iconPaths;O.iconStatus=O.iconStatus||{},O.iconStatus[E]=S,A[E]&&(S==="emphasis"?f0:d0)(A[E])},x instanceof ko&&x.render&&x.render(b,r,i,a)}function h(p,g,v){var m=p.getModel("iconStyle"),y=p.getModel(["emphasis","iconStyle"]),b=g instanceof ko&&g.getIcons?g.getIcons():p.get("icon"),x=p.get("title")||{},w,_;xr(b)?(w={},w[v]=b):w=b,xr(x)?(_={},_[v]=x):_=x;var E=p.iconPaths={};oe(w,function(S,O){var A=DD(S,{},{x:-s/2,y:-s/2,width:s,height:s});A.setStyle(m.getItemStyle());var T=A.ensureState("emphasis");T.style=y.getItemStyle();var I=new Xr({style:{text:_[O],align:y.get("textAlign"),borderRadius:y.get("textBorderRadius"),padding:y.get("textPadding"),fill:null,font:ihe({fontStyle:y.get("textFontStyle"),fontFamily:y.get("textFontFamily"),fontSize:y.get("textFontSize"),fontWeight:y.get("textFontWeight")},r)},ignore:!0});A.setTextContent(I),PD({el:A,componentModel:n,itemName:O,formatterParamsExtra:{title:_[O]}}),A.__title=_[O],A.on("mouseover",function(){var D=y.getItemStyle(),R=l?n.get("right")==null&&n.get("left")!=="right"?"right":"left":n.get("bottom")==null&&n.get("top")!=="bottom"?"bottom":"top";I.setStyle({fill:y.get("textFill")||D.fill||D.stroke||"#000",backgroundColor:y.get("textBackgroundColor")}),A.setTextConfig({position:y.get("textPosition")||R}),I.ignore=!n.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){p.get(["iconStatus",O])!=="emphasis"&&i.leaveEmphasis(this),I.hide()}),(p.get(["iconStatus",O])==="emphasis"?f0:d0)(A),o.add(A),A.on("click",nt(g.onclick,g,r,i,O)),E[O]=A})}Hge(o,n,i),o.add(yX(o.getBoundingRect(),n)),l||o.eachChild(function(p){var g=p.__title,v=p.ensureState("emphasis"),m=v.textConfig||(v.textConfig={}),y=p.getTextContent(),b=y&&y.ensureState("emphasis");if(b&&!Tr(b)&&g){var x=b.style||(b.style={}),w=ahe(g,Xr.makeFont(x)),_=p.x+o.x,E=p.y+o.y+s,S=!1;E+w.height>i.getHeight()&&(m.position="top",S=!0);var O=S?-5-w.height:s+10;_+w.width/2>i.getWidth()?(m.position=["100%",O],x.align="right"):_-w.width/2<0&&(m.position=[0,O],x.align="left")}})},e.prototype.updateView=function(n,r,i,a){oe(this._features,function(o){o instanceof ko&&o.updateView&&o.updateView(o.model,r,i,a)})},e.prototype.remove=function(n,r){oe(this._features,function(i){i instanceof ko&&i.remove&&i.remove(n,r)}),this.group.removeAll()},e.prototype.dispose=function(n,r){oe(this._features,function(i){i instanceof ko&&i.dispose&&i.dispose(n,r)})},e.type="toolbox",e}(Wo);function Uge(t){return t.indexOf("my")===0}var Xge=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(n,r){var i=this.model,a=i.get("name")||n.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":i.get("type",!0)||"png",l=r.getConnectedDataURL({type:s,backgroundColor:i.get("backgroundColor",!0)||n.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),u=EU.browser;if(typeof MouseEvent=="function"&&(u.newEdge||!u.ie&&!u.edge)){var c=document.createElement("a");c.download=a+"."+s,c.target="_blank",c.href=l;var f=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(f)}else if(window.navigator.msSaveOrOpenBlob||o){var d=l.split(","),h=d[0].indexOf("base64")>-1,p=o?decodeURIComponent(d[1]):d[1];h&&(p=window.atob(p));var g=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var v=p.length,m=new Uint8Array(v);v--;)m[v]=p.charCodeAt(v);var y=new Blob([m]);window.navigator.msSaveOrOpenBlob(y,g)}else{var b=document.createElement("iframe");document.body.appendChild(b);var x=b.contentWindow,w=x.document;w.open("image/svg+xml","replace"),w.write(p),w.close(),x.focus(),w.execCommand("SaveAs",!0,g),document.body.removeChild(b)}}else{var _=i.get("lang"),E='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(_&&_[0]||"")+'" /></body>',S=window.open();S.document.write(E),S.document.title=a}},e.getDefaultOption=function(n){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:n.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:n.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e}(ko),B5="__ec_magicType_stack__",Zge=[["line","bar"],["stack"]],Kge=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getIcons=function(){var n=this.model,r=n.get("icon"),i={};return oe(n.get("type"),function(a){r[a]&&(i[a]=r[a])}),i},e.getDefaultOption=function(n){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:n.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(n,r,i){var a=this.model,o=a.get(["seriesIndex",i]);if($5[i]){var s={series:[]},l=function(f){var d=f.subType,h=f.id,p=$5[i](d,h,f,a);p&&(Ci(p,f.option),s.series.push(p));var g=f.coordinateSystem;if(g&&g.type==="cartesian2d"&&(i==="line"||i==="bar")){var v=g.getAxesByScale("ordinal")[0];if(v){var m=v.dim,y=m+"Axis",b=f.getReferringComponents(y,Th).models[0],x=b.componentIndex;s[y]=s[y]||[];for(var w=0;w<=x;w++)s[y][x]=s[y][x]||{};s[y][x].boundaryGap=i==="bar"}}};oe(Zge,function(f){ai(f,i)>=0&&oe(f,function(d){a.setIconStatus(d,"normal")})}),a.setIconStatus(i,"emphasis"),n.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var u,c=i;i==="stack"&&(u=Ur({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(c="tiled")),r.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:u,featureName:"magicType"})}},e}(ko),$5={line:function(t,e,n,r){if(t==="bar")return Ur({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(t,e,n,r){if(t==="line")return Ur({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(t,e,n,r){var i=n.get("stack")===B5;if(t==="line"||t==="bar")return r.setIconStatus("stack",i?"normal":"emphasis"),Ur({id:e,stack:i?"":B5},r.get(["option","stack"])||{},!0)}};Ux({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)});var l2=new Array(60).join("-"),Ph="	";function Jge(t){var e={},n=[],r=[];return t.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;e[s]||(e[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),e[s].series.push(i)}else n.push(i)}else n.push(i)}),{seriesGroupByCategoryAxis:e,other:n,meta:r}}function Qge(t){var e=[];return oe(t,function(n,r){var i=n.categoryAxis,a=n.valueAxis,o=a.dim,s=[" "].concat(gt(n.series,function(h){return h.name})),l=[i.model.getCategories()];oe(n.series,function(h){var p=h.getRawData();l.push(h.getRawData().mapArray(p.mapDimension(o),function(g){return g}))});for(var u=[s.join(Ph)],c=0;c<l[0].length;c++){for(var f=[],d=0;d<l.length;d++)f.push(l[d][c]);u.push(f.join(Ph))}e.push(u.join(`
`))}),e.join(`

`+l2+`

`)}function e0e(t){return gt(t,function(e){var n=e.getRawData(),r=[e.name],i=[];return n.each(n.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=n.getName(o),l=0;l<a-1;l++)i[l]=arguments[l];r.push((s?s+Ph:"")+i.join(Ph))}),r.join(`
`)}).join(`

`+l2+`

`)}function t0e(t){var e=Jge(t);return{value:Ms([Qge(e.seriesGroupByCategoryAxis),e0e(e.other)],function(n){return!!n.replace(/[\n\t\s]/g,"")}).join(`

`+l2+`

`),meta:e.meta}}function tb(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function n0e(t){var e=t.slice(0,t.indexOf(`
`));if(e.indexOf(Ph)>=0)return!0}var LC=new RegExp("["+Ph+"]+","g");function r0e(t){for(var e=t.split(/\n+/g),n=tb(e.shift()).split(LC),r=[],i=gt(n,function(l){return{name:l,data:[]}}),a=0;a<e.length;a++){var o=tb(e[a]).split(LC);r.push(o.shift());for(var s=0;s<o.length;s++)i[s]&&(i[s].data[a]=o[s])}return{series:i,categories:r}}function i0e(t){for(var e=t.split(/\n+/g),n=tb(e.shift()),r=[],i=0;i<e.length;i++){var a=tb(e[i]);if(a){var o=a.split(LC),s="",l=void 0,u=!1;isNaN(o[0])?(u=!0,s=o[0],o=o.slice(1),r[i]={name:s,value:[]},l=r[i].value):l=r[i]=[];for(var c=0;c<o.length;c++)l.push(+o[c]);l.length===1&&(u?r[i].value=l[0]:r[i]=l[0])}}return{name:n,data:r}}function a0e(t,e){var n=t.split(new RegExp(`
*`+l2+`
*`,"g")),r={series:[]};return oe(n,function(i,a){if(n0e(i)){var o=r0e(i),s=e[a],l=s.axisDim+"Axis";s&&(r[l]=r[l]||[],r[l][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=i0e(i);r.series.push(o)}}),r}var o0e=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(n,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=a.get("lang")||[];s.innerHTML=l[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var f=a.get("optionToContent"),d=a.get("contentToOption"),h=t0e(n);if(Tr(f)){var p=f(r.getOption());xr(p)?u.innerHTML=p:ohe(p)&&u.appendChild(p)}else{c.readOnly=a.get("readOnly");var g=c.style;g.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",g.color=a.get("textColor"),g.borderColor=a.get("textareaBorderColor"),g.backgroundColor=a.get("textareaColor"),c.value=h.value,u.appendChild(c)}var v=h.meta,m=document.createElement("div");m.style.cssText="position:absolute;bottom:5px;left:0;right:0";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",b=document.createElement("div"),x=document.createElement("div");y+=";background-color:"+a.get("buttonColor"),y+=";color:"+a.get("buttonTextColor");var w=this;function _(){i.removeChild(o),w._dom=null}i5(b,"click",_),i5(x,"click",function(){if(d==null&&f!=null||d!=null&&f==null){_();return}var E;try{Tr(d)?E=d(u,r.getOption()):E=a0e(c.value,v)}catch(S){throw _(),new Error("Data view format error "+S)}E&&r.dispatchAction({type:"changeDataView",newOption:E}),_()}),b.innerHTML=l[1],x.innerHTML=l[2],x.style.cssText=b.style.cssText=y,!a.get("readOnly")&&m.appendChild(x),m.appendChild(b),o.appendChild(s),o.appendChild(u),o.appendChild(m),u.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},e.prototype.remove=function(n,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(n,r){this.remove(n,r)},e.getDefaultOption=function(n){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:n.getLocaleModel().get(["toolbox","dataView","title"]),lang:n.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},e}(ko);function s0e(t,e){return gt(t,function(n,r){var i=e&&e[r];if(oo(i)&&!at(i)){var a=oo(n)&&!at(n);a||(n={value:n});var o=i.name!=null&&n.name==null;return n=Ci(n,i),o&&delete n.name,n}else return n})}Ux({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var n=[];oe(t.newOption.series,function(r){var i=e.getSeriesByName(r.name)[0];if(!i)n.push(ut({type:"scatter"},r));else{var a=i.get("data");n.push({name:r.name,data:s0e(r.data,a)})}}),e.mergeOption(Ci({series:n},t.newOption))});var bX=oe,xX=xa();function l0e(t,e){var n=XD(t);bX(e,function(r,i){for(var a=n.length-1;a>=0;a--){var o=n[a];if(o[i])break}if(a<0){var s=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(s){var l=s.getPercentRange();n[0][i]={dataZoomId:i,start:l[0],end:l[1]}}}}),n.push(e)}function u0e(t){var e=XD(t),n=e[e.length-1];e.length>1&&e.pop();var r={};return bX(n,function(i,a){for(var o=e.length-1;o>=0;o--)if(i=e[o][a],i){r[a]=i;break}}),r}function c0e(t){xX(t).snapshots=null}function f0e(t){return XD(t).length}function XD(t){var e=xX(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var d0e=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onclick=function(n,r){c0e(n),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(n){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:n.getLocaleModel().get(["toolbox","restore","title"])};return r},e}(ko);Ux({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});var h0e=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],ZD=function(){function t(e,n,r){var i=this;this._targetInfoList=[];var a=V5(n,e);oe(p0e,function(o,s){(!r||!r.include||ai(r.include,s)>=0)&&o(a,i._targetInfoList)})}return t.prototype.setOutputRanges=function(e,n){return this.matchOutputRanges(e,n,function(r,i,a){if((r.coordRanges||(r.coordRanges=[])).push(i),!r.coordRange){r.coordRange=i;var o=U_[r.brushType](0,a,i);r.__rangeOffset={offset:H5[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},t.prototype.matchOutputRanges=function(e,n,r){oe(e,function(i){var a=this.findTargetInfo(i,n);a&&a!==!0&&oe(a.coordSyses,function(o){var s=U_[i.brushType](1,o,i.range,!0);r(i,s.values,o,n)})},this)},t.prototype.setInputRanges=function(e,n){oe(e,function(r){var i=this.findTargetInfo(r,n);if(r.range=r.range||[],i&&i!==!0){r.panelId=i.panelId;var a=U_[r.brushType](0,i.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?H5[r.brushType](a.values,o.offset,g0e(a.xyMinMax,o.xyMinMax)):a.values}},this)},t.prototype.makePanelOpts=function(e,n){return gt(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:n?n(r):null,clipPath:lX(i),isTargetByCursor:cX(i,e,r.coordSysModel),getLinearBrushOtherExtent:uX(i)}})},t.prototype.controlSeries=function(e,n,r){var i=this.findTargetInfo(e,r);return i===!0||i&&ai(i.coordSyses,n.coordinateSystem)>=0},t.prototype.findTargetInfo=function(e,n){for(var r=this._targetInfoList,i=V5(n,e),a=0;a<r.length;a++){var o=r[a],s=e.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<q5.length;l++)if(q5[l](i,o))return o}return!0},t}();function RC(t){return t[0]>t[1]&&t.reverse(),t}function V5(t,e){return OU(t,e,{includeMainTypes:h0e})}var p0e={grid:function(t,e){var n=t.xAxisModels,r=t.yAxisModels,i=t.gridModels,a=ii(),o={},s={};!n&&!r&&!i||(oe(n,function(l){var u=l.axis.grid.model;a.set(u.id,u),o[u.id]=!0}),oe(r,function(l){var u=l.axis.grid.model;a.set(u.id,u),s[u.id]=!0}),oe(i,function(l){a.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),a.each(function(l){var u=l.coordinateSystem,c=[];oe(u.getCartesians(),function(f,d){(ai(n,f.getAxis("x").model)>=0||ai(r,f.getAxis("y").model)>=0)&&c.push(f)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:W5.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(t,e){oe(t.geoModels,function(n){var r=n.coordinateSystem;e.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:r,coordSyses:[r],getPanelRect:W5.geo})})}},q5=[function(t,e){var n=t.xAxisModel,r=t.yAxisModel,i=t.gridModel;return!i&&n&&(i=n.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],W5={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(uh(t)),e}},U_={lineX:Rt(G5,0),lineY:Rt(G5,1),rect:function(t,e,n,r){var i=t?e.pointToData([n[0][0],n[1][0]],r):e.dataToPoint([n[0][0],n[1][0]],r),a=t?e.pointToData([n[0][1],n[1][1]],r):e.dataToPoint([n[0][1],n[1][1]],r),o=[RC([i[0],a[0]]),RC([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(t,e,n,r){var i=[[1/0,-1/0],[1/0,-1/0]],a=gt(n,function(o){var s=t?e.pointToData(o,r):e.dataToPoint(o,r);return i[0][0]=Math.min(i[0][0],s[0]),i[1][0]=Math.min(i[1][0],s[1]),i[0][1]=Math.max(i[0][1],s[0]),i[1][1]=Math.max(i[1][1],s[1]),s});return{values:a,xyMinMax:i}}};function G5(t,e,n,r){var i=n.getAxis(["x","y"][t]),a=RC(gt([0,1],function(s){return e?i.coordToData(i.toLocalCoord(r[s]),!0):i.toGlobalCoord(i.dataToCoord(r[s]))})),o=[];return o[t]=a,o[1-t]=[NaN,NaN],{values:a,xyMinMax:o}}var H5={lineX:Rt(Y5,0),lineY:Rt(Y5,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return gt(t,function(r,i){return[r[0]-n[0]*e[i][0],r[1]-n[1]*e[i][1]]})}};function Y5(t,e,n,r){return[e[0]-r[t]*n[0],e[1]-r[t]*n[1]]}function g0e(t,e){var n=U5(t),r=U5(e),i=[n[0]/r[0],n[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function U5(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var NC=oe,v0e=lhe("toolbox-dataZoom_"),m0e=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r,i,a){this._brushController||(this._brushController=new jD(i.getZr()),this._brushController.on("brush",nt(this._onBrush,this)).mount()),x0e(n,r,this,a,i),b0e(n,r)},e.prototype.onclick=function(n,r,i){y0e[i].call(this)},e.prototype.remove=function(n,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(n,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(n){var r=n.areas;if(!n.isEnd||!r.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new ZD(KD(this.model),a,{include:["grid"]});o.matchOutputRanges(r,a,function(u,c,f){if(f.type==="cartesian2d"){var d=u.brushType;d==="rect"?(s("x",f,c[0]),s("y",f,c[1])):s({lineX:"x",lineY:"y"}[d],f,c)}}),l0e(a,i),this._dispatchZoomAction(i);function s(u,c,f){var d=c.getAxis(u),h=d.model,p=l(u,h,a),g=p.findRepresentativeAxisProxy(h).getMinMaxSpan();(g.minValueSpan!=null||g.maxValueSpan!=null)&&(f=nd(0,f.slice(),d.scale.getExtent(),0,g.minValueSpan,g.maxValueSpan)),p&&(i[p.id]={dataZoomId:p.id,startValue:f[0],endValue:f[1]})}function l(u,c,f){var d;return f.eachComponent({mainType:"dataZoom",subType:"select"},function(h){var p=h.getAxisModel(u,c.componentIndex);p&&(d=h)}),d}},e.prototype._dispatchZoomAction=function(n){var r=[];NC(n,function(i,a){r.push(En(i))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(n){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:n.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},e}(ko),y0e={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(u0e(this.ecModel))}};function KD(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function b0e(t,e){t.setIconStatus("back",f0e(e)>1?"emphasis":"normal")}function x0e(t,e,n,r,i){var a=n._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),n._isZoomActive=a,t.setIconStatus("zoom",a?"emphasis":"normal");var o=new ZD(KD(t),e,{include:["grid"]}),s=o.makePanelOpts(i,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()}:!1)}she("dataZoom",function(t){var e=t.getComponent("toolbox",0),n=["feature","dataZoom"];if(!e||e.get(n)==null)return;var r=e.getModel(n),i=[],a=KD(r),o=OU(t,a);NC(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),NC(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,c){var f=l.componentIndex,d={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:v0e+u+f};d[c]=f,i.push(d)}return i});function w0e(t){t.registerComponentModel(Gge),t.registerComponentView(Yge),Zd("saveAsImage",Xge),Zd("magicType",Kge),Zd("dataView",o0e),Zd("dataZoom",m0e),Zd("restore",d0e),Fo(Wge)}var _0e=["rect","polygon","keep","clear"];function S0e(t,e){var n=nu(t?t.brush:[]);if(n.length){var r=[];oe(n,function(l){var u=l.hasOwnProperty("toolbox")?l.toolbox:[];u instanceof Array&&(r=r.concat(u))});var i=t&&t.toolbox;at(i)&&(i=i[0]),i||(i={feature:{}},t.toolbox=[i]);var a=i.feature||(i.feature={}),o=a.brush||(a.brush={}),s=o.type||(o.type=[]);s.push.apply(s,r),E0e(s),e&&!s.length&&s.push.apply(s,_0e)}}function E0e(t){var e={};oe(t,function(n){e[n]=1}),t.length=0,oe(e,function(n,r){t.push(r)})}var g0=oe,O0e=oo,nb=-1,bi=function(){function t(e){var n=e.mappingMethod,r=e.type,i=this.option=En(e);this.type=r,this.mappingMethod=n,this._normalizeData=T0e[n];var a=t.visualHandlers[r];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[n],n==="piecewise"?(X_(i),k0e(i)):n==="category"?i.categories?A0e(i):X_(i,!0):(kU(n!=="linear"||i.dataExtent),X_(i))}return t.prototype.mapValueToVisual=function(e){var n=this._normalizeData(e);return this._normalizedToVisual(n,e)},t.prototype.getNormalizer=function(){return nt(this._normalizeData,this)},t.listVisualTypes=function(){return Tc(t.visualHandlers)},t.isValidType=function(e){return t.visualHandlers.hasOwnProperty(e)},t.eachVisual=function(e,n,r){oo(e)?oe(e,n,r):n.call(r,e)},t.mapVisual=function(e,n,r){var i,a=at(e)?[]:oo(e)?{}:(i=!0,null);return t.eachVisual(e,function(o,s){var l=n.call(r,o,s);i?a=l:a[s]=l}),a},t.retrieveVisuals=function(e){var n={},r;return e&&g0(t.visualHandlers,function(i,a){e.hasOwnProperty(a)&&(n[a]=e[a],r=!0)}),r?n:null},t.prepareVisualTypes=function(e){if(at(e))e=e.slice();else if(O0e(e)){var n=[];g0(e,function(r,i){n.push(i)}),e=n}else return[];return e.sort(function(r,i){return i==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),e},t.dependsOn=function(e,n){return n==="color"?!!(e&&e.indexOf(n)===0):e===n},t.findPieceIndex=function(e,n,r){for(var i,a=1/0,o=0,s=n.length;o<s;o++){var l=n[o].value;if(l!=null){if(l===e||xr(l)&&l===e+"")return o;r&&d(l,o)}}for(var o=0,s=n.length;o<s;o++){var u=n[o],c=u.interval,f=u.close;if(c){if(c[0]===-1/0){if(Pm(f[1],e,c[1]))return o}else if(c[1]===1/0){if(Pm(f[0],c[0],e))return o}else if(Pm(f[0],c[0],e)&&Pm(f[1],e,c[1]))return o;r&&d(c[0],o),r&&d(c[1],o)}}if(r)return e===1/0?n.length-1:e===-1/0?0:i;function d(h,p){var g=Math.abs(h-e);g<a&&(a=g,i=p)}},t.visualHandlers={color:{applyVisual:qp("color"),getColorMapper:function(){var e=this.option;return nt(e.mappingMethod==="category"?function(n,r){return!r&&(n=this._normalizeData(n)),gg.call(this,n)}:function(n,r,i){var a=!!i;return!r&&(n=this._normalizeData(n)),i=F_(n,e.parsedVisual,i),a?i:g1(i,"rgba")},this)},_normalizedToVisual:{linear:function(e){return g1(F_(e,this.option.parsedVisual),"rgba")},category:gg,piecewise:function(e,n){var r=zC.call(this,n);return r==null&&(r=g1(F_(e,this.option.parsedVisual),"rgba")),r},fixed:Jc}},colorHue:Cm(function(e,n){return Wg(e,n)}),colorSaturation:Cm(function(e,n){return Wg(e,null,n)}),colorLightness:Cm(function(e,n){return Wg(e,null,null,n)}),colorAlpha:Cm(function(e,n){return Y1(e,n)}),decal:{applyVisual:qp("decal"),_normalizedToVisual:{linear:null,category:gg,piecewise:null,fixed:null}},opacity:{applyVisual:qp("opacity"),_normalizedToVisual:FC([0,1])},liftZ:{applyVisual:qp("liftZ"),_normalizedToVisual:{linear:Jc,category:Jc,piecewise:Jc,fixed:Jc}},symbol:{applyVisual:function(e,n,r){var i=this.mapValueToVisual(e);r("symbol",i)},_normalizedToVisual:{linear:X5,category:gg,piecewise:function(e,n){var r=zC.call(this,n);return r==null&&(r=X5.call(this,e)),r},fixed:Jc}},symbolSize:{applyVisual:qp("symbolSize"),_normalizedToVisual:FC([0,1])}},t}();function k0e(t){var e=t.pieceList;t.hasSpecialVisual=!1,oe(e,function(n,r){n.originIndex=r,n.visual!=null&&(t.hasSpecialVisual=!0)})}function A0e(t){var e=t.categories,n=t.categoryMap={},r=t.visual;if(g0(e,function(o,s){n[o]=s}),!at(r)){var i=[];oo(r)?g0(r,function(o,s){var l=n[s];i[l??nb]=o}):i[nb]=r,r=wX(t,i)}for(var a=e.length-1;a>=0;a--)r[a]==null&&(delete n[e[a]],e.pop())}function X_(t,e){var n=t.visual,r=[];oo(n)?g0(n,function(a){r.push(a)}):n!=null&&r.push(n);var i={color:1,symbol:1};!e&&r.length===1&&!i.hasOwnProperty(t.type)&&(r[1]=r[0]),wX(t,r)}function Cm(t){return{applyVisual:function(e,n,r){var i=this.mapValueToVisual(e);r("color",t(n("color"),i))},_normalizedToVisual:FC([0,1])}}function X5(t){var e=this.option.visual;return e[Math.round(Kn(t,[0,1],[0,e.length-1],!0))]||{}}function qp(t){return function(e,n,r){r(t,this.mapValueToVisual(e))}}function gg(t){var e=this.option.visual;return e[this.option.loop&&t!==nb?t%e.length:t]}function Jc(){return this.option.visual[0]}function FC(t){return{linear:function(e){return Kn(e,t,this.option.visual,!0)},category:gg,piecewise:function(e,n){var r=zC.call(this,n);return r==null&&(r=Kn(e,t,this.option.visual,!0)),r},fixed:Jc}}function zC(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var r=bi.findPieceIndex(t,n),i=n[r];if(i&&i.visual)return i.visual[this.type]}}function wX(t,e){return t.visual=e,t.type==="color"&&(t.parsedVisual=gt(e,function(n){var r=AU(n);return r||[0,0,0,1]})),e}var T0e={linear:function(t){return Kn(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=bi.findPieceIndex(t,e,!0);if(n!=null)return Kn(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return e??nb},fixed:Df};function Pm(t,e,n){return t?e<=n:e<n}var Z5=oe;function K5(t){if(t){for(var e in t)if(t.hasOwnProperty(e))return!0}}function jC(t,e,n){var r={};return Z5(e,function(a){var o=r[a]=i();Z5(t[a],function(s,l){if(bi.isValidType(l)){var u={type:l,visual:s};n&&n(u,a),o[l]=new bi(u),l==="opacity"&&(u=En(u),u.type="colorAlpha",o.__hidden.__alphaForOpacity=new bi(u))}})}),r;function i(){var a=function(){};a.prototype.__hidden=a.prototype;var o=new a;return o}}function _X(t,e,n){var r;oe(n,function(i){e.hasOwnProperty(i)&&K5(e[i])&&(r=!0)}),r&&oe(n,function(i){e.hasOwnProperty(i)&&K5(e[i])?t[i]=En(e[i]):delete t[i]})}function M0e(t,e,n,r,i,a){var o={};oe(t,function(f){var d=bi.prepareVisualTypes(e[f]);o[f]=d});var s;function l(f){return TU(n,s,f)}function u(f,d){MU(n,s,f,d)}n.each(c);function c(f,d){s=f;var h=n.getRawDataItem(s);if(!(h&&h.visualMap===!1))for(var p=r.call(i,f),g=e[p],v=o[p],m=0,y=v.length;m<y;m++){var b=v[m];g[b]&&g[b].applyVisual(f,l,u)}}}function C0e(t,e,n,r){var i={};return oe(t,function(a){var o=bi.prepareVisualTypes(e[a]);i[a]=o}),{progress:function(o,s){var l;r!=null&&(l=s.getDimensionIndex(r));function u(w){return TU(s,f,w)}function c(w,_){MU(s,f,w,_)}for(var f,d=s.getStore();(f=o.next())!=null;){var h=s.getRawDataItem(f);if(!(h&&h.visualMap===!1))for(var p=r!=null?d.get(l,f):f,g=n(p),v=e[g],m=i[g],y=0,b=m.length;y<b;y++){var x=m[y];v[x]&&v[x].applyVisual(p,u,c)}}}}}function P0e(t){var e=t.brushType,n={point:function(r){return J5[e].point(r,n,t)},rect:function(r){return J5[e].rect(r,n,t)}};return n}var J5={lineX:Q5(0),lineY:Q5(1),rect:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])},rect:function(t,e,n){return t&&n.boundingRect.intersect(t)}},polygon:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])&&$p(n.range,t[0],t[1])},rect:function(t,e,n){var r=n.range;if(!t||r.length<=1)return!1;var i=t.x,a=t.y,o=t.width,s=t.height,l=r[0];if($p(r,i,a)||$p(r,i+o,a)||$p(r,i,a+s)||$p(r,i+o,a+s)||ro.create(t).contain(l[0],l[1])||Om(i,a,i+o,a,r)||Om(i,a,i,a+s,r)||Om(i+o,a,i+o,a+s,r)||Om(i,a+s,i+o,a+s,r))return!0}}};function Q5(t){var e=["x","y"],n=["width","height"];return{point:function(r,i,a){if(r){var o=a.range,s=r[t];return Wp(s,o)}},rect:function(r,i,a){if(r){var o=a.range,s=[r[e[t]],r[e[t]]+r[n[t]]];return s[1]<s[0]&&s.reverse(),Wp(s[0],o)||Wp(s[1],o)||Wp(o[0],s)||Wp(o[1],s)}}}}function Wp(t,e){return e[0]<=t&&t<=e[1]}var eN=["inBrush","outOfBrush"],Z_="__ecBrushSelect",BC="__ecInBrushSelectEvent";function SX(t){t.eachComponent({mainType:"brush"},function(e){var n=e.brushTargetManager=new ZD(e.option,t);n.setInputRanges(e.areas,t)})}function D0e(t,e,n){var r=[],i,a;t.eachComponent({mainType:"brush"},function(o){n&&n.type==="takeGlobalCursor"&&o.setBrushOption(n.key==="brush"?n.brushOption:{brushType:!1})}),SX(t),t.eachComponent({mainType:"brush"},function(o,s){var l={brushId:o.id,brushIndex:s,brushName:o.name,areas:En(o.areas),selected:[]};r.push(l);var u=o.option,c=u.brushLink,f=[],d=[],h=[],p=!1;s||(i=u.throttleType,a=u.throttleDelay);var g=gt(o.areas,function(w){var _=N0e[w.brushType],E=Ci({boundingRect:_?_(w):void 0},w);return E.selectors=P0e(E),E}),v=jC(o.option,eN,function(w){w.mappingMethod="fixed"});at(c)&&oe(c,function(w){f[w]=1});function m(w){return c==="all"||!!f[w]}function y(w){return!!w.length}t.eachSeries(function(w,_){var E=h[_]=[];w.subType==="parallel"?b(w,_):x(w,_,E)});function b(w,_){var E=w.coordinateSystem;p=p||E.hasAxisBrushed(),m(_)&&E.eachActiveState(w.getData(),function(S,O){S==="active"&&(d[O]=1)})}function x(w,_,E){if(!(!w.brushSelector||R0e(o,_))&&(oe(g,function(O){o.brushTargetManager.controlSeries(O,w,t)&&E.push(O),p=p||y(E)}),m(_)&&y(E))){var S=w.getData();S.each(function(O){tN(w,E,S,O)&&(d[O]=1)})}}t.eachSeries(function(w,_){var E={seriesId:w.id,seriesIndex:_,seriesName:w.name,dataIndex:[]};l.selected.push(E);var S=h[_],O=w.getData(),A=m(_)?function(T){return d[T]?(E.dataIndex.push(O.getRawIndex(T)),"inBrush"):"outOfBrush"}:function(T){return tN(w,S,O,T)?(E.dataIndex.push(O.getRawIndex(T)),"inBrush"):"outOfBrush"};(m(_)?p:y(S))&&M0e(eN,v,O,A)})}),I0e(e,i,a,r,n)}function I0e(t,e,n,r,i){if(i){var a=t.getZr();if(!a[BC]){a[Z_]||(a[Z_]=L0e);var o=Xx(a,Z_,n,e);o(t,r)}}}function L0e(t,e){if(!t.isDisposed()){var n=t.getZr();n[BC]=!0,t.dispatchAction({type:"brushSelect",batch:e}),n[BC]=!1}}function tN(t,e,n,r){for(var i=0,a=e.length;i<a;i++){var o=e[i];if(t.brushSelector(r,n,o.selectors,o))return!0}}function R0e(t,e){var n=t.option.seriesIndex;return n!=null&&n!=="all"&&(at(n)?ai(n,e)<0:e!==n)}var N0e={rect:function(t){return nN(t.range)},polygon:function(t){for(var e,n=t.range,r=0,i=n.length;r<i;r++){e=e||[[1/0,-1/0],[1/0,-1/0]];var a=n[r];a[0]<e[0][0]&&(e[0][0]=a[0]),a[0]>e[0][1]&&(e[0][1]=a[0]),a[1]<e[1][0]&&(e[1][0]=a[1]),a[1]>e[1][1]&&(e[1][1]=a[1])}return e&&nN(e)}};function nN(t){return new ro(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var F0e=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){this.ecModel=n,this.api=r,this.model,(this._brushController=new jD(r.getZr())).on("brush",nt(this._onBrush,this)).mount()},e.prototype.render=function(n,r,i,a){this.model=n,this._updateController(n,r,i,a)},e.prototype.updateTransform=function(n,r,i,a){SX(r),this._updateController(n,r,i,a)},e.prototype.updateVisual=function(n,r,i,a){this.updateTransform(n,r,i,a)},e.prototype.updateView=function(n,r,i,a){this._updateController(n,r,i,a)},e.prototype._updateController=function(n,r,i,a){(!a||a.$from!==n.id)&&this._brushController.setPanels(n.brushTargetManager.makePanelOpts(i)).enableBrush(n.brushOption).updateCovers(n.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(n){var r=this.model.id,i=this.model.brushTargetManager.setOutputRanges(n.areas,this.ecModel);(!n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:En(i),$from:r}),n.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:En(i),$from:r})},e.type="brush",e}(Wo),z0e="#ddd",j0e=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.areas=[],n.brushOption={},n}return e.prototype.optionUpdated=function(n,r){var i=this.option;!r&&_X(i,n,["inBrush","outOfBrush"]);var a=i.inBrush=i.inBrush||{};i.outOfBrush=i.outOfBrush||{color:z0e},a.hasOwnProperty("liftZ")||(a.liftZ=5)},e.prototype.setAreas=function(n){n&&(this.areas=gt(n,function(r){return rN(this.option,r)},this))},e.prototype.setBrushOption=function(n){this.brushOption=rN(this.option,n),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(qo);function rN(t,e){return Ur({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new ws(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}var B0e=["rect","polygon","lineX","lineY","keep","clear"],$0e=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r,i){var a,o,s;r.eachComponent({mainType:"brush"},function(l){a=l.brushType,o=l.brushOption.brushMode||"single",s=s||!!l.areas.length}),this._brushType=a,this._brushMode=o,oe(n.get("type",!0),function(l){n.setIconStatus(l,(l==="keep"?o==="multiple":l==="clear"?s:l===a)?"emphasis":"normal")})},e.prototype.updateView=function(n,r,i){this.render(n,r,i)},e.prototype.getIcons=function(){var n=this.model,r=n.get("icon",!0),i={};return oe(n.get("type",!0),function(a){r[a]&&(i[a]=r[a])}),i},e.prototype.onclick=function(n,r,i){var a=this._brushType,o=this._brushMode;i==="clear"?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:i==="keep"?a:a===i?!1:i,brushMode:i==="keep"?o==="multiple"?"single":"multiple":o}})},e.getDefaultOption=function(n){var r={show:!0,type:B0e.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:n.getLocaleModel().get(["toolbox","brush","title"])};return r},e}(ko);function V0e(t){t.registerComponentView(F0e),t.registerComponentModel(j0e),t.registerPreprocessor(S0e),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,D0e),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,n){n.eachComponent({mainType:"brush",query:e},function(r){r.setAreas(e.areas)})}),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},Df),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},Df),Zd("brush",$0e)}var q0e=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(qo),W0e=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){if(this.group.removeAll(),!!n.get("show")){var a=this.group,o=n.getModel("textStyle"),s=n.getModel("subtextStyle"),l=n.get("textAlign"),u=Mo(n.get("textBaseline"),n.get("textVerticalAlign")),c=new Xr({style:Ra(o,{text:n.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),d=n.get("subtext"),h=new Xr({style:Ra(s,{text:d,fill:s.getTextColor(),y:f.height+n.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=n.get("link"),g=n.get("sublink"),v=n.get("triggerEvent",!0);c.silent=!p&&!v,h.silent=!g&&!v,p&&c.on("click",function(){U1(p,"_"+n.get("target"))}),g&&h.on("click",function(){U1(g,"_"+n.get("subtarget"))}),Yn(c).eventData=Yn(h).eventData=v?{componentType:"title",componentIndex:n.componentIndex}:null,a.add(c),d&&a.add(h);var m=a.getBoundingRect(),y=n.getBoxLayoutParams();y.width=m.width,y.height=m.height;var b=za(y,{width:i.getWidth(),height:i.getHeight()},n.get("padding"));l||(l=n.get("left")||n.get("right"),l==="middle"&&(l="center"),l==="right"?b.x+=b.width:l==="center"&&(b.x+=b.width/2)),u||(u=n.get("top")||n.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?b.y+=b.height:u==="middle"&&(b.y+=b.height/2),u=u||"top"),a.x=b.x,a.y=b.y,a.markRedraw();var x={align:l,verticalAlign:u};c.setStyle(x),h.setStyle(x),m=a.getBoundingRect();var w=b.margin,_=n.getItemStyle(["color","opacity"]);_.fill=n.get("backgroundColor");var E=new Dr({shape:{x:m.x-w[3],y:m.y-w[0],width:m.width+w[1]+w[3],height:m.height+w[0]+w[2],r:n.get("borderRadius")},style:_,subPixelOptimize:!0,silent:!0});a.add(E)}},e.type="title",e}(Wo);function G0e(t){t.registerComponentModel(q0e),t.registerComponentView(W0e)}var iN=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode="box",n}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i),this._initData()},e.prototype.mergeOption=function(n){t.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(n){n==null&&(n=this.option.currentIndex);var r=this._data.count();this.option.loop?n=(n%r+r)%r:(n>=r&&(n=r-1),n<0&&(n=0)),this.option.currentIndex=n},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(n){this.option.autoPlay=!!n},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var n=this.option,r=n.data||[],i=n.axisType,a=this._names=[],o;i==="category"?(o=[],oe(r,function(u,c){var f=Yl(uhe(u),""),d;oo(u)?(d=En(u),d.value=c):d=c,o.push(d),a.push(f)})):o=r;var s={category:"ordinal",time:"time",value:"number"}[i]||"number",l=this._data=new io([{name:"value",type:s}],this);l.initData(o,a)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(qo),EX=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="timeline.slider",e.defaultOption=Mc(iN.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(iN);Ac(EX,ID.prototype);var H0e=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="timeline",e}(Wo),Y0e=function(t){ge(e,t);function e(n,r,i,a){var o=t.call(this,n,r,i)||this;return o.type=a||"value",o}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(TD),K_=Math.PI,aN=xa(),U0e=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){this.api=r},e.prototype.render=function(n,r,i){if(this.model=n,this.api=i,this.ecModel=r,this.group.removeAll(),n.get("show",!0)){var a=this._layout(n,i),o=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(a,n);n.formatTooltip=function(u){var c=l.scale.getLabel({value:u});return Ss("nameValue",{noName:!0,value:c})},oe(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](a,o,l,n)},this),this._renderAxisLabel(a,s,l,n),this._position(a,n)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(n,r){var i=n.get(["label","position"]),a=n.get("orient"),o=Z0e(n,r),s;i==null||i==="auto"?s=a==="horizontal"?o.y+o.height/2<r.getHeight()/2?"-":"+":o.x+o.width/2<r.getWidth()/2?"+":"-":xr(i)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[a][i]:s=i;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},u={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:K_/2},f=a==="vertical"?o.height:o.width,d=n.getModel("controlStyle"),h=d.get("show",!0),p=h?d.get("itemSize"):0,g=h?d.get("itemGap"):0,v=p+g,m=n.get(["label","rotate"])||0;m=m*K_/180;var y,b,x,w=d.get("position",!0),_=h&&d.get("showPlayBtn",!0),E=h&&d.get("showPrevBtn",!0),S=h&&d.get("showNextBtn",!0),O=0,A=f;w==="left"||w==="bottom"?(_&&(y=[0,0],O+=v),E&&(b=[O,0],O+=v),S&&(x=[A-p,0],A-=v)):(_&&(y=[A-p,0],A-=v),E&&(b=[0,0],O+=v),S&&(x=[A-p,0],A-=v));var T=[O,A];return n.get("inverse")&&T.reverse(),{viewRect:o,mainLength:f,orient:a,rotation:c[a],labelRotation:m,labelPosOpt:s,labelAlign:n.get(["label","align"])||l[a],labelBaseline:n.get(["label","verticalAlign"])||n.get(["label","baseline"])||u[a],playPosition:y,prevBtnPosition:b,nextBtnPosition:x,axisExtent:T,controlSize:p,controlGap:g}},e.prototype._position=function(n,r){var i=this._mainGroup,a=this._labelGroup,o=n.viewRect;if(n.orient==="vertical"){var s=Yx(),l=o.x,u=o.y+o.height;u0(s,s,[-l,-u]),yU(s,s,-K_/2),u0(s,s,[l,u]),o=o.clone(),o.applyTransform(s)}var c=y(o),f=y(i.getBoundingRect()),d=y(a.getBoundingRect()),h=[i.x,i.y],p=[a.x,a.y];p[0]=h[0]=c[0][0];var g=n.labelPosOpt;if(g==null||xr(g)){var v=g==="+"?0:1;b(h,f,c,1,v),b(p,d,c,1,1-v)}else{var v=g>=0?0:1;b(h,f,c,1,v),p[1]=h[1]+g}i.setPosition(h),a.setPosition(p),i.rotation=a.rotation=n.rotation,m(i),m(a);function m(x){x.originX=c[0][0]-x.x,x.originY=c[1][0]-x.y}function y(x){return[[x.x,x.x+x.width],[x.y,x.y+x.height]]}function b(x,w,_,E,S){x[E]+=_[E][S]-w[E][S]}},e.prototype._createAxis=function(n,r){var i=r.getData(),a=r.get("axisType"),o=X0e(r,a);o.getTicks=function(){return i.mapArray(["value"],function(u){return{value:u}})};var s=i.getDataExtent("value");o.setExtent(s[0],s[1]),o.calcNiceTicks();var l=new Y0e("value",o,n.axisExtent,a);return l.model=r,l},e.prototype._createGroup=function(n){var r=this[n]=new pn;return this.group.add(r),r},e.prototype._renderAxisLine=function(n,r,i,a){var o=i.getExtent();if(a.get(["lineStyle","show"])){var s=new wC({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:ut({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(s);var l=this._progressLine=new wC({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:Ci({lineCap:"round",lineWidth:s.style.lineWidth},a.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(l)}},e.prototype._renderAxisTick=function(n,r,i,a){var o=this,s=a.getData(),l=i.scale.getTicks();this._tickSymbols=[],oe(l,function(u){var c=i.dataToCoord(u.value),f=s.getItemModel(u.value),d=f.getModel("itemStyle"),h=f.getModel(["emphasis","itemStyle"]),p=f.getModel(["progress","itemStyle"]),g={x:c,y:0,onclick:nt(o._changeTimeline,o,u.value)},v=oN(f,d,r,g);v.ensureState("emphasis").style=h.getItemStyle(),v.ensureState("progress").style=p.getItemStyle(),ch(v);var m=Yn(v);f.get("tooltip")?(m.dataIndex=u.value,m.dataModel=a):m.dataIndex=m.dataModel=null,o._tickSymbols.push(v)})},e.prototype._renderAxisLabel=function(n,r,i,a){var o=this,s=i.getLabelModel();if(s.get("show")){var l=a.getData(),u=i.getViewLabels();this._tickLabels=[],oe(u,function(c){var f=c.tickValue,d=l.getItemModel(f),h=d.getModel("label"),p=d.getModel(["emphasis","label"]),g=d.getModel(["progress","label"]),v=i.dataToCoord(c.tickValue),m=new Xr({x:v,y:0,rotation:n.labelRotation-n.rotation,onclick:nt(o._changeTimeline,o,f),silent:!1,style:Ra(h,{text:c.formattedLabel,align:n.labelAlign,verticalAlign:n.labelBaseline})});m.ensureState("emphasis").style=Ra(p),m.ensureState("progress").style=Ra(g),r.add(m),ch(m),aN(m).dataIndex=f,o._tickLabels.push(m)})}},e.prototype._renderControl=function(n,r,i,a){var o=n.controlSize,s=n.rotation,l=a.getModel("controlStyle").getItemStyle(),u=a.getModel(["emphasis","controlStyle"]).getItemStyle(),c=a.getPlayState(),f=a.get("inverse",!0);d(n.nextBtnPosition,"next",nt(this._changeTimeline,this,f?"-":"+")),d(n.prevBtnPosition,"prev",nt(this._changeTimeline,this,f?"+":"-")),d(n.playPosition,c?"stop":"play",nt(this._handlePlayClick,this,!c),!0);function d(h,p,g,v){if(h){var m=X1(Mo(a.get(["controlStyle",p+"BtnSize"]),o),o),y=[0,-m/2,m,m],b=K0e(a,p+"Icon",y,{x:h[0],y:h[1],originX:o/2,originY:0,rotation:v?-s:0,rectHover:!0,style:l,onclick:g});b.ensureState("emphasis").style=u,r.add(b),ch(b)}}},e.prototype._renderCurrentPointer=function(n,r,i,a){var o=a.getData(),s=a.getCurrentIndex(),l=o.getItemModel(s).getModel("checkpointStyle"),u=this,c={onCreate:function(f){f.draggable=!0,f.drift=nt(u._handlePointerDrag,u),f.ondragend=nt(u._handlePointerDragend,u),sN(f,u._progressLine,s,i,a,!0)},onUpdate:function(f){sN(f,u._progressLine,s,i,a)}};this._currentPointer=oN(l,l,this._mainGroup,{},this._currentPointer,c)},e.prototype._handlePlayClick=function(n){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:n,from:this.uid})},e.prototype._handlePointerDrag=function(n,r,i){this._clearTimer(),this._pointerChangeTimeline([i.offsetX,i.offsetY])},e.prototype._handlePointerDragend=function(n){this._pointerChangeTimeline([n.offsetX,n.offsetY],!0)},e.prototype._pointerChangeTimeline=function(n,r){var i=this._toAxisCoord(n)[0],a=this._axis,o=Co(a.getExtent().slice());i>o[1]&&(i=o[1]),i<o[0]&&(i=o[0]),this._currentPointer.x=i,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=i,s.dirty());var l=this._findNearestTick(i),u=this.model;(r||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},e.prototype._doPlayStop=function(){var n=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=n.model;n._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(n){var r=this._mainGroup.getLocalTransform();return xf(n,r,!0)},e.prototype._findNearestTick=function(n){var r=this.model.getData(),i=1/0,a,o=this._axis;return r.each(["value"],function(s,l){var u=o.dataToCoord(s),c=Math.abs(u-n);c<i&&(i=c,a=l)}),a},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(n){var r=this.model.getCurrentIndex();n==="+"?n=r+1:n==="-"&&(n=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:n,from:this.uid})},e.prototype._updateTicksStatus=function(){var n=this.model.getCurrentIndex(),r=this._tickSymbols,i=this._tickLabels;if(r)for(var a=0;a<r.length;a++)r&&r[a]&&r[a].toggleState("progress",a<n);if(i)for(var a=0;a<i.length;a++)i&&i[a]&&i[a].toggleState("progress",aN(i[a]).dataIndex<=n)},e.type="timeline.slider",e}(H0e);function X0e(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new fhe({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new che({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new bC}}function Z0e(t,e){return za(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}function K0e(t,e,n,r){var i=r.style,a=DD(t.get(["controlStyle",e]),r,new ro(n[0],n[1],n[2],n[3]));return i&&a.setStyle(i),a}function oN(t,e,n,r,i,a){var o=e.get("color");if(i)i.setColor(o),n.add(i),a&&a.onUpdate(i);else{var s=t.get("symbol");i=zo(s,-1,-1,2,2,o),i.setStyle("strokeNoScale",!0),n.add(i),a&&a.onCreate(i)}var l=e.getItemStyle(["color"]);i.setStyle(l),r=Ur({rectHover:!0,z2:100},r,!0);var u=xv(t.get("symbolSize"));r.scaleX=u[0]/2,r.scaleY=u[1]/2;var c=wv(t.get("symbolOffset"),u);c&&(r.x=(r.x||0)+c[0],r.y=(r.y||0)+c[1]);var f=t.get("symbolRotate");return r.rotation=(f||0)*Math.PI/180||0,i.attr(r),i.updateTransform(),i}function sN(t,e,n,r,i,a){if(!t.dragging){var o=i.getModel("checkpointStyle"),s=r.dataToCoord(i.getData().get("value",n));if(a||!o.get("animation",!0))t.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}function J0e(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,n,r){var i=n.getComponent("timeline");return i&&e.currentIndex!=null&&(i.setCurrentIndex(e.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.getPlayState()&&(i.setPlayState(!1),r.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),n.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),Ci({currentIndex:i.option.currentIndex},e)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,n){var r=n.getComponent("timeline");r&&e.playState!=null&&r.setPlayState(e.playState)})}function Q0e(t){var e=t&&t.timeline;at(e)||(e=e?[e]:[]),oe(e,function(n){n&&eve(n)})}function eve(t){var e=t.type,n={number:"value",time:"time"};if(n[e]&&(t.axisType=n[e],delete t.type),lN(t),rf(t,"controlPosition")){var r=t.controlStyle||(t.controlStyle={});rf(r,"position")||(r.position=t.controlPosition),r.position==="none"&&!rf(r,"show")&&(r.show=!1,delete r.position),delete t.controlPosition}oe(t.data||[],function(i){oo(i)&&!at(i)&&(!rf(i,"value")&&rf(i,"name")&&(i.value=i.name),lN(i))})}function lN(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),r=t.label||t.label||{},i=r.normal||(r.normal={}),a={normal:1,emphasis:1};oe(r,function(o,s){!a[s]&&!rf(i,s)&&(i[s]=o)}),n.label&&!rf(r,"emphasis")&&(r.emphasis=n.label,delete n.label)}function rf(t,e){return t.hasOwnProperty(e)}function tve(t){t.registerComponentModel(EX),t.registerComponentView(U0e),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),J0e(t),t.registerPreprocessor(Q0e)}function JD(t,e){if(!t)return!1;for(var n=at(t)?t:[t],r=0;r<n.length;r++)if(n[r]&&n[r][e])return!0;return!1}function Dm(t){Kx(t,"label",["show"])}var Im=xa(),ru=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.createdBySelf=!1,n}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i),this._mergeOption(n,i,!1,!0)},e.prototype.isAnimationEnabled=function(){if(EU.node)return!1;var n=this.__hostSeries;return this.getShallow("animation")&&n&&n.isAnimationEnabled()},e.prototype.mergeOption=function(n,r){this._mergeOption(n,r,!1,!1)},e.prototype._mergeOption=function(n,r,i,a){var o=this.mainType;i||r.eachSeries(function(s){var l=s.get(this.mainType,!0),u=Im(s)[o];if(!l||!l.data){Im(s)[o]=null;return}u?u._mergeOption(l,r,!0):(a&&Dm(l),oe(l.data,function(c){c instanceof Array?(Dm(c[0]),Dm(c[1])):Dm(c)}),u=this.createMarkerModelFromSeries(l,this,r),ut(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),Im(s)[o]=u},this)},e.prototype.formatTooltip=function(n,r,i){var a=this.getData(),o=this.getRawValue(n),s=a.getName(n);return Ss("section",{header:this.name,blocks:[Ss("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(n){this._data=n},e.prototype.getDataParams=function(n,r){var i=ID.prototype.getDataParams.call(this,n,r),a=this.__hostSeries;return a&&(i.seriesId=a.id,i.seriesName=a.name,i.seriesType=a.subType),i},e.getMarkerModelFromSeries=function(n,r){return Im(n)[r]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(qo);Ac(ru,ID.prototype);var nve=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.createMarkerModelFromSeries=function(n,r,i){return new e(n,r,i)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(ru);function $C(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function rve(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function Lm(t,e,n,r,i,a){var o=[],s=dhe(e,r),l=s?e.getCalculationInfo("stackResultDimension"):r,u=QD(e,l,t),c=e.indicesOfNearest(l,u)[0];o[i]=e.get(n,c),o[a]=e.get(l,c);var f=e.get(r,c),d=hhe(e.get(r,c));return d=Math.min(d,20),d>=0&&(o[a]=+o[a].toFixed(d)),[o,f]}var J_={min:Rt(Lm,"min"),max:Rt(Lm,"max"),average:Rt(Lm,"average"),median:Rt(Lm,"median")};function v0(t,e){if(e){var n=t.getData(),r=t.coordinateSystem,i=r&&r.dimensions;if(!rve(e)&&!at(e.coord)&&at(i)){var a=OX(e,n,r,t);if(e=En(e),e.type&&J_[e.type]&&a.baseAxis&&a.valueAxis){var o=ai(i,a.baseAxis.dim),s=ai(i,a.valueAxis.dim),l=J_[e.type](n,a.baseDataDim,a.valueDataDim,o,s);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!at(i))e.coord=[];else for(var u=e.coord,c=0;c<2;c++)J_[u[c]]&&(u[c]=QD(n,n.mapDimension(i[c]),u[c]));return e}}function OX(t,e,n,r){var i={};return t.valueIndex!=null||t.valueDim!=null?(i.valueDataDim=t.valueIndex!=null?e.getDimension(t.valueIndex):t.valueDim,i.valueAxis=n.getAxis(ive(r,i.valueDataDim)),i.baseAxis=n.getOtherAxis(i.valueAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim)):(i.baseAxis=r.getBaseAxis(),i.valueAxis=n.getOtherAxis(i.baseAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim),i.valueDataDim=e.mapDimension(i.valueAxis.dim)),i}function ive(t,e){var n=t.getData().getDimensionInfo(e);return n&&n.coordDim}function m0(t,e){return t&&t.containData&&e.coord&&!$C(e)?t.containData(e.coord):!0}function ave(t,e,n){return t&&t.containZone&&e.coord&&n.coord&&!$C(e)&&!$C(n)?t.containZone(e.coord,n.coord):!0}function kX(t,e){return t?function(n,r,i,a){var o=a<2?n.coord&&n.coord[a]:n.value;return Z1(o,e[a])}:function(n,r,i,a){return Z1(n.value,e[a])}}function QD(t,e,n){if(n==="average"){var r=0,i=0;return t.each(e,function(a,o){isNaN(a)||(r+=a,i++)}),r/i}else return n==="median"?t.getMedian(e):t.getDataExtent(e)[n==="max"?1:0]}var Q_=xa(),eI=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(){this.markerGroupMap=ii()},e.prototype.render=function(n,r,i){var a=this,o=this.markerGroupMap;o.each(function(s){Q_(s).keep=!1}),r.eachSeries(function(s){var l=ru.getMarkerModelFromSeries(s,a.type);l&&a.renderSeries(s,l,r,i)}),o.each(function(s){!Q_(s).keep&&a.group.remove(s.group)})},e.prototype.markKeep=function(n){Q_(n).keep=!0},e.prototype.toggleBlurSeries=function(n,r){var i=this;oe(n,function(a){var o=ru.getMarkerModelFromSeries(a,i.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(l){l&&(r?phe(l):ghe(l))})}})},e.type="marker",e}(Wo);function uN(t,e,n){var r=e.coordinateSystem;t.each(function(i){var a=t.getItemModel(i),o,s=mt(a.get("x"),n.getWidth()),l=mt(a.get("y"),n.getHeight());if(!isNaN(s)&&!isNaN(l))o=[s,l];else if(e.getMarkerPosition)o=e.getMarkerPosition(t.getValues(t.dimensions,i));else if(r){var u=t.get(r.dimensions[0],i),c=t.get(r.dimensions[1],i);o=r.dataToPoint([u,c])}isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),t.setItemLayout(i,o)})}var ove=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.updateTransform=function(n,r,i){r.eachSeries(function(a){var o=ru.getMarkerModelFromSeries(a,"markPoint");o&&(uN(o.getData(),a,i),this.markerGroupMap.get(a.id).updateLayout())},this)},e.prototype.renderSeries=function(n,r,i,a){var o=n.coordinateSystem,s=n.id,l=n.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new Jx),f=sve(o,n,r);r.setData(f),uN(r.getData(),n,a),f.each(function(d){var h=f.getItemModel(d),p=h.getShallow("symbol"),g=h.getShallow("symbolSize"),v=h.getShallow("symbolRotate"),m=h.getShallow("symbolOffset"),y=h.getShallow("symbolKeepAspect");if(Tr(p)||Tr(g)||Tr(v)||Tr(m)){var b=r.getRawValue(d),x=r.getDataParams(d);Tr(p)&&(p=p(b,x)),Tr(g)&&(g=g(b,x)),Tr(v)&&(v=v(b,x)),Tr(m)&&(m=m(b,x))}var w=h.getModel("itemStyle").getItemStyle(),_=Qx(l,"color");w.fill||(w.fill=_),f.setItemVisual(d,{symbol:p,symbolSize:g,symbolRotate:v,symbolOffset:m,symbolKeepAspect:y,style:w})}),c.updateData(f),this.group.add(c.group),f.eachItemGraphicEl(function(d){d.traverse(function(h){Yn(h).dataModel=r})}),this.markKeep(c),c.group.silent=r.get("silent")||n.get("silent")},e.type="markPoint",e}(eI);function sve(t,e,n){var r;t?r=gt(t&&t.dimensions,function(s){var l=e.getData().getDimensionInfo(e.getData().mapDimension(s))||{};return ut(ut({},l),{name:s,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new io(r,n),a=gt(n.get("data"),Rt(v0,e));t&&(a=Ms(a,Rt(m0,t)));var o=kX(!!t,r);return i.initData(a,null,o),i}function lve(t){t.registerComponentModel(nve),t.registerComponentView(ove),t.registerPreprocessor(function(e){JD(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}var uve=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.createMarkerModelFromSeries=function(n,r,i){return new e(n,r,i)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(ru),cN=wC.prototype,eS=CU.prototype,AX=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}();(function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(AX);function tS(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var cve=function(t){ge(e,t);function e(n){var r=t.call(this,n)||this;return r.type="ec-line",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new AX},e.prototype.buildPath=function(n,r){tS(r)?cN.buildPath.call(this,n,r):eS.buildPath.call(this,n,r)},e.prototype.pointAt=function(n){return tS(this.shape)?cN.pointAt.call(this,n):eS.pointAt.call(this,n)},e.prototype.tangentAt=function(n){var r=this.shape,i=tS(r)?[r.x2-r.x1,r.y2-r.y1]:eS.tangentAt.call(this,n);return _v(i,i)},e}(xl),nS=["fromSymbol","toSymbol"];function fN(t){return"_"+t+"Type"}function dN(t,e,n){var r=e.getItemVisual(n,t);if(!r||r==="none")return r;var i=e.getItemVisual(n,t+"Size"),a=e.getItemVisual(n,t+"Rotate"),o=e.getItemVisual(n,t+"Offset"),s=e.getItemVisual(n,t+"KeepAspect"),l=xv(i),u=wv(o||0,l);return r+l+u+(a||"")+(s||"")}function hN(t,e,n){var r=e.getItemVisual(n,t);if(!(!r||r==="none")){var i=e.getItemVisual(n,t+"Size"),a=e.getItemVisual(n,t+"Rotate"),o=e.getItemVisual(n,t+"Offset"),s=e.getItemVisual(n,t+"KeepAspect"),l=xv(i),u=wv(o||0,l),c=zo(r,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,c.name=t,c}}function fve(t){var e=new cve({name:"line",subPixelOptimize:!0});return VC(e.shape,t),e}function VC(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var n=e[2];n?(t.cpx1=n[0],t.cpy1=n[1]):(t.cpx1=NaN,t.cpy1=NaN)}var dve=function(t){ge(e,t);function e(n,r,i){var a=t.call(this)||this;return a._createLine(n,r,i),a}return e.prototype._createLine=function(n,r,i){var a=n.hostModel,o=n.getItemLayout(r),s=fve(o);s.shape.percent=0,la(s,{shape:{percent:1}},a,r),this.add(s),oe(nS,function(l){var u=hN(l,n,r);this.add(u),this[fN(l)]=dN(l,n,r)},this),this._updateCommonStl(n,r,i)},e.prototype.updateData=function(n,r,i){var a=n.hostModel,o=this.childOfName("line"),s=n.getItemLayout(r),l={shape:{}};VC(l.shape,s),ur(o,l,a,r),oe(nS,function(u){var c=dN(u,n,r),f=fN(u);if(this[f]!==c){this.remove(this.childOfName(u));var d=hN(u,n,r);this.add(d)}this[f]=c},this),this._updateCommonStl(n,r,i)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(n,r,i){var a=n.hostModel,o=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,f=i&&i.emphasisDisabled,d=i&&i.focus,h=i&&i.blurScope;if(!i||n.hasItemOption){var p=n.getItemModel(r),g=p.getModel("emphasis");s=g.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),f=g.get("disabled"),d=g.get("focus"),h=g.get("blurScope"),c=ja(p)}var v=n.getItemVisual(r,"style"),m=v.stroke;o.useStyle(v),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,o.ensureState("blur").style=l,o.ensureState("select").style=u,oe(nS,function(_){var E=this.childOfName(_);if(E){E.setColor(m),E.style.opacity=v.opacity;for(var S=0;S<l0.length;S++){var O=l0[S],A=o.getState(O);if(A){var T=A.style||{},I=E.ensureState(O),D=I.style||(I.style={});T.stroke!=null&&(D[E.__isEmptyBrush?"stroke":"fill"]=T.stroke),T.opacity!=null&&(D.opacity=T.opacity)}}E.markRedraw()}},this);var y=a.getRawValue(r);so(this,c,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(_,E){return a.getFormattedLabel(_,E,n.dataType)}},inheritColor:m||"#000",defaultOpacity:v.opacity,defaultText:(y==null?n.getName(r):isFinite(y)?bU(y):y)+""});var b=this.getTextContent();if(b){var x=c.normal;b.__align=b.style.align,b.__verticalAlign=b.style.verticalAlign,b.__position=x.get("position")||"middle";var w=x.get("distance");at(w)||(w=[w,w]),b.__labelDistance=w}this.setTextConfig({position:null,local:!0,inside:!1}),ua(this,d,h,f)},e.prototype.highlight=function(){f0(this)},e.prototype.downplay=function(){d0(this)},e.prototype.updateLayout=function(n,r){this.setLinePoints(n.getItemLayout(r))},e.prototype.setLinePoints=function(n){var r=this.childOfName("line");VC(r.shape,n),r.dirty()},e.prototype.beforeUpdate=function(){var n=this,r=n.childOfName("fromSymbol"),i=n.childOfName("toSymbol"),a=n.getTextContent();if(!r&&!i&&(!a||a.ignore))return;for(var o=1,s=this.parent;s;)s.scaleX&&(o/=s.scaleX),s=s.parent;var l=n.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),f=l.pointAt(u),d=nh([],f,c);_v(d,d);function h(A,T){var I=A.__specifiedRotation;if(I==null){var D=l.tangentAt(T);A.attr("rotation",(T===1?-1:1)*Math.PI/2-Math.atan2(D[1],D[0]))}else A.attr("rotation",I)}if(r&&(r.setPosition(c),h(r,0),r.scaleX=r.scaleY=o*u,r.markRedraw()),i&&(i.setPosition(f),h(i,1),i.scaleX=i.scaleY=o*u,i.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var p=void 0,g=void 0,v=a.__labelDistance,m=v[0]*o,y=v[1]*o,b=u/2,x=l.tangentAt(b),w=[x[1],-x[0]],_=l.pointAt(b);w[1]>0&&(w[0]=-w[0],w[1]=-w[1]);var E=x[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var S=-Math.atan2(x[1],x[0]);f[0]<c[0]&&(S=Math.PI+S),a.rotation=S}var O=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":O=-y,g="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":O=y,g="top";break;default:O=0,g="middle"}switch(a.__position){case"end":a.x=d[0]*m+f[0],a.y=d[1]*y+f[1],p=d[0]>.8?"left":d[0]<-.8?"right":"center",g=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";break;case"start":a.x=-d[0]*m+c[0],a.y=-d[1]*y+c[1],p=d[0]>.8?"right":d[0]<-.8?"left":"center",g=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=m*E+c[0],a.y=c[1]+O,p=x[0]<0?"right":"left",a.originX=-m*E,a.originY=-O;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=_[0],a.y=_[1]+O,p="center",a.originY=-O;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-m*E+f[0],a.y=f[1]+O,p=x[0]>=0?"right":"left",a.originX=m*E,a.originY=-O;break}a.scaleX=a.scaleY=o,a.setStyle({verticalAlign:a.__verticalAlign||g,align:a.__align||p})}},e}(pn),TX=function(){function t(e){this.group=new pn,this._LineCtor=e||dve}return t.prototype.updateData=function(e){var n=this;this._progressiveEls=null;var r=this,i=r.group,a=r._lineData;r._lineData=e,a||i.removeAll();var o=pN(e);e.diff(a).add(function(s){n._doAdd(e,s,o)}).update(function(s,l){n._doUpdate(a,e,l,s,o)}).remove(function(s){i.remove(a.getItemGraphicEl(s))}).execute()},t.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(n,r){n.updateLayout(e,r)},this)},t.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=pN(e),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(e,n){this._progressiveEls=[];function r(s){!s.isGroup&&!hve(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var a=n.getItemLayout(i);if(rS(a)){var o=new this._LineCtor(n,i,this._seriesScope);o.traverse(r),this.group.add(o),n.setItemGraphicEl(i,o),this._progressiveEls.push(o)}}},t.prototype.remove=function(){this.group.removeAll()},t.prototype.eachRendered=function(e){e2(this._progressiveEls||this.group,e)},t.prototype._doAdd=function(e,n,r){var i=e.getItemLayout(n);if(rS(i)){var a=new this._LineCtor(e,n,r);e.setItemGraphicEl(n,a),this.group.add(a)}},t.prototype._doUpdate=function(e,n,r,i,a){var o=e.getItemGraphicEl(r);if(!rS(n.getItemLayout(i))){this.group.remove(o);return}o?o.updateData(n,i,a):o=new this._LineCtor(n,i,a),n.setItemGraphicEl(i,o),this.group.add(o)},t}();function hve(t){return t.animators&&t.animators.length>0}function pN(t){var e=t.hostModel,n=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:ja(e)}}function gN(t){return isNaN(t[0])||isNaN(t[1])}function rS(t){return t&&!gN(t[0])&&!gN(t[1])}var Rm=xa(),pve=function(t,e,n,r){var i=t.getData(),a;if(at(r))a=r;else{var o=r.type;if(o==="min"||o==="max"||o==="average"||o==="median"||r.xAxis!=null||r.yAxis!=null){var s=void 0,l=void 0;if(r.yAxis!=null||r.xAxis!=null)s=e.getAxis(r.yAxis!=null?"y":"x"),l=Ks(r.yAxis,r.xAxis);else{var u=OX(r,i,e,t);s=u.valueAxis;var c=vhe(i,u.valueDataDim);l=QD(i,c,o)}var f=s.dim==="x"?0:1,d=1-f,h=En(r),p={coord:[]};h.type=null,h.coord=[],h.coord[d]=-1/0,p.coord[d]=1/0;var g=n.get("precision");g>=0&&_s(l)&&(l=+l.toFixed(Math.min(g,20))),h.coord[f]=p.coord[f]=l,a=[h,p,{type:o,valueIndex:r.valueIndex,value:l}]}else a=[]}var v=[v0(t,a[0]),v0(t,a[1]),ut({},a[2])];return v[2].type=v[2].type||null,Ur(v[2],v[0]),Ur(v[2],v[1]),v};function rb(t){return!isNaN(t)&&!isFinite(t)}function vN(t,e,n,r){var i=1-t,a=r.dimensions[t];return rb(e[i])&&rb(n[i])&&e[t]===n[t]&&r.getAxis(a).containData(e[t])}function gve(t,e){if(t.type==="cartesian2d"){var n=e[0].coord,r=e[1].coord;if(n&&r&&(vN(1,n,r,t)||vN(0,n,r,t)))return!0}return m0(t,e[0])&&m0(t,e[1])}function iS(t,e,n,r,i){var a=r.coordinateSystem,o=t.getItemModel(e),s,l=mt(o.get("x"),i.getWidth()),u=mt(o.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(r.getMarkerPosition)s=r.getMarkerPosition(t.getValues(t.dimensions,e));else{var c=a.dimensions,f=t.get(c[0],e),d=t.get(c[1],e);s=a.dataToPoint([f,d])}if(hp(a,"cartesian2d")){var h=a.getAxis("x"),p=a.getAxis("y"),c=a.dimensions;rb(t.get(c[0],e))?s[0]=h.toGlobalCoord(h.getExtent()[n?0:1]):rb(t.get(c[1],e))&&(s[1]=p.toGlobalCoord(p.getExtent()[n?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}t.setItemLayout(e,s)}var vve=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.updateTransform=function(n,r,i){r.eachSeries(function(a){var o=ru.getMarkerModelFromSeries(a,"markLine");if(o){var s=o.getData(),l=Rm(o).from,u=Rm(o).to;l.each(function(c){iS(l,c,!0,a,i),iS(u,c,!1,a,i)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},e.prototype.renderSeries=function(n,r,i,a){var o=n.coordinateSystem,s=n.id,l=n.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new TX);this.group.add(c.group);var f=mve(o,n,r),d=f.from,h=f.to,p=f.line;Rm(r).from=d,Rm(r).to=h,r.setData(p);var g=r.get("symbol"),v=r.get("symbolSize"),m=r.get("symbolRotate"),y=r.get("symbolOffset");at(g)||(g=[g,g]),at(v)||(v=[v,v]),at(m)||(m=[m,m]),at(y)||(y=[y,y]),f.from.each(function(x){b(d,x,!0),b(h,x,!1)}),p.each(function(x){var w=p.getItemModel(x).getModel("lineStyle").getLineStyle();p.setItemLayout(x,[d.getItemLayout(x),h.getItemLayout(x)]),w.stroke==null&&(w.stroke=d.getItemVisual(x,"style").fill),p.setItemVisual(x,{fromSymbolKeepAspect:d.getItemVisual(x,"symbolKeepAspect"),fromSymbolOffset:d.getItemVisual(x,"symbolOffset"),fromSymbolRotate:d.getItemVisual(x,"symbolRotate"),fromSymbolSize:d.getItemVisual(x,"symbolSize"),fromSymbol:d.getItemVisual(x,"symbol"),toSymbolKeepAspect:h.getItemVisual(x,"symbolKeepAspect"),toSymbolOffset:h.getItemVisual(x,"symbolOffset"),toSymbolRotate:h.getItemVisual(x,"symbolRotate"),toSymbolSize:h.getItemVisual(x,"symbolSize"),toSymbol:h.getItemVisual(x,"symbol"),style:w})}),c.updateData(p),f.line.eachItemGraphicEl(function(x){Yn(x).dataModel=r,x.traverse(function(w){Yn(w).dataModel=r})});function b(x,w,_){var E=x.getItemModel(w);iS(x,w,_,n,a);var S=E.getModel("itemStyle").getItemStyle();S.fill==null&&(S.fill=Qx(l,"color")),x.setItemVisual(w,{symbolKeepAspect:E.get("symbolKeepAspect"),symbolOffset:Mo(E.get("symbolOffset",!0),y[_?0:1]),symbolRotate:Mo(E.get("symbolRotate",!0),m[_?0:1]),symbolSize:Mo(E.get("symbolSize"),v[_?0:1]),symbol:Mo(E.get("symbol",!0),g[_?0:1]),style:S})}this.markKeep(c),c.group.silent=r.get("silent")||n.get("silent")},e.type="markLine",e}(eI);function mve(t,e,n){var r;t?r=gt(t&&t.dimensions,function(u){var c=e.getData().getDimensionInfo(e.getData().mapDimension(u))||{};return ut(ut({},c),{name:u,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new io(r,n),a=new io(r,n),o=new io([],n),s=gt(n.get("data"),Rt(pve,e,t,n));t&&(s=Ms(s,Rt(gve,t)));var l=kX(!!t,r);return i.initData(gt(s,function(u){return u[0]}),null,l),a.initData(gt(s,function(u){return u[1]}),null,l),o.initData(gt(s,function(u){return u[2]})),o.hasItemOption=!0,{from:i,to:a,line:o}}function yve(t){t.registerComponentModel(uve),t.registerComponentView(vve),t.registerPreprocessor(function(e){JD(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var bve=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.createMarkerModelFromSeries=function(n,r,i){return new e(n,r,i)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(ru),Nm=xa(),xve=function(t,e,n,r){var i=r[0],a=r[1];if(!(!i||!a)){var o=v0(t,i),s=v0(t,a),l=o.coord,u=s.coord;l[0]=Ks(l[0],-1/0),l[1]=Ks(l[1],-1/0),u[0]=Ks(u[0],1/0),u[1]=Ks(u[1],1/0);var c=mhe([{},o,s]);return c.coord=[o.coord,s.coord],c.x0=o.x,c.y0=o.y,c.x1=s.x,c.y1=s.y,c}};function ib(t){return!isNaN(t)&&!isFinite(t)}function mN(t,e,n,r){var i=1-t;return ib(e[i])&&ib(n[i])}function wve(t,e){var n=e.coord[0],r=e.coord[1],i={coord:n,x:e.x0,y:e.y0},a={coord:r,x:e.x1,y:e.y1};return hp(t,"cartesian2d")?n&&r&&(mN(1,n,r)||mN(0,n,r))?!0:ave(t,i,a):m0(t,i)||m0(t,a)}function yN(t,e,n,r,i){var a=r.coordinateSystem,o=t.getItemModel(e),s,l=mt(o.get(n[0]),i.getWidth()),u=mt(o.get(n[1]),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(r.getMarkerPosition){var c=t.getValues(["x0","y0"],e),f=t.getValues(["x1","y1"],e),d=a.clampData(c),h=a.clampData(f),p=[];n[0]==="x0"?p[0]=d[0]>h[0]?f[0]:c[0]:p[0]=d[0]>h[0]?c[0]:f[0],n[1]==="y0"?p[1]=d[1]>h[1]?f[1]:c[1]:p[1]=d[1]>h[1]?c[1]:f[1],s=r.getMarkerPosition(p,n,!0)}else{var g=t.get(n[0],e),v=t.get(n[1],e),m=[g,v];a.clampData&&a.clampData(m,m),s=a.dataToPoint(m,!0)}if(hp(a,"cartesian2d")){var y=a.getAxis("x"),b=a.getAxis("y"),g=t.get(n[0],e),v=t.get(n[1],e);ib(g)?s[0]=y.toGlobalCoord(y.getExtent()[n[0]==="x0"?0:1]):ib(v)&&(s[1]=b.toGlobalCoord(b.getExtent()[n[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}return s}var bN=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],_ve=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.updateTransform=function(n,r,i){r.eachSeries(function(a){var o=ru.getMarkerModelFromSeries(a,"markArea");if(o){var s=o.getData();s.each(function(l){var u=gt(bN,function(f){return yN(s,l,f,a,i)});s.setItemLayout(l,u);var c=s.getItemGraphicEl(l);c.setShape("points",u)})}},this)},e.prototype.renderSeries=function(n,r,i,a){var o=n.coordinateSystem,s=n.id,l=n.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,{group:new pn});this.group.add(c.group),this.markKeep(c);var f=Sve(o,n,r);r.setData(f),f.each(function(d){var h=gt(bN,function(S){return yN(f,d,S,n,a)}),p=o.getAxis("x").scale,g=o.getAxis("y").scale,v=p.getExtent(),m=g.getExtent(),y=[p.parse(f.get("x0",d)),p.parse(f.get("x1",d))],b=[g.parse(f.get("y0",d)),g.parse(f.get("y1",d))];Co(y),Co(b);var x=!(v[0]>y[1]||v[1]<y[0]||m[0]>b[1]||m[1]<b[0]),w=!x;f.setItemLayout(d,{points:h,allClipped:w});var _=f.getItemModel(d).getModel("itemStyle").getItemStyle(),E=Qx(l,"color");_.fill||(_.fill=E,xr(_.fill)&&(_.fill=Y1(_.fill,.4))),_.stroke||(_.stroke=E),f.setItemVisual(d,"style",_)}),f.diff(Nm(c).data).add(function(d){var h=f.getItemLayout(d);if(!h.allClipped){var p=new tu({shape:{points:h.points}});f.setItemGraphicEl(d,p),c.group.add(p)}}).update(function(d,h){var p=Nm(c).data.getItemGraphicEl(h),g=f.getItemLayout(d);g.allClipped?p&&c.group.remove(p):(p?ur(p,{shape:{points:g.points}},r,d):p=new tu({shape:{points:g.points}}),f.setItemGraphicEl(d,p),c.group.add(p))}).remove(function(d){var h=Nm(c).data.getItemGraphicEl(d);c.group.remove(h)}).execute(),f.eachItemGraphicEl(function(d,h){var p=f.getItemModel(h),g=f.getItemVisual(h,"style");d.useStyle(f.getItemVisual(h,"style")),so(d,ja(p),{labelFetcher:r,labelDataIndex:h,defaultText:f.getName(h)||"",inheritColor:xr(g.fill)?Y1(g.fill,1):"#000"}),lo(d,p),ua(d,null,null,p.get(["emphasis","disabled"])),Yn(d).dataModel=r}),Nm(c).data=f,c.group.silent=r.get("silent")||n.get("silent")},e.type="markArea",e}(eI);function Sve(t,e,n){var r,i,a=["x0","y0","x1","y1"];if(t){var o=gt(t&&t.dimensions,function(u){var c=e.getData(),f=c.getDimensionInfo(c.mapDimension(u))||{};return ut(ut({},f),{name:u,ordinalMeta:null})});i=gt(a,function(u,c){return{name:u,type:o[c%2].type}}),r=new io(i,n)}else i=[{name:"value",type:"float"}],r=new io(i,n);var s=gt(n.get("data"),Rt(xve,e,t,n));t&&(s=Ms(s,Rt(wve,t)));var l=t?function(u,c,f,d){var h=u.coord[Math.floor(d/2)][d%2];return Z1(h,i[d])}:function(u,c,f,d){return Z1(u.value,i[d])};return r.initData(s,null,l),r.hasItemOption=!0,r}function Eve(t){t.registerComponentModel(bve),t.registerComponentView(_ve),t.registerPreprocessor(function(e){JD(e.series,"markArea")&&(e.markArea=e.markArea||{})})}var Ove=function(t,e){if(e==="all")return{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}},qC=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i),n.selected=n.selected||{},this._updateSelector(n)},e.prototype.mergeOption=function(n,r){t.prototype.mergeOption.call(this,n,r),this._updateSelector(n)},e.prototype._updateSelector=function(n){var r=n.selector,i=this.ecModel;r===!0&&(r=n.selector=["all","inverse"]),at(r)&&oe(r,function(a,o){xr(a)&&(a={type:a}),r[o]=Ur(a,Ove(i,a.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var n=this._data;if(n[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<n.length;i++){var a=n[i].get("name");if(this.isSelected(a)){this.select(a),r=!0;break}}!r&&this.select(n[0].get("name"))}},e.prototype._updateData=function(n){var r=[],i=[];n.eachRawSeries(function(l){var u=l.name;i.push(u);var c;if(l.legendVisualProvider){var f=l.legendVisualProvider,d=f.getAllNames();n.isSeriesFiltered(l)||(i=i.concat(d)),d.length?r=r.concat(d):c=!0}else c=!0;c&&yhe(l)&&r.push(l.name)}),this._availableNames=i;var a=this.get("data")||r,o=ii(),s=gt(a,function(l){return(xr(l)||_s(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new ws(l,this,this.ecModel))},this);this._data=Ms(s,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(n){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;oe(a,function(o){r[o.get("name")]=!1})}r[n]=!0},e.prototype.unSelect=function(n){this.get("selectedMode")!=="single"&&(this.option.selected[n]=!1)},e.prototype.toggleSelected=function(n){var r=this.option.selected;r.hasOwnProperty(n)||(r[n]=!0),this[r[n]?"unSelect":"select"](n)},e.prototype.allSelect=function(){var n=this._data,r=this.option.selected;oe(n,function(i){r[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var n=this._data,r=this.option.selected;oe(n,function(i){var a=i.get("name",!0);r.hasOwnProperty(a)||(r[a]=!0),r[a]=!r[a]})},e.prototype.isSelected=function(n){var r=this.option.selected;return!(r.hasOwnProperty(n)&&!r[n])&&ai(this._availableNames,n)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(qo),_d=Rt,WC=oe,Fm=pn,MX=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!1,n}return e.prototype.init=function(){this.group.add(this._contentGroup=new Fm),this.group.add(this._selectorGroup=new Fm),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(n,r,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!n.get("show",!0)){var o=n.get("align"),s=n.get("orient");(!o||o==="auto")&&(o=n.get("left")==="right"&&s==="vertical"?"right":"left");var l=n.get("selector",!0),u=n.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(o,n,r,i,l,s,u);var c=n.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},d=n.get("padding"),h=za(c,f,d),p=this.layoutInner(n,o,h,a,l,u),g=za(Ci({width:p.width,height:p.height},c),f,d);this.group.x=g.x-p.x,this.group.y=g.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=yX(p,n))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(n,r,i,a,o,s,l){var u=this.getContentGroup(),c=ii(),f=r.get("selectedMode"),d=[];i.eachRawSeries(function(h){!h.get("legendHoverLink")&&d.push(h.id)}),WC(r.getData(),function(h,p){var g=h.get("name");if(!this.newlineDisabled&&(g===""||g===`
`)){var v=new Fm;v.newline=!0,u.add(v);return}var m=i.getSeriesByName(g)[0];if(!c.get(g))if(m){var y=m.getData(),b=y.getVisual("legendLineStyle")||{},x=y.getVisual("legendIcon"),w=y.getVisual("style"),_=this._createItem(m,g,p,h,r,n,b,w,x,f,a);_.on("click",_d(xN,g,null,a,d)).on("mouseover",_d(GC,m.name,null,a,d)).on("mouseout",_d(HC,m.name,null,a,d)),i.ssr&&_.eachChild(function(E){var S=Yn(E);S.seriesIndex=m.seriesIndex,S.dataIndex=p,S.ssrType="legend"}),c.set(g,!0)}else i.eachRawSeries(function(E){if(!c.get(g)&&E.legendVisualProvider){var S=E.legendVisualProvider;if(!S.containName(g))return;var O=S.indexOfName(g),A=S.getItemVisual(O,"style"),T=S.getItemVisual(O,"legendIcon"),I=AU(A.fill);I&&I[3]===0&&(I[3]=.2,A=ut(ut({},A),{fill:g1(I,"rgba")}));var D=this._createItem(E,g,p,h,r,n,{},A,T,f,a);D.on("click",_d(xN,null,g,a,d)).on("mouseover",_d(GC,null,g,a,d)).on("mouseout",_d(HC,null,g,a,d)),i.ssr&&D.eachChild(function(R){var F=Yn(R);F.seriesIndex=E.seriesIndex,F.dataIndex=p,F.ssrType="legend"}),c.set(g,!0)}},this)},this),o&&this._createSelector(o,r,a,s,l)},e.prototype._createSelector=function(n,r,i,a,o){var s=this.getSelectorGroup();WC(n,function(u){var c=u.type,f=new Xr({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(f);var d=r.getModel("selectorLabel"),h=r.getModel(["emphasis","selectorLabel"]);so(f,{normal:d,emphasis:h},{defaultText:u.title}),ch(f)})},e.prototype._createItem=function(n,r,i,a,o,s,l,u,c,f,d){var h=n.visualDrawType,p=o.get("itemWidth"),g=o.get("itemHeight"),v=o.isSelected(r),m=a.get("symbolRotate"),y=a.get("symbolKeepAspect"),b=a.get("icon");c=b||c||"roundRect";var x=kve(c,a,l,u,h,v,d),w=new Fm,_=a.getModel("textStyle");if(Tr(n.getLegendIcon)&&(!b||b==="inherit"))w.add(n.getLegendIcon({itemWidth:p,itemHeight:g,icon:c,iconRotate:m,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:y}));else{var E=b==="inherit"&&n.getData().getVisual("symbol")?m==="inherit"?n.getData().getVisual("symbolRotate"):m:0;w.add(Ave({itemWidth:p,itemHeight:g,icon:c,iconRotate:E,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:y}))}var S=s==="left"?p+5:-5,O=s,A=o.get("formatter"),T=r;xr(A)&&A?T=A.replace("{name}",r??""):Tr(A)&&(T=A(r));var I=v?_.getTextColor():a.get("inactiveColor");w.add(new Xr({style:Ra(_,{text:T,x:S,y:g/2,fill:I,align:O,verticalAlign:"middle"},{inheritColor:I})}));var D=new Dr({shape:w.getBoundingRect(),style:{fill:"transparent"}}),R=a.getModel("tooltip");return R.get("show")&&PD({el:D,componentModel:o,itemName:r,itemTooltipOption:R.option}),w.add(D),w.eachChild(function(F){F.silent=!0}),D.silent=!f,this.getContentGroup().add(w),ch(w),w.__legendDataIndex=i,w},e.prototype.layoutInner=function(n,r,i,a,o,s){var l=this.getContentGroup(),u=this.getSelectorGroup();wf(n.get("orient"),l,n.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),o){wf("horizontal",u,n.get("selectorItemGap",!0));var d=u.getBoundingRect(),h=[-d.x,-d.y],p=n.get("selectorButtonGap",!0),g=n.getOrient().index,v=g===0?"width":"height",m=g===0?"height":"width",y=g===0?"y":"x";s==="end"?h[g]+=c[v]+p:f[g]+=d[v]+p,h[1-g]+=c[m]/2-d[m]/2,u.x=h[0],u.y=h[1],l.x=f[0],l.y=f[1];var b={x:0,y:0};return b[v]=c[v]+p+d[v],b[m]=Math.max(c[m],d[m]),b[y]=Math.min(0,d[y]+h[1-g]),b}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(Wo);function kve(t,e,n,r,i,a,o){function s(v,m){v.lineWidth==="auto"&&(v.lineWidth=m.lineWidth>0?2:0),WC(v,function(y,b){v[b]==="inherit"&&(v[b]=m[b])})}var l=e.getModel("itemStyle"),u=l.getItemStyle(),c=t.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");u.decal=!f||f==="inherit"?r.decal:PU(f,o),u.fill==="inherit"&&(u.fill=r[i]),u.stroke==="inherit"&&(u.stroke=r[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?r:n).opacity),s(u,r);var d=e.getModel("lineStyle"),h=d.getLineStyle();if(s(h,n),u.fill==="auto"&&(u.fill=r.fill),u.stroke==="auto"&&(u.stroke=r.fill),h.stroke==="auto"&&(h.stroke=r.fill),!a){var p=e.get("inactiveBorderWidth"),g=u[c];u.lineWidth=p==="auto"?r.lineWidth>0&&g?2:0:u.lineWidth,u.fill=e.get("inactiveColor"),u.stroke=e.get("inactiveBorderColor"),h.stroke=d.get("inactiveColor"),h.lineWidth=d.get("inactiveWidth")}return{itemStyle:u,lineStyle:h}}function Ave(t){var e=t.icon||"roundRect",n=zo(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);return n.setStyle(t.itemStyle),n.rotation=(t.iconRotate||0)*Math.PI/180,n.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}function xN(t,e,n,r){HC(t,e,n,r),n.dispatchAction({type:"legendToggleSelect",name:t??e}),GC(t,e,n,r)}function CX(t){for(var e=t.getZr().storage.getDisplayList(),n,r=0,i=e.length;r<i&&!(n=e[r].states.emphasis);)r++;return n&&n.hoverLayer}function GC(t,e,n,r){CX(n)||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:r})}function HC(t,e,n,r){CX(n)||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:r})}function Tve(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(n){for(var r=0;r<e.length;r++)if(!e[r].isSelected(n.name))return!1;return!0})}function Gp(t,e,n){var r={},i=t==="toggleSelected",a;return n.eachComponent("legend",function(o){i&&a!=null?o[a?"select":"unSelect"](e.name):t==="allSelect"||t==="inverseSelect"?o[t]():(o[t](e.name),a=o.isSelected(e.name));var s=o.getData();oe(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=o.isSelected(u);r.hasOwnProperty(u)?r[u]=r[u]&&c:r[u]=c}})}),t==="allSelect"||t==="inverseSelect"?{selected:r}:{name:e.name,selected:r}}function Mve(t){t.registerAction("legendToggleSelect","legendselectchanged",Rt(Gp,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",Rt(Gp,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",Rt(Gp,"inverseSelect")),t.registerAction("legendSelect","legendselected",Rt(Gp,"select")),t.registerAction("legendUnSelect","legendunselected",Rt(Gp,"unSelect"))}function PX(t){t.registerComponentModel(qC),t.registerComponentView(MX),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,Tve),t.registerSubTypeDefaulter("legend",function(){return"plain"}),Mve(t)}var Cve=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.setScrollDataIndex=function(n){this.option.scrollDataIndex=n},e.prototype.init=function(n,r,i){var a=DU(n);t.prototype.init.call(this,n,r,i),wN(this,n,a)},e.prototype.mergeOption=function(n,r){t.prototype.mergeOption.call(this,n,r),wN(this,this.option,n)},e.type="legend.scroll",e.defaultOption=Mc(qC.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(qC);function wN(t,e,n){var r=t.getOrient(),i=[1,1];i[r.index]=0,wU(e,n,{type:"box",ignoreSize:!!i})}var _N=pn,aS=["width","height"],oS=["x","y"],Pve=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!0,n._currentIndex=0,n}return e.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new _N),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new _N)},e.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(n,r,i,a,o,s,l){var u=this;t.prototype.renderInner.call(this,n,r,i,a,o,s,l);var c=this._controllerGroup,f=r.get("pageIconSize",!0),d=at(f)?f:[f,f];p("pagePrev",0);var h=r.getModel("pageTextStyle");c.add(new Xr({name:"pageText",style:{text:"xx/xx",fill:h.getTextColor(),font:h.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(g,v){var m=g+"DataIndex",y=DD(r.get("pageIcons",!0)[r.getOrient().name][v],{onclick:nt(u._pageGo,u,m,r,a)},{x:-d[0]/2,y:-d[1]/2,width:d[0],height:d[1]});y.name=g,c.add(y)}},e.prototype.layoutInner=function(n,r,i,a,o,s){var l=this.getSelectorGroup(),u=n.getOrient().index,c=aS[u],f=oS[u],d=aS[1-u],h=oS[1-u];o&&wf("horizontal",l,n.get("selectorItemGap",!0));var p=n.get("selectorButtonGap",!0),g=l.getBoundingRect(),v=[-g.x,-g.y],m=En(i);o&&(m[c]=i[c]-g[c]-p);var y=this._layoutContentAndController(n,a,m,u,c,d,h,f);if(o){if(s==="end")v[u]+=y[c]+p;else{var b=g[c]+p;v[u]-=b,y[f]-=b}y[c]+=g[c]+p,v[1-u]+=y[h]+y[d]/2-g[d]/2,y[d]=Math.max(y[d],g[d]),y[h]=Math.min(y[h],g[h]+v[1-u]),l.x=v[0],l.y=v[1],l.markRedraw()}return y},e.prototype._layoutContentAndController=function(n,r,i,a,o,s,l,u){var c=this.getContentGroup(),f=this._containerGroup,d=this._controllerGroup;wf(n.get("orient"),c,n.get("itemGap"),a?i.width:null,a?null:i.height),wf("horizontal",d,n.get("pageButtonItemGap",!0));var h=c.getBoundingRect(),p=d.getBoundingRect(),g=this._showController=h[o]>i[o],v=[-h.x,-h.y];r||(v[a]=c[u]);var m=[0,0],y=[-p.x,-p.y],b=Mo(n.get("pageButtonGap",!0),n.get("itemGap",!0));if(g){var x=n.get("pageButtonPosition",!0);x==="end"?y[a]+=i[o]-p[o]:m[a]+=p[o]+b}y[1-a]+=h[s]/2-p[s]/2,c.setPosition(v),f.setPosition(m),d.setPosition(y);var w={x:0,y:0};if(w[o]=g?i[o]:h[o],w[s]=Math.max(h[s],p[s]),w[l]=Math.min(0,p[l]+y[1-a]),f.__rectSize=i[o],g){var _={x:0,y:0};_[o]=Math.max(i[o]-p[o]-b,0),_[s]=w[s],f.setClipPath(new Dr({shape:_})),f.__rectSize=_[o]}else d.eachChild(function(S){S.attr({invisible:!0,silent:!0})});var E=this._getPageInfo(n);return E.pageIndex!=null&&ur(c,{x:E.contentPosition[0],y:E.contentPosition[1]},g?n:null),this._updatePageInfoView(n,E),w},e.prototype._pageGo=function(n,r,i){var a=this._getPageInfo(r)[n];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:r.id})},e.prototype._updatePageInfoView=function(n,r){var i=this._controllerGroup;oe(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",d=r[f]!=null,h=i.childOfName(c);h&&(h.setStyle("fill",d?n.get("pageIconColor",!0):n.get("pageIconInactiveColor",!0)),h.cursor=d?"pointer":"default")});var a=i.childOfName("pageText"),o=n.get("pageFormatter"),s=r.pageIndex,l=s!=null?s+1:0,u=r.pageCount;a&&o&&a.setStyle("text",xr(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):o({current:l,total:u}))},e.prototype._getPageInfo=function(n){var r=n.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,o=n.getOrient().index,s=aS[o],l=oS[o],u=this._findTargetItemIndex(r),c=i.children(),f=c[u],d=c.length,h=d?1:0,p={contentPosition:[i.x,i.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return p;var g=x(f);p.contentPosition[o]=-g.s;for(var v=u+1,m=g,y=g,b=null;v<=d;++v)b=x(c[v]),(!b&&y.e>m.s+a||b&&!w(b,m.s))&&(y.i>m.i?m=y:m=b,m&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=m.i),++p.pageCount)),y=b;for(var v=u-1,m=g,y=g,b=null;v>=-1;--v)b=x(c[v]),(!b||!w(y,b.s))&&m.i<y.i&&(y=m,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=m.i),++p.pageCount,++p.pageIndex),m=b;return p;function x(_){if(_){var E=_.getBoundingRect(),S=E[l]+_[l];return{s:S,e:S+E[s],i:_.__legendDataIndex}}}function w(_,E){return _.e>=E&&_.s<=E+a}},e.prototype._findTargetItemIndex=function(n){if(!this._showController)return 0;var r,i=this.getContentGroup(),a;return i.eachChild(function(o,s){var l=o.__legendDataIndex;a==null&&l!=null&&(a=s),l===n&&(r=s)}),r??a},e.type="legend.scroll",e}(MX);function Dve(t){t.registerAction("legendScroll","legendscroll",function(e,n){var r=e.scrollDataIndex;r!=null&&n.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(r)})})}function Ive(t){Fo(PX),t.registerComponentModel(Cve),t.registerComponentView(Pve),Dve(t)}function Lve(t){Fo(PX),Fo(Ive)}var Rve=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="dataZoom.inside",e.defaultOption=Mc(p0.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(p0),tI=xa();function Nve(t,e,n){tI(t).coordSysRecordMap.each(function(r){var i=r.dataZoomInfoMap.get(e.uid);i&&(i.getRange=n)})}function Fve(t,e){for(var n=tI(t).coordSysRecordMap,r=n.keys(),i=0;i<r.length;i++){var a=r[i],o=n.get(a),s=o.dataZoomInfoMap;if(s){var l=e.uid,u=s.get(l);u&&(s.removeKey(l),s.keys().length||DX(n,o))}}}function DX(t,e){if(e){t.removeKey(e.model.uid);var n=e.controller;n&&n.dispose()}}function zve(t,e){var n={model:e,containsPoint:Rt(Bve,e),dispatchAction:Rt(jve,t),dataZoomInfoMap:null,controller:null},r=n.controller=new o2(t.getZr());return oe(["pan","zoom","scrollMove"],function(i){r.on(i,function(a){var o=[];n.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[i],u=l&&l(s.dzReferCoordSysInfo,n.model.mainType,n.controller,a);!s.model.get("disabled",!0)&&u&&o.push({dataZoomId:s.model.id,start:u[0],end:u[1]})}}),o.length&&n.dispatchAction(o)})}),n}function jve(t,e){t.isDisposed()||t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function Bve(t,e,n,r){return t.coordinateSystem.containPoint([n,r])}function $ve(t){var e,n="type_",r={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return t.each(function(a){var o=a.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;r[n+s]>r[n+e]&&(e=s),i=i&&o.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}function Vve(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,function(e,n){var r=tI(n),i=r.coordSysRecordMap||(r.coordSysRecordMap=ii());i.each(function(a){a.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var o=gX(a);oe(o.infoList,function(s){var l=s.model.uid,u=i.get(l)||i.set(l,zve(n,s.model)),c=u.dataZoomInfoMap||(u.dataZoomInfoMap=ii());c.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),i.each(function(a){var o=a.controller,s,l=a.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(s=l.get(u))}if(!s){DX(i,a);return}var c=$ve(l);o.enable(c.controlType,c.opt),o.setPointerChecker(a.containsPoint),Xx(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var qve=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="dataZoom.inside",n}return e.prototype.render=function(n,r,i){if(t.prototype.render.apply(this,arguments),n.noTarget()){this._clear();return}this.range=n.getPercentRange(),Nve(i,n,{pan:nt(sS.pan,this),zoom:nt(sS.zoom,this),scrollMove:nt(sS.scrollMove,this)})},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){Fve(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(YD),sS={zoom:function(t,e,n,r){var i=this.range,a=i.slice(),o=t.axisModels[0];if(o){var s=lS[e](null,[r.originX,r.originY],o,n,t),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/r.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(nd(0,a,[0,100],0,c.minSpan,c.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:SN(function(t,e,n,r,i,a){var o=lS[r]([a.oldX,a.oldY],[a.newX,a.newY],e,i,n);return o.signal*(t[1]-t[0])*o.pixel/o.pixelLength}),scrollMove:SN(function(t,e,n,r,i,a){var o=lS[r]([0,0],[a.scrollDelta,a.scrollDelta],e,i,n);return o.signal*(t[1]-t[0])*a.scrollDelta})};function SN(t){return function(e,n,r,i){var a=this.range,o=a.slice(),s=e.axisModels[0];if(s){var l=t(o,s,e,n,r,i);if(nd(l,o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}}}var lS={grid:function(t,e,n,r,i){var a=n.axis,o={},s=i.model.coordinateSystem.getRect();return t=t||[0,0],a.dim==="x"?(o.pixel=e[0]-t[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=e[1]-t[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(t,e,n,r,i){var a=n.axis,o={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),n.mainType==="radiusAxis"?(o.pixel=e[0]-t[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=e[1]-t[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=a.inverse?-1:1),o},singleAxis:function(t,e,n,r,i){var a=n.axis,o=i.model.coordinateSystem.getRect(),s={};return t=t||[0,0],a.orient==="horizontal"?(s.pixel=e[0]-t[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}};function IX(t){UD(t),t.registerComponentModel(Rve),t.registerComponentView(qve),Vve(t)}var Wve=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Mc(p0.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(p0),Hp=Dr,EN=7,Gve=1,uS=30,Hve=7,Yp="horizontal",ON="vertical",Yve=5,Uve=["line","bar","candlestick","scatter"],Xve={easing:"cubicOut",duration:100,delay:0},Zve=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._displayables={},n}return e.prototype.init=function(n,r){this.api=r,this._onBrush=nt(this._onBrush,this),this._onBrushEnd=nt(this._onBrushEnd,this)},e.prototype.render=function(n,r,i,a){if(t.prototype.render.apply(this,arguments),Xx(this,"_dispatchZoomAction",n.get("throttle"),"fixRate"),this._orient=n.getOrient(),n.get("show")===!1){this.group.removeAll();return}if(n.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){mU(this,"_dispatchZoomAction");var n=this.api.getZr();n.off("mousemove",this._onBrush),n.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var n=this.group;n.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new pn;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),n.add(r),this._positionGroup()},e.prototype._resetLocation=function(){var n=this.dataZoomModel,r=this.api,i=n.get("brushSelect"),a=i?Hve:0,o=this._findCoordRect(),s={width:r.getWidth(),height:r.getHeight()},l=this._orient===Yp?{right:s.width-o.x-o.width,top:s.height-uS-EN-a,width:o.width,height:uS}:{right:EN,top:o.y,width:uS,height:o.height},u=DU(n.option);oe(["right","top","width","height"],function(f){u[f]==="ph"&&(u[f]=l[f])});var c=za(u,s);this._location={x:c.x,y:c.y},this._size=[c.width,c.height],this._orient===ON&&this._size.reverse()},e.prototype._positionGroup=function(){var n=this.group,r=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),o=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(i===Yp&&!o?{scaleY:l?1:-1,scaleX:1}:i===Yp&&o?{scaleY:l?1:-1,scaleX:-1}:i===ON&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=n.getBoundingRect([s]);n.x=r.x-u.x,n.y=r.y-u.y,n.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var n=this.dataZoomModel,r=this._size,i=this._displayables.sliderGroup,a=n.get("brushSelect");i.add(new Hp({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:n.get("backgroundColor")},z2:-40}));var o=new Hp({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:nt(this._onClickPanel,this)}),s=this.api.getZr();a?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),i.add(o)},e.prototype._renderDataShadow=function(){var n=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!n)return;var r=this._size,i=this._shadowSize||[],a=n.series,o=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&o.getDimensionInfo(s)?a.getShadowDim():n.otherDim;if(l==null)return;var u=this._shadowPolygonPts,c=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||r[0]!==i[0]||r[1]!==i[1]){var f=o.getDataExtent(l),d=(f[1]-f[0])*.3;f=[f[0]-d,f[1]+d];var h=[0,r[1]],p=[0,r[0]],g=[[r[0],0],[0,0]],v=[],m=p[1]/(o.count()-1),y=0,b=Math.round(o.count()/r[0]),x;o.each([l],function(O,A){if(b>0&&A%b){y+=m;return}var T=O==null||isNaN(O)||O==="",I=T?0:Kn(O,f,h,!0);T&&!x&&A?(g.push([g[g.length-1][0],0]),v.push([v[v.length-1][0],0])):!T&&x&&(g.push([y,0]),v.push([y,0])),g.push([y,I]),v.push([y,I]),y+=m,x=T}),u=this._shadowPolygonPts=g,c=this._shadowPolylinePts=v}this._shadowData=o,this._shadowDim=l,this._shadowSize=[r[0],r[1]];var w=this.dataZoomModel;function _(O){var A=w.getModel(O?"selectedDataBackground":"dataBackground"),T=new pn,I=new tu({shape:{points:u},segmentIgnoreThreshold:1,style:A.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),D=new kc({shape:{points:c},segmentIgnoreThreshold:1,style:A.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return T.add(I),T.add(D),T}for(var E=0;E<3;E++){var S=_(E===1);this._displayables.sliderGroup.add(S),this._displayables.dataShadowSegs.push(S)}},e.prototype._prepareDataShadowInfo=function(){var n=this.dataZoomModel,r=n.get("showDataShadow");if(r!==!1){var i,a=this.ecModel;return n.eachTargetAxis(function(o,s){var l=n.getAxisProxy(o,s).getTargetSeriesModels();oe(l,function(u){if(!i&&!(r!==!0&&ai(Uve,u.get("type"))<0)){var c=a.getComponent(Wu(o),s).axis,f=Kve(o),d,h=u.coordinateSystem;f!=null&&h.getOtherAxis&&(d=h.getOtherAxis(c).inverse),f=u.getData().mapDimension(f),i={thisAxis:c,series:u,thisDim:o,otherDim:f,otherAxisInverse:d}}},this)},this),i}},e.prototype._renderHandle=function(){var n=this.group,r=this._displayables,i=r.handles=[null,null],a=r.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,u=this.api,c=l.get("borderRadius")||0,f=l.get("brushSelect"),d=r.filler=new Hp({silent:f,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(d),o.add(new Hp({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:c},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:Gve,fill:"rgba(0,0,0,0)"}})),oe([0,1],function(b){var x=l.get("handleIcon");!bhe[x]&&x.indexOf("path://")<0&&x.indexOf("image://")<0&&(x="path://"+x);var w=zo(x,-1,0,2,2,null,!0);w.attr({cursor:kN(this._orient),draggable:!0,drift:nt(this._onDragMove,this,b),ondragend:nt(this._onDragEnd,this),onmouseover:nt(this._showDataInfo,this,!0),onmouseout:nt(this._showDataInfo,this,!1),z2:5});var _=w.getBoundingRect(),E=l.get("handleSize");this._handleHeight=mt(E,this._size[1]),this._handleWidth=_.width/_.height*this._handleHeight,w.setStyle(l.getModel("handleStyle").getItemStyle()),w.style.strokeNoScale=!0,w.rectHover=!0,w.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),ch(w);var S=l.get("handleColor");S!=null&&(w.style.fill=S),o.add(i[b]=w);var O=l.getModel("textStyle");n.add(a[b]=new Xr({silent:!0,invisible:!0,style:Ra(O,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:O.getTextColor(),font:O.getFont()}),z2:10}))},this);var h=d;if(f){var p=mt(l.get("moveHandleSize"),s[1]),g=r.moveHandle=new Dr({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:p}}),v=p*.8,m=r.moveHandleIcon=zo(l.get("moveHandleIcon"),-v/2,-v/2,v,v,"#fff",!0);m.silent=!0,m.y=s[1]+p/2-.5,g.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var y=Math.min(s[1]/2,Math.max(p,10));h=r.moveZone=new Dr({invisible:!0,shape:{y:s[1]-y,height:p+y}}),h.on("mouseover",function(){u.enterEmphasis(g)}).on("mouseout",function(){u.leaveEmphasis(g)}),o.add(g),o.add(m),o.add(h)}h.attr({draggable:!0,cursor:kN(this._orient),drift:nt(this._onDragMove,this,"all"),ondragstart:nt(this._showDataInfo,this,!0),ondragend:nt(this._onDragEnd,this),onmouseover:nt(this._showDataInfo,this,!0),onmouseout:nt(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var n=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[Kn(n[0],[0,100],r,!0),Kn(n[1],[0,100],r,!0)]},e.prototype._updateInterval=function(n,r){var i=this.dataZoomModel,a=this._handleEnds,o=this._getViewExtent(),s=i.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];nd(r,a,o,i.get("zoomLock")?"all":n,s.minSpan!=null?Kn(s.minSpan,l,o,!0):null,s.maxSpan!=null?Kn(s.maxSpan,l,o,!0):null);var u=this._range,c=this._range=Co([Kn(a[0],o,l,!0),Kn(a[1],o,l,!0)]);return!u||u[0]!==c[0]||u[1]!==c[1]},e.prototype._updateView=function(n){var r=this._displayables,i=this._handleEnds,a=Co(i.slice()),o=this._size;oe([0,1],function(h){var p=r.handles[h],g=this._handleHeight;p.attr({scaleX:g/2,scaleY:g/2,x:i[h]+(h?-1:1),y:o[1]/2-g/2})},this),r.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:o[1]});var s={x:a[0],width:a[1]-a[0]};r.moveHandle&&(r.moveHandle.setShape(s),r.moveZone.setShape(s),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=r.dataShadowSegs,u=[0,a[0],a[1],o[0]],c=0;c<l.length;c++){var f=l[c],d=f.getClipPath();d||(d=new Dr,f.setClipPath(d)),d.setShape({x:u[c],y:0,width:u[c+1]-u[c],height:o[1]})}this._updateDataInfo(n)},e.prototype._updateDataInfo=function(n){var r=this.dataZoomModel,i=this._displayables,a=i.handleLabels,o=this._orient,s=["",""];if(r.get("showDetail")){var l=r.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,c=this._range,f=n?l.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(f[0],u),this._formatLabel(f[1],u)]}}var d=Co(this._handleEnds.slice());h.call(this,0),h.call(this,1);function h(p){var g=uh(i.handles[p].parent,this.group),v=MD(p===0?"right":"left",g),m=this._handleWidth/2+Yve,y=xf([d[p]+(p===0?-m:m),this._size[1]/2],g);a[p].setStyle({x:y[0],y:y[1],verticalAlign:o===Yp?"middle":v,align:o===Yp?v:"center",text:s[p]})}},e.prototype._formatLabel=function(n,r){var i=this.dataZoomModel,a=i.get("labelFormatter"),o=i.get("labelPrecision");(o==null||o==="auto")&&(o=r.getPixelPrecision());var s=n==null||isNaN(n)?"":r.type==="category"||r.type==="time"?r.scale.getLabel({value:Math.round(n)}):n.toFixed(Math.min(o,20));return Tr(a)?a(n,s):xr(a)?a.replace("{value}",s):s},e.prototype._showDataInfo=function(n){n=this._dragging||n;var r=this._displayables,i=r.handleLabels;i[0].attr("invisible",!n),i[1].attr("invisible",!n),r.moveHandle&&this.api[n?"enterEmphasis":"leaveEmphasis"](r.moveHandle,1)},e.prototype._onDragMove=function(n,r,i,a){this._dragging=!0,If(a.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=xf([r,i],o,!0),l=this._updateInterval(n,s[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var n=this.dataZoomModel.get("realtime");!n&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(n){var r=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(n.offsetX,n.offsetY);if(!(i[0]<0||i[0]>r[0]||i[1]<0||i[1]>r[1])){var a=this._handleEnds,o=(a[0]+a[1])/2,s=this._updateInterval("all",i[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(n){var r=n.offsetX,i=n.offsetY;this._brushStart=new mi(r,i),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(n){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,!!r){r.attr("ignore",!0);var i=r.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(i.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=Co([Kn(i.x,o,s,!0),Kn(i.x+i.width,o,s,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(n){this._brushing&&(If(n.event),this._updateBrushRect(n.offsetX,n.offsetY))},e.prototype._updateBrushRect=function(n,r){var i=this._displayables,a=this.dataZoomModel,o=i.brushRect;o||(o=i.brushRect=new Hp({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(n,r),c=l.transformCoordToLocal(s.x,s.y),f=this._size;u[0]=Math.max(Math.min(f[0],u[0]),0),o.setShape({x:c[0],y:0,width:u[0]-c[0],height:f[1]})},e.prototype._dispatchZoomAction=function(n){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:n?Xve:null,start:r[0],end:r[1]})},e.prototype._findCoordRect=function(){var n,r=gX(this.dataZoomModel).infoList;if(!n&&r.length){var i=r[0].model.coordinateSystem;n=i.getRect&&i.getRect()}if(!n){var a=this.api.getWidth(),o=this.api.getHeight();n={x:a*.2,y:o*.2,width:a*.6,height:o*.6}}return n},e.type="dataZoom.slider",e}(YD);function Kve(t){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[t]}function kN(t){return t==="vertical"?"ns-resize":"ew-resize"}function LX(t){t.registerComponentModel(Wve),t.registerComponentView(Zve),UD(t)}function Jve(t){Fo(IX),Fo(LX)}var RX={get:function(t,e,n){var r=En((Qve[t]||{})[e]);return n&&at(r)?r[r.length-1]:r}},Qve={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},AN=bi.mapVisual,eme=bi.eachVisual,tme=at,TN=oe,nme=Co,rme=Kn,ab=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return e.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i)},e.prototype.optionUpdated=function(n,r){var i=this.option;!r&&_X(i,n,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(n){var r=this.stateList;n=nt(n,this),this.controllerVisuals=jC(this.option.controller,r,n),this.targetVisuals=jC(this.option.target,r,n)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var n=this.option.seriesIndex,r=[];return n==null||n==="all"?this.ecModel.eachSeries(function(i,a){r.push(a)}):r=nu(n),r},e.prototype.eachTargetSeries=function(n,r){oe(this.getTargetSeriesIndices(),function(i){var a=this.ecModel.getSeriesByIndex(i);a&&n.call(r,a)},this)},e.prototype.isTargetSeries=function(n){var r=!1;return this.eachTargetSeries(function(i){i===n&&(r=!0)}),r},e.prototype.formatValueText=function(n,r,i){var a=this.option,o=a.precision,s=this.dataBound,l=a.formatter,u;i=i||["<",">"],at(n)&&(n=n.slice(),u=!0);var c=r?n:u?[f(n[0]),f(n[1])]:f(n);if(xr(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(Tr(l))return u?l(n[0],n[1]):l(n);if(u)return n[0]===s[0]?i[0]+" "+c[1]:n[1]===s[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function f(d){return d===s[0]?"min":d===s[1]?"max":(+d).toFixed(Math.min(o,20))}},e.prototype.resetExtent=function(){var n=this.option,r=nme([n.min,n.max]);this._dataExtent=r},e.prototype.getDataDimensionIndex=function(n){var r=this.option.dimension;if(r!=null)return n.getDimensionIndex(r);for(var i=n.dimensions,a=i.length-1;a>=0;a--){var o=i[a],s=n.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var n=this.ecModel,r=this.option,i={inRange:r.inRange,outOfRange:r.outOfRange},a=r.target||(r.target={}),o=r.controller||(r.controller={});Ur(a,i),Ur(o,i);var s=this.isCategory();l.call(this,a),l.call(this,o),u.call(this,a,"inRange","outOfRange"),c.call(this,o);function l(f){tme(r.color)&&!f.inRange&&(f.inRange={color:r.color.slice().reverse()}),f.inRange=f.inRange||{color:n.get("gradientColor")}}function u(f,d,h){var p=f[d],g=f[h];p&&!g&&(g=f[h]={},TN(p,function(v,m){if(bi.isValidType(m)){var y=RX.get(m,"inactive",s);y!=null&&(g[m]=y,m==="color"&&!g.hasOwnProperty("opacity")&&!g.hasOwnProperty("colorAlpha")&&(g.opacity=[0,0]))}}))}function c(f){var d=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,h=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),g=this.getItemSymbol(),v=g||"roundRect";TN(this.stateList,function(m){var y=this.itemSize,b=f[m];b||(b=f[m]={color:s?p:[p]}),b.symbol==null&&(b.symbol=d&&En(d)||(s?v:[v])),b.symbolSize==null&&(b.symbolSize=h&&En(h)||(s?y[0]:[y[0],y[0]])),b.symbol=AN(b.symbol,function(_){return _==="none"?v:_});var x=b.symbolSize;if(x!=null){var w=-1/0;eme(x,function(_){_>w&&(w=_)}),b.symbolSize=AN(x,function(_){return rme(_,[0,w],[0,y[0]],!0)})}},this)}},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(n){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(n){return null},e.prototype.getVisualMeta=function(n){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(qo),MN=[20,140],ime=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.optionUpdated=function(n,r){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var n=this.itemSize;(n[0]==null||isNaN(n[0]))&&(n[0]=MN[0]),(n[1]==null||isNaN(n[1]))&&(n[1]=MN[1])},e.prototype._resetRange=function(){var n=this.getExtent(),r=this.option.range;!r||r.auto?(n.auto=1,this.option.range=n):at(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],n[0]),r[1]=Math.min(r[1],n[1]))},e.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),oe(this.stateList,function(n){var r=this.option.controller[n].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},e.prototype.setSelected=function(n){this.option.range=n.slice(),this._resetRange()},e.prototype.getSelected=function(){var n=this.getExtent(),r=Co((this.get("range")||[]).slice());return r[0]>n[1]&&(r[0]=n[1]),r[1]>n[1]&&(r[1]=n[1]),r[0]<n[0]&&(r[0]=n[0]),r[1]<n[0]&&(r[1]=n[0]),r},e.prototype.getValueState=function(n){var r=this.option.range,i=this.getExtent();return(r[0]<=i[0]||r[0]<=n)&&(r[1]>=i[1]||n<=r[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(n){var r=[];return this.eachTargetSeries(function(i){var a=[],o=i.getData();o.each(this.getDataDimensionIndex(o),function(s,l){n[0]<=s&&s<=n[1]&&a.push(l)},this),r.push({seriesId:i.id,dataIndex:a})},this),r},e.prototype.getVisualMeta=function(n){var r=CN(this,"outOfRange",this.getExtent()),i=CN(this,"inRange",this.option.range.slice()),a=[];function o(h,p){a.push({value:h,color:n(h,p)})}for(var s=0,l=0,u=i.length,c=r.length;l<c&&(!i.length||r[l]<=i[0]);l++)r[l]<i[s]&&o(r[l],"outOfRange");for(var f=1;s<u;s++,f=0)f&&a.length&&o(i[s],"outOfRange"),o(i[s],"inRange");for(var f=1;l<c;l++)(!i.length||i[i.length-1]<r[l])&&(f&&(a.length&&o(a[a.length-1].value,"outOfRange"),f=0),o(r[l],"outOfRange"));var d=a.length;return{stops:a,outerColors:[d?a[0].color:"transparent",d?a[d-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Mc(ab.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(ab);function CN(t,e,n){if(n[0]===n[1])return n.slice();for(var r=200,i=(n[1]-n[0])/r,a=n[0],o=[],s=0;s<=r&&a<n[1];s++)o.push(a),a+=i;return o.push(n[1]),o}var NX=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return e.prototype.init=function(n,r){this.ecModel=n,this.api=r},e.prototype.render=function(n,r,i,a){if(this.visualMapModel=n,n.get("show")===!1){this.group.removeAll();return}this.doRender(n,r,i,a)},e.prototype.renderBackground=function(n){var r=this.visualMapModel,i=SU(r.get("padding")||0),a=n.getBoundingRect();n.add(new Dr({z2:-1,silent:!0,shape:{x:a.x-i[3],y:a.y-i[0],width:a.width+i[3]+i[1],height:a.height+i[0]+i[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},e.prototype.getControllerVisual=function(n,r,i){i=i||{};var a=i.forceState,o=this.visualMapModel,s={};if(r==="color"){var l=o.get("contentColor");s.color=l}function u(h){return s[h]}function c(h,p){s[h]=p}var f=o.controllerVisuals[a||o.getValueState(n)],d=bi.prepareVisualTypes(f);return oe(d,function(h){var p=f[h];i.convertOpacityToAlpha&&h==="opacity"&&(h="colorAlpha",p=f.__alphaForOpacity),bi.dependsOn(h,r)&&p&&p.applyVisual(n,u,c)}),s[r]},e.prototype.positionGroup=function(n){var r=this.visualMapModel,i=this.api;Zx(n,r.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},e.prototype.doRender=function(n,r,i,a){},e.type="visualMap",e}(Wo),PN=[["left","right","width"],["top","bottom","height"]];function FX(t,e,n){var r=t.option,i=r.align;if(i!=null&&i!=="auto")return i;for(var a={width:e.getWidth(),height:e.getHeight()},o=r.orient==="horizontal"?1:0,s=PN[o],l=[0,null,10],u={},c=0;c<3;c++)u[PN[1-o][c]]=l[c],u[s[c]]=c===2?n[0]:r[s[c]];var f=[["x","width",3],["y","height",0]][o],d=za(u,a,r.padding);return s[(d.margin[f[2]]||0)+d[f[0]]+d[f[1]]*.5<a[f[1]]*.5?0:1]}function y1(t,e){return oe(t||[],function(n){n.dataIndex!=null&&(n.dataIndexInside=n.dataIndex,n.dataIndex=null),n.highlightKey="visualMap"+(e?e.componentIndex:"")}),t}var Vs=Kn,ame=oe,DN=Math.min,cS=Math.max,ome=12,sme=6,lme=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return e.prototype.init=function(n,r){t.prototype.init.call(this,n,r),this._hoverLinkFromSeriesMouseOver=nt(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=nt(this._hideIndicator,this)},e.prototype.doRender=function(n,r,i,a){(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var n=this.visualMapModel,r=this.group;this._orient=n.get("orient"),this._useHandle=n.get("calculable"),this._resetInterval(),this._renderBar(r);var i=n.get("text");this._renderEndsText(r,i,0),this._renderEndsText(r,i,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},e.prototype._renderEndsText=function(n,r,i){if(r){var a=r[1-i];a=a!=null?a+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],u),f=this._applyTransform(i===0?"bottom":"top",u),d=this._orient,h=this.visualMapModel.textStyleModel;this.group.add(new Xr({style:Ra(h,{x:c[0],y:c[1],verticalAlign:d==="horizontal"?"middle":f,align:d==="horizontal"?f:"center",text:a})}))}},e.prototype._renderBar=function(n){var r=this.visualMapModel,i=this._shapes,a=r.itemSize,o=this._orient,s=this._useHandle,l=FX(r,this.api,a),u=i.mainGroup=this._createBarGroup(l),c=new pn;u.add(c),c.add(i.outOfRange=IN()),c.add(i.inRange=IN(null,s?RN(this._orient):null,nt(this._dragHandle,this,"all",!1),nt(this._dragHandle,this,"all",!0))),c.setClipPath(new Dr({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var f=r.textStyleModel.getTextRect(""),d=cS(f.width,f.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(r,u,0,a,d,o),this._createHandle(r,u,1,a,d,o)),this._createIndicator(r,u,a,d,o),n.add(u)},e.prototype._createHandle=function(n,r,i,a,o,s){var l=nt(this._dragHandle,this,i,!1),u=nt(this._dragHandle,this,i,!0),c=X1(n.get("handleSize"),a[0]),f=zo(n.get("handleIcon"),-c/2,-c/2,c,c,null,!0),d=RN(this._orient);f.attr({cursor:d,draggable:!0,drift:l,ondragend:u,onmousemove:function(m){If(m.event)}}),f.x=a[0]/2,f.useStyle(n.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=n.getModel(["emphasis","handleStyle"]).getItemStyle(),pg(f,!0),r.add(f);var h=this.visualMapModel.textStyleModel,p=new Xr({cursor:d,draggable:!0,drift:l,onmousemove:function(m){If(m.event)},ondragend:u,style:Ra(h,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var g=[c,0],v=this._shapes;v.handleThumbs[i]=f,v.handleLabelPoints[i]=g,v.handleLabels[i]=p},e.prototype._createIndicator=function(n,r,i,a,o){var s=X1(n.get("indicatorSize"),i[0]),l=zo(n.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=n.getModel("indicatorStyle").getItemStyle();if(l instanceof bv){var c=l.style;l.useStyle(ut({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);r.add(l);var f=this.visualMapModel.textStyleModel,d=new Xr({silent:!0,invisible:!0,style:Ra(f,{x:0,y:0,text:""})});this.group.add(d);var h=[(o==="horizontal"?a/2:sme)+i[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=d,p.indicatorLabelPoint=h,this._firstShowIndicator=!0},e.prototype._dragHandle=function(n,r,i,a){if(this._useHandle){if(this._dragging=!r,!r){var o=this._applyTransform([i,a],this._shapes.mainGroup,!0);this._updateInterval(n,o[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():LN(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[n],!1)}},e.prototype._resetInterval=function(){var n=this.visualMapModel,r=this._dataInterval=n.getSelected(),i=n.getExtent(),a=[0,n.itemSize[1]];this._handleEnds=[Vs(r[0],i,a,!0),Vs(r[1],i,a,!0)]},e.prototype._updateInterval=function(n,r){r=r||0;var i=this.visualMapModel,a=this._handleEnds,o=[0,i.itemSize[1]];nd(r,a,o,n,0);var s=i.getExtent();this._dataInterval=[Vs(a[0],o,s,!0),Vs(a[1],o,s,!0)]},e.prototype._updateView=function(n){var r=this.visualMapModel,i=r.getExtent(),a=this._shapes,o=[0,r.itemSize[1]],s=n?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),u=this._createBarVisual(i,i,o,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},e.prototype._createBarVisual=function(n,r,i,a){var o={forceState:a,convertOpacityToAlpha:!0},s=this._makeColorGradient(n,o),l=[this.getControllerVisual(n[0],"symbolSize",o),this.getControllerVisual(n[1],"symbolSize",o)],u=this._createBarPoints(i,l);return{barColor:new IU(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},e.prototype._makeColorGradient=function(n,r){var i=100,a=[],o=(n[1]-n[0])/i;a.push({color:this.getControllerVisual(n[0],"color",r),offset:0});for(var s=1;s<i;s++){var l=n[0]+o*s;if(l>n[1])break;a.push({color:this.getControllerVisual(l,"color",r),offset:s/i})}return a.push({color:this.getControllerVisual(n[1],"color",r),offset:1}),a},e.prototype._createBarPoints=function(n,r){var i=this.visualMapModel.itemSize;return[[i[0]-r[0],n[0]],[i[0],n[0]],[i[0],n[1]],[i[0]-r[1],n[1]]]},e.prototype._createBarGroup=function(n){var r=this._orient,i=this.visualMapModel.get("inverse");return new pn(r==="horizontal"&&!i?{scaleX:n==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&i?{scaleX:n==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!i?{scaleX:n==="left"?1:-1,scaleY:-1}:{scaleX:n==="left"?1:-1})},e.prototype._updateHandle=function(n,r){if(this._useHandle){var i=this._shapes,a=this.visualMapModel,o=i.handleThumbs,s=i.handleLabels,l=a.itemSize,u=a.getExtent();ame([0,1],function(c){var f=o[c];f.setStyle("fill",r.handlesColor[c]),f.y=n[c];var d=Vs(n[c],[0,l[1]],u,!0),h=this.getControllerVisual(d,"symbolSize");f.scaleX=f.scaleY=h/l[0],f.x=l[0]-h/2;var p=xf(i.handleLabelPoints[c],uh(f,this.group));s[c].setStyle({x:p[0],y:p[1],text:a.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(n,r,i,a){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,u=[0,l[1]],c=this._shapes,f=c.indicator;if(f){f.attr("invisible",!1);var d={convertOpacityToAlpha:!0},h=this.getControllerVisual(n,"color",d),p=this.getControllerVisual(n,"symbolSize"),g=Vs(n,s,u,!0),v=l[0]-p/2,m={x:f.x,y:f.y};f.y=g,f.x=v;var y=xf(c.indicatorLabelPoint,uh(f,this.group)),b=c.indicatorLabel;b.attr("invisible",!1);var x=this._applyTransform("left",c.mainGroup),w=this._orient,_=w==="horizontal";b.setStyle({text:(i||"")+o.formatValueText(r),verticalAlign:_?x:"middle",align:_?"center":x});var E={x:v,y:g,style:{fill:h}},S={style:{x:y[0],y:y[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var O={duration:100,easing:"cubicInOut",additive:!0};f.x=m.x,f.y=m.y,f.animateTo(E,O),b.animateTo(S,O)}else f.attr(E),b.attr(S);this._firstShowIndicator=!1;var A=this._shapes.handleLabels;if(A)for(var T=0;T<A.length;T++)this.api.enterBlur(A[T])}},e.prototype._enableHoverLinkToSeries=function(){var n=this;this._shapes.mainGroup.on("mousemove",function(r){if(n._hovering=!0,!n._dragging){var i=n.visualMapModel.itemSize,a=n._applyTransform([r.offsetX,r.offsetY],n._shapes.mainGroup,!0,!0);a[1]=DN(cS(0,a[1]),i[1]),n._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=i[0])}}).on("mouseout",function(){n._hovering=!1,!n._dragging&&n._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var n=this.api.getZr();this.visualMapModel.option.hoverLink?(n.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),n.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(n,r){var i=this.visualMapModel,a=i.itemSize;if(i.option.hoverLink){var o=[0,a[1]],s=i.getExtent();n=DN(cS(o[0],n),o[1]);var l=ume(i,s,o),u=[n-l,n+l],c=Vs(n,o,s,!0),f=[Vs(u[0],o,s,!0),Vs(u[1],o,s,!0)];u[0]<o[0]&&(f[0]=-1/0),u[1]>o[1]&&(f[1]=1/0),r&&(f[0]===-1/0?this._showIndicator(c,f[1],"< ",l):f[1]===1/0?this._showIndicator(c,f[0],"> ",l):this._showIndicator(c,c," ",l));var d=this._hoverLinkDataIndices,h=[];(r||LN(i))&&(h=this._hoverLinkDataIndices=i.findTargetDataIndices(f));var p=xhe(d,h);this._dispatchHighDown("downplay",y1(p[0],i)),this._dispatchHighDown("highlight",y1(p[1],i))}},e.prototype._hoverLinkFromSeriesMouseOver=function(n){var r;if(whe(n.target,function(l){var u=Yn(l);if(u.dataIndex!=null)return r=u,!0},!0),!!r){var i=this.ecModel.getSeriesByIndex(r.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(i)){var o=i.getData(r.dataType),s=o.getStore().get(a.getDataDimensionIndex(o),r.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},e.prototype._hideIndicator=function(){var n=this._shapes;n.indicator&&n.indicator.attr("invisible",!0),n.indicatorLabel&&n.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var i=0;i<r.length;i++)this.api.leaveBlur(r[i])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var n=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",y1(n,this.visualMapModel)),n.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var n=this.api.getZr();n.off("mouseover",this._hoverLinkFromSeriesMouseOver),n.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(n,r,i,a){var o=uh(r,a?null:this.group);return at(n)?xf(n,o,i):MD(n,o,i)},e.prototype._dispatchHighDown=function(n,r){r&&r.length&&this.api.dispatchAction({type:n,batch:r})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(NX);function IN(t,e,n,r){return new tu({shape:{points:t},draggable:!!n,cursor:e,drift:n,onmousemove:function(i){If(i.event)},ondragend:r})}function ume(t,e,n){var r=ome/2,i=t.get("hoverLinkDataSize");return i&&(r=Vs(i,e,n,!0)/2),r}function LN(t){var e=t.get("hoverLinkOnHandle");return!!(e??t.get("realtime"))}function RN(t){return t==="vertical"?"ns-resize":"ew-resize"}var cme={type:"selectDataRange",event:"dataRangeSelected",update:"update"},fme=function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(n){n.setSelected(t.selected)})},dme=[{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",function(r){var i=t.pipelineContext;!r.isTargetSeries(t)||i&&i.large||n.push(C0e(r.stateList,r.targetVisuals,nt(r.getValueState,r),r.getDataDimensionIndex(t.getData())))}),n}},{createOnAllSeries:!0,reset:function(t,e){var n=t.getData(),r=[];e.eachComponent("visualMap",function(i){if(i.isTargetSeries(t)){var a=i.getVisualMeta(nt(hme,null,t,i))||{stops:[],outerColors:[]},o=i.getDataDimensionIndex(n);o>=0&&(a.dimension=o,r.push(a))}}),t.getData().setVisual("visualMeta",r)}}];function hme(t,e,n,r){for(var i=e.targetVisuals[r],a=bi.prepareVisualTypes(i),o={color:Qx(t.getData(),"color")},s=0,l=a.length;s<l;s++){var u=a[s],c=i[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(n,f,d)}return o.color;function f(h){return o[h]}function d(h,p){o[h]=p}}var NN=oe;function pme(t){var e=t&&t.visualMap;at(e)||(e=e?[e]:[]),NN(e,function(n){if(n){Sd(n,"splitList")&&!Sd(n,"pieces")&&(n.pieces=n.splitList,delete n.splitList);var r=n.pieces;r&&at(r)&&NN(r,function(i){oo(i)&&(Sd(i,"start")&&!Sd(i,"min")&&(i.min=i.start),Sd(i,"end")&&!Sd(i,"max")&&(i.max=i.end))})}})}function Sd(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var FN=!1;function zX(t){FN||(FN=!0,t.registerSubTypeDefaulter("visualMap",function(e){return!e.categories&&(!(e.pieces?e.pieces.length>0:e.splitNumber>0)||e.calculable)?"continuous":"piecewise"}),t.registerAction(cme,fme),oe(dme,function(e){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,e)}),t.registerPreprocessor(pme))}function jX(t){t.registerComponentModel(ime),t.registerComponentView(lme),zX(t)}var gme=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._pieceList=[],n}return e.prototype.optionUpdated=function(n,r){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],vme[this._mode].call(this,this._pieceList),this._resetSelected(n,r);var a=this.option.categories;this.resetVisual(function(o,s){i==="categories"?(o.mappingMethod="category",o.categories=En(a)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=gt(this._pieceList,function(l){return l=En(l),s!=="inRange"&&(l.visual=null),l}))})},e.prototype.completeVisualOption=function(){var n=this.option,r={},i=bi.listVisualTypes(),a=this.isCategory();oe(n.pieces,function(s){oe(i,function(l){s.hasOwnProperty(l)&&(r[l]=1)})}),oe(r,function(s,l){var u=!1;oe(this.stateList,function(c){u=u||o(n,c,l)||o(n.target,c,l)},this),!u&&oe(this.stateList,function(c){(n[c]||(n[c]={}))[l]=RX.get(l,c==="inRange"?"active":"inactive",a)})},this);function o(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}t.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(n,r){var i=this.option,a=this._pieceList,o=(r?i:n).selected||{};if(i.selected=o,oe(a,function(l,u){var c=this.getSelectedMapKey(l);o.hasOwnProperty(c)||(o[c]=!0)},this),i.selectedMode==="single"){var s=!1;oe(a,function(l,u){var c=this.getSelectedMapKey(l);o[c]&&(s?o[c]=!1:s=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(n){return this._mode==="categories"?n.value+"":n.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var n=this.option;return n.pieces&&n.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(n){this.option.selected=En(n)},e.prototype.getValueState=function(n){var r=bi.findPieceIndex(n,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(n){var r=[],i=this._pieceList;return this.eachTargetSeries(function(a){var o=[],s=a.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var c=bi.findPieceIndex(l,i);c===n&&o.push(u)},this),r.push({seriesId:a.id,dataIndex:o})},this),r},e.prototype.getRepresentValue=function(n){var r;if(this.isCategory())r=n.value;else if(n.value!=null)r=n.value;else{var i=n.interval||[];r=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return r},e.prototype.getVisualMeta=function(n){if(this.isCategory())return;var r=[],i=["",""],a=this;function o(c,f){var d=a.getRepresentValue({interval:c});f||(f=a.getValueState(d));var h=n(d,f);c[0]===-1/0?i[0]=h:c[1]===1/0?i[1]=h:r.push({value:c[0],color:h},{value:c[1],color:h})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return oe(s,function(c){var f=c.interval;f&&(f[0]>u&&o([u,f[0]],"outOfRange"),o(f.slice()),u=f[1])},this),{stops:r,outerColors:i}},e.type="visualMap.piecewise",e.defaultOption=Mc(ab.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(ab),vme={splitNumber:function(t){var e=this.option,n=Math.min(e.precision,20),r=this.getExtent(),i=e.splitNumber;i=Math.max(parseInt(i,10),1),e.splitNumber=i;for(var a=(r[1]-r[0])/i;+a.toFixed(n)!==a&&n<5;)n++;e.precision=n,a=+a.toFixed(n),e.minOpen&&t.push({interval:[-1/0,r[0]],close:[0,0]});for(var o=0,s=r[0];o<i;s+=a,o++){var l=o===i-1?r[1]:s+a;t.push({interval:[s,l],close:[1,1]})}e.maxOpen&&t.push({interval:[r[1],1/0],close:[0,0]}),a5(t),oe(t,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(t){var e=this.option;oe(e.categories,function(n){t.push({text:this.formatValueText(n,!0),value:n})},this),zN(e,t)},pieces:function(t){var e=this.option;oe(e.pieces,function(n,r){oo(n)||(n={value:n});var i={text:"",index:r};if(n.label!=null&&(i.text=n.label),n.hasOwnProperty("value")){var a=i.value=n.value;i.interval=[a,a],i.close=[1,1]}else{for(var o=i.interval=[],s=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],f=0;f<2;f++){for(var d=[["gte","gt","min"],["lte","lt","max"]][f],h=0;h<3&&o[f]==null;h++)o[f]=n[d[h]],s[f]=l[h],c[f]=h===2;o[f]==null&&(o[f]=u[f])}c[0]&&o[1]===1/0&&(s[0]=0),c[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(i.value=o[0])}i.visual=bi.retrieveVisuals(n),t.push(i)},this),zN(e,t),a5(t),oe(t,function(n){var r=n.close,i=[["<",""][r[1]],[">",""][r[0]]];n.text=n.text||this.formatValueText(n.value!=null?n.value:n.interval,!1,i)},this)}};function zN(t,e){var n=t.inverse;(t.orient==="vertical"?!n:n)&&e.reverse()}var mme=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.doRender=function(){var n=this.group;n.removeAll();var r=this.visualMapModel,i=r.get("textGap"),a=r.textStyleModel,o=a.getFont(),s=a.getTextColor(),l=this._getItemAlign(),u=r.itemSize,c=this._getViewData(),f=c.endsText,d=Ks(r.get("showLabel",!0),!f);f&&this._renderEndsText(n,f[0],u,d,l),oe(c.viewPieceList,function(h){var p=h.piece,g=new pn;g.onclick=nt(this._onItemClick,this,p),this._enableHoverLink(g,h.indexInModelPieceList);var v=r.getRepresentValue(p);if(this._createItemSymbol(g,v,[0,0,u[0],u[1]]),d){var m=this.visualMapModel.getValueState(v);g.add(new Xr({style:{x:l==="right"?-i:u[0]+i,y:u[1]/2,text:p.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:m==="outOfRange"?.5:1}}))}n.add(g)},this),f&&this._renderEndsText(n,f[1],u,d,l),wf(r.get("orient"),n,r.get("itemGap")),this.renderBackground(n),this.positionGroup(n)},e.prototype._enableHoverLink=function(n,r){var i=this;n.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(o){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:o,batch:y1(s.findTargetDataIndices(r),s)})}},e.prototype._getItemAlign=function(){var n=this.visualMapModel,r=n.option;if(r.orient==="vertical")return FX(n,this.api,n.itemSize);var i=r.align;return(!i||i==="auto")&&(i="left"),i},e.prototype._renderEndsText=function(n,r,i,a,o){if(r){var s=new pn,l=this.visualMapModel.textStyleModel;s.add(new Xr({style:Ra(l,{x:a?o==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:a?o:"center",text:r})})),n.add(s)}},e.prototype._getViewData=function(){var n=this.visualMapModel,r=gt(n.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=n.get("text"),a=n.get("orient"),o=n.get("inverse");return(a==="horizontal"?o:!o)?r.reverse():i&&(i=i.slice().reverse()),{viewPieceList:r,endsText:i}},e.prototype._createItemSymbol=function(n,r,i){n.add(zo(this.getControllerVisual(r,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(r,"color")))},e.prototype._onItemClick=function(n){var r=this.visualMapModel,i=r.option,a=i.selectedMode;if(a){var o=En(i.selected),s=r.getSelectedMapKey(n);a==="single"||a===!0?(o[s]=!0,oe(o,function(l,u){o[u]=u===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},e.type="visualMap.piecewise",e}(NX);function BX(t){t.registerComponentModel(gme),t.registerComponentView(mme),zX(t)}function yme(t){Fo(jX),Fo(BX)}var y0=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(n,r){return td(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(n,r,i){var a=this.coordinateSystem;if(a&&a.clampData){var o=a.clampData(n),s=a.dataToPoint(o);if(i)oe(a.getAxes(),function(d,h){if(d.type==="category"&&r!=null){var p=d.getTicksCoords(),g=d.getTickModel().get("alignWithLabel"),v=o[h],m=r[h]==="x1"||r[h]==="y1";if(m&&!g&&(v+=1),p.length<2)return;if(p.length===2){s[h]=d.toGlobalCoord(d.getExtent()[m?1:0]);return}for(var y=void 0,b=void 0,x=1,w=0;w<p.length;w++){var _=p[w].coord,E=w===p.length-1?p[w-1].tickValue+x:p[w].tickValue;if(E===v){b=_;break}else if(E<v)y=_;else if(y!=null&&E>v){b=(_+y)/2;break}w===1&&(x=E-p[0].tickValue)}b==null&&(y?y&&(b=p[p.length-1].coord):b=p[0].coord),s[h]=d.toGlobalCoord(b)}});else{var l=this.getData(),u=l.getLayout("offset"),c=l.getLayout("size"),f=a.getBaseAxis().isHorizontal()?0:1;s[f]+=u+c/2}return s}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(Hi);Hi.registerClass(y0);var bme=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(){return td(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var n=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>n&&(n=r),n},e.prototype.brushSelector=function(n,r,i){return i.rect(r.getItemLayout(n))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Mc(y0.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(y0),xme=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),jN=function(t){ge(e,t);function e(n){var r=t.call(this,n)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new xme},e.prototype.buildPath=function(n,r){var i=r.cx,a=r.cy,o=Math.max(r.r0||0,0),s=Math.max(r.r,0),l=(s-o)*.5,u=o+l,c=r.startAngle,f=r.endAngle,d=r.clockwise,h=Math.PI*2,p=d?f-c<h:c-f<h;p||(c=f-(d?h:-h));var g=Math.cos(c),v=Math.sin(c),m=Math.cos(f),y=Math.sin(f);p?(n.moveTo(g*o+i,v*o+a),n.arc(g*u+i,v*u+a,l,-Math.PI+c,c,!d)):n.moveTo(g*s+i,v*s+a),n.arc(i,a,s,c,f,!d),n.arc(m*u+i,y*u+a,l,f-Math.PI*2,f-Math.PI,!d),o!==0&&n.arc(i,a,o,f,c,d)},e}(xl);function wme(t,e){e=e||{};var n=e.isRoundCap;return function(r,i,a){var o=i.position;if(!o||o instanceof Array)return o5(r,i,a);var s=t(o),l=i.distance!=null?i.distance:5,u=this.shape,c=u.cx,f=u.cy,d=u.r,h=u.r0,p=(d+h)/2,g=u.startAngle,v=u.endAngle,m=(g+v)/2,y=n?Math.abs(d-h)/2:0,b=Math.cos,x=Math.sin,w=c+d*b(g),_=f+d*x(g),E="left",S="top";switch(s){case"startArc":w=c+(h-l)*b(m),_=f+(h-l)*x(m),E="center",S="top";break;case"insideStartArc":w=c+(h+l)*b(m),_=f+(h+l)*x(m),E="center",S="bottom";break;case"startAngle":w=c+p*b(g)+zm(g,l+y,!1),_=f+p*x(g)+jm(g,l+y,!1),E="right",S="middle";break;case"insideStartAngle":w=c+p*b(g)+zm(g,-l+y,!1),_=f+p*x(g)+jm(g,-l+y,!1),E="left",S="middle";break;case"middle":w=c+p*b(m),_=f+p*x(m),E="center",S="middle";break;case"endArc":w=c+(d+l)*b(m),_=f+(d+l)*x(m),E="center",S="bottom";break;case"insideEndArc":w=c+(d-l)*b(m),_=f+(d-l)*x(m),E="center",S="top";break;case"endAngle":w=c+p*b(v)+zm(v,l+y,!0),_=f+p*x(v)+jm(v,l+y,!0),E="left",S="middle";break;case"insideEndAngle":w=c+p*b(v)+zm(v,-l+y,!0),_=f+p*x(v)+jm(v,-l+y,!0),E="right",S="middle";break;default:return o5(r,i,a)}return r=r||{},r.x=w,r.y=_,r.align=E,r.verticalAlign=S,r}}function _me(t,e,n,r){if(_s(r)){t.setTextConfig({rotation:r});return}else if(at(e)){t.setTextConfig({rotation:0});return}var i=t.shape,a=i.clockwise?i.startAngle:i.endAngle,o=i.clockwise?i.endAngle:i.startAngle,s=(a+o)/2,l,u=n(e);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=a;break;case"endAngle":case"insideEndAngle":l=o;break;default:t.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),t.setTextConfig({rotation:c})}function zm(t,e,n){return e*Math.sin(t)*(n?-1:1)}function jm(t,e,n){return e*Math.cos(t)*(n?1:-1)}function cf(t,e,n){var r=t.get("borderRadius");if(r==null)return n?{cornerRadius:0}:null;at(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:gt(r,function(a){return X1(a,i)})}}var fS=Math.max,dS=Math.min;function Sme(t,e){var n=t.getArea&&t.getArea();if(hp(t,"cartesian2d")){var r=t.getBaseAxis();if(r.type!=="category"||!r.onBand){var i=e.getLayout("bandWidth");r.isHorizontal()?(n.x-=i,n.width+=i*2):(n.y-=i,n.height+=i*2)}}return n}var Eme=function(t){ge(e,t);function e(){var n=t.call(this)||this;return n.type=e.type,n._isFirstFrame=!0,n}return e.prototype.render=function(n,r,i,a){this._model=n,this._removeOnRenderedListener(i),this._updateDrawMode(n);var o=n.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(n,r,i):this._renderNormal(n,r,i,a))},e.prototype.incrementalPrepareRender=function(n){this._clear(),this._updateDrawMode(n),this._updateLargeClip(n)},e.prototype.incrementalRender=function(n,r){this._progressiveEls=[],this._incrementalRenderLarge(n,r)},e.prototype.eachRendered=function(n){e2(this._progressiveEls||this.group,n)},e.prototype._updateDrawMode=function(n){var r=n.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(n,r,i,a){var o=this.group,s=n.getData(),l=this._data,u=n.coordinateSystem,c=u.getBaseAxis(),f;u.type==="cartesian2d"?f=c.isHorizontal():u.type==="polar"&&(f=c.dim==="angle");var d=n.isAnimationEnabled()?n:null,h=Ome(n,u);h&&this._enableRealtimeSort(h,s,i);var p=n.get("clip",!0)||h,g=Sme(u,s);o.removeClipPath();var v=n.get("roundCap",!0),m=n.get("showBackground",!0),y=n.getModel("backgroundStyle"),b=y.get("borderRadius")||0,x=[],w=this._backgroundEls,_=a&&a.isInitSort,E=a&&a.type==="changeAxisOrder";function S(T){var I=Bm[u.type](s,T),D=Dme(u,f,I);return D.useStyle(y.getItemStyle()),u.type==="cartesian2d"?D.setShape("r",b):D.setShape("cornerRadius",b),x[T]=D,D}s.diff(l).add(function(T){var I=s.getItemModel(T),D=Bm[u.type](s,T,I);if(m&&S(T),!(!s.hasValue(T)||!WN[u.type](D))){var R=!1;p&&(R=BN[u.type](g,D));var F=$N[u.type](n,s,T,D,f,d,c.model,!1,v);h&&(F.forceLabelAnimation=!0),GN(F,s,T,I,D,n,f,u.type==="polar"),_?F.attr({shape:D}):h?VN(h,d,F,D,T,f,!1,!1):la(F,{shape:D},n,T),s.setItemGraphicEl(T,F),o.add(F),F.ignore=R}}).update(function(T,I){var D=s.getItemModel(T),R=Bm[u.type](s,T,D);if(m){var F=void 0;w.length===0?F=S(I):(F=w[I],F.useStyle(y.getItemStyle()),u.type==="cartesian2d"?F.setShape("r",b):F.setShape("cornerRadius",b),x[T]=F);var z=Bm[u.type](s,T),N=VX(f,z,u);ur(F,{shape:N},d,T)}var L=l.getItemGraphicEl(I);if(!s.hasValue(T)||!WN[u.type](R)){o.remove(L);return}var B=!1;if(p&&(B=BN[u.type](g,R),B&&o.remove(L)),L?hl(L):L=$N[u.type](n,s,T,R,f,d,c.model,!!L,v),h&&(L.forceLabelAnimation=!0),E){var $=L.getTextContent();if($){var G=_he($);G.prevValue!=null&&(G.prevValue=G.value)}}else GN(L,s,T,D,R,n,f,u.type==="polar");_?L.attr({shape:R}):h?VN(h,d,L,R,T,f,!0,E):ur(L,{shape:R},n,T,null),s.setItemGraphicEl(T,L),L.ignore=B,o.add(L)}).remove(function(T){var I=l.getItemGraphicEl(T);I&&K1(I,n,T)}).execute();var O=this._backgroundGroup||(this._backgroundGroup=new pn);O.removeAll();for(var A=0;A<x.length;++A)O.add(x[A]);o.add(O),this._backgroundEls=x,this._data=s},e.prototype._renderLarge=function(n,r,i){this._clear(),YN(n,this.group),this._updateLargeClip(n)},e.prototype._incrementalRenderLarge=function(n,r){this._removeBackground(),YN(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(n){var r=n.get("clip",!0)&&LD(n.coordinateSystem,!1,n),i=this.group;r?i.setClipPath(r):i.removeClipPath()},e.prototype._enableRealtimeSort=function(n,r,i){var a=this;if(r.count()){var o=n.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,n,i),this._isFirstFrame=!1;else{var s=function(l){var u=r.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(o.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){a._updateSortWithinSameData(r,s,o,i)},i.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(n,r,i){var a=[];return n.each(n.mapDimension(r.dim),function(o,s){var l=i(s);l=l??NaN,a.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),a.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:gt(a,function(o){return o.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(n,r,i){for(var a=i.scale,o=n.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,u=a.getOrdinalMeta().categories.length;l<u;++l){var c=n.rawIndexOf(o,a.getRawOrdinalNumber(l)),f=c<0?Number.MIN_VALUE:r(n.indexOfRawIndex(c));if(f>s)return!0;s=f}return!1},e.prototype._isOrderDifferentInView=function(n,r){for(var i=r.scale,a=i.getExtent(),o=Math.max(0,a[0]),s=Math.min(a[1],i.getOrdinalMeta().categories.length-1);o<=s;++o)if(n.ordinalNumbers[o]!==i.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(n,r,i,a){if(this._isOrderChangedWithinSameData(n,r,i)){var o=this._dataSort(n,i,r);this._isOrderDifferentInView(o,i)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(n,r,i){var a=r.baseAxis,o=this._dataSort(n,a,function(s){return n.get(n.mapDimension(r.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:o})},e.prototype.remove=function(n,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(n,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(n){this._onRendered&&(n.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(n){var r=this.group,i=this._data;n&&n.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(a){K1(a,n,Yn(a).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(Yi),BN={cartesian2d:function(t,e){var n=e.width<0?-1:1,r=e.height<0?-1:1;n<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var i=t.x+t.width,a=t.y+t.height,o=fS(e.x,t.x),s=dS(e.x+e.width,i),l=fS(e.y,t.y),u=dS(e.y+e.height,a),c=s<o,f=u<l;return e.x=c&&o>i?s:o,e.y=f&&l>a?u:l,e.width=c?0:s-o,e.height=f?0:u-l,n<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),c||f},polar:function(t,e){var n=e.r0<=e.r?1:-1;if(n<0){var r=e.r;e.r=e.r0,e.r0=r}var i=dS(e.r,t.r),a=fS(e.r0,t.r0);e.r=i,e.r0=a;var o=i-a<0;if(n<0){var r=e.r;e.r=e.r0,e.r0=r}return o}},$N={cartesian2d:function(t,e,n,r,i,a,o,s,l){var u=new Dr({shape:ut({},r),z2:1});if(u.__dataIndex=n,u.name="item",a){var c=u.shape,f=i?"height":"width";c[f]=0}return u},polar:function(t,e,n,r,i,a,o,s,l){var u=!i&&l?jN:Sv,c=new u({shape:r,z2:1});c.name="item";var f=$X(i);if(c.calculateTextPosition=wme(f,{isRoundCap:u===jN}),a){var d=c.shape,h=i?"r":"endAngle",p={};d[h]=i?r.r0:r.startAngle,p[h]=r[h],(s?ur:la)(c,{shape:p},a)}return c}};function Ome(t,e){var n=t.get("realtimeSort",!0),r=e.getBaseAxis();if(n&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function VN(t,e,n,r,i,a,o,s){var l,u;a?(u={x:r.x,width:r.width},l={y:r.y,height:r.height}):(u={y:r.y,height:r.height},l={x:r.x,width:r.width}),s||(o?ur:la)(n,{shape:l},e,i,null);var c=e?t.baseAxis.model:null;(o?ur:la)(n,{shape:u},c,i)}function qN(t,e){for(var n=0;n<e.length;n++)if(!isFinite(t[e[n]]))return!0;return!1}var kme=["x","y","width","height"],Ame=["cx","cy","r","startAngle","endAngle"],WN={cartesian2d:function(t){return!qN(t,kme)},polar:function(t){return!qN(t,Ame)}},Bm={cartesian2d:function(t,e,n){var r=t.getItemLayout(e),i=n?Mme(n,r):0,a=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+a*i/2,y:r.y+o*i/2,width:r.width-a*i,height:r.height-o*i}},polar:function(t,e,n){var r=t.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function Tme(t){return t.startAngle!=null&&t.endAngle!=null&&t.startAngle===t.endAngle}function $X(t){return function(e){var n=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+n;default:return r}}}(t)}function GN(t,e,n,r,i,a,o,s){var l=e.getItemVisual(n,"style");if(s){if(!a.get("roundCap")){var c=t.shape,f=cf(r.getModel("itemStyle"),c,!0);ut(c,f),t.setShape(c)}}else{var u=r.get(["itemStyle","borderRadius"])||0;t.setShape("r",u)}t.useStyle(l);var d=r.getShallow("cursor");d&&t.attr("cursor",d);var h=s?o?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":o?i.height>=0?"bottom":"top":i.width>=0?"right":"left",p=ja(r);so(t,p,{labelFetcher:a,labelDataIndex:n,defaultText:LU(a.getData(),n),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:h});var g=t.getTextContent();if(s&&g){var v=r.get(["label","position"]);t.textConfig.inside=v==="middle"?!0:null,_me(t,v==="outside"?h:v,$X(o),r.get(["label","rotate"]))}She(g,p,a.getRawValue(n),function(y){return Ohe(e,y)});var m=r.getModel(["emphasis"]);ua(t,m.get("focus"),m.get("blurScope"),m.get("disabled")),lo(t,r),Tme(i)&&(t.style.fill="none",t.style.stroke="none",oe(t.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function Mme(t,e){var n=t.get(["itemStyle","borderColor"]);if(!n||n==="none")return 0;var r=t.get(["itemStyle","borderWidth"])||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),a=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,i,a)}var Cme=function(){function t(){}return t}(),HN=function(t){ge(e,t);function e(n){var r=t.call(this,n)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new Cme},e.prototype.buildPath=function(n,r){for(var i=r.points,a=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,c=0;c<i.length;c+=3)l[a]=u,l[o]=i[c+2],s[a]=i[c+a],s[o]=i[c+o],n.rect(s[0],s[1],l[0],l[1])},e}(xl);function YN(t,e,n,r){var i=t.getData(),a=i.getLayout("valueAxisHorizontal")?1:0,o=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=t.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new HN({shape:{points:u},incremental:!!r,silent:!0,z2:0});c.baseDimIdx=a,c.largeDataIndices=o,c.barWidth=s,c.useStyle(l.getItemStyle()),e.add(c),n&&n.push(c)}var f=new HN({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=a,f.largeDataIndices=o,f.barWidth=s,e.add(f),f.useStyle(i.getVisual("style")),Yn(f).seriesIndex=t.seriesIndex,t.get("silent")||(f.on("mousedown",UN),f.on("mousemove",UN)),n&&n.push(f)}var UN=Ehe(function(t){var e=this,n=Pme(e,t.offsetX,t.offsetY);Yn(e).dataIndex=n>=0?n:null},30,!1);function Pme(t,e,n){for(var r=t.baseDimIdx,i=1-r,a=t.shape.points,o=t.largeDataIndices,s=[],l=[],u=t.barWidth,c=0,f=a.length/3;c<f;c++){var d=c*3;if(l[r]=u,l[i]=a[d+2],s[r]=a[d+r],s[i]=a[d+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),e>=s[0]&&e<=s[0]+l[0]&&n>=s[1]&&n<=s[1]+l[1])return o[c]}return-1}function VX(t,e,n){if(hp(n,"cartesian2d")){var r=e,i=n.getArea();return{x:t?r.x:i.x,y:t?i.y:r.y,width:t?r.width:i.width,height:t?i.height:r.height}}else{var i=n.getArea(),a=e;return{cx:i.cx,cy:i.cy,r0:t?i.r0:a.r0,r:t?i.r:a.r,startAngle:t?a.startAngle:0,endAngle:t?a.endAngle:Math.PI*2}}}function Dme(t,e,n){var r=t.type==="polar"?Sv:Dr;return new r({shape:VX(e,n,t),silent:!0,z2:0})}function Ime(t){t.registerChartView(Eme),t.registerSeriesModel(bme),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,Rt(RU,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,NU("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,khe("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,n){var r=e.componentType||"series";n.eachComponent({mainType:r,query:e},function(i){e.sortInfo&&i.axis.setCategorySortInfo(e.sortInfo)})})}var XN=Math.PI*2,$m=Math.PI/180;function qX(t,e){return za(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function WX(t,e){var n=qX(t,e),r=t.get("center"),i=t.get("radius");at(i)||(i=[0,i]);var a=mt(n.width,e.getWidth()),o=mt(n.height,e.getHeight()),s=Math.min(a,o),l=mt(i[0],s/2),u=mt(i[1],s/2),c,f,d=t.coordinateSystem;if(d){var h=d.dataToPoint(r);c=h[0]||0,f=h[1]||0}else at(r)||(r=[r,r]),c=mt(r[0],a)+n.x,f=mt(r[1],o)+n.y;return{cx:c,cy:f,r0:l,r:u}}function Lme(t,e,n){e.eachSeriesByType(t,function(r){var i=r.getData(),a=i.mapDimension("value"),o=qX(r,n),s=WX(r,n),l=s.cx,u=s.cy,c=s.r,f=s.r0,d=-r.get("startAngle")*$m,h=r.get("endAngle"),p=r.get("padAngle")*$m;h=h==="auto"?d-XN:-h*$m;var g=r.get("minAngle")*$m,v=g+p,m=0;i.each(a,function(N){!isNaN(N)&&m++});var y=i.getSum(a),b=Math.PI/(y||m)*2,x=r.get("clockwise"),w=r.get("roseType"),_=r.get("stillShowZeroSum"),E=i.getDataExtent(a);E[0]=0;var S=x?1:-1,O=[d,h],A=S*p/2;Ahe(O,!x),d=O[0],h=O[1];var T=GX(r);T.startAngle=d,T.endAngle=h,T.clockwise=x;var I=Math.abs(h-d),D=I,R=0,F=d;if(i.setLayout({viewRect:o,r:c}),i.each(a,function(N,L){var B;if(isNaN(N)){i.setItemLayout(L,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:x,cx:l,cy:u,r0:f,r:w?NaN:c});return}w!=="area"?B=y===0&&_?b:N*b:B=I/m,B<v?(B=v,D-=v):R+=N;var $=F+S*B,G=0,W=0;p>B?(G=F+S*B/2,W=G):(G=F+A,W=$-A),i.setItemLayout(L,{angle:B,startAngle:G,endAngle:W,clockwise:x,cx:l,cy:u,r0:f,r:w?Kn(N,E,[f,c]):c}),F=$}),D<XN&&m)if(D<=.001){var z=I/m;i.each(a,function(N,L){if(!isNaN(N)){var B=i.getItemLayout(L);B.angle=z;var $=0,G=0;z<p?($=d+S*(L+1/2)*z,G=$):($=d+S*L*z+A,G=d+S*(L+1)*z-A),B.startAngle=$,B.endAngle=G}})}else b=D/R,F=d,i.each(a,function(N,L){if(!isNaN(N)){var B=i.getItemLayout(L),$=B.angle===v?v:N*b,G=0,W=0;$<p?(G=F+S*$/2,W=G):(G=F+A,W=F+S*$-A),B.startAngle=G,B.endAngle=W,F+=S*$}})})}var GX=xa();function kv(t){return{seriesType:t,reset:function(e,n){var r=n.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=e.getData();i.filterSelf(function(a){for(var o=i.getName(a),s=0;s<r.length;s++)if(!r[s].isSelected(o))return!1;return!0})}}}}var Rme=Math.PI/180;function ZN(t,e,n,r,i,a,o,s,l,u){if(t.length<2)return;function c(g){for(var v=g.rB,m=v*v,y=0;y<g.list.length;y++){var b=g.list[y],x=Math.abs(b.label.y-n),w=r+b.len,_=w*w,E=Math.sqrt((1-Math.abs(x*x/m))*_),S=e+(E+b.len2)*i,O=S-b.label.x,A=b.targetTextWidth-O*i;HX(b,A,!0),b.label.x=S}}function f(g){for(var v={list:[],maxY:0},m={list:[],maxY:0},y=0;y<g.length;y++)if(g[y].labelAlignTo==="none"){var b=g[y],x=b.label.y>n?m:v,w=Math.abs(b.label.y-n);if(w>=x.maxY){var _=b.label.x-e-b.len2*i,E=r+b.len,S=Math.abs(_)<E?Math.sqrt(w*w/(1-_*_/E/E)):E;x.rB=S,x.maxY=w}x.list.push(b)}c(v),c(m)}for(var d=t.length,h=0;h<d;h++)if(t[h].position==="outer"&&t[h].labelAlignTo==="labelLine"){var p=t[h].label.x-u;t[h].linePoints[1][0]+=p,t[h].label.x=u}The(t,l,l+o)&&f(t)}function Nme(t,e,n,r,i,a,o,s){for(var l=[],u=[],c=Number.MAX_VALUE,f=-Number.MAX_VALUE,d=0;d<t.length;d++){var h=t[d].label;hS(t[d])||(h.x<e?(c=Math.min(c,h.x),l.push(t[d])):(f=Math.max(f,h.x),u.push(t[d])))}for(var d=0;d<t.length;d++){var p=t[d];if(!hS(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var h=p.label,g=p.linePoints,v=void 0;p.labelAlignTo==="edge"?h.x<e?v=g[2][0]-p.labelDistance-o-p.edgeDistance:v=o+i-p.edgeDistance-g[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?h.x<e?v=c-o-p.bleedMargin:v=o+i-f-p.bleedMargin:h.x<e?v=h.x-o-p.bleedMargin:v=o+i-h.x-p.bleedMargin,p.targetTextWidth=v,HX(p,v)}}ZN(u,e,n,r,1,i,a,o,s,f),ZN(l,e,n,r,-1,i,a,o,s,c);for(var d=0;d<t.length;d++){var p=t[d];if(!hS(p)&&p.linePoints){var h=p.label,g=p.linePoints,m=p.labelAlignTo==="edge",y=h.style.padding,b=y?y[1]+y[3]:0,x=h.style.backgroundColor?0:b,w=p.rect.width+x,_=g[1][0]-g[2][0];m?h.x<e?g[2][0]=o+p.edgeDistance+w+p.labelDistance:g[2][0]=o+i-p.edgeDistance-w-p.labelDistance:(h.x<e?g[2][0]=h.x+p.labelDistance:g[2][0]=h.x-p.labelDistance,g[1][0]=g[2][0]+_),g[1][1]=g[2][1]=h.y}}}function HX(t,e,n){if(n===void 0&&(n=!1),t.labelStyleWidth==null){var r=t.label,i=r.style,a=t.rect,o=i.backgroundColor,s=i.padding,l=s?s[1]+s[3]:0,u=i.overflow,c=a.width+(o?0:l);if(e<c||n){var f=a.height;if(u&&u.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-l);var d=r.getBoundingRect();r.setStyle("width",Math.ceil(d.width)),r.setStyle("backgroundColor",o)}else{var h=e-l,p=e<c?h:n?h>t.unconstrainedWidth?null:h:null;r.setStyle("width",p)}var g=r.getBoundingRect();a.width=g.width;var v=(r.style.margin||0)+2.1;a.height=g.height+v,a.y-=(a.height-f)/2}}}function hS(t){return t.position==="center"}function Fme(t){var e=t.getData(),n=[],r,i,a=!1,o=(t.get("minShowLabelAngle")||0)*Rme,s=e.getLayout("viewRect"),l=e.getLayout("r"),u=s.width,c=s.x,f=s.y,d=s.height;function h(_){_.ignore=!0}function p(_){if(!_.ignore)return!0;for(var E in _.states)if(_.states[E].ignore===!1)return!0;return!1}e.each(function(_){var E=e.getItemGraphicEl(_),S=E.shape,O=E.getTextContent(),A=E.getTextGuideLine(),T=e.getItemModel(_),I=T.getModel("label"),D=I.get("position")||T.get(["emphasis","label","position"]),R=I.get("distanceToLabelLine"),F=I.get("alignTo"),z=mt(I.get("edgeDistance"),u),N=I.get("bleedMargin"),L=T.getModel("labelLine"),B=L.get("length");B=mt(B,u);var $=L.get("length2");if($=mt($,u),Math.abs(S.endAngle-S.startAngle)<o){oe(O.states,h),O.ignore=!0,A&&(oe(A.states,h),A.ignore=!0);return}if(p(O)){var G=(S.startAngle+S.endAngle)/2,W=Math.cos(G),U=Math.sin(G),Y,q,K,J;r=S.cx,i=S.cy;var Q=D==="inside"||D==="inner";if(D==="center")Y=S.cx,q=S.cy,J="center";else{var se=(Q?(S.r+S.r0)/2*W:S.r*W)+r,de=(Q?(S.r+S.r0)/2*U:S.r*U)+i;if(Y=se+W*3,q=de+U*3,!Q){var ye=se+W*(B+l-S.r),_e=de+U*(B+l-S.r),Ee=ye+(W<0?-1:1)*$,ue=_e;F==="edge"?Y=W<0?c+z:c+u-z:Y=Ee+(W<0?-R:R),q=ue,K=[[se,de],[ye,_e],[Ee,ue]]}J=Q?"center":F==="edge"?W>0?"right":"left":W>0?"left":"right"}var he=Math.PI,ke=0,Se=I.get("rotate");if(_s(Se))ke=Se*(he/180);else if(D==="center")ke=0;else if(Se==="radial"||Se===!0){var Me=W<0?-G+he:-G;ke=Me}else if(Se==="tangential"&&D!=="outside"&&D!=="outer"){var Be=Math.atan2(W,U);Be<0&&(Be=he*2+Be);var en=U>0;en&&(Be=he+Be),ke=Be-he}if(a=!!ke,O.x=Y,O.y=q,O.rotation=ke,O.setStyle({verticalAlign:"middle"}),Q){O.setStyle({align:J});var At=O.states.select;At&&(At.x+=O.x,At.y+=O.y)}else{var Ht=O.getBoundingRect().clone();Ht.applyTransform(O.getComputedTransform());var wt=(O.style.margin||0)+2.1;Ht.y-=wt/2,Ht.height+=wt,n.push({label:O,labelLine:A,position:D,len:B,len2:$,minTurnAngle:L.get("minTurnAngle"),maxSurfaceAngle:L.get("maxSurfaceAngle"),surfaceNormal:new mi(W,U),linePoints:K,textAlign:J,labelDistance:R,labelAlignTo:F,edgeDistance:z,bleedMargin:N,rect:Ht,unconstrainedWidth:Ht.width,labelStyleWidth:O.style.width})}E.setTextConfig({inside:Q})}}),!a&&t.get("avoidLabelOverlap")&&Nme(n,r,i,l,u,d,c,f);for(var g=0;g<n.length;g++){var v=n[g],m=v.label,y=v.labelLine,b=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:v.textAlign}),b&&(oe(m.states,h),m.ignore=!0);var x=m.states.select;x&&(x.x+=m.x,x.y+=m.y)}if(y){var w=v.linePoints;b||!w?(oe(y.states,h),y.ignore=!0):(gpe(w,v.minTurnAngle),vpe(w,v.surfaceNormal,v.maxSurfaceAngle),y.setShape({points:w}),m.__hostTarget.textGuideLineConfig={anchor:new mi(w[0][0],w[0][1])})}}}var zme=function(t){ge(e,t);function e(n,r,i){var a=t.call(this)||this;a.z2=2;var o=new Xr;return a.setTextContent(o),a.updateData(n,r,i,!0),a}return e.prototype.updateData=function(n,r,i,a){var o=this,s=n.hostModel,l=n.getItemModel(r),u=l.getModel("emphasis"),c=n.getItemLayout(r),f=ut(cf(l.getModel("itemStyle"),c,!0),c);if(isNaN(f.startAngle)){o.setShape(f);return}if(a){o.setShape(f);var d=s.getShallow("animationType");s.ecModel.ssr?(la(o,{scaleX:0,scaleY:0},s,{dataIndex:r,isFrom:!0}),o.originX=f.cx,o.originY=f.cy):d==="scale"?(o.shape.r=c.r0,la(o,{shape:{r:c.r}},s,r)):i!=null?(o.setShape({startAngle:i,endAngle:i}),la(o,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},s,r)):(o.shape.endAngle=c.startAngle,ur(o,{shape:{endAngle:c.endAngle}},s,r))}else hl(o),ur(o,{shape:f},s,r);o.useStyle(n.getItemVisual(r,"style")),lo(o,l);var h=(c.startAngle+c.endAngle)/2,p=s.get("selectedOffset"),g=Math.cos(h)*p,v=Math.sin(h)*p,m=l.getShallow("cursor");m&&o.attr("cursor",m),this._updateLabel(s,n,r),o.ensureState("emphasis").shape=ut({r:c.r+(u.get("scale")&&u.get("scaleSize")||0)},cf(u.getModel("itemStyle"),c)),ut(o.ensureState("select"),{x:g,y:v,shape:cf(l.getModel(["select","itemStyle"]),c)}),ut(o.ensureState("blur"),{shape:cf(l.getModel(["blur","itemStyle"]),c)});var y=o.getTextGuideLine(),b=o.getTextContent();y&&ut(y.ensureState("select"),{x:g,y:v}),ut(b.ensureState("select"),{x:g,y:v}),ua(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(n,r,i){var a=this,o=r.getItemModel(i),s=o.getModel("labelLine"),l=r.getItemVisual(i,"style"),u=l&&l.fill,c=l&&l.opacity;so(a,ja(o),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:u,defaultOpacity:c,defaultText:n.getFormattedLabel(i,"normal")||r.getName(i)});var f=a.getTextContent();a.setTextConfig({position:null,rotation:null}),f.attr({z2:10});var d=n.get(["label","position"]);if(d!=="outside"&&d!=="outer")a.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new kc,this.setTextGuideLine(h)),qU(this,WU(o),{stroke:u,opacity:Ev(s.get(["lineStyle","opacity"]),c,1)})}},e}(Sv),jme=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ignoreLabelLineUpdate=!0,n}return e.prototype.render=function(n,r,i,a){var o=n.getData(),s=this._data,l=this.group,u;if(!s&&o.count()>0){for(var c=o.getItemLayout(0),f=1;isNaN(c&&c.startAngle)&&f<o.count();++f)c=o.getItemLayout(f);c&&(u=c.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&n.get("showEmptyCircle")){var d=GX(n),h=new Sv({shape:ut(WX(n,i),d)});h.useStyle(n.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=h,l.add(h)}o.diff(s).add(function(p){var g=new zme(o,p,u);o.setItemGraphicEl(p,g),l.add(g)}).update(function(p,g){var v=s.getItemGraphicEl(g);v.updateData(o,p,u),v.off("click"),l.add(v),o.setItemGraphicEl(p,v)}).remove(function(p){var g=s.getItemGraphicEl(p);K1(g,n,p)}).execute(),Fme(n),n.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},e.prototype.dispose=function(){},e.prototype.containPoint=function(n,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var o=n[0]-a.cx,s=n[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},e.type="pie",e}(Yi);function u2(t,e,n){e=at(e)&&{coordDimensions:e}||ut({encodeDefine:t.getEncode()},e);var r=t.getSource(),i=t2(r,e).dimensions,a=new io(i,t);return a.initData(r,n),a}var Av=function(){function t(e,n){this._getDataWithEncodedVisual=e,this._getRawData=n}return t.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},t.prototype.containName=function(e){var n=this._getRawData();return n.indexOfName(e)>=0},t.prototype.indexOfName=function(e){var n=this._getDataWithEncodedVisual();return n.indexOfName(e)},t.prototype.getItemVisual=function(e,n){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,n)},t}(),Bme=xa(),$me=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Av(nt(this.getData,this),nt(this.getRawData,this)),this._defaultLabelLine(n)},e.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return u2(this,{coordDimensions:["value"],encodeDefaulter:Rt(FU,this)})},e.prototype.getDataParams=function(n){var r=this.getData(),i=Bme(r),a=i.seats;if(!a){var o=[];r.each(r.mapDimension("value"),function(l){o.push(l)}),a=i.seats=Mhe(o,r.hostModel.get("percentPrecision"))}var s=t.prototype.getDataParams.call(this,n);return s.percent=a[n]||0,s.$vars.push("percent"),s},e.prototype._defaultLabelLine=function(n){Kx(n,"labelLine",["show"]);var r=n.labelLine,i=n.emphasis.labelLine;r.show=r.show&&n.label.show,i.show=i.show&&n.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(Hi);function Vme(t){return{seriesType:t,reset:function(e,n){var r=e.getData();r.filterSelf(function(i){var a=r.mapDimension("value"),o=r.get(a,i);return!(_s(o)&&!isNaN(o)&&o<0)})}}}function qme(t){t.registerChartView(jme),t.registerSeriesModel($me),Che("pie",t.registerAction),t.registerLayout(Rt(Lme,"pie")),t.registerProcessor(kv("pie")),t.registerProcessor(Vme("pie"))}var Wme=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.getInitialData=function(n,r){return td(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var n=this.option.progressive;return n??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(n,r,i){return i.point(r.getItemLayout(n))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(Hi),YX=4,Gme=function(){function t(){}return t}(),Hme=function(t){ge(e,t);function e(n){var r=t.call(this,n)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.getDefaultShape=function(){return new Gme},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(n,r){var i=r.points,a=r.size,o=this.symbolProxy,s=o.shape,l=n.getContext?n.getContext():n,u=l&&a[0]<YX,c=this.softClipShape,f;if(u){this._ctx=l;return}for(this._ctx=null,f=this._off;f<i.length;){var d=i[f++],h=i[f++];isNaN(d)||isNaN(h)||c&&!c.contain(d,h)||(s.x=d-a[0]/2,s.y=h-a[1]/2,s.width=a[0],s.height=a[1],o.buildPath(n,s,!0))}this.incremental&&(this._off=f,this.notClear=!0)},e.prototype.afterBrush=function(){var n=this.shape,r=n.points,i=n.size,a=this._ctx,o=this.softClipShape,s;if(a){for(s=this._off;s<r.length;){var l=r[s++],u=r[s++];isNaN(l)||isNaN(u)||o&&!o.contain(l,u)||a.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},e.prototype.findDataIndex=function(n,r){for(var i=this.shape,a=i.points,o=i.size,s=Math.max(o[0],4),l=Math.max(o[1],4),u=a.length/2-1;u>=0;u--){var c=u*2,f=a[c]-s/2,d=a[c+1]-l/2;if(n>=f&&r>=d&&n<=f+s&&r<=d+l)return u}return-1},e.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();if(n=i[0],r=i[1],a.contain(n,r)){var o=this.hoverDataIdx=this.findDataIndex(n,r);return o>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var r=this.shape,i=r.points,a=r.size,o=a[0],s=a[1],l=1/0,u=1/0,c=-1/0,f=-1/0,d=0;d<i.length;){var h=i[d++],p=i[d++];l=Math.min(h,l),c=Math.max(h,c),u=Math.min(p,u),f=Math.max(p,f)}n=this._rect=new ro(l-o/2,u-s/2,c-l+o,f-u+s)}return n},e}(xl),Yme=function(){function t(){this.group=new pn}return t.prototype.updateData=function(e,n){this._clear();var r=this._create();r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,n)},t.prototype.updateLayout=function(e){var n=e.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var i=(r.endIndex-r.startIndex)*2,a=r.startIndex*4*2;n=new Float32Array(n.buffer,a,i)}r.setShape("points",n),r.reset()})},t.prototype.incrementalPrepareUpdate=function(e){this._clear()},t.prototype.incrementalUpdate=function(e,n,r){var i=this._newAdded[0],a=n.getLayout("points"),o=i&&i.shape.points;if(o&&o.length<2e4){var s=o.length,l=new Float32Array(s+a.length);l.set(o),l.set(a,s),i.endIndex=e.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=e.start,u.endIndex=e.end,u.incremental=!0,u.setShape({points:a}),this._setCommon(u,n,r)}},t.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},t.prototype._create=function(){var e=new Hme({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},t.prototype._setCommon=function(e,n,r){var i=n.hostModel;r=r||{};var a=n.getVisual("symbolSize");e.setShape("size",a instanceof Array?a:[a,a]),e.softClipShape=r.clipShape||null,e.symbolProxy=zo(n.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var o=e.shape.size[0]<YX;e.useStyle(i.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=n.getVisual("style"),l=s&&s.fill;l&&e.setColor(l);var u=Yn(e);u.seriesIndex=i.seriesIndex,e.on("mousemove",function(c){u.dataIndex=null;var f=e.hoverDataIdx;f>=0&&(u.dataIndex=f+(e.startIndex||0))})},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),Ume=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=n.getData(),o=this._updateSymbolDraw(a,n);o.updateData(a,{clipShape:this._getClipShape(n)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(n,r,i){var a=n.getData(),o=this._updateSymbolDraw(a,n);o.incrementalPrepareUpdate(a),this._finished=!1},e.prototype.incrementalRender=function(n,r,i){this._symbolDraw.incrementalUpdate(n,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=n.end===r.getData().count()},e.prototype.updateTransform=function(n,r,i){var a=n.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var o=n2("").reset(n,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},e.prototype.eachRendered=function(n){this._symbolDraw&&this._symbolDraw.eachRendered(n)},e.prototype._getClipShape=function(n){if(n.get("clip",!0)){var r=n.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},e.prototype._updateSymbolDraw=function(n,r){var i=this._symbolDraw,a=r.pipelineContext,o=a.large;return(!i||o!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=o?new Yme:new Jx,this._isLargeDraw=o,this.group.removeAll()),this.group.add(i.group),i},e.prototype.remove=function(n,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(Yi);function Xme(t){Fo(Phe),t.registerSeriesModel(Wme),t.registerChartView(Ume),t.registerLayout(n2("scatter"))}function Zme(t){t.eachSeriesByType("radar",function(e){var n=e.getData(),r=[],i=e.coordinateSystem;if(i){var a=i.getIndicatorAxes();oe(a,function(o,s){n.each(n.mapDimension(a[s].dim),function(l,u){r[u]=r[u]||[];var c=i.dataToPoint(l,s);r[u][s]=KN(c)?c:JN(i)})}),n.each(function(o){var s=Dhe(r[o],function(l){return KN(l)})||JN(i);r[o].push(s.slice()),n.setItemLayout(o,r[o])})}})}function KN(t){return!isNaN(t[0])&&!isNaN(t[1])}function JN(t){return[t.cx,t.cy]}function Kme(t){var e=t.polar;if(e){at(e)||(e=[e]);var n=[];oe(e,function(r,i){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),t.radar=t.radar||[],at(t.radar)||(t.radar=[t.radar]),t.radar.push(r)):n.push(r)}),t.polar=n}oe(t.series,function(r){r&&r.type==="radar"&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var Jme=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=n.coordinateSystem,o=this.group,s=n.getData(),l=this._data;function u(d,h){var p=d.getItemVisual(h,"symbol")||"circle";if(p!=="none"){var g=xv(d.getItemVisual(h,"symbolSize")),v=zo(p,-1,-1,2,2),m=d.getItemVisual(h,"symbolRotate")||0;return v.attr({style:{strokeNoScale:!0},z2:100,scaleX:g[0]/2,scaleY:g[1]/2,rotation:m*Math.PI/180||0}),v}}function c(d,h,p,g,v,m){p.removeAll();for(var y=0;y<h.length-1;y++){var b=u(g,v);b&&(b.__dimIdx=y,d[y]?(b.setPosition(d[y]),r2[m?"initProps":"updateProps"](b,{x:h[y][0],y:h[y][1]},n,v)):b.setPosition(h[y]),p.add(b))}}function f(d){return gt(d,function(h){return[a.cx,a.cy]})}s.diff(l).add(function(d){var h=s.getItemLayout(d);if(h){var p=new tu,g=new kc,v={shape:{points:h}};p.shape.points=f(h),g.shape.points=f(h),la(p,v,n,d),la(g,v,n,d);var m=new pn,y=new pn;m.add(g),m.add(p),m.add(y),c(g.shape.points,h,y,s,d,!0),s.setItemGraphicEl(d,m)}}).update(function(d,h){var p=l.getItemGraphicEl(h),g=p.childAt(0),v=p.childAt(1),m=p.childAt(2),y={shape:{points:s.getItemLayout(d)}};y.shape.points&&(c(g.shape.points,y.shape.points,m,s,d,!1),hl(v),hl(g),ur(g,y,n),ur(v,y,n),s.setItemGraphicEl(d,p))}).remove(function(d){o.remove(l.getItemGraphicEl(d))}).execute(),s.eachItemGraphicEl(function(d,h){var p=s.getItemModel(h),g=d.childAt(0),v=d.childAt(1),m=d.childAt(2),y=s.getItemVisual(h,"style"),b=y.fill;o.add(d),g.useStyle(Ci(p.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:b})),lo(g,p,"lineStyle"),lo(v,p,"areaStyle");var x=p.getModel("areaStyle"),w=x.isEmpty()&&x.parentModel.isEmpty();v.ignore=w,oe(["emphasis","select","blur"],function(S){var O=p.getModel([S,"areaStyle"]),A=O.isEmpty()&&O.parentModel.isEmpty();v.ensureState(S).ignore=A&&w}),v.useStyle(Ci(x.getAreaStyle(),{fill:b,opacity:.7,decal:y.decal}));var _=p.getModel("emphasis"),E=_.getModel("itemStyle").getItemStyle();m.eachChild(function(S){if(S instanceof bv){var O=S.style;S.useStyle(ut({image:O.image,x:O.x,y:O.y,width:O.width,height:O.height},y))}else S.useStyle(y),S.setColor(b),S.style.strokeNoScale=!0;var A=S.ensureState("emphasis");A.style=En(E);var T=s.getStore().get(s.getDimensionIndex(S.__dimIdx),h);(T==null||isNaN(T))&&(T=""),so(S,ja(p),{labelFetcher:s.hostModel,labelDataIndex:h,labelDimIndex:S.__dimIdx,defaultText:T,inheritColor:b,defaultOpacity:y.opacity})}),ua(d,_.get("focus"),_.get("blurScope"),_.get("disabled"))}),this._data=s},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(Yi),Qme=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Av(nt(this.getData,this),nt(this.getRawData,this))},e.prototype.getInitialData=function(n,r){return u2(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(n,r,i){var a=this.getData(),o=this.coordinateSystem,s=o.getIndicatorAxes(),l=this.getData().getName(n),u=l===""?this.name:l,c=Ihe(this,n);return Ss("section",{header:u,sortBlocks:!0,blocks:gt(s,function(f){var d=a.get(a.mapDimension(f.dim),n);return Ss("nameValue",{markerType:"subItem",markerColor:c,name:f.name,value:d,sortParam:d})})})},e.prototype.getTooltipPosition=function(n){if(n!=null){for(var r=this.getData(),i=this.coordinateSystem,a=r.getValues(gt(i.dimensions,function(u){return r.mapDimension(u)}),n),o=0,s=a.length;o<s;o++)if(!isNaN(a[o])){var l=i.getIndicatorAxes();return i.coordToPoint(l[o].dataToCoord(a[o]),o)}}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(Hi);function eye(t){Fo(Spe),t.registerChartView(Jme),t.registerSeriesModel(Qme),t.registerLayout(Zme),t.registerProcessor(kv("radar")),t.registerPreprocessor(Kme)}function tye(t){var e=t;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var n=[e],r,i;r=n.pop();)if(i=r.children,r.isExpand&&i.length)for(var a=i.length,o=a-1;o>=0;o--){var s=i[o];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},n.push(s)}}function nye(t,e){var n=t.isExpand?t.children:[],r=t.parentNode.children,i=t.hierNode.i?r[t.hierNode.i-1]:null;if(n.length){aye(t);var a=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;i?(t.hierNode.prelim=i.hierNode.prelim+e(t,i),t.hierNode.modifier=t.hierNode.prelim-a):t.hierNode.prelim=a}else i&&(t.hierNode.prelim=i.hierNode.prelim+e(t,i));t.parentNode.hierNode.defaultAncestor=oye(t,i,t.parentNode.hierNode.defaultAncestor||r[0],e)}function rye(t){var e=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:e},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function QN(t){return arguments.length?t:uye}function vg(t,e){return t-=Math.PI/2,{x:e*Math.cos(t),y:e*Math.sin(t)}}function iye(t,e){return za(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function aye(t){for(var e=t.children,n=e.length,r=0,i=0;--n>=0;){var a=e[n];a.hierNode.prelim+=r,a.hierNode.modifier+=r,i+=a.hierNode.change,r+=a.hierNode.shift+i}}function oye(t,e,n,r){if(e){for(var i=t,a=t,o=a.parentNode.children[0],s=e,l=i.hierNode.modifier,u=a.hierNode.modifier,c=o.hierNode.modifier,f=s.hierNode.modifier;s=pS(s),a=gS(a),s&&a;){i=pS(i),o=gS(o),i.hierNode.ancestor=t;var d=s.hierNode.prelim+f-a.hierNode.prelim-u+r(s,a);d>0&&(lye(sye(s,t,n),t,d),u+=d,l+=d),f+=s.hierNode.modifier,u+=a.hierNode.modifier,l+=i.hierNode.modifier,c+=o.hierNode.modifier}s&&!pS(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=f-l),a&&!gS(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=u-c,n=t)}return n}function pS(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function gS(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function sye(t,e,n){return t.hierNode.ancestor.parentNode===e.parentNode?t.hierNode.ancestor:n}function lye(t,e,n){var r=n/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=r,e.hierNode.shift+=n,e.hierNode.modifier+=n,e.hierNode.prelim+=n,t.hierNode.change+=r}function uye(t,e){return t.parentNode===e.parentNode?1:2}var cye=function(){function t(){this.parentPoint=[],this.childPoints=[]}return t}(),fye=function(t){ge(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new cye},e.prototype.buildPath=function(n,r){var i=r.childPoints,a=i.length,o=r.parentPoint,s=i[0],l=i[a-1];if(a===1){n.moveTo(o[0],o[1]),n.lineTo(s[0],s[1]);return}var u=r.orient,c=u==="TB"||u==="BT"?0:1,f=1-c,d=mt(r.forkPosition,1),h=[];h[c]=o[c],h[f]=o[f]+(l[f]-o[f])*d,n.moveTo(o[0],o[1]),n.lineTo(h[0],h[1]),n.moveTo(s[0],s[1]),h[c]=s[c],n.lineTo(h[0],h[1]),h[c]=l[c],n.lineTo(h[0],h[1]),n.lineTo(l[0],l[1]);for(var p=1;p<a-1;p++){var g=i[p];n.moveTo(g[0],g[1]),h[c]=g[c],n.lineTo(h[0],h[1])}},e}(xl),dye=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._mainGroup=new pn,n}return e.prototype.init=function(n,r){this._controller=new o2(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(n,r,i){var a=n.getData(),o=n.layoutInfo,s=this._mainGroup,l=n.get("layout");l==="radial"?(s.x=o.x+o.width/2,s.y=o.y+o.height/2):(s.x=o.x,s.y=o.y),this._updateViewCoordSys(n,i),this._updateController(n,r,i);var u=this._data;a.diff(u).add(function(c){e8(a,c)&&t8(a,c,null,s,n)}).update(function(c,f){var d=u.getItemGraphicEl(f);if(!e8(a,c)){d&&r8(u,f,d,s,n);return}t8(a,c,d,s,n)}).remove(function(c){var f=u.getItemGraphicEl(c);f&&r8(u,c,f,s,n)}).execute(),this._nodeScaleRatio=n.get("nodeScaleRatio"),this._updateNodeAndLinkScale(n),n.get("expandAndCollapse")===!0&&a.eachItemGraphicEl(function(c,f){c.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:n.id,dataIndex:f})})}),this._data=a},e.prototype._updateViewCoordSys=function(n,r){var i=n.getData(),a=[];i.each(function(f){var d=i.getItemLayout(f);d&&!isNaN(d.x)&&!isNaN(d.y)&&a.push([+d.x,+d.y])});var o=[],s=[];zU(a,o,s);var l=this._min,u=this._max;s[0]-o[0]===0&&(o[0]=l?l[0]:o[0]-1,s[0]=u?u[0]:s[0]+1),s[1]-o[1]===0&&(o[1]=l?l[1]:o[1]-1,s[1]=u?u[1]:s[1]+1);var c=n.coordinateSystem=new ND;c.zoomLimit=n.get("scaleLimit"),c.setBoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]),c.setCenter(n.get("center"),r),c.setZoom(n.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=o,this._max=s},e.prototype._updateController=function(n,r,i){var a=this,o=this._controller,s=this._controllerHost,l=this.group;o.setPointerChecker(function(u,c,f){var d=l.getBoundingRect();return d.applyTransform(l.transform),d.contain(c,f)&&!zD(u,i,n)}),o.enable(n.get("roam")),s.zoomLimit=n.get("scaleLimit"),s.zoom=n.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){YU(s,u.dx,u.dy),i.dispatchAction({seriesId:n.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){UU(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:n.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),a._updateNodeAndLinkScale(n),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(n){var r=n.getData(),i=this._getNodeGlobalScale(n);r.eachItemGraphicEl(function(a,o){a.setSymbolScale(i)})},e.prototype._getNodeGlobalScale=function(n){var r=n.coordinateSystem;if(r.type!=="view")return 1;var i=this._nodeScaleRatio,a=r.scaleX||1,o=r.getZoom(),s=(o-1)*i+1;return s/a},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(Yi);function e8(t,e){var n=t.getItemLayout(e);return n&&!isNaN(n.x)&&!isNaN(n.y)}function t8(t,e,n,r,i){var a=!n,o=t.tree.getNodeByDataIndex(e),s=o.getModel(),l=o.getVisual("style").fill,u=o.isExpand===!1&&o.children.length!==0?l:"#fff",c=t.tree.root,f=o.parentNode===c?o:o.parentNode||o,d=t.getItemGraphicEl(f.dataIndex),h=f.getLayout(),p=d?{x:d.__oldX,y:d.__oldY,rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:h,g=o.getLayout();a?(n=new jU(t,e,null,{symbolInnerColor:u,useNameLabel:!0}),n.x=p.x,n.y=p.y):n.updateData(t,e,null,{symbolInnerColor:u,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=g.rawX,n.__radialRawY=g.rawY,r.add(n),t.setItemGraphicEl(e,n),n.__oldX=n.x,n.__oldY=n.y,ur(n,{x:g.x,y:g.y},i);var v=n.getSymbolPath();if(i.get("layout")==="radial"){var m=c.children[0],y=m.getLayout(),b=m.children.length,x=void 0,w=void 0;if(g.x===y.x&&o.isExpand===!0&&m.children.length){var _={x:(m.children[0].getLayout().x+m.children[b-1].getLayout().x)/2,y:(m.children[0].getLayout().y+m.children[b-1].getLayout().y)/2};x=Math.atan2(_.y-y.y,_.x-y.x),x<0&&(x=Math.PI*2+x),w=_.x<y.x,w&&(x=x-Math.PI)}else x=Math.atan2(g.y-y.y,g.x-y.x),x<0&&(x=Math.PI*2+x),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(w=g.x<y.x,w&&(x=x-Math.PI)):(w=g.x>y.x,w||(x=x-Math.PI));var E=w?"left":"right",S=s.getModel("label"),O=S.get("rotate"),A=O*(Math.PI/180),T=v.getTextContent();T&&(v.setTextConfig({position:S.get("position")||E,rotation:O==null?-x:A,origin:"center"}),T.setStyle("verticalAlign","middle"))}var I=s.get(["emphasis","focus"]),D=I==="relative"?Lhe(o.getAncestorsIndices(),o.getDescendantIndices()):I==="ancestor"?o.getAncestorsIndices():I==="descendant"?o.getDescendantIndices():null;D&&(Yn(n).focus=D),hye(i,o,c,n,p,h,g,r),n.__edge&&(n.onHoverStateChange=function(R){if(R!=="blur"){var F=o.parentNode&&t.getItemGraphicEl(o.parentNode.dataIndex);F&&F.hoverState===Rhe||Nhe(n.__edge,R)}})}function hye(t,e,n,r,i,a,o,s){var l=e.getModel(),u=t.get("edgeShape"),c=t.get("layout"),f=t.getOrient(),d=t.get(["lineStyle","curveness"]),h=t.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),g=r.__edge;if(u==="curve")e.parentNode&&e.parentNode!==n&&(g||(g=r.__edge=new CU({shape:YC(c,f,d,i,i)})),ur(g,{shape:YC(c,f,d,a,o)},t));else if(u==="polyline"&&c==="orthogonal"&&e!==n&&e.children&&e.children.length!==0&&e.isExpand===!0){for(var v=e.children,m=[],y=0;y<v.length;y++){var b=v[y].getLayout();m.push([b.x,b.y])}g||(g=r.__edge=new fye({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:f,forkPosition:h}})),ur(g,{shape:{parentPoint:[o.x,o.y],childPoints:m}},t)}g&&!(u==="polyline"&&!e.isExpand)&&(g.useStyle(Ci({strokeNoScale:!0,fill:null},p)),lo(g,l,"lineStyle"),_C(g),s.add(g))}function n8(t,e,n,r,i){var a=e.tree.root,o=UX(a,t),s=o.source,l=o.sourceLayout,u=e.getItemGraphicEl(t.dataIndex);if(u){var c=e.getItemGraphicEl(s.dataIndex),f=c.__edge,d=u.__edge||(s.isExpand===!1||s.children.length===1?f:void 0),h=r.get("edgeShape"),p=r.get("layout"),g=r.get("orient"),v=r.get(["lineStyle","curveness"]);d&&(h==="curve"?J1(d,{shape:YC(p,g,v,l,l),style:{opacity:0}},r,{cb:function(){n.remove(d)},removeOpt:i}):h==="polyline"&&r.get("layout")==="orthogonal"&&J1(d,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},r,{cb:function(){n.remove(d)},removeOpt:i}))}}function UX(t,e){for(var n=e.parentNode===t?e:e.parentNode||e,r;r=n.getLayout(),r==null;)n=n.parentNode===t?n:n.parentNode||n;return{source:n,sourceLayout:r}}function r8(t,e,n,r,i){var a=t.tree.getNodeByDataIndex(e),o=t.tree.root,s=UX(o,a).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};J1(n,{x:s.x+1,y:s.y+1},i,{cb:function(){r.remove(n),t.setItemGraphicEl(e,null)},removeOpt:l}),n.fadeOut(null,t.hostModel,{fadeLabel:!0,animation:l}),a.children.forEach(function(u){n8(u,t,r,i,l)}),n8(a,t,r,i,l)}function YC(t,e,n,r,i){var a,o,s,l,u,c,f,d;if(t==="radial"){u=r.rawX,f=r.rawY,c=i.rawX,d=i.rawY;var h=vg(u,f),p=vg(u,f+(d-f)*n),g=vg(c,d+(f-d)*n),v=vg(c,d);return{x1:h.x||0,y1:h.y||0,x2:v.x||0,y2:v.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:g.x||0,cpy2:g.y||0}}else u=r.x,f=r.y,c=i.x,d=i.y,(e==="LR"||e==="RL")&&(a=u+(c-u)*n,o=f,s=c+(u-c)*n,l=d),(e==="TB"||e==="BT")&&(a=u,o=f+(d-f)*n,s=c,l=d+(f-d)*n);return{x1:u,y1:f,x2:c,y2:d,cpx1:a,cpy1:o,cpx2:s,cpy2:l}}var Lo=xa();function XX(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,ZX(e,n,t),oe(n,function(r){oe(e.TRANSFERABLE_METHODS,function(i){r.wrapMethod(i,Rt(pye,t))})}),e.wrapMethod("cloneShallow",Rt(vye,t)),oe(e.CHANGABLE_METHODS,function(r){e.wrapMethod(r,Rt(gye,t))}),kU(n[e.dataType]===e)}function pye(t,e){if(bye(this)){var n=ut({},Lo(this).datas);n[this.dataType]=e,ZX(e,n,t)}else nI(e,this.dataType,Lo(this).mainData,t);return e}function gye(t,e){return t.struct&&t.struct.update(),e}function vye(t,e){return oe(Lo(e).datas,function(n,r){n!==e&&nI(n.cloneShallow(),r,e,t)}),e}function mye(t){var e=Lo(this).mainData;return t==null||e==null?e:Lo(e).datas[t]}function yye(){var t=Lo(this).mainData;return t==null?[{data:t}]:gt(Tc(Lo(t).datas),function(e){return{type:e,data:Lo(t).datas[e]}})}function bye(t){return Lo(t).mainData===t}function ZX(t,e,n){Lo(t).datas={},oe(e,function(r,i){nI(r,i,t,n)})}function nI(t,e,n,r){Lo(n).datas[e]=t,Lo(t).mainData=n,t.dataType=e,r.struct&&(t[r.structAttr]=r.struct,r.struct[r.datasAttr[e]]=t),t.getLinkedData=mye,t.getLinkedDataAll=yye}var xye=function(){function t(e,n){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=n}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(e,n,r){Tr(e)&&(r=n,n=e,e=null),e=e||{},xr(e)&&(e={order:e});var i=e.order||"preorder",a=this[e.attr||"children"],o;i==="preorder"&&(o=n.call(r,this));for(var s=0;!o&&s<a.length;s++)a[s].eachNode(e,n,r);i==="postorder"&&n.call(r,this)},t.prototype.updateDepthAndHeight=function(e){var n=0;this.depth=e;for(var r=0;r<this.children.length;r++){var i=this.children[r];i.updateDepthAndHeight(e+1),i.height>n&&(n=i.height)}this.height=n+1},t.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var n=0,r=this.children,i=r.length;n<i;n++){var a=r[n].getNodeById(e);if(a)return a}},t.prototype.contains=function(e){if(e===this)return!0;for(var n=0,r=this.children,i=r.length;n<i;n++){var a=r[n].contains(e);if(a)return a}},t.prototype.getAncestors=function(e){for(var n=[],r=e?this:this.parentNode;r;)n.push(r),r=r.parentNode;return n.reverse(),n},t.prototype.getAncestorsIndices=function(){for(var e=[],n=this;n;)e.push(n.dataIndex),n=n.parentNode;return e.reverse(),e},t.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(n){e.push(n.dataIndex)}),e},t.prototype.getValue=function(e){var n=this.hostTree.data;return n.getStore().get(n.getDimensionIndex(e||"value"),this.dataIndex)},t.prototype.setLayout=function(e,n){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,n)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var n=this.hostTree,r=n.data.getItemModel(this.dataIndex);return r.getModel(e)}},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(e,n){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,n)},t.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,n=0;n<e.length;++n)if(e[n]===this)return n;return-1}return-1},t.prototype.isAncestorOf=function(e){for(var n=e.parentNode;n;){if(n===this)return!0;n=n.parentNode}return!1},t.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},t}(),rI=function(){function t(e){this.type="tree",this._nodes=[],this.hostModel=e}return t.prototype.eachNode=function(e,n,r){this.root.eachNode(e,n,r)},t.prototype.getNodeByDataIndex=function(e){var n=this.data.getRawIndex(e);return this._nodes[n]},t.prototype.getNodeById=function(e){return this.root.getNodeById(e)},t.prototype.update=function(){for(var e=this.data,n=this._nodes,r=0,i=n.length;r<i;r++)n[r].dataIndex=-1;for(var r=0,i=e.count();r<i;r++)n[e.getRawIndex(r)].dataIndex=r},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(e,n,r){var i=new t(n),a=[],o=1;s(e);function s(c,f){var d=c.value;o=Math.max(o,at(d)?d.length:1),a.push(c);var h=new xye(Yl(c.name,""),i);f?wye(h,f):i.root=h,i._nodes.push(h);var p=c.children;if(p)for(var g=0;g<p.length;g++)s(p[g],h)}i.root.updateDepthAndHeight(0);var l=t2(a,{coordDimensions:["value"],dimensionsCount:o}).dimensions,u=new io(l,n);return u.initData(a),r&&r(u),XX({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},t}();function wye(t,e){var n=e.children;t.parentNode!==e&&(n.push(t),t.parentNode=e)}function b0(t,e,n){if(t&&ai(e,t.type)>=0){var r=n.getData().tree.root,i=t.targetNode;if(xr(i)&&(i=r.getNodeById(i)),i&&r.contains(i))return{node:i};var a=t.targetNodeId;if(a!=null&&(i=r.getNodeById(a)))return{node:i}}}function KX(t){for(var e=[];t;)t=t.parentNode,t&&e.push(t);return e.reverse()}function iI(t,e){var n=KX(t);return ai(n,e)>=0}function c2(t,e){for(var n=[];t;){var r=t.dataIndex;n.push({name:t.name,dataIndex:r,value:e.getRawValue(r)}),t=t.parentNode}return n.reverse(),n}var _ye=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.hasSymbolVisual=!0,n.ignoreStyleOnData=!0,n}return e.prototype.getInitialData=function(n){var r={name:n.name,children:n.data},i=n.leaves||{},a=new ws(i,this,this.ecModel),o=rI.createTree(r,this,s);function s(f){f.wrapMethod("getItemModel",function(d,h){var p=o.getNodeByDataIndex(h);return p&&p.children.length&&p.isExpand||(d.parentModel=a),d})}var l=0;o.eachNode("preorder",function(f){f.depth>l&&(l=f.depth)});var u=n.expandAndCollapse,c=u&&n.initialTreeDepth>=0?n.initialTreeDepth:l;return o.root.eachNode("preorder",function(f){var d=f.hostTree.data.getRawDataItem(f.dataIndex);f.isExpand=d&&d.collapsed!=null?!d.collapsed:f.depth<=c}),o.data},e.prototype.getOrient=function(){var n=this.get("orient");return n==="horizontal"?n="LR":n==="vertical"&&(n="TB"),n},e.prototype.setZoom=function(n){this.option.zoom=n},e.prototype.setCenter=function(n){this.option.center=n},e.prototype.formatTooltip=function(n,r,i){for(var a=this.getData().tree,o=a.root.children[0],s=a.getNodeByDataIndex(n),l=s.getValue(),u=s.name;s&&s!==o;)u=s.parentNode.name+"."+u,s=s.parentNode;return Ss("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},e.prototype.getDataParams=function(n){var r=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(n);return r.treeAncestors=c2(i,this),r.collapsed=!i.isExpand,r},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(Hi);function Sye(t,e,n){for(var r=[t],i=[],a;a=r.pop();)if(i.push(a),a.isExpand){var o=a.children;if(o.length)for(var s=0;s<o.length;s++)r.push(o[s])}for(;a=i.pop();)e(a,n)}function Up(t,e){for(var n=[t],r;r=n.pop();)if(e(r),r.isExpand){var i=r.children;if(i.length)for(var a=i.length-1;a>=0;a--)n.push(i[a])}}function Eye(t,e){t.eachSeriesByType("tree",function(n){Oye(n,e)})}function Oye(t,e){var n=iye(t,e);t.layoutInfo=n;var r=t.get("layout"),i=0,a=0,o=null;r==="radial"?(i=2*Math.PI,a=Math.min(n.height,n.width)/2,o=QN(function(b,x){return(b.parentNode===x.parentNode?1:2)/b.depth})):(i=n.width,a=n.height,o=QN());var s=t.getData().tree.root,l=s.children[0];if(l){tye(s),Sye(l,nye,o),s.hierNode.modifier=-l.hierNode.prelim,Up(l,rye);var u=l,c=l,f=l;Up(l,function(b){var x=b.getLayout().x;x<u.getLayout().x&&(u=b),x>c.getLayout().x&&(c=b),b.depth>f.depth&&(f=b)});var d=u===c?1:o(u,c)/2,h=d-u.getLayout().x,p=0,g=0,v=0,m=0;if(r==="radial")p=i/(c.getLayout().x+d+h),g=a/(f.depth-1||1),Up(l,function(b){v=(b.getLayout().x+h)*p,m=(b.depth-1)*g;var x=vg(v,m);b.setLayout({x:x.x,y:x.y,rawX:v,rawY:m},!0)});else{var y=t.getOrient();y==="RL"||y==="LR"?(g=a/(c.getLayout().x+d+h),p=i/(f.depth-1||1),Up(l,function(b){m=(b.getLayout().x+h)*g,v=y==="LR"?(b.depth-1)*p:i-(b.depth-1)*p,b.setLayout({x:v,y:m},!0)})):(y==="TB"||y==="BT")&&(p=i/(c.getLayout().x+d+h),g=a/(f.depth-1||1),Up(l,function(b){v=(b.getLayout().x+h)*p,m=y==="TB"?(b.depth-1)*g:a-(b.depth-1)*g,b.setLayout({x:v,y:m},!0)}))}}}function kye(t){t.eachSeriesByType("tree",function(e){var n=e.getData(),r=n.tree;r.eachNode(function(i){var a=i.getModel(),o=a.getModel("itemStyle").getItemStyle(),s=n.ensureUniqueItemVisual(i.dataIndex,"style");ut(s,o)})})}function Aye(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,n){n.eachComponent({mainType:"series",subType:"tree",query:e},function(r){var i=e.dataIndex,a=r.getData().tree,o=a.getNodeByDataIndex(i);o.isExpand=!o.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,n,r){n.eachComponent({mainType:"series",subType:"tree",query:e},function(i){var a=i.coordinateSystem,o=GU(a,e,void 0,r);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}function Tye(t){t.registerChartView(dye),t.registerSeriesModel(_ye),t.registerLayout(Eye),t.registerVisual(kye),Aye(t)}var i8=["treemapZoomToNode","treemapRender","treemapMove"];function Mye(t){for(var e=0;e<i8.length;e++)t.registerAction({type:i8[e],update:"updateView"},Df);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(n,r){r.eachComponent({mainType:"series",subType:"treemap",query:n},i);function i(a,o){var s=["treemapZoomToNode","treemapRootToNode"],l=b0(n,s,a);if(l){var u=a.getViewRoot();u&&(n.direction=iI(u,l.node)?"rollUp":"drillDown"),a.resetViewRoot(l.node)}}})}function JX(t){var e=t.getData(),n=e.tree,r={};n.eachNode(function(i){for(var a=i;a&&a.depth>1;)a=a.parentNode;var o=Fhe(t.ecModel,a.name||a.dataIndex+"",r);i.setVisual("decal",o)})}var Cye=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.preventUsingHoverLayer=!0,n}return e.prototype.getInitialData=function(n,r){var i={name:n.name,children:n.data};QX(i);var a=n.levels||[],o=this.designatedVisualItemStyle={},s=new ws({itemStyle:o},this,r);a=n.levels=Pye(a,r);var l=gt(a||[],function(f){return new ws(f,s,r)},this),u=rI.createTree(i,this,c);function c(f){f.wrapMethod("getItemModel",function(d,h){var p=u.getNodeByDataIndex(h),g=p?l[p.depth]:null;return d.parentModel=g||s,d})}return u.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(n,r,i){var a=this.getData(),o=this.getRawValue(n),s=a.getName(n);return Ss("nameValue",{name:s,value:o})},e.prototype.getDataParams=function(n){var r=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(n);return r.treeAncestors=c2(i,this),r.treePathInfo=r.treeAncestors,r},e.prototype.setLayoutInfo=function(n){this.layoutInfo=this.layoutInfo||{},ut(this.layoutInfo,n)},e.prototype.mapIdToIndex=function(n){var r=this._idIndexMap;r||(r=this._idIndexMap=ii(),this._idIndexMapCount=0);var i=r.get(n);return i==null&&r.set(n,i=this._idIndexMapCount++),i},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var r=this.getRawData().tree.root;(!n||n!==r&&!r.contains(n))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){JX(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(Hi);function QX(t){var e=0;oe(t.children,function(r){QX(r);var i=r.value;at(i)&&(i=i[0]),e+=i});var n=t.value;at(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=e),n<0&&(n=0),at(t.value)?t.value[0]=n:t.value=n}function Pye(t,e){var n=nu(e.get("color")),r=nu(e.get(["aria","decal","decals"]));if(n){t=t||[];var i,a;oe(t,function(s){var l=new ws(s),u=l.get("color"),c=l.get("decal");(l.get(["itemStyle","color"])||u&&u!=="none")&&(i=!0),(l.get(["itemStyle","decal"])||c&&c!=="none")&&(a=!0)});var o=t[0]||(t[0]={});return i||(o.color=n.slice()),!a&&r&&(o.decal=r.slice()),t}}var Dye=8,a8=8,vS=5,Iye=function(){function t(e){this.group=new pn,e.add(this.group)}return t.prototype.render=function(e,n,r,i){var a=e.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!a.get("show")||!r)){var s=a.getModel("itemStyle"),l=a.getModel("emphasis"),u=s.getModel("textStyle"),c=l.getModel(["itemStyle","textStyle"]),f={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:n.getWidth(),height:n.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,f,u),this._renderContent(e,f,s,l,u,c,i),Zx(o,f.pos,f.box)}},t.prototype._prepare=function(e,n,r){for(var i=e;i;i=i.parentNode){var a=Yl(i.getModel().get("name"),""),o=r.getTextRect(a),s=Math.max(o.width+Dye*2,n.emptyItemWidth);n.totalWidth+=s+a8,n.renderList.push({node:i,text:a,width:s})}},t.prototype._renderContent=function(e,n,r,i,a,o,s){for(var l=0,u=n.emptyItemWidth,c=e.get(["breadcrumb","height"]),f=zhe(n.pos,n.box),d=n.totalWidth,h=n.renderList,p=i.getModel("itemStyle").getItemStyle(),g=h.length-1;g>=0;g--){var v=h[g],m=v.node,y=v.width,b=v.text;d>f.width&&(d-=y-u,y=u,b=null);var x=new tu({shape:{points:Lye(l,0,y,c,g===h.length-1,g===0)},style:Ci(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new Xr({style:Ra(a,{text:b})}),textConfig:{position:"inside"},z2:i2*1e4,onclick:Rt(s,m)});x.disableLabelAnimation=!0,x.getTextContent().ensureState("emphasis").style=Ra(o,{text:b}),x.ensureState("emphasis").style=p,ua(x,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(x),Rye(x,e,m),l+=y+a8}},t.prototype.remove=function(){this.group.removeAll()},t}();function Lye(t,e,n,r,i,a){var o=[[i?t:t-vS,e],[t+n,e],[t+n,e+r],[i?t:t-vS,e+r]];return!a&&o.splice(2,0,[t+n+vS,e+r/2]),!i&&o.push([t,e+r/2]),o}function Rye(t,e,n){Yn(t).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&c2(n,e)}}var Nye=function(){function t(){this._storage=[],this._elExistsMap={}}return t.prototype.add=function(e,n,r,i,a){return this._elExistsMap[e.id]?!1:(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:n,duration:r,delay:i,easing:a}),!0)},t.prototype.finished=function(e){return this._finishedCallback=e,this},t.prototype.start=function(){for(var e=this,n=this._storage.length,r=function(){n--,n<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},i=0,a=this._storage.length;i<a;i++){var o=this._storage[i];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:r,aborted:r})}return this},t}();function Fye(){return new Nye}var UC=pn,o8=Dr,s8=3,l8="label",u8="upperLabel",zye=i2*10,jye=i2*2,Bye=i2*3,Qc=xU([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),c8=function(t){var e=Qc(t);return e.stroke=e.fill=e.lineWidth=null,e},ob=xa(),$ye=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._state="ready",n._storage=Xp(),n}return e.prototype.render=function(n,r,i,a){var o=r.findComponents({mainType:"series",subType:"treemap",query:a});if(!(ai(o,n)<0)){this.seriesModel=n,this.api=i,this.ecModel=r;var s=["treemapZoomToNode","treemapRootToNode"],l=b0(a,s,n),u=a&&a.type,c=n.layoutInfo,f=!this._oldTree,d=this._storage,h=u==="treemapRootToNode"&&l&&d?{rootNodeGroup:d.nodeGroup[l.node.getRawIndex()],direction:a.direction}:null,p=this._giveContainerGroup(c),g=n.get("animation"),v=this._doRender(p,n,h);g&&!f&&(!u||u==="treemapZoomToNode"||u==="treemapRootToNode")?this._doAnimation(p,v,n,h):v.renderFinally(),this._resetController(i),this._renderBreadcrumb(n,i,l)}},e.prototype._giveContainerGroup=function(n){var r=this._containerGroup;return r||(r=this._containerGroup=new UC,this._initEvents(r),this.group.add(r)),r.x=n.x,r.y=n.y,r},e.prototype._doRender=function(n,r,i){var a=r.getData().tree,o=this._oldTree,s=Xp(),l=Xp(),u=this._storage,c=[];function f(y,b,x,w){return Vye(r,l,u,i,s,c,y,b,x,w)}g(a.root?[a.root]:[],o&&o.root?[o.root]:[],n,a===o||!o,0);var d=v(u);if(this._oldTree=a,this._storage=l,this._controllerHost){var h=this.seriesModel.layoutInfo,p=a.root.getLayout();p.width===h.width&&p.height===h.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:s,willDeleteEls:d,renderFinally:m};function g(y,b,x,w,_){w?(b=y,oe(y,function(O,A){!O.isRemoved()&&S(A,A)})):new yv(b,y,E,E).add(S).update(S).remove(Rt(S,null)).execute();function E(O){return O.getId()}function S(O,A){var T=O!=null?y[O]:null,I=A!=null?b[A]:null,D=f(T,I,x,_);D&&g(T&&T.viewChildren||[],I&&I.viewChildren||[],D,w,_+1)}}function v(y){var b=Xp();return y&&oe(y,function(x,w){var _=b[w];oe(x,function(E){E&&(_.push(E),ob(E).willDelete=!0)})}),b}function m(){oe(d,function(y){oe(y,function(b){b.parent&&b.parent.remove(b)})}),oe(c,function(y){y.invisible=!0,y.dirty()})}},e.prototype._doAnimation=function(n,r,i,a){var o=i.get("animationDurationUpdate"),s=i.get("animationEasing"),l=(Tr(o)?0:o)||0,u=(Tr(s)?null:s)||"cubicOut",c=Fye();oe(r.willDeleteEls,function(f,d){oe(f,function(h,p){if(!h.invisible){var g=h.parent,v,m=ob(g);if(a&&a.direction==="drillDown")v=g===a.rootNodeGroup?{shape:{x:0,y:0,width:m.nodeWidth,height:m.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var y=0,b=0;m.willDelete||(y=m.nodeWidth/2,b=m.nodeHeight/2),v=d==="nodeGroup"?{x:y,y:b,style:{opacity:0}}:{shape:{x:y,y:b,width:0,height:0},style:{opacity:0}}}v&&c.add(h,v,l,0,u)}})}),oe(this._storage,function(f,d){oe(f,function(h,p){var g=r.lastsForAnimation[d][p],v={};g&&(h instanceof pn?g.oldX!=null&&(v.x=h.x,v.y=h.y,h.x=g.oldX,h.y=g.oldY):(g.oldShape&&(v.shape=ut({},h.shape),h.setShape(g.oldShape)),g.fadein?(h.setStyle("opacity",0),v.style={opacity:1}):h.style.opacity!==1&&(v.style={opacity:1})),c.add(h,v,l,0,u))})},this),this._state="animating",c.finished(nt(function(){this._state="ready",r.renderFinally()},this)).start()},e.prototype._resetController=function(n){var r=this._controller,i=this._controllerHost;i||(this._controllerHost={target:this.group},i=this._controllerHost),r||(r=this._controller=new o2(n.getZr()),r.enable(this.seriesModel.get("roam")),i.zoomLimit=this.seriesModel.get("scaleLimit"),i.zoom=this.seriesModel.get("zoom"),r.on("pan",nt(this._onPan,this)),r.on("zoom",nt(this._onZoom,this)));var a=new ro(0,0,n.getWidth(),n.getHeight());r.setPointerChecker(function(o,s,l){return a.contain(s,l)})},e.prototype._clearController=function(){var n=this._controller;this._controllerHost=null,n&&(n.dispose(),n=null)},e.prototype._onPan=function(n){if(this._state!=="animating"&&(Math.abs(n.dx)>s8||Math.abs(n.dy)>s8)){var r=this.seriesModel.getData().tree.root;if(!r)return;var i=r.getLayout();if(!i)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x+n.dx,y:i.y+n.dy,width:i.width,height:i.height}})}},e.prototype._onZoom=function(n){var r=n.originX,i=n.originY,a=n.scale;if(this._state!=="animating"){var o=this.seriesModel.getData().tree.root;if(!o)return;var s=o.getLayout();if(!s)return;var l=new ro(s.x,s.y,s.width,s.height),u=null,c=this._controllerHost;u=c.zoomLimit;var f=c.zoom=c.zoom||1;if(f*=a,u){var d=u.min||0,h=u.max||1/0;f=Math.max(Math.min(h,f),d)}var p=f/c.zoom;c.zoom=f;var g=this.seriesModel.layoutInfo;r-=g.x,i-=g.y;var v=Yx();u0(v,v,[-r,-i]),jhe(v,v,[p,p]),u0(v,v,[r,i]),l.applyTransform(v),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},e.prototype._initEvents=function(n){var r=this;n.on("click",function(i){if(r._state==="ready"){var a=r.seriesModel.get("nodeClick",!0);if(a){var o=r.findTarget(i.offsetX,i.offsetY);if(o){var s=o.node;if(s.getLayout().isLeafRoot)r._rootToNode(o);else if(a==="zoomToNode")r._zoomToNode(o);else if(a==="link"){var l=s.hostTree.data.getItemModel(s.dataIndex),u=l.get("link",!0),c=l.get("target",!0)||"blank";u&&U1(u,c)}}}}},this)},e.prototype._renderBreadcrumb=function(n,r,i){var a=this;i||(i=n.get("leafDepth",!0)!=null?{node:n.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2),i||(i={node:n.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Iye(this.group))).render(n,r,i.node,function(o){a._state!=="animating"&&(iI(n.getViewRoot(),o)?a._rootToNode({node:o}):a._zoomToNode({node:o}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=Xp(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(n){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},e.prototype._rootToNode=function(n){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},e.prototype.findTarget=function(n,r){var i,a=this.seriesModel.getViewRoot();return a.eachNode({attr:"viewChildren",order:"preorder"},function(o){var s=this._storage.background[o.getRawIndex()];if(s){var l=s.transformCoordToLocal(n,r),u=s.shape;if(u.x<=l[0]&&l[0]<=u.x+u.width&&u.y<=l[1]&&l[1]<=u.y+u.height)i={node:o,offsetX:l[0],offsetY:l[1]};else return!1}},this),i},e.type="treemap",e}(Yi);function Xp(){return{nodeGroup:[],background:[],content:[]}}function Vye(t,e,n,r,i,a,o,s,l,u){if(!o)return;var c=o.getLayout(),f=t.getData(),d=o.getModel();if(f.setItemGraphicEl(o.dataIndex,null),!c||!c.isInView)return;var h=c.width,p=c.height,g=c.borderWidth,v=c.invisible,m=o.getRawIndex(),y=s&&s.getRawIndex(),b=o.viewChildren,x=c.upperHeight,w=b&&b.length,_=d.getModel("itemStyle"),E=d.getModel(["emphasis","itemStyle"]),S=d.getModel(["blur","itemStyle"]),O=d.getModel(["select","itemStyle"]),A=_.get("borderRadius")||0,T=Y("nodeGroup",UC);if(!T)return;if(l.add(T),T.x=c.x||0,T.y=c.y||0,T.markRedraw(),ob(T).nodeWidth=h,ob(T).nodeHeight=p,c.isAboveViewRoot)return T;var I=Y("background",o8,u,jye);I&&B(T,I,w&&c.upperLabelHeight);var D=d.getModel("emphasis"),R=D.get("focus"),F=D.get("blurScope"),z=D.get("disabled"),N=R==="ancestor"?o.getAncestorsIndices():R==="descendant"?o.getDescendantIndices():R;if(w)s5(T)&&pg(T,!1),I&&(pg(I,!z),f.setItemGraphicEl(o.dataIndex,I),l5(I,N,F));else{var L=Y("content",o8,u,Bye);L&&$(T,L),I.disableMorphing=!0,I&&s5(I)&&pg(I,!1),pg(T,!z),f.setItemGraphicEl(o.dataIndex,T),l5(T,N,F)}return T;function B(J,Q,se){var de=Yn(Q);if(de.dataIndex=o.dataIndex,de.seriesIndex=t.seriesIndex,Q.setShape({x:0,y:0,width:h,height:p,r:A}),v)G(Q);else{Q.invisible=!1;var ye=o.getVisual("style"),_e=ye.stroke,Ee=c8(_);Ee.fill=_e;var ue=Qc(E);ue.fill=E.get("borderColor");var he=Qc(S);he.fill=S.get("borderColor");var ke=Qc(O);if(ke.fill=O.get("borderColor"),se){var Se=h-2*g;W(Q,_e,ye.opacity,{x:g,y:0,width:Se,height:x})}else Q.removeTextContent();Q.setStyle(Ee),Q.ensureState("emphasis").style=ue,Q.ensureState("blur").style=he,Q.ensureState("select").style=ke,_C(Q)}J.add(Q)}function $(J,Q){var se=Yn(Q);se.dataIndex=o.dataIndex,se.seriesIndex=t.seriesIndex;var de=Math.max(h-2*g,0),ye=Math.max(p-2*g,0);if(Q.culling=!0,Q.setShape({x:g,y:g,width:de,height:ye,r:A}),v)G(Q);else{Q.invisible=!1;var _e=o.getVisual("style"),Ee=_e.fill,ue=c8(_);ue.fill=Ee,ue.decal=_e.decal;var he=Qc(E),ke=Qc(S),Se=Qc(O);W(Q,Ee,_e.opacity,null),Q.setStyle(ue),Q.ensureState("emphasis").style=he,Q.ensureState("blur").style=ke,Q.ensureState("select").style=Se,_C(Q)}J.add(Q)}function G(J){!J.invisible&&a.push(J)}function W(J,Q,se,de){var ye=d.getModel(de?u8:l8),_e=Yl(d.get("name"),null),Ee=ye.getShallow("show");so(J,ja(d,de?u8:l8),{defaultText:Ee?_e:null,inheritColor:Q,defaultOpacity:se,labelFetcher:t,labelDataIndex:o.dataIndex});var ue=J.getTextContent();if(ue){var he=ue.style,ke=Bhe(he.padding||0);de&&(J.setTextConfig({layoutRect:de}),ue.disableLabelLayout=!0),ue.beforeUpdate=function(){var Me=Math.max((de?de.width:J.shape.width)-ke[1]-ke[3],0),Be=Math.max((de?de.height:J.shape.height)-ke[0]-ke[2],0);(he.width!==Me||he.height!==Be)&&ue.setStyle({width:Me,height:Be})},he.truncateMinChar=2,he.lineOverflow="truncate",U(he,de,c);var Se=ue.getState("emphasis");U(Se?Se.style:null,de,c)}}function U(J,Q,se){var de=J?J.text:null;if(!Q&&se.isLeafRoot&&de!=null){var ye=t.get("drillDownIcon",!0);J.text=ye?ye+" "+de:de}}function Y(J,Q,se,de){var ye=y!=null&&n[J][y],_e=i[J];return ye?(n[J][y]=null,q(_e,ye)):v||(ye=new Q,ye instanceof CD&&(ye.z2=qye(se,de)),K(_e,ye)),e[J][m]=ye}function q(J,Q){var se=J[m]={};Q instanceof UC?(se.oldX=Q.x,se.oldY=Q.y):se.oldShape=ut({},Q.shape)}function K(J,Q){var se=J[m]={},de=o.parentNode,ye=Q instanceof pn;if(de&&(!r||r.direction==="drillDown")){var _e=0,Ee=0,ue=i.background[de.getRawIndex()];!r&&ue&&ue.oldShape&&(_e=ue.oldShape.width,Ee=ue.oldShape.height),ye?(se.oldX=0,se.oldY=Ee):se.oldShape={x:_e,y:Ee,width:0,height:0}}se.fadein=!ye}}function qye(t,e){return t*zye+e}var Wye="itemStyle",eZ=xa();const Gye={seriesType:"treemap",reset:function(t){var e=t.getData().tree,n=e.root;n.isRemoved()||tZ(n,{},t.getViewRoot().getAncestors(),t)}};function tZ(t,e,n,r){var i=t.getModel(),a=t.getLayout(),o=t.hostTree.data;if(!(!a||a.invisible||!a.isInView)){var s=i.getModel(Wye),l=Hye(s,e,r),u=o.ensureUniqueItemVisual(t.dataIndex,"style"),c=s.get("borderColor"),f=s.get("borderColorSaturation"),d;f!=null&&(d=f8(l),c=Yye(f,d)),u.stroke=c;var h=t.viewChildren;if(!h||!h.length)d=f8(l),u.fill=d;else{var p=Uye(t,i,a,s,l,h);oe(h,function(g,v){if(g.depth>=n.length||g===n[g.depth]){var m=Xye(i,l,g,v,p,r);tZ(g,m,n,r)}})}}}function Hye(t,e,n){var r=ut({},e),i=n.designatedVisualItemStyle;return oe(["color","colorAlpha","colorSaturation"],function(a){i[a]=e[a];var o=t.get(a);i[a]=null,o!=null&&(r[a]=o)}),r}function f8(t){var e=mS(t,"color");if(e){var n=mS(t,"colorAlpha"),r=mS(t,"colorSaturation");return r&&(e=Wg(e,null,null,r)),n&&(e=Y1(e,n)),e}}function Yye(t,e){return e!=null?Wg(e,null,null,t):null}function mS(t,e){var n=t[e];if(n!=null&&n!=="none")return n}function Uye(t,e,n,r,i,a){if(!(!a||!a.length)){var o=yS(e,"color")||i.color!=null&&i.color!=="none"&&(yS(e,"colorAlpha")||yS(e,"colorSaturation"));if(o){var s=e.get("visualMin"),l=e.get("visualMax"),u=n.dataExtent.slice();s!=null&&s<u[0]&&(u[0]=s),l!=null&&l>u[1]&&(u[1]=l);var c=e.get("colorMappingBy"),f={type:o.name,dataExtent:u,visual:o.range};f.type==="color"&&(c==="index"||c==="id")?(f.mappingMethod="category",f.loop=!0):f.mappingMethod="linear";var d=new bi(f);return eZ(d).drColorMappingBy=c,d}}}function yS(t,e){var n=t.get(e);return at(n)&&n.length?{name:e,range:n}:null}function Xye(t,e,n,r,i,a){var o=ut({},e);if(i){var s=i.type,l=s==="color"&&eZ(i).drColorMappingBy,u=l==="index"?r:l==="id"?a.mapIdToIndex(n.getId()):n.getValue(t.get("visualDimension"));o[s]=i.mapValueToVisual(u)}return o}var x0=Math.max,sb=Math.min,d8=Ks,aI=oe,nZ=["itemStyle","borderWidth"],Zye=["itemStyle","gapWidth"],Kye=["upperLabel","show"],Jye=["upperLabel","height"];const Qye={seriesType:"treemap",reset:function(t,e,n,r){var i=n.getWidth(),a=n.getHeight(),o=t.option,s=za(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),l=o.size||[],u=mt(d8(s.width,l[0]),i),c=mt(d8(s.height,l[1]),a),f=r&&r.type,d=["treemapZoomToNode","treemapRootToNode"],h=b0(r,d,t),p=f==="treemapRender"||f==="treemapMove"?r.rootRect:null,g=t.getViewRoot(),v=KX(g);if(f!=="treemapMove"){var m=f==="treemapZoomToNode"?a1e(t,h,g,u,c):p?[p.width,p.height]:[u,c],y=o.sort;y&&y!=="asc"&&y!=="desc"&&(y="desc");var b={squareRatio:o.squareRatio,sort:y,leafDepth:o.leafDepth};g.hostTree.clearLayouts();var x={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};g.setLayout(x),rZ(g,b,!1,0),x=g.getLayout(),aI(v,function(_,E){var S=(v[E+1]||g).getValue();_.setLayout(ut({dataExtent:[S,S],borderWidth:0,upperHeight:0},x))})}var w=t.getData().tree.root;w.setLayout(o1e(s,p,h),!0),t.setLayoutInfo(s),iZ(w,new ro(-s.x,-s.y,i,a),v,g,0)}};function rZ(t,e,n,r){var i,a;if(!t.isRemoved()){var o=t.getLayout();i=o.width,a=o.height;var s=t.getModel(),l=s.get(nZ),u=s.get(Zye)/2,c=aZ(s),f=Math.max(l,c),d=l-u,h=f-u;t.setLayout({borderWidth:l,upperHeight:f,upperLabelHeight:c},!0),i=x0(i-2*d,0),a=x0(a-d-h,0);var p=i*a,g=e1e(t,s,p,e,n,r);if(g.length){var v={x:d,y:h,width:i,height:a},m=sb(i,a),y=1/0,b=[];b.area=0;for(var x=0,w=g.length;x<w;){var _=g[x];b.push(_),b.area+=_.getLayout().area;var E=i1e(b,m,e.squareRatio);E<=y?(x++,y=E):(b.area-=b.pop().getLayout().area,h8(b,m,v,u,!1),m=sb(v.width,v.height),b.length=b.area=0,y=1/0)}if(b.length&&h8(b,m,v,u,!0),!n){var S=s.get("childrenVisibleMin");S!=null&&p<S&&(n=!0)}for(var x=0,w=g.length;x<w;x++)rZ(g[x],e,n,r+1)}}}function e1e(t,e,n,r,i,a){var o=t.children||[],s=r.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=r.leafDepth!=null&&r.leafDepth<=a;if(i&&!l)return t.viewChildren=[];o=Ms(o,function(h){return!h.isRemoved()}),n1e(o,s);var u=r1e(e,o,s);if(u.sum===0)return t.viewChildren=[];if(u.sum=t1e(e,n,u.sum,s,o),u.sum===0)return t.viewChildren=[];for(var c=0,f=o.length;c<f;c++){var d=o[c].getValue()/u.sum*n;o[c].setLayout({area:d})}return l&&(o.length&&t.setLayout({isLeafRoot:!0},!0),o.length=0),t.viewChildren=o,t.setLayout({dataExtent:u.dataExtent},!0),o}function t1e(t,e,n,r,i){if(!r)return n;for(var a=t.get("visibleMin"),o=i.length,s=o,l=o-1;l>=0;l--){var u=i[r==="asc"?o-l-1:l].getValue();u/n*e<a&&(s=l,n-=u)}return r==="asc"?i.splice(0,o-s):i.splice(s,o-s),n}function n1e(t,e){return e&&t.sort(function(n,r){var i=e==="asc"?n.getValue()-r.getValue():r.getValue()-n.getValue();return i===0?e==="asc"?n.dataIndex-r.dataIndex:r.dataIndex-n.dataIndex:i}),t}function r1e(t,e,n){for(var r=0,i=0,a=e.length;i<a;i++)r+=e[i].getValue();var o=t.get("visualDimension"),s;return!e||!e.length?s=[NaN,NaN]:o==="value"&&n?(s=[e[e.length-1].getValue(),e[0].getValue()],n==="asc"&&s.reverse()):(s=[1/0,-1/0],aI(e,function(l){var u=l.getValue(o);u<s[0]&&(s[0]=u),u>s[1]&&(s[1]=u)})),{sum:r,dataExtent:s}}function i1e(t,e,n){for(var r=0,i=1/0,a=0,o=void 0,s=t.length;a<s;a++)o=t[a].getLayout().area,o&&(o<i&&(i=o),o>r&&(r=o));var l=t.area*t.area,u=e*e*n;return l?x0(u*r/l,l/(u*i)):1/0}function h8(t,e,n,r,i){var a=e===n.width?0:1,o=1-a,s=["x","y"],l=["width","height"],u=n[s[a]],c=e?t.area/e:0;(i||c>n[l[o]])&&(c=n[l[o]]);for(var f=0,d=t.length;f<d;f++){var h=t[f],p={},g=c?h.getLayout().area/c:0,v=p[l[o]]=x0(c-2*r,0),m=n[s[a]]+n[l[a]]-u,y=f===d-1||m<g?m:g,b=p[l[a]]=x0(y-2*r,0);p[s[o]]=n[s[o]]+sb(r,v/2),p[s[a]]=u+sb(r,b/2),u+=y,h.setLayout(p,!0)}n[s[o]]+=c,n[l[o]]-=c}function a1e(t,e,n,r,i){var a=(e||{}).node,o=[r,i];if(!a||a===n)return o;for(var s,l=r*i,u=l*t.option.zoomToNodeRatio;s=a.parentNode;){for(var c=0,f=s.children,d=0,h=f.length;d<h;d++)c+=f[d].getValue();var p=a.getValue();if(p===0)return o;u*=c/p;var g=s.getModel(),v=g.get(nZ),m=Math.max(v,aZ(g));u+=4*v*v+(3*v+m)*Math.pow(u,.5),u>u5&&(u=u5),a=s}u<l&&(u=l);var y=Math.pow(u/l,.5);return[r*y,i*y]}function o1e(t,e,n){if(e)return{x:e.x,y:e.y};var r={x:0,y:0};if(!n)return r;var i=n.node,a=i.getLayout();if(!a)return r;for(var o=[a.width/2,a.height/2],s=i;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:t.width/2-o[0],y:t.height/2-o[1]}}function iZ(t,e,n,r,i){var a=t.getLayout(),o=n[i],s=o&&o===t;if(!(o&&!s||i===n.length&&t!==r)){t.setLayout({isInView:!0,invisible:!s&&!e.intersect(a),isAboveViewRoot:s},!0);var l=new ro(e.x-a.x,e.y-a.y,e.width,e.height);aI(t.viewChildren||[],function(u){iZ(u,l,n,r,i+1)})}}function aZ(t){return t.get(Kye)?t.get(Jye):0}function s1e(t){t.registerSeriesModel(Cye),t.registerChartView($ye),t.registerVisual(Gye),t.registerLayout(Qye),Mye(t)}function l1e(t){var e=t.findComponents({mainType:"legend"});!e||!e.length||t.eachSeriesByType("graph",function(n){var r=n.getCategoriesData(),i=n.getGraph(),a=i.data,o=r.mapArray(r.getName);a.filterSelf(function(s){var l=a.getItemModel(s),u=l.getShallow("category");if(u!=null){_s(u)&&(u=o[u]);for(var c=0;c<e.length;c++)if(!e[c].isSelected(u))return!1}return!0})})}function u1e(t){var e={};t.eachSeriesByType("graph",function(n){var r=n.getCategoriesData(),i=n.getData(),a={};r.each(function(o){var s=r.getName(o);a["ec-"+s]=o;var l=r.getItemModel(o),u=l.getModel("itemStyle").getItemStyle();u.fill||(u.fill=n.getColorFromPalette(s,e)),r.setItemVisual(o,"style",u);for(var c=["symbol","symbolSize","symbolKeepAspect"],f=0;f<c.length;f++){var d=l.getShallow(c[f],!0);d!=null&&r.setItemVisual(o,c[f],d)}}),r.count()&&i.each(function(o){var s=i.getItemModel(o),l=s.getShallow("category");if(l!=null){xr(l)&&(l=a["ec-"+l]);var u=r.getItemVisual(l,"style"),c=i.ensureUniqueItemVisual(o,"style");ut(c,u);for(var f=["symbol","symbolSize","symbolKeepAspect"],d=0;d<f.length;d++)i.setItemVisual(o,f[d],r.getItemVisual(l,f[d]))}})})}function Vm(t){return t instanceof Array||(t=[t,t]),t}function c1e(t){t.eachSeriesByType("graph",function(e){var n=e.getGraph(),r=e.getEdgeData(),i=Vm(e.get("edgeSymbol")),a=Vm(e.get("edgeSymbolSize"));r.setVisual("fromSymbol",i&&i[0]),r.setVisual("toSymbol",i&&i[1]),r.setVisual("fromSymbolSize",a&&a[0]),r.setVisual("toSymbolSize",a&&a[1]),r.setVisual("style",e.getModel("lineStyle").getLineStyle()),r.each(function(o){var s=r.getItemModel(o),l=n.getEdgeByIndex(o),u=Vm(s.getShallow("symbol",!0)),c=Vm(s.getShallow("symbolSize",!0)),f=s.getModel("lineStyle").getLineStyle(),d=r.ensureUniqueItemVisual(o,"style");switch(ut(d,f),d.stroke){case"source":{var h=l.node1.getVisual("style");d.stroke=h&&h.fill;break}case"target":{var h=l.node2.getVisual("style");d.stroke=h&&h.fill;break}}u[0]&&l.setVisual("fromSymbol",u[0]),u[1]&&l.setVisual("toSymbol",u[1]),c[0]&&l.setVisual("fromSymbolSize",c[0]),c[1]&&l.setVisual("toSymbolSize",c[1])})})}var XC="-->",f2=function(t){return t.get("autoCurveness")||null},oZ=function(t,e){var n=f2(t),r=20,i=[];if(_s(n))r=n;else if(at(n)){t.__curvenessList=n;return}e>r&&(r=e);var a=r%2?r+2:r+3;i=[];for(var o=0;o<a;o++)i.push((o%2?o+1:o)/10*(o%2?-1:1));t.__curvenessList=i},w0=function(t,e,n){var r=[t.id,t.dataIndex].join("."),i=[e.id,e.dataIndex].join(".");return[n.uid,r,i].join(XC)},sZ=function(t){var e=t.split(XC);return[e[0],e[2],e[1]].join(XC)},f1e=function(t,e){var n=w0(t.node1,t.node2,e);return e.__edgeMap[n]},d1e=function(t,e){var n=ZC(w0(t.node1,t.node2,e),e),r=ZC(w0(t.node2,t.node1,e),e);return n+r},ZC=function(t,e){var n=e.__edgeMap;return n[t]?n[t].length:0};function h1e(t){f2(t)&&(t.__curvenessList=[],t.__edgeMap={},oZ(t))}function p1e(t,e,n,r){if(f2(n)){var i=w0(t,e,n),a=n.__edgeMap,o=a[sZ(i)];a[i]&&!o?a[i].isForward=!0:o&&a[i]&&(o.isForward=!0,a[i].isForward=!1),a[i]=a[i]||[],a[i].push(r)}}function oI(t,e,n,r){var i=f2(e),a=at(i);if(!i)return null;var o=f1e(t,e);if(!o)return null;for(var s=-1,l=0;l<o.length;l++)if(o[l]===n){s=l;break}var u=d1e(t,e);oZ(e,u),t.lineStyle=t.lineStyle||{};var c=w0(t.node1,t.node2,e),f=e.__curvenessList,d=a||u%2?0:1;if(o.isForward)return f[d+s];var h=sZ(c),p=ZC(h,e),g=f[s+p+d];return r?a?i&&i[0]===0?(p+d)%2?g:-g:((p%2?0:1)+d)%2?g:-g:(p+d)%2?g:-g:f[s+p+d]}function lZ(t){var e=t.coordinateSystem;if(!(e&&e.type!=="view")){var n=t.getGraph();n.eachNode(function(r){var i=r.getModel();r.setLayout([+i.get("x"),+i.get("y")])}),sI(n,t)}}function sI(t,e){t.eachEdge(function(n,r){var i=Ev(n.getModel().get(["lineStyle","curveness"]),-oI(n,e,r,!0),0),a=nc(n.node1.getLayout()),o=nc(n.node2.getLayout()),s=[a,o];+i&&s.push([(a[0]+o[0])/2-(a[1]-o[1])*i,(a[1]+o[1])/2-(o[0]-a[0])*i]),n.setLayout(s)})}function g1e(t,e){t.eachSeriesByType("graph",function(n){var r=n.get("layout"),i=n.coordinateSystem;if(i&&i.type!=="view"){var a=n.getData(),o=[];oe(i.dimensions,function(d){o=o.concat(a.mapDimensionsAll(d))});for(var s=0;s<a.count();s++){for(var l=[],u=!1,c=0;c<o.length;c++){var f=a.get(o[c],s);isNaN(f)||(u=!0),l.push(f)}u?a.setItemLayout(s,i.dataToPoint(l)):a.setItemLayout(s,[NaN,NaN])}sI(a.graph,n)}else(!r||r==="none")&&lZ(n)})}function mg(t){var e=t.coordinateSystem;if(e.type!=="view")return 1;var n=t.option.nodeScaleRatio,r=e.scaleX,i=e.getZoom(),a=(i-1)*n+1;return a/r}function yg(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var p8=Math.PI,bS=[];function lI(t,e,n,r){var i=t.coordinateSystem;if(!(i&&i.type!=="view")){var a=i.getBoundingRect(),o=t.getData(),s=o.graph,l=a.width/2+a.x,u=a.height/2+a.y,c=Math.min(a.width,a.height)/2,f=o.count();if(o.setLayout({cx:l,cy:u}),!!f){if(n){var d=i.pointToData(r),h=d[0],p=d[1],g=[h-l,p-u];_v(g,g),$he(g,g,c),n.setLayout([l+g[0],u+g[1]],!0);var v=t.get(["circular","rotateLabel"]);uZ(n,v,l,u)}v1e[e](t,s,o,c,l,u,f),s.eachEdge(function(m,y){var b=Ev(m.getModel().get(["lineStyle","curveness"]),oI(m,t,y),0),x=nc(m.node1.getLayout()),w=nc(m.node2.getLayout()),_,E=(x[0]+w[0])/2,S=(x[1]+w[1])/2;+b&&(b*=3,_=[l*b+E*(1-b),u*b+S*(1-b)]),m.setLayout([x,w,_])})}}}var v1e={value:function(t,e,n,r,i,a,o){var s=0,l=n.getSum("value"),u=Math.PI*2/(l||o);e.eachNode(function(c){var f=c.getValue("value"),d=u*(l?f:1)/2;s+=d,c.setLayout([r*Math.cos(s)+i,r*Math.sin(s)+a]),s+=d})},symbolSize:function(t,e,n,r,i,a,o){var s=0;bS.length=o;var l=mg(t);e.eachNode(function(f){var d=yg(f);isNaN(d)&&(d=2),d<0&&(d=0),d*=l;var h=Math.asin(d/2/r);isNaN(h)&&(h=p8/2),bS[f.dataIndex]=h,s+=h*2});var u=(2*p8-s)/o/2,c=0;e.eachNode(function(f){var d=u+bS[f.dataIndex];c+=d,(!f.getLayout()||!f.getLayout().fixed)&&f.setLayout([r*Math.cos(c)+i,r*Math.sin(c)+a]),c+=d})}};function uZ(t,e,n,r){var i=t.getGraphicEl();if(i){var a=t.getModel(),o=a.get(["label","rotate"])||0,s=i.getSymbolPath();if(e){var l=t.getLayout(),u=Math.atan2(l[1]-r,l[0]-n);u<0&&(u=Math.PI*2+u);var c=l[0]<n;c&&(u=u-Math.PI);var f=c?"left":"right";s.setTextConfig({rotation:-u,position:f,origin:"center"});var d=s.ensureState("emphasis");ut(d.textConfig||(d.textConfig={}),{position:f})}else s.setTextConfig({rotation:o*=Math.PI/180})}}function m1e(t){t.eachSeriesByType("graph",function(e){e.get("layout")==="circular"&&lI(e,"symbolSize")})}var Ed=SC;function y1e(t,e,n){for(var r=t,i=e,a=n.rect,o=a.width,s=a.height,l=[a.x+o/2,a.y+s/2],u=n.gravity==null?.1:n.gravity,c=0;c<r.length;c++){var f=r[c];f.p||(f.p=Vhe(o*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),f.pp=nc(f.p),f.edges=null}var d=n.friction==null?.6:n.friction,h=d,p,g;return{warmUp:function(){h=d*.8},setFixed:function(v){r[v].fixed=!0},setUnfixed:function(v){r[v].fixed=!1},beforeStep:function(v){p=v},afterStep:function(v){g=v},step:function(v){p&&p(r,i);for(var m=[],y=r.length,b=0;b<i.length;b++){var x=i[b];if(!x.ignoreForceLayout){var w=x.n1,_=x.n2;nh(m,_.p,w.p);var E=c5(m)-x.d,S=_.w/(w.w+_.w);isNaN(S)&&(S=0),_v(m,m),!w.fixed&&Ed(w.p,w.p,m,S*E*h),!_.fixed&&Ed(_.p,_.p,m,-(1-S)*E*h)}}for(var b=0;b<y;b++){var O=r[b];O.fixed||(nh(m,l,O.p),Ed(O.p,O.p,m,u*h))}for(var b=0;b<y;b++)for(var w=r[b],A=b+1;A<y;A++){var _=r[A];nh(m,_.p,w.p);var E=c5(m);E===0&&(qhe(m,Math.random()-.5,Math.random()-.5),E=1);var T=(w.rep+_.rep)/E/E;!w.fixed&&Ed(w.pp,w.pp,m,T),!_.fixed&&Ed(_.pp,_.pp,m,-T)}for(var I=[],b=0;b<y;b++){var O=r[b];O.fixed||(nh(I,O.p,O.pp),Ed(O.p,O.p,I,h),ga(O.pp,O.p))}h=h*.992;var D=h<.01;g&&g(r,i,D),v&&v(D)}}}function b1e(t){t.eachSeriesByType("graph",function(e){var n=e.coordinateSystem;if(!(n&&n.type!=="view"))if(e.get("layout")==="force"){var r=e.preservedPoints||{},i=e.getGraph(),a=i.data,o=i.edgeData,s=e.getModel("force"),l=s.get("initLayout");e.preservedPoints?a.each(function(b){var x=a.getId(b);a.setItemLayout(b,r[x]||[NaN,NaN])}):!l||l==="none"?lZ(e):l==="circular"&&lI(e,"value");var u=a.getDataExtent("value"),c=o.getDataExtent("value"),f=s.get("repulsion"),d=s.get("edgeLength"),h=at(f)?f:[f,f],p=at(d)?d:[d,d];p=[p[1],p[0]];var g=a.mapArray("value",function(b,x){var w=a.getItemLayout(x),_=Kn(b,u,h);return isNaN(_)&&(_=(h[0]+h[1])/2),{w:_,rep:_,fixed:a.getItemModel(x).get("fixed"),p:!w||isNaN(w[0])||isNaN(w[1])?null:w}}),v=o.mapArray("value",function(b,x){var w=i.getEdgeByIndex(x),_=Kn(b,c,p);isNaN(_)&&(_=(p[0]+p[1])/2);var E=w.getModel(),S=Ev(w.getModel().get(["lineStyle","curveness"]),-oI(w,e,x,!0),0);return{n1:g[w.node1.dataIndex],n2:g[w.node2.dataIndex],d:_,curveness:S,ignoreForceLayout:E.get("ignoreForceLayout")}}),m=n.getBoundingRect(),y=y1e(g,v,{rect:m,gravity:s.get("gravity"),friction:s.get("friction")});y.beforeStep(function(b,x){for(var w=0,_=b.length;w<_;w++)b[w].fixed&&ga(b[w].p,i.getNodeByIndex(w).getLayout())}),y.afterStep(function(b,x,w){for(var _=0,E=b.length;_<E;_++)b[_].fixed||i.getNodeByIndex(_).setLayout(b[_].p),r[a.getId(_)]=b[_].p;for(var _=0,E=x.length;_<E;_++){var S=x[_],O=i.getEdgeByIndex(_),A=S.n1.p,T=S.n2.p,I=O.getLayout();I=I?I.slice():[],I[0]=I[0]||[],I[1]=I[1]||[],ga(I[0],A),ga(I[1],T),+S.curveness&&(I[2]=[(A[0]+T[0])/2-(A[1]-T[1])*S.curveness,(A[1]+T[1])/2-(T[0]-A[0])*S.curveness]),O.setLayout(I)}}),e.forceLayout=y,e.preservedPoints=r,y.step()}else e.forceLayout=null})}function x1e(t,e,n){var r=ut(t.getBoxLayoutParams(),{aspect:n});return za(r,{width:e.getWidth(),height:e.getHeight()})}function w1e(t,e){var n=[];return t.eachSeriesByType("graph",function(r){var i=r.get("coordinateSystem");if(!i||i==="view"){var a=r.getData(),o=a.mapArray(function(v){var m=a.getItemModel(v);return[+m.get("x"),+m.get("y")]}),s=[],l=[];zU(o,s,l),l[0]-s[0]===0&&(l[0]+=1,s[0]-=1),l[1]-s[1]===0&&(l[1]+=1,s[1]-=1);var u=(l[0]-s[0])/(l[1]-s[1]),c=x1e(r,e,u);isNaN(u)&&(s=[c.x,c.y],l=[c.x+c.width,c.y+c.height]);var f=l[0]-s[0],d=l[1]-s[1],h=c.width,p=c.height,g=r.coordinateSystem=new ND;g.zoomLimit=r.get("scaleLimit"),g.setBoundingRect(s[0],s[1],f,d),g.setViewRect(c.x,c.y,h,p),g.setCenter(r.get("center"),e),g.setZoom(r.get("zoom")),n.push(g)}}),n}var xS=[],wS=[],_S=[],Od=Ghe,SS=Hhe,g8=Math.abs;function v8(t,e,n){for(var r=t[0],i=t[1],a=t[2],o=1/0,s,l=n*n,u=.1,c=.1;c<=.9;c+=.1){xS[0]=Od(r[0],i[0],a[0],c),xS[1]=Od(r[1],i[1],a[1],c);var f=g8(SS(xS,e)-l);f<o&&(o=f,s=c)}for(var d=0;d<32;d++){var h=s+u;wS[0]=Od(r[0],i[0],a[0],s),wS[1]=Od(r[1],i[1],a[1],s),_S[0]=Od(r[0],i[0],a[0],h),_S[1]=Od(r[1],i[1],a[1],h);var f=SS(wS,e)-l;if(g8(f)<.01)break;var p=SS(_S,e)-l;u/=2,f<0?p>=0?s=s+u:s=s-u:p>=0?s=s-u:s=s+u}return s}function ES(t,e){var n=[],r=Whe,i=[[],[],[]],a=[[],[]],o=[];e/=2,t.eachEdge(function(s,l){var u=s.getLayout(),c=s.getVisual("fromSymbol"),f=s.getVisual("toSymbol");u.__original||(u.__original=[nc(u[0]),nc(u[1])],u[2]&&u.__original.push(nc(u[2])));var d=u.__original;if(u[2]!=null){if(ga(i[0],d[0]),ga(i[1],d[2]),ga(i[2],d[1]),c&&c!=="none"){var h=yg(s.node1),p=v8(i,d[0],h*e);r(i[0][0],i[1][0],i[2][0],p,n),i[0][0]=n[3],i[1][0]=n[4],r(i[0][1],i[1][1],i[2][1],p,n),i[0][1]=n[3],i[1][1]=n[4]}if(f&&f!=="none"){var h=yg(s.node2),p=v8(i,d[1],h*e);r(i[0][0],i[1][0],i[2][0],p,n),i[1][0]=n[1],i[2][0]=n[2],r(i[0][1],i[1][1],i[2][1],p,n),i[1][1]=n[1],i[2][1]=n[2]}ga(u[0],i[0]),ga(u[1],i[2]),ga(u[2],i[1])}else{if(ga(a[0],d[0]),ga(a[1],d[1]),nh(o,a[1],a[0]),_v(o,o),c&&c!=="none"){var h=yg(s.node1);SC(a[0],a[0],o,h*e)}if(f&&f!=="none"){var h=yg(s.node2);SC(a[1],a[1],o,-h*e)}ga(u[0],a[0]),ga(u[1],a[1])}})}function m8(t){return t.type==="view"}var _1e=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n,r){var i=new Jx,a=new TX,o=this.group;this._controller=new o2(r.getZr()),this._controllerHost={target:o},o.add(i.group),o.add(a.group),this._symbolDraw=i,this._lineDraw=a,this._firstRender=!0},e.prototype.render=function(n,r,i){var a=this,o=n.coordinateSystem;this._model=n;var s=this._symbolDraw,l=this._lineDraw,u=this.group;if(m8(o)){var c={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?u.attr(c):ur(u,c,n)}ES(n.getGraph(),mg(n));var f=n.getData();s.updateData(f);var d=n.getEdgeData();l.updateData(d),this._updateNodeAndLinkScale(),this._updateController(n,r,i),clearTimeout(this._layoutTimeout);var h=n.forceLayout,p=n.get(["force","layoutAnimation"]);h&&this._startForceLayoutIteration(h,p);var g=n.get("layout");f.graph.eachNode(function(b){var x=b.dataIndex,w=b.getGraphicEl(),_=b.getModel();if(w){w.off("drag").off("dragend");var E=_.get("draggable");E&&w.on("drag",function(O){switch(g){case"force":h.warmUp(),!a._layouting&&a._startForceLayoutIteration(h,p),h.setFixed(x),f.setItemLayout(x,[w.x,w.y]);break;case"circular":f.setItemLayout(x,[w.x,w.y]),b.setLayout({fixed:!0},!0),lI(n,"symbolSize",b,[O.offsetX,O.offsetY]),a.updateLayout(n);break;case"none":default:f.setItemLayout(x,[w.x,w.y]),sI(n.getGraph(),n),a.updateLayout(n);break}}).on("dragend",function(){h&&h.setUnfixed(x)}),w.setDraggable(E,!!_.get("cursor"));var S=_.get(["emphasis","focus"]);S==="adjacency"&&(Yn(w).focus=b.getAdjacentDataIndices())}}),f.graph.eachEdge(function(b){var x=b.getGraphicEl(),w=b.getModel().get(["emphasis","focus"]);x&&w==="adjacency"&&(Yn(x).focus={edge:[b.dataIndex],node:[b.node1.dataIndex,b.node2.dataIndex]})});var v=n.get("layout")==="circular"&&n.get(["circular","rotateLabel"]),m=f.getLayout("cx"),y=f.getLayout("cy");f.graph.eachNode(function(b){uZ(b,v,m,y)}),this._firstRender=!1},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(n,r){var i=this;(function a(){n.step(function(o){i.updateLayout(i._model),(i._layouting=!o)&&(r?i._layoutTimeout=setTimeout(a,16):a())})})()},e.prototype._updateController=function(n,r,i){var a=this,o=this._controller,s=this._controllerHost,l=this.group;if(o.setPointerChecker(function(u,c,f){var d=l.getBoundingRect();return d.applyTransform(l.transform),d.contain(c,f)&&!zD(u,i,n)}),!m8(n.coordinateSystem)){o.disable();return}o.enable(n.get("roam")),s.zoomLimit=n.get("scaleLimit"),s.zoom=n.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){YU(s,u.dx,u.dy),i.dispatchAction({seriesId:n.id,type:"graphRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){UU(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:n.id,type:"graphRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),a._updateNodeAndLinkScale(),ES(n.getGraph(),mg(n)),a._lineDraw.updateLayout(),i.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(){var n=this._model,r=n.getData(),i=mg(n);r.eachItemGraphicEl(function(a,o){a&&a.setSymbolScale(i)})},e.prototype.updateLayout=function(n){ES(n.getGraph(),mg(n)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(Yi);function kd(t){return"_EC_"+t}var S1e=function(){function t(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(e,n){e=e==null?""+n:""+e;var r=this._nodesMap;if(!r[kd(e)]){var i=new ef(e,n);return i.hostGraph=this,this.nodes.push(i),r[kd(e)]=i,i}},t.prototype.getNodeByIndex=function(e){var n=this.data.getRawIndex(e);return this.nodes[n]},t.prototype.getNodeById=function(e){return this._nodesMap[kd(e)]},t.prototype.addEdge=function(e,n,r){var i=this._nodesMap,a=this._edgesMap;if(_s(e)&&(e=this.nodes[e]),_s(n)&&(n=this.nodes[n]),e instanceof ef||(e=i[kd(e)]),n instanceof ef||(n=i[kd(n)]),!(!e||!n)){var o=e.id+"-"+n.id,s=new cZ(e,n,r);return s.hostGraph=this,this._directed&&(e.outEdges.push(s),n.inEdges.push(s)),e.edges.push(s),e!==n&&n.edges.push(s),this.edges.push(s),a[o]=s,s}},t.prototype.getEdgeByIndex=function(e){var n=this.edgeData.getRawIndex(e);return this.edges[n]},t.prototype.getEdge=function(e,n){e instanceof ef&&(e=e.id),n instanceof ef&&(n=n.id);var r=this._edgesMap;return this._directed?r[e+"-"+n]:r[e+"-"+n]||r[n+"-"+e]},t.prototype.eachNode=function(e,n){for(var r=this.nodes,i=r.length,a=0;a<i;a++)r[a].dataIndex>=0&&e.call(n,r[a],a)},t.prototype.eachEdge=function(e,n){for(var r=this.edges,i=r.length,a=0;a<i;a++)r[a].dataIndex>=0&&r[a].node1.dataIndex>=0&&r[a].node2.dataIndex>=0&&e.call(n,r[a],a)},t.prototype.breadthFirstTraverse=function(e,n,r,i){if(n instanceof ef||(n=this._nodesMap[kd(n)]),!!n){for(var a=r==="out"?"outEdges":r==="in"?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!e.call(i,n,null))for(var s=[n];s.length;)for(var l=s.shift(),u=l[a],o=0;o<u.length;o++){var c=u[o],f=c.node1===l?c.node2:c.node1;if(!f.__visited){if(e.call(i,f,l))return;s.push(f),f.__visited=!0}}}},t.prototype.update=function(){for(var e=this.data,n=this.edgeData,r=this.nodes,i=this.edges,a=0,o=r.length;a<o;a++)r[a].dataIndex=-1;for(var a=0,o=e.count();a<o;a++)r[e.getRawIndex(a)].dataIndex=a;n.filterSelf(function(s){var l=i[n.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var a=0,o=i.length;a<o;a++)i[a].dataIndex=-1;for(var a=0,o=n.count();a<o;a++)i[n.getRawIndex(a)].dataIndex=a},t.prototype.clone=function(){for(var e=new t(this._directed),n=this.nodes,r=this.edges,i=0;i<n.length;i++)e.addNode(n[i].id,n[i].dataIndex);for(var i=0;i<r.length;i++){var a=r[i];e.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return e},t}(),ef=function(){function t(e,n){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e??"",this.dataIndex=n??-1}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var n=this.hostGraph,r=n.data.getItemModel(this.dataIndex);return r.getModel(e)}},t.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},n=0;n<this.edges.length;n++){var r=this.edges[n];r.dataIndex<0||(e.edge.push(r.dataIndex),e.node.push(r.node1.dataIndex,r.node2.dataIndex))}return e},t.prototype.getTrajectoryDataIndices=function(){for(var e=ii(),n=ii(),r=0;r<this.edges.length;r++){var i=this.edges[r];if(!(i.dataIndex<0)){e.set(i.dataIndex,!0);for(var a=[i.node1],o=[i.node2],s=0;s<a.length;){var l=a[s];s++,n.set(l.dataIndex,!0);for(var u=0;u<l.inEdges.length;u++)e.set(l.inEdges[u].dataIndex,!0),a.push(l.inEdges[u].node1)}for(s=0;s<o.length;){var c=o[s];s++,n.set(c.dataIndex,!0);for(var u=0;u<c.outEdges.length;u++)e.set(c.outEdges[u].dataIndex,!0),o.push(c.outEdges[u].node2)}}}return{edge:e.keys(),node:n.keys()}},t}(),cZ=function(){function t(e,n,r){this.dataIndex=-1,this.node1=e,this.node2=n,this.dataIndex=r??-1}return t.prototype.getModel=function(e){if(!(this.dataIndex<0)){var n=this.hostGraph,r=n.edgeData.getItemModel(this.dataIndex);return r.getModel(e)}},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t.prototype.getTrajectoryDataIndices=function(){var e=ii(),n=ii();e.set(this.dataIndex,!0);for(var r=[this.node1],i=[this.node2],a=0;a<r.length;){var o=r[a];a++,n.set(o.dataIndex,!0);for(var s=0;s<o.inEdges.length;s++)e.set(o.inEdges[s].dataIndex,!0),r.push(o.inEdges[s].node1)}for(a=0;a<i.length;){var l=i[a];a++,n.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)e.set(l.outEdges[s].dataIndex,!0),i.push(l.outEdges[s].node2)}return{edge:e.keys(),node:n.keys()}},t}();function fZ(t,e){return{getValue:function(n){var r=this[t][e];return r.getStore().get(r.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,r){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,n,r)},getVisual:function(n){return this[t][e].getItemVisual(this.dataIndex,n)},setLayout:function(n,r){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,n,r)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}Ac(ef,fZ("hostGraph","data"));Ac(cZ,fZ("hostGraph","edgeData"));function dZ(t,e,n,r,i){for(var a=new S1e(r),o=0;o<t.length;o++)a.addNode(Ks(t[o].id,t[o].name,o),o);for(var s=[],l=[],u=0,o=0;o<e.length;o++){var c=e[o],f=c.source,d=c.target;a.addEdge(f,d,u)&&(l.push(c),s.push(Ks(Yl(c.id,null),f+" > "+d)),u++)}var h=n.get("coordinateSystem"),p;if(h==="cartesian2d"||h==="polar")p=td(t,n);else{var g=BU.get(h),v=g?g.dimensions||[]:[];ai(v,"value")<0&&v.concat(["value"]);var m=t2(t,{coordDimensions:v,encodeDefine:n.getEncode()}).dimensions;p=new io(m,n),p.initData(t)}var y=new io(["value"],n);return y.initData(l,s),i&&i(p,y),XX({mainData:p,struct:a,structAttr:"graph",datas:{node:p,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var E1e=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments);var r=this;function i(){return r._categoriesData}this.legendVisualProvider=new Av(i,i),this.fillDataTextStyle(n.edges||n.links),this._updateCategoriesData()},e.prototype.mergeOption=function(n){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(n.edges||n.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(n){t.prototype.mergeDefaultAndTheme.apply(this,arguments),Kx(n,"edgeLabel",["show"])},e.prototype.getInitialData=function(n,r){var i=n.edges||n.links||[],a=n.data||n.nodes||[],o=this;{h1e(this);var s=dZ(a,i,this,!0,l);return oe(s.edges,function(u){p1e(u.node1,u.node2,this,u.dataIndex)},this),s.data}function l(u,c){u.wrapMethod("getItemModel",function(p){var g=o._categoriesModels,v=p.getShallow("category"),m=g[v];return m&&(m.parentModel=p.parentModel,p.parentModel=m),p});var f=ws.prototype.getModel;function d(p,g){var v=f.call(this,p,g);return v.resolveParentPath=h,v}c.wrapMethod("getItemModel",function(p){return p.resolveParentPath=h,p.getModel=d,p});function h(p){if(p&&(p[0]==="label"||p[1]==="label")){var g=p.slice();return p[0]==="label"?g[0]="edgeLabel":p[1]==="label"&&(g[1]="edgeLabel"),g}return p}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(n,r,i){if(i==="edge"){var a=this.getData(),o=this.getDataParams(n,i),s=a.graph.getEdgeByIndex(n),l=a.getName(s.node1.dataIndex),u=a.getName(s.node2.dataIndex),c=[];return l!=null&&c.push(l),u!=null&&c.push(u),Ss("nameValue",{name:c.join(" > "),value:o.value,noValue:o.value==null})}var f=Yhe({series:this,dataIndex:n,multipleSeries:r});return f},e.prototype._updateCategoriesData=function(){var n=gt(this.option.categories||[],function(i){return i.value!=null?i:ut({value:0},i)}),r=new io(["value"],this);r.initData(n),this._categoriesData=r,this._categoriesModels=r.mapArray(function(i){return r.getItemModel(i)})},e.prototype.setZoom=function(n){this.option.zoom=n},e.prototype.setCenter=function(n){this.option.center=n},e.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Hi),O1e={type:"graphRoam",event:"graphRoam",update:"none"};function k1e(t){t.registerChartView(_1e),t.registerSeriesModel(E1e),t.registerProcessor(l1e),t.registerVisual(u1e),t.registerVisual(c1e),t.registerLayout(g1e),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,m1e),t.registerLayout(b1e),t.registerCoordinateSystem("graphView",{dimensions:ND.dimensions,create:w1e}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Df),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Df),t.registerAction(O1e,function(e,n,r){n.eachComponent({mainType:"series",query:e},function(i){var a=i.coordinateSystem,o=GU(a,e,void 0,r);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}var A1e=["itemStyle","opacity"],T1e=function(t){ge(e,t);function e(n,r){var i=t.call(this)||this,a=i,o=new kc,s=new Xr;return a.setTextContent(s),i.setTextGuideLine(o),i.updateData(n,r,!0),i}return e.prototype.updateData=function(n,r,i){var a=this,o=n.hostModel,s=n.getItemModel(r),l=n.getItemLayout(r),u=s.getModel("emphasis"),c=s.get(A1e);c=c??1,i||hl(a),a.useStyle(n.getItemVisual(r,"style")),a.style.lineJoin="round",i?(a.setShape({points:l.points}),a.style.opacity=0,la(a,{style:{opacity:c}},o,r)):ur(a,{style:{opacity:c},shape:{points:l.points}},o,r),lo(a,s),this._updateLabel(n,r),ua(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(n,r){var i=this,a=this.getTextGuideLine(),o=i.getTextContent(),s=n.hostModel,l=n.getItemModel(r),u=n.getItemLayout(r),c=u.label,f=n.getItemVisual(r,"style"),d=f.fill;so(o,ja(l),{labelFetcher:n.hostModel,labelDataIndex:r,defaultOpacity:f.opacity,defaultText:n.getName(r)},{normal:{align:c.textAlign,verticalAlign:c.verticalAlign}}),i.setTextConfig({local:!0,inside:!!c.inside,insideStroke:d,outsideFill:d});var h=c.linePoints;a.setShape({points:h}),i.textGuideLineConfig={anchor:h?new mi(h[0][0],h[0][1]):null},ur(o,{style:{x:c.x,y:c.y}},s,r),o.attr({rotation:c.rotation,originX:c.x,originY:c.y,z2:10}),qU(i,WU(l),{stroke:d})},e}(tu),M1e=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreLabelLineUpdate=!0,n}return e.prototype.render=function(n,r,i){var a=n.getData(),o=this._data,s=this.group;a.diff(o).add(function(l){var u=new T1e(a,l);a.setItemGraphicEl(l,u),s.add(u)}).update(function(l,u){var c=o.getItemGraphicEl(u);c.updateData(a,l),s.add(c),a.setItemGraphicEl(l,c)}).remove(function(l){var u=o.getItemGraphicEl(l);K1(u,n,l)}).execute(),this._data=a},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(Yi),C1e=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Av(nt(this.getData,this),nt(this.getRawData,this)),this._defaultLabelLine(n)},e.prototype.getInitialData=function(n,r){return u2(this,{coordDimensions:["value"],encodeDefaulter:Rt(FU,this)})},e.prototype._defaultLabelLine=function(n){Kx(n,"labelLine",["show"]);var r=n.labelLine,i=n.emphasis.labelLine;r.show=r.show&&n.label.show,i.show=i.show&&n.emphasis.label.show},e.prototype.getDataParams=function(n){var r=this.getData(),i=t.prototype.getDataParams.call(this,n),a=r.mapDimension("value"),o=r.getSum(a);return i.percent=o?+(r.get(a,n)/o*100).toFixed(2):0,i.$vars.push("percent"),i},e.type="series.funnel",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Hi);function P1e(t,e){return za(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function D1e(t,e){for(var n=t.mapDimension("value"),r=t.mapArray(n,function(l){return l}),i=[],a=e==="ascending",o=0,s=t.count();o<s;o++)i[o]=o;return Tr(e)?i.sort(e):e!=="none"&&i.sort(function(l,u){return a?r[l]-r[u]:r[u]-r[l]}),i}function I1e(t){var e=t.hostModel,n=e.get("orient");t.each(function(r){var i=t.getItemModel(r),a=i.getModel("label"),o=a.get("position"),s=i.getModel("labelLine"),l=t.getItemLayout(r),u=l.points,c=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",f,d,h,p;if(c)o==="insideLeft"?(d=(u[0][0]+u[3][0])/2+5,h=(u[0][1]+u[3][1])/2,f="left"):o==="insideRight"?(d=(u[1][0]+u[2][0])/2-5,h=(u[1][1]+u[2][1])/2,f="right"):(d=(u[0][0]+u[1][0]+u[2][0]+u[3][0])/4,h=(u[0][1]+u[1][1]+u[2][1]+u[3][1])/4,f="center"),p=[[d,h],[d,h]];else{var g=void 0,v=void 0,m=void 0,y=void 0,b=s.get("length");o==="left"?(g=(u[3][0]+u[0][0])/2,v=(u[3][1]+u[0][1])/2,m=g-b,d=m-5,f="right"):o==="right"?(g=(u[1][0]+u[2][0])/2,v=(u[1][1]+u[2][1])/2,m=g+b,d=m+5,f="left"):o==="top"?(g=(u[3][0]+u[0][0])/2,v=(u[3][1]+u[0][1])/2,y=v-b,h=y-5,f="center"):o==="bottom"?(g=(u[1][0]+u[2][0])/2,v=(u[1][1]+u[2][1])/2,y=v+b,h=y+5,f="center"):o==="rightTop"?(g=n==="horizontal"?u[3][0]:u[1][0],v=n==="horizontal"?u[3][1]:u[1][1],n==="horizontal"?(y=v-b,h=y-5,f="center"):(m=g+b,d=m+5,f="top")):o==="rightBottom"?(g=u[2][0],v=u[2][1],n==="horizontal"?(y=v+b,h=y+5,f="center"):(m=g+b,d=m+5,f="bottom")):o==="leftTop"?(g=u[0][0],v=n==="horizontal"?u[0][1]:u[1][1],n==="horizontal"?(y=v-b,h=y-5,f="center"):(m=g-b,d=m-5,f="right")):o==="leftBottom"?(g=n==="horizontal"?u[1][0]:u[3][0],v=n==="horizontal"?u[1][1]:u[2][1],n==="horizontal"?(y=v+b,h=y+5,f="center"):(m=g-b,d=m-5,f="right")):(g=(u[1][0]+u[2][0])/2,v=(u[1][1]+u[2][1])/2,n==="horizontal"?(y=v+b,h=y+5,f="center"):(m=g+b,d=m+5,f="left")),n==="horizontal"?(m=g,d=m):(y=v,h=y),p=[[g,v],[m,y]]}l.label={linePoints:p,x:d,y:h,verticalAlign:"middle",textAlign:f,inside:c}})}function L1e(t,e){t.eachSeriesByType("funnel",function(n){var r=n.getData(),i=r.mapDimension("value"),a=n.get("sort"),o=P1e(n,e),s=n.get("orient"),l=o.width,u=o.height,c=D1e(r,a),f=o.x,d=o.y,h=s==="horizontal"?[mt(n.get("minSize"),u),mt(n.get("maxSize"),u)]:[mt(n.get("minSize"),l),mt(n.get("maxSize"),l)],p=r.getDataExtent(i),g=n.get("min"),v=n.get("max");g==null&&(g=Math.min(p[0],0)),v==null&&(v=p[1]);var m=n.get("funnelAlign"),y=n.get("gap"),b=s==="horizontal"?l:u,x=(b-y*(r.count()-1))/r.count(),w=function(R,F){if(s==="horizontal"){var z=r.get(i,R)||0,N=Kn(z,[g,v],h,!0),L=void 0;switch(m){case"top":L=d;break;case"center":L=d+(u-N)/2;break;case"bottom":L=d+(u-N);break}return[[F,L],[F,L+N]]}var B=r.get(i,R)||0,$=Kn(B,[g,v],h,!0),G;switch(m){case"left":G=f;break;case"center":G=f+(l-$)/2;break;case"right":G=f+l-$;break}return[[G,F],[G+$,F]]};a==="ascending"&&(x=-x,y=-y,s==="horizontal"?f+=l:d+=u,c=c.reverse());for(var _=0;_<c.length;_++){var E=c[_],S=c[_+1],O=r.getItemModel(E);if(s==="horizontal"){var A=O.get(["itemStyle","width"]);A==null?A=x:(A=mt(A,l),a==="ascending"&&(A=-A));var T=w(E,f),I=w(S,f+A);f+=A+y,r.setItemLayout(E,{points:T.concat(I.slice().reverse())})}else{var D=O.get(["itemStyle","height"]);D==null?D=x:(D=mt(D,u),a==="ascending"&&(D=-D));var T=w(E,d),I=w(S,d+D);d+=D+y,r.setItemLayout(E,{points:T.concat(I.slice().reverse())})}}I1e(r)})}function R1e(t){t.registerChartView(M1e),t.registerSeriesModel(C1e),t.registerLayout(L1e),t.registerProcessor(kv("funnel"))}var N1e=.3,F1e=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._dataGroup=new pn,n._initialized=!1,n}return e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(n,r,i,a){this._progressiveEls=null;var o=this._dataGroup,s=n.getData(),l=this._data,u=n.coordinateSystem,c=u.dimensions,f=b8(n);s.diff(l).add(d).update(h).remove(p).execute();function d(v){var m=y8(s,o,v,c,u);OS(m,s,v,f)}function h(v,m){var y=l.getItemGraphicEl(m),b=hZ(s,v,c,u);s.setItemGraphicEl(v,y),ur(y,{shape:{points:b}},n,v),hl(y),OS(y,s,v,f)}function p(v){var m=l.getItemGraphicEl(v);o.remove(m)}if(!this._initialized){this._initialized=!0;var g=z1e(u,n,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(g)}this._data=s},e.prototype.incrementalPrepareRender=function(n,r,i){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(n,r,i){for(var a=r.getData(),o=r.coordinateSystem,s=o.dimensions,l=b8(r),u=this._progressiveEls=[],c=n.start;c<n.end;c++){var f=y8(a,this._dataGroup,c,s,o);f.incremental=!0,OS(f,a,c,l),u.push(f)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(Yi);function z1e(t,e,n){var r=t.model,i=t.getRect(),a=new Dr({shape:{x:i.x,y:i.y,width:i.width,height:i.height}}),o=r.get("layout")==="horizontal"?"width":"height";return a.setShape(o,0),la(a,{shape:{width:i.width,height:i.height}},e,n),a}function hZ(t,e,n,r){for(var i=[],a=0;a<n.length;a++){var o=n[a],s=t.get(t.mapDimension(o),e);j1e(s,r.getAxis(o).type)||i.push(r.dataToPoint(s,o))}return i}function y8(t,e,n,r,i){var a=hZ(t,n,r,i),o=new kc({shape:{points:a},z2:10});return e.add(o),t.setItemGraphicEl(n,o),o}function b8(t){var e=t.get("smooth",!0);return e===!0&&(e=N1e),e=Uhe(e),Xhe(e)&&(e=0),{smooth:e}}function OS(t,e,n,r){t.useStyle(e.getItemVisual(n,"style")),t.style.fill=null,t.setShape("smooth",r.smooth);var i=e.getItemModel(n),a=i.getModel("emphasis");lo(t,i,"lineStyle"),ua(t,a.get("focus"),a.get("blurScope"),a.get("disabled"))}function j1e(t,e){return e==="category"?t==null:t==null||isNaN(t)}var B1e=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return e.prototype.getInitialData=function(n,r){return td(null,this,{useEncodeDefaulter:nt($1e,null,this)})},e.prototype.getRawIndicesByActiveState=function(n){var r=this.coordinateSystem,i=this.getData(),a=[];return r.eachActiveState(i,function(o,s){n===o&&a.push(i.getRawIndex(s))}),a},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(Hi);function $1e(t){var e=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(e){var n={};return oe(e.dimensions,function(r){var i=V1e(r);n[r]=i}),n}}function V1e(t){return+t.replace("dim","")}var q1e=["lineStyle","opacity"],W1e={seriesType:"parallel",reset:function(t,e){var n=t.coordinateSystem,r={normal:t.get(["lineStyle","opacity"]),active:t.get("activeOpacity"),inactive:t.get("inactiveOpacity")};return{progress:function(i,a){n.eachActiveState(a,function(o,s){var l=r[o];if(o==="normal"&&a.hasItemOption){var u=a.getItemModel(s).get(q1e,!0);u!=null&&(l=u)}var c=a.ensureUniqueItemVisual(s,"style");c.opacity=l},i.start,i.end)}}}};function G1e(t){Fo(fge),t.registerChartView(F1e),t.registerSeriesModel(B1e),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,W1e)}var H1e=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return t}(),Y1e=function(t){ge(e,t);function e(n){return t.call(this,n)||this}return e.prototype.getDefaultShape=function(){return new H1e},e.prototype.buildPath=function(n,r){var i=r.extent;n.moveTo(r.x1,r.y1),n.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(n.lineTo(r.x2+i,r.y2),n.bezierCurveTo(r.cpx2+i,r.cpy2,r.cpx1+i,r.cpy1,r.x1+i,r.y1)):(n.lineTo(r.x2,r.y2+i),n.bezierCurveTo(r.cpx2,r.cpy2+i,r.cpx1,r.cpy1+i,r.x1,r.y1+i)),n.closePath()},e.prototype.highlight=function(){f0(this)},e.prototype.downplay=function(){d0(this)},e}(xl),U1e=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._focusAdjacencyDisabled=!1,n}return e.prototype.render=function(n,r,i){var a=this,o=n.getGraph(),s=this.group,l=n.layoutInfo,u=l.width,c=l.height,f=n.getData(),d=n.getData("edge"),h=n.get("orient");this._model=n,s.removeAll(),s.x=l.x,s.y=l.y,o.eachEdge(function(p){var g=new Y1e,v=Yn(g);v.dataIndex=p.dataIndex,v.seriesIndex=n.seriesIndex,v.dataType="edge";var m=p.getModel(),y=m.getModel("lineStyle"),b=y.get("curveness"),x=p.node1.getLayout(),w=p.node1.getModel(),_=w.get("localX"),E=w.get("localY"),S=p.node2.getLayout(),O=p.node2.getModel(),A=O.get("localX"),T=O.get("localY"),I=p.getLayout(),D,R,F,z,N,L,B,$;g.shape.extent=Math.max(1,I.dy),g.shape.orient=h,h==="vertical"?(D=(_!=null?_*u:x.x)+I.sy,R=(E!=null?E*c:x.y)+x.dy,F=(A!=null?A*u:S.x)+I.ty,z=T!=null?T*c:S.y,N=D,L=R*(1-b)+z*b,B=F,$=R*b+z*(1-b)):(D=(_!=null?_*u:x.x)+x.dx,R=(E!=null?E*c:x.y)+I.sy,F=A!=null?A*u:S.x,z=(T!=null?T*c:S.y)+I.ty,N=D*(1-b)+F*b,L=R,B=D*b+F*(1-b),$=z),g.setShape({x1:D,y1:R,x2:F,y2:z,cpx1:N,cpy1:L,cpx2:B,cpy2:$}),g.useStyle(y.getItemStyle()),x8(g.style,h,p);var G=""+m.get("value"),W=ja(m,"edgeLabel");so(g,W,{labelFetcher:{getFormattedLabel:function(q,K,J,Q,se,de){return n.getFormattedLabel(q,K,"edge",Q,Ev(se,W.normal&&W.normal.get("formatter"),G),de)}},labelDataIndex:p.dataIndex,defaultText:G}),g.setTextConfig({position:"inside"});var U=m.getModel("emphasis");lo(g,m,"lineStyle",function(q){var K=q.getItemStyle();return x8(K,h,p),K}),s.add(g),d.setItemGraphicEl(p.dataIndex,g);var Y=U.get("focus");ua(g,Y==="adjacency"?p.getAdjacentDataIndices():Y==="trajectory"?p.getTrajectoryDataIndices():Y,U.get("blurScope"),U.get("disabled"))}),o.eachNode(function(p){var g=p.getLayout(),v=p.getModel(),m=v.get("localX"),y=v.get("localY"),b=v.getModel("emphasis"),x=v.get(["itemStyle","borderRadius"])||0,w=new Dr({shape:{x:m!=null?m*u:g.x,y:y!=null?y*c:g.y,width:g.dx,height:g.dy,r:x},style:v.getModel("itemStyle").getItemStyle(),z2:10});so(w,ja(v),{labelFetcher:{getFormattedLabel:function(E,S){return n.getFormattedLabel(E,S,"node")}},labelDataIndex:p.dataIndex,defaultText:p.id}),w.disableLabelAnimation=!0,w.setStyle("fill",p.getVisual("color")),w.setStyle("decal",p.getVisual("style").decal),lo(w,v),s.add(w),f.setItemGraphicEl(p.dataIndex,w),Yn(w).dataType="node";var _=b.get("focus");ua(w,_==="adjacency"?p.getAdjacentDataIndices():_==="trajectory"?p.getTrajectoryDataIndices():_,b.get("blurScope"),b.get("disabled"))}),f.eachItemGraphicEl(function(p,g){var v=f.getItemModel(g);v.get("draggable")&&(p.drift=function(m,y){a._focusAdjacencyDisabled=!0,this.shape.x+=m,this.shape.y+=y,this.dirty(),i.dispatchAction({type:"dragNode",seriesId:n.id,dataIndex:f.getRawIndex(g),localX:this.shape.x/u,localY:this.shape.y/c})},p.ondragend=function(){a._focusAdjacencyDisabled=!1},p.draggable=!0,p.cursor="move")}),!this._data&&n.isAnimationEnabled()&&s.setClipPath(X1e(s.getBoundingRect(),n,function(){s.removeClipPath()})),this._data=n.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(Yi);function x8(t,e,n){switch(t.fill){case"source":t.fill=n.node1.getVisual("color"),t.decal=n.node1.getVisual("style").decal;break;case"target":t.fill=n.node2.getVisual("color"),t.decal=n.node2.getVisual("style").decal;break;case"gradient":var r=n.node1.getVisual("color"),i=n.node2.getVisual("color");xr(r)&&xr(i)&&(t.fill=new IU(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:r,offset:0},{color:i,offset:1}]))}}function X1e(t,e,n){var r=new Dr({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return la(r,{shape:{width:t.width+20}},e,n),r}var Z1e=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(n,r){var i=n.edges||n.links,a=n.data||n.nodes,o=n.levels;this.levelModels=[];for(var s=this.levelModels,l=0;l<o.length;l++)o[l].depth!=null&&o[l].depth>=0&&(s[o[l].depth]=new ws(o[l],this,r));if(a&&i){var u=dZ(a,i,this,!0,c);return u.data}function c(f,d){f.wrapMethod("getItemModel",function(h,p){var g=h.parentModel,v=g.getData().getItemLayout(p);if(v){var m=v.depth,y=g.levelModels[m];y&&(h.parentModel=y)}return h}),d.wrapMethod("getItemModel",function(h,p){var g=h.parentModel,v=g.getGraph().getEdgeByIndex(p),m=v.node1.getLayout();if(m){var y=m.depth,b=g.levelModels[y];b&&(h.parentModel=b)}return h})}},e.prototype.setNodePosition=function(n,r){var i=this.option.data||this.option.nodes,a=i[n];a.localX=r[0],a.localY=r[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(n,r,i){function a(h){return isNaN(h)||h==null}if(i==="edge"){var o=this.getDataParams(n,i),s=o.data,l=o.value,u=s.source+" -- "+s.target;return Ss("nameValue",{name:u,value:l,noValue:a(l)})}else{var c=this.getGraph().getNodeByIndex(n),f=c.getLayout().value,d=this.getDataParams(n,i).data.name;return Ss("nameValue",{name:d!=null?d+"":null,value:f,noValue:a(f)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(n,r){var i=t.prototype.getDataParams.call(this,n,r);if(i.value==null&&r==="node"){var a=this.getGraph().getNodeByIndex(n),o=a.getLayout().value;i.value=o}return i},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(Hi);function K1e(t,e){t.eachSeriesByType("sankey",function(n){var r=n.get("nodeWidth"),i=n.get("nodeGap"),a=J1e(n,e);n.layoutInfo=a;var o=a.width,s=a.height,l=n.getGraph(),u=l.nodes,c=l.edges;ebe(u);var f=Ms(u,function(g){return g.getLayout().value===0}),d=f.length!==0?0:n.get("layoutIterations"),h=n.get("orient"),p=n.get("nodeAlign");Q1e(u,c,r,i,o,s,d,h,p)})}function J1e(t,e){return za(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Q1e(t,e,n,r,i,a,o,s,l){tbe(t,e,n,i,a,s,l),abe(t,e,a,i,r,o,s),pbe(t,s)}function ebe(t){oe(t,function(e){var n=rc(e.outEdges,lb),r=rc(e.inEdges,lb),i=e.getValue()||0,a=Math.max(n,r,i);e.setLayout({value:a},!0)})}function tbe(t,e,n,r,i,a,o){for(var s=[],l=[],u=[],c=[],f=0,d=0;d<e.length;d++)s[d]=1;for(var d=0;d<t.length;d++)l[d]=t[d].inEdges.length,l[d]===0&&u.push(t[d]);for(var h=-1;u.length;){for(var p=0;p<u.length;p++){var g=u[p],v=g.hostGraph.data.getRawDataItem(g.dataIndex),m=v.depth!=null&&v.depth>=0;m&&v.depth>h&&(h=v.depth),g.setLayout({depth:m?v.depth:f},!0),a==="vertical"?g.setLayout({dy:n},!0):g.setLayout({dx:n},!0);for(var y=0;y<g.outEdges.length;y++){var b=g.outEdges[y],x=e.indexOf(b);s[x]=0;var w=b.node2,_=t.indexOf(w);--l[_]===0&&c.indexOf(w)<0&&c.push(w)}}++f,u=c,c=[]}for(var d=0;d<s.length;d++)if(s[d]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var E=h>f-1?h:f-1;o&&o!=="left"&&nbe(t,o,a,E);var S=a==="vertical"?(i-n)/E:(r-n)/E;ibe(t,S,a)}function pZ(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return e.depth!=null&&e.depth>=0}function nbe(t,e,n,r){if(e==="right"){for(var i=[],a=t,o=0;a.length;){for(var s=0;s<a.length;s++){var l=a[s];l.setLayout({skNodeHeight:o},!0);for(var u=0;u<l.inEdges.length;u++){var c=l.inEdges[u];i.indexOf(c.node1)<0&&i.push(c.node1)}}a=i,i=[],++o}oe(t,function(f){pZ(f)||f.setLayout({depth:Math.max(0,r-f.getLayout().skNodeHeight)},!0)})}else e==="justify"&&rbe(t,r)}function rbe(t,e){oe(t,function(n){!pZ(n)&&!n.outEdges.length&&n.setLayout({depth:e},!0)})}function ibe(t,e,n){oe(t,function(r){var i=r.getLayout().depth*e;n==="vertical"?r.setLayout({y:i},!0):r.setLayout({x:i},!0)})}function abe(t,e,n,r,i,a,o){var s=obe(t,o);sbe(s,e,n,r,i,o),kS(s,i,n,r,o);for(var l=1;a>0;a--)l*=.99,lbe(s,l,o),kS(s,i,n,r,o),hbe(s,l,o),kS(s,i,n,r,o)}function obe(t,e){var n=[],r=e==="vertical"?"y":"x",i=EC(t,function(a){return a.getLayout()[r]});return i.keys.sort(function(a,o){return a-o}),oe(i.keys,function(a){n.push(i.buckets.get(a))}),n}function sbe(t,e,n,r,i,a){var o=1/0;oe(t,function(s){var l=s.length,u=0;oe(s,function(f){u+=f.getLayout().value});var c=a==="vertical"?(r-(l-1)*i)/u:(n-(l-1)*i)/u;c<o&&(o=c)}),oe(t,function(s){oe(s,function(l,u){var c=l.getLayout().value*o;a==="vertical"?(l.setLayout({x:u},!0),l.setLayout({dx:c},!0)):(l.setLayout({y:u},!0),l.setLayout({dy:c},!0))})}),oe(e,function(s){var l=+s.getValue()*o;s.setLayout({dy:l},!0)})}function kS(t,e,n,r,i){var a=i==="vertical"?"x":"y";oe(t,function(o){o.sort(function(g,v){return g.getLayout()[a]-v.getLayout()[a]});for(var s,l,u,c=0,f=o.length,d=i==="vertical"?"dx":"dy",h=0;h<f;h++)l=o[h],u=c-l.getLayout()[a],u>0&&(s=l.getLayout()[a]+u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),c=l.getLayout()[a]+l.getLayout()[d]+e;var p=i==="vertical"?r:n;if(u=c-e-p,u>0){s=l.getLayout()[a]-u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),c=s;for(var h=f-2;h>=0;--h)l=o[h],u=l.getLayout()[a]+l.getLayout()[d]+e-c,u>0&&(s=l.getLayout()[a]-u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),c=l.getLayout()[a]}})}function lbe(t,e,n){oe(t.slice().reverse(),function(r){oe(r,function(i){if(i.outEdges.length){var a=rc(i.outEdges,ube,n)/rc(i.outEdges,lb);if(isNaN(a)){var o=i.outEdges.length;a=o?rc(i.outEdges,cbe,n)/o:0}if(n==="vertical"){var s=i.getLayout().x+(a-fc(i,n))*e;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(a-fc(i,n))*e;i.setLayout({y:l},!0)}}})})}function ube(t,e){return fc(t.node2,e)*t.getValue()}function cbe(t,e){return fc(t.node2,e)}function fbe(t,e){return fc(t.node1,e)*t.getValue()}function dbe(t,e){return fc(t.node1,e)}function fc(t,e){return e==="vertical"?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function lb(t){return t.getValue()}function rc(t,e,n){for(var r=0,i=t.length,a=-1;++a<i;){var o=+e(t[a],n);isNaN(o)||(r+=o)}return r}function hbe(t,e,n){oe(t,function(r){oe(r,function(i){if(i.inEdges.length){var a=rc(i.inEdges,fbe,n)/rc(i.inEdges,lb);if(isNaN(a)){var o=i.inEdges.length;a=o?rc(i.inEdges,dbe,n)/o:0}if(n==="vertical"){var s=i.getLayout().x+(a-fc(i,n))*e;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(a-fc(i,n))*e;i.setLayout({y:l},!0)}}})})}function pbe(t,e){var n=e==="vertical"?"x":"y";oe(t,function(r){r.outEdges.sort(function(i,a){return i.node2.getLayout()[n]-a.node2.getLayout()[n]}),r.inEdges.sort(function(i,a){return i.node1.getLayout()[n]-a.node1.getLayout()[n]})}),oe(t,function(r){var i=0,a=0;oe(r.outEdges,function(o){o.setLayout({sy:i},!0),i+=o.getLayout().dy}),oe(r.inEdges,function(o){o.setLayout({ty:a},!0),a+=o.getLayout().dy})})}function gbe(t){t.eachSeriesByType("sankey",function(e){var n=e.getGraph(),r=n.nodes,i=n.edges;if(r.length){var a=1/0,o=-1/0;oe(r,function(s){var l=s.getLayout().value;l<a&&(a=l),l>o&&(o=l)}),oe(r,function(s){var l=new bi({type:"color",mappingMethod:"linear",dataExtent:[a,o],visual:e.get("color")}),u=l.mapValueToVisual(s.getLayout().value),c=s.getModel().get(["itemStyle","color"]);c!=null?(s.setVisual("color",c),s.setVisual("style",{fill:c})):(s.setVisual("color",u),s.setVisual("style",{fill:u}))})}i.length&&oe(i,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function vbe(t){t.registerChartView(U1e),t.registerSeriesModel(Z1e),t.registerLayout(K1e),t.registerVisual(gbe),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,n){n.eachComponent({mainType:"series",subType:"sankey",query:e},function(r){r.setNodePosition(e.dataIndex,[e.localX,e.localY])})})}var gZ=function(){function t(){}return t.prototype.getInitialData=function(e,n){var r,i=n.getComponent("xAxis",this.get("xAxisIndex")),a=n.getComponent("yAxis",this.get("yAxisIndex")),o=i.get("type"),s=a.get("type"),l;o==="category"?(e.layout="horizontal",r=i.getOrdinalMeta(),l=!0):s==="category"?(e.layout="vertical",r=a.getOrdinalMeta(),l=!0):e.layout=e.layout||"horizontal";var u=["x","y"],c=e.layout==="horizontal"?0:1,f=this._baseAxisDim=u[c],d=u[1-c],h=[i,a],p=h[c].get("type"),g=h[1-c].get("type"),v=e.data;if(v&&l){var m=[];oe(v,function(x,w){var _;at(x)?(_=x.slice(),x.unshift(w)):at(x.value)?(_=ut({},x),_.value=_.value.slice(),x.value.unshift(w)):_=x,m.push(_)}),e.data=m}var y=this.defaultValueDimensions,b=[{name:f,type:OC(p),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:OC(g),dimsDef:y.slice()}];return u2(this,{coordDimensions:b,dimensionsCount:y.length+1,encodeDefaulter:Rt(Zhe,b,this)})},t.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},t}(),vZ=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(Hi);Ac(vZ,gZ,!0);var mbe=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=n.getData(),o=this.group,s=this._data;this._data||o.removeAll();var l=n.get("layout")==="horizontal"?1:0;a.diff(s).add(function(u){if(a.hasValue(u)){var c=a.getItemLayout(u),f=w8(c,a,u,l,!0);a.setItemGraphicEl(u,f),o.add(f)}}).update(function(u,c){var f=s.getItemGraphicEl(c);if(!a.hasValue(u)){o.remove(f);return}var d=a.getItemLayout(u);f?(hl(f),mZ(d,f,a,u)):f=w8(d,a,u,l),o.add(f),a.setItemGraphicEl(u,f)}).remove(function(u){var c=s.getItemGraphicEl(u);c&&o.remove(c)}).execute(),this._data=a},e.prototype.remove=function(n){var r=this.group,i=this._data;this._data=null,i&&i.eachItemGraphicEl(function(a){a&&r.remove(a)})},e.type="boxplot",e}(Yi),ybe=function(){function t(){}return t}(),bbe=function(t){ge(e,t);function e(n){var r=t.call(this,n)||this;return r.type="boxplotBoxPath",r}return e.prototype.getDefaultShape=function(){return new ybe},e.prototype.buildPath=function(n,r){var i=r.points,a=0;for(n.moveTo(i[a][0],i[a][1]),a++;a<4;a++)n.lineTo(i[a][0],i[a][1]);for(n.closePath();a<i.length;a++)n.moveTo(i[a][0],i[a][1]),a++,n.lineTo(i[a][0],i[a][1])},e}(xl);function w8(t,e,n,r,i){var a=t.ends,o=new bbe({shape:{points:i?xbe(a,r,t):a}});return mZ(t,o,e,n,i),o}function mZ(t,e,n,r,i){var a=n.hostModel,o=r2[i?"initProps":"updateProps"];o(e,{shape:{points:t.ends}},a,r),e.useStyle(n.getItemVisual(r,"style")),e.style.strokeNoScale=!0,e.z2=100;var s=n.getItemModel(r),l=s.getModel("emphasis");lo(e,s),ua(e,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function xbe(t,e,n){return gt(t,function(r){return r=r.slice(),r[e]=n.initBaseline,r})}var Gg=oe;function wbe(t){var e=_be(t);Gg(e,function(n){var r=n.seriesModels;r.length&&(Sbe(n),Gg(r,function(i,a){Ebe(i,n.boxOffsetList[a],n.boxWidthList[a])}))})}function _be(t){var e=[],n=[];return t.eachSeriesByType("boxplot",function(r){var i=r.getBaseAxis(),a=ai(n,i);a<0&&(a=n.length,n[a]=i,e[a]={axis:i,seriesModels:[]}),e[a].seriesModels.push(r)}),e}function Sbe(t){var e=t.axis,n=t.seriesModels,r=n.length,i=t.boxWidthList=[],a=t.boxOffsetList=[],o=[],s;if(e.type==="category")s=e.getBandWidth();else{var l=0;Gg(n,function(p){l=Math.max(l,p.getData().count())});var u=e.getExtent();s=Math.abs(u[1]-u[0])/l}Gg(n,function(p){var g=p.get("boxWidth");at(g)||(g=[g,g]),o.push([mt(g[0],s)||0,mt(g[1],s)||0])});var c=s*.8-2,f=c/r*.3,d=(c-f*(r-1))/r,h=d/2-c/2;Gg(n,function(p,g){a.push(h),h+=f+d,i.push(Math.min(Math.max(d,o[g][0]),o[g][1]))})}function Ebe(t,e,n){var r=t.coordinateSystem,i=t.getData(),a=n/2,o=t.get("layout")==="horizontal"?0:1,s=1-o,l=["x","y"],u=i.mapDimension(l[o]),c=i.mapDimensionsAll(l[s]);if(u==null||c.length<5)return;for(var f=0;f<i.count();f++){var d=i.get(u,f),h=b(d,c[2],f),p=b(d,c[0],f),g=b(d,c[1],f),v=b(d,c[3],f),m=b(d,c[4],f),y=[];x(y,g,!1),x(y,v,!0),y.push(p,g,m,v),w(y,p),w(y,m),w(y,h),i.setItemLayout(f,{initBaseline:h[s],ends:y})}function b(_,E,S){var O=i.get(E,S),A=[];A[o]=_,A[s]=O;var T;return isNaN(_)||isNaN(O)?T=[NaN,NaN]:(T=r.dataToPoint(A),T[o]+=e),T}function x(_,E,S){var O=E.slice(),A=E.slice();O[o]+=a,A[o]-=a,S?_.push(O,A):_.push(A,O)}function w(_,E){var S=E.slice(),O=E.slice();S[o]-=a,O[o]+=a,_.push(S,O)}}function Obe(t,e){e=e||{};for(var n=[],r=[],i=e.boundIQR,a=i==="none"||i===0,o=0;o<t.length;o++){var s=Co(t[o].slice()),l=z_(s,.25),u=z_(s,.5),c=z_(s,.75),f=s[0],d=s[s.length-1],h=(i??1.5)*(c-l),p=a?f:Math.max(f,l-h),g=a?d:Math.min(d,c+h),v=e.itemNameFormatter,m=Tr(v)?v({value:o}):xr(v)?v.replace("{value}",o+""):o+"";n.push([m,p,l,u,c,g]);for(var y=0;y<s.length;y++){var b=s[y];if(b<p||b>g){var x=[m,b];r.push(x)}}}return{boxData:n,outliers:r}}var kbe={type:"echarts:boxplot",transform:function(e){var n=e.upstream;if(n.sourceFormat!==Khe){var r="";Jhe(r)}var i=Obe(n.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:i.boxData},{data:i.outliers}]}};function Abe(t){t.registerSeriesModel(vZ),t.registerChartView(mbe),t.registerLayout(wbe),t.registerTransform(kbe)}var Tbe=["color","borderColor"],Mbe=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(n),this._isLargeDraw?this._renderLarge(n):this._renderNormal(n)},e.prototype.incrementalPrepareRender=function(n,r,i){this._clear(),this._updateDrawMode(n)},e.prototype.incrementalRender=function(n,r,i,a){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(n,r):this._incrementalRenderNormal(n,r)},e.prototype.eachRendered=function(n){e2(this._progressiveEls||this.group,n)},e.prototype._updateDrawMode=function(n){var r=n.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(n){var r=n.getData(),i=this._data,a=this.group,o=r.getLayout("isSimpleBox"),s=n.get("clip",!0),l=n.coordinateSystem,u=l.getArea&&l.getArea();this._data||a.removeAll(),r.diff(i).add(function(c){if(r.hasValue(c)){var f=r.getItemLayout(c);if(s&&_8(u,f))return;var d=AS(f,c,!0);la(d,{shape:{points:f.ends}},n,c),TS(d,r,c,o),a.add(d),r.setItemGraphicEl(c,d)}}).update(function(c,f){var d=i.getItemGraphicEl(f);if(!r.hasValue(c)){a.remove(d);return}var h=r.getItemLayout(c);if(s&&_8(u,h)){a.remove(d);return}d?(ur(d,{shape:{points:h.ends}},n,c),hl(d)):d=AS(h),TS(d,r,c,o),a.add(d),r.setItemGraphicEl(c,d)}).remove(function(c){var f=i.getItemGraphicEl(c);f&&a.remove(f)}).execute(),this._data=r},e.prototype._renderLarge=function(n){this._clear(),S8(n,this.group);var r=n.get("clip",!0)?LD(n.coordinateSystem,!1,n):null;r?this.group.setClipPath(r):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(n,r){for(var i=r.getData(),a=i.getLayout("isSimpleBox"),o;(o=n.next())!=null;){var s=i.getItemLayout(o),l=AS(s);TS(l,i,o,a),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(n,r){S8(r,this.group,this._progressiveEls,!0)},e.prototype.remove=function(n){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(Yi),Cbe=function(){function t(){}return t}(),Pbe=function(t){ge(e,t);function e(n){var r=t.call(this,n)||this;return r.type="normalCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new Cbe},e.prototype.buildPath=function(n,r){var i=r.points;this.__simpleBox?(n.moveTo(i[4][0],i[4][1]),n.lineTo(i[6][0],i[6][1])):(n.moveTo(i[0][0],i[0][1]),n.lineTo(i[1][0],i[1][1]),n.lineTo(i[2][0],i[2][1]),n.lineTo(i[3][0],i[3][1]),n.closePath(),n.moveTo(i[4][0],i[4][1]),n.lineTo(i[5][0],i[5][1]),n.moveTo(i[6][0],i[6][1]),n.lineTo(i[7][0],i[7][1]))},e}(xl);function AS(t,e,n){var r=t.ends;return new Pbe({shape:{points:n?Dbe(r,t):r},z2:100})}function _8(t,e){for(var n=!0,r=0;r<e.ends.length;r++)if(t.contain(e.ends[r][0],e.ends[r][1])){n=!1;break}return n}function TS(t,e,n,r){var i=e.getItemModel(n);t.useStyle(e.getItemVisual(n,"style")),t.style.strokeNoScale=!0,t.__simpleBox=r,lo(t,i)}function Dbe(t,e){return gt(t,function(n){return n=n.slice(),n[1]=e.initBaseline,n})}var Ibe=function(){function t(){}return t}(),MS=function(t){ge(e,t);function e(n){var r=t.call(this,n)||this;return r.type="largeCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new Ibe},e.prototype.buildPath=function(n,r){for(var i=r.points,a=0;a<i.length;)if(this.__sign===i[a++]){var o=i[a++];n.moveTo(o,i[a++]),n.lineTo(o,i[a++])}else a+=3},e}(xl);function S8(t,e,n,r){var i=t.getData(),a=i.getLayout("largePoints"),o=new MS({shape:{points:a},__sign:1,ignoreCoarsePointer:!0});e.add(o);var s=new MS({shape:{points:a},__sign:-1,ignoreCoarsePointer:!0});e.add(s);var l=new MS({shape:{points:a},__sign:0,ignoreCoarsePointer:!0});e.add(l),CS(1,o,t),CS(-1,s,t),CS(0,l,t),r&&(o.incremental=!0,s.incremental=!0),n&&n.push(o,s)}function CS(t,e,n,r){var i=n.get(["itemStyle",t>0?"borderColor":"borderColor0"])||n.get(["itemStyle",t>0?"color":"color0"]);t===0&&(i=n.get(["itemStyle","borderColorDoji"]));var a=n.getModel("itemStyle").getItemStyle(Tbe);e.useStyle(a),e.style.fill=null,e.style.stroke=i}var yZ=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(n,r,i){var a=r.getItemLayout(n);return a&&i.rect(a.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(Hi);Ac(yZ,gZ,!0);function Lbe(t){!t||!at(t.series)||oe(t.series,function(e){oo(e)&&e.type==="k"&&(e.type="candlestick")})}var Rbe=["itemStyle","borderColor"],Nbe=["itemStyle","borderColor0"],Fbe=["itemStyle","borderColorDoji"],zbe=["itemStyle","color"],jbe=["itemStyle","color0"],Bbe={seriesType:"candlestick",plan:$U(),performRawSeries:!0,reset:function(t,e){function n(a,o){return o.get(a>0?zbe:jbe)}function r(a,o){return o.get(a===0?Fbe:a>0?Rbe:Nbe)}if(!e.isSeriesFiltered(t)){var i=t.pipelineContext.large;return!i&&{progress:function(a,o){for(var s;(s=a.next())!=null;){var l=o.getItemModel(s),u=o.getItemLayout(s).sign,c=l.getItemStyle();c.fill=n(u,l),c.stroke=r(u,l)||c.fill;var f=o.ensureUniqueItemVisual(s,"style");ut(f,c)}}}}}},$be={seriesType:"candlestick",plan:$U(),reset:function(t){var e=t.coordinateSystem,n=t.getData(),r=Vbe(t,n),i=0,a=1,o=["x","y"],s=n.getDimensionIndex(n.mapDimension(o[i])),l=gt(n.mapDimensionsAll(o[a]),n.getDimensionIndex,n),u=l[0],c=l[1],f=l[2],d=l[3];if(n.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),s<0||l.length<4)return;return{progress:t.pipelineContext.large?p:h};function h(g,v){for(var m,y=v.getStore();(m=g.next())!=null;){var b=y.get(s,m),x=y.get(u,m),w=y.get(c,m),_=y.get(f,m),E=y.get(d,m),S=Math.min(x,w),O=Math.max(x,w),A=N(S,b),T=N(O,b),I=N(_,b),D=N(E,b),R=[];L(R,T,0),L(R,A,1),R.push($(D),$(T),$(I),$(A));var F=v.getItemModel(m),z=!!F.get(["itemStyle","borderColorDoji"]);v.setItemLayout(m,{sign:E8(y,m,x,w,c,z),initBaseline:x>w?T[a]:A[a],ends:R,brushRect:B(_,E,b)})}function N(G,W){var U=[];return U[i]=W,U[a]=G,isNaN(W)||isNaN(G)?[NaN,NaN]:e.dataToPoint(U)}function L(G,W,U){var Y=W.slice(),q=W.slice();Y[i]=j_(Y[i]+r/2,1,!1),q[i]=j_(q[i]-r/2,1,!0),U?G.push(Y,q):G.push(q,Y)}function B(G,W,U){var Y=N(G,U),q=N(W,U);return Y[i]-=r/2,q[i]-=r/2,{x:Y[0],y:Y[1],width:r,height:q[1]-Y[1]}}function $(G){return G[i]=j_(G[i],1),G}}function p(g,v){for(var m=Qhe(g.count*4),y=0,b,x=[],w=[],_,E=v.getStore(),S=!!t.get(["itemStyle","borderColorDoji"]);(_=g.next())!=null;){var O=E.get(s,_),A=E.get(u,_),T=E.get(c,_),I=E.get(f,_),D=E.get(d,_);if(isNaN(O)||isNaN(I)||isNaN(D)){m[y++]=NaN,y+=3;continue}m[y++]=E8(E,_,A,T,c,S),x[i]=O,x[a]=I,b=e.dataToPoint(x,null,w),m[y++]=b?b[0]:NaN,m[y++]=b?b[1]:NaN,x[a]=D,b=e.dataToPoint(x,null,w),m[y++]=b?b[1]:NaN}v.setLayout("largePoints",m)}}};function E8(t,e,n,r,i,a){var o;return n>r?o=-1:n<r?o=1:o=a?0:e>0?t.get(i,e-1)<=r?1:-1:1,o}function Vbe(t,e){var n=t.getBaseAxis(),r,i=n.type==="category"?n.getBandWidth():(r=n.getExtent(),Math.abs(r[1]-r[0])/e.count()),a=mt(Mo(t.get("barMaxWidth"),i),i),o=mt(Mo(t.get("barMinWidth"),1),i),s=t.get("barWidth");return s!=null?mt(s,i):Math.max(Math.min(i/2,a),o)}function qbe(t){t.registerChartView(Mbe),t.registerSeriesModel(yZ),t.registerPreprocessor(Lbe),t.registerVisual(Bbe),t.registerLayout($be)}function O8(t,e){var n=e.rippleEffectColor||e.color;t.eachChild(function(r){r.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?n:null,fill:e.brushType==="fill"?n:null}})})}var Wbe=function(t){ge(e,t);function e(n,r){var i=t.call(this)||this,a=new jU(n,r),o=new pn;return i.add(a),i.add(o),i.updateData(n,r),i}return e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(n){for(var r=n.symbolType,i=n.color,a=n.rippleNumber,o=this.childAt(1),s=0;s<a;s++){var l=zo(r,-1,-1,2,2,i);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var u=-s/a*n.period+n.effectOffset;l.animate("",!0).when(n.period,{scaleX:n.rippleScale/2,scaleY:n.rippleScale/2}).delay(u).start(),l.animateStyle(!0).when(n.period,{opacity:0}).delay(u).start(),o.add(l)}O8(o,n)},e.prototype.updateEffectAnimation=function(n){for(var r=this._effectCfg,i=this.childAt(1),a=["symbolType","period","rippleScale","rippleNumber"],o=0;o<a.length;o++){var s=a[o];if(r[s]!==n[s]){this.stopEffectAnimation(),this.startEffectAnimation(n);return}}O8(i,n)},e.prototype.highlight=function(){f0(this)},e.prototype.downplay=function(){d0(this)},e.prototype.getSymbolType=function(){var n=this.childAt(0);return n&&n.getSymbolType()},e.prototype.updateData=function(n,r){var i=this,a=n.hostModel;this.childAt(0).updateData(n,r);var o=this.childAt(1),s=n.getItemModel(r),l=n.getItemVisual(r,"symbol"),u=xv(n.getItemVisual(r,"symbolSize")),c=n.getItemVisual(r,"style"),f=c&&c.fill,d=s.getModel("emphasis");o.setScale(u),o.traverse(function(v){v.setStyle("fill",f)});var h=wv(n.getItemVisual(r,"symbolOffset"),u);h&&(o.x=h[0],o.y=h[1]);var p=n.getItemVisual(r,"symbolRotate");o.rotation=(p||0)*Math.PI/180||0;var g={};g.showEffectOn=a.get("showEffectOn"),g.rippleScale=s.get(["rippleEffect","scale"]),g.brushType=s.get(["rippleEffect","brushType"]),g.period=s.get(["rippleEffect","period"])*1e3,g.effectOffset=r/n.count(),g.z=a.getShallow("z")||0,g.zlevel=a.getShallow("zlevel")||0,g.symbolType=l,g.color=f,g.rippleEffectColor=s.get(["rippleEffect","color"]),g.rippleNumber=s.get(["rippleEffect","number"]),g.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(g):this.startEffectAnimation(g),this._effectCfg=g):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(v){v==="emphasis"?g.showEffectOn!=="render"&&i.startEffectAnimation(g):v==="normal"&&g.showEffectOn!=="render"&&i.stopEffectAnimation()}),this._effectCfg=g,ua(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},e.prototype.fadeOut=function(n){n&&n()},e}(pn),Gbe=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(){this._symbolDraw=new Jx(Wbe)},e.prototype.render=function(n,r,i){var a=n.getData(),o=this._symbolDraw;o.updateData(a,{clipShape:this._getClipShape(n)}),this.group.add(o.group)},e.prototype._getClipShape=function(n){var r=n.coordinateSystem,i=r&&r.getArea&&r.getArea();return n.get("clip",!0)?i:null},e.prototype.updateTransform=function(n,r,i){var a=n.getData();this.group.dirty();var o=n2("").reset(n,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(n){var r=n.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=epe(r.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(n,r){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(Yi),Hbe=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return e.prototype.getInitialData=function(n,r){return td(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(n,r,i){return i.point(r.getItemLayout(n))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(Hi);function Ybe(t){t.registerChartView(Gbe),t.registerSeriesModel(Hbe),t.registerLayout(n2("effectScatter"))}var Ube=256,Xbe=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=f5.createCanvas();this.canvas=e}return t.prototype.update=function(e,n,r,i,a,o){var s=this._getBrush(),l=this._getGradient(a,"inRange"),u=this._getGradient(a,"outOfRange"),c=this.pointSize+this.blurSize,f=this.canvas,d=f.getContext("2d"),h=e.length;f.width=n,f.height=r;for(var p=0;p<h;++p){var g=e[p],v=g[0],m=g[1],y=g[2],b=i(y);d.globalAlpha=b,d.drawImage(s,v-c,m-c)}if(!f.width||!f.height)return f;for(var x=d.getImageData(0,0,f.width,f.height),w=x.data,_=0,E=w.length,S=this.minOpacity,O=this.maxOpacity,A=O-S;_<E;){var b=w[_+3]/256,T=Math.floor(b*(Ube-1))*4;if(b>0){var I=o(b)?l:u;b>0&&(b=b*A+S),w[_++]=I[T],w[_++]=I[T+1],w[_++]=I[T+2],w[_++]=I[T+3]*b*256}else _+=4}return d.putImageData(x,0,0),f},t.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=f5.createCanvas()),n=this.pointSize+this.blurSize,r=n*2;e.width=r,e.height=r;var i=e.getContext("2d");return i.clearRect(0,0,r,r),i.shadowOffsetX=r,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-n,n,this.pointSize,0,Math.PI*2,!0),i.closePath(),i.fill(),e},t.prototype._getGradient=function(e,n){for(var r=this._gradientPixels,i=r[n]||(r[n]=new Uint8ClampedArray(256*4)),a=[0,0,0,0],o=0,s=0;s<256;s++)e[n](s/255,!0,a),i[o++]=a[0],i[o++]=a[1],i[o++]=a[2],i[o++]=a[3];return i},t}();function Zbe(t,e,n){var r=t[1]-t[0];e=gt(e,function(o){return{interval:[(o.interval[0]-t[0])/r,(o.interval[1]-t[0])/r]}});var i=e.length,a=0;return function(o){var s;for(s=a;s<i;s++){var l=e[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}if(s===i)for(s=a-1;s>=0;s--){var l=e[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}return s>=0&&s<i&&n[s]}}function Kbe(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(r){return r>=e[0]&&r<=e[1]}}function k8(t){var e=t.dimensions;return e[0]==="lng"&&e[1]==="lat"}var Jbe=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a;r.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===n&&(a=s)})}),this._progressiveEls=null,this.group.removeAll();var o=n.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(n,i,0,n.getData().count()):k8(o)&&this._renderOnGeo(o,n,a,i)},e.prototype.incrementalPrepareRender=function(n,r,i){this.group.removeAll()},e.prototype.incrementalRender=function(n,r,i,a){var o=r.coordinateSystem;o&&(k8(o)?this.render(r,i,a):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,a,n.start,n.end,!0)))},e.prototype.eachRendered=function(n){e2(this._progressiveEls||this.group,n)},e.prototype._renderOnCartesianAndCalendar=function(n,r,i,a,o){var s=n.coordinateSystem,l=hp(s,"cartesian2d"),u,c,f,d;if(l){var h=s.getAxis("x"),p=s.getAxis("y");u=h.getBandWidth()+.5,c=p.getBandWidth()+.5,f=h.scale.getExtent(),d=p.scale.getExtent()}for(var g=this.group,v=n.getData(),m=n.getModel(["emphasis","itemStyle"]).getItemStyle(),y=n.getModel(["blur","itemStyle"]).getItemStyle(),b=n.getModel(["select","itemStyle"]).getItemStyle(),x=n.get(["itemStyle","borderRadius"]),w=ja(n),_=n.getModel("emphasis"),E=_.get("focus"),S=_.get("blurScope"),O=_.get("disabled"),A=l?[v.mapDimension("x"),v.mapDimension("y"),v.mapDimension("value")]:[v.mapDimension("time"),v.mapDimension("value")],T=i;T<a;T++){var I=void 0,D=v.getItemVisual(T,"style");if(l){var R=v.get(A[0],T),F=v.get(A[1],T);if(isNaN(v.get(A[2],T))||isNaN(R)||isNaN(F)||R<f[0]||R>f[1]||F<d[0]||F>d[1])continue;var z=s.dataToPoint([R,F]);I=new Dr({shape:{x:z[0]-u/2,y:z[1]-c/2,width:u,height:c},style:D})}else{if(isNaN(v.get(A[1],T)))continue;I=new Dr({z2:1,shape:s.dataToRect([v.get(A[0],T)]).contentShape,style:D})}if(v.hasItemOption){var N=v.getItemModel(T),L=N.getModel("emphasis");m=L.getModel("itemStyle").getItemStyle(),y=N.getModel(["blur","itemStyle"]).getItemStyle(),b=N.getModel(["select","itemStyle"]).getItemStyle(),x=N.get(["itemStyle","borderRadius"]),E=L.get("focus"),S=L.get("blurScope"),O=L.get("disabled"),w=ja(N)}I.shape.r=x;var B=n.getRawValue(T),$="-";B&&B[2]!=null&&($=B[2]+""),so(I,w,{labelFetcher:n,labelDataIndex:T,defaultOpacity:D.opacity,defaultText:$}),I.ensureState("emphasis").style=m,I.ensureState("blur").style=y,I.ensureState("select").style=b,ua(I,E,S,O),I.incremental=o,o&&(I.states.emphasis.hoverLayer=!0),g.add(I),v.setItemGraphicEl(T,I),this._progressiveEls&&this._progressiveEls.push(I)}},e.prototype._renderOnGeo=function(n,r,i,a){var o=i.targetVisuals.inRange,s=i.targetVisuals.outOfRange,l=r.getData(),u=this._hmLayer||this._hmLayer||new Xbe;u.blurSize=r.get("blurSize"),u.pointSize=r.get("pointSize"),u.minOpacity=r.get("minOpacity"),u.maxOpacity=r.get("maxOpacity");var c=n.getViewRect().clone(),f=n.getRoamTransform();c.applyTransform(f);var d=Math.max(c.x,0),h=Math.max(c.y,0),p=Math.min(c.width+c.x,a.getWidth()),g=Math.min(c.height+c.y,a.getHeight()),v=p-d,m=g-h,y=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],b=l.mapArray(y,function(E,S,O){var A=n.dataToPoint([E,S]);return A[0]-=d,A[1]-=h,A.push(O),A}),x=i.getExtent(),w=i.type==="visualMap.continuous"?Kbe(x,i.option.range):Zbe(x,i.getPieceList(),i.option.selected);u.update(b,v,m,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:s.color.getColorMapper()},w);var _=new bv({style:{width:v,height:m,x:d,y:h,image:u.canvas},silent:!0});this.group.add(_)},e.type="heatmap",e}(Yi),Qbe=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.getInitialData=function(n,r){return td(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var n=BU.get(this.get("coordinateSystem"));if(n&&n.dimensions)return n.dimensions[0]==="lng"&&n.dimensions[1]==="lat"},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(Hi);function exe(t){t.registerChartView(Jbe),t.registerSeriesModel(Qbe)}var txe=["itemStyle","borderWidth"],A8=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],PS=new gU,nxe=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i){var a=this.group,o=n.getData(),s=this._data,l=n.coordinateSystem,u=l.getBaseAxis(),c=u.isHorizontal(),f=l.master.getRect(),d={ecSize:{width:i.getWidth(),height:i.getHeight()},seriesModel:n,coordSys:l,coordSysExtent:[[f.x,f.x+f.width],[f.y,f.y+f.height]],isHorizontal:c,valueDim:A8[+c],categoryDim:A8[1-+c]};o.diff(s).add(function(p){if(o.hasValue(p)){var g=M8(o,p),v=T8(o,p,g,d),m=C8(o,d,v);o.setItemGraphicEl(p,m),a.add(m),D8(m,d,v)}}).update(function(p,g){var v=s.getItemGraphicEl(g);if(!o.hasValue(p)){a.remove(v);return}var m=M8(o,p),y=T8(o,p,m,d),b=EZ(o,y);v&&b!==v.__pictorialShapeStr&&(a.remove(v),o.setItemGraphicEl(p,null),v=null),v?uxe(v,d,y):v=C8(o,d,y,!0),o.setItemGraphicEl(p,v),v.__pictorialSymbolMeta=y,a.add(v),D8(v,d,y)}).remove(function(p){var g=s.getItemGraphicEl(p);g&&P8(s,p,g.__pictorialSymbolMeta.animationModel,g)}).execute();var h=n.get("clip",!0)?LD(n.coordinateSystem,!1,n):null;return h?a.setClipPath(h):a.removeClipPath(),this._data=o,this.group},e.prototype.remove=function(n,r){var i=this.group,a=this._data;n.get("animation")?a&&a.eachItemGraphicEl(function(o){P8(a,Yn(o).dataIndex,n,o)}):i.removeAll()},e.type="pictorialBar",e}(Yi);function T8(t,e,n,r){var i=t.getItemLayout(e),a=n.get("symbolRepeat"),o=n.get("symbolClip"),s=n.get("symbolPosition")||"start",l=n.get("symbolRotate"),u=(l||0)*Math.PI/180||0,c=n.get("symbolPatternSize")||2,f=n.isAnimationEnabled(),d={dataIndex:e,layout:i,itemModel:n,symbolType:t.getItemVisual(e,"symbol")||"circle",style:t.getItemVisual(e,"style"),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:c,rotation:u,animationModel:f?n:null,hoverScale:f&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};rxe(n,a,i,r,d),ixe(t,e,i,a,o,d.boundingLength,d.pxSign,c,r,d),axe(n,d.symbolScale,u,r,d);var h=d.symbolSize,p=wv(n.get("symbolOffset"),h);return oxe(n,h,i,a,o,p,s,d.valueLineWidth,d.boundingLength,d.repeatCutLength,r,d),d}function rxe(t,e,n,r,i){var a=r.valueDim,o=t.get("symbolBoundingData"),s=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),l=s.toGlobalCoord(s.dataToCoord(0)),u=1-+(n[a.wh]<=0),c;if(at(o)){var f=[DS(s,o[0])-l,DS(s,o[1])-l];f[1]<f[0]&&f.reverse(),c=f[u]}else o!=null?c=DS(s,o)-l:e?c=r.coordSysExtent[a.index][u]-l:c=n[a.wh];i.boundingLength=c,e&&(i.repeatCutLength=n[a.wh]),i.pxSign=c>0?1:-1}function DS(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function ixe(t,e,n,r,i,a,o,s,l,u){var c=l.valueDim,f=l.categoryDim,d=Math.abs(n[f.wh]),h=t.getItemVisual(e,"symbolSize"),p;at(h)?p=h.slice():h==null?p=["100%","100%"]:p=[h,h],p[f.index]=mt(p[f.index],d),p[c.index]=mt(p[c.index],r?d:Math.abs(a)),u.symbolSize=p;var g=u.symbolScale=[p[0]/s,p[1]/s];g[c.index]*=(l.isHorizontal?-1:1)*o}function axe(t,e,n,r,i){var a=t.get(txe)||0;a&&(PS.attr({scaleX:e[0],scaleY:e[1],rotation:n}),PS.updateTransform(),a/=PS.getLineScale(),a*=e[r.valueDim.index]),i.valueLineWidth=a||0}function oxe(t,e,n,r,i,a,o,s,l,u,c,f){var d=c.categoryDim,h=c.valueDim,p=f.pxSign,g=Math.max(e[h.index]+s,0),v=g;if(r){var m=Math.abs(l),y=Ks(t.get("symbolMargin"),"15%")+"",b=!1;y.lastIndexOf("!")===y.length-1&&(b=!0,y=y.slice(0,y.length-1));var x=mt(y,e[h.index]),w=Math.max(g+x*2,0),_=b?0:x*2,E=tpe(r),S=E?r:I8((m+_)/w),O=m-S*g;x=O/2/(b?S:Math.max(S-1,1)),w=g+x*2,_=b?0:x*2,!E&&r!=="fixed"&&(S=u?I8((Math.abs(u)+_)/w):0),v=S*w-_,f.repeatTimes=S,f.symbolMargin=x}var A=p*(v/2),T=f.pathPosition=[];T[d.index]=n[d.wh]/2,T[h.index]=o==="start"?A:o==="end"?l-A:l/2,a&&(T[0]+=a[0],T[1]+=a[1]);var I=f.bundlePosition=[];I[d.index]=n[d.xy],I[h.index]=n[h.xy];var D=f.barRectShape=ut({},n);D[h.wh]=p*Math.max(Math.abs(n[h.wh]),Math.abs(T[h.index]+A)),D[d.wh]=n[d.wh];var R=f.clipShape={};R[d.xy]=-n[d.xy],R[d.wh]=c.ecSize[d.wh],R[h.xy]=0,R[h.wh]=n[h.wh]}function bZ(t){var e=t.symbolPatternSize,n=zo(t.symbolType,-e/2,-e/2,e,e);return n.attr({culling:!0}),n.type!=="image"&&n.setStyle({strokeNoScale:!0}),n}function xZ(t,e,n,r){var i=t.__pictorialBundle,a=n.symbolSize,o=n.valueLineWidth,s=n.pathPosition,l=e.valueDim,u=n.repeatTimes||0,c=0,f=a[e.valueDim.index]+o+n.symbolMargin*2;for(uI(t,function(g){g.__pictorialAnimationIndex=c,g.__pictorialRepeatTimes=u,c<u?fh(g,null,p(c),n,r):fh(g,null,{scaleX:0,scaleY:0},n,r,function(){i.remove(g)}),c++});c<u;c++){var d=bZ(n);d.__pictorialAnimationIndex=c,d.__pictorialRepeatTimes=u,i.add(d);var h=p(c);fh(d,{x:h.x,y:h.y,scaleX:0,scaleY:0},{scaleX:h.scaleX,scaleY:h.scaleY,rotation:h.rotation},n,r)}function p(g){var v=s.slice(),m=n.pxSign,y=g;return(n.symbolRepeatDirection==="start"?m>0:m<0)&&(y=u-1-g),v[l.index]=f*(y-u/2+.5)+s[l.index],{x:v[0],y:v[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function wZ(t,e,n,r){var i=t.__pictorialBundle,a=t.__pictorialMainPath;a?fh(a,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,r):(a=t.__pictorialMainPath=bZ(n),i.add(a),fh(a,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,r))}function _Z(t,e,n){var r=ut({},e.barRectShape),i=t.__pictorialBarRect;i?fh(i,null,{shape:r},e,n):(i=t.__pictorialBarRect=new Dr({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),i.disableMorphing=!0,t.add(i))}function SZ(t,e,n,r){if(n.symbolClip){var i=t.__pictorialClipPath,a=ut({},n.clipShape),o=e.valueDim,s=n.animationModel,l=n.dataIndex;if(i)ur(i,{shape:a},s,l);else{a[o.wh]=0,i=new Dr({shape:a}),t.__pictorialBundle.setClipPath(i),t.__pictorialClipPath=i;var u={};u[o.wh]=n.clipShape[o.wh],r2[r?"updateProps":"initProps"](i,{shape:u},s,l)}}}function M8(t,e){var n=t.getItemModel(e);return n.getAnimationDelayParams=sxe,n.isAnimationEnabled=lxe,n}function sxe(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function lxe(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function C8(t,e,n,r){var i=new pn,a=new pn;return i.add(a),i.__pictorialBundle=a,a.x=n.bundlePosition[0],a.y=n.bundlePosition[1],n.symbolRepeat?xZ(i,e,n):wZ(i,e,n),_Z(i,n,r),SZ(i,e,n,r),i.__pictorialShapeStr=EZ(t,n),i.__pictorialSymbolMeta=n,i}function uxe(t,e,n){var r=n.animationModel,i=n.dataIndex,a=t.__pictorialBundle;ur(a,{x:n.bundlePosition[0],y:n.bundlePosition[1]},r,i),n.symbolRepeat?xZ(t,e,n,!0):wZ(t,e,n,!0),_Z(t,n,!0),SZ(t,e,n,!0)}function P8(t,e,n,r){var i=r.__pictorialBarRect;i&&i.removeTextContent();var a=[];uI(r,function(o){a.push(o)}),r.__pictorialMainPath&&a.push(r.__pictorialMainPath),r.__pictorialClipPath&&(n=null),oe(a,function(o){J1(o,{scaleX:0,scaleY:0},n,e,function(){r.parent&&r.parent.remove(r)})}),t.setItemGraphicEl(e,null)}function EZ(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function uI(t,e,n){oe(t.__pictorialBundle.children(),function(r){r!==t.__pictorialBarRect&&e.call(n,r)})}function fh(t,e,n,r,i,a){e&&t.attr(e),r.symbolClip&&!i?n&&t.attr(n):n&&r2[i?"updateProps":"initProps"](t,n,r.animationModel,r.dataIndex,a)}function D8(t,e,n){var r=n.dataIndex,i=n.itemModel,a=i.getModel("emphasis"),o=a.getModel("itemStyle").getItemStyle(),s=i.getModel(["blur","itemStyle"]).getItemStyle(),l=i.getModel(["select","itemStyle"]).getItemStyle(),u=i.getShallow("cursor"),c=a.get("focus"),f=a.get("blurScope"),d=a.get("scale");uI(t,function(g){if(g instanceof bv){var v=g.style;g.useStyle(ut({image:v.image,x:v.x,y:v.y,width:v.width,height:v.height},n.style))}else g.useStyle(n.style);var m=g.ensureState("emphasis");m.style=o,d&&(m.scaleX=g.scaleX*1.1,m.scaleY=g.scaleY*1.1),g.ensureState("blur").style=s,g.ensureState("select").style=l,u&&(g.cursor=u),g.z2=n.z2});var h=e.valueDim.posDesc[+(n.boundingLength>0)],p=t.__pictorialBarRect;p.ignoreClip=!0,so(p,ja(i),{labelFetcher:e.seriesModel,labelDataIndex:r,defaultText:LU(e.seriesModel.getData(),r),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:h}),ua(t,c,f,a.get("disabled"))}function I8(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}var cxe=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}return e.prototype.getInitialData=function(n){return n.stack=null,t.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=Mc(y0.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(y0);function fxe(t){t.registerChartView(nxe),t.registerSeriesModel(cxe),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,Rt(RU,"pictorialBar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,NU("pictorialBar"))}var dxe=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n._layers=[],n}return e.prototype.render=function(n,r,i){var a=n.getData(),o=this,s=this.group,l=n.getLayerSeries(),u=a.getLayout("layoutInfo"),c=u.rect,f=u.boundaryGap;s.x=0,s.y=c.y+f[0];function d(v){return v.name}var h=new yv(this._layersSeries||[],l,d,d),p=[];h.add(nt(g,this,"add")).update(nt(g,this,"update")).remove(nt(g,this,"remove")).execute();function g(v,m,y){var b=o._layers;if(v==="remove"){s.remove(b[m]);return}for(var x=[],w=[],_,E=l[m].indices,S=0;S<E.length;S++){var O=a.getItemLayout(E[S]),A=O.x,T=O.y0,I=O.y;x.push(A,T),w.push(A,T+I),_=a.getItemVisual(E[S],"style")}var D,R=a.getItemLayout(E[0]),F=n.getModel("label"),z=F.get("margin"),N=n.getModel("emphasis");if(v==="add"){var L=p[m]=new pn;D=new npe({shape:{points:x,stackedOnPoints:w,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),L.add(D),s.add(L),n.isAnimationEnabled()&&D.setClipPath(hxe(D.getBoundingRect(),n,function(){D.removeClipPath()}))}else{var L=b[y];D=L.childAt(0),s.add(L),p[m]=L,ur(D,{shape:{points:x,stackedOnPoints:w}},n),hl(D)}so(D,ja(n),{labelDataIndex:E[S-1],defaultText:a.getName(E[S-1]),inheritColor:_.fill},{normal:{verticalAlign:"middle"}}),D.setTextConfig({position:null,local:!0});var B=D.getTextContent();B&&(B.x=R.x-z,B.y=R.y0+R.y/2),D.useStyle(_),a.setItemGraphicEl(m,D),lo(D,n),ua(D,N.get("focus"),N.get("blurScope"),N.get("disabled"))}this._layersSeries=l,this._layers=p},e.type="themeRiver",e}(Yi);function hxe(t,e,n){var r=new Dr({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return la(r,{shape:{x:t.x-50,width:t.width+100,height:t.height+20}},e,n),r}var IS=2,pxe=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.init=function(n){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Av(nt(this.getData,this),nt(this.getRawData,this))},e.prototype.fixData=function(n){var r=n.length,i={},a=EC(n,function(d){return i.hasOwnProperty(d[0]+"")||(i[d[0]+""]=-1),d[2]}),o=[];a.buckets.each(function(d,h){o.push({name:h,dataList:d})});for(var s=o.length,l=0;l<s;++l){for(var u=o[l].name,c=0;c<o[l].dataList.length;++c){var f=o[l].dataList[c][0]+"";i[f]=l}for(var f in i)i.hasOwnProperty(f)&&i[f]!==l&&(i[f]=l,n[r]=[f,0,u],r++)}return n},e.prototype.getInitialData=function(n,r){for(var i=this.getReferringComponents("singleAxis",Th).models[0],a=i.get("type"),o=Ms(n.data,function(p){return p[2]!==void 0}),s=this.fixData(o||[]),l=[],u=this.nameMap=ii(),c=0,f=0;f<s.length;++f)l.push(s[f][IS]),u.get(s[f][IS])||(u.set(s[f][IS],c),c++);var d=t2(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:OC(a)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,h=new io(d,this);return h.initData(s),h},e.prototype.getLayerSeries=function(){for(var n=this.getData(),r=n.count(),i=[],a=0;a<r;++a)i[a]=a;var o=n.mapDimension("single"),s=EC(i,function(u){return n.get("name",u)}),l=[];return s.buckets.each(function(u,c){u.sort(function(f,d){return n.get(o,f)-n.get(o,d)}),l.push({name:c,indices:u})}),l},e.prototype.getAxisTooltipData=function(n,r,i){at(n)||(n=n?[n]:[]);for(var a=this.getData(),o=this.getLayerSeries(),s=[],l=o.length,u,c=0;c<l;++c){for(var f=Number.MAX_VALUE,d=-1,h=o[c].indices.length,p=0;p<h;++p){var g=a.get(n[0],o[c].indices[p]),v=Math.abs(g-r);v<=f&&(u=g,f=v,d=o[c].indices[p])}s.push(d)}return{dataIndices:s,nestestValue:u}},e.prototype.formatTooltip=function(n,r,i){var a=this.getData(),o=a.getName(n),s=a.get(a.mapDimension("value"),n);return Ss("nameValue",{name:o,value:s})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(Hi);function gxe(t,e){t.eachSeriesByType("themeRiver",function(n){var r=n.getData(),i=n.coordinateSystem,a={},o=i.getRect();a.rect=o;var s=n.get("boundaryGap"),l=i.getAxis();if(a.boundaryGap=s,l.orient==="horizontal"){s[0]=mt(s[0],o.height),s[1]=mt(s[1],o.height);var u=o.height-s[0]-s[1];L8(r,n,u)}else{s[0]=mt(s[0],o.width),s[1]=mt(s[1],o.width);var c=o.width-s[0]-s[1];L8(r,n,c)}r.setLayout("layoutInfo",a)})}function L8(t,e,n){if(t.count())for(var r=e.coordinateSystem,i=e.getLayerSeries(),a=t.mapDimension("single"),o=t.mapDimension("value"),s=gt(i,function(v){return gt(v.indices,function(m){var y=r.dataToPoint(t.get(a,m));return y[1]=t.get(o,m),y})}),l=vxe(s),u=l.y0,c=n/l.max,f=i.length,d=i[0].indices.length,h,p=0;p<d;++p){h=u[p]*c,t.setItemLayout(i[0].indices[p],{layerIndex:0,x:s[0][p][0],y0:h,y:s[0][p][1]*c});for(var g=1;g<f;++g)h+=s[g-1][p][1]*c,t.setItemLayout(i[g].indices[p],{layerIndex:g,x:s[g][p][0],y0:h,y:s[g][p][1]*c})}}function vxe(t){for(var e=t.length,n=t[0].length,r=[],i=[],a=0,o=0;o<n;++o){for(var s=0,l=0;l<e;++l)s+=t[l][o][1];s>a&&(a=s),r.push(s)}for(var u=0;u<n;++u)i[u]=(a-r[u])/2;a=0;for(var c=0;c<n;++c){var f=r[c]+i[c];f>a&&(a=f)}return{y0:i,max:a}}function mxe(t){t.registerChartView(dxe),t.registerSeriesModel(pxe),t.registerLayout(gxe),t.registerProcessor(kv("themeRiver"))}var yxe=2,bxe=4,R8=function(t){ge(e,t);function e(n,r,i,a){var o=t.call(this)||this;o.z2=yxe,o.textConfig={inside:!0},Yn(o).seriesIndex=r.seriesIndex;var s=new Xr({z2:bxe,silent:n.getModel().get(["label","silent"])});return o.setTextContent(s),o.updateData(!0,n,r,i,a),o}return e.prototype.updateData=function(n,r,i,a,o){this.node=r,r.piece=this,i=i||this._seriesModel,a=a||this._ecModel;var s=this;Yn(s).dataIndex=r.dataIndex;var l=r.getModel(),u=l.getModel("emphasis"),c=r.getLayout(),f=ut({},c);f.label=null;var d=r.getVisual("style");d.lineJoin="bevel";var h=r.getVisual("decal");h&&(d.decal=PU(h,o));var p=cf(l.getModel("itemStyle"),f,!0);ut(f,p),oe(l0,function(y){var b=s.ensureState(y),x=l.getModel([y,"itemStyle"]);b.style=x.getItemStyle();var w=cf(x,f);w&&(b.shape=w)}),n?(s.setShape(f),s.shape.r=c.r0,la(s,{shape:{r:c.r}},i,r.dataIndex)):(ur(s,{shape:f},i),hl(s)),s.useStyle(d),this._updateLabel(i);var g=l.getShallow("cursor");g&&s.attr("cursor",g),this._seriesModel=i||this._seriesModel,this._ecModel=a||this._ecModel;var v=u.get("focus"),m=v==="ancestor"?r.getAncestorsIndices():v==="descendant"?r.getDescendantIndices():v;ua(this,m,u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(n){var r=this,i=this.node.getModel(),a=i.getModel("label"),o=this.node.getLayout(),s=o.endAngle-o.startAngle,l=(o.startAngle+o.endAngle)/2,u=Math.cos(l),c=Math.sin(l),f=this,d=f.getTextContent(),h=this.node.dataIndex,p=a.get("minAngle")/180*Math.PI,g=a.get("show")&&!(p!=null&&Math.abs(s)<p);d.ignore=!g,oe(yC,function(m){var y=m==="normal"?i.getModel("label"):i.getModel([m,"label"]),b=m==="normal",x=b?d:d.ensureState(m),w=n.getFormattedLabel(h,m);b&&(w=w||r.node.name),x.style=Ra(y,{},null,m!=="normal",!0),w&&(x.style.text=w);var _=y.get("show");_!=null&&!b&&(x.ignore=!_);var E=v(y,"position"),S=b?f:f.states[m],O=S.style.fill;S.textConfig={outsideFill:y.get("color")==="inherit"?O:null,inside:E!=="outside"};var A,T=v(y,"distance")||0,I=v(y,"align"),D=v(y,"rotate"),R=Math.PI*.5,F=Math.PI*1.5,z=km(D==="tangential"?Math.PI/2-l:l),N=z>R&&!rpe(z-R)&&z<F;E==="outside"?(A=o.r+T,I=N?"right":"left"):!I||I==="center"?(s===2*Math.PI&&o.r0===0?A=0:A=(o.r+o.r0)/2,I="center"):I==="left"?(A=o.r0+T,I=N?"right":"left"):I==="right"&&(A=o.r-T,I=N?"left":"right"),x.style.align=I,x.style.verticalAlign=v(y,"verticalAlign")||"middle",x.x=A*u+o.cx,x.y=A*c+o.cy;var L=0;D==="radial"?L=km(-l)+(N?Math.PI:0):D==="tangential"?L=km(Math.PI/2-l)+(N?Math.PI:0):_s(D)&&(L=D*Math.PI/180),x.rotation=km(L)});function v(m,y){var b=m.get(y);return b??a.get(y)}d.dirtyStyle()},e}(Sv),KC="sunburstRootToNode",N8="sunburstHighlight",xxe="sunburstUnhighlight";function wxe(t){t.registerAction({type:KC,update:"updateView"},function(e,n){n.eachComponent({mainType:"series",subType:"sunburst",query:e},r);function r(i,a){var o=b0(e,[KC],i);if(o){var s=i.getViewRoot();s&&(e.direction=iI(s,o.node)?"rollUp":"drillDown"),i.resetViewRoot(o.node)}}}),t.registerAction({type:N8,update:"none"},function(e,n,r){e=ut({},e),n.eachComponent({mainType:"series",subType:"sunburst",query:e},i);function i(a){var o=b0(e,[N8],a);o&&(e.dataIndex=o.node.dataIndex)}r.dispatchAction(ut(e,{type:"highlight"}))}),t.registerAction({type:xxe,update:"updateView"},function(e,n,r){e=ut({},e),r.dispatchAction(ut(e,{type:"downplay"}))})}var _xe=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n}return e.prototype.render=function(n,r,i,a){var o=this;this.seriesModel=n,this.api=i,this.ecModel=r;var s=n.getData(),l=s.tree.root,u=n.getViewRoot(),c=this.group,f=n.get("renderLabelForZeroData"),d=[];u.eachNode(function(y){d.push(y)});var h=this._oldChildren||[];p(d,h),m(l,u),this._initEvents(),this._oldChildren=d;function p(y,b){if(y.length===0&&b.length===0)return;new yv(b,y,x,x).add(w).update(w).remove(Rt(w,null)).execute();function x(_){return _.getId()}function w(_,E){var S=_==null?null:y[_],O=E==null?null:b[E];g(S,O)}}function g(y,b){if(!f&&y&&!y.getValue()&&(y=null),y!==l&&b!==l){if(b&&b.piece)y?(b.piece.updateData(!1,y,n,r,i),s.setItemGraphicEl(y.dataIndex,b.piece)):v(b);else if(y){var x=new R8(y,n,r,i);c.add(x),s.setItemGraphicEl(y.dataIndex,x)}}}function v(y){y&&y.piece&&(c.remove(y.piece),y.piece=null)}function m(y,b){b.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,y,n,r,i):(o.virtualPiece=new R8(y,n,r,i),c.add(o.virtualPiece)),b.piece.off("click"),o.virtualPiece.on("click",function(x){o._rootToNode(b.parentNode)})):o.virtualPiece&&(c.remove(o.virtualPiece),o.virtualPiece=null)}},e.prototype._initEvents=function(){var n=this;this.group.off("click"),this.group.on("click",function(r){var i=!1,a=n.seriesModel.getViewRoot();a.eachNode(function(o){if(!i&&o.piece&&o.piece===r.target){var s=o.getModel().get("nodeClick");if(s==="rootToNode")n._rootToNode(o);else if(s==="link"){var l=o.getModel(),u=l.get("link");if(u){var c=l.get("target",!0)||"_blank";U1(u,c)}}i=!0}})})},e.prototype._rootToNode=function(n){n!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:KC,from:this.uid,seriesId:this.seriesModel.id,targetNode:n})},e.prototype.containPoint=function(n,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var o=n[0]-a.cx,s=n[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},e.type="sunburst",e}(Yi),Sxe=function(t){ge(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreStyleOnData=!0,n}return e.prototype.getInitialData=function(n,r){var i={name:n.name,children:n.data};OZ(i);var a=this._levelModels=gt(n.levels||[],function(l){return new ws(l,this,r)},this),o=rI.createTree(i,this,s);function s(l){l.wrapMethod("getItemModel",function(u,c){var f=o.getNodeByDataIndex(c),d=a[f.depth];return d&&(u.parentModel=d),u})}return o.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(n){var r=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(n);return r.treePathInfo=c2(i,this),r},e.prototype.getLevelModel=function(n){return this._levelModels&&this._levelModels[n.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var r=this.getRawData().tree.root;(!n||n!==r&&!r.contains(n))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){JX(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(Hi);function OZ(t){var e=0;oe(t.children,function(r){OZ(r);var i=r.value;at(i)&&(i=i[0]),e+=i});var n=t.value;at(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=e),n<0&&(n=0),at(t.value)?t.value[0]=n:t.value=n}var F8=Math.PI/180;function Exe(t,e,n){e.eachSeriesByType(t,function(r){var i=r.get("center"),a=r.get("radius");at(a)||(a=[0,a]),at(i)||(i=[i,i]);var o=n.getWidth(),s=n.getHeight(),l=Math.min(o,s),u=mt(i[0],o),c=mt(i[1],s),f=mt(a[0],l/2),d=mt(a[1],l/2),h=-r.get("startAngle")*F8,p=r.get("minAngle")*F8,g=r.getData().tree.root,v=r.getViewRoot(),m=v.depth,y=r.get("sort");y!=null&&kZ(v,y);var b=0;oe(v.children,function(z){!isNaN(z.getValue())&&b++});var x=v.getValue(),w=Math.PI/(x||b)*2,_=v.depth>0,E=v.height-(_?-1:1),S=(d-f)/(E||1),O=r.get("clockwise"),A=r.get("stillShowZeroSum"),T=O?1:-1,I=function(z,N){if(z){var L=N;if(z!==g){var B=z.getValue(),$=x===0&&A?w:B*w;$<p&&($=p),L=N+T*$;var G=z.depth-m-(_?-1:1),W=f+S*G,U=f+S*(G+1),Y=r.getLevelModel(z);if(Y){var q=Y.get("r0",!0),K=Y.get("r",!0),J=Y.get("radius",!0);J!=null&&(q=J[0],K=J[1]),q!=null&&(W=mt(q,l/2)),K!=null&&(U=mt(K,l/2))}z.setLayout({angle:$,startAngle:N,endAngle:L,clockwise:O,cx:u,cy:c,r0:W,r:U})}if(z.children&&z.children.length){var Q=0;oe(z.children,function(se){Q+=I(se,N+Q)})}return L-N}};if(_){var D=f,R=f+S,F=Math.PI*2;g.setLayout({angle:F,startAngle:h,endAngle:h+F,clockwise:O,cx:u,cy:c,r0:D,r:R})}I(v,h)})}function kZ(t,e){var n=t.children||[];t.children=Oxe(n,e),n.length&&oe(t.children,function(r){kZ(r,e)})}function Oxe(t,e){if(Tr(e)){var n=gt(t,function(i,a){var o=i.getValue();return{params:{depth:i.depth,height:i.height,dataIndex:i.dataIndex,getValue:function(){return o}},index:a}});return n.sort(function(i,a){return e(i.params,a.params)}),gt(n,function(i){return t[i.index]})}else{var r=e==="asc";return t.sort(function(i,a){var o=(i.getValue()-a.getValue())*(r?1:-1);return o===0?(i.dataIndex-a.dataIndex)*(r?-1:1):o})}}function kxe(t){var e={};function n(r,i,a){for(var o=r;o&&o.depth>1;)o=o.parentNode;var s=i.getColorFromPalette(o.name||o.dataIndex+"",e);return r.depth>1&&xr(s)&&(s=ipe(s,(r.depth-1)/(a-1)*.5)),s}t.eachSeriesByType("sunburst",function(r){var i=r.getData(),a=i.tree;a.eachNode(function(o){var s=o.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=n(o,r,a.root.height));var u=i.ensureUniqueItemVisual(o.dataIndex,"style");ut(u,l)})})}function Axe(t){t.registerChartView(_xe),t.registerSeriesModel(Sxe),t.registerLayout(Rt(Exe,"sunburst")),t.registerProcessor(Rt(kv,"sunburst")),t.registerVisual(kxe),wxe(t)}function Ad(t,e,n){let r=n.initialDeps??[],i;return()=>{var a,o,s,l;let u;n.key&&((a=n.debug)!=null&&a.call(n))&&(u=Date.now());const c=t();if(!(c.length!==r.length||c.some((h,p)=>r[p]!==h)))return i;r=c;let d;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(d=Date.now()),i=e(...c),n.key&&((s=n.debug)!=null&&s.call(n))){const h=Math.round((Date.now()-u)*100)/100,p=Math.round((Date.now()-d)*100)/100,g=p/16,v=(m,y)=>{for(m=String(m);m.length<y;)m=" "+m;return m};console.info(`%c ${v(p,5)} /${v(h,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(l=n==null?void 0:n.onChange)==null||l.call(n,i),i}}function LS(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const Txe=(t,e)=>Math.abs(t-e)<1,Mxe=(t,e,n)=>{let r;return function(...i){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,i),n)}},Cxe=t=>t,Pxe=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let i=e;i<=n;i++)r.push(i);return r},Dxe=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const i=o=>{const{width:s,height:l}=o;e({width:Math.round(s),height:Math.round(l)})};if(i(n.getBoundingClientRect()),!r.ResizeObserver)return()=>{};const a=new r.ResizeObserver(o=>{const s=()=>{const l=o[0];if(l!=null&&l.borderBoxSize){const u=l.borderBoxSize[0];if(u){i({width:u.inlineSize,height:u.blockSize});return}}i(n.getBoundingClientRect())};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(s):s()});return a.observe(n,{box:"border-box"}),()=>{a.unobserve(n)}},z8={passive:!0},j8=typeof window>"u"?!0:"onscrollend"in window,Ixe=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let i=0;const a=t.options.useScrollendEvent&&j8?()=>{}:Mxe(r,()=>{e(i,!1)},t.options.isScrollingResetDelay),o=c=>()=>{const{horizontal:f,isRtl:d}=t.options;i=f?n.scrollLeft*(d&&-1||1):n.scrollTop,a(),e(i,c)},s=o(!0),l=o(!1);l(),n.addEventListener("scroll",s,z8);const u=t.options.useScrollendEvent&&j8;return u&&n.addEventListener("scrollend",l,z8),()=>{n.removeEventListener("scroll",s),u&&n.removeEventListener("scrollend",l)}},Lxe=(t,e,n)=>{if(e!=null&&e.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(t.getBoundingClientRect()[n.options.horizontal?"width":"height"])},Rxe=(t,{adjustments:e=0,behavior:n},r)=>{var i,a;const o=t+e;(a=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||a.call(i,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class Nxe{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(a=>{const o=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var a;return(a=r())==null?void 0:a.observe(i,{box:"border-box"})},unobserve:i=>{var a;return(a=r())==null?void 0:a.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Cxe,rangeExtractor:Pxe,onChange:()=>{},measureElement:Lxe,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=Ad(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,a=new Map;for(let o=r-1;o>=0;o--){const s=n[o];if(i.has(s.lane))continue;const l=a.get(s.lane);if(l==null||s.end>l.end?a.set(s.lane,s):s.end<l.end&&i.set(s.lane,!0),i.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((o,s)=>o.end===s.end?o.index-s.index:o.end-s.end)[0]:void 0},this.getMeasurementOptions=Ad(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,a,o)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:o}),{key:!1}),this.getMeasurements=Ad(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:o},s)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,l);for(let c=l;c<n;c++){const f=a(c),d=this.options.lanes===1?u[c-1]:this.getFurthestMeasurement(u,c),h=d?d.end+this.options.gap:r+i,p=s.get(f),g=typeof p=="number"?p:this.options.estimateSize(c),v=h+g,m=d?d.lane:c%this.options.lanes;u[c]={index:c,start:h,size:g,end:v,key:f,lane:m}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Ad(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,a)=>this.range=n.length>0&&r>0?Fxe({measurements:n,outerSize:r,scrollOffset:i,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Ad(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,a,o)=>a===null||o===null?[]:n({startIndex:a,endIndex:o,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),a=this.measurementsCache[i];if(!a)return;const o=a.key,s=this.elementsCache.get(o);s!==n&&(s&&this.observer.unobserve(s),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const a=this.itemSizeCache.get(i.key)??i.size,o=r-a;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,o,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=Ad(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let a=0,o=n.length;a<o;a++){const s=n[a],l=r[s];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return LS(r[AZ(0,r.length-1,i=>LS(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const a=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+a?"end":"start"),r==="center"?n+=(i-a)/2:r==="end"&&(n-=a);const s=this.options.horizontal?"scrollWidth":"scrollHeight",u=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[s]:this.scrollElement[s]:0)-a;return Math.max(Math.min(u,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const a=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(i.end>=o+a-this.options.scrollPaddingEnd)r="end";else if(i.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const s=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(s,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const a=this.getOffsetForIndex(n,r);if(!a)return;const[o,s]=a;this._scrollToOffset(o,{adjustments:void 0,behavior:i}),i!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(n))){const[u]=LS(this.getOffsetForIndex(n,s));Txe(u,this.getScrollOffset())||this.scrollToIndex(n,{align:s,behavior:i})}else this.scrollToIndex(n,{align:s,behavior:i})}))},this.scrollBy=(n,{behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;return r.length===0?i=this.options.paddingStart:i=this.options.lanes===1?((n=r[r.length-1])==null?void 0:n.end)??0:Math.max(...r.slice(-this.options.lanes).map(a=>a.end)),Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const AZ=(t,e,n,r)=>{for(;t<=e;){const i=(t+e)/2|0,a=n(i);if(a<r)t=i+1;else if(a>r)e=i-1;else return i}return t>0?t-1:0};function Fxe({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const i=t.length-1;let o=AZ(0,i,l=>t[l].start,n),s=o;for(;s<i&&t[s].end<n+e;)s++;return r>1&&(o=Math.max(0,o-o%r),s=Math.min(i,s+(r-1-s%r))),{startIndex:o,endIndex:s}}function zxe(t){const e=new Nxe(p1(t)),n=s0(e),r=e._didMount();return Wi(()=>p1(t).getScrollElement(),i=>{i&&e._willUpdate()},{immediate:!0}),Wi(()=>p1(t),i=>{e.setOptions({...i,onChange:(a,o)=>{var s;X4(n),(s=i.onChange)==null||s.call(i,a,o)}}),e._willUpdate(),X4(n)},{immediate:!0}),xde(r),n}function jxe(t){return zxe(De(()=>({observeElementRect:Dxe,observeElementOffset:Ixe,scrollToFn:Rxe,...p1(t)})))}function Td(t){return t>=1e9?(t/1e9).toFixed(1)+"b":t>=1e6?(t/1e6).toFixed(1)+"m":t>=1e3?(t/1e3).toFixed(1)+"k":t.toString()}const Bxe=/@((?:\/|\w+:\/\/)[^\s]+?|[a-f0-9]{7,40}\b|problems\b|terminal\b|git-changes\b)(?=[.,;:!?]?(?=[\s\r\n]|$))/,$xe=new RegExp(Bxe.source,"g"),Vxe=Xt({props:{task:{type:Object,required:!0},tokensIn:{type:Number,required:!0},tokensOut:{type:Number,required:!0},doesModelSupportPromptCache:{type:Boolean,required:!0},cacheWrites:{type:Number},cacheReads:{type:Number},totalCost:{type:Number,required:!0},lastApiReqTotalTokens:{type:Number},onClose:{type:Function,required:!0}},setup:t=>{const e=pu(),{state:n}=fp(e),r=De(()=>n.value.apiConfiguration),i=De(()=>n.value.currentTaskItem),{doesModelSupportPromptCache:a,task:o,totalCost:s,tokensIn:l,tokensOut:u,cacheReads:c,cacheWrites:f,lastApiReqTotalTokens:d}=bn(t),h=st([]),p=st(!1),g=st(!1),v=st(null),m=st(null),y=De(()=>Hx(r==null?void 0:r.value).selectedModelInfo),b=De(()=>{var S;return(S=y.value)==null?void 0:S.contextWindow}),x=De(()=>{var S;return((S=r==null?void 0:r.value)==null?void 0:S.apiProvider)!=="openai"}),w=De(()=>a.value),{height:_,width:E}=wde();return bf(()=>{if(p.value&&v.value){const S=_.value*.5;v.value.style.maxHeight=`${S}px`}}),Wi([o,E],()=>{var S;if(m.value&&v.value){let O=v.value.clientHeight;O||(O=v.value.getBoundingClientRect().height);const A=(((S=m.value)==null?void 0:S.scrollHeight)??0)>O;A||(p.value=!1),g.value=A}},{deep:!0,immediate:!0}),()=>V("div",{class:"w-full pr-3"},[V(ka,{activeKey:h.value,"onUpdate:activeKey":S=>h.value=S,bordered:!1},{default:()=>[V(Aa,{key:1,style:{borderRadius:"4px",border:"0px",overflow:"hidden"},header:V("div",{class:"font-bold flex gap-2 items-center h-full overflow-hidden"},[V("div",{class:"flex items-center h-full"},[We("Task"),!h.value.includes("1")&&V("div",null,[We(":")])]),!h.value.includes("1")&&V(G1,{placement:"topLeft",title:o.value.text},{default:()=>[V("div",{class:"text-ellipsis text-nowrap overflow-hidden font-normal"},[o.value.text])]})]),headerClass:"task_header"},{default:()=>{var S,O,A;return[V("div",null,[V("div",{ref:v,style:{marginTop:-2,overflowY:p.value?"auto":"hidden",wordBreak:"break-word",overflowWrap:"anywhere",position:"relative"}},[V("div",{ref:m,style:{display:"-webkit-box",WebkitLineClamp:p.value?"unset":3,WebkitBoxOrient:"vertical",overflow:"hidden",wordBreak:"break-word",overflowWrap:"anywhere"}},[qxe(o.value.text,!1)]),!p.value&&g.value&&V("div",{style:{position:"absolute",right:0,bottom:0,display:"flex",alignItems:"center"}},[V(ol,{type:"link",onClick:()=>p.value=!p.value},{default:()=>[We("See more")]})])]),p.value&&g.value&&V("div",{style:{color:"var(--textLink-foreground)",marginLeft:"auto",textAlign:"right",paddingRight:2}},[V(ol,{type:"link",onClick:()=>p.value=!p.value},{default:()=>[We("See less")]})]),V("div",{class:"text-sm pt-3"},[V("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},[V("div",{class:"flex items-center gap-2"},[V("span",{style:{fontWeight:"bold"}},[We("Tokens:")]),V("span",{style:{display:"flex",alignItems:"center",gap:"3px"}},[V("i",{class:"codicon codicon-arrow-up",style:{fontSize:"12px",fontWeight:"bold",marginBottom:"-2px"}},null),Td(l.value||0)]),V("span",{style:{display:"flex",alignItems:"center",gap:"3px"}},[V("i",{class:"codicon codicon-arrow-down",style:{fontSize:"12px",fontWeight:"bold",marginBottom:"-2px"}},null),Td(u.value||0)])]),!x&&V(B8,{taskId:(S=i==null?void 0:i.value)==null?void 0:S.id},null)]),w.value&&(c.value!==void 0||f.value!==void 0)&&V("div",{style:{display:"flex",alignItems:"center",gap:"4px",flexWrap:"wrap"}},[V("span",{style:{fontWeight:"bold"}},[We("Cache:")]),V("span",{style:{display:"flex",alignItems:"center",gap:"3px"}},[V("i",{class:"codicon codicon-database",style:{fontSize:"12px",fontWeight:"bold",marginBottom:"-1px"}},null),We("+"),Td(f.value||0)]),V("span",{style:{display:"flex",alignItems:"center",gap:"3px"}},[V("i",{class:"codicon codicon-arrow-right",style:{fontSize:"12px",fontWeight:"bold",marginBottom:0}},null),Td(c.value||0)])]),h.value.includes("1")&&b.value&&V("div",{style:{display:"flex",flexDirection:"row",gap:"4px"}},[V("div",{style:{display:"flex",alignItems:"center",gap:"4px",flexShrink:0}},[V("span",{style:{fontWeight:"bold"}},[We("Context Window:")])]),V("div",{style:{display:"flex",alignItems:"center",gap:"3px",flex:1,whiteSpace:"nowrap"}},[V("span",null,[Td(d.value||0)]),V("div",{style:{display:"flex",alignItems:"center",gap:"4px",flex:1}},[V("div",{style:{flex:1,height:"4px",backgroundColor:"color-mix(in srgb, var(--textLink-foreground) 20%, transparent)",borderRadius:"2px",overflow:"hidden"}},[V("div",{style:{width:`${(d.value||0)/b.value*100}%`,height:"100%",backgroundColor:"var(--textLink-foreground)",borderRadius:"2px"}},null)]),V("span",null,[Td(b.value)])])])]),x.value&&V("div",{class:"flex justify-between"},[V("div",{class:"flex items-center gap-2"},[V("span",{style:{fontWeight:"bold"}},[We("API Cost:")]),V("span",null,[We("$"),(O=s.value)==null?void 0:O.toFixed(4)])]),V(B8,{taskId:(A=i==null?void 0:i.value)==null?void 0:A.id},null)])])])]},extra:()=>V("div",{class:"flex items-center"},[!h.value.includes("1")&&x.value&&V(AD,{color:"processing",onClick:S=>S.stopPropagation()},{default:()=>{var S;return[We("$"),(S=s.value)==null?void 0:S.toFixed(4)]},icon:()=>V(a2,null,null)}),V(ol,{type:"text",onClick:S=>{S.stopPropagation(),t.onClose()}},{icon:()=>V(aU,null,null)})])})]})])}}),B8=Xt({props:{taskId:{type:String}},setup:t=>{const{taskId:e}=bn(t);return()=>V(cU,{title:"Are you sure you want to delete this task?",okText:"Yes",placement:"topRight",cancelText:"No",onConfirm:n=>{n.stopPropagation(),e.value&&Cu.ai.deleteTask(e.value)}},{default:()=>[V(ol,{size:"small",type:"text",class:"flex items-center justify-center",onClick:n=>n.stopPropagation()},{icon:()=>V("span",{class:"codicon codicon-trash"},null)})]})}}),qxe=(t,e=!0)=>t&&t.split($xe).map((r,i)=>i%2===0?r:V("span",{key:i,class:e?"mention-context-highlight-with-shadow":"mention-context-highlight",style:{cursor:"pointer"},onClick:()=>postMessage({type:"openMention",text:r})},[We("@"),r])),$8=[{id:"useSandbox",label:"Use Sandbox",shortName:"Sandbox",description:"Allows use of sandbox servers which can execute commands or upload & download files."},{id:"useMcp",label:"Use MCP servers",shortName:"MCP",description:"Allows use of configured MCP servers which may modify filesystem or interact with APIs."},{id:"useRag",label:"Use Rag servers",shortName:"RAG",description:"Allows use of configured RAG servers which provide knowledge base."},{id:"useDatabase",label:"Use Database",shortName:"Database",description:"Allows use of configured databases which can execute SQL queries."}],Wxe=Xt({setup:()=>{const t=pu(),{state:e}=fp(t),{postMessage:n}=t,r=De(()=>e.value.autoApprovalSettings),i=st([]),a=De(()=>$8.filter(d=>r.value.actions[d.id])),o=De(()=>a.value.map(d=>d.shortName).join(", ")),s=De(()=>a.value.length>0),l=d=>{n({type:"autoApprovalSettings",autoApprovalSettings:{...r.value,enabled:d}})},u=(d,h)=>{const p={...r.value.actions,[d]:h},g=Object.values(p).some(Boolean);n({type:"autoApprovalSettings",autoApprovalSettings:{...r.value,actions:p,enabled:g?r.value.enabled:!1}})},c=d=>{n({type:"autoApprovalSettings",autoApprovalSettings:{...r.value,maxRequests:d}})},f=d=>{n({type:"autoApprovalSettings",autoApprovalSettings:{...r.value,enableNotifications:d}})};return()=>V("div",{style:{padding:"0 16px"}},[V(ka,{activeKey:i.value,"onUpdate:activeKey":d=>i.value=d,bordered:!1,expandIconPosition:"end"},{default:()=>[V(Aa,{key:1,header:V("div",{class:"flex gap-2 items-center"},[V(R_,{checked:s.value&&r.value.enabled,disabled:!s,onClick:d=>{s&&(d.stopPropagation(),l(!r.value.enabled))}},null),V("span",null,[We("Auto-approve:")," ",V("span",null,[a.value.length===0?"None":o.value])]),V("span",{class:`codicon codicon-chevron-${i.value.length===1?"down":"right"}`,style:{flexShrink:0,marginLeft:i.value.length===1?"2px":"-2px"}},null)])},{default:()=>[V(J4,{content:"Auto-approve allows InfiniSynapse to perform the following actions without asking for permission. Please use with caution and only enable if you understand the risks."},null),V("div",{class:"flex gap-2 flex-col"},[$8.map(d=>V(Or,null,[V(R_,{key:d.id,checked:r.value.actions[d.id],onChange:h=>{const p=h.target.checked;u(d.id,p)}},{default:()=>[d.label]}),V("div",{style:{marginLeft:"24px",color:"var(--descriptionForeground)",fontSize:"12px"}},[d.description])]))]),V(Lde,null,null),V("div",{class:"flex gap-2 items-center"},[V("span",{class:"min-w-[100px]"},[We("Max Requests: ")]),V(_de,{value:r.value.maxRequests.toString(),onInput:d=>{var g;const h=d.target;h.value=(g=h.value)==null?void 0:g.replace(/[^0-9]/g,"");const p=parseInt(h.value??"0");!isNaN(p)&&p>0&&c(p)}},null)]),V(J4,{content:"InfiniSynapse will automatically make this many API requests before asking for approval to proceed with the task."},null),V(Or,null,[V(R_,{checked:r.value.enableNotifications,onChange:d=>{const h=d.target.checked;f(h)}},{default:()=>[V("span",{class:"font-bold text-md"},[We("Enabled Notification")])]}),V("div",{style:{marginLeft:"24px",color:"var(--descriptionForeground)",fontSize:"12px"}},[We("Receive system notifications when InfiniSynapse requires approval to proceed or when a task is completed.")])])]})],expandIcon:()=>V(Or,null,null)})])}}),Gxe=Xt({props:{inputRef:{type:Object},inputValue:{type:String},textAreaDisabled:{type:Boolean,required:!0},placeholderText:{type:String,required:!0},onSend:{type:Function,required:!0},onHeightChange:{type:Function},isRunning:{type:Boolean,required:!0}},emits:["update:inputValue"],setup:(t,{emit:e})=>{const{textAreaDisabled:n,placeholderText:r,inputValue:i,isRunning:a}=bn(t),{onSend:o}=t,s=pu(),{state:l}=fp(s),{postMessage:u}=s,c=De(()=>l.value.chatSettings),f=st(!1),d=st(!1),h=De(()=>{const{selectedProvider:g,selectedModelId:v}=Hx(l.value.apiConfiguration),m="unknown";if(!l.value.apiConfiguration)return m;switch(g){case"anthropic":case"openai":return`openai-compat:${v}`;default:return`${g}:${v}`}}),p=g=>{g&&setTimeout(()=>{var m;c.value.mode!==g&&u({type:"togglePlanActMode",chatSettings:{mode:g},chatContent:{message:(m=i.value)!=null&&m.trim()?i.value:void 0,images:[]}}),setTimeout(()=>{var y,b;(b=(y=t.inputRef)==null?void 0:y.value)==null||b.focus()},100)},0)};return()=>{var g;return V("div",{class:"flex flex-col"},[V("div",{class:"relative",style:{padding:"10px 16px",opacity:n.value?.5:1,display:"flex"}},[V(oU,{style:{padding:"8px 10px"},ref:t.inputRef,placeholder:r.value,autoSize:{minRows:1,maxRows:10},value:i.value,onChange:v=>{const m=v.target.value;e("update:inputValue",m)}},null),V("div",{class:"absolute right-[30px] bottom-[13px]"},[V(ol,{type:"text",disabled:((g=i.value)==null?void 0:g.length)===0,style:{display:"flex",alignItems:"center",justifyContent:"center"},loading:a.value,onClick:()=>{n.value||(f.value=!1,o())},icon:V("i",{class:`input-icon-button ${n.value?"disabled":""} codicon codicon-send`},null)},null)])]),V("div",{class:"mx-[20px] mb-[10px] flex items-center justify-between"},[V("div",{class:"flex items-center gap-2"},[V("div",null,[V("span",{style:{display:"flex",alignItems:"center",gap:"6px"}},[V("button",{disabled:a.value,onClick:()=>d.value=!d.value,style:{color:"var(--descriptionForeground)"},class:"border-none bg-white disabled:cursor-not-allowed disabled:opacity-50 flex items-center gap-2"},[V("i",{class:"codicon codicon-robot",style:{fontSize:"16px",fontWeight:"bold"}},null),V("span",{class:"hover:underline"},[h.value])])]),V(dU,{open:d.value,"onUpdate:open":v=>d.value=v,title:"Settings"},{default:()=>[V(uU,{key:"chattextarea_apioptions",showModelOptions:!0,isPopup:!0,onDone:()=>d.value=!1},null)]})])]),V(Rde,{value:c.value.mode,onChange:v=>p(v.target.value),buttonStyle:"solid"},{default:()=>[V(G1,{placement:"top"},{default:()=>[V(Q4,{value:"plan"},{default:()=>[We("Plan")]})],title:()=>V("span",null,[We("gather information to architect a plan")])}),V(G1,{placement:"top"},{default:()=>[V(Q4,{value:"act"},{default:()=>[We("Act")]})],title:()=>V("span",null,[We("complete the task immediatedly")])})]})])])}}}),Hxe=t=>{const e=typeof t;return e!=="function"&&e!=="object"||t===null},Yxe=t=>{const e=t.flags===""?void 0:t.flags;return new RegExp(t.source,e)},bg=(t,e=new WeakMap)=>{if(t===null||Hxe(t))return t;if(e.has(t))return e.get(t);if(t instanceof RegExp)return Yxe(t);if(t instanceof Date)return new Date(t.getTime());if(t instanceof Function)return t;if(t instanceof Map){const r=new Map;return e.set(t,r),t.forEach((i,a)=>{r.set(a,bg(i,e))}),r}if(t instanceof Set){const r=new Set;e.set(t,r);for(const i of t)r.add(bg(i,e));return r}if(Array.isArray(t)){const r=[];return e.set(t,r),t.forEach(i=>{r.push(bg(i,e))}),r}const n={};e.set(t,n);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=bg(t[r],e));return n},Uxe=(t,e=200)=>{let n=0;return(...r)=>new Promise(i=>{n&&(clearTimeout(n),i("cancel")),n=window.setTimeout(()=>{t.apply(void 0,r),n=0,i("done")},e)})},JC=()=>`${Date.now().toString(36)}${Math.random().toString(36).substring(2)}`,V8=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),TZ=(t,e,n={})=>{const{excludeKeys:r}=n;for(const i in e)r&&r(i)?t[i]=e[i]:V8(e[i])&&V8(t[i])?t[i]=TZ(t[i],e[i],n):t[i]=e[i];return t},it="md-editor",or="https://unpkg.com",Xxe=`${or}/@highlightjs/cdn-assets@11.10.0/highlight.min.js`,q8={main:`${or}/prettier@3.3.3/standalone.js`,markdown:`${or}/prettier@3.3.3/plugins/markdown.js`},Zxe={css:`${or}/cropperjs@1.6.2/dist/cropper.min.css`,js:`${or}/cropperjs@1.6.2/dist/cropper.min.js`},Kxe=`${or}/screenfull@5.2.0/dist/screenfull.js`,Jxe=`${or}/mermaid@11.3.0/dist/mermaid.min.js`,Qxe={js:`${or}/katex@0.16.11/dist/katex.min.js`,css:`${or}/katex@0.16.11/dist/katex.min.css`},QC={a11y:{light:`${or}/@highlightjs/cdn-assets@11.10.0/styles/a11y-light.min.css`,dark:`${or}/@highlightjs/cdn-assets@11.10.0/styles/a11y-dark.min.css`},atom:{light:`${or}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-light.min.css`,dark:`${or}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-dark.min.css`},github:{light:`${or}/@highlightjs/cdn-assets@11.10.0/styles/github.min.css`,dark:`${or}/@highlightjs/cdn-assets@11.10.0/styles/github-dark.min.css`},gradient:{light:`${or}/@highlightjs/cdn-assets@11.10.0/styles/gradient-light.min.css`,dark:`${or}/@highlightjs/cdn-assets@11.10.0/styles/gradient-dark.min.css`},kimbie:{light:`${or}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-light.min.css`,dark:`${or}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-dark.min.css`},paraiso:{light:`${or}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-light.min.css`,dark:`${or}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${or}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-light.min.css`,dark:`${or}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${or}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-light.min.css`,dark:`${or}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-dark.min.css`}},e2e=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],t2e=["markdownTotal","=","scrollSwitch"],W8={"zh-CN":{toolbarTips:{bold:"",underline:"",italic:"",strikeThrough:"",title:"",sub:"",sup:"",quote:"",unorderedList:"",orderedList:"",task:"",codeRow:"",code:"",link:"",image:"",table:"",mermaid:"mermaid",katex:"katex",revoke:"",next:"",save:"",prettier:"",pageFullscreen:"",fullscreen:"",preview:"",previewOnly:"",htmlPreview:"html",catalog:"",github:""},titleItem:{h1:"",h2:"",h3:"",h4:"",h5:"",h6:""},imgTitleItem:{link:"",upload:"",clip2upload:""},linkModalTips:{linkTitle:"",imageTitle:"",descLabel:"",descLabelPlaceHolder:"...",urlLabel:"",urlLabelPlaceHolder:"...",buttonOK:""},clipModalTips:{title:"",buttonUpload:""},copyCode:{text:"",successTips:"",failTips:""},mermaid:{flow:"",sequence:"",gantt:"",class:"",state:"",pie:"",relationship:"",journey:""},katex:{inline:"",block:""},footer:{markdownTotal:"",scrollAuto:""}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Image Link",upload:"Upload Images",clip2upload:"Clip Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},ys={editorExtensions:{highlight:{js:Xxe,css:QC},prettier:{standaloneJs:q8.main,parserMarkdownJs:q8.markdown},cropper:{...Zxe},screenfull:{js:Kxe},mermaid:{js:Jxe},katex:{...Qxe}},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:(t,e)=>e,markdownItConfig:()=>{},markdownItPlugins:t=>t,mermaidConfig:t=>t,katexConfig:t=>t},n2e=({instance:t,ctx:e,props:n={}},r="default")=>{const i=(t==null?void 0:t.$slots[r])||(e==null?void 0:e.slots[r]);return(i?i(t):"")||n[r]};var r2e=Object.defineProperty,i2e=(t,e,n)=>e in t?r2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,a2e=(t,e,n)=>i2e(t,e+"",n);class o2e{constructor(){a2e(this,"pools",{})}remove(e,n,r){const a=this.pools[e]&&this.pools[e][n];a&&(this.pools[e][n]=a.filter(o=>o!==r))}clear(e){this.pools[e]={}}on(e,n){return this.pools[e]||(this.pools[e]={}),this.pools[e][n.name]||(this.pools[e][n.name]=[]),this.pools[e][n.name].push(n.callback),this.pools[e][n.name].includes(n.callback)}emit(e,n,...r){this.pools[e]||(this.pools[e]={});const a=this.pools[e][n];a&&a.forEach(o=>{try{o(...r)}catch(s){console.error(`${n} monitor event exception`,s)}})}}const Fl=new o2e,s2e="buildFinished",RS="catalogChanged",l2e="pushCatalog",MZ="rerender",u2e="taskStateChanged",Nf=(t,e,n="")=>{var r;const i=document.getElementById(e.id);if(i)n!==""&&(Reflect.get(window,n)?(r=e.onload)==null||r.call(i,new Event("load")):e.onload&&i.addEventListener("load",e.onload));else{const a={...e};a.onload=null;const o=f2e(t,a);e.onload&&o.addEventListener("load",e.onload),document.head.appendChild(o)}},c2e=(t,e)=>{const n=document.getElementById(e.id);n==null||n.remove(),Nf(t,e)},f2e=(t,e)=>{const n=document.createElement(t);return Object.keys(e).forEach(r=>{e[r]!==void 0&&(n[r]=e[r])}),n},G8=(()=>{const t=n=>{if(!n)return;const r=n.firstChild;let i=1,a=0,o=0,s=!1,l,u,c,f=1;const d=()=>{r.style.transform=`translate(${a}px, ${o}px) scale(${i})`};n.addEventListener("touchstart",h=>{h.touches.length===1?(s=!0,l=h.touches[0].clientX-a,u=h.touches[0].clientY-o):h.touches.length===2&&(c=Math.hypot(h.touches[0].clientX-h.touches[1].clientX,h.touches[0].clientY-h.touches[1].clientY),f=i)},{passive:!1}),n.addEventListener("touchmove",h=>{if(h.preventDefault(),s&&h.touches.length===1)a=h.touches[0].clientX-l,o=h.touches[0].clientY-u,d();else if(h.touches.length===2){const g=Math.hypot(h.touches[0].clientX-h.touches[1].clientX,h.touches[0].clientY-h.touches[1].clientY)/c,v=i;i=f*(1+(g-1));const m=(h.touches[0].clientX+h.touches[1].clientX)/2,y=(h.touches[0].clientY+h.touches[1].clientY)/2,b=r.getBoundingClientRect(),x=(m-b.left)/v,w=(y-b.top)/v;a-=x*(i-v),o-=w*(i-v),d()}},{passive:!1}),n.addEventListener("touchend",()=>{s=!1}),n.addEventListener("wheel",h=>{h.preventDefault();const p=.02,g=i;h.deltaY<0?i+=p:i=Math.max(.1,i-p);const v=r.getBoundingClientRect(),m=h.clientX-v.left,y=h.clientY-v.top;a-=m/g*(i-g),o-=y/g*(i-g),d()},{passive:!1}),n.addEventListener("mousedown",h=>{s=!0,l=h.clientX-a,u=h.clientY-o}),n.addEventListener("mousemove",h=>{s&&(a=h.clientX-l,o=h.clientY-u,d())}),n.addEventListener("mouseup",()=>{s=!1}),n.addEventListener("mouseleave",()=>{s=!1})};return n=>{n==null||n.forEach(r=>{t(r)})}})();/*! medium-zoom 1.1.0 | MIT License | https://github.com/francoischalifour/medium-zoom */var tf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qm=function(e){return e.tagName==="IMG"},d2e=function(e){return NodeList.prototype.isPrototypeOf(e)},b1=function(e){return e&&e.nodeType===1},H8=function(e){var n=e.currentSrc||e.src;return n.substr(-4).toLowerCase()===".svg"},Y8=function(e){try{return Array.isArray(e)?e.filter(qm):d2e(e)?[].slice.call(e).filter(qm):b1(e)?[e].filter(qm):typeof e=="string"?[].slice.call(document.querySelectorAll(e)).filter(qm):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},h2e=function(e){var n=document.createElement("div");return n.classList.add("medium-zoom-overlay"),n.style.background=e,n},p2e=function(e){var n=e.getBoundingClientRect(),r=n.top,i=n.left,a=n.width,o=n.height,s=e.cloneNode(),l=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,u=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return s.removeAttribute("id"),s.style.position="absolute",s.style.top=r+l+"px",s.style.left=i+u+"px",s.style.width=a+"px",s.style.height=o+"px",s.style.transform="",s},Md=function(e,n){var r=tf({bubbles:!1,cancelable:!1,detail:void 0},n);if(typeof window.CustomEvent=="function")return new CustomEvent(e,r);var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,r.bubbles,r.cancelable,r.detail),i},g2e=function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=window.Promise||function(I){function D(){}I(D,D)},i=function(I){var D=I.target;if(D===O){p();return}b.indexOf(D)!==-1&&g({target:D})},a=function(){if(!(w||!S.original)){var I=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(_-I)>E.scrollOffset&&setTimeout(p,150)}},o=function(I){var D=I.key||I.keyCode;(D==="Escape"||D==="Esc"||D===27)&&p()},s=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=I;if(I.background&&(O.style.background=I.background),I.container&&I.container instanceof Object&&(D.container=tf({},E.container,I.container)),I.template){var R=b1(I.template)?I.template:document.querySelector(I.template);D.template=R}return E=tf({},E,D),b.forEach(function(F){F.dispatchEvent(Md("medium-zoom:update",{detail:{zoom:A}}))}),A},l=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t(tf({},E,I))},u=function(){for(var I=arguments.length,D=Array(I),R=0;R<I;R++)D[R]=arguments[R];var F=D.reduce(function(z,N){return[].concat(z,Y8(N))},[]);return F.filter(function(z){return b.indexOf(z)===-1}).forEach(function(z){b.push(z),z.classList.add("medium-zoom-image")}),x.forEach(function(z){var N=z.type,L=z.listener,B=z.options;F.forEach(function($){$.addEventListener(N,L,B)})}),A},c=function(){for(var I=arguments.length,D=Array(I),R=0;R<I;R++)D[R]=arguments[R];S.zoomed&&p();var F=D.length>0?D.reduce(function(z,N){return[].concat(z,Y8(N))},[]):b;return F.forEach(function(z){z.classList.remove("medium-zoom-image"),z.dispatchEvent(Md("medium-zoom:detach",{detail:{zoom:A}}))}),b=b.filter(function(z){return F.indexOf(z)===-1}),A},f=function(I,D){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return b.forEach(function(F){F.addEventListener("medium-zoom:"+I,D,R)}),x.push({type:"medium-zoom:"+I,listener:D,options:R}),A},d=function(I,D){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return b.forEach(function(F){F.removeEventListener("medium-zoom:"+I,D,R)}),x=x.filter(function(F){return!(F.type==="medium-zoom:"+I&&F.listener.toString()===D.toString())}),A},h=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=I.target,R=function(){var z={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},N=void 0,L=void 0;if(E.container)if(E.container instanceof Object)z=tf({},z,E.container),N=z.width-z.left-z.right-E.margin*2,L=z.height-z.top-z.bottom-E.margin*2;else{var B=b1(E.container)?E.container:document.querySelector(E.container),$=B.getBoundingClientRect(),G=$.width,W=$.height,U=$.left,Y=$.top;z=tf({},z,{width:G,height:W,left:U,top:Y})}N=N||z.width-E.margin*2,L=L||z.height-E.margin*2;var q=S.zoomedHd||S.original,K=H8(q)?N:q.naturalWidth||N,J=H8(q)?L:q.naturalHeight||L,Q=q.getBoundingClientRect(),se=Q.top,de=Q.left,ye=Q.width,_e=Q.height,Ee=Math.min(Math.max(ye,K),N)/ye,ue=Math.min(Math.max(_e,J),L)/_e,he=Math.min(Ee,ue),ke=(-de+(N-ye)/2+E.margin+z.left)/he,Se=(-se+(L-_e)/2+E.margin+z.top)/he,Me="scale("+he+") translate3d("+ke+"px, "+Se+"px, 0)";S.zoomed.style.transform=Me,S.zoomedHd&&(S.zoomedHd.style.transform=Me)};return new r(function(F){if(D&&b.indexOf(D)===-1){F(A);return}var z=function G(){w=!1,S.zoomed.removeEventListener("transitionend",G),S.original.dispatchEvent(Md("medium-zoom:opened",{detail:{zoom:A}})),F(A)};if(S.zoomed){F(A);return}if(D)S.original=D;else if(b.length>0){var N=b;S.original=N[0]}else{F(A);return}if(S.original.dispatchEvent(Md("medium-zoom:open",{detail:{zoom:A}})),_=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,w=!0,S.zoomed=p2e(S.original),document.body.appendChild(O),E.template){var L=b1(E.template)?E.template:document.querySelector(E.template);S.template=document.createElement("div"),S.template.appendChild(L.content.cloneNode(!0)),document.body.appendChild(S.template)}if(S.original.parentElement&&S.original.parentElement.tagName==="PICTURE"&&S.original.currentSrc&&(S.zoomed.src=S.original.currentSrc),document.body.appendChild(S.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),S.original.classList.add("medium-zoom-image--hidden"),S.zoomed.classList.add("medium-zoom-image--opened"),S.zoomed.addEventListener("click",p),S.zoomed.addEventListener("transitionend",z),S.original.getAttribute("data-zoom-src")){S.zoomedHd=S.zoomed.cloneNode(),S.zoomedHd.removeAttribute("srcset"),S.zoomedHd.removeAttribute("sizes"),S.zoomedHd.removeAttribute("loading"),S.zoomedHd.src=S.zoomed.getAttribute("data-zoom-src"),S.zoomedHd.onerror=function(){clearInterval(B),console.warn("Unable to reach the zoom image target "+S.zoomedHd.src),S.zoomedHd=null,R()};var B=setInterval(function(){S.zoomedHd.complete&&(clearInterval(B),S.zoomedHd.classList.add("medium-zoom-image--opened"),S.zoomedHd.addEventListener("click",p),document.body.appendChild(S.zoomedHd),R())},10)}else if(S.original.hasAttribute("srcset")){S.zoomedHd=S.zoomed.cloneNode(),S.zoomedHd.removeAttribute("sizes"),S.zoomedHd.removeAttribute("loading");var $=S.zoomedHd.addEventListener("load",function(){S.zoomedHd.removeEventListener("load",$),S.zoomedHd.classList.add("medium-zoom-image--opened"),S.zoomedHd.addEventListener("click",p),document.body.appendChild(S.zoomedHd),R()})}else R()})},p=function(){return new r(function(I){if(w||!S.original){I(A);return}var D=function R(){S.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(S.zoomed),S.zoomedHd&&document.body.removeChild(S.zoomedHd),document.body.removeChild(O),S.zoomed.classList.remove("medium-zoom-image--opened"),S.template&&document.body.removeChild(S.template),w=!1,S.zoomed.removeEventListener("transitionend",R),S.original.dispatchEvent(Md("medium-zoom:closed",{detail:{zoom:A}})),S.original=null,S.zoomed=null,S.zoomedHd=null,S.template=null,I(A)};w=!0,document.body.classList.remove("medium-zoom--opened"),S.zoomed.style.transform="",S.zoomedHd&&(S.zoomedHd.style.transform=""),S.template&&(S.template.style.transition="opacity 150ms",S.template.style.opacity=0),S.original.dispatchEvent(Md("medium-zoom:close",{detail:{zoom:A}})),S.zoomed.addEventListener("transitionend",D)})},g=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=I.target;return S.original?p():h({target:D})},v=function(){return E},m=function(){return b},y=function(){return S.original},b=[],x=[],w=!1,_=0,E=n,S={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(e)==="[object Object]"?E=e:(e||typeof e=="string")&&u(e),E=tf({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},E);var O=h2e(E.background);document.addEventListener("click",i),document.addEventListener("keyup",o),document.addEventListener("scroll",a),window.addEventListener("resize",p);var A={open:h,close:p,toggle:g,update:s,clone:l,attach:u,detach:c,on:f,off:d,getOptions:v,getImages:m,getZoomedImage:y};return A};function v2e(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var m2e=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";v2e(m2e);var NS,U8;function y2e(){return U8||(U8=1,NS=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],r=0;r<t.rangeCount;r++)n.push(t.getRangeAt(r));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||n.forEach(function(i){t.addRange(i)}),e&&e.focus()}}),NS}var FS,X8;function b2e(){if(X8)return FS;X8=1;var t=y2e(),e={"text/plain":"Text","text/html":"Url",default:"Text"},n="Copy to clipboard: #{key}, Enter";function r(a){var o=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return a.replace(/#{\s*key\s*}/g,o)}function i(a,o){var s,l,u,c,f,d,h=!1;o||(o={}),s=o.debug||!1;try{u=t(),c=document.createRange(),f=document.getSelection(),d=document.createElement("span"),d.textContent=a,d.ariaHidden="true",d.style.all="unset",d.style.position="fixed",d.style.top=0,d.style.clip="rect(0, 0, 0, 0)",d.style.whiteSpace="pre",d.style.webkitUserSelect="text",d.style.MozUserSelect="text",d.style.msUserSelect="text",d.style.userSelect="text",d.addEventListener("copy",function(g){if(g.stopPropagation(),o.format)if(g.preventDefault(),typeof g.clipboardData>"u"){s&&console.warn("unable to use e.clipboardData"),s&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var v=e[o.format]||e.default;window.clipboardData.setData(v,a)}else g.clipboardData.clearData(),g.clipboardData.setData(o.format,a);o.onCopy&&(g.preventDefault(),o.onCopy(g.clipboardData))}),document.body.appendChild(d),c.selectNodeContents(d),f.addRange(c);var p=document.execCommand("copy");if(!p)throw new Error("copy command was unsuccessful");h=!0}catch(g){s&&console.error("unable to copy using execCommand: ",g),s&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(o.format||"text",a),o.onCopy&&o.onCopy(window.clipboardData),h=!0}catch(v){s&&console.error("unable to copy using clipboardData: ",v),s&&console.error("falling back to prompt"),l=r("message"in o?o.message:n),window.prompt(l,a)}}finally{f&&(typeof f.removeRange=="function"?f.removeRange(c):f.removeAllRanges()),d&&document.body.removeChild(d),u()}return h}return FS=i,FS}var x2e=b2e();const w2e=dp(x2e),Z8={};function _2e(t){let e=Z8[t];if(e)return e;e=Z8[t]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);e.push(r)}for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function Dh(t,e){typeof e!="string"&&(e=Dh.defaultChars);const n=_2e(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let a=0,o=r.length;a<o;a+=3){const s=parseInt(r.slice(a+1,a+3),16);if(s<128){i+=n[s];continue}if((s&224)===192&&a+3<o){const l=parseInt(r.slice(a+4,a+6),16);if((l&192)===128){const u=s<<6&1984|l&63;u<128?i+="":i+=String.fromCharCode(u),a+=3;continue}}if((s&240)===224&&a+6<o){const l=parseInt(r.slice(a+4,a+6),16),u=parseInt(r.slice(a+7,a+9),16);if((l&192)===128&&(u&192)===128){const c=s<<12&61440|l<<6&4032|u&63;c<2048||c>=55296&&c<=57343?i+="":i+=String.fromCharCode(c),a+=6;continue}}if((s&248)===240&&a+9<o){const l=parseInt(r.slice(a+4,a+6),16),u=parseInt(r.slice(a+7,a+9),16),c=parseInt(r.slice(a+10,a+12),16);if((l&192)===128&&(u&192)===128&&(c&192)===128){let f=s<<18&1835008|l<<12&258048|u<<6&4032|c&63;f<65536||f>1114111?i+="":(f-=65536,i+=String.fromCharCode(55296+(f>>10),56320+(f&1023))),a+=9;continue}}i+=""}return i})}Dh.defaultChars=";/?:@&=+$,#";Dh.componentChars="";const K8={};function S2e(t){let e=K8[t];if(e)return e;e=K8[t]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<t.length;n++)e[t.charCodeAt(n)]=t[n];return e}function Tv(t,e,n){typeof e!="string"&&(n=e,e=Tv.defaultChars),typeof n>"u"&&(n=!0);const r=S2e(e);let i="";for(let a=0,o=t.length;a<o;a++){const s=t.charCodeAt(a);if(n&&s===37&&a+2<o&&/^[0-9a-f]{2}$/i.test(t.slice(a+1,a+3))){i+=t.slice(a,a+3),a+=2;continue}if(s<128){i+=r[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&a+1<o){const l=t.charCodeAt(a+1);if(l>=56320&&l<=57343){i+=encodeURIComponent(t[a]+t[a+1]),a++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(t[a])}return i}Tv.defaultChars=";/?:@&=+$,-_.!~*'()#";Tv.componentChars="-_.!~*'()";function cI(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function ub(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const E2e=/^([a-z0-9.+-]+:)/i,O2e=/:[0-9]*$/,k2e=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,A2e=["<",">",'"',"`"," ","\r",`
`,"	"],T2e=["{","}","|","\\","^","`"].concat(A2e),M2e=["'"].concat(T2e),J8=["%","/","?",";","#"].concat(M2e),Q8=["/","?","#"],C2e=255,e9=/^[+a-z0-9A-Z_-]{0,63}$/,P2e=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,t9={javascript:!0,"javascript:":!0},n9={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function fI(t,e){if(t&&t instanceof ub)return t;const n=new ub;return n.parse(t,e),n}ub.prototype.parse=function(t,e){let n,r,i,a=t;if(a=a.trim(),!e&&t.split("#").length===1){const u=k2e.exec(a);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let o=E2e.exec(a);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,a=a.substr(o.length)),(e||o||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=a.substr(0,2)==="//",i&&!(o&&t9[o])&&(a=a.substr(2),this.slashes=!0)),!t9[o]&&(i||o&&!n9[o])){let u=-1;for(let p=0;p<Q8.length;p++)r=a.indexOf(Q8[p]),r!==-1&&(u===-1||r<u)&&(u=r);let c,f;u===-1?f=a.lastIndexOf("@"):f=a.lastIndexOf("@",u),f!==-1&&(c=a.slice(0,f),a=a.slice(f+1),this.auth=c),u=-1;for(let p=0;p<J8.length;p++)r=a.indexOf(J8[p]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=a.length),a[u-1]===":"&&u--;const d=a.slice(0,u);a=a.slice(u),this.parseHost(d),this.hostname=this.hostname||"";const h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){const p=this.hostname.split(/\./);for(let g=0,v=p.length;g<v;g++){const m=p[g];if(m&&!m.match(e9)){let y="";for(let b=0,x=m.length;b<x;b++)m.charCodeAt(b)>127?y+="x":y+=m[b];if(!y.match(e9)){const b=p.slice(0,g),x=p.slice(g+1),w=m.match(P2e);w&&(b.push(w[1]),x.unshift(w[2])),x.length&&(a=x.join(".")+a),this.hostname=b.join(".");break}}}}this.hostname.length>C2e&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const s=a.indexOf("#");s!==-1&&(this.hash=a.substr(s),a=a.slice(0,s));const l=a.indexOf("?");return l!==-1&&(this.search=a.substr(l),a=a.slice(0,l)),a&&(this.pathname=a),n9[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};ub.prototype.parseHost=function(t){let e=O2e.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const D2e=Object.freeze(Object.defineProperty({__proto__:null,decode:Dh,encode:Tv,format:cI,parse:fI},Symbol.toStringTag,{value:"Module"})),CZ=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PZ=/[\0-\x1F\x7F-\x9F]/,I2e=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,dI=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,DZ=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,IZ=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,L2e=Object.freeze(Object.defineProperty({__proto__:null,Any:CZ,Cc:PZ,Cf:I2e,P:dI,S:DZ,Z:IZ},Symbol.toStringTag,{value:"Module"})),R2e=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),N2e=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var zS;const F2e=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),z2e=(zS=String.fromCodePoint)!==null&&zS!==void 0?zS:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function j2e(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=F2e.get(t))!==null&&e!==void 0?e:t}var Ti;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Ti||(Ti={}));const B2e=32;var Gu;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Gu||(Gu={}));function e6(t){return t>=Ti.ZERO&&t<=Ti.NINE}function $2e(t){return t>=Ti.UPPER_A&&t<=Ti.UPPER_F||t>=Ti.LOWER_A&&t<=Ti.LOWER_F}function V2e(t){return t>=Ti.UPPER_A&&t<=Ti.UPPER_Z||t>=Ti.LOWER_A&&t<=Ti.LOWER_Z||e6(t)}function q2e(t){return t===Ti.EQUALS||V2e(t)}var Oi;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(Oi||(Oi={}));var Fu;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Fu||(Fu={}));class W2e{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=Oi.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Fu.Strict}startEntity(e){this.decodeMode=e,this.state=Oi.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case Oi.EntityStart:return e.charCodeAt(n)===Ti.NUM?(this.state=Oi.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=Oi.NamedEntity,this.stateNamedEntity(e,n));case Oi.NumericStart:return this.stateNumericStart(e,n);case Oi.NumericDecimal:return this.stateNumericDecimal(e,n);case Oi.NumericHex:return this.stateNumericHex(e,n);case Oi.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|B2e)===Ti.LOWER_X?(this.state=Oi.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=Oi.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,i){if(n!==r){const a=r-n;this.result=this.result*Math.pow(i,a)+parseInt(e.substr(n,a),i),this.consumed+=a}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(e6(i)||$2e(i))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(e6(i))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Ti.SEMI)this.consumed+=1;else if(this.decodeMode===Fu.Strict)return 0;return this.emitCodePoint(j2e(this.result),this.consumed),this.errors&&(e!==Ti.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let i=r[this.treeIndex],a=(i&Gu.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const o=e.charCodeAt(n);if(this.treeIndex=G2e(r,i,this.treeIndex+Math.max(1,a),o),this.treeIndex<0)return this.result===0||this.decodeMode===Fu.Attribute&&(a===0||q2e(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],a=(i&Gu.VALUE_LENGTH)>>14,a!==0){if(o===Ti.SEMI)return this.emitNamedEntityData(this.treeIndex,a,this.consumed+this.excess);this.decodeMode!==Fu.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,i=(r[n]&Gu.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[e]&~Gu.VALUE_LENGTH:i[e+1],r),n===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case Oi.NamedEntity:return this.result!==0&&(this.decodeMode!==Fu.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Oi.NumericDecimal:return this.emitNumericEntity(0,2);case Oi.NumericHex:return this.emitNumericEntity(0,3);case Oi.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Oi.EntityStart:return 0}}}function LZ(t){let e="";const n=new W2e(t,r=>e+=z2e(r));return function(i,a){let o=0,s=0;for(;(s=i.indexOf("&",s))>=0;){e+=i.slice(o,s),n.startEntity(a);const u=n.write(i,s+1);if(u<0){o=s+n.end();break}o=s+u,s=u===0?o+1:o}const l=e+i.slice(o);return e="",l}}function G2e(t,e,n,r){const i=(e&Gu.BRANCH_LENGTH)>>7,a=e&Gu.JUMP_TABLE;if(i===0)return a!==0&&r===a?n:-1;if(a){const l=r-a;return l<0||l>=i?-1:t[n+l]-1}let o=n,s=o+i-1;for(;o<=s;){const l=o+s>>>1,u=t[l];if(u<r)o=l+1;else if(u>r)s=l-1;else return t[l+i]}return-1}const H2e=LZ(R2e);LZ(N2e);function RZ(t,e=Fu.Legacy){return H2e(t,e)}function Y2e(t){return Object.prototype.toString.call(t)}function hI(t){return Y2e(t)==="[object String]"}const U2e=Object.prototype.hasOwnProperty;function X2e(t,e){return U2e.call(t,e)}function d2(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){t[r]=n[r]})}}),t}function NZ(t,e,n){return[].concat(t.slice(0,e),n,t.slice(e+1))}function pI(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function cb(t){if(t>65535){t-=65536;const e=55296+(t>>10),n=56320+(t&1023);return String.fromCharCode(e,n)}return String.fromCharCode(t)}const FZ=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Z2e=/&([a-z#][a-z0-9]{1,31});/gi,K2e=new RegExp(FZ.source+"|"+Z2e.source,"gi"),J2e=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Q2e(t,e){if(e.charCodeAt(0)===35&&J2e.test(e)){const r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return pI(r)?cb(r):t}const n=RZ(t);return n!==t?n:t}function ewe(t){return t.indexOf("\\")<0?t:t.replace(FZ,"$1")}function Ih(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(K2e,function(e,n,r){return n||Q2e(e,r)})}const twe=/[&<>"]/,nwe=/[&<>"]/g,rwe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function iwe(t){return rwe[t]}function dc(t){return twe.test(t)?t.replace(nwe,iwe):t}const awe=/[.?*+^$[\]\\(){}|-]/g;function owe(t){return t.replace(awe,"\\$&")}function Qn(t){switch(t){case 9:case 32:return!0}return!1}function _0(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function S0(t){return dI.test(t)||DZ.test(t)}function E0(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function h2(t){return t=t.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(t=t.replace(//g,"")),t.toLowerCase().toUpperCase()}const swe={mdurl:D2e,ucmicro:L2e},lwe=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:NZ,assign:d2,escapeHtml:dc,escapeRE:owe,fromCodePoint:cb,has:X2e,isMdAsciiPunct:E0,isPunctChar:S0,isSpace:Qn,isString:hI,isValidEntityCode:pI,isWhiteSpace:_0,lib:swe,normalizeReference:h2,unescapeAll:Ih,unescapeMd:ewe},Symbol.toStringTag,{value:"Module"}));function uwe(t,e,n){let r,i,a,o;const s=t.posMax,l=t.pos;for(t.pos=e+1,r=1;t.pos<s;){if(a=t.src.charCodeAt(t.pos),a===93&&(r--,r===0)){i=!0;break}if(o=t.pos,t.md.inline.skipToken(t),a===91){if(o===t.pos-1)r++;else if(n)return t.pos=l,-1}}let u=-1;return i&&(u=t.pos),t.pos=l,u}function cwe(t,e,n){let r,i=e;const a={ok:!1,pos:0,str:""};if(t.charCodeAt(i)===60){for(i++;i<n;){if(r=t.charCodeAt(i),r===10||r===60)return a;if(r===62)return a.pos=i+1,a.str=Ih(t.slice(e+1,i)),a.ok=!0,a;if(r===92&&i+1<n){i+=2;continue}i++}return a}let o=0;for(;i<n&&(r=t.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<n){if(t.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(o++,o>32))return a;if(r===41){if(o===0)break;o--}i++}return e===i||o!==0||(a.str=Ih(t.slice(e,i)),a.pos=i,a.ok=!0),a}function fwe(t,e,n,r){let i,a=e;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(a>=n)return o;let s=t.charCodeAt(a);if(s!==34&&s!==39&&s!==40)return o;e++,a++,s===40&&(s=41),o.marker=s}for(;a<n;){if(i=t.charCodeAt(a),i===o.marker)return o.pos=a+1,o.str+=Ih(t.slice(e,a)),o.ok=!0,o;if(i===40&&o.marker===41)return o;i===92&&a+1<n&&a++,a++}return o.can_continue=!0,o.str+=Ih(t.slice(e,a)),o}const dwe=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:cwe,parseLinkLabel:uwe,parseLinkTitle:fwe},Symbol.toStringTag,{value:"Module"})),wl={};wl.code_inline=function(t,e,n,r,i){const a=t[e];return"<code"+i.renderAttrs(a)+">"+dc(a.content)+"</code>"};wl.code_block=function(t,e,n,r,i){const a=t[e];return"<pre"+i.renderAttrs(a)+"><code>"+dc(t[e].content)+`</code></pre>
`};wl.fence=function(t,e,n,r,i){const a=t[e],o=a.info?Ih(a.info).trim():"";let s="",l="";if(o){const c=o.split(/(\s+)/g);s=c[0],l=c.slice(2).join("")}let u;if(n.highlight?u=n.highlight(a.content,s,l)||dc(a.content):u=dc(a.content),u.indexOf("<pre")===0)return u+`
`;if(o){const c=a.attrIndex("class"),f=a.attrs?a.attrs.slice():[];c<0?f.push(["class",n.langPrefix+s]):(f[c]=f[c].slice(),f[c][1]+=" "+n.langPrefix+s);const d={attrs:f};return`<pre><code${i.renderAttrs(d)}>${u}</code></pre>
`}return`<pre><code${i.renderAttrs(a)}>${u}</code></pre>
`};wl.image=function(t,e,n,r,i){const a=t[e];return a.attrs[a.attrIndex("alt")][1]=i.renderInlineAsText(a.children,n,r),i.renderToken(t,e,n)};wl.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`};wl.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};wl.text=function(t,e){return dc(t[e].content)};wl.html_block=function(t,e){return t[e].content};wl.html_inline=function(t,e){return t[e].content};function pp(){this.rules=d2({},wl)}pp.prototype.renderAttrs=function(e){let n,r,i;if(!e.attrs)return"";for(i="",n=0,r=e.attrs.length;n<r;n++)i+=" "+dc(e.attrs[n][0])+'="'+dc(e.attrs[n][1])+'"';return i};pp.prototype.renderToken=function(e,n,r){const i=e[n];let a="";if(i.hidden)return"";i.block&&i.nesting!==-1&&n&&e[n-1].hidden&&(a+=`
`),a+=(i.nesting===-1?"</":"<")+i.tag,a+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(a+=" /");let o=!1;if(i.block&&(o=!0,i.nesting===1&&n+1<e.length)){const s=e[n+1];(s.type==="inline"||s.hidden||s.nesting===-1&&s.tag===i.tag)&&(o=!1)}return a+=o?`>
`:">",a};pp.prototype.renderInline=function(t,e,n){let r="";const i=this.rules;for(let a=0,o=t.length;a<o;a++){const s=t[a].type;typeof i[s]<"u"?r+=i[s](t,a,e,n,this):r+=this.renderToken(t,a,e)}return r};pp.prototype.renderInlineAsText=function(t,e,n){let r="";for(let i=0,a=t.length;i<a;i++)switch(t[i].type){case"text":r+=t[i].content;break;case"image":r+=this.renderInlineAsText(t[i].children,e,n);break;case"html_inline":case"html_block":r+=t[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};pp.prototype.render=function(t,e,n){let r="";const i=this.rules;for(let a=0,o=t.length;a<o;a++){const s=t[a].type;s==="inline"?r+=this.renderInline(t[a].children,e,n):typeof i[s]<"u"?r+=i[s](t,a,e,n,this):r+=this.renderToken(t,a,e,n)}return r};function Ba(){this.__rules__=[],this.__cache__=null}Ba.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};Ba.prototype.__compile__=function(){const t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||t.__cache__[n].push(r.fn))})})};Ba.prototype.at=function(t,e,n){const r=this.__find__(t),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Ba.prototype.before=function(t,e,n,r){const i=this.__find__(t),a=r||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:n,alt:a.alt||[]}),this.__cache__=null};Ba.prototype.after=function(t,e,n,r){const i=this.__find__(t),a=r||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:n,alt:a.alt||[]}),this.__cache__=null};Ba.prototype.push=function(t,e,n){const r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};Ba.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,n.push(r)},this),this.__cache__=null,n};Ba.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(t,e)};Ba.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,n.push(r)},this),this.__cache__=null,n};Ba.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};function Cs(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Cs.prototype.attrIndex=function(e){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,i=n.length;r<i;r++)if(n[r][0]===e)return r;return-1};Cs.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Cs.prototype.attrSet=function(e,n){const r=this.attrIndex(e),i=[e,n];r<0?this.attrPush(i):this.attrs[r]=i};Cs.prototype.attrGet=function(e){const n=this.attrIndex(e);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Cs.prototype.attrJoin=function(e,n){const r=this.attrIndex(e);r<0?this.attrPush([e,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function zZ(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}zZ.prototype.Token=Cs;const hwe=/\r\n?|\n/g,pwe=/\0/g;function gwe(t){let e;e=t.src.replace(hwe,`
`),e=e.replace(pwe,""),t.src=e}function vwe(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}function mwe(t){const e=t.tokens;for(let n=0,r=e.length;n<r;n++){const i=e[n];i.type==="inline"&&t.md.inline.parse(i.content,t.md,t.env,i.children)}}function ywe(t){return/^<a[>\s]/i.test(t)}function bwe(t){return/^<\/a\s*>/i.test(t)}function xwe(t){const e=t.tokens;if(t.md.options.linkify)for(let n=0,r=e.length;n<r;n++){if(e[n].type!=="inline"||!t.md.linkify.pretest(e[n].content))continue;let i=e[n].children,a=0;for(let o=i.length-1;o>=0;o--){const s=i[o];if(s.type==="link_close"){for(o--;i[o].level!==s.level&&i[o].type!=="link_open";)o--;continue}if(s.type==="html_inline"&&(ywe(s.content)&&a>0&&a--,bwe(s.content)&&a++),!(a>0)&&s.type==="text"&&t.md.linkify.test(s.content)){const l=s.content;let u=t.md.linkify.match(l);const c=[];let f=s.level,d=0;u.length>0&&u[0].index===0&&o>0&&i[o-1].type==="text_special"&&(u=u.slice(1));for(let h=0;h<u.length;h++){const p=u[h].url,g=t.md.normalizeLink(p);if(!t.md.validateLink(g))continue;let v=u[h].text;u[h].schema?u[h].schema==="mailto:"&&!/^mailto:/i.test(v)?v=t.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):v=t.md.normalizeLinkText(v):v=t.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,"");const m=u[h].index;if(m>d){const w=new t.Token("text","",0);w.content=l.slice(d,m),w.level=f,c.push(w)}const y=new t.Token("link_open","a",1);y.attrs=[["href",g]],y.level=f++,y.markup="linkify",y.info="auto",c.push(y);const b=new t.Token("text","",0);b.content=v,b.level=f,c.push(b);const x=new t.Token("link_close","a",-1);x.level=--f,x.markup="linkify",x.info="auto",c.push(x),d=u[h].lastIndex}if(d<l.length){const h=new t.Token("text","",0);h.content=l.slice(d),h.level=f,c.push(h)}e[n].children=i=NZ(i,o,c)}}}}const jZ=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,wwe=/\((c|tm|r)\)/i,_we=/\((c|tm|r)\)/ig,Swe={c:"",r:"",tm:""};function Ewe(t,e){return Swe[e.toLowerCase()]}function Owe(t){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];r.type==="text"&&!e&&(r.content=r.content.replace(_we,Ewe)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function kwe(t){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];r.type==="text"&&!e&&jZ.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function Awe(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(wwe.test(t.tokens[e].content)&&Owe(t.tokens[e].children),jZ.test(t.tokens[e].content)&&kwe(t.tokens[e].children))}const Twe=/['"]/,r9=/['"]/g,i9="";function Wm(t,e,n){return t.slice(0,e)+n+t.slice(e+1)}function Mwe(t,e){let n;const r=[];for(let i=0;i<t.length;i++){const a=t[i],o=t[i].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,a.type!=="text")continue;let s=a.content,l=0,u=s.length;e:for(;l<u;){r9.lastIndex=l;const c=r9.exec(s);if(!c)break;let f=!0,d=!0;l=c.index+1;const h=c[0]==="'";let p=32;if(c.index-1>=0)p=s.charCodeAt(c.index-1);else for(n=i-1;n>=0&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n--)if(t[n].content){p=t[n].content.charCodeAt(t[n].content.length-1);break}let g=32;if(l<u)g=s.charCodeAt(l);else for(n=i+1;n<t.length&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n++)if(t[n].content){g=t[n].content.charCodeAt(0);break}const v=E0(p)||S0(String.fromCharCode(p)),m=E0(g)||S0(String.fromCharCode(g)),y=_0(p),b=_0(g);if(b?f=!1:m&&(y||v||(f=!1)),y?d=!1:v&&(b||m||(d=!1)),g===34&&c[0]==='"'&&p>=48&&p<=57&&(d=f=!1),f&&d&&(f=v,d=m),!f&&!d){h&&(a.content=Wm(a.content,c.index,i9));continue}if(d)for(n=r.length-1;n>=0;n--){let x=r[n];if(r[n].level<o)break;if(x.single===h&&r[n].level===o){x=r[n];let w,_;h?(w=e.md.options.quotes[2],_=e.md.options.quotes[3]):(w=e.md.options.quotes[0],_=e.md.options.quotes[1]),a.content=Wm(a.content,c.index,_),t[x.token].content=Wm(t[x.token].content,x.pos,w),l+=_.length-1,x.token===i&&(l+=w.length-1),s=a.content,u=s.length,r.length=n;continue e}}f?r.push({token:i,pos:c.index,single:h,level:o}):d&&h&&(a.content=Wm(a.content,c.index,i9))}}}function Cwe(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!Twe.test(t.tokens[e].content)||Mwe(t.tokens[e].children,t)}function Pwe(t){let e,n;const r=t.tokens,i=r.length;for(let a=0;a<i;a++){if(r[a].type!=="inline")continue;const o=r[a].children,s=o.length;for(e=0;e<s;e++)o[e].type==="text_special"&&(o[e].type="text");for(e=n=0;e<s;e++)o[e].type==="text"&&e+1<s&&o[e+1].type==="text"?o[e+1].content=o[e].content+o[e+1].content:(e!==n&&(o[n]=o[e]),n++);e!==n&&(o.length=n)}}const jS=[["normalize",gwe],["block",vwe],["inline",mwe],["linkify",xwe],["replacements",Awe],["smartquotes",Cwe],["text_join",Pwe]];function gI(){this.ruler=new Ba;for(let t=0;t<jS.length;t++)this.ruler.push(jS[t][0],jS[t][1])}gI.prototype.process=function(t){const e=this.ruler.getRules("");for(let n=0,r=e.length;n<r;n++)e[n](t)};gI.prototype.State=zZ;function _l(t,e,n,r){this.src=t,this.md=e,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let a=0,o=0,s=0,l=0,u=i.length,c=!1;o<u;o++){const f=i.charCodeAt(o);if(!c)if(Qn(f)){s++,f===9?l+=4-l%4:l++;continue}else c=!0;(f===10||o===u-1)&&(f!==10&&o++,this.bMarks.push(a),this.eMarks.push(o),this.tShift.push(s),this.sCount.push(l),this.bsCount.push(0),c=!1,s=0,l=0,a=o+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}_l.prototype.push=function(t,e,n){const r=new Cs(t,e,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};_l.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};_l.prototype.skipEmptyLines=function(e){for(let n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};_l.prototype.skipSpaces=function(e){for(let n=this.src.length;e<n;e++){const r=this.src.charCodeAt(e);if(!Qn(r))break}return e};_l.prototype.skipSpacesBack=function(e,n){if(e<=n)return e;for(;e>n;)if(!Qn(this.src.charCodeAt(--e)))return e+1;return e};_l.prototype.skipChars=function(e,n){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===n;e++);return e};_l.prototype.skipCharsBack=function(e,n,r){if(e<=r)return e;for(;e>r;)if(n!==this.src.charCodeAt(--e))return e+1;return e};_l.prototype.getLines=function(e,n,r,i){if(e>=n)return"";const a=new Array(n-e);for(let o=0,s=e;s<n;s++,o++){let l=0;const u=this.bMarks[s];let c=u,f;for(s+1<n||i?f=this.eMarks[s]+1:f=this.eMarks[s];c<f&&l<r;){const d=this.src.charCodeAt(c);if(Qn(d))d===9?l+=4-(l+this.bsCount[s])%4:l++;else if(c-u<this.tShift[s])l++;else break;c++}l>r?a[o]=new Array(l-r+1).join(" ")+this.src.slice(c,f):a[o]=this.src.slice(c,f)}return a.join("")};_l.prototype.Token=Cs;const Dwe=65536;function BS(t,e){const n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];return t.src.slice(n,r)}function a9(t){const e=[],n=t.length;let r=0,i=t.charCodeAt(r),a=!1,o=0,s="";for(;r<n;)i===124&&(a?(s+=t.substring(o,r-1),o=r):(e.push(s+t.substring(o,r)),s="",o=r+1)),a=i===92,r++,i=t.charCodeAt(r);return e.push(s+t.substring(o)),e}function Iwe(t,e,n,r){if(e+2>n)return!1;let i=e+1;if(t.sCount[i]<t.blkIndent||t.sCount[i]-t.blkIndent>=4)return!1;let a=t.bMarks[i]+t.tShift[i];if(a>=t.eMarks[i])return!1;const o=t.src.charCodeAt(a++);if(o!==124&&o!==45&&o!==58||a>=t.eMarks[i])return!1;const s=t.src.charCodeAt(a++);if(s!==124&&s!==45&&s!==58&&!Qn(s)||o===45&&Qn(s))return!1;for(;a<t.eMarks[i];){const x=t.src.charCodeAt(a);if(x!==124&&x!==45&&x!==58&&!Qn(x))return!1;a++}let l=BS(t,e+1),u=l.split("|");const c=[];for(let x=0;x<u.length;x++){const w=u[x].trim();if(!w){if(x===0||x===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(w))return!1;w.charCodeAt(w.length-1)===58?c.push(w.charCodeAt(0)===58?"center":"right"):w.charCodeAt(0)===58?c.push("left"):c.push("")}if(l=BS(t,e).trim(),l.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;u=a9(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const f=u.length;if(f===0||f!==c.length)return!1;if(r)return!0;const d=t.parentType;t.parentType="table";const h=t.md.block.ruler.getRules("blockquote"),p=t.push("table_open","table",1),g=[e,0];p.map=g;const v=t.push("thead_open","thead",1);v.map=[e,e+1];const m=t.push("tr_open","tr",1);m.map=[e,e+1];for(let x=0;x<u.length;x++){const w=t.push("th_open","th",1);c[x]&&(w.attrs=[["style","text-align:"+c[x]]]);const _=t.push("inline","",0);_.content=u[x].trim(),_.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let y,b=0;for(i=e+2;i<n&&!(t.sCount[i]<t.blkIndent);i++){let x=!1;for(let _=0,E=h.length;_<E;_++)if(h[_](t,i,n,!0)){x=!0;break}if(x||(l=BS(t,i).trim(),!l)||t.sCount[i]-t.blkIndent>=4||(u=a9(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),b+=f-u.length,b>Dwe))break;if(i===e+2){const _=t.push("tbody_open","tbody",1);_.map=y=[e+2,0]}const w=t.push("tr_open","tr",1);w.map=[i,i+1];for(let _=0;_<f;_++){const E=t.push("td_open","td",1);c[_]&&(E.attrs=[["style","text-align:"+c[_]]]);const S=t.push("inline","",0);S.content=u[_]?u[_].trim():"",S.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return y&&(t.push("tbody_close","tbody",-1),y[1]=i),t.push("table_close","table",-1),g[1]=i,t.parentType=d,t.line=i,!0}function Lwe(t,e,n){if(t.sCount[e]-t.blkIndent<4)return!1;let r=e+1,i=r;for(;r<n;){if(t.isEmpty(r)){r++;continue}if(t.sCount[r]-t.blkIndent>=4){r++,i=r;continue}break}t.line=i;const a=t.push("code_block","code",0);return a.content=t.getLines(e,i,4+t.blkIndent,!1)+`
`,a.map=[e,t.line],!0}function Rwe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],a=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||i+3>a)return!1;const o=t.src.charCodeAt(i);if(o!==126&&o!==96)return!1;let s=i;i=t.skipChars(i,o);let l=i-s;if(l<3)return!1;const u=t.src.slice(s,i),c=t.src.slice(i,a);if(o===96&&c.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let f=e,d=!1;for(;f++,!(f>=n||(i=s=t.bMarks[f]+t.tShift[f],a=t.eMarks[f],i<a&&t.sCount[f]<t.blkIndent));)if(t.src.charCodeAt(i)===o&&!(t.sCount[f]-t.blkIndent>=4)&&(i=t.skipChars(i,o),!(i-s<l)&&(i=t.skipSpaces(i),!(i<a)))){d=!0;break}l=t.sCount[e],t.line=f+(d?1:0);const h=t.push("fence","code",0);return h.info=c,h.content=t.getLines(e+1,f,l,!0),h.markup=u,h.map=[e,t.line],!0}function Nwe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],a=t.eMarks[e];const o=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==62)return!1;if(r)return!0;const s=[],l=[],u=[],c=[],f=t.md.block.ruler.getRules("blockquote"),d=t.parentType;t.parentType="blockquote";let h=!1,p;for(p=e;p<n;p++){const b=t.sCount[p]<t.blkIndent;if(i=t.bMarks[p]+t.tShift[p],a=t.eMarks[p],i>=a)break;if(t.src.charCodeAt(i++)===62&&!b){let w=t.sCount[p]+1,_,E;t.src.charCodeAt(i)===32?(i++,w++,E=!1,_=!0):t.src.charCodeAt(i)===9?(_=!0,(t.bsCount[p]+w)%4===3?(i++,w++,E=!1):E=!0):_=!1;let S=w;for(s.push(t.bMarks[p]),t.bMarks[p]=i;i<a;){const O=t.src.charCodeAt(i);if(Qn(O))O===9?S+=4-(S+t.bsCount[p]+(E?1:0))%4:S++;else break;i++}h=i>=a,l.push(t.bsCount[p]),t.bsCount[p]=t.sCount[p]+1+(_?1:0),u.push(t.sCount[p]),t.sCount[p]=S-w,c.push(t.tShift[p]),t.tShift[p]=i-t.bMarks[p];continue}if(h)break;let x=!1;for(let w=0,_=f.length;w<_;w++)if(f[w](t,p,n,!0)){x=!0;break}if(x){t.lineMax=p,t.blkIndent!==0&&(s.push(t.bMarks[p]),l.push(t.bsCount[p]),c.push(t.tShift[p]),u.push(t.sCount[p]),t.sCount[p]-=t.blkIndent);break}s.push(t.bMarks[p]),l.push(t.bsCount[p]),c.push(t.tShift[p]),u.push(t.sCount[p]),t.sCount[p]=-1}const g=t.blkIndent;t.blkIndent=0;const v=t.push("blockquote_open","blockquote",1);v.markup=">";const m=[e,0];v.map=m,t.md.block.tokenize(t,e,p);const y=t.push("blockquote_close","blockquote",-1);y.markup=">",t.lineMax=o,t.parentType=d,m[1]=t.line;for(let b=0;b<c.length;b++)t.bMarks[b+e]=s[b],t.tShift[b+e]=c[b],t.sCount[b+e]=u[b],t.bsCount[b+e]=l[b];return t.blkIndent=g,!0}function Fwe(t,e,n,r){const i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let a=t.bMarks[e]+t.tShift[e];const o=t.src.charCodeAt(a++);if(o!==42&&o!==45&&o!==95)return!1;let s=1;for(;a<i;){const u=t.src.charCodeAt(a++);if(u!==o&&!Qn(u))return!1;u===o&&s++}if(s<3)return!1;if(r)return!0;t.line=e+1;const l=t.push("hr","hr",0);return l.map=[e,t.line],l.markup=Array(s+1).join(String.fromCharCode(o)),!0}function o9(t,e){const n=t.eMarks[e];let r=t.bMarks[e]+t.tShift[e];const i=t.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<n){const a=t.src.charCodeAt(r);if(!Qn(a))return-1}return r}function s9(t,e){const n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];let i=n;if(i+1>=r)return-1;let a=t.src.charCodeAt(i++);if(a<48||a>57)return-1;for(;;){if(i>=r)return-1;if(a=t.src.charCodeAt(i++),a>=48&&a<=57){if(i-n>=10)return-1;continue}if(a===41||a===46)break;return-1}return i<r&&(a=t.src.charCodeAt(i),!Qn(a))?-1:i}function zwe(t,e){const n=t.level+2;for(let r=e+2,i=t.tokens.length-2;r<i;r++)t.tokens[r].level===n&&t.tokens[r].type==="paragraph_open"&&(t.tokens[r+2].hidden=!0,t.tokens[r].hidden=!0,r+=2)}function jwe(t,e,n,r){let i,a,o,s,l=e,u=!0;if(t.sCount[l]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[l]-t.listIndent>=4&&t.sCount[l]<t.blkIndent)return!1;let c=!1;r&&t.parentType==="paragraph"&&t.sCount[l]>=t.blkIndent&&(c=!0);let f,d,h;if((h=s9(t,l))>=0){if(f=!0,o=t.bMarks[l]+t.tShift[l],d=Number(t.src.slice(o,h-1)),c&&d!==1)return!1}else if((h=o9(t,l))>=0)f=!1;else return!1;if(c&&t.skipSpaces(h)>=t.eMarks[l])return!1;if(r)return!0;const p=t.src.charCodeAt(h-1),g=t.tokens.length;f?(s=t.push("ordered_list_open","ol",1),d!==1&&(s.attrs=[["start",d]])):s=t.push("bullet_list_open","ul",1);const v=[l,0];s.map=v,s.markup=String.fromCharCode(p);let m=!1;const y=t.md.block.ruler.getRules("list"),b=t.parentType;for(t.parentType="list";l<n;){a=h,i=t.eMarks[l];const x=t.sCount[l]+h-(t.bMarks[l]+t.tShift[l]);let w=x;for(;a<i;){const F=t.src.charCodeAt(a);if(F===9)w+=4-(w+t.bsCount[l])%4;else if(F===32)w++;else break;a++}const _=a;let E;_>=i?E=1:E=w-x,E>4&&(E=1);const S=x+E;s=t.push("list_item_open","li",1),s.markup=String.fromCharCode(p);const O=[l,0];s.map=O,f&&(s.info=t.src.slice(o,h-1));const A=t.tight,T=t.tShift[l],I=t.sCount[l],D=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=S,t.tight=!0,t.tShift[l]=_-t.bMarks[l],t.sCount[l]=w,_>=i&&t.isEmpty(l+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,l,n,!0),(!t.tight||m)&&(u=!1),m=t.line-l>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=D,t.tShift[l]=T,t.sCount[l]=I,t.tight=A,s=t.push("list_item_close","li",-1),s.markup=String.fromCharCode(p),l=t.line,O[1]=l,l>=n||t.sCount[l]<t.blkIndent||t.sCount[l]-t.blkIndent>=4)break;let R=!1;for(let F=0,z=y.length;F<z;F++)if(y[F](t,l,n,!0)){R=!0;break}if(R)break;if(f){if(h=s9(t,l),h<0)break;o=t.bMarks[l]+t.tShift[l]}else if(h=o9(t,l),h<0)break;if(p!==t.src.charCodeAt(h-1))break}return f?s=t.push("ordered_list_close","ol",-1):s=t.push("bullet_list_close","ul",-1),s.markup=String.fromCharCode(p),v[1]=l,t.line=l,t.parentType=b,u&&zwe(t,g),!0}function Bwe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],a=t.eMarks[e],o=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==91)return!1;function s(y){const b=t.lineMax;if(y>=b||t.isEmpty(y))return null;let x=!1;if(t.sCount[y]-t.blkIndent>3&&(x=!0),t.sCount[y]<0&&(x=!0),!x){const E=t.md.block.ruler.getRules("reference"),S=t.parentType;t.parentType="reference";let O=!1;for(let A=0,T=E.length;A<T;A++)if(E[A](t,y,b,!0)){O=!0;break}if(t.parentType=S,O)return null}const w=t.bMarks[y]+t.tShift[y],_=t.eMarks[y];return t.src.slice(w,_+1)}let l=t.src.slice(i,a+1);a=l.length;let u=-1;for(i=1;i<a;i++){const y=l.charCodeAt(i);if(y===91)return!1;if(y===93){u=i;break}else if(y===10){const b=s(o);b!==null&&(l+=b,a=l.length,o++)}else if(y===92&&(i++,i<a&&l.charCodeAt(i)===10)){const b=s(o);b!==null&&(l+=b,a=l.length,o++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(i=u+2;i<a;i++){const y=l.charCodeAt(i);if(y===10){const b=s(o);b!==null&&(l+=b,a=l.length,o++)}else if(!Qn(y))break}const c=t.md.helpers.parseLinkDestination(l,i,a);if(!c.ok)return!1;const f=t.md.normalizeLink(c.str);if(!t.md.validateLink(f))return!1;i=c.pos;const d=i,h=o,p=i;for(;i<a;i++){const y=l.charCodeAt(i);if(y===10){const b=s(o);b!==null&&(l+=b,a=l.length,o++)}else if(!Qn(y))break}let g=t.md.helpers.parseLinkTitle(l,i,a);for(;g.can_continue;){const y=s(o);if(y===null)break;l+=y,i=a,a=l.length,o++,g=t.md.helpers.parseLinkTitle(l,i,a,g)}let v;for(i<a&&p!==i&&g.ok?(v=g.str,i=g.pos):(v="",i=d,o=h);i<a;){const y=l.charCodeAt(i);if(!Qn(y))break;i++}if(i<a&&l.charCodeAt(i)!==10&&v)for(v="",i=d,o=h;i<a;){const y=l.charCodeAt(i);if(!Qn(y))break;i++}if(i<a&&l.charCodeAt(i)!==10)return!1;const m=h2(l.slice(1,u));return m?(r||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[m]>"u"&&(t.env.references[m]={title:v,href:f}),t.line=o),!0):!1}const $we=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Vwe="[a-zA-Z_:][a-zA-Z0-9:._-]*",qwe="[^\"'=<>`\\x00-\\x20]+",Wwe="'[^']*'",Gwe='"[^"]*"',Hwe="(?:"+qwe+"|"+Wwe+"|"+Gwe+")",Ywe="(?:\\s+"+Vwe+"(?:\\s*=\\s*"+Hwe+")?)",BZ="<[A-Za-z][A-Za-z0-9\\-]*"+Ywe+"*\\s*\\/?>",$Z="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Uwe="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",Xwe="<[?][\\s\\S]*?[?]>",Zwe="<![A-Za-z][^>]*>",Kwe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Jwe=new RegExp("^(?:"+BZ+"|"+$Z+"|"+Uwe+"|"+Xwe+"|"+Zwe+"|"+Kwe+")"),Qwe=new RegExp("^(?:"+BZ+"|"+$Z+")"),Cd=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+$we.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Qwe.source+"\\s*$"),/^$/,!1]];function e_e(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],a=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(i)!==60)return!1;let o=t.src.slice(i,a),s=0;for(;s<Cd.length&&!Cd[s][0].test(o);s++);if(s===Cd.length)return!1;if(r)return Cd[s][2];let l=e+1;if(!Cd[s][1].test(o)){for(;l<n&&!(t.sCount[l]<t.blkIndent);l++)if(i=t.bMarks[l]+t.tShift[l],a=t.eMarks[l],o=t.src.slice(i,a),Cd[s][1].test(o)){o.length!==0&&l++;break}}t.line=l;const u=t.push("html_block","",0);return u.map=[e,l],u.content=t.getLines(e,l,t.blkIndent,!0),!0}function t_e(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],a=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let o=t.src.charCodeAt(i);if(o!==35||i>=a)return!1;let s=1;for(o=t.src.charCodeAt(++i);o===35&&i<a&&s<=6;)s++,o=t.src.charCodeAt(++i);if(s>6||i<a&&!Qn(o))return!1;if(r)return!0;a=t.skipSpacesBack(a,i);const l=t.skipCharsBack(a,35,i);l>i&&Qn(t.src.charCodeAt(l-1))&&(a=l),t.line=e+1;const u=t.push("heading_open","h"+String(s),1);u.markup="########".slice(0,s),u.map=[e,t.line];const c=t.push("inline","",0);c.content=t.src.slice(i,a).trim(),c.map=[e,t.line],c.children=[];const f=t.push("heading_close","h"+String(s),-1);return f.markup="########".slice(0,s),!0}function n_e(t,e,n){const r=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;const i=t.parentType;t.parentType="paragraph";let a=0,o,s=e+1;for(;s<n&&!t.isEmpty(s);s++){if(t.sCount[s]-t.blkIndent>3)continue;if(t.sCount[s]>=t.blkIndent){let h=t.bMarks[s]+t.tShift[s];const p=t.eMarks[s];if(h<p&&(o=t.src.charCodeAt(h),(o===45||o===61)&&(h=t.skipChars(h,o),h=t.skipSpaces(h),h>=p))){a=o===61?1:2;break}}if(t.sCount[s]<0)continue;let d=!1;for(let h=0,p=r.length;h<p;h++)if(r[h](t,s,n,!0)){d=!0;break}if(d)break}if(!a)return!1;const l=t.getLines(e,s,t.blkIndent,!1).trim();t.line=s+1;const u=t.push("heading_open","h"+String(a),1);u.markup=String.fromCharCode(o),u.map=[e,t.line];const c=t.push("inline","",0);c.content=l,c.map=[e,t.line-1],c.children=[];const f=t.push("heading_close","h"+String(a),-1);return f.markup=String.fromCharCode(o),t.parentType=i,!0}function r_e(t,e,n){const r=t.md.block.ruler.getRules("paragraph"),i=t.parentType;let a=e+1;for(t.parentType="paragraph";a<n&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3||t.sCount[a]<0)continue;let u=!1;for(let c=0,f=r.length;c<f;c++)if(r[c](t,a,n,!0)){u=!0;break}if(u)break}const o=t.getLines(e,a,t.blkIndent,!1).trim();t.line=a;const s=t.push("paragraph_open","p",1);s.map=[e,t.line];const l=t.push("inline","",0);return l.content=o,l.map=[e,t.line],l.children=[],t.push("paragraph_close","p",-1),t.parentType=i,!0}const Gm=[["table",Iwe,["paragraph","reference"]],["code",Lwe],["fence",Rwe,["paragraph","reference","blockquote","list"]],["blockquote",Nwe,["paragraph","reference","blockquote","list"]],["hr",Fwe,["paragraph","reference","blockquote","list"]],["list",jwe,["paragraph","reference","blockquote"]],["reference",Bwe],["html_block",e_e,["paragraph","reference","blockquote"]],["heading",t_e,["paragraph","reference","blockquote"]],["lheading",n_e],["paragraph",r_e]];function p2(){this.ruler=new Ba;for(let t=0;t<Gm.length;t++)this.ruler.push(Gm[t][0],Gm[t][1],{alt:(Gm[t][2]||[]).slice()})}p2.prototype.tokenize=function(t,e,n){const r=this.ruler.getRules(""),i=r.length,a=t.md.options.maxNesting;let o=e,s=!1;for(;o<n&&(t.line=o=t.skipEmptyLines(o),!(o>=n||t.sCount[o]<t.blkIndent));){if(t.level>=a){t.line=n;break}const l=t.line;let u=!1;for(let c=0;c<i;c++)if(u=r[c](t,o,n,!1),u){if(l>=t.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");t.tight=!s,t.isEmpty(t.line-1)&&(s=!0),o=t.line,o<n&&t.isEmpty(o)&&(s=!0,o++,t.line=o)}};p2.prototype.parse=function(t,e,n,r){if(!t)return;const i=new this.State(t,e,n,r);this.tokenize(i,i.line,i.lineMax)};p2.prototype.State=_l;function Mv(t,e,n,r){this.src=t,this.env=n,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Mv.prototype.pushPending=function(){const t=new Cs("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};Mv.prototype.push=function(t,e,n){this.pending&&this.pushPending();const r=new Cs(t,e,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};Mv.prototype.scanDelims=function(t,e){const n=this.posMax,r=this.src.charCodeAt(t),i=t>0?this.src.charCodeAt(t-1):32;let a=t;for(;a<n&&this.src.charCodeAt(a)===r;)a++;const o=a-t,s=a<n?this.src.charCodeAt(a):32,l=E0(i)||S0(String.fromCharCode(i)),u=E0(s)||S0(String.fromCharCode(s)),c=_0(i),f=_0(s),d=!f&&(!u||c||l),h=!c&&(!l||f||u);return{can_open:d&&(e||!h||l),can_close:h&&(e||!d||u),length:o}};Mv.prototype.Token=Cs;function i_e(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function a_e(t,e){let n=t.pos;for(;n<t.posMax&&!i_e(t.src.charCodeAt(n));)n++;return n===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)}const o_e=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function s_e(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;const n=t.pos,r=t.posMax;if(n+3>r||t.src.charCodeAt(n)!==58||t.src.charCodeAt(n+1)!==47||t.src.charCodeAt(n+2)!==47)return!1;const i=t.pending.match(o_e);if(!i)return!1;const a=i[1],o=t.md.linkify.matchAtStart(t.src.slice(n-a.length));if(!o)return!1;let s=o.url;if(s.length<=a.length)return!1;s=s.replace(/\*+$/,"");const l=t.md.normalizeLink(s);if(!t.md.validateLink(l))return!1;if(!e){t.pending=t.pending.slice(0,-a.length);const u=t.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const c=t.push("text","",0);c.content=t.md.normalizeLinkText(s);const f=t.push("link_close","a",-1);f.markup="linkify",f.info="auto"}return t.pos+=s.length-a.length,!0}function l_e(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==10)return!1;const r=t.pending.length-1,i=t.posMax;if(!e)if(r>=0&&t.pending.charCodeAt(r)===32)if(r>=1&&t.pending.charCodeAt(r-1)===32){let a=r-1;for(;a>=1&&t.pending.charCodeAt(a-1)===32;)a--;t.pending=t.pending.slice(0,a),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(n++;n<i&&Qn(t.src.charCodeAt(n));)n++;return t.pos=n,!0}const vI=[];for(let t=0;t<256;t++)vI.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){vI[t.charCodeAt(0)]=1});function u_e(t,e){let n=t.pos;const r=t.posMax;if(t.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let i=t.src.charCodeAt(n);if(i===10){for(e||t.push("hardbreak","br",0),n++;n<r&&(i=t.src.charCodeAt(n),!!Qn(i));)n++;return t.pos=n,!0}let a=t.src[n];if(i>=55296&&i<=56319&&n+1<r){const s=t.src.charCodeAt(n+1);s>=56320&&s<=57343&&(a+=t.src[n+1],n++)}const o="\\"+a;if(!e){const s=t.push("text_special","",0);i<256&&vI[i]!==0?s.content=a:s.content=o,s.markup=o,s.info="escape"}return t.pos=n+1,!0}function c_e(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==96)return!1;const i=n;n++;const a=t.posMax;for(;n<a&&t.src.charCodeAt(n)===96;)n++;const o=t.src.slice(i,n),s=o.length;if(t.backticksScanned&&(t.backticks[s]||0)<=i)return e||(t.pending+=o),t.pos+=s,!0;let l=n,u;for(;(u=t.src.indexOf("`",l))!==-1;){for(l=u+1;l<a&&t.src.charCodeAt(l)===96;)l++;const c=l-u;if(c===s){if(!e){const f=t.push("code_inline","code",0);f.markup=o,f.content=t.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=l,!0}t.backticks[c]=u}return t.backticksScanned=!0,e||(t.pending+=o),t.pos+=s,!0}function f_e(t,e){const n=t.pos,r=t.src.charCodeAt(n);if(e||r!==126)return!1;const i=t.scanDelims(t.pos,!0);let a=i.length;const o=String.fromCharCode(r);if(a<2)return!1;let s;a%2&&(s=t.push("text","",0),s.content=o,a--);for(let l=0;l<a;l+=2)s=t.push("text","",0),s.content=o+o,t.delimiters.push({marker:r,length:0,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0}function l9(t,e){let n;const r=[],i=e.length;for(let a=0;a<i;a++){const o=e[a];if(o.marker!==126||o.end===-1)continue;const s=e[o.end];n=t.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=t.tokens[s.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",t.tokens[s.token-1].type==="text"&&t.tokens[s.token-1].content==="~"&&r.push(s.token-1)}for(;r.length;){const a=r.pop();let o=a+1;for(;o<t.tokens.length&&t.tokens[o].type==="s_close";)o++;o--,a!==o&&(n=t.tokens[o],t.tokens[o]=t.tokens[a],t.tokens[a]=n)}}function d_e(t){const e=t.tokens_meta,n=t.tokens_meta.length;l9(t,t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&l9(t,e[r].delimiters)}const VZ={tokenize:f_e,postProcess:d_e};function h_e(t,e){const n=t.pos,r=t.src.charCodeAt(n);if(e||r!==95&&r!==42)return!1;const i=t.scanDelims(t.pos,r===42);for(let a=0;a<i.length;a++){const o=t.push("text","",0);o.content=String.fromCharCode(r),t.delimiters.push({marker:r,length:i.length,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return t.pos+=i.length,!0}function u9(t,e){const n=e.length;for(let r=n-1;r>=0;r--){const i=e[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const a=e[i.end],o=r>0&&e[r-1].end===i.end+1&&e[r-1].marker===i.marker&&e[r-1].token===i.token-1&&e[i.end+1].token===a.token+1,s=String.fromCharCode(i.marker),l=t.tokens[i.token];l.type=o?"strong_open":"em_open",l.tag=o?"strong":"em",l.nesting=1,l.markup=o?s+s:s,l.content="";const u=t.tokens[a.token];u.type=o?"strong_close":"em_close",u.tag=o?"strong":"em",u.nesting=-1,u.markup=o?s+s:s,u.content="",o&&(t.tokens[e[r-1].token].content="",t.tokens[e[i.end+1].token].content="",r--)}}function p_e(t){const e=t.tokens_meta,n=t.tokens_meta.length;u9(t,t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&u9(t,e[r].delimiters)}const qZ={tokenize:h_e,postProcess:p_e};function g_e(t,e){let n,r,i,a,o="",s="",l=t.pos,u=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;const c=t.pos,f=t.posMax,d=t.pos+1,h=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(h<0)return!1;let p=h+1;if(p<f&&t.src.charCodeAt(p)===40){for(u=!1,p++;p<f&&(n=t.src.charCodeAt(p),!(!Qn(n)&&n!==10));p++);if(p>=f)return!1;if(l=p,i=t.md.helpers.parseLinkDestination(t.src,p,t.posMax),i.ok){for(o=t.md.normalizeLink(i.str),t.md.validateLink(o)?p=i.pos:o="",l=p;p<f&&(n=t.src.charCodeAt(p),!(!Qn(n)&&n!==10));p++);if(i=t.md.helpers.parseLinkTitle(t.src,p,t.posMax),p<f&&l!==p&&i.ok)for(s=i.str,p=i.pos;p<f&&(n=t.src.charCodeAt(p),!(!Qn(n)&&n!==10));p++);}(p>=f||t.src.charCodeAt(p)!==41)&&(u=!0),p++}if(u){if(typeof t.env.references>"u")return!1;if(p<f&&t.src.charCodeAt(p)===91?(l=p+1,p=t.md.helpers.parseLinkLabel(t,p),p>=0?r=t.src.slice(l,p++):p=h+1):p=h+1,r||(r=t.src.slice(d,h)),a=t.env.references[h2(r)],!a)return t.pos=c,!1;o=a.href,s=a.title}if(!e){t.pos=d,t.posMax=h;const g=t.push("link_open","a",1),v=[["href",o]];g.attrs=v,s&&v.push(["title",s]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=p,t.posMax=f,!0}function v_e(t,e){let n,r,i,a,o,s,l,u,c="";const f=t.pos,d=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;const h=t.pos+2,p=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(p<0)return!1;if(a=p+1,a<d&&t.src.charCodeAt(a)===40){for(a++;a<d&&(n=t.src.charCodeAt(a),!(!Qn(n)&&n!==10));a++);if(a>=d)return!1;for(u=a,s=t.md.helpers.parseLinkDestination(t.src,a,t.posMax),s.ok&&(c=t.md.normalizeLink(s.str),t.md.validateLink(c)?a=s.pos:c=""),u=a;a<d&&(n=t.src.charCodeAt(a),!(!Qn(n)&&n!==10));a++);if(s=t.md.helpers.parseLinkTitle(t.src,a,t.posMax),a<d&&u!==a&&s.ok)for(l=s.str,a=s.pos;a<d&&(n=t.src.charCodeAt(a),!(!Qn(n)&&n!==10));a++);else l="";if(a>=d||t.src.charCodeAt(a)!==41)return t.pos=f,!1;a++}else{if(typeof t.env.references>"u")return!1;if(a<d&&t.src.charCodeAt(a)===91?(u=a+1,a=t.md.helpers.parseLinkLabel(t,a),a>=0?i=t.src.slice(u,a++):a=p+1):a=p+1,i||(i=t.src.slice(h,p)),o=t.env.references[h2(i)],!o)return t.pos=f,!1;c=o.href,l=o.title}if(!e){r=t.src.slice(h,p);const g=[];t.md.inline.parse(r,t.md,t.env,g);const v=t.push("image","img",0),m=[["src",c],["alt",""]];v.attrs=m,v.children=g,v.content=r,l&&m.push(["title",l])}return t.pos=a,t.posMax=d,!0}const m_e=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,y_e=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function b_e(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==60)return!1;const r=t.pos,i=t.posMax;for(;;){if(++n>=i)return!1;const o=t.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const a=t.src.slice(r+1,n);if(y_e.test(a)){const o=t.md.normalizeLink(a);if(!t.md.validateLink(o))return!1;if(!e){const s=t.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const l=t.push("text","",0);l.content=t.md.normalizeLinkText(a);const u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=a.length+2,!0}if(m_e.test(a)){const o=t.md.normalizeLink("mailto:"+a);if(!t.md.validateLink(o))return!1;if(!e){const s=t.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const l=t.push("text","",0);l.content=t.md.normalizeLinkText(a);const u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=a.length+2,!0}return!1}function x_e(t){return/^<a[>\s]/i.test(t)}function w_e(t){return/^<\/a\s*>/i.test(t)}function __e(t){const e=t|32;return e>=97&&e<=122}function S_e(t,e){if(!t.md.options.html)return!1;const n=t.posMax,r=t.pos;if(t.src.charCodeAt(r)!==60||r+2>=n)return!1;const i=t.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!__e(i))return!1;const a=t.src.slice(r).match(Jwe);if(!a)return!1;if(!e){const o=t.push("html_inline","",0);o.content=a[0],x_e(o.content)&&t.linkLevel++,w_e(o.content)&&t.linkLevel--}return t.pos+=a[0].length,!0}const E_e=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,O_e=/^&([a-z][a-z0-9]{1,31});/i;function k_e(t,e){const n=t.pos,r=t.posMax;if(t.src.charCodeAt(n)!==38||n+1>=r)return!1;if(t.src.charCodeAt(n+1)===35){const a=t.src.slice(n).match(E_e);if(a){if(!e){const o=a[1][0].toLowerCase()==="x"?parseInt(a[1].slice(1),16):parseInt(a[1],10),s=t.push("text_special","",0);s.content=pI(o)?cb(o):cb(65533),s.markup=a[0],s.info="entity"}return t.pos+=a[0].length,!0}}else{const a=t.src.slice(n).match(O_e);if(a){const o=RZ(a[0]);if(o!==a[0]){if(!e){const s=t.push("text_special","",0);s.content=o,s.markup=a[0],s.info="entity"}return t.pos+=a[0].length,!0}}}return!1}function c9(t){const e={},n=t.length;if(!n)return;let r=0,i=-2;const a=[];for(let o=0;o<n;o++){const s=t[o];if(a.push(0),(t[r].marker!==s.marker||i!==s.token-1)&&(r=o),i=s.token,s.length=s.length||0,!s.close)continue;e.hasOwnProperty(s.marker)||(e[s.marker]=[-1,-1,-1,-1,-1,-1]);const l=e[s.marker][(s.open?3:0)+s.length%3];let u=r-a[r]-1,c=u;for(;u>l;u-=a[u]+1){const f=t[u];if(f.marker===s.marker&&f.open&&f.end<0){let d=!1;if((f.close||s.open)&&(f.length+s.length)%3===0&&(f.length%3!==0||s.length%3!==0)&&(d=!0),!d){const h=u>0&&!t[u-1].open?a[u-1]+1:0;a[o]=o-u+h,a[u]=h,s.open=!1,f.end=o,f.close=!1,c=-1,i=-2;break}}}c!==-1&&(e[s.marker][(s.open?3:0)+(s.length||0)%3]=c)}}function A_e(t){const e=t.tokens_meta,n=t.tokens_meta.length;c9(t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&c9(e[r].delimiters)}function T_e(t){let e,n,r=0;const i=t.tokens,a=t.tokens.length;for(e=n=0;e<a;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,i[e].type==="text"&&e+1<a&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==n&&(i[n]=i[e]),n++);e!==n&&(i.length=n)}const $S=[["text",a_e],["linkify",s_e],["newline",l_e],["escape",u_e],["backticks",c_e],["strikethrough",VZ.tokenize],["emphasis",qZ.tokenize],["link",g_e],["image",v_e],["autolink",b_e],["html_inline",S_e],["entity",k_e]],VS=[["balance_pairs",A_e],["strikethrough",VZ.postProcess],["emphasis",qZ.postProcess],["fragments_join",T_e]];function Cv(){this.ruler=new Ba;for(let t=0;t<$S.length;t++)this.ruler.push($S[t][0],$S[t][1]);this.ruler2=new Ba;for(let t=0;t<VS.length;t++)this.ruler2.push(VS[t][0],VS[t][1])}Cv.prototype.skipToken=function(t){const e=t.pos,n=this.ruler.getRules(""),r=n.length,i=t.md.options.maxNesting,a=t.cache;if(typeof a[e]<"u"){t.pos=a[e];return}let o=!1;if(t.level<i){for(let s=0;s<r;s++)if(t.level++,o=n[s](t,!0),t.level--,o){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;o||t.pos++,a[e]=t.pos};Cv.prototype.tokenize=function(t){const e=this.ruler.getRules(""),n=e.length,r=t.posMax,i=t.md.options.maxNesting;for(;t.pos<r;){const a=t.pos;let o=!1;if(t.level<i){for(let s=0;s<n;s++)if(o=e[s](t,!1),o){if(a>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(t.pos>=r)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};Cv.prototype.parse=function(t,e,n,r){const i=new this.State(t,e,n,r);this.tokenize(i);const a=this.ruler2.getRules(""),o=a.length;for(let s=0;s<o;s++)a[s](i)};Cv.prototype.State=Mv;function M_e(t){const e={};t=t||{},e.src_Any=CZ.source,e.src_Cc=PZ.source,e.src_Z=IZ.source,e.src_P=dI.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const n="[><]";return e.src_pseudo_letter="(?:(?!"+n+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+n+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function t6(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){t[r]=n[r]})}),t}function g2(t){return Object.prototype.toString.call(t)}function C_e(t){return g2(t)==="[object String]"}function P_e(t){return g2(t)==="[object Object]"}function D_e(t){return g2(t)==="[object RegExp]"}function f9(t){return g2(t)==="[object Function]"}function I_e(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const WZ={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function L_e(t){return Object.keys(t||{}).reduce(function(e,n){return e||WZ.hasOwnProperty(n)},!1)}const R_e={"http:":{validate:function(t,e,n){const r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){const r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){const r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},N_e="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",F_e="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function z_e(t){t.__index__=-1,t.__text_cache__=""}function j_e(t){return function(e,n){const r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}function d9(){return function(t,e){e.normalize(t)}}function fb(t){const e=t.re=M_e(t.__opts__),n=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||n.push(N_e),n.push(e.src_xn),e.src_tlds=n.join("|");function r(s){return s.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const i=[];t.__compiled__={};function a(s,l){throw new Error('(LinkifyIt) Invalid schema "'+s+'": '+l)}Object.keys(t.__schemas__).forEach(function(s){const l=t.__schemas__[s];if(l===null)return;const u={validate:null,link:null};if(t.__compiled__[s]=u,P_e(l)){D_e(l.validate)?u.validate=j_e(l.validate):f9(l.validate)?u.validate=l.validate:a(s,l),f9(l.normalize)?u.normalize=l.normalize:l.normalize?a(s,l):u.normalize=d9();return}if(C_e(l)){i.push(s);return}a(s,l)}),i.forEach(function(s){t.__compiled__[t.__schemas__[s]]&&(t.__compiled__[s].validate=t.__compiled__[t.__schemas__[s]].validate,t.__compiled__[s].normalize=t.__compiled__[t.__schemas__[s]].normalize)}),t.__compiled__[""]={validate:null,normalize:d9()};const o=Object.keys(t.__compiled__).filter(function(s){return s.length>0&&t.__compiled__[s]}).map(I_e).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),z_e(t)}function B_e(t,e){const n=t.__index__,r=t.__last_index__,i=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function n6(t,e){const n=new B_e(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function uo(t,e){if(!(this instanceof uo))return new uo(t,e);e||L_e(t)&&(e=t,t={}),this.__opts__=t6({},WZ,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=t6({},R_e,t),this.__compiled__={},this.__tlds__=F_e,this.__tlds_replaced__=!1,this.re={},fb(this)}uo.prototype.add=function(e,n){return this.__schemas__[e]=n,fb(this),this};uo.prototype.set=function(e){return this.__opts__=t6(this.__opts__,e),this};uo.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let n,r,i,a,o,s,l,u,c;if(this.re.schema_test.test(e)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(e))!==null;)if(a=this.testSchemaAt(e,n[2],l.lastIndex),a){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+a;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(o=i.index+i[1].length,s=i.index+i[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=s))),this.__index__>=0};uo.prototype.pretest=function(e){return this.re.pretest.test(e)};uo.prototype.testSchemaAt=function(e,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(e,r,this):0};uo.prototype.match=function(e){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(n.push(n6(this,r)),r=this.__last_index__);let i=r?e.slice(r):e;for(;this.test(i);)n.push(n6(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};uo.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const n=this.re.schema_at_start.exec(e);if(!n)return null;const r=this.testSchemaAt(e,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,n6(this,0)):null};uo.prototype.tlds=function(e,n){return e=Array.isArray(e)?e:[e],n?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,a){return r!==a[i-1]}).reverse(),fb(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,fb(this),this)};uo.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};uo.prototype.onCompile=function(){};const dh=2147483647,Js=36,mI=1,O0=26,$_e=38,V_e=700,GZ=72,HZ=128,YZ="-",q_e=/^xn--/,W_e=/[^\0-\x7F]/,G_e=/[\x2E\u3002\uFF0E\uFF61]/g,H_e={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},qS=Js-mI,Qs=Math.floor,WS=String.fromCharCode;function Pu(t){throw new RangeError(H_e[t])}function Y_e(t,e){const n=[];let r=t.length;for(;r--;)n[r]=e(t[r]);return n}function UZ(t,e){const n=t.split("@");let r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(G_e,".");const i=t.split("."),a=Y_e(i,e).join(".");return r+a}function XZ(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const a=t.charCodeAt(n++);(a&64512)==56320?e.push(((i&1023)<<10)+(a&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}const U_e=t=>String.fromCodePoint(...t),X_e=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:Js},h9=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},ZZ=function(t,e,n){let r=0;for(t=n?Qs(t/V_e):t>>1,t+=Qs(t/e);t>qS*O0>>1;r+=Js)t=Qs(t/qS);return Qs(r+(qS+1)*t/(t+$_e))},KZ=function(t){const e=[],n=t.length;let r=0,i=HZ,a=GZ,o=t.lastIndexOf(YZ);o<0&&(o=0);for(let s=0;s<o;++s)t.charCodeAt(s)>=128&&Pu("not-basic"),e.push(t.charCodeAt(s));for(let s=o>0?o+1:0;s<n;){const l=r;for(let c=1,f=Js;;f+=Js){s>=n&&Pu("invalid-input");const d=X_e(t.charCodeAt(s++));d>=Js&&Pu("invalid-input"),d>Qs((dh-r)/c)&&Pu("overflow"),r+=d*c;const h=f<=a?mI:f>=a+O0?O0:f-a;if(d<h)break;const p=Js-h;c>Qs(dh/p)&&Pu("overflow"),c*=p}const u=e.length+1;a=ZZ(r-l,u,l==0),Qs(r/u)>dh-i&&Pu("overflow"),i+=Qs(r/u),r%=u,e.splice(r++,0,i)}return String.fromCodePoint(...e)},JZ=function(t){const e=[];t=XZ(t);const n=t.length;let r=HZ,i=0,a=GZ;for(const l of t)l<128&&e.push(WS(l));const o=e.length;let s=o;for(o&&e.push(YZ);s<n;){let l=dh;for(const c of t)c>=r&&c<l&&(l=c);const u=s+1;l-r>Qs((dh-i)/u)&&Pu("overflow"),i+=(l-r)*u,r=l;for(const c of t)if(c<r&&++i>dh&&Pu("overflow"),c===r){let f=i;for(let d=Js;;d+=Js){const h=d<=a?mI:d>=a+O0?O0:d-a;if(f<h)break;const p=f-h,g=Js-h;e.push(WS(h9(h+p%g,0))),f=Qs(p/g)}e.push(WS(h9(f,0))),a=ZZ(i,u,s===o),i=0,++s}++i,++r}return e.join("")},Z_e=function(t){return UZ(t,function(e){return q_e.test(e)?KZ(e.slice(4).toLowerCase()):e})},K_e=function(t){return UZ(t,function(e){return W_e.test(e)?"xn--"+JZ(e):e})},QZ={version:"2.3.1",ucs2:{decode:XZ,encode:U_e},decode:KZ,encode:JZ,toASCII:K_e,toUnicode:Z_e},J_e={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Q_e={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},eSe={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},tSe={default:J_e,zero:Q_e,commonmark:eSe},nSe=/^(vbscript|javascript|file|data):/,rSe=/^data:image\/(gif|png|jpeg|webp);/;function iSe(t){const e=t.trim().toLowerCase();return nSe.test(e)?rSe.test(e):!0}const eK=["http:","https:","mailto:"];function aSe(t){const e=fI(t,!0);if(e.hostname&&(!e.protocol||eK.indexOf(e.protocol)>=0))try{e.hostname=QZ.toASCII(e.hostname)}catch{}return Tv(cI(e))}function oSe(t){const e=fI(t,!0);if(e.hostname&&(!e.protocol||eK.indexOf(e.protocol)>=0))try{e.hostname=QZ.toUnicode(e.hostname)}catch{}return Dh(cI(e),Dh.defaultChars+"%")}function jo(t,e){if(!(this instanceof jo))return new jo(t,e);e||hI(t)||(e=t||{},t="default"),this.inline=new Cv,this.block=new p2,this.core=new gI,this.renderer=new pp,this.linkify=new uo,this.validateLink=iSe,this.normalizeLink=aSe,this.normalizeLinkText=oSe,this.utils=lwe,this.helpers=d2({},dwe),this.options={},this.configure(t),e&&this.set(e)}jo.prototype.set=function(t){return d2(this.options,t),this};jo.prototype.configure=function(t){const e=this;if(hI(t)){const n=t;if(t=tSe[n],!t)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this};jo.prototype.enable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(t,!0))},this),n=n.concat(this.inline.ruler2.enable(t,!0));const r=t.filter(function(i){return n.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};jo.prototype.disable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(t,!0))},this),n=n.concat(this.inline.ruler2.disable(t,!0));const r=t.filter(function(i){return n.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};jo.prototype.use=function(t){const e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};jo.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");const n=new this.core.State(t,this,e);return this.core.process(n),n.tokens};jo.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};jo.prototype.parseInline=function(t,e){const n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens};jo.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};const p9=new Set([!0,!1,"alt","title"]);function tK(t,e){return(Array.isArray(t)?t:[]).filter(([n])=>n!==e)}function nK(t,e){t&&t.attrs&&(t.attrs=tK(t.attrs,e))}function sSe(t,e){if(!p9.has(t))throw new TypeError(`figcaption must be one of: ${[...p9]}.`);if(t==="alt")return e.content;const n=e.attrs.find(([r])=>r==="title");return Array.isArray(n)&&n[1]?(nK(e,"title"),n[1]):void 0}function lSe(t,e){e=e||{},t.core.ruler.before("linkify","image_figures",function(n){let r=1;for(let i=1,a=n.tokens.length;i<a-1;++i){const o=n.tokens[i];if(o.type!=="inline"||!o.children||o.children.length!==1&&o.children.length!==3||o.children.length===1&&o.children[0].type!=="image")continue;if(o.children.length===3){const[u,c,f]=o.children;if(u.type!=="link_open"||c.type!=="image"||f.type!=="link_close")continue}if(i!==0&&n.tokens[i-1].type!=="paragraph_open"||i!==a-1&&n.tokens[i+1].type!=="paragraph_close")continue;const s=n.tokens[i-1];let l;if(s.type="figure_open",s.tag="figure",n.tokens[i+1].type="figure_close",n.tokens[i+1].tag="figure",e.dataType&&n.tokens[i-1].attrPush(["data-type","image"]),e.link&&o.children.length===1){[l]=o.children;const u=new n.Token("link_open","a",1);u.attrPush(["href",l.attrGet("src")]),o.children.unshift(u),o.children.push(new n.Token("link_close","a",-1))}if(l=o.children.length===1?o.children[0]:o.children[1],e.figcaption){const u=sSe(e.figcaption,l);if(u){const[c]=t.parseInline(u,n.env);o.children.push(new n.Token("figcaption_open","figcaption",1)),o.children.push(...c.children),o.children.push(new n.Token("figcaption_close","figcaption",-1)),l.attrs&&(l.attrs=tK(l.attrs,"title"))}}if(e.copyAttrs&&l.attrs){const u=e.copyAttrs===!0?"":e.copyAttrs;s.attrs=l.attrs.filter(([c])=>c.match(u)).map(c=>Array.from(c))}if(e.tabindex&&(n.tokens[i-1].attrPush(["tabindex",r]),r++),e.lazy&&(l.attrs.some(([u])=>u==="loading")||l.attrs.push(["loading","lazy"])),e.async&&(l.attrs.some(([u])=>u==="decoding")||l.attrs.push(["decoding","async"])),e.classes&&typeof e.classes=="string"){let u=!1;for(let c=0,f=l.attrs.length;c<f&&!u;c++){const d=l.attrs[c];d[0]==="class"&&(d[1]=`${d[1]} ${e.classes}`,u=!0)}u||l.attrs.push(["class",e.classes])}if(e.removeSrc){const u=l.attrs.find(([c])=>c==="src");l.attrs.push(["data-src",u[1]]),nK(l,"src")}}})}const uSe=/\\([ \\!"#$%&'()*+,./:;<=>?@[\]^_`{|}~-])/g;function cSe(t,e){const n=t.posMax,r=t.pos;if(t.src.charCodeAt(r)!==126||e||r+2>=n)return!1;t.pos=r+1;let i=!1;for(;t.pos<n;){if(t.src.charCodeAt(t.pos)===126){i=!0;break}t.md.inline.skipToken(t)}if(!i||r+1===t.pos)return t.pos=r,!1;const a=t.src.slice(r+1,t.pos);if(a.match(/(^|[^\\])(\\\\)*\s/))return t.pos=r,!1;t.posMax=t.pos,t.pos=r+1;const o=t.push("sub_open","sub",1);o.markup="~";const s=t.push("text","",0);s.content=a.replace(uSe,"$1");const l=t.push("sub_close","sub",-1);return l.markup="~",t.pos=t.posMax+1,t.posMax=n,!0}function fSe(t){t.inline.ruler.after("emphasis","sub",cSe)}const dSe=/\\([ \\!"#$%&'()*+,./:;<=>?@[\]^_`{|}~-])/g;function hSe(t,e){const n=t.posMax,r=t.pos;if(t.src.charCodeAt(r)!==94||e||r+2>=n)return!1;t.pos=r+1;let i=!1;for(;t.pos<n;){if(t.src.charCodeAt(t.pos)===94){i=!0;break}t.md.inline.skipToken(t)}if(!i||r+1===t.pos)return t.pos=r,!1;const a=t.src.slice(r+1,t.pos);if(a.match(/(^|[^\\])(\\\\)*\s/))return t.pos=r,!1;t.posMax=t.pos,t.pos=r+1;const o=t.push("sup_open","sup",1);o.markup="^";const s=t.push("text","",0);s.content=a.replace(dSe,"$1");const l=t.push("sup_close","sup",-1);return l.markup="^",t.pos=t.posMax+1,t.posMax=n,!0}function pSe(t){t.inline.ruler.after("emphasis","sup",hSe)}const gSe=(t,e)=>{if(!t)return t;const n=e.split(`
`),r=['<span rn-wrapper aria-hidden="true">'];return n.forEach(()=>{r.push("<span></span>")}),r.push("</span>"),`<span class="${it}-code-block">${t}</span>${r.join("")}`},Pd=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,rK=new Set,r6=typeof process=="object"&&process?process:{},iK=(t,e,n,r)=>{typeof r6.emitWarning=="function"?r6.emitWarning(t,e,n,r):console.error(`[${n}] ${e}: ${t}`)};let db=globalThis.AbortController,g9=globalThis.AbortSignal;var tU;if(typeof db>"u"){g9=class{constructor(){yt(this,"onabort");yt(this,"_onabort",[]);yt(this,"reason");yt(this,"aborted",!1)}addEventListener(r,i){this._onabort.push(i)}},db=class{constructor(){yt(this,"signal",new g9);e()}abort(r){var i,a;if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(const o of this.signal._onabort)o(r);(a=(i=this.signal).onabort)==null||a.call(i,r)}}};let t=((tU=r6.env)==null?void 0:tU.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{t&&(t=!1,iK("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const vSe=t=>!rK.has(t),ku=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),aK=t=>ku(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?x1:null:null;class x1 extends Array{constructor(e){super(e),this.fill(0)}}var Sh;const uf=class uf{constructor(e,n){yt(this,"heap");yt(this,"length");if(!re(uf,Sh))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}static create(e){const n=aK(e);if(!n)return[];ht(uf,Sh,!0);const r=new uf(e,n);return ht(uf,Sh,!1),r}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};Sh=new WeakMap,tn(uf,Sh,!1);let i6=uf;var nU,rU,is,Ua,as,os,Eh,Oh,hi,ss,ei,ar,Ct,ha,Xa,ta,ki,ls,Ai,us,cs,Za,fs,$u,pa,Ge,o6,mf,jl,gv,Ka,oK,yf,kh,vv,Au,Tu,s6,w1,_1,nr,l6,xg,Mu,u6;const G4=class G4{constructor(e){tn(this,Ge);tn(this,is);tn(this,Ua);tn(this,as);tn(this,os);tn(this,Eh);tn(this,Oh);yt(this,"ttl");yt(this,"ttlResolution");yt(this,"ttlAutopurge");yt(this,"updateAgeOnGet");yt(this,"updateAgeOnHas");yt(this,"allowStale");yt(this,"noDisposeOnSet");yt(this,"noUpdateTTL");yt(this,"maxEntrySize");yt(this,"sizeCalculation");yt(this,"noDeleteOnFetchRejection");yt(this,"noDeleteOnStaleGet");yt(this,"allowStaleOnFetchAbort");yt(this,"allowStaleOnFetchRejection");yt(this,"ignoreFetchAbort");tn(this,hi);tn(this,ss);tn(this,ei);tn(this,ar);tn(this,Ct);tn(this,ha);tn(this,Xa);tn(this,ta);tn(this,ki);tn(this,ls);tn(this,Ai);tn(this,us);tn(this,cs);tn(this,Za);tn(this,fs);tn(this,$u);tn(this,pa);tn(this,mf,()=>{});tn(this,jl,()=>{});tn(this,gv,()=>{});tn(this,Ka,()=>!1);tn(this,yf,e=>{});tn(this,kh,(e,n,r)=>{});tn(this,vv,(e,n,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});yt(this,nU,"LRUCache");const{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:a,updateAgeOnGet:o,updateAgeOnHas:s,allowStale:l,dispose:u,disposeAfter:c,noDisposeOnSet:f,noUpdateTTL:d,maxSize:h=0,maxEntrySize:p=0,sizeCalculation:g,fetchMethod:v,memoMethod:m,noDeleteOnFetchRejection:y,noDeleteOnStaleGet:b,allowStaleOnFetchRejection:x,allowStaleOnFetchAbort:w,ignoreFetchAbort:_}=e;if(n!==0&&!ku(n))throw new TypeError("max option must be a nonnegative integer");const E=n?aK(n):Array;if(!E)throw new Error("invalid max value: "+n);if(ht(this,is,n),ht(this,Ua,h),this.maxEntrySize=p||re(this,Ua),this.sizeCalculation=g,this.sizeCalculation){if(!re(this,Ua)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(m!==void 0&&typeof m!="function")throw new TypeError("memoMethod must be a function if defined");if(ht(this,Oh,m),v!==void 0&&typeof v!="function")throw new TypeError("fetchMethod must be a function if specified");if(ht(this,Eh,v),ht(this,$u,!!v),ht(this,ei,new Map),ht(this,ar,new Array(n).fill(void 0)),ht(this,Ct,new Array(n).fill(void 0)),ht(this,ha,new E(n)),ht(this,Xa,new E(n)),ht(this,ta,0),ht(this,ki,0),ht(this,ls,i6.create(n)),ht(this,hi,0),ht(this,ss,0),typeof u=="function"&&ht(this,as,u),typeof c=="function"?(ht(this,os,c),ht(this,Ai,[])):(ht(this,os,void 0),ht(this,Ai,void 0)),ht(this,fs,!!re(this,as)),ht(this,pa,!!re(this,os)),this.noDisposeOnSet=!!f,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!y,this.allowStaleOnFetchRejection=!!x,this.allowStaleOnFetchAbort=!!w,this.ignoreFetchAbort=!!_,this.maxEntrySize!==0){if(re(this,Ua)!==0&&!ku(re(this,Ua)))throw new TypeError("maxSize must be a positive integer if specified");if(!ku(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Qe(this,Ge,oK).call(this)}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!s,this.ttlResolution=ku(i)||i===0?i:1,this.ttlAutopurge=!!a,this.ttl=r||0,this.ttl){if(!ku(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Qe(this,Ge,o6).call(this)}if(re(this,is)===0&&this.ttl===0&&re(this,Ua)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!re(this,is)&&!re(this,Ua)){const S="LRU_CACHE_UNBOUNDED";vSe(S)&&(rK.add(S),iK("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",S,G4))}}static unsafeExposeInternals(e){return{starts:re(e,cs),ttls:re(e,Za),sizes:re(e,us),keyMap:re(e,ei),keyList:re(e,ar),valList:re(e,Ct),next:re(e,ha),prev:re(e,Xa),get head(){return re(e,ta)},get tail(){return re(e,ki)},free:re(e,ls),isBackgroundFetch:n=>{var r;return Qe(r=e,Ge,nr).call(r,n)},backgroundFetch:(n,r,i,a)=>{var o;return Qe(o=e,Ge,_1).call(o,n,r,i,a)},moveToTail:n=>{var r;return Qe(r=e,Ge,xg).call(r,n)},indexes:n=>{var r;return Qe(r=e,Ge,Au).call(r,n)},rindexes:n=>{var r;return Qe(r=e,Ge,Tu).call(r,n)},isStale:n=>{var r;return re(r=e,Ka).call(r,n)}}}get max(){return re(this,is)}get maxSize(){return re(this,Ua)}get calculatedSize(){return re(this,ss)}get size(){return re(this,hi)}get fetchMethod(){return re(this,Eh)}get memoMethod(){return re(this,Oh)}get dispose(){return re(this,as)}get disposeAfter(){return re(this,os)}getRemainingTTL(e){return re(this,ei).has(e)?1/0:0}*entries(){for(const e of Qe(this,Ge,Au).call(this))re(this,Ct)[e]!==void 0&&re(this,ar)[e]!==void 0&&!Qe(this,Ge,nr).call(this,re(this,Ct)[e])&&(yield[re(this,ar)[e],re(this,Ct)[e]])}*rentries(){for(const e of Qe(this,Ge,Tu).call(this))re(this,Ct)[e]!==void 0&&re(this,ar)[e]!==void 0&&!Qe(this,Ge,nr).call(this,re(this,Ct)[e])&&(yield[re(this,ar)[e],re(this,Ct)[e]])}*keys(){for(const e of Qe(this,Ge,Au).call(this)){const n=re(this,ar)[e];n!==void 0&&!Qe(this,Ge,nr).call(this,re(this,Ct)[e])&&(yield n)}}*rkeys(){for(const e of Qe(this,Ge,Tu).call(this)){const n=re(this,ar)[e];n!==void 0&&!Qe(this,Ge,nr).call(this,re(this,Ct)[e])&&(yield n)}}*values(){for(const e of Qe(this,Ge,Au).call(this))re(this,Ct)[e]!==void 0&&!Qe(this,Ge,nr).call(this,re(this,Ct)[e])&&(yield re(this,Ct)[e])}*rvalues(){for(const e of Qe(this,Ge,Tu).call(this))re(this,Ct)[e]!==void 0&&!Qe(this,Ge,nr).call(this,re(this,Ct)[e])&&(yield re(this,Ct)[e])}[(rU=Symbol.iterator,nU=Symbol.toStringTag,rU)](){return this.entries()}find(e,n={}){for(const r of Qe(this,Ge,Au).call(this)){const i=re(this,Ct)[r],a=Qe(this,Ge,nr).call(this,i)?i.__staleWhileFetching:i;if(a!==void 0&&e(a,re(this,ar)[r],this))return this.get(re(this,ar)[r],n)}}forEach(e,n=this){for(const r of Qe(this,Ge,Au).call(this)){const i=re(this,Ct)[r],a=Qe(this,Ge,nr).call(this,i)?i.__staleWhileFetching:i;a!==void 0&&e.call(n,a,re(this,ar)[r],this)}}rforEach(e,n=this){for(const r of Qe(this,Ge,Tu).call(this)){const i=re(this,Ct)[r],a=Qe(this,Ge,nr).call(this,i)?i.__staleWhileFetching:i;a!==void 0&&e.call(n,a,re(this,ar)[r],this)}}purgeStale(){let e=!1;for(const n of Qe(this,Ge,Tu).call(this,{allowStale:!0}))re(this,Ka).call(this,n)&&(Qe(this,Ge,Mu).call(this,re(this,ar)[n],"expire"),e=!0);return e}info(e){const n=re(this,ei).get(e);if(n===void 0)return;const r=re(this,Ct)[n],i=Qe(this,Ge,nr).call(this,r)?r.__staleWhileFetching:r;if(i===void 0)return;const a={value:i};if(re(this,Za)&&re(this,cs)){const o=re(this,Za)[n],s=re(this,cs)[n];if(o&&s){const l=o-(Pd.now()-s);a.ttl=l,a.start=Date.now()}}return re(this,us)&&(a.size=re(this,us)[n]),a}dump(){const e=[];for(const n of Qe(this,Ge,Au).call(this,{allowStale:!0})){const r=re(this,ar)[n],i=re(this,Ct)[n],a=Qe(this,Ge,nr).call(this,i)?i.__staleWhileFetching:i;if(a===void 0||r===void 0)continue;const o={value:a};if(re(this,Za)&&re(this,cs)){o.ttl=re(this,Za)[n];const s=Pd.now()-re(this,cs)[n];o.start=Math.floor(Date.now()-s)}re(this,us)&&(o.size=re(this,us)[n]),e.unshift([r,o])}return e}load(e){this.clear();for(const[n,r]of e){if(r.start){const i=Date.now()-r.start;r.start=Pd.now()-i}this.set(n,r.value,r)}}set(e,n,r={}){var d,h,p,g,v;if(n===void 0)return this.delete(e),this;const{ttl:i=this.ttl,start:a,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:s=this.sizeCalculation,status:l}=r;let{noUpdateTTL:u=this.noUpdateTTL}=r;const c=re(this,vv).call(this,e,n,r.size||0,s);if(this.maxEntrySize&&c>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),Qe(this,Ge,Mu).call(this,e,"set"),this;let f=re(this,hi)===0?void 0:re(this,ei).get(e);if(f===void 0)f=re(this,hi)===0?re(this,ki):re(this,ls).length!==0?re(this,ls).pop():re(this,hi)===re(this,is)?Qe(this,Ge,w1).call(this,!1):re(this,hi),re(this,ar)[f]=e,re(this,Ct)[f]=n,re(this,ei).set(e,f),re(this,ha)[re(this,ki)]=f,re(this,Xa)[f]=re(this,ki),ht(this,ki,f),_m(this,hi)._++,re(this,kh).call(this,f,c,l),l&&(l.set="add"),u=!1;else{Qe(this,Ge,xg).call(this,f);const m=re(this,Ct)[f];if(n!==m){if(re(this,$u)&&Qe(this,Ge,nr).call(this,m)){m.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:y}=m;y!==void 0&&!o&&(re(this,fs)&&((d=re(this,as))==null||d.call(this,y,e,"set")),re(this,pa)&&((h=re(this,Ai))==null||h.push([y,e,"set"])))}else o||(re(this,fs)&&((p=re(this,as))==null||p.call(this,m,e,"set")),re(this,pa)&&((g=re(this,Ai))==null||g.push([m,e,"set"])));if(re(this,yf).call(this,f),re(this,kh).call(this,f,c,l),re(this,Ct)[f]=n,l){l.set="replace";const y=m&&Qe(this,Ge,nr).call(this,m)?m.__staleWhileFetching:m;y!==void 0&&(l.oldValue=y)}}else l&&(l.set="update")}if(i!==0&&!re(this,Za)&&Qe(this,Ge,o6).call(this),re(this,Za)&&(u||re(this,gv).call(this,f,i,a),l&&re(this,jl).call(this,l,f)),!o&&re(this,pa)&&re(this,Ai)){const m=re(this,Ai);let y;for(;y=m==null?void 0:m.shift();)(v=re(this,os))==null||v.call(this,...y)}return this}pop(){var e;try{for(;re(this,hi);){const n=re(this,Ct)[re(this,ta)];if(Qe(this,Ge,w1).call(this,!0),Qe(this,Ge,nr).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(re(this,pa)&&re(this,Ai)){const n=re(this,Ai);let r;for(;r=n==null?void 0:n.shift();)(e=re(this,os))==null||e.call(this,...r)}}}has(e,n={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=n,a=re(this,ei).get(e);if(a!==void 0){const o=re(this,Ct)[a];if(Qe(this,Ge,nr).call(this,o)&&o.__staleWhileFetching===void 0)return!1;if(re(this,Ka).call(this,a))i&&(i.has="stale",re(this,jl).call(this,i,a));else return r&&re(this,mf).call(this,a),i&&(i.has="hit",re(this,jl).call(this,i,a)),!0}else i&&(i.has="miss");return!1}peek(e,n={}){const{allowStale:r=this.allowStale}=n,i=re(this,ei).get(e);if(i===void 0||!r&&re(this,Ka).call(this,i))return;const a=re(this,Ct)[i];return Qe(this,Ge,nr).call(this,a)?a.__staleWhileFetching:a}async fetch(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:a=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:l=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:h=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:g,forceRefresh:v=!1,status:m,signal:y}=n;if(!re(this,$u))return m&&(m.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:a,status:m});const b={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:a,ttl:o,noDisposeOnSet:s,size:l,sizeCalculation:u,noUpdateTTL:c,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:p,ignoreFetchAbort:h,status:m,signal:y};let x=re(this,ei).get(e);if(x===void 0){m&&(m.fetch="miss");const w=Qe(this,Ge,_1).call(this,e,x,b,g);return w.__returned=w}else{const w=re(this,Ct)[x];if(Qe(this,Ge,nr).call(this,w)){const A=r&&w.__staleWhileFetching!==void 0;return m&&(m.fetch="inflight",A&&(m.returnedStale=!0)),A?w.__staleWhileFetching:w.__returned=w}const _=re(this,Ka).call(this,x);if(!v&&!_)return m&&(m.fetch="hit"),Qe(this,Ge,xg).call(this,x),i&&re(this,mf).call(this,x),m&&re(this,jl).call(this,m,x),w;const E=Qe(this,Ge,_1).call(this,e,x,b,g),O=E.__staleWhileFetching!==void 0&&r;return m&&(m.fetch=_?"stale":"refresh",O&&_&&(m.returnedStale=!0)),O?E.__staleWhileFetching:E.__returned=E}}async forceFetch(e,n={}){const r=await this.fetch(e,n);if(r===void 0)throw new Error("fetch() returned undefined");return r}memo(e,n={}){const r=re(this,Oh);if(!r)throw new Error("no memoMethod provided to constructor");const{context:i,forceRefresh:a,...o}=n,s=this.get(e,o);if(!a&&s!==void 0)return s;const l=r(e,s,{options:o,context:i});return this.set(e,l,o),l}get(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:a=this.noDeleteOnStaleGet,status:o}=n,s=re(this,ei).get(e);if(s!==void 0){const l=re(this,Ct)[s],u=Qe(this,Ge,nr).call(this,l);return o&&re(this,jl).call(this,o,s),re(this,Ka).call(this,s)?(o&&(o.get="stale"),u?(o&&r&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),r?l.__staleWhileFetching:void 0):(a||Qe(this,Ge,Mu).call(this,e,"expire"),o&&r&&(o.returnedStale=!0),r?l:void 0)):(o&&(o.get="hit"),u?l.__staleWhileFetching:(Qe(this,Ge,xg).call(this,s),i&&re(this,mf).call(this,s),l))}else o&&(o.get="miss")}delete(e){return Qe(this,Ge,Mu).call(this,e,"delete")}clear(){return Qe(this,Ge,u6).call(this,"delete")}};is=new WeakMap,Ua=new WeakMap,as=new WeakMap,os=new WeakMap,Eh=new WeakMap,Oh=new WeakMap,hi=new WeakMap,ss=new WeakMap,ei=new WeakMap,ar=new WeakMap,Ct=new WeakMap,ha=new WeakMap,Xa=new WeakMap,ta=new WeakMap,ki=new WeakMap,ls=new WeakMap,Ai=new WeakMap,us=new WeakMap,cs=new WeakMap,Za=new WeakMap,fs=new WeakMap,$u=new WeakMap,pa=new WeakMap,Ge=new WeakSet,o6=function(){const e=new x1(re(this,is)),n=new x1(re(this,is));ht(this,Za,e),ht(this,cs,n),ht(this,gv,(a,o,s=Pd.now())=>{if(n[a]=o!==0?s:0,e[a]=o,o!==0&&this.ttlAutopurge){const l=setTimeout(()=>{re(this,Ka).call(this,a)&&Qe(this,Ge,Mu).call(this,re(this,ar)[a],"expire")},o+1);l.unref&&l.unref()}}),ht(this,mf,a=>{n[a]=e[a]!==0?Pd.now():0}),ht(this,jl,(a,o)=>{if(e[o]){const s=e[o],l=n[o];if(!s||!l)return;a.ttl=s,a.start=l,a.now=r||i();const u=a.now-l;a.remainingTTL=s-u}});let r=0;const i=()=>{const a=Pd.now();if(this.ttlResolution>0){r=a;const o=setTimeout(()=>r=0,this.ttlResolution);o.unref&&o.unref()}return a};this.getRemainingTTL=a=>{const o=re(this,ei).get(a);if(o===void 0)return 0;const s=e[o],l=n[o];if(!s||!l)return 1/0;const u=(r||i())-l;return s-u},ht(this,Ka,a=>{const o=n[a],s=e[a];return!!s&&!!o&&(r||i())-o>s})},mf=new WeakMap,jl=new WeakMap,gv=new WeakMap,Ka=new WeakMap,oK=function(){const e=new x1(re(this,is));ht(this,ss,0),ht(this,us,e),ht(this,yf,n=>{ht(this,ss,re(this,ss)-e[n]),e[n]=0}),ht(this,vv,(n,r,i,a)=>{if(Qe(this,Ge,nr).call(this,r))return 0;if(!ku(i))if(a){if(typeof a!="function")throw new TypeError("sizeCalculation must be a function");if(i=a(r,n),!ku(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i}),ht(this,kh,(n,r,i)=>{if(e[n]=r,re(this,Ua)){const a=re(this,Ua)-e[n];for(;re(this,ss)>a;)Qe(this,Ge,w1).call(this,!0)}ht(this,ss,re(this,ss)+e[n]),i&&(i.entrySize=r,i.totalCalculatedSize=re(this,ss))})},yf=new WeakMap,kh=new WeakMap,vv=new WeakMap,Au=function*({allowStale:e=this.allowStale}={}){if(re(this,hi))for(let n=re(this,ki);!(!Qe(this,Ge,s6).call(this,n)||((e||!re(this,Ka).call(this,n))&&(yield n),n===re(this,ta)));)n=re(this,Xa)[n]},Tu=function*({allowStale:e=this.allowStale}={}){if(re(this,hi))for(let n=re(this,ta);!(!Qe(this,Ge,s6).call(this,n)||((e||!re(this,Ka).call(this,n))&&(yield n),n===re(this,ki)));)n=re(this,ha)[n]},s6=function(e){return e!==void 0&&re(this,ei).get(re(this,ar)[e])===e},w1=function(e){var a,o;const n=re(this,ta),r=re(this,ar)[n],i=re(this,Ct)[n];return re(this,$u)&&Qe(this,Ge,nr).call(this,i)?i.__abortController.abort(new Error("evicted")):(re(this,fs)||re(this,pa))&&(re(this,fs)&&((a=re(this,as))==null||a.call(this,i,r,"evict")),re(this,pa)&&((o=re(this,Ai))==null||o.push([i,r,"evict"]))),re(this,yf).call(this,n),e&&(re(this,ar)[n]=void 0,re(this,Ct)[n]=void 0,re(this,ls).push(n)),re(this,hi)===1?(ht(this,ta,ht(this,ki,0)),re(this,ls).length=0):ht(this,ta,re(this,ha)[n]),re(this,ei).delete(r),_m(this,hi)._--,n},_1=function(e,n,r,i){const a=n===void 0?void 0:re(this,Ct)[n];if(Qe(this,Ge,nr).call(this,a))return a;const o=new db,{signal:s}=r;s==null||s.addEventListener("abort",()=>o.abort(s.reason),{signal:o.signal});const l={signal:o.signal,options:r,context:i},u=(g,v=!1)=>{const{aborted:m}=o.signal,y=r.ignoreFetchAbort&&g!==void 0;if(r.status&&(m&&!v?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,y&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),m&&!y&&!v)return f(o.signal.reason);const b=h;return re(this,Ct)[n]===h&&(g===void 0?b.__staleWhileFetching?re(this,Ct)[n]=b.__staleWhileFetching:Qe(this,Ge,Mu).call(this,e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,g,l.options))),g},c=g=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=g),f(g)),f=g=>{const{aborted:v}=o.signal,m=v&&r.allowStaleOnFetchAbort,y=m||r.allowStaleOnFetchRejection,b=y||r.noDeleteOnFetchRejection,x=h;if(re(this,Ct)[n]===h&&(!b||x.__staleWhileFetching===void 0?Qe(this,Ge,Mu).call(this,e,"fetch"):m||(re(this,Ct)[n]=x.__staleWhileFetching)),y)return r.status&&x.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),x.__staleWhileFetching;if(x.__returned===x)throw g},d=(g,v)=>{var y;const m=(y=re(this,Eh))==null?void 0:y.call(this,e,a,l);m&&m instanceof Promise&&m.then(b=>g(b===void 0?void 0:b),v),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(g(void 0),r.allowStaleOnFetchAbort&&(g=b=>u(b,!0)))})};r.status&&(r.status.fetchDispatched=!0);const h=new Promise(d).then(u,c),p=Object.assign(h,{__abortController:o,__staleWhileFetching:a,__returned:void 0});return n===void 0?(this.set(e,p,{...l.options,status:void 0}),n=re(this,ei).get(e)):re(this,Ct)[n]=p,p},nr=function(e){if(!re(this,$u))return!1;const n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof db},l6=function(e,n){re(this,Xa)[n]=e,re(this,ha)[e]=n},xg=function(e){e!==re(this,ki)&&(e===re(this,ta)?ht(this,ta,re(this,ha)[e]):Qe(this,Ge,l6).call(this,re(this,Xa)[e],re(this,ha)[e]),Qe(this,Ge,l6).call(this,re(this,ki),e),ht(this,ki,e))},Mu=function(e,n){var i,a,o,s;let r=!1;if(re(this,hi)!==0){const l=re(this,ei).get(e);if(l!==void 0)if(r=!0,re(this,hi)===1)Qe(this,Ge,u6).call(this,n);else{re(this,yf).call(this,l);const u=re(this,Ct)[l];if(Qe(this,Ge,nr).call(this,u)?u.__abortController.abort(new Error("deleted")):(re(this,fs)||re(this,pa))&&(re(this,fs)&&((i=re(this,as))==null||i.call(this,u,e,n)),re(this,pa)&&((a=re(this,Ai))==null||a.push([u,e,n]))),re(this,ei).delete(e),re(this,ar)[l]=void 0,re(this,Ct)[l]=void 0,l===re(this,ki))ht(this,ki,re(this,Xa)[l]);else if(l===re(this,ta))ht(this,ta,re(this,ha)[l]);else{const c=re(this,Xa)[l];re(this,ha)[c]=re(this,ha)[l];const f=re(this,ha)[l];re(this,Xa)[f]=re(this,Xa)[l]}_m(this,hi)._--,re(this,ls).push(l)}}if(re(this,pa)&&((o=re(this,Ai))!=null&&o.length)){const l=re(this,Ai);let u;for(;u=l==null?void 0:l.shift();)(s=re(this,os))==null||s.call(this,...u)}return r},u6=function(e){var n,r,i;for(const a of Qe(this,Ge,Tu).call(this,{allowStale:!0})){const o=re(this,Ct)[a];if(Qe(this,Ge,nr).call(this,o))o.__abortController.abort(new Error("deleted"));else{const s=re(this,ar)[a];re(this,fs)&&((n=re(this,as))==null||n.call(this,o,s,e)),re(this,pa)&&((r=re(this,Ai))==null||r.push([o,s,e]))}}if(re(this,ei).clear(),re(this,Ct).fill(void 0),re(this,ar).fill(void 0),re(this,Za)&&re(this,cs)&&(re(this,Za).fill(0),re(this,cs).fill(0)),re(this,us)&&re(this,us).fill(0),ht(this,ta,0),ht(this,ki,0),re(this,ls).length=0,ht(this,ss,0),ht(this,hi,0),re(this,pa)&&re(this,Ai)){const a=re(this,Ai);let o;for(;o=a==null?void 0:a.shift();)(i=re(this,os))==null||i.call(this,...o)}};let a6=G4;const Sf={hljs:`${it}-hljs`,hlcss:`${it}-hlCss`,prettier:`${it}-prettier`,prettierMD:`${it}-prettierMD`,cropperjs:`${it}-cropper`,croppercss:`${it}-cropperCss`,screenfull:`${it}-screenfull`,mermaidM:`${it}-mermaid-m`,mermaid:`${it}-mermaid`,katexjs:`${it}-katex`,katexcss:`${it}-katexCss`},mSe=(t,e)=>{const n=pi("editorId"),{noImgZoomIn:r}=t,i=Uxe(()=>{const a=document.querySelectorAll(`#${n}-preview img:not(.not-zoom):not(.medium-zoom-image)`);a.length!==0&&g2e(a,{background:"#00000073"})});on(()=>{!r&&t.setting.preview&&i()}),Wi([e,sU(t.setting,"preview")],()=>{!r&&t.setting.preview&&i()})},ySe=(t,e,n)=>{const r=pi("editorId"),i=pi("rootRef"),a=pi("usedLanguageText"),o=()=>{i.value.querySelectorAll(`#${r} .${it}-preview .${it}-code`).forEach(u=>{let c=-1;const f=u.querySelector(`.${it}-copy-button`);f&&(f.onclick=d=>{d.preventDefault(),clearTimeout(c);const p=(u.querySelector("input:checked + pre code")||u.querySelector("pre code")).textContent,g=w2e(t.formatCopiedText(p)),{text:v,successTips:m,failTips:y}=a.value.copyCode,b=g?m:y;f.dataset.isIcon?f.dataset.tips=b:f.innerHTML=b,c=window.setTimeout(()=>{f.dataset.isIcon?f.dataset.tips=v:f.innerHTML=v},1500)})})},s=()=>{Ah(o)},l=u=>{u&&Ah(o)};Wi([e,n],s),Wi(()=>t.setting.preview,l),Wi(()=>t.setting.htmlPreview,l),on(o)},bSe=t=>{const e=pi("highlight"),n=s0(ys.editorExtensions.highlight.instance);return on(()=>{t.noHighlight||n.value||(Nf("link",{...e.value.css,rel:"stylesheet",id:Sf.hlcss}),Nf("script",{...e.value.js,id:Sf.hljs,onload(){n.value=window.hljs}},"hljs"))}),Wi(()=>e.value.css,()=>{t.noHighlight||ys.editorExtensions.highlight.instance||c2e("link",{...e.value.css,rel:"stylesheet",id:Sf.hlcss})}),n},S1=new a6({max:1e3,ttl:6e5}),xSe=t=>{const e=pi("theme"),n=pi("rootRef"),{editorExtensions:r,editorExtensionsAttrs:i,mermaidConfig:a}=ys,o=s0(r.mermaid.instance),s=s0(-1),l=()=>{const c=o.value;!t.noMermaid&&c&&(c.initialize(a({startOnLoad:!1,theme:e.value==="dark"?"dark":"default"})),s.value=s.value+1)};return Wi(()=>e.value,()=>{S1.clear(),l()}),on(()=>{var c,f;if(t.noMermaid||o.value)return;const d=r.mermaid.js;/\.mjs/.test(d)?(Nf("link",{...(c=i.mermaid)==null?void 0:c.js,rel:"modulepreload",href:d,id:Sf.mermaidM}),import(d).then(h=>{o.value=h.default,l()})):Nf("script",{...(f=i.mermaid)==null?void 0:f.js,src:d,id:Sf.mermaid,onload(){o.value=window.mermaid,l()}},"mermaid")}),{mermaidRef:o,reRenderRef:s,replaceMermaid:async()=>{if(!t.noMermaid&&o.value){const c=n.value.querySelectorAll(`div.${it}-mermaid`),f=document.createElement("div"),d=document.body.offsetWidth>1366?document.body.offsetWidth:1366,h=document.body.offsetHeight>768?document.body.offsetHeight:768;f.style.width=d+"px",f.style.height=h+"px",f.style.position="fixed",f.style.zIndex="-10000",f.style.top="-10000";let p=c.length;p>0&&document.body.appendChild(f),await Promise.allSettled(Array.from(c).map(g=>(async m=>{var y;let b=S1.get(m.innerText);if(!b){const x=JC();let w={svg:""};try{w=await o.value.render(x,m.innerText,f),b=await t.sanitizeMermaid(w.svg);const _=document.createElement("p");_.className=`${it}-mermaid`,_.setAttribute("data-processed",""),_.innerHTML=b,(y=_.children[0])==null||y.removeAttribute("height"),S1.set(m.innerText,_.innerHTML),m.dataset.line!==void 0&&(_.dataset.line=m.dataset.line),m.replaceWith(_)}catch{}--p===0&&f.remove()}})(g)))}}}},wSe=t=>{const e=s0(ys.editorExtensions.katex.instance);return on(()=>{if(t.noKatex||e.value)return;const{editorExtensions:n}=ys;Nf("script",{src:n.katex.js,id:Sf.katexjs,onload(){e.value=window.katex}},"katex"),Nf("link",{rel:"stylesheet",href:n.katex.css,id:Sf.katexcss})}),e},_Se=(t,e)=>{const n=t.renderer.rules.fence.bind(t.renderer.rules);t.renderer.rules.fence=(r,i,a,o,s)=>{const l=r[i],u=l.content.trim();if(l.info==="mermaid"){let c;r[i].map&&r[i].level===0&&(c=r[i].map[0],r[i].attrSet("data-line",String(c)));const f=S1.get(u);return f?`<p class="${it}-mermaid" ${c!==void 0?"data-line="+c:""} data-processed>${f}</p>`:`<div class="${it}-mermaid" ${c!==void 0?"data-line="+c:""} data-mermaid-theme=${e.themeRef.value}>${u}</div>`}return n(r,i,a,o,s)}},hb=(t,e)=>{const n=t.attrs?t.attrs.slice():[];return e.forEach(r=>{const i=t.attrIndex(r[0]);i<0?n.push(r):(n[i]=n[i].slice(),n[i][1]+=` ${r[1]}`)}),n},SSe=(t,e)=>{const n=[{open:"$$",close:"$$"},{open:"$",close:"$"},{open:"\\[",close:"\\]"},{open:"\\(",close:"\\)"}];let r,i,a;for(const o of n)if(t.src.startsWith(o.open,t.pos)){const s=t.pos+o.open.length;for(r=s;(r=t.src.indexOf(o.close,r))!==-1;){for(a=r-1;t.src[a]==="\\";)a-=1;if((r-a)%2===1)break;r+=o.close.length}if(r===-1)return e||(t.pending+=o.open),t.pos=s,!0;if(r-s===0)return e||(t.pending+=o.open+o.close),t.pos=s+o.close.length,!0;if(!e){const l=t.src.slice(s,r);i=t.push("math_inline","math",0),i.markup=o.open,i.content=l}return t.pos=r+o.close.length,!0}return!1},ESe=(t,e,n,r)=>{const i=[{open:"$$",close:"$$"},{open:"\\[",close:"\\]"}];let a,o,s,l,u=!1,c=t.bMarks[e]+t.tShift[e],f=t.eMarks[e];for(const d of i)if(t.src.slice(c,c+d.open.length)===d.open&&t.src.slice(f-d.close.length,f)===d.close){if(c+=d.open.length,a=t.src.slice(c,f),r)return!0;for(a.trim().slice(-d.close.length)===d.close&&(a=a.trim().slice(0,-d.close.length),u=!0),s=e;!u&&(s++,!(s>=n||(c=t.bMarks[s]+t.tShift[s],f=t.eMarks[s],c<f&&t.tShift[s]<t.blkIndent)));)t.src.slice(c,f).trim().slice(-d.close.length)===d.close&&(l=t.src.slice(0,f).lastIndexOf(d.close),o=t.src.slice(c,l),u=!0);t.line=s+1;const h=t.push("math_block","math",0);return h.block=!0,h.content=(a&&a.trim()?a+`
`:"")+t.getLines(e+1,s,t.tShift[e],!0)+(o&&o.trim()?o:""),h.map=[e,t.line],h.markup=d.open,!0}return!1},OSe=(t,{katexRef:e})=>{const n=(i,a,o,s,l)=>{const u=i[a],c={attrs:hb(u,[["class",`${it}-katex-inline`]])};if(e.value){const f=e.value.renderToString(u.content,ys.katexConfig({throwOnError:!1}));return`<span ${l.renderAttrs(c)} data-processed>${f}</span>`}else return`<span ${l.renderAttrs(c)}>${u.content}</span>`},r=(i,a,o,s,l)=>{const u=i[a],c={attrs:hb(u,[["class",`${it}-katex-block`]])};if(e.value){const f=e.value.renderToString(u.content,ys.katexConfig({throwOnError:!1,displayMode:!0}));return`<p ${l.renderAttrs(c)} data-processed>${f}</p>`}else return`<p ${l.renderAttrs(c)}>${u.content}</p>`};t.inline.ruler.before("escape","math_inline",SSe),t.block.ruler.after("blockquote","math_block",ESe,{alt:["paragraph","reference","blockquote","list"]}),t.renderer.rules.math_inline=n,t.renderer.rules.math_block=r},kSe=(t,e)=>{e=e||{};const n=3,r=e.marker||"!",i=r.charCodeAt(0),a=r.length;let o="",s="";const l=(c,f,d,h,p)=>{const g=c[f];return g.type==="admonition_open"?c[f].attrPush(["class",`${it}-admonition ${it}-admonition-${g.info}`]):g.type==="admonition_title_open"&&c[f].attrPush(["class",`${it}-admonition-title`]),p.renderToken(c,f,d)},u=c=>{const f=c.trim().split(" ",2);s="",o=f[0],f.length>1&&(s=c.substring(o.length+2))};t.block.ruler.before("code","admonition",(c,f,d,h)=>{let p,g,v,m=!1,y=c.bMarks[f]+c.tShift[f],b=c.eMarks[f];if(i!==c.src.charCodeAt(y))return!1;for(p=y+1;p<=b&&r[(p-y)%a]===c.src[p];p++);const x=Math.floor((p-y)/a);if(x!==n)return!1;p-=(p-y)%a;const w=c.src.slice(y,p),_=c.src.slice(p,b);if(u(_),h)return!0;for(g=f;g++,!(g>=d||(y=c.bMarks[g]+c.tShift[g],b=c.eMarks[g],y<b&&c.sCount[g]<c.blkIndent));)if(i===c.src.charCodeAt(y)&&!(c.sCount[g]-c.blkIndent>=4)){for(p=y+1;p<=b&&r[(p-y)%a]===c.src[p];p++);if(!(Math.floor((p-y)/a)<x)&&(p-=(p-y)%a,p=c.skipSpaces(p),!(p<b))){m=!0;break}}const E=c.parentType,S=c.lineMax;return c.parentType="root",c.lineMax=g,v=c.push("admonition_open","div",1),v.markup=w,v.block=!0,v.info=o,v.map=[f,g],s&&(v=c.push("admonition_title_open","p",1),v.markup=w+" "+o,v.map=[f,g],v=c.push("inline","",0),v.content=s,v.map=[f,c.line-1],v.children=[],v=c.push("admonition_title_close","p",-1),v.markup=w+" "+o),c.md.block.tokenize(c,f+1,g),v=c.push("admonition_close","div",-1),v.markup=c.src.slice(y,p),v.block=!0,c.parentType=E,c.lineMax=S,c.line=g+(m?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),t.renderer.rules.admonition_open=l,t.renderer.rules.admonition_title_open=l,t.renderer.rules.admonition_title_close=l,t.renderer.rules.admonition_close=l},ASe=(t,e)=>{t.renderer.rules.heading_open=(n,r)=>{var i;const a=n[r],o=((i=n[r+1].children)==null?void 0:i.reduce((l,u)=>l+(["text","code_inline","math_inline"].includes(u.type)&&u.content||""),""))||"",s=a.markup.length;return e.headsRef.value.push({text:o,level:s,line:a.map[0]}),a.map&&a.level===0&&a.attrSet("id",e.mdHeadingId(o,s,e.headsRef.value.length)),t.renderer.renderToken(n,r,e)},t.renderer.rules.heading_close=(n,r,i,a,o)=>o.renderToken(n,r,i)},TSe={copy:`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy ${it}-icon"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>`,"collapse-tips":`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left ${it}-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg>`},MSe=(t,e)=>typeof e[t]=="string"?e[t]:TSe[t],CSe=MSe,PSe=(t,e)=>{const n=t.renderer.rules.fence,r=t.utils.unescapeAll,i=/\[(\w*)(?::([\w ]*))?\]/,a=/::(open|close)/,o=f=>f.info?r(f.info).trim():"",s=f=>{const d=o(f),[h=null,p=""]=(i.exec(d)||[]).slice(1);return[h,p]},l=f=>{const d=o(f);return d?d.split(/(\s+)/g)[0]:""},u=f=>{const d=f.info.match(a)||[],h=d[1]==="open"||d[1]!=="close"&&e.codeFoldable&&f.content.trim().split(`
`).length<e.autoFoldThreshold,p=d[1]||e.codeFoldable?"details":"div",g=d[1]||e.codeFoldable?"summary":"div";return{open:h,tagContainer:p,tagHeader:g}},c=(f,d,h,p,g)=>{var v;if(f[d].hidden)return"";const m=(v=e.usedLanguageTextRef.value)==null?void 0:v.copyCode.text,y=e.customIconRef.value.copy||m,b=!!e.customIconRef.value.copy,x=`<span class="${it}-collapse-tips">${CSe("collapse-tips",e.customIconRef.value)}</span>`,[w]=s(f[d]);if(w===null){const{open:L,tagContainer:B,tagHeader:$}=u(f[d]),G=[["class",`${it}-code`]];L&&G.push(["open",""]);const W={attrs:hb(f[d],G)};f[d].info=f[d].info.replace(a,"");const U=n(f,d,h,p,g);return`
        <${B} ${g.renderAttrs(W)}>
          <${$} class="${it}-code-head">
            <div class="${it}-code-flag"><span></span><span></span><span></span></div>
            <div class="${it}-code-action">
              <span class="${it}-code-lang">${f[d].info.trim()}</span>
              <span class="${it}-copy-button" data-tips="${m}"${b?" data-is-icon=true":""}>${y}</span>
              ${e.extraTools||""}
              ${B==="details"?x:""}
            </div>
          </${$}>
          ${U}
        </${B}>
      `}let _,E,S,O,A="",T="",I="";const{open:D,tagContainer:R,tagHeader:F}=u(f[d]),z=[["class",`${it}-code`]];D&&z.push(["open",""]);const N={attrs:hb(f[d],z)};for(let L=d;L<f.length&&(_=f[L],[E,S]=s(_),E===w);L++){_.info=_.info.replace(i,"").replace(a,""),_.hidden=!0;const B=`${it}-codetab-${e.editorId}-${d}-${L-d}`;O=L-d>0?"":"checked",A+=`
        <li>
          <input
            type="radio"
            id="label-${it}-codetab-label-1-${e.editorId}-${d}-${L-d}"
            name="${it}-codetab-label-${e.editorId}-${d}"
            class="${B}"
            ${O}
          >
          <label
            for="label-${it}-codetab-label-1-${e.editorId}-${d}-${L-d}"
            onclick="this.getRootNode().querySelectorAll('.${B}').forEach(e => e.click())"
          >
            ${S||l(_)}
          </label>
        </li>`,T+=`
        <div role="tabpanel">
          <input
            type="radio"
            name="${it}-codetab-pre-${e.editorId}-${d}"
            class="${B}"
            ${O}
            role="presentation">
          ${n(f,L,h,p,g)}
        </div>`,I+=`
        <input
          type="radio"
          name="${it}-codetab-lang-${e.editorId}-${d}"
          class="${B}"
          ${O}
          role="presentation">
        <span class=${it}-code-lang role="note">${l(_)}</span>`}return`
      <${R} ${g.renderAttrs(N)}>
        <${F} class="${it}-code-head">
          <div class="${it}-code-flag">
            <ul class="${it}-codetab-label" role="tablist">${A}</ul>
          </div>
          <div class="${it}-code-action">
            <span class="${it}-codetab-lang">${I}</span>
            <span class="${it}-copy-button" data-tips="${m}"${b?" data-is-icon=true":""}>${y}</span>
            ${e.extraTools||""}
            ${R==="details"?x:""}
          </div>
        </${F}>
        ${T}
      </${R}>
    `};t.renderer.rules.fence=c,t.renderer.rules.code_block=c},v9=(t,e,n)=>{const r=t.attrIndex(e),i=[e,n];r<0?t.attrPush(i):(t.attrs=t.attrs||[],t.attrs[r]=i)},DSe=t=>t.type==="inline",ISe=t=>t.type==="paragraph_open",LSe=t=>t.type==="list_item_open",RSe=t=>t.content.indexOf("[ ] ")===0||t.content.indexOf("[x] ")===0||t.content.indexOf("[X] ")===0,NSe=(t,e)=>DSe(t[e])&&ISe(t[e-1])&&LSe(t[e-2])&&RSe(t[e]),FSe=(t,e)=>{const n=t[e].level-1;for(let r=e-1;r>=0;r--)if(t[r].level===n)return r;return-1},zSe=t=>{const e=new t("html_inline","",0);return e.content="<label>",e},jSe=t=>{const e=new t("html_inline","",0);return e.content="</label>",e},BSe=(t,e,n)=>{const r=new n("html_inline","",0);return r.content='<label class="task-list-item-label" for="'+e+'">'+t+"</label>",r.attrs=[{for:e}],r},$Se=(t,e,n)=>{const r=new e("html_inline","",0),i=n.enabled?" ":' disabled="" ';return t.content.indexOf("[ ] ")===0?r.content='<input class="task-list-item-checkbox"'+i+'type="checkbox">':(t.content.indexOf("[x] ")===0||t.content.indexOf("[X] ")===0)&&(r.content='<input class="task-list-item-checkbox" checked=""'+i+'type="checkbox">'),r},VSe=(t,e,n)=>{if(t.children=t.children||[],t.children.unshift($Se(t,e,n)),t.children[1].content=t.children[1].content.slice(3),t.content=t.content.slice(3),n.label)if(n.labelAfter){t.children.pop();const r="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);t.children[0].content=t.children[0].content.slice(0,-1)+' id="'+r+'">',t.children.push(BSe(t.content,r,e))}else t.children.unshift(zSe(e)),t.children.push(jSe(e))},qSe=(t,e={})=>{t.core.ruler.after("inline","github-task-lists",n=>{const r=n.tokens;for(let i=2;i<r.length;i++)NSe(r,i)&&(VSe(r[i],n.Token,e),v9(r[i-2],"class","task-list-item"+(e.enabled?" enabled":" ")),v9(r[FSe(r,i-2)],"class","contains-task-list"))})},WSe=t=>{t.core.ruler.push("init-line-number",e=>(e.tokens.forEach(n=>{n.map&&(n.attrs||(n.attrs=[]),n.attrs.push(["data-line",n.map[0].toString()]))}),!0))},GSe=(t,e)=>{const{editorConfig:n,markdownItConfig:r,markdownItPlugins:i}=ys,a=pi("editorId"),o=pi("language"),s=pi("usedLanguageText"),l=pi("showCodeRowNumber"),u=pi("theme"),c=pi("customIcon"),f=pi("rootRef"),d=st([]),h=bSe(t),p=wSe(t),{reRenderRef:g,replaceMermaid:v}=xSe(t),m=jo({html:!0,breaks:!0,linkify:!0});r(m,{editorId:a});const y=[{type:"image",plugin:lSe,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:kSe,options:{}},{type:"taskList",plugin:qSe,options:{}},{type:"heading",plugin:ASe,options:{mdHeadingId:t.mdHeadingId,headsRef:d}},{type:"code",plugin:PSe,options:{editorId:a,usedLanguageTextRef:s,codeFoldable:t.codeFoldable,autoFoldThreshold:t.autoFoldThreshold,customIconRef:c}},{type:"sub",plugin:fSe,options:{}},{type:"sup",plugin:pSe,options:{}}];t.noKatex||y.push({type:"katex",plugin:OSe,options:{katexRef:p}}),t.noMermaid||y.push({type:"mermaid",plugin:_Se,options:{themeRef:u}}),i(y,{editorId:a}).forEach(A=>{m.use(A.plugin,A.options)});const b=m.options.highlight;m.set({highlight:(A,T,I)=>{if(b){const F=b(A,T,I);if(F)return F}let D;!t.noHighlight&&h.value?h.value.getLanguage(T)?D=h.value.highlight(A,{language:T,ignoreIllegals:!0}).value:D=h.value.highlightAuto(A).value:D=m.utils.escapeHtml(A);const R=l?gSe(D.replace(/^\n+|\n+$/g,""),A.replace(/^\n+|\n+$/g,"")):`<span class="${it}-code-block">${D.replace(/^\n+|\n+$/g,"")}</span>`;return`<pre><code class="language-${T}" language=${T}>${R}</code></pre>`}}),WSe(m);const x=st(`_article-key_${JC()}`),w=st(t.sanitize(m.render(t.modelValue))),_=()=>{Fl.emit(a,s2e,w.value),t.onHtmlChanged(w.value),t.onGetCatalog(d.value),Fl.emit(a,RS,d.value),Ah(()=>{v().then(()=>{var A;G8((A=f.value)==null?void 0:A.querySelectorAll(`#${a} .${it}-mermaid`))})})},E=()=>{d.value=[],w.value=t.sanitize(m.render(t.modelValue)),_()},S=De(()=>(t.noKatex||p.value)&&(t.noHighlight||h.value));let O=-1;return Wi([sU(t,"modelValue"),S,g,o],()=>{O=window.setTimeout(()=>{E()},e?0:n.renderDelay)}),Wi(()=>t.setting.preview,()=>{t.setting.preview&&Ah(()=>{v().then(()=>{var A;G8((A=f.value)==null?void 0:A.querySelectorAll(`#${a} .${it}-mermaid`))}),Fl.emit(a,RS,d.value)})}),on(_),on(()=>{Fl.on(a,{name:l2e,callback(){Fl.emit(a,RS,d.value)}}),Fl.on(a,{name:MZ,callback:()=>{x.value=`_article-key_${JC()}`,E()}})}),mv(()=>{clearTimeout(O)}),{html:w,key:x}},m9={checked:{regexp:/- \[x\]/,value:"- [ ]"},unChecked:{regexp:/- \[\s\]/,value:"- [x]"}},HSe=(t,e)=>{const n=pi("editorId"),r=pi("rootRef");let i=()=>{};const a=()=>{if(!r.value)return!1;const o=r.value.querySelectorAll(".task-list-item.enabled"),s=l=>{var u;l.preventDefault();const c=l.target.checked?"unChecked":"checked",f=(u=l.target.parentElement)==null?void 0:u.dataset.line;if(!f)return;const d=Number(f),h=t.modelValue.split(`
`),p=h[Number(d)].replace(m9[c].regexp,m9[c].value);t.previewOnly?(h[Number(d)]=p,t.onChange(h.join(`
`))):Fl.emit(n,u2e,d+1,p)};o.forEach(l=>{l.addEventListener("click",s)}),i=()=>{o.forEach(l=>{l.removeEventListener("click",s)})}};mv(()=>{i()}),Wi([e],()=>{i(),Ah(a)},{immediate:!0})},YSe=(t,e,n)=>{const r=()=>{Ah(()=>{var a;(a=t.onRemount)==null||a.call(t)})},i=a=>{a&&r()};Wi([e,n],r),Wi(()=>t.setting.preview,i),Wi(()=>t.setting.htmlPreview,i),on(r)},sK={modelValue:{type:String,default:""},onChange:{type:Function,default:()=>{}},setting:{type:Object,default:()=>({preview:!0})},onHtmlChanged:{type:Function,default:()=>{}},onGetCatalog:{type:Function,default:()=>{}},mdHeadingId:{type:Function,default:()=>""},noMermaid:{type:Boolean,default:!1},sanitize:{type:Function,default:t=>t},noKatex:{type:Boolean,default:!1},formatCopiedText:{type:Function,default:t=>t},noHighlight:{type:Boolean,default:!1},previewOnly:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean},sanitizeMermaid:{type:Function},codeFoldable:{type:Boolean},autoFoldThreshold:{type:Number},onRemount:{type:Function}};({...sK});const USe=Xt({name:"ContentPreview",props:sK,setup(t){const e=pi("editorId"),n=pi("previewTheme"),r=pi("showCodeRowNumber"),{html:i,key:a}=GSe(t,t.previewOnly);return ySe(t,i,a),mSe(t,i),HSe(t,i),YSe(t,i,a),()=>V(Or,null,[t.setting.preview&&V("div",{id:`${e}-preview-wrapper`,class:`${it}-preview-wrapper`,key:"content-preview-wrapper"},[V("div",{key:a.value,id:`${e}-preview`,class:[`${it}-preview`,`${n==null?void 0:n.value}-theme`,r&&`${it}-scrn`],innerHTML:i.value},null)]),!t.previewOnly&&t.setting.htmlPreview&&V("div",{id:`${e}-html-wrapper`,class:`${it}-preview-wrapper`,key:"html-preview-wrapper"},[V("div",{class:`${it}-html`},[i.value])])])}}),XSe=(t,e)=>{const n=ys.editorExtensions.highlight,r=ys.editorExtensionsAttrs.highlight,i=ZSe(t);Pl("editorId",i),Pl("rootRef",e),Pl("theme",De(()=>t.theme)),Pl("language",De(()=>t.language)),Pl("highlight",De(()=>{const{js:o}=n,s={...QC,...n.css},{js:l,css:u={}}=r||{},c=t.codeStyleReverse&&t.codeStyleReverseList.includes(t.previewTheme)?"dark":t.theme,f=s[t.codeTheme]?s[t.codeTheme][c]:QC.atom[c],d=s[t.codeTheme]&&u[t.codeTheme]?u[t.codeTheme][c]:u.atom?u.atom[c]:{};return{js:{src:o,...l},css:{href:f,...d}}})),Pl("showCodeRowNumber",t.showCodeRowNumber);const a=De(()=>{const o={...W8,...ys.editorConfig.languageUserDefined};return TZ(bg(W8["en-US"]),o[t.language]||{})});return Pl("usedLanguageText",a),Pl("previewTheme",De(()=>t.previewTheme)),Pl("customIcon",De(()=>t.customIcon)),{editorId:i}},ZSe=t=>{const e=Sde();return t.id||t.editorId||`${it}-${e}`},KSe=t=>t,lK={modelValue:{type:String,default:""},onChange:{type:Function,default:void 0},theme:{type:String,default:"light"},class:{type:String,default:""},language:{type:String,default:"zh-CN"},onHtmlChanged:{type:Function,default:void 0},onGetCatalog:{type:Function,default:void 0},editorId:{type:String,default:void 0},id:{type:String,default:void 0},showCodeRowNumber:{type:Boolean,default:!0},previewTheme:{type:String,default:"default"},style:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:KSe},sanitize:{type:Function,default:t=>t},noMermaid:{type:Boolean,default:!1},noKatex:{type:Boolean,default:!1},codeTheme:{type:String,default:"atom"},formatCopiedText:{type:Function,default:t=>t},codeStyleReverse:{type:Boolean,default:!0},codeStyleReverseList:{type:Array,default:["default","mk-cute"]},noHighlight:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean,default:!1},customIcon:{type:Object,default:{}},sanitizeMermaid:{type:Function,default:t=>Promise.resolve(t)},codeFoldable:{type:Boolean,default:!0},autoFoldThreshold:{type:Number,default:30},onRemount:{type:Function,default:void 0}};({...lK});const uK=["onHtmlChanged","onGetCatalog","onChange","onRemount","update:modelValue"];[...uK];const JSe=(t,e,n)=>{const{editorId:r}=n,i={rerender(){Fl.emit(r,MZ)}};e.expose(i)},na=Xt({name:"MdPreview",props:lK,emits:uK,setup(t,e){const{noKatex:n,noMermaid:r,noHighlight:i}=t,a=st(),{editorId:o}=XSe(t,a);return JSe(t,e,{editorId:o}),mv(()=>{Fl.clear(o)}),()=>V("div",{id:o,class:[it,t.class,t.theme==="dark"&&`${it}-dark`,`${it}-previewOnly`],style:t.style,ref:a},[V(USe,{modelValue:t.modelValue,onChange:s=>{var l;(l=t.onChange)==null||l.call(t,s),e.emit("onChange",s),e.emit("update:modelValue",s)},onHtmlChanged:s=>{var l;(l=t.onHtmlChanged)==null||l.call(t,s),e.emit("onHtmlChanged",s)},onGetCatalog:s=>{var l;(l=t.onGetCatalog)==null||l.call(t,s),e.emit("onGetCatalog",s)},mdHeadingId:t.mdHeadingId,noMermaid:r,sanitize:t.sanitize,noKatex:n,formatCopiedText:t.formatCopiedText,noHighlight:i,noImgZoomIn:t.noImgZoomIn,previewOnly:!0,sanitizeMermaid:t.sanitizeMermaid,codeFoldable:t.codeFoldable,autoFoldThreshold:t.autoFoldThreshold,onRemount:()=>{var s;(s=t.onRemount)==null||s.call(t),e.emit("onRemount")}},null)])}});na.install=t=>(t.component(na.name,na),t);const QSe={onClick:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0}},GS=Xt({name:"NormalFooterToolbar",props:QSe,emits:["onClick"],setup(t,e){return()=>{const n=n2e({props:t,ctx:e});return V("div",{class:[`${it}-footer-item`,t.disabled&&`${it}-disabled`],onClick:r=>{var i;t.disabled||((i=t.onClick)==null||i.call(t,r),e.emit("onClick",r))}},[n])}}});GS.install=t=>(t.component(GS.name,GS),t);var y9={exports:{}},wr={},c6={exports:{}},rd={};function cK(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function eEe(t,e,n){}function tEe(t,e,n){}var nEe=/javascript\s*\:/img;function rEe(t,e){return nEe.test(e)?"":e}rd.whiteList=cK();rd.getDefaultWhiteList=cK;rd.onAttr=eEe;rd.onIgnoreAttr=tEe;rd.safeAttrValue=rEe;var iEe={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,i;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},Zp=iEe;function aEe(t,e){t=Zp.trimRight(t),t[t.length-1]!==";"&&(t+=";");var n=t.length,r=!1,i=0,a=0,o="";function s(){if(!r){var c=Zp.trim(t.slice(i,a)),f=c.indexOf(":");if(f!==-1){var d=Zp.trim(c.slice(0,f)),h=Zp.trim(c.slice(f+1));if(d){var p=e(i,o.length,d,h,c);p&&(o+=p+"; ")}}}i=a+1}for(;a<n;a++){var l=t[a];if(l==="/"&&t[a+1]==="*"){var u=t.indexOf("*/",a+2);if(u===-1)break;a=u+1,i=a+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||s():l===`
`&&s()}return Zp.trim(o)}var oEe=aEe,Hm=rd,sEe=oEe;function b9(t){return t==null}function lEe(t){var e={};for(var n in t)e[n]=t[n];return e}function fK(t){t=lEe(t||{}),t.whiteList=t.whiteList||Hm.whiteList,t.onAttr=t.onAttr||Hm.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||Hm.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||Hm.safeAttrValue,this.options=t}fK.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,r=n.whiteList,i=n.onAttr,a=n.onIgnoreAttr,o=n.safeAttrValue,s=sEe(t,function(l,u,c,f,d){var h=r[c],p=!1;if(h===!0?p=h:typeof h=="function"?p=h(f):h instanceof RegExp&&(p=h.test(f)),p!==!0&&(p=!1),f=o(c,f),!!f){var g={position:u,sourcePosition:l,source:d,isWhite:p};if(p){var v=i(c,f,g);return b9(v)?c+":"+f:v}else{var v=a(c,f,g);if(!b9(v))return v}}});return s};var uEe=fK;(function(t,e){var n=rd,r=uEe;function i(o,s){var l=new r(s);return l.process(o)}e=t.exports=i,e.FilterCSS=r;for(var a in n)e[a]=n[a];typeof window<"u"&&(window.filterCSS=t.exports)})(c6,c6.exports);var yI=c6.exports,bI={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,i;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,n=e.exec(t);return n?n.index:-1}},cEe=yI.FilterCSS,fEe=yI.getDefaultWhiteList,pb=bI;function dK(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var hK=new cEe;function dEe(t,e,n){}function hEe(t,e,n){}function pEe(t,e,n){}function gEe(t,e,n){}function pK(t){return t.replace(mEe,"&lt;").replace(yEe,"&gt;")}function vEe(t,e,n,r){if(n=xK(n),e==="href"||e==="src"){if(n=pb.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(e==="background"){if(Ym.lastIndex=0,Ym.test(n))return""}else if(e==="style"){if(x9.lastIndex=0,x9.test(n)||(w9.lastIndex=0,w9.test(n)&&(Ym.lastIndex=0,Ym.test(n))))return"";r!==!1&&(r=r||hK,n=r.process(n))}return n=wK(n),n}var mEe=/</g,yEe=/>/g,bEe=/"/g,xEe=/&quot;/g,wEe=/&#([a-zA-Z0-9]*);?/gim,_Ee=/&colon;?/gim,SEe=/&newline;?/gim,Ym=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,x9=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,w9=/u\s*r\s*l\s*\(.*/gi;function gK(t){return t.replace(bEe,"&quot;")}function vK(t){return t.replace(xEe,'"')}function mK(t){return t.replace(wEe,function(n,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function yK(t){return t.replace(_Ee,":").replace(SEe," ")}function bK(t){for(var e="",n=0,r=t.length;n<r;n++)e+=t.charCodeAt(n)<32?" ":t.charAt(n);return pb.trim(e)}function xK(t){return t=vK(t),t=mK(t),t=yK(t),t=bK(t),t}function wK(t){return t=gK(t),t=pK(t),t}function EEe(){return""}function OEe(t,e){typeof e!="function"&&(e=function(){});var n=!Array.isArray(t);function r(o){return n?!0:pb.indexOf(t,o)!==-1}var i=[],a=!1;return{onIgnoreTag:function(o,s,l){if(r(o))if(l.isClosing){var u="[/removed]",c=l.position+u.length;return i.push([a!==!1?a:l.position,c]),a=!1,u}else return a||(a=l.position),"[removed]";else return e(o,s,l)},remove:function(o){var s="",l=0;return pb.forEach(i,function(u){s+=o.slice(l,u[0]),l=u[1]}),s+=o.slice(l),s}}}function kEe(t){for(var e="",n=0;n<t.length;){var r=t.indexOf("<!--",n);if(r===-1){e+=t.slice(n);break}e+=t.slice(n,r);var i=t.indexOf("-->",r);if(i===-1)break;n=i+3}return e}function AEe(t){var e=t.split("");return e=e.filter(function(n){var r=n.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}wr.whiteList=dK();wr.getDefaultWhiteList=dK;wr.onTag=dEe;wr.onIgnoreTag=hEe;wr.onTagAttr=pEe;wr.onIgnoreTagAttr=gEe;wr.safeAttrValue=vEe;wr.escapeHtml=pK;wr.escapeQuote=gK;wr.unescapeQuote=vK;wr.escapeHtmlEntities=mK;wr.escapeDangerHtml5Entities=yK;wr.clearNonPrintableCharacter=bK;wr.friendlyAttrValue=xK;wr.escapeAttrValue=wK;wr.onIgnoreTagStripAll=EEe;wr.StripTagBody=OEe;wr.stripCommentTag=kEe;wr.stripBlankChar=AEe;wr.attributeWrapSign='"';wr.cssFilter=hK;wr.getDefaultCSSWhiteList=fEe;var v2={},Du=bI;function TEe(t){var e=Du.spaceIndex(t),n;return e===-1?n=t.slice(1,-1):n=t.slice(1,e+1),n=Du.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function MEe(t){return t.slice(0,2)==="</"}function CEe(t,e,n){var r="",i=0,a=!1,o=!1,s=0,l=t.length,u="",c="";e:for(s=0;s<l;s++){var f=t.charAt(s);if(a===!1){if(f==="<"){a=s;continue}}else if(o===!1){if(f==="<"){r+=n(t.slice(i,s)),a=s,i=s;continue}if(f===">"||s===l-1){r+=n(t.slice(i,a)),c=t.slice(a,s+1),u=TEe(c),r+=e(a,r.length,u,c,MEe(c)),i=s+1,a=!1;continue}if(f==='"'||f==="'")for(var d=1,h=t.charAt(s-d);h.trim()===""||h==="=";){if(h==="="){o=f;continue e}h=t.charAt(s-++d)}}else if(f===o){o=!1;continue}}return i<l&&(r+=n(t.substr(i))),r}var PEe=/[^a-zA-Z0-9\\_:.-]/gim;function DEe(t,e){var n=0,r=0,i=[],a=!1,o=t.length;function s(d,h){if(d=Du.trim(d),d=d.replace(PEe,"").toLowerCase(),!(d.length<1)){var p=e(d,h||"");p&&i.push(p)}}for(var l=0;l<o;l++){var u=t.charAt(l),c,f;if(a===!1&&u==="="){a=t.slice(n,l),n=l+1,r=t.charAt(n)==='"'||t.charAt(n)==="'"?n:LEe(t,l+1);continue}if(a!==!1&&l===r){if(f=t.indexOf(u,l+1),f===-1)break;c=Du.trim(t.slice(r+1,f)),s(a,c),a=!1,l=f,n=l+1;continue}if(/\s|\n|\t/.test(u))if(t=t.replace(/\s|\n|\t/g," "),a===!1)if(f=IEe(t,l),f===-1){c=Du.trim(t.slice(n,l)),s(c),a=!1,n=l+1;continue}else{l=f-1;continue}else if(f=REe(t,l-1),f===-1){c=Du.trim(t.slice(n,l)),c=_9(c),s(a,c),a=!1,n=l+1;continue}else continue}return n<t.length&&(a===!1?s(t.slice(n)):s(a,_9(Du.trim(t.slice(n))))),Du.trim(i.join(" "))}function IEe(t,e){for(;e<t.length;e++){var n=t[e];if(n!==" ")return n==="="?e:-1}}function LEe(t,e){for(;e<t.length;e++){var n=t[e];if(n!==" ")return n==="'"||n==='"'?e:-1}}function REe(t,e){for(;e>0;e--){var n=t[e];if(n!==" ")return n==="="?e:-1}}function NEe(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function _9(t){return NEe(t)?t.substr(1,t.length-2):t}v2.parseTag=CEe;v2.parseAttr=DEe;var FEe=yI.FilterCSS,So=wr,_K=v2,zEe=_K.parseTag,jEe=_K.parseAttr,E1=bI;function Um(t){return t==null}function BEe(t){var e=E1.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=E1.trim(t.slice(e+1,-1));var n=t[t.length-1]==="/";return n&&(t=E1.trim(t.slice(0,-1))),{html:t,closing:n}}function $Ee(t){var e={};for(var n in t)e[n]=t[n];return e}function VEe(t){var e={};for(var n in t)Array.isArray(t[n])?e[n.toLowerCase()]=t[n].map(function(r){return r.toLowerCase()}):e[n.toLowerCase()]=t[n];return e}function SK(t){t=$Ee(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=So.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=VEe(t.whiteList||t.allowList):t.whiteList=So.whiteList,this.attributeWrapSign=t.singleQuotedAttributeValue===!0?"'":So.attributeWrapSign,t.onTag=t.onTag||So.onTag,t.onTagAttr=t.onTagAttr||So.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||So.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||So.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||So.safeAttrValue,t.escapeHtml=t.escapeHtml||So.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new FEe(t.css))}SK.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,r=n.whiteList,i=n.onTag,a=n.onIgnoreTag,o=n.onTagAttr,s=n.onIgnoreTagAttr,l=n.safeAttrValue,u=n.escapeHtml,c=e.attributeWrapSign,f=e.cssFilter;n.stripBlankChar&&(t=So.stripBlankChar(t)),n.allowCommentTag||(t=So.stripCommentTag(t));var d=!1;n.stripIgnoreTagBody&&(d=So.StripTagBody(n.stripIgnoreTagBody,a),a=d.onIgnoreTag);var h=zEe(t,function(p,g,v,m,y){var b={sourcePosition:p,position:g,isClosing:y,isWhite:Object.prototype.hasOwnProperty.call(r,v)},x=i(v,m,b);if(!Um(x))return x;if(b.isWhite){if(b.isClosing)return"</"+v+">";var w=BEe(m),_=r[v],E=jEe(w.html,function(S,O){var A=E1.indexOf(_,S)!==-1,T=o(v,S,O,A);return Um(T)?A?(O=l(v,S,O,f),O?S+"="+c+O+c:S):(T=s(v,S,O,A),Um(T)?void 0:T):T});return m="<"+v,E&&(m+=" "+E),w.closing&&(m+=" /"),m+=">",m}else return x=a(v,m,b),Um(x)?u(m):x},u);return d&&(h=d.remove(h)),h};var qEe=SK;(function(t,e){var n=wr,r=v2,i=qEe;function a(s,l){var u=new i(l);return u.process(s)}e=t.exports=a,e.filterXSS=a,e.FilterXSS=i,function(){for(var s in n)e[s]=n[s];for(var l in r)e[l]=r[l]}(),typeof window<"u"&&(window.filterXSS=t.exports);function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(y9,y9.exports);const WEe={html:"html",htm:"html",css:"css",js:"javascript",jsx:"jsx",ts:"typescript",tsx:"tsx",py:"python",rb:"ruby",php:"php",java:"java",cs:"csharp",go:"go",rs:"rust",scala:"scala",kt:"kotlin",swift:"swift",json:"json",xml:"xml",yaml:"yaml",yml:"yaml",md:"markdown",csv:"csv",sh:"bash",bash:"bash",zsh:"bash",ps1:"powershell",toml:"toml",ini:"ini",cfg:"ini",conf:"ini",sql:"sql",graphql:"graphql",gql:"graphql",tex:"latex",svg:"svg",txt:"text",c:"c",cpp:"cpp",h:"c",hpp:"cpp",hs:"haskell",lhs:"haskell",elm:"elm",clj:"clojure",cljs:"clojure",erl:"erlang",ex:"elixir",exs:"elixir",dart:"dart",m:"objectivec",mm:"objectivec",lua:"lua",gd:"gdscript",unity:"csharp",r:"r",jl:"julia",ipynb:"jupyter"};function GEe(t){var n;const e=((n=t.split(".").pop())==null?void 0:n.toLowerCase())||"";return WEe[e]}const HEe=t=>t.replace(/^[^\u4e00-\u9fa5a-zA-Z0-9]+/,""),Dd=Xt({props:{code:{type:String},diff:{type:String},language:{type:String},path:{type:String},isFeedback:{type:Boolean},isConsoleLogs:{type:Boolean},isExpanded:{type:Boolean,required:!0},onToggleExpand:{type:Function,required:!0},isLoading:{type:Boolean}},setup:t=>{const{code:e,language:n,path:r,diff:i,isFeedback:a,isConsoleLogs:o,isExpanded:s,isLoading:l}=bn(t),{onToggleExpand:u}=t,c=De(()=>e.value&&(n.value??(r.value?GEe(r.value):void 0)));return()=>{var f;return V("div",null,[(r.value||a.value||o.value)&&V("div",{style:{color:"gray",display:"flex",alignItems:"center",cursor:l.value?"wait":"pointer",opacity:l.value?.7:1,userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},onClick:l.value?void 0:u},[a.value||o.value?V("div",{style:{display:"flex",alignItems:"center"}},[V("span",{class:`codicon codicon-${a.value?"feedback":"output"}`,style:{marginRight:"6px"}},null),V("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px"}},[a.value?"User Edits":"Console Logs"])]):V(Or,null,[((f=r==null?void 0:r.value)==null?void 0:f.startsWith("."))&&V("span",null,[We(".")]),V("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px",direction:"rtl",textAlign:"left"}},[HEe(r.value??"")+""])]),V("div",{style:{flexGrow:1}},null),V("span",{class:`codicon codicon-chevron-${s.value?"up":"down"}`},null)]),(!(r.value||a.value||o.value)||s.value)&&V("div",{style:{overflowX:"auto",overflowY:"hidden",maxWidth:"100%"}},[V(na,{codeFoldable:!1,language:"zh-CN",modelValue:`\`\`\`${i.value!==void 0?"diff":c.value}
${(e.value??i.value??"").trim().replace(/```/g,"\\`\\`\\`")}
\`\`\``},null)])])}}}),YEe=Xt({props:{currentBalance:{type:Number,required:!0},totalSpent:{type:Number,required:!0},totalPromotions:{type:Number,required:!0},message:{type:String,required:!0}},setup:t=>{const{currentBalance:e,totalSpent:n,totalPromotions:r,message:i}=bn(t),a=pu(),{postMessage:o}=a;return()=>V("div",{style:{backgroundColor:"var(--textBlockQuote-background)",padding:"12px",borderRadius:"4px",marginBottom:"12px"}},[V("div",{style:{color:"var(--errorForeground)",marginBottom:"8px"}},[i.value]),V("div",{style:{marginBottom:"12px"}},[V("div",{style:{color:"var(--foreground)"}},[We("Current Balance:")," ",V("span",{style:{fontWeight:"bold"}},[We("$"),e.value.toFixed(2)])]),V("div",{style:{color:"var(--foreground)"}},[We("Total Spent: $"),n.value.toFixed(2)]),V("div",{style:{color:"var(--foreground)"}},[We("Total Promotions: $"),r.value.toFixed(2)])]),V(ol,{type:"link",style:{width:"100%",marginBottom:"8px"}},{default:()=>[V("span",{class:"codicon codicon-credit-card",style:{fontSize:"14px",marginRight:"6px"}},null),We("Buy Credits")]}),V(ol,{onClick:()=>{o({type:"invoke",text:"primaryButtonClick"})},class:"w-full flex items-center justify-center"},{default:()=>[V("span",{class:"codicon codicon-refresh",style:{fontSize:"14px",marginRight:"6px"}},null),We("Retry Request")]})])}}),S9=Xt({props:{options:{type:Array},selected:{type:String},isActive:{type:Boolean}},setup:t=>{const{options:e,selected:n,isActive:r}=bn(t),i=pu(),{postMessage:a}=i,o=De(()=>{var s;return n.value!==void 0&&((s=e.value)==null?void 0:s.includes(n.value))});return()=>{var s;return V("div",{style:{display:"flex",flexDirection:"column",gap:"8px",padding:"15px 0"}},[(s=e.value)==null?void 0:s.map((l,u)=>{const c=l===n.value,f=o.value||!r.value;return V("button",{key:u,style:{background:c?"var(--focusBorder)":"bg-gray-200",color:c?"white":"var(--input-foreground)",border:"1px solid var(--editorGroup-border)",cursor:f?"default":"pointer",textAlign:"left"},class:`${!o.value&&"hover:bg-[var(--focusBorder)] hover:!text-white"} rounded px-2 py-3 text-sm`,onClick:()=>{o.value||!r.value||a({type:"optionsResponse",text:l})}},[l])})])}}});function UEe(t,e=[]){return e.find(n=>{const r=String(n.uriTemplate).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/\\\{([^}]+)\\\}/g,"([^/]+)");return new RegExp(`^${r}$`).test(t)})}function XEe(t,e=[],n=[]){const r=e.find(i=>i.uri===t);return r||UEe(t,n)}const Xm="HAS_CHANGES";function ZEe(t){const e=[];for(let n=0;n<t.length;n++)if(t[n].ask==="command"||t[n].say==="command"){let r=t[n].text||"",i=!1,a=n+1;for(;a<t.length&&!(t[a].ask==="command"||t[a].say==="command");){if(t[a].ask==="command_output"||t[a].say==="command_output"){i||(r+=`
${O1}`,i=!0);const o=t[a].text||"";o.length>0&&(r+=`
`+o)}a++}e.push({...t[n],text:r}),n=a-1}return t.filter(n=>!(n.ask==="command_output"||n.say==="command_output")).map(n=>(n.ask==="command"||n.say==="command")&&e.find(i=>i.ts===n.ts)||n)}const O1="Output:",E9="REQ_APP",O9="REQ_APP";function KEe(t){const e=[];for(let n=0;n<t.length;n++)if(t[n].ask==="code"||t[n].say==="code"){const r={code:t[n].text||"",output:[],result:[]};let i=n+1;for(;i<t.length&&!(t[i].ask==="code"||t[i].say==="code");){if(t[i].ask==="code_output"||t[i].say==="code_output"){const a=t[i].text||"";a.length>0&&r.output.push(a.trim())}if(t[i].ask==="code_result"||t[i].say==="code_result"){const a=t[i].text||"";a.length>0&&r.result.push(a.trim())}i++}e.push({...t[n],text:JSON.stringify(r)}),n=i-1}return t.filter(n=>!(n.ask==="code_output"||n.say==="code_output"||n.ask==="code_result"||n.say==="code_result")).map(n=>(n.ask==="code"||n.say==="code")&&e.find(i=>i.ts===n.ts)||n)}var fn;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(s=>typeof i[i[s]]!="number"),o={};for(const s of a)o[s]=i[s];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(fn||(fn={}));var k9;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(k9||(k9={}));const rt=fn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Iu=t=>{switch(typeof t){case"undefined":return rt.undefined;case"string":return rt.string;case"number":return Number.isNaN(t)?rt.nan:rt.number;case"boolean":return rt.boolean;case"function":return rt.function;case"bigint":return rt.bigint;case"symbol":return rt.symbol;case"object":return Array.isArray(t)?rt.array:t===null?rt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?rt.promise:typeof Map<"u"&&t instanceof Map?rt.map:typeof Set<"u"&&t instanceof Set?rt.set:typeof Date<"u"&&t instanceof Date?rt.date:rt.object;default:return rt.unknown}},$e=fn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class iu extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let s=r,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(s[u]=s[u]||{_errors:[]},s[u]._errors.push(n(o))):s[u]=s[u]||{_errors:[]},s=s[u],l++}}};return i(this),r}static assert(e){if(!(e instanceof iu))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,fn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}iu.create=t=>new iu(t);const f6=(t,e)=>{let n;switch(t.code){case $e.invalid_type:t.received===rt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case $e.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,fn.jsonStringifyReplacer)}`;break;case $e.unrecognized_keys:n=`Unrecognized key(s) in object: ${fn.joinValues(t.keys,", ")}`;break;case $e.invalid_union:n="Invalid input";break;case $e.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${fn.joinValues(t.options)}`;break;case $e.invalid_enum_value:n=`Invalid enum value. Expected ${fn.joinValues(t.options)}, received '${t.received}'`;break;case $e.invalid_arguments:n="Invalid function arguments";break;case $e.invalid_return_type:n="Invalid function return type";break;case $e.invalid_date:n="Invalid date";break;case $e.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:fn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case $e.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case $e.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case $e.custom:n="Invalid input";break;case $e.invalid_intersection_types:n="Intersection results could not be merged";break;case $e.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case $e.not_finite:n="Number must be finite";break;default:n=e.defaultError,fn.assertNever(t)}return{message:n}};let JEe=f6;function QEe(){return JEe}const eOe=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let s="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)s=u(o,{data:e,defaultError:s}).message;return{...i,path:a,message:s}};function Ke(t,e){const n=QEe(),r=eOe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===f6?void 0:f6].filter(i=>!!i)});t.common.issues.push(r)}class co{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Pt;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return co.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return Pt;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const Pt=Object.freeze({status:"aborted"}),wg=t=>({status:"dirty",value:t}),Go=t=>({status:"valid",value:t}),A9=t=>t.status==="aborted",T9=t=>t.status==="dirty",Lh=t=>t.status==="valid",gb=t=>typeof Promise<"u"&&t instanceof Promise;var ot;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ot||(ot={}));class hc{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const M9=(t,e)=>{if(Lh(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new iu(t.common.issues);return this._error=n,this._error}}};function Ut(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,s)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??s.defaultError}:typeof s.data>"u"?{message:l??r??s.defaultError}:o.code!=="invalid_type"?{message:s.defaultError}:{message:l??n??s.defaultError}},description:i}}class un{get description(){return this._def.description}_getType(e){return Iu(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Iu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new co,ctx:{common:e.parent.common,data:e.data,parsedType:Iu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(gb(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Iu(e)},i=this._parseSync({data:e,path:r.path,parent:r});return M9(r,i)}"~validate"(e){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Iu(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return Lh(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>Lh(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Iu(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(gb(i)?i:Promise.resolve(i));return M9(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=e(i),s=()=>a.addIssue({code:$e.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(s(),!1)):o?!0:(s(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Fh({schema:this,typeName:qe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Xl.create(this,this._def)}nullable(){return zh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return sl.create(this)}promise(){return bb.create(this,this._def)}or(e){return mb.create([this,e],this._def)}and(e){return yb.create(this,e,this._def)}transform(e){return new Fh({...Ut(this._def),schema:this,typeName:qe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new m6({...Ut(this._def),innerType:this,defaultValue:n,typeName:qe.ZodDefault})}brand(){return new SOe({typeName:qe.ZodBranded,type:this,...Ut(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new y6({...Ut(this._def),innerType:this,catchValue:n,typeName:qe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return xI.create(this,e)}readonly(){return b6.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const tOe=/^c[^\s-]{8,}$/i,nOe=/^[0-9a-z]+$/,rOe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,iOe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,aOe=/^[a-z0-9_-]{21}$/i,oOe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,sOe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,lOe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,uOe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let HS;const cOe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,fOe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,dOe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,hOe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,pOe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,gOe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,EK="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",vOe=new RegExp(`^${EK}$`);function OK(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function mOe(t){return new RegExp(`^${OK(t)}$`)}function yOe(t){let e=`${EK}T${OK(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function bOe(t,e){return!!((e==="v4"||!e)&&cOe.test(t)||(e==="v6"||!e)&&dOe.test(t))}function xOe(t,e){if(!oOe.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function wOe(t,e){return!!((e==="v4"||!e)&&fOe.test(t)||(e==="v6"||!e)&&hOe.test(t))}class Hu extends un{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==rt.string){const a=this._getOrReturnCtx(e);return Ke(a,{code:$e.invalid_type,expected:rt.string,received:a.parsedType}),Pt}const r=new co;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),Ke(i,{code:$e.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),Ke(i,{code:$e.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,s=e.data.length<a.value;(o||s)&&(i=this._getOrReturnCtx(e,i),o?Ke(i,{code:$e.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):s&&Ke(i,{code:$e.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")lOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"email",code:$e.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")HS||(HS=new RegExp(uOe,"u")),HS.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"emoji",code:$e.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")iOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"uuid",code:$e.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")aOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"nanoid",code:$e.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")tOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"cuid",code:$e.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")nOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"cuid2",code:$e.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")rOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"ulid",code:$e.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Ke(i,{validation:"url",code:$e.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"regex",code:$e.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),Ke(i,{code:$e.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),Ke(i,{code:$e.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),Ke(i,{code:$e.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?yOe(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{code:$e.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?vOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{code:$e.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?mOe(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{code:$e.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?sOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"duration",code:$e.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?bOe(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"ip",code:$e.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?xOe(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"jwt",code:$e.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?wOe(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"cidr",code:$e.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?pOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"base64",code:$e.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?gOe.test(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{validation:"base64url",code:$e.invalid_string,message:a.message}),r.dirty()):fn.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:$e.invalid_string,...ot.errToObj(r)})}_addCheck(e){return new Hu({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ot.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ot.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ot.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ot.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ot.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ot.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ot.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ot.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ot.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ot.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ot.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ot.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ot.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ot.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ot.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ot.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ot.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ot.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ot.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ot.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ot.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ot.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ot.errToObj(n)})}nonempty(e){return this.min(1,ot.errToObj(e))}trim(){return new Hu({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Hu({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Hu({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Hu.create=t=>new Hu({checks:[],typeName:qe.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ut(t)});function _Oe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return a%o/10**i}class Rh extends un{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==rt.number){const a=this._getOrReturnCtx(e);return Ke(a,{code:$e.invalid_type,expected:rt.number,received:a.parsedType}),Pt}let r;const i=new co;for(const a of this._def.checks)a.kind==="int"?fn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{code:$e.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:$e.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:$e.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?_Oe(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:$e.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{code:$e.not_finite,message:a.message}),i.dirty()):fn.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ot.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ot.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ot.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ot.toString(n))}setLimit(e,n,r,i){return new Rh({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ot.toString(i)}]})}_addCheck(e){return new Rh({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ot.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ot.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ot.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ot.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ot.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ot.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ot.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ot.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ot.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&fn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Rh.create=t=>new Rh({checks:[],typeName:qe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ut(t)});class k0 extends un{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==rt.bigint)return this._getInvalidInput(e);let r;const i=new co;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:$e.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:$e.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:$e.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):fn.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Ke(n,{code:$e.invalid_type,expected:rt.bigint,received:n.parsedType}),Pt}gte(e,n){return this.setLimit("min",e,!0,ot.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ot.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ot.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ot.toString(n))}setLimit(e,n,r,i){return new k0({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ot.toString(i)}]})}_addCheck(e){return new k0({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ot.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ot.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ot.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ot.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ot.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}k0.create=t=>new k0({checks:[],typeName:qe.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ut(t)});class d6 extends un{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==rt.boolean){const r=this._getOrReturnCtx(e);return Ke(r,{code:$e.invalid_type,expected:rt.boolean,received:r.parsedType}),Pt}return Go(e.data)}}d6.create=t=>new d6({typeName:qe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ut(t)});class vb extends un{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==rt.date){const a=this._getOrReturnCtx(e);return Ke(a,{code:$e.invalid_type,expected:rt.date,received:a.parsedType}),Pt}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Ke(a,{code:$e.invalid_date}),Pt}const r=new co;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),Ke(i,{code:$e.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),Ke(i,{code:$e.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):fn.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new vb({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ot.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ot.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}vb.create=t=>new vb({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:qe.ZodDate,...Ut(t)});class C9 extends un{_parse(e){if(this._getType(e)!==rt.symbol){const r=this._getOrReturnCtx(e);return Ke(r,{code:$e.invalid_type,expected:rt.symbol,received:r.parsedType}),Pt}return Go(e.data)}}C9.create=t=>new C9({typeName:qe.ZodSymbol,...Ut(t)});class h6 extends un{_parse(e){if(this._getType(e)!==rt.undefined){const r=this._getOrReturnCtx(e);return Ke(r,{code:$e.invalid_type,expected:rt.undefined,received:r.parsedType}),Pt}return Go(e.data)}}h6.create=t=>new h6({typeName:qe.ZodUndefined,...Ut(t)});class p6 extends un{_parse(e){if(this._getType(e)!==rt.null){const r=this._getOrReturnCtx(e);return Ke(r,{code:$e.invalid_type,expected:rt.null,received:r.parsedType}),Pt}return Go(e.data)}}p6.create=t=>new p6({typeName:qe.ZodNull,...Ut(t)});class P9 extends un{constructor(){super(...arguments),this._any=!0}_parse(e){return Go(e.data)}}P9.create=t=>new P9({typeName:qe.ZodAny,...Ut(t)});class D9 extends un{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Go(e.data)}}D9.create=t=>new D9({typeName:qe.ZodUnknown,...Ut(t)});class pc extends un{_parse(e){const n=this._getOrReturnCtx(e);return Ke(n,{code:$e.invalid_type,expected:rt.never,received:n.parsedType}),Pt}}pc.create=t=>new pc({typeName:qe.ZodNever,...Ut(t)});class I9 extends un{_parse(e){if(this._getType(e)!==rt.undefined){const r=this._getOrReturnCtx(e);return Ke(r,{code:$e.invalid_type,expected:rt.void,received:r.parsedType}),Pt}return Go(e.data)}}I9.create=t=>new I9({typeName:qe.ZodVoid,...Ut(t)});class sl extends un{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==rt.array)return Ke(n,{code:$e.invalid_type,expected:rt.array,received:n.parsedType}),Pt;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,s=n.data.length<i.exactLength.value;(o||s)&&(Ke(n,{code:o?$e.too_big:$e.too_small,minimum:s?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Ke(n,{code:$e.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Ke(n,{code:$e.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,s)=>i.type._parseAsync(new hc(n,o,n.path,s)))).then(o=>co.mergeArray(r,o));const a=[...n.data].map((o,s)=>i.type._parseSync(new hc(n,o,n.path,s)));return co.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new sl({...this._def,minLength:{value:e,message:ot.toString(n)}})}max(e,n){return new sl({...this._def,maxLength:{value:e,message:ot.toString(n)}})}length(e,n){return new sl({...this._def,exactLength:{value:e,message:ot.toString(n)}})}nonempty(e){return this.min(1,e)}}sl.create=(t,e)=>new sl({type:t,minLength:null,maxLength:null,exactLength:null,typeName:qe.ZodArray,...Ut(e)});function Kd(t){if(t instanceof Fr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Xl.create(Kd(r))}return new Fr({...t._def,shape:()=>e})}else return t instanceof sl?new sl({...t._def,type:Kd(t.element)}):t instanceof Xl?Xl.create(Kd(t.unwrap())):t instanceof zh?zh.create(Kd(t.unwrap())):t instanceof Ff?Ff.create(t.items.map(e=>Kd(e))):t}class Fr extends un{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=fn.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==rt.object){const u=this._getOrReturnCtx(e);return Ke(u,{code:$e.invalid_type,expected:rt.object,received:u.parsedType}),Pt}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),s=[];if(!(this._def.catchall instanceof pc&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||s.push(u);const l=[];for(const u of o){const c=a[u],f=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new hc(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof pc){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of s)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")s.length>0&&(Ke(i,{code:$e.unrecognized_keys,keys:s}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of s){const f=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new hc(i,f,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const f=await c.key,d=await c.value;u.push({key:f,value:d,alwaysSet:c.alwaysSet})}return u}).then(u=>co.mergeObjectSync(r,u)):co.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return ot.errToObj,new Fr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o;const i=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:ot.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Fr({...this._def,unknownKeys:"strip"})}passthrough(){return new Fr({...this._def,unknownKeys:"passthrough"})}extend(e){return new Fr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Fr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:qe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Fr({...this._def,catchall:e})}pick(e){const n={};for(const r of fn.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Fr({...this._def,shape:()=>n})}omit(e){const n={};for(const r of fn.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Fr({...this._def,shape:()=>n})}deepPartial(){return Kd(this)}partial(e){const n={};for(const r of fn.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new Fr({...this._def,shape:()=>n})}required(e){const n={};for(const r of fn.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Xl;)a=a._def.innerType;n[r]=a}return new Fr({...this._def,shape:()=>n})}keyof(){return kK(fn.objectKeys(this.shape))}}Fr.create=(t,e)=>new Fr({shape:()=>t,unknownKeys:"strip",catchall:pc.create(),typeName:qe.ZodObject,...Ut(e)});Fr.strictCreate=(t,e)=>new Fr({shape:()=>t,unknownKeys:"strict",catchall:pc.create(),typeName:qe.ZodObject,...Ut(e)});Fr.lazycreate=(t,e)=>new Fr({shape:t,unknownKeys:"strip",catchall:pc.create(),typeName:qe.ZodObject,...Ut(e)});class mb extends un{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const s of a)if(s.result.status==="valid")return s.result;for(const s of a)if(s.result.status==="dirty")return n.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(s=>new iu(s.ctx.common.issues));return Ke(n,{code:$e.invalid_union,unionErrors:o}),Pt}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!a&&(a={result:c,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const s=o.map(l=>new iu(l));return Ke(n,{code:$e.invalid_union,unionErrors:s}),Pt}}get options(){return this._def.options}}mb.create=(t,e)=>new mb({options:t,typeName:qe.ZodUnion,...Ut(e)});function g6(t,e){const n=Iu(t),r=Iu(e);if(t===e)return{valid:!0,data:t};if(n===rt.object&&r===rt.object){const i=fn.objectKeys(e),a=fn.objectKeys(t).filter(s=>i.indexOf(s)!==-1),o={...t,...e};for(const s of a){const l=g6(t[s],e[s]);if(!l.valid)return{valid:!1};o[s]=l.data}return{valid:!0,data:o}}else if(n===rt.array&&r===rt.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],s=e[a],l=g6(o,s);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===rt.date&&r===rt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class yb extends un{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,o)=>{if(A9(a)||A9(o))return Pt;const s=g6(a.value,o.value);return s.valid?((T9(a)||T9(o))&&n.dirty(),{status:n.value,value:s.data}):(Ke(r,{code:$e.invalid_intersection_types}),Pt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}yb.create=(t,e,n)=>new yb({left:t,right:e,typeName:qe.ZodIntersection,...Ut(n)});class Ff extends un{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==rt.array)return Ke(r,{code:$e.invalid_type,expected:rt.array,received:r.parsedType}),Pt;if(r.data.length<this._def.items.length)return Ke(r,{code:$e.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Pt;!this._def.rest&&r.data.length>this._def.items.length&&(Ke(r,{code:$e.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,s)=>{const l=this._def.items[s]||this._def.rest;return l?l._parse(new hc(r,o,r.path,s)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>co.mergeArray(n,o)):co.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new Ff({...this._def,rest:e})}}Ff.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ff({items:t,typeName:qe.ZodTuple,rest:null,...Ut(e)})};class L9 extends un{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==rt.map)return Ke(r,{code:$e.invalid_type,expected:rt.map,received:r.parsedType}),Pt;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([s,l],u)=>({key:i._parse(new hc(r,s,r.path,[u,"key"])),value:a._parse(new hc(r,l,r.path,[u,"value"]))}));if(r.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Pt;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),s.set(u.value,c.value)}return{status:n.value,value:s}})}else{const s=new Map;for(const l of o){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Pt;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),s.set(u.value,c.value)}return{status:n.value,value:s}}}}L9.create=(t,e,n)=>new L9({valueType:e,keyType:t,typeName:qe.ZodMap,...Ut(n)});class A0 extends un{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==rt.set)return Ke(r,{code:$e.invalid_type,expected:rt.set,received:r.parsedType}),Pt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Ke(r,{code:$e.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Ke(r,{code:$e.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Pt;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const s=[...r.data.values()].map((l,u)=>a._parse(new hc(r,l,r.path,u)));return r.common.async?Promise.all(s).then(l=>o(l)):o(s)}min(e,n){return new A0({...this._def,minSize:{value:e,message:ot.toString(n)}})}max(e,n){return new A0({...this._def,maxSize:{value:e,message:ot.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}A0.create=(t,e)=>new A0({valueType:t,minSize:null,maxSize:null,typeName:qe.ZodSet,...Ut(e)});class v6 extends un{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}v6.create=(t,e)=>new v6({getter:t,typeName:qe.ZodLazy,...Ut(e)});class R9 extends un{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ke(n,{received:n.data,code:$e.invalid_literal,expected:this._def.value}),Pt}return{status:"valid",value:e.data}}get value(){return this._def.value}}R9.create=(t,e)=>new R9({value:t,typeName:qe.ZodLiteral,...Ut(e)});function kK(t,e){return new Nh({values:t,typeName:qe.ZodEnum,...Ut(e)})}class Nh extends un{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ke(n,{expected:fn.joinValues(r),received:n.parsedType,code:$e.invalid_type}),Pt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Ke(n,{received:n.data,code:$e.invalid_enum_value,options:r}),Pt}return Go(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Nh.create(e,{...this._def,...n})}exclude(e,n=this._def){return Nh.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Nh.create=kK;class N9 extends un{_parse(e){const n=fn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==rt.string&&r.parsedType!==rt.number){const i=fn.objectValues(n);return Ke(r,{expected:fn.joinValues(i),received:r.parsedType,code:$e.invalid_type}),Pt}if(this._cache||(this._cache=new Set(fn.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=fn.objectValues(n);return Ke(r,{received:r.data,code:$e.invalid_enum_value,options:i}),Pt}return Go(e.data)}get enum(){return this._def.values}}N9.create=(t,e)=>new N9({values:t,typeName:qe.ZodNativeEnum,...Ut(e)});class bb extends un{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==rt.promise&&n.common.async===!1)return Ke(n,{code:$e.invalid_type,expected:rt.promise,received:n.parsedType}),Pt;const r=n.parsedType===rt.promise?n.data:Promise.resolve(n.data);return Go(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}bb.create=(t,e)=>new bb({type:t,typeName:qe.ZodPromise,...Ut(e)});class Fh extends un{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===qe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{Ke(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async s=>{if(n.value==="aborted")return Pt;const l=await this._def.schema._parseAsync({data:s,path:r.path,parent:r});return l.status==="aborted"?Pt:l.status==="dirty"||n.value==="dirty"?wg(l.value):l});{if(n.value==="aborted")return Pt;const s=this._def.schema._parseSync({data:o,path:r.path,parent:r});return s.status==="aborted"?Pt:s.status==="dirty"||n.value==="dirty"?wg(s.value):s}}if(i.type==="refinement"){const o=s=>{const l=i.refinement(s,a);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Pt:(s.status==="dirty"&&n.dirty(),o(s.value),{status:n.value,value:s.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>s.status==="aborted"?Pt:(s.status==="dirty"&&n.dirty(),o(s.value).then(()=>({status:n.value,value:s.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Lh(o))return Pt;const s=i.transform(o.value,a);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:s}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Lh(o)?Promise.resolve(i.transform(o.value,a)).then(s=>({status:n.value,value:s})):Pt);fn.assertNever(i)}}Fh.create=(t,e,n)=>new Fh({schema:t,typeName:qe.ZodEffects,effect:e,...Ut(n)});Fh.createWithPreprocess=(t,e,n)=>new Fh({schema:e,effect:{type:"preprocess",transform:t},typeName:qe.ZodEffects,...Ut(n)});class Xl extends un{_parse(e){return this._getType(e)===rt.undefined?Go(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Xl.create=(t,e)=>new Xl({innerType:t,typeName:qe.ZodOptional,...Ut(e)});class zh extends un{_parse(e){return this._getType(e)===rt.null?Go(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}zh.create=(t,e)=>new zh({innerType:t,typeName:qe.ZodNullable,...Ut(e)});class m6 extends un{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===rt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}m6.create=(t,e)=>new m6({innerType:t,typeName:qe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ut(e)});class y6 extends un{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return gb(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new iu(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new iu(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}y6.create=(t,e)=>new y6({innerType:t,typeName:qe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ut(e)});class F9 extends un{_parse(e){if(this._getType(e)!==rt.nan){const r=this._getOrReturnCtx(e);return Ke(r,{code:$e.invalid_type,expected:rt.nan,received:r.parsedType}),Pt}return{status:"valid",value:e.data}}}F9.create=t=>new F9({typeName:qe.ZodNaN,...Ut(t)});class SOe extends un{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class xI extends un{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Pt:a.status==="dirty"?(n.dirty(),wg(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Pt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new xI({in:e,out:n,typeName:qe.ZodPipeline})}}class b6 extends un{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Lh(i)&&(i.value=Object.freeze(i.value)),i);return gb(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}b6.create=(t,e)=>new b6({innerType:t,typeName:qe.ZodReadonly,...Ut(e)});Fr.lazycreate;var qe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(qe||(qe={}));const dt=Hu.create,cr=Rh.create,T0=d6.create,EOe=h6.create,OOe=p6.create;pc.create;const Rn=sl.create,St=Fr.create;Fr.strictCreate;const Gi=mb.create;yb.create;Ff.create;const m2=v6.create,Pv=Nh.create;bb.create;Xl.create;zh.create;const AK=()=>[["cartesian"]];AK.props={};function kOe(t,e){return t=t%(2*Math.PI),e=e%(2*Math.PI),t<0&&(t=2*Math.PI+t),e<0&&(e=2*Math.PI+e),t>=e&&(e=e+2*Math.PI),{startAngle:t,endAngle:e}}const TK=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1},n=Object.assign(Object.assign({},e),t);return Object.assign(Object.assign({},n),kOe(n.startAngle,n.endAngle))},Dv=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:i}=TK(t);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",e,n,r,i]]};Dv.props={};const MK=({startAngle:t=0,endAngle:e=Math.PI*6,innerRadius:n=0,outerRadius:r=1})=>[["translate",.5,.5],["reflect.y"],["translate",-.5,-.5],["helix",t,e,n,r]];MK.props={};const wI=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];wI.props={transform:!0};const AOe=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},e),t)},CK=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:i}=AOe(t);return[...wI(),...Dv({startAngle:e,endAngle:n,innerRadius:r,outerRadius:i})]};CK.props={};const PK=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},e),t)},_I=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:i}=PK(t);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...Dv({startAngle:e,endAngle:n,innerRadius:r,outerRadius:i})]};_I.props={};const SI=()=>[["parallel",0,1,0,1]];SI.props={};const DK=({focusX:t=0,focusY:e=0,distortionX:n=2,distortionY:r=2,visual:i=!1})=>[["fisheye",t,e,n,r,i]];DK.props={transform:!0};const IK=t=>{const{startAngle:e=-Math.PI/2,endAngle:n=Math.PI*3/2,innerRadius:r=0,outerRadius:i=1}=t;return[...SI(),...Dv({startAngle:e,endAngle:n,innerRadius:r,outerRadius:i})]};IK.props={};const LK=({value:t})=>e=>e.map(()=>t);LK.props={};const RK=({value:t})=>e=>e.map(t);RK.props={};const NK=({value:t})=>e=>e.map(n=>n[t]);NK.props={};const FK=({value:t})=>()=>t;FK.props={};var gc=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)},TOe=function(t,e){return gc(t)?t.indexOf(e)>-1:!1},zK=function(t,e){if(!gc(t))return t;for(var n=[],r=0;r<t.length;r++){var i=t[r];e(i,r)&&n.push(i)}return n},MOe=function(t,e){return e===void 0&&(e=[]),zK(t,function(n){return!TOe(e,n)})};function Ue(t){return typeof t=="function"}function lt(t){return t==null}function wi(t){return Array.isArray(t)}const jr=function(t){var e=typeof t;return t!==null&&e==="object"||e==="function"};function EI(t,e){if(t){var n;if(wi(t))for(var r=0,i=t.length;r<i&&(n=e(t[r],r),n!==!1);r++);else if(jr(t)){for(var a in t)if(t.hasOwnProperty(a)&&(n=e(t[a],a),n===!1))break}}}var jK=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return EI(t,function(n,r){Ue(t)&&r==="prototype"||e.push(r)}),e};function COe(t,e){var n=jK(e),r=n.length;if(lt(t))return!r;for(var i=0;i<r;i+=1){var a=n[i];if(e[a]!==t[a]||!(a in t))return!1}return!0}var x6=function(t){return typeof t=="object"&&t!==null},POe={}.toString,BK=function(t,e){return POe.call(t)==="[object "+e+"]"},au=function(t){if(!x6(t)||!BK(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};function jh(t,e){if(!wi(t))return null;var n;if(Ue(e)&&(n=e),au(e)&&(n=function(i){return COe(i,e)}),n){for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r]}return null}var DOe=function(t){if(!wi(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e};function xb(t){if(!Array.isArray(t))return-1/0;var e=t.length;if(!e)return-1/0;for(var n=t[0],r=1;r<e;r++)n=Math.max(n,t[r]);return n}const wb=function(t){if(wi(t))return t.reduce(function(e,n){return Math.min(e,n)},t[0])};var IOe=function(t,e,n){if(!wi(t)&&!au(t))return t;var r=n;return EI(t,function(i,a){r=e(r,i,a)}),r};function an(t){return typeof t=="string"}function LOe(t,e){e===void 0&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var a=t[r];e.has(a)||(n.push(a),e.set(a,!0))}return n}function Iv(t){if(gc(t)){var e=t;return e[e.length-1]}}var ROe=Object.prototype.hasOwnProperty;function y2(t,e){if(!e||!wi(t))return{};for(var n={},r=Ue(e)?e:function(s){return s[e]},i,a=0;a<t.length;a++){var o=t[a];i=r(o),ROe.call(n,i)?n[i].push(o):n[i]=[o]}return n}var jn=function(t,e,n){return t<e?e:t>n?n:t};function je(t){return typeof t=="number"}var NOe=1e-5;function Hg(t,e,n){return n===void 0&&(n=NOe),t===e||Math.abs(t-e)<n}const FOe=function(t,e){if(wi(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var a=t[i],o=Ue(e)?e(a):a[e];o>r&&(n=a,r=o)}return n}},zOe=function(t,e){if(wi(t)){for(var n,r=1/0,i=0;i<t.length;i++){var a=t[i],o=Ue(e)?e(a):a[e];o<r&&(n=a,r=o)}return n}};var $K=function(t,e){return(t%e+e)%e};const VK=function(t){return lt(t)?"":t.toString()};var OI=function(t){var e=VK(t);return e.charAt(0).toLowerCase()+e.substring(1)};function jOe(t,e){return!t||!e?t:t.replace(/\\?\{([^{}]+)\}/g,function(n,r){return n.charAt(0)==="\\"?n.slice(1):e[r]===void 0?"":e[r]})}var Bo=function(t){var e=VK(t);return e.charAt(0).toUpperCase()+e.substring(1)},BOe={}.toString,$Oe=function(t){return BOe.call(t).replace(/^\[object /,"").replace(/]$/,"")},M0=function(t){return BK(t,"Boolean")};function VOe(t){return t instanceof Date}function qOe(t){return t===null}var WOe=Object.prototype,GOe=function(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||WOe;return t===n},bt=function(t){return t===void 0},vc=function(t){if(typeof t!="object"||t===null)return t;var e;if(wi(t)){e=[];for(var n=0,r=t.length;n<r;n++)typeof t[n]=="object"&&t[n]!=null?e[n]=vc(t[n]):e[n]=t[n]}else{e={};for(var i in t)typeof t[i]=="object"&&t[i]!=null?e[i]=vc(t[i]):e[i]=t[i]}return e};function gp(t,e,n){var r;return function(){var i=this,a=arguments,o=function(){r=null,t.apply(i,a)};clearTimeout(r),r=setTimeout(o,e)}}function HOe(t){var e,n,r,i=t||1;function a(s,l){++e>i&&(r=n,o(1),++e),n[s]=l}function o(s){e=0,n=Object.create(null),s||(r=Object.create(null))}return o(),{clear:o,has:function(s){return n[s]!==void 0||r[s]!==void 0},get:function(s){var l=n[s];if(l!==void 0)return l;if((l=r[s])!==void 0)return a(s,l),l},set:function(s,l){n[s]!==void 0?n[s]=l:a(s,l)}}}var YS=new Map;function w6(t,e,n){n===void 0&&(n=128);var r=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e?e.apply(this,i):i[0];YS.has(t)||YS.set(t,HOe(n));var s=YS.get(t);if(s.has(o))return s.get(o);var l=t.apply(this,i);return s.set(o,l),l};return r}var YOe=5;function UOe(t,e){if(Object.hasOwn)return Object.hasOwn(t,e);if(t==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)}function qK(t,e,n,r){n=n||0,r=r||YOe;for(var i in e)if(UOe(e,i)){var a=e[i];a!==null&&au(a)?(au(t[i])||(t[i]={}),n<r?qK(t[i],a,n+1,r):t[i]=e[i]):wi(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var me=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)qK(t,e[r]);return t},WK=function(t,e){if(!gc(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,i=0;i<t.length;i++)if(t[i]===e){r=i;break}return r},XOe=Object.prototype.hasOwnProperty;function Ys(t){if(lt(t))return!0;if(gc(t))return!t.length;var e=$Oe(t);if(e==="Map"||e==="Set")return!t.size;if(GOe(t))return!Object.keys(t).length;for(var n in t)if(XOe.call(t,n))return!1;return!0}var br=function(t,e){if(t===e)return!0;if(!t||!e||an(t)||an(e))return!1;if(gc(t)||gc(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=br(t[r],e[r]),!!n);r++);return n}if(x6(t)||x6(e)){var i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(var n=!0,r=0;r<i.length&&(n=br(t[i[r]],e[i[r]]),!!n);r++);return n}return!1},ZOe=function(t){return t};const KOe=function(t,e){e===void 0&&(e=ZOe);var n={};return jr(t)&&!lt(t)&&Object.keys(t).forEach(function(r){n[r]=e(t[r],r)}),n},qt=function(t,e,n){for(var r=0,i=an(e)?e.split("."):e;t&&r<i.length;)t=t[i[r++]];return t===void 0||r<i.length?n:t},C0=function(t,e,n){var r=t,i=an(e)?e.split("."):e;return i.forEach(function(a,o){o<i.length-1?(jr(r[a])||(r[a]=je(i[o+1])?[]:{}),r=r[a]):r[a]=n}),t};var JOe=Object.prototype.hasOwnProperty;const mc=function(t,e){if(t===null||!au(t))return{};var n={};return EI(e,function(r){JOe.call(t,r)&&(n[r]=t[r])}),n},vp=function(t,e){return IOe(t,function(n,r,i){return e.includes(i)||(n[i]=r),n},{})},ou=function(t,e,n){var r,i,a,o,s=0;n||(n={});var l=function(){s=n.leading===!1?0:Date.now(),r=null,o=t.apply(i,a),r||(i=a=null)},u=function(){var c=Date.now();!s&&n.leading===!1&&(s=c);var f=e-(c-s);return i=this,a=arguments,f<=0||f>e?(r&&(clearTimeout(r),r=null),s=c,o=t.apply(i,a),r||(i=a=null)):!r&&n.trailing!==!1&&(r=setTimeout(l,f)),o};return u.cancel=function(){clearTimeout(r),s=0,r=i=a=null},u};var Zm={};const QOe=function(t){return t=t||"g",Zm[t]?Zm[t]+=1:Zm[t]=1,t+Zm[t]},US=function(){},zf=function(t){return t};function _b(t){return lt(t)?0:gc(t)?t.length:Object.keys(t).length}var sr=1e-6,Zr=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function mp(){var t=new Zr(9);return Zr!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function eke(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function tke(t){var e=new Zr(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function nke(t,e,n,r,i,a,o,s,l){var u=new Zr(9);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=i,u[5]=a,u[6]=o,u[7]=s,u[8]=l,u}function rke(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=c*o-s*u,d=-c*a+s*l,h=u*a-o*l,p=n*f+r*d+i*h;return p?(p=1/p,t[0]=f*p,t[1]=(-c*r+i*u)*p,t[2]=(s*r-i*o)*p,t[3]=d*p,t[4]=(c*n-i*l)*p,t[5]=(-s*n+i*a)*p,t[6]=h*p,t[7]=(-u*n+r*l)*p,t[8]=(o*n-r*a)*p,t):null}function ike(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=n[0],h=n[1],p=n[2],g=n[3],v=n[4],m=n[5],y=n[6],b=n[7],x=n[8];return t[0]=d*r+h*o+p*u,t[1]=d*i+h*s+p*c,t[2]=d*a+h*l+p*f,t[3]=g*r+v*o+m*u,t[4]=g*i+v*s+m*c,t[5]=g*a+v*l+m*f,t[6]=y*r+b*o+x*u,t[7]=y*i+b*s+x*c,t[8]=y*a+b*l+x*f,t}function ake(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function oke(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function ske(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}var lke=ike;function wn(){var t=new Zr(16);return Zr!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function kI(t){var e=new Zr(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Bh(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function GK(t,e,n,r,i,a,o,s,l,u,c,f,d,h,p,g){var v=new Zr(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=i,v[5]=a,v[6]=o,v[7]=s,v[8]=l,v[9]=u,v[10]=c,v[11]=f,v[12]=d,v[13]=h,v[14]=p,v[15]=g,v}function _6(t,e,n,r,i,a,o,s,l,u,c,f,d,h,p,g,v){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=l,t[8]=u,t[9]=c,t[10]=f,t[11]=d,t[12]=h,t[13]=p,t[14]=g,t[15]=v,t}function yc(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function HK(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ms(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],h=e[11],p=e[12],g=e[13],v=e[14],m=e[15],y=n*s-r*o,b=n*l-i*o,x=n*u-a*o,w=r*l-i*s,_=r*u-a*s,E=i*u-a*l,S=c*g-f*p,O=c*v-d*p,A=c*m-h*p,T=f*v-d*g,I=f*m-h*g,D=d*m-h*v,R=y*D-b*I+x*T+w*A-_*O+E*S;return R?(R=1/R,t[0]=(s*D-l*I+u*T)*R,t[1]=(i*I-r*D-a*T)*R,t[2]=(g*E-v*_+m*w)*R,t[3]=(d*_-f*E-h*w)*R,t[4]=(l*A-o*D-u*O)*R,t[5]=(n*D-i*A+a*O)*R,t[6]=(v*x-p*E-m*b)*R,t[7]=(c*E-d*x+h*b)*R,t[8]=(o*I-s*A+u*S)*R,t[9]=(r*A-n*I-a*S)*R,t[10]=(p*_-g*x+m*y)*R,t[11]=(f*x-c*_-h*y)*R,t[12]=(s*O-o*T-l*S)*R,t[13]=(n*T-r*O+i*S)*R,t[14]=(g*b-p*w-v*y)*R,t[15]=(c*w-f*b+d*y)*R,t):null}function uke(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],h=e[11],p=e[12],g=e[13],v=e[14],m=e[15];return t[0]=s*(d*m-h*v)-f*(l*m-u*v)+g*(l*h-u*d),t[1]=-(r*(d*m-h*v)-f*(i*m-a*v)+g*(i*h-a*d)),t[2]=r*(l*m-u*v)-s*(i*m-a*v)+g*(i*u-a*l),t[3]=-(r*(l*h-u*d)-s*(i*h-a*d)+f*(i*u-a*l)),t[4]=-(o*(d*m-h*v)-c*(l*m-u*v)+p*(l*h-u*d)),t[5]=n*(d*m-h*v)-c*(i*m-a*v)+p*(i*h-a*d),t[6]=-(n*(l*m-u*v)-o*(i*m-a*v)+p*(i*u-a*l)),t[7]=n*(l*h-u*d)-o*(i*h-a*d)+c*(i*u-a*l),t[8]=o*(f*m-h*g)-c*(s*m-u*g)+p*(s*h-u*f),t[9]=-(n*(f*m-h*g)-c*(r*m-a*g)+p*(r*h-a*f)),t[10]=n*(s*m-u*g)-o*(r*m-a*g)+p*(r*u-a*s),t[11]=-(n*(s*h-u*f)-o*(r*h-a*f)+c*(r*u-a*s)),t[12]=-(o*(f*v-d*g)-c*(s*v-l*g)+p*(s*d-l*f)),t[13]=n*(f*v-d*g)-c*(r*v-i*g)+p*(r*d-i*f),t[14]=-(n*(s*v-l*g)-o*(r*v-i*g)+p*(r*l-i*s)),t[15]=n*(s*d-l*f)-o*(r*d-i*f)+c*(r*l-i*s),t}function YK(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],h=t[12],p=t[13],g=t[14],v=t[15],m=e*o-n*a,y=e*s-r*a,b=e*l-i*a,x=n*s-r*o,w=n*l-i*o,_=r*l-i*s,E=u*p-c*h,S=u*g-f*h,O=u*v-d*h,A=c*g-f*p,T=c*v-d*p,I=f*v-d*g;return m*I-y*T+b*A+x*O-w*S+_*E}function oa(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=e[9],h=e[10],p=e[11],g=e[12],v=e[13],m=e[14],y=e[15],b=n[0],x=n[1],w=n[2],_=n[3];return t[0]=b*r+x*s+w*f+_*g,t[1]=b*i+x*l+w*d+_*v,t[2]=b*a+x*u+w*h+_*m,t[3]=b*o+x*c+w*p+_*y,b=n[4],x=n[5],w=n[6],_=n[7],t[4]=b*r+x*s+w*f+_*g,t[5]=b*i+x*l+w*d+_*v,t[6]=b*a+x*u+w*h+_*m,t[7]=b*o+x*c+w*p+_*y,b=n[8],x=n[9],w=n[10],_=n[11],t[8]=b*r+x*s+w*f+_*g,t[9]=b*i+x*l+w*d+_*v,t[10]=b*a+x*u+w*h+_*m,t[11]=b*o+x*c+w*p+_*y,b=n[12],x=n[13],w=n[14],_=n[15],t[12]=b*r+x*s+w*f+_*g,t[13]=b*i+x*l+w*d+_*v,t[14]=b*a+x*u+w*h+_*m,t[15]=b*o+x*c+w*p+_*y,t}function hh(t,e,n){var r=n[0],i=n[1],a=n[2],o,s,l,u,c,f,d,h,p,g,v,m;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*a+e[12],t[13]=e[1]*r+e[5]*i+e[9]*a+e[13],t[14]=e[2]*r+e[6]*i+e[10]*a+e[14],t[15]=e[3]*r+e[7]*i+e[11]*a+e[15]):(o=e[0],s=e[1],l=e[2],u=e[3],c=e[4],f=e[5],d=e[6],h=e[7],p=e[8],g=e[9],v=e[10],m=e[11],t[0]=o,t[1]=s,t[2]=l,t[3]=u,t[4]=c,t[5]=f,t[6]=d,t[7]=h,t[8]=p,t[9]=g,t[10]=v,t[11]=m,t[12]=o*r+c*i+p*a+e[12],t[13]=s*r+f*i+g*a+e[13],t[14]=l*r+d*i+v*a+e[14],t[15]=u*r+h*i+m*a+e[15]),t}function UK(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function cke(t,e,n,r){var i=r[0],a=r[1],o=r[2],s=Math.hypot(i,a,o),l,u,c,f,d,h,p,g,v,m,y,b,x,w,_,E,S,O,A,T,I,D,R,F;return s<sr?null:(s=1/s,i*=s,a*=s,o*=s,l=Math.sin(n),u=Math.cos(n),c=1-u,f=e[0],d=e[1],h=e[2],p=e[3],g=e[4],v=e[5],m=e[6],y=e[7],b=e[8],x=e[9],w=e[10],_=e[11],E=i*i*c+u,S=a*i*c+o*l,O=o*i*c-a*l,A=i*a*c-o*l,T=a*a*c+u,I=o*a*c+i*l,D=i*o*c+a*l,R=a*o*c-i*l,F=o*o*c+u,t[0]=f*E+g*S+b*O,t[1]=d*E+v*S+x*O,t[2]=h*E+m*S+w*O,t[3]=p*E+y*S+_*O,t[4]=f*A+g*T+b*I,t[5]=d*A+v*T+x*I,t[6]=h*A+m*T+w*I,t[7]=p*A+y*T+_*I,t[8]=f*D+g*R+b*F,t[9]=d*D+v*R+x*F,t[10]=h*D+m*R+w*F,t[11]=p*D+y*R+_*F,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function XK(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+u*r,t[5]=o*i+c*r,t[6]=s*i+f*r,t[7]=l*i+d*r,t[8]=u*i-a*r,t[9]=c*i-o*r,t[10]=f*i-s*r,t[11]=d*i-l*r,t}function ZK(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],l=e[3],u=e[8],c=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-u*r,t[1]=o*i-c*r,t[2]=s*i-f*r,t[3]=l*i-d*r,t[8]=a*r+u*i,t[9]=o*r+c*i,t[10]=s*r+f*i,t[11]=l*r+d*i,t}function fke(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+u*r,t[1]=o*i+c*r,t[2]=s*i+f*r,t[3]=l*i+d*r,t[4]=u*i-a*r,t[5]=c*i-o*r,t[6]=f*i-s*r,t[7]=d*i-l*r,t}function Bl(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function zu(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function KK(t,e,n){var r=n[0],i=n[1],a=n[2],o=Math.hypot(r,i,a),s,l,u;return o<sr?null:(o=1/o,r*=o,i*=o,a*=o,s=Math.sin(e),l=Math.cos(e),u=1-l,t[0]=r*r*u+l,t[1]=i*r*u+a*s,t[2]=a*r*u-i*s,t[3]=0,t[4]=r*i*u-a*s,t[5]=i*i*u+l,t[6]=a*i*u+r*s,t[7]=0,t[8]=r*a*u+i*s,t[9]=i*a*u-r*s,t[10]=a*a*u+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function JK(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function QK(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S6(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function eJ(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=r+r,l=i+i,u=a+a,c=r*s,f=r*l,d=r*u,h=i*l,p=i*u,g=a*u,v=o*s,m=o*l,y=o*u;return t[0]=1-(h+g),t[1]=f+y,t[2]=d-m,t[3]=0,t[4]=f-y,t[5]=1-(c+g),t[6]=p+v,t[7]=0,t[8]=d+m,t[9]=p-v,t[10]=1-(c+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function dke(t,e){var n=new Zr(3),r=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=r*r+i*i+a*a+o*o;return f>0?(n[0]=(s*o+c*r+l*a-u*i)*2/f,n[1]=(l*o+c*i+u*r-s*a)*2/f,n[2]=(u*o+c*a+s*i-l*r)*2/f):(n[0]=(s*o+c*r+l*a-u*i)*2,n[1]=(l*o+c*i+u*r-s*a)*2,n[2]=(u*o+c*a+s*i-l*r)*2),eJ(t,e,n),t}function Sb(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function $h(t,e){var n=e[0],r=e[1],i=e[2],a=e[4],o=e[5],s=e[6],l=e[8],u=e[9],c=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(a,o,s),t[2]=Math.hypot(l,u,c),t}function Eb(t,e){var n=new Zr(3);$h(n,e);var r=1/n[0],i=1/n[1],a=1/n[2],o=e[0]*r,s=e[1]*i,l=e[2]*a,u=e[4]*r,c=e[5]*i,f=e[6]*a,d=e[8]*r,h=e[9]*i,p=e[10]*a,g=o+c+p,v=0;return g>0?(v=Math.sqrt(g+1)*2,t[3]=.25*v,t[0]=(f-h)/v,t[1]=(d-l)/v,t[2]=(s-u)/v):o>c&&o>p?(v=Math.sqrt(1+o-c-p)*2,t[3]=(f-h)/v,t[0]=.25*v,t[1]=(s+u)/v,t[2]=(d+l)/v):c>p?(v=Math.sqrt(1+c-o-p)*2,t[3]=(d-l)/v,t[0]=(s+u)/v,t[1]=.25*v,t[2]=(f+h)/v):(v=Math.sqrt(1+p-o-c)*2,t[3]=(s-u)/v,t[0]=(d+l)/v,t[1]=(f+h)/v,t[2]=.25*v),t}function hke(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3],l=i+i,u=a+a,c=o+o,f=i*l,d=i*u,h=i*c,p=a*u,g=a*c,v=o*c,m=s*l,y=s*u,b=s*c,x=r[0],w=r[1],_=r[2];return t[0]=(1-(p+v))*x,t[1]=(d+b)*x,t[2]=(h-y)*x,t[3]=0,t[4]=(d-b)*w,t[5]=(1-(f+v))*w,t[6]=(g+m)*w,t[7]=0,t[8]=(h+y)*_,t[9]=(g-m)*_,t[10]=(1-(f+p))*_,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Yg(t,e,n,r,i){var a=e[0],o=e[1],s=e[2],l=e[3],u=a+a,c=o+o,f=s+s,d=a*u,h=a*c,p=a*f,g=o*c,v=o*f,m=s*f,y=l*u,b=l*c,x=l*f,w=r[0],_=r[1],E=r[2],S=i[0],O=i[1],A=i[2],T=(1-(g+m))*w,I=(h+x)*w,D=(p-b)*w,R=(h-x)*_,F=(1-(d+m))*_,z=(v+y)*_,N=(p+b)*E,L=(v-y)*E,B=(1-(d+g))*E;return t[0]=T,t[1]=I,t[2]=D,t[3]=0,t[4]=R,t[5]=F,t[6]=z,t[7]=0,t[8]=N,t[9]=L,t[10]=B,t[11]=0,t[12]=n[0]+S-(T*S+R*O+N*A),t[13]=n[1]+O-(I*S+F*O+L*A),t[14]=n[2]+A-(D*S+z*O+B*A),t[15]=1,t}function AI(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,l=i+i,u=n*o,c=r*o,f=r*s,d=i*o,h=i*s,p=i*l,g=a*o,v=a*s,m=a*l;return t[0]=1-f-p,t[1]=c+m,t[2]=d-v,t[3]=0,t[4]=c-m,t[5]=1-u-p,t[6]=h+g,t[7]=0,t[8]=d+v,t[9]=h-g,t[10]=1-u-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pke(t,e,n,r,i,a,o){var s=1/(n-e),l=1/(i-r),u=1/(a-o);return t[0]=a*2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*l,t[10]=(o+a)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*u,t[15]=0,t}function tJ(t,e,n,r,i){var a=1/Math.tan(e/2),o;return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var gke=tJ;function vke(t,e,n,r,i){var a=1/Math.tan(e/2),o;return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=i*o,t[14]=i*r*o):(t[10]=-1,t[14]=-r),t}function mke(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(i+a);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-((o-s)*l*.5),t[9]=(i-a)*u*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function nJ(t,e,n,r,i,a,o){var s=1/(e-n),l=1/(r-i),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(o+a)*u,t[15]=1,t}var rJ=nJ;function iJ(t,e,n,r,i,a,o){var s=1/(e-n),l=1/(r-i),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=a*u,t[15]=1,t}function aJ(t,e,n,r){var i,a,o,s,l,u,c,f,d,h,p=e[0],g=e[1],v=e[2],m=r[0],y=r[1],b=r[2],x=n[0],w=n[1],_=n[2];return Math.abs(p-x)<sr&&Math.abs(g-w)<sr&&Math.abs(v-_)<sr?yc(t):(c=p-x,f=g-w,d=v-_,h=1/Math.hypot(c,f,d),c*=h,f*=h,d*=h,i=y*d-b*f,a=b*c-m*d,o=m*f-y*c,h=Math.hypot(i,a,o),h?(h=1/h,i*=h,a*=h,o*=h):(i=0,a=0,o=0),s=f*o-d*a,l=d*i-c*o,u=c*a-f*i,h=Math.hypot(s,l,u),h?(h=1/h,s*=h,l*=h,u*=h):(s=0,l=0,u=0),t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=a,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=u,t[10]=d,t[11]=0,t[12]=-(i*p+a*g+o*v),t[13]=-(s*p+l*g+u*v),t[14]=-(c*p+f*g+d*v),t[15]=1,t)}function yke(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=r[0],l=r[1],u=r[2],c=i-n[0],f=a-n[1],d=o-n[2],h=c*c+f*f+d*d;h>0&&(h=1/Math.sqrt(h),c*=h,f*=h,d*=h);var p=l*d-u*f,g=u*c-s*d,v=s*f-l*c;return h=p*p+g*g+v*v,h>0&&(h=1/Math.sqrt(h),p*=h,g*=h,v*=h),t[0]=p,t[1]=g,t[2]=v,t[3]=0,t[4]=f*v-d*g,t[5]=d*p-c*v,t[6]=c*g-f*p,t[7]=0,t[8]=c,t[9]=f,t[10]=d,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function bke(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function xke(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function wke(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function oJ(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function _ke(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Ske(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function E6(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Eke(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],g=t[13],v=t[14],m=t[15],y=e[0],b=e[1],x=e[2],w=e[3],_=e[4],E=e[5],S=e[6],O=e[7],A=e[8],T=e[9],I=e[10],D=e[11],R=e[12],F=e[13],z=e[14],N=e[15];return Math.abs(n-y)<=sr*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-b)<=sr*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-x)<=sr*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-w)<=sr*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-_)<=sr*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(s-E)<=sr*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(l-S)<=sr*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-O)<=sr*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(c-A)<=sr*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(f-T)<=sr*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(d-I)<=sr*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(h-D)<=sr*Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(p-R)<=sr*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(g-F)<=sr*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(v-z)<=sr*Math.max(1,Math.abs(v),Math.abs(z))&&Math.abs(m-N)<=sr*Math.max(1,Math.abs(m),Math.abs(N))}var TI=oa,Oke=oJ;const kke=Object.freeze(Object.defineProperty({__proto__:null,add:wke,adjoint:uke,clone:kI,copy:Bh,create:wn,determinant:YK,equals:Eke,exactEquals:E6,frob:xke,fromQuat:AI,fromQuat2:dke,fromRotation:KK,fromRotationTranslation:eJ,fromRotationTranslationScale:hke,fromRotationTranslationScaleOrigin:Yg,fromScaling:zu,fromTranslation:Bl,fromValues:GK,fromXRotation:JK,fromYRotation:QK,fromZRotation:S6,frustum:pke,getRotation:Eb,getScaling:$h,getTranslation:Sb,identity:yc,invert:ms,lookAt:aJ,mul:TI,multiply:oa,multiplyScalar:_ke,multiplyScalarAndAdd:Ske,ortho:rJ,orthoNO:nJ,orthoZO:iJ,perspective:gke,perspectiveFromFieldOfView:mke,perspectiveNO:tJ,perspectiveZO:vke,rotate:cke,rotateX:XK,rotateY:ZK,rotateZ:fke,scale:UK,set:_6,str:bke,sub:Oke,subtract:oJ,targetTo:yke,translate:hh,transpose:HK},Symbol.toStringTag,{value:"Module"}));function Wt(){var t=new Zr(3);return Zr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Nl(t){var e=new Zr(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function $l(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function ln(t,e,n){var r=new Zr(3);return r[0]=t,r[1]=e,r[2]=n,r}function el(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function aa(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function ic(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function O6(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Ake(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Tke(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function Mke(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function Ob(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Cke(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function Ef(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function tl(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function k1(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],l=n[2];return t[0]=i*l-a*s,t[1]=a*o-r*l,t[2]=r*s-i*o,t}function k6(t,e,n,r){var i=e[0],a=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t}function Cr(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,t}function sJ(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t}function Pke(t,e,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=e[0],l=e[1],u=e[2],c=i*u-a*l,f=a*s-r*u,d=r*l-i*s,h=i*d-a*f,p=a*c-r*d,g=r*f-i*c,v=o*2;return c*=v,f*=v,d*=v,h*=2,p*=2,g*=2,t[0]=s+c+h,t[1]=l+f+p,t[2]=u+d+g,t}function Kp(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],s=e[2];return Math.abs(n-a)<=sr*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=sr*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=sr*Math.max(1,Math.abs(i),Math.abs(s))}var Dke=O6,z9=Cke,lJ=$l;(function(){var t=Wt();return function(e,n,r,i,a,o){var s,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,s=r;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}})();function nl(){var t=new Zr(4);return Zr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function _g(t,e,n,r){var i=new Zr(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function Ike(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Lke(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function Rke(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=a*o,t}function rl(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,t}(function(){var t=nl();return function(e,n,r,i,a,o){var s,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,s=r;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}})();function gi(){var t=new Zr(4);return Zr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Yu(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function ac(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],l=n[1],u=n[2],c=n[3];return t[0]=r*c+o*s+i*u-a*l,t[1]=i*c+o*l+a*s-r*u,t[2]=a*c+o*u+r*l-i*s,t[3]=o*c-r*s-i*l-a*u,t}function XS(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3],l=n[0],u=n[1],c=n[2],f=n[3],d,h,p,g,v;return h=i*l+a*u+o*c+s*f,h<0&&(h=-h,l=-l,u=-u,c=-c,f=-f),1-h>sr?(d=Math.acos(h),p=Math.sin(d),g=Math.sin((1-r)*d)/p,v=Math.sin(r*d)/p):(g=1-r,v=r),t[0]=g*i+v*l,t[1]=g*a+v*u,t[2]=g*o+v*c,t[3]=g*s+v*f,t}function ZS(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=a*s,t}function Nke(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[a*3+a]-e[o*3+o]+1),t[i]=.5*r,r=.5/r,t[3]=(e[a*3+o]-e[o*3+a])*r,t[a]=(e[a*3+i]+e[i*3+a])*r,t[o]=(e[o*3+i]+e[i*3+o])*r}return t}function Km(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var a=Math.sin(e),o=Math.cos(e),s=Math.sin(n),l=Math.cos(n),u=Math.sin(r),c=Math.cos(r);return t[0]=a*l*c-o*s*u,t[1]=o*s*c+a*l*u,t[2]=o*l*u-a*s*c,t[3]=o*l*c+a*s*u,t}var Fke=_g,Jm=Ike,j9=Lke,B9=ac,kb=Rke;(function(){var t=Wt(),e=ln(1,0,0),n=ln(0,1,0);return function(r,i,a){var o=tl(i,a);return o<-.999999?(k1(t,e,i),lJ(t)<1e-6&&k1(t,n,i),Ef(t,t),Yu(r,t,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(k1(t,i,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+o,kb(r,r))}})();(function(){var t=gi(),e=gi();return function(n,r,i,a,o,s){return XS(t,r,o,s),XS(e,i,a,s),XS(n,t,e,2*s*(1-s)),n}})();(function(){var t=mp();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],kb(e,Nke(e,t))}})();function MI(){var t=new Zr(2);return Zr!=Float32Array&&(t[0]=0,t[1]=0),t}function zke(t,e){return t[0]=e[0],t[1]=e[1],t}function jke(t,e,n){return t[0]=e,t[1]=n,t}function Bke(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function $ke(t,e){return t[0]*e[0]+t[1]*e[1]}function Vke(t,e){return t[0]===e[0]&&t[1]===e[1]}(function(){var t=MI();return function(e,n,r,i,a,o){var s,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,s=r;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}})();var bc=function(){return bc=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bc.apply(this,arguments)};function uJ(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function zt(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})}function qke(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function Ab(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var cJ={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function Wke(t,e,n){if(t[n].length>7){t[n].shift();for(var r=t[n],i=n;r.length;)e[n]="A",t.splice(i+=1,0,["C"].concat(r.splice(0,6)));t.splice(n,1)}}var Ug={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function fJ(t){return Array.isArray(t)&&t.every(function(e){var n=e[0].toLowerCase();return Ug[n]===e.length-1&&"achlmqstvz".includes(n)})}function dJ(t){return fJ(t)&&t.every(function(e){var n=e[0];return n===n.toUpperCase()})}function hJ(t){return dJ(t)&&t.every(function(e){var n=e[0];return"ACLMQZ".includes(n)})}function $9(t){for(var e=t.pathValue[t.segmentStart],n=e.toLowerCase(),r=t.data;r.length>=Ug[n]&&(n==="m"&&r.length>2?(t.segments.push([e].concat(r.splice(0,2))),n="l",e=e==="m"?"l":"L"):t.segments.push([e].concat(r.splice(0,Ug[n]))),!!Ug[n]););}function Gke(t){var e=t.index,n=t.pathValue,r=n.charCodeAt(e);if(r===48){t.param=0,t.index+=1;return}if(r===49){t.param=1,t.index+=1;return}t.err='[path-util]: invalid Arc flag "'.concat(n[e],'", expecting 0 or 1 at index ').concat(e)}function Hke(t){return t>=48&&t<=57||t===43||t===45||t===46}function Id(t){return t>=48&&t<=57}function Yke(t){var e=t.max,n=t.pathValue,r=t.index,i=r,a=!1,o=!1,s=!1,l=!1,u;if(i>=e){t.err="[path-util]: Invalid path value at index ".concat(i,', "pathValue" is missing param');return}if(u=n.charCodeAt(i),(u===43||u===45)&&(i+=1,u=n.charCodeAt(i)),!Id(u)&&u!==46){t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(n[i],'" is not a number');return}if(u!==46){if(a=u===48,i+=1,u=n.charCodeAt(i),a&&i<e&&u&&Id(u)){t.err="[path-util]: Invalid path value at index ".concat(r,', "').concat(n[r],'" illegal number');return}for(;i<e&&Id(n.charCodeAt(i));)i+=1,o=!0;u=n.charCodeAt(i)}if(u===46){for(l=!0,i+=1;Id(n.charCodeAt(i));)i+=1,s=!0;u=n.charCodeAt(i)}if(u===101||u===69){if(l&&!o&&!s){t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(n[i],'" invalid float exponent');return}if(i+=1,u=n.charCodeAt(i),(u===43||u===45)&&(i+=1),i<e&&Id(n.charCodeAt(i)))for(;i<e&&Id(n.charCodeAt(i));)i+=1;else{t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(n[i],'" invalid integer exponent');return}}t.index=i,t.param=+t.pathValue.slice(r,i)}function Uke(t){var e=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return t===10||t===13||t===8232||t===8233||t===32||t===9||t===11||t===12||t===160||t>=5760&&e.includes(t)}function A1(t){for(var e=t.pathValue,n=t.max;t.index<n&&Uke(e.charCodeAt(t.index));)t.index+=1}function Xke(t){switch(t|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function Zke(t){return(t|32)===97}function Kke(t){var e=t.max,n=t.pathValue,r=t.index,i=n.charCodeAt(r),a=Ug[n[r].toLowerCase()];if(t.segmentStart=r,!Xke(i)){t.err='[path-util]: Invalid path value "'.concat(n[r],'" is not a path command');return}if(t.index+=1,A1(t),t.data=[],!a){$9(t);return}for(;;){for(var o=a;o>0;o-=1){if(Zke(i)&&(o===3||o===4)?Gke(t):Yke(t),t.err.length)return;t.data.push(t.param),A1(t),t.index<e&&n.charCodeAt(t.index)===44&&(t.index+=1,A1(t))}if(t.index>=t.max||!Hke(n.charCodeAt(t.index)))break}$9(t)}var Jke=function(){function t(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return t}();function Qke(t){if(fJ(t))return[].concat(t);var e=new Jke(t);for(A1(e);e.index<e.max&&!e.err.length;)Kke(e);return e.err?e.err:e.segments}function eAe(t){if(dJ(t))return[].concat(t);var e=Qke(t),n=0,r=0,i=0,a=0;return e.map(function(o){var s=o.slice(1).map(Number),l=o[0],u=l.toUpperCase();if(l==="M")return n=s[0],r=s[1],i=n,a=r,["M",n,r];var c;if(l!==u)switch(u){case"A":c=[u,s[0],s[1],s[2],s[3],s[4],s[5]+n,s[6]+r];break;case"V":c=[u,s[0]+r];break;case"H":c=[u,s[0]+n];break;default:{var f=s.map(function(h,p){return h+(p%2?r:n)});c=[u].concat(f)}}else c=[u].concat(s);var d=c.length;switch(u){case"Z":n=i,r=a;break;case"H":n=c[1];break;case"V":r=c[1];break;default:n=c[d-2],r=c[d-1],u==="M"&&(i=n,a=r)}return c})}function tAe(t,e){var n=t[0],r=e.x1,i=e.y1,a=e.x2,o=e.y2,s=t.slice(1).map(Number),l=t;if("TQ".includes(n)||(e.qx=null,e.qy=null),n==="H")l=["L",t[1],i];else if(n==="V")l=["L",r,t[1]];else if(n==="S"){var u=r*2-a,c=i*2-o;e.x1=u,e.y1=c,l=["C",u,c].concat(s)}else if(n==="T"){var f=r*2-e.qx,d=i*2-e.qy;e.qx=f,e.qy=d,l=["Q",f,d].concat(s)}else if(n==="Q"){var h=s[0],p=s[1];e.qx=h,e.qy=p}return l}function Tb(t){if(hJ(t))return[].concat(t);for(var e=eAe(t),n=bc({},cJ),r=0;r<e.length;r+=1){e[r]=tAe(e[r],n);var i=e[r],a=i.length;n.x1=+i[a-2],n.y1=+i[a-1],n.x2=+i[a-4]||n.x1,n.y2=+i[a-3]||n.y1}return e}function nAe(t){return hJ(t)&&t.every(function(e){var n=e[0];return"MC".includes(n)})}function Qm(t,e,n){var r=t*Math.cos(n)-e*Math.sin(n),i=t*Math.sin(n)+e*Math.cos(n);return{x:r,y:i}}function CI(t,e,n,r,i,a,o,s,l,u){var c=t,f=e,d=n,h=r,p=s,g=l,v=Math.PI*120/180,m=Math.PI/180*(+i||0),y=[],b,x,w,_,E;if(u)x=u[0],w=u[1],_=u[2],E=u[3];else{b=Qm(c,f,-m),c=b.x,f=b.y,b=Qm(p,g,-m),p=b.x,g=b.y;var S=(c-p)/2,O=(f-g)/2,A=S*S/(d*d)+O*O/(h*h);A>1&&(A=Math.sqrt(A),d*=A,h*=A);var T=d*d,I=h*h,D=(a===o?-1:1)*Math.sqrt(Math.abs((T*I-T*O*O-I*S*S)/(T*O*O+I*S*S)));_=D*d*O/h+(c+p)/2,E=D*-h*S/d+(f+g)/2,x=Math.asin(((f-E)/h*Math.pow(10,9)>>0)/Math.pow(10,9)),w=Math.asin(((g-E)/h*Math.pow(10,9)>>0)/Math.pow(10,9)),x=c<_?Math.PI-x:x,w=p<_?Math.PI-w:w,x<0&&(x=Math.PI*2+x),w<0&&(w=Math.PI*2+w),o&&x>w&&(x-=Math.PI*2),!o&&w>x&&(w-=Math.PI*2)}var R=w-x;if(Math.abs(R)>v){var F=w,z=p,N=g;w=x+v*(o&&w>x?1:-1),p=_+d*Math.cos(w),g=E+h*Math.sin(w),y=CI(p,g,d,h,i,0,o,z,N,[w,F,_,E])}R=w-x;var L=Math.cos(x),B=Math.sin(x),$=Math.cos(w),G=Math.sin(w),W=Math.tan(R/4),U=4/3*d*W,Y=4/3*h*W,q=[c,f],K=[c+U*B,f-Y*L],J=[p+U*G,g-Y*$],Q=[p,g];if(K[0]=2*q[0]-K[0],K[1]=2*q[1]-K[1],u)return K.concat(J,Q,y);y=K.concat(J,Q,y);for(var se=[],de=0,ye=y.length;de<ye;de+=1)se[de]=de%2?Qm(y[de-1],y[de],m).y:Qm(y[de],y[de+1],m).x;return se}function rAe(t,e,n,r,i,a){var o=.3333333333333333,s=2/3;return[o*t+s*n,o*e+s*r,o*i+s*n,o*a+s*r,i,a]}function Lu(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return[r+(a-r)*n,i+(o-i)*n]}var V9=function(t,e,n,r){var i=.5,a=Lu([t,e],[n,r],i);return Ab(Ab([],a,!0),[n,r,n,r],!1)};function iAe(t,e){var n=t[0],r=t.slice(1).map(Number),i=r[0],a=r[1],o,s=e.x1,l=e.y1,u=e.x,c=e.y;switch("TQ".includes(n)||(e.qx=null,e.qy=null),n){case"M":return e.x=i,e.y=a,t;case"A":return o=[s,l].concat(r),["C"].concat(CI(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]));case"Q":return e.qx=i,e.qy=a,o=[s,l].concat(r),["C"].concat(rAe(o[0],o[1],o[2],o[3],o[4],o[5]));case"L":return["C"].concat(V9(s,l,i,a));case"Z":return s===u&&l===c?["C",s,l,u,c,u,c]:["C"].concat(V9(s,l,u,c))}return t}function A6(t,e){if(e===void 0&&(e=!1),nAe(t)){var n=[].concat(t);return e?[n,[]]:n}for(var r=Tb(t),i=bc({},cJ),a=[],o="",s=r.length,l,u,c=[],f=0;f<s;f+=1){r[f]&&(o=r[f][0]),a[f]=o;var d=iAe(r[f],i);r[f]=d,Wke(r,a,f),s=r.length,o==="Z"&&c.push(f),l=r[f],u=l.length,i.x1=+l[u-2],i.y1=+l[u-1],i.x2=+l[u-4]||i.x1,i.y2=+l[u-3]||i.y1}return e?[r,c]:r}function aAe(t){return t.map(function(e){return Array.isArray(e)?[].concat(e):e})}function oAe(t){var e=t.slice(1).map(function(n,r,i){return r?i[r-1].slice(-2).concat(n.slice(1)):t[0].slice(1).concat(n.slice(1))}).map(function(n){return n.map(function(r,i){return n[n.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(function(n){return["C"].concat(n.slice(2))}))}function Ca(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function T6(t,e,n,r,i){var a=Ca([t,e],[n,r]),o={x:0,y:0};if(typeof i=="number")if(i<=0)o={x:t,y:e};else if(i>=a)o={x:n,y:r};else{var s=Lu([t,e],[n,r],i/a),l=s[0],u=s[1];o={x:l,y:u}}return{length:a,point:o,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}}function q9(t,e){var n=t.x,r=t.y,i=e.x,a=e.y,o=n*i+r*a,s=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(a,2))),l=n*a-r*i<0?-1:1,u=l*Math.acos(o/s);return u}function sAe(t,e,n,r,i,a,o,s,l,u){var c=Math.abs,f=Math.sin,d=Math.cos,h=Math.sqrt,p=Math.PI,g=c(n),v=c(r),m=(i%360+360)%360,y=m*(p/180);if(t===s&&e===l)return{x:t,y:e};if(g===0||v===0)return T6(t,e,s,l,u).point;var b=(t-s)/2,x=(e-l)/2,w={x:d(y)*b+f(y)*x,y:-f(y)*b+d(y)*x},_=Math.pow(w.x,2)/Math.pow(g,2)+Math.pow(w.y,2)/Math.pow(v,2);_>1&&(g*=h(_),v*=h(_));var E=Math.pow(g,2)*Math.pow(v,2)-Math.pow(g,2)*Math.pow(w.y,2)-Math.pow(v,2)*Math.pow(w.x,2),S=Math.pow(g,2)*Math.pow(w.y,2)+Math.pow(v,2)*Math.pow(w.x,2),O=E/S;O=O<0?0:O;var A=(a!==o?1:-1)*h(O),T={x:A*(g*w.y/v),y:A*(-(v*w.x)/g)},I={x:d(y)*T.x-f(y)*T.y+(t+s)/2,y:f(y)*T.x+d(y)*T.y+(e+l)/2},D={x:(w.x-T.x)/g,y:(w.y-T.y)/v},R=q9({x:1,y:0},D),F={x:(-w.x-T.x)/g,y:(-w.y-T.y)/v},z=q9(D,F);!o&&z>0?z-=2*p:o&&z<0&&(z+=2*p),z%=2*p;var N=R+z*u,L=g*d(N),B=v*f(N),$={x:d(y)*L-f(y)*B+I.x,y:f(y)*L+d(y)*B+I.y};return $}function lAe(t,e,n,r,i,a,o,s,l,u,c){var f,d=c.bbox,h=d===void 0?!0:d,p=c.length,g=p===void 0?!0:p,v=c.sampleSize,m=v===void 0?30:v,y=typeof u=="number",b=t,x=e,w=0,_=[b,x,w],E=[b,x],S=0,O={x:0,y:0},A=[{x:b,y:x}];y&&u<=0&&(O={x:b,y:x});for(var T=0;T<=m;T+=1){if(S=T/m,f=sAe(t,e,n,r,i,a,o,s,l,S),b=f.x,x=f.y,h&&A.push({x:b,y:x}),g&&(w+=Ca(E,[b,x])),E=[b,x],y&&w>=u&&u>_[2]){var I=(w-u)/(w-_[2]);O={x:E[0]*(1-I)+_[0]*I,y:E[1]*(1-I)+_[1]*I}}_=[b,x,w]}return y&&u>=w&&(O={x:s,y:l}),{length:w,point:O,min:{x:Math.min.apply(null,A.map(function(D){return D.x})),y:Math.min.apply(null,A.map(function(D){return D.y}))},max:{x:Math.max.apply(null,A.map(function(D){return D.x})),y:Math.max.apply(null,A.map(function(D){return D.y}))}}}function uAe(t,e,n,r,i,a,o,s,l){var u=1-l;return{x:Math.pow(u,3)*t+3*Math.pow(u,2)*l*n+3*u*Math.pow(l,2)*i+Math.pow(l,3)*o,y:Math.pow(u,3)*e+3*Math.pow(u,2)*l*r+3*u*Math.pow(l,2)*a+Math.pow(l,3)*s}}function pJ(t,e,n,r,i,a,o,s,l,u){var c,f=u.bbox,d=f===void 0?!0:f,h=u.length,p=h===void 0?!0:h,g=u.sampleSize,v=g===void 0?10:g,m=typeof l=="number",y=t,b=e,x=0,w=[y,b,x],_=[y,b],E=0,S={x:0,y:0},O=[{x:y,y:b}];m&&l<=0&&(S={x:y,y:b});for(var A=0;A<=v;A+=1){if(E=A/v,c=uAe(t,e,n,r,i,a,o,s,E),y=c.x,b=c.y,d&&O.push({x:y,y:b}),p&&(x+=Ca(_,[y,b])),_=[y,b],m&&x>=l&&l>w[2]){var T=(x-l)/(x-w[2]);S={x:_[0]*(1-T)+w[0]*T,y:_[1]*(1-T)+w[1]*T}}w=[y,b,x]}return m&&l>=x&&(S={x:o,y:s}),{length:x,point:S,min:{x:Math.min.apply(null,O.map(function(I){return I.x})),y:Math.min.apply(null,O.map(function(I){return I.y}))},max:{x:Math.max.apply(null,O.map(function(I){return I.x})),y:Math.max.apply(null,O.map(function(I){return I.y}))}}}function cAe(t,e,n,r,i,a,o){var s=1-o;return{x:Math.pow(s,2)*t+2*s*o*n+Math.pow(o,2)*i,y:Math.pow(s,2)*e+2*s*o*r+Math.pow(o,2)*a}}function fAe(t,e,n,r,i,a,o,s){var l,u=s.bbox,c=u===void 0?!0:u,f=s.length,d=f===void 0?!0:f,h=s.sampleSize,p=h===void 0?10:h,g=typeof o=="number",v=t,m=e,y=0,b=[v,m,y],x=[v,m],w=0,_={x:0,y:0},E=[{x:v,y:m}];g&&o<=0&&(_={x:v,y:m});for(var S=0;S<=p;S+=1){if(w=S/p,l=cAe(t,e,n,r,i,a,w),v=l.x,m=l.y,c&&E.push({x:v,y:m}),d&&(y+=Ca(x,[v,m])),x=[v,m],g&&y>=o&&o>b[2]){var O=(y-o)/(y-b[2]);_={x:x[0]*(1-O)+b[0]*O,y:x[1]*(1-O)+b[1]*O}}b=[v,m,y]}return g&&o>=y&&(_={x:i,y:a}),{length:y,point:_,min:{x:Math.min.apply(null,E.map(function(A){return A.x})),y:Math.min.apply(null,E.map(function(A){return A.y}))},max:{x:Math.max.apply(null,E.map(function(A){return A.x})),y:Math.max.apply(null,E.map(function(A){return A.y}))}}}function gJ(t,e,n){for(var r,i,a,o,s,l,u=Tb(t),c=typeof e=="number",f,d=[],h,p=0,g=0,v=0,m=0,y,b=[],x=[],w=0,_={x:0,y:0},E=_,S=_,O=_,A=0,T=0,I=u.length;T<I;T+=1)y=u[T],h=y[0],f=h==="M",d=f?d:[p,g].concat(y.slice(1)),f?(v=y[1],m=y[2],_={x:v,y:m},E=_,w=0,c&&e<.001&&(O=_)):h==="L"?(r=T6(d[0],d[1],d[2],d[3],(e||0)-A),w=r.length,_=r.min,E=r.max,S=r.point):h==="A"?(i=lAe(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],(e||0)-A,n||{}),w=i.length,_=i.min,E=i.max,S=i.point):h==="C"?(a=pJ(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],(e||0)-A,n||{}),w=a.length,_=a.min,E=a.max,S=a.point):h==="Q"?(o=fAe(d[0],d[1],d[2],d[3],d[4],d[5],(e||0)-A,n||{}),w=o.length,_=o.min,E=o.max,S=o.point):h==="Z"&&(d=[p,g,v,m],s=T6(d[0],d[1],d[2],d[3],(e||0)-A),w=s.length,_=s.min,E=s.max,S=s.point),c&&A<e&&A+w>=e&&(O=S),x.push(E),b.push(_),A+=w,l=h!=="Z"?y.slice(-2):[v,m],p=l[0],g=l[1];return c&&e>=A&&(O={x:p,y:g}),{length:A,point:O,min:{x:Math.min.apply(null,b.map(function(D){return D.x})),y:Math.min.apply(null,b.map(function(D){return D.y}))},max:{x:Math.max.apply(null,x.map(function(D){return D.x})),y:Math.max.apply(null,x.map(function(D){return D.y}))}}}function dAe(t,e){return gJ(t,void 0,bc(bc({},e),{bbox:!1,length:!0})).length}function hAe(t){var e=t.length,n=e-1;return t.map(function(r,i){return t.map(function(a,o){var s=i+o,l;return o===0||t[s]&&t[s][0]==="M"?(l=t[s],["M"].concat(l.slice(-2))):(s>=e&&(s-=n),t[s])})})}function pAe(t,e){var n=t.length-1,r=[],i=0,a=0,o=hAe(t);return o.forEach(function(s,l){t.slice(1).forEach(function(u,c){a+=Ca(t[(l+c)%n].slice(-2),e[c%n].slice(-2))}),r[l]=a,a=0}),i=r.indexOf(Math.min.apply(null,r)),o[i]}function gAe(t,e,n,r,i,a,o,s){return 3*((s-e)*(n+i)-(o-t)*(r+a)+r*(t-i)-n*(e-a)+s*(i+t/3)-o*(a+e/3))/20}function vAe(t){var e=0,n=0,r=0;return A6(t).map(function(i){var a;switch(i[0]){case"M":return e=i[1],n=i[2],0;default:var o=i.slice(1),s=o[0],l=o[1],u=o[2],c=o[3],f=o[4],d=o[5];return r=gAe(e,n,s,l,u,c,f,d),a=i.slice(-2),e=a[0],n=a[1],r}}).reduce(function(i,a){return i+a},0)}function W9(t){return vAe(t)>=0}function mAe(t,e,n){return gJ(t,e,bc(bc({},n),{bbox:!1,length:!0})).point}function yAe(t,e){e===void 0&&(e=.5);var n=t.slice(0,2),r=t.slice(2,4),i=t.slice(4,6),a=t.slice(6,8),o=Lu(n,r,e),s=Lu(r,i,e),l=Lu(i,a,e),u=Lu(o,s,e),c=Lu(s,l,e),f=Lu(u,c,e);return[["C"].concat(o,u,f),["C"].concat(c,l,a)]}function G9(t){return t.map(function(e,n,r){var i=n&&r[n-1].slice(-2).concat(e.slice(1)),a=n?pJ(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,o;return n?o=a?yAe(i):[e,e]:o=[e],{s:e,ss:o,l:a}})}function vJ(t,e,n){var r=G9(t),i=G9(e),a=r.length,o=i.length,s=r.filter(function(v){return v.l}).length,l=i.filter(function(v){return v.l}).length,u=r.filter(function(v){return v.l}).reduce(function(v,m){var y=m.l;return v+y},0)/s||0,c=i.filter(function(v){return v.l}).reduce(function(v,m){var y=m.l;return v+y},0)/l||0,f=n||Math.max(a,o),d=[u,c],h=[f-a,f-o],p=0,g=[r,i].map(function(v,m){return v.l===f?v.map(function(y){return y.s}):v.map(function(y,b){return p=b&&h[m]&&y.l>=d[m],h[m]-=p?1:0,p?y.ss:[y.s]}).flat()});return g[0].length===g[1].length?g:vJ(g[0],g[1],f)}function M6(t){var e=document.createElement("div");e.innerHTML=t;var n=e.childNodes[0];return n&&e.contains(n)&&e.removeChild(n),n}function Ln(t,e){if(t!==null)return{type:"column",value:t,field:e}}function P0(t,e){const n=Ln(t,e);return Object.assign(Object.assign({},n),{inferred:!0})}function Mb(t,e){if(t!==null)return{type:"column",value:t,field:e,visual:!0}}function bAe(t,e){const n=Ln(t,e);return Object.assign(Object.assign({},n),{constant:!1})}function oc(t,e){const n=[];for(const r of t)n[r]=e;return n}function Qt(t,e){const n=t[e];if(!n)return[null,null];const{value:r,field:i=null}=n;return[r,i]}function Cb(t,...e){for(const n of e)if(typeof n=="string"){const[r,i]=Qt(t,n);if(r!==null)return[r,i]}else return[n,null];return[null,null]}function Lv(t){return t instanceof Date?!1:typeof t=="object"}const Rv=()=>(t,e)=>{const{encode:n}=e,{y1:r}=n;return r!==void 0?[t,e]:[t,me({},e,{encode:{y1:P0(oc(t,0))}})]};Rv.props={};function Mr(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xAe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Zl(t){let e,n,r;t.length!==2?(e=Mr,n=(s,l)=>Mr(t(s),l),r=(s,l)=>t(s)-l):(e=t===Mr||t===xAe?t:wAe,n=t,r=t);function i(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<0?u=f+1:c=f}while(u<c)}return u}function a(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function o(s,l,u=0,c=s.length){const f=i(s,l,u,c-1);return f>u&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:o,right:a}}function wAe(){return 0}function C6(t){return t===null?NaN:+t}function*_Ae(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const mJ=Zl(Mr),SAe=mJ.right,EAe=mJ.left,OAe=Zl(C6).center;function yJ(t,e){let n=0;for(let r of t)r!=null&&(r=+r)>=r&&++n;return n}function kAe(t,e){let n=0,r,i=0,a=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let s of t)(s=e(s,++o,t))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i))}if(n>1)return a/(n-1)}function bJ(t,e){const n=kAe(t,e);return n&&Math.sqrt(n)}function Kl(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class jf{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=e+a,s=Math.abs(e)<Math.abs(a)?e-(o-a):a-(o-e);s&&(n[r++]=s),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,i=e[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&e[n-1]<0||a>0&&e[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}let AAe=class extends Map{constructor(e,n=CAe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(H9(this,e))}has(e){return super.has(H9(this,e))}set(e,n){return super.set(TAe(this,e),n)}delete(e){return super.delete(MAe(this,e))}};function H9({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function TAe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function MAe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function CAe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function D0(t){return t}function Bn(t,...e){return b2(t,D0,D0,e)}function PI(t,...e){return b2(t,Array.from,D0,e)}function DI(t,e,...n){return b2(t,D0,e,n)}function II(t,e,...n){return b2(t,Array.from,e,n)}function b2(t,e,n,r){return function i(a,o){if(o>=r.length)return n(a);const s=new AAe,l=r[o++];let u=-1;for(const c of a){const f=l(c,++u,a),d=s.get(f);d?d.push(c):s.set(f,[c])}for(const[c,f]of s)s.set(c,i(f,o));return e(s)}(t,0)}function PAe(t,e){return Array.from(e,n=>t[n])}function bs(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,a)=>a);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,a)=>{for(const o of e){const s=I0(o[i],o[a]);if(s)return s}})):(n=t.map(n),r.sort((i,a)=>I0(n[i],n[a]))),PAe(t,r)}return t.sort(xJ(n))}function xJ(t=Mr){if(t===Mr)return I0;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function I0(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function DAe(t,e,n){return(e.length!==2?bs(DI(t,e,n),([r,i],[a,o])=>Mr(i,o)||Mr(r,a)):bs(Bn(t,n),([r,i],[a,o])=>e(i,o)||Mr(r,a))).map(([r])=>r)}var IAe=Array.prototype,LAe=IAe.slice;function KS(t){return()=>t}const RAe=Math.sqrt(50),NAe=Math.sqrt(10),FAe=Math.sqrt(2);function Pb(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=RAe?10:a>=NAe?5:a>=FAe?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/o,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*o,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=n&&n<2?Pb(t,e,n*2):[s,l,u]}function zAe(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?Pb(e,t,n):Pb(t,e,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)l[u]=(a-u)/-o;else for(let u=0;u<s;++u)l[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(i+u)/-o;else for(let u=0;u<s;++u)l[u]=(i+u)*o;return l}function P6(t,e,n){return e=+e,t=+t,n=+n,Pb(t,e,n)[2]}function jAe(t,e,n){let r;for(;;){const i=P6(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function BAe(t){return Math.max(1,Math.ceil(Math.log(yJ(t))/Math.LN2)+1)}function $Ae(){var t=D0,e=Kl,n=BAe;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,l,u=new Array(o);for(a=0;a<o;++a)u[a]=t(i[a],a,i);var c=e(u),f=c[0],d=c[1],h=n(u,f,d);if(!Array.isArray(h)){const b=d,x=+h;if(e===Kl&&([f,d]=jAe(f,d,x)),h=zAe(f,d,x),h[0]<=f&&(l=P6(f,d,x)),h[h.length-1]>=d)if(b>=d&&e===Kl){const w=P6(f,d,x);isFinite(w)&&(w>0?d=(Math.floor(d/w)+1)*w:w<0&&(d=(Math.ceil(d*-w)+1)/-w))}else h.pop()}for(var p=h.length,g=0,v=p;h[g]<=f;)++g;for(;h[v-1]>d;)--v;(g||v<p)&&(h=h.slice(g,v),p=v-g);var m=new Array(p+1),y;for(a=0;a<=p;++a)y=m[a]=[],y.x0=a>0?h[a-1]:f,y.x1=a<p?h[a]:d;if(isFinite(l)){if(l>0)for(a=0;a<o;++a)(s=u[a])!=null&&f<=s&&s<=d&&m[Math.min(p,Math.floor((s-f)/l))].push(i[a]);else if(l<0){for(a=0;a<o;++a)if((s=u[a])!=null&&f<=s&&s<=d){const b=Math.floor((f-s)*l);m[Math.min(p,b+(h[b]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=u[a])!=null&&f<=s&&s<=d&&m[SAe(h,s,0,p)].push(i[a]);return m}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:KS(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:KS([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:KS(Array.isArray(i)?LAe.call(i):i),r):n},r}function yn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function yp(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function fo(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Nv(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function LI(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?I0:xJ(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(e-u*f/l+d)),p=Math.min(r,Math.floor(e+(l-u)*f/l+d));LI(t,e,h,p,i)}const a=t[e];let o=n,s=r;for(Jp(t,n,e),i(t[r],a)>0&&Jp(t,n,r);o<s;){for(Jp(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[n],a)===0?Jp(t,n,s):(++s,Jp(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Jp(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function VAe(t,e=Mr){let n,r=!1;if(e.length===1){let i;for(const a of t){const o=e(a);(r?Mr(o,i)>0:Mr(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function x2(t,e,n){if(t=Float64Array.from(_Ae(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return fo(t);if(e>=1)return yn(t);var r,i=(r-1)*e,a=Math.floor(i),o=yn(LI(t,a).subarray(0,a+1)),s=fo(t.subarray(a+1));return o+(s-o)*(i-a)}}function qAe(t,e,n=C6){if(!isNaN(e=+e)){if(r=Float64Array.from(t,(s,l)=>C6(n(t[l],l,t))),e<=0)return Nv(r);if(e>=1)return yp(r);var r,i=Uint32Array.from(t,(s,l)=>l),a=r.length-1,o=Math.floor(a*e);return LI(i,o,0,a,(s,l)=>I0(r[s],r[l])),o=VAe(i.subarray(0,o+1),s=>r[s]),o>=0?o:-1}}function WAe(t,e,n){const r=yJ(t),i=bJ(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}function L0(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function RI(t,e){return x2(t,.5,e)}function GAe(t,e){return qAe(t,.5,e)}function*HAe(t){for(const e of t)yield*e}function wJ(t){return Array.from(HAe(t))}function rh(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Ro(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Vh(t,...e){return e.reduce((n,r)=>i=>n(r(i)),t)}function Db(t,e){return e-t?n=>(n-t)/(e-t):n=>.5}function YAe(t,e){const n=e<t?e:t,r=t>e?t:e;return i=>Math.min(Math.max(n,i),r)}function NI(t,e,n,r,i){let a=n||0,o=r||t.length;const s=i||(l=>l);for(;a<o;){const l=Math.floor((a+o)/2);s(t[l])>e?o=l:a=l+1}return a}const D6=Math.sqrt(50),I6=Math.sqrt(10),L6=Math.sqrt(2);function T1(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/10**i;return i>=0?(a>=D6?10:a>=I6?5:a>=L6?2:1)*10**i:-(10**-i)/(a>=D6?10:a>=I6?5:a>=L6?2:1)}function Y9(t,e,n){const r=Math.abs(e-t)/Math.max(0,n);let i=10**Math.floor(Math.log(r)/Math.LN10);const a=r/i;return a>=D6?i*=10:a>=I6?i*=5:a>=L6&&(i*=2),e<t?-i:i}const _J=(t,e,n=5)=>{const r=[t,e];let i=0,a=r.length-1,o=r[i],s=r[a],l;return s<o&&([o,s]=[s,o],[i,a]=[a,i]),l=T1(o,s,n),l>0?(o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l,l=T1(o,s,n)):l<0&&(o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l,l=T1(o,s,n)),l>0?(r[i]=Math.floor(o/l)*l,r[a]=Math.ceil(s/l)*l):l<0&&(r[i]=Math.ceil(o*l)/l,r[a]=Math.floor(s*l)/l),r},R0=1e3,N0=R0*60,F0=N0*60,Bf=F0*24,Xg=Bf*7,SJ=Bf*30,EJ=Bf*365;function ca(t,e,n,r){const i=(u,c)=>{const f=h=>r(h)%c===0;let d=c;for(;d&&!f(u);)n(u,-1),d-=1;return u},a=(u,c)=>{c&&i(u,c),e(u)},o=(u,c)=>{const f=new Date(+u);return a(f,c),f},s=(u,c)=>{const f=new Date(+u-1);return a(f,c),n(f,c),a(f),f};return{ceil:s,floor:o,range:(u,c,f,d)=>{const h=[],p=Math.floor(f),g=d?s(u,f):s(u);for(let v=g;v<c;n(v,p),a(v))h.push(new Date(+v));return h},duration:t}}const UAe=ca(1,t=>t,(t,e=1)=>{t.setTime(+t+e)},t=>t.getTime()),XAe=ca(R0,t=>{t.setMilliseconds(0)},(t,e=1)=>{t.setTime(+t+R0*e)},t=>t.getSeconds()),ZAe=ca(N0,t=>{t.setSeconds(0,0)},(t,e=1)=>{t.setTime(+t+N0*e)},t=>t.getMinutes()),KAe=ca(F0,t=>{t.setMinutes(0,0,0)},(t,e=1)=>{t.setTime(+t+F0*e)},t=>t.getHours()),JAe=ca(Bf,t=>{t.setHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+Bf*e)},t=>t.getDate()-1),OJ=ca(SJ,t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e=1)=>{const n=t.getMonth();t.setMonth(n+e)},t=>t.getMonth()),QAe=ca(Xg,t=>{t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)},(t,e=1)=>{t.setDate(t.getDate()+7*e)},t=>{const e=OJ.floor(t),n=new Date(+t);return Math.floor((+n-+e)/Xg)}),e3e=ca(EJ,t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e=1)=>{const n=t.getFullYear();t.setFullYear(n+e)},t=>t.getFullYear()),kJ={millisecond:UAe,second:XAe,minute:ZAe,hour:KAe,day:JAe,week:QAe,month:OJ,year:e3e},t3e=ca(1,t=>t,(t,e=1)=>{t.setTime(+t+e)},t=>t.getTime()),n3e=ca(R0,t=>{t.setUTCMilliseconds(0)},(t,e=1)=>{t.setTime(+t+R0*e)},t=>t.getUTCSeconds()),r3e=ca(N0,t=>{t.setUTCSeconds(0,0)},(t,e=1)=>{t.setTime(+t+N0*e)},t=>t.getUTCMinutes()),i3e=ca(F0,t=>{t.setUTCMinutes(0,0,0)},(t,e=1)=>{t.setTime(+t+F0*e)},t=>t.getUTCHours()),a3e=ca(Bf,t=>{t.setUTCHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+Bf*e)},t=>t.getUTCDate()-1),AJ=ca(SJ,t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e=1)=>{const n=t.getUTCMonth();t.setUTCMonth(n+e)},t=>t.getUTCMonth()),o3e=ca(Xg,t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+Xg*e)},t=>{const e=AJ.floor(t),n=new Date(+t);return Math.floor((+n-+e)/Xg)}),s3e=ca(EJ,t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e=1)=>{const n=t.getUTCFullYear();t.setUTCFullYear(n+e)},t=>t.getUTCFullYear()),TJ={millisecond:t3e,second:n3e,minute:r3e,hour:i3e,day:a3e,week:o3e,month:AJ,year:s3e};function l3e(t){const e=t?TJ:kJ,{year:n,month:r,week:i,day:a,hour:o,minute:s,second:l,millisecond:u}=e;return{tickIntervals:[[l,1],[l,5],[l,15],[l,30],[s,1],[s,5],[s,15],[s,30],[o,1],[o,3],[o,6],[o,12],[a,1],[a,2],[i,1],[r,1],[r,3],[n,1]],year:n,millisecond:u}}function MJ(t,e,n,r,i){const a=+t,o=+e,{tickIntervals:s,year:l,millisecond:u}=l3e(i),c=([v,m])=>v.duration*m,f=r?(o-a)/r:n||5,d=r||(o-a)/f,h=s.length,p=NI(s,d,0,h,c);let g;if(p===h){const v=Y9(a/l.duration,o/l.duration,f);g=[l,v]}else if(p){const v=d/c(s[p-1])<c(s[p])/d,[m,y]=v?s[p-1]:s[p],b=r?Math.ceil(r/m.duration):y;g=[m,b]}else{const v=Math.max(Y9(a,o,f),1);g=[u,v]}return g}const u3e=(t,e,n,r,i)=>{const a=t>e,o=a?e:t,s=a?t:e,[l,u]=MJ(o,s,n,r,i),c=[l.floor(o,u),l.ceil(s,u)];return a?c.reverse():c};function Ib(t){return!bt(t)&&!qOe(t)&&!Number.isNaN(t)}const CJ=t=>e=>-t(-e),FI=(t,e)=>{const n=Math.log(t),r=t===Math.E?Math.log:t===10?Math.log10:t===2?Math.log2:i=>Math.log(i)/n;return e?CJ(r):r},zI=(t,e)=>{const n=t===Math.E?Math.exp:r=>t**r;return e?CJ(n):n},c3e=(t,e,n,r)=>{const i=t<0,a=FI(r,i),o=zI(r,i),s=t>e,l=s?e:t,u=s?t:e,c=[o(Math.floor(a(l))),o(Math.ceil(a(u)))];return s?c.reverse():c},f3e=t=>e=>{const n=t(e);return je(n)?Math.round(n):n};function d3e(t,e){return n=>{n.prototype.rescale=function(){this.initRange(),this.nice();const[r]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r))},n.prototype.initRange=function(){const{interpolator:r}=this.options;this.options.range=t(r)},n.prototype.composeOutput=function(r,i){const{domain:a,interpolator:o,round:s}=this.getOptions(),l=e(a.map(r)),u=s?f3e(o):o;this.output=Vh(u,l,i,r)},n.prototype.invert=void 0}}var JS={exports:{}},QS,U9;function h3e(){return U9||(U9=1,QS={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),QS}var eE={exports:{}},tE,X9;function p3e(){return X9||(X9=1,tE=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}),tE}var Z9;function g3e(){if(Z9)return eE.exports;Z9=1;var t=p3e(),e=Array.prototype.concat,n=Array.prototype.slice,r=eE.exports=function(a){for(var o=[],s=0,l=a.length;s<l;s++){var u=a[s];t(u)?o=e.call(o,n.call(u)):o.push(u)}return o};return r.wrap=function(i){return function(){return i(r(arguments))}},eE.exports}var K9;function v3e(){if(K9)return JS.exports;K9=1;var t=h3e(),e=g3e(),n=Object.hasOwnProperty,r=Object.create(null);for(var i in t)n.call(t,i)&&(r[t[i]]=i);var a=JS.exports={to:{},get:{}};a.get=function(l){var u=l.substring(0,3).toLowerCase(),c,f;switch(u){case"hsl":c=a.get.hsl(l),f="hsl";break;case"hwb":c=a.get.hwb(l),f="hwb";break;default:c=a.get.rgb(l),f="rgb";break}return c?{model:f,value:c}:null},a.get.rgb=function(l){if(!l)return null;var u=/^#([a-f0-9]{3,4})$/i,c=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,f=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,d=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,h=/^(\w+)$/,p=[0,0,0,1],g,v,m;if(g=l.match(c)){for(m=g[2],g=g[1],v=0;v<3;v++){var y=v*2;p[v]=parseInt(g.slice(y,y+2),16)}m&&(p[3]=parseInt(m,16)/255)}else if(g=l.match(u)){for(g=g[1],m=g[3],v=0;v<3;v++)p[v]=parseInt(g[v]+g[v],16);m&&(p[3]=parseInt(m+m,16)/255)}else if(g=l.match(f)){for(v=0;v<3;v++)p[v]=parseInt(g[v+1],0);g[4]&&(g[5]?p[3]=parseFloat(g[4])*.01:p[3]=parseFloat(g[4]))}else if(g=l.match(d)){for(v=0;v<3;v++)p[v]=Math.round(parseFloat(g[v+1])*2.55);g[4]&&(g[5]?p[3]=parseFloat(g[4])*.01:p[3]=parseFloat(g[4]))}else return(g=l.match(h))?g[1]==="transparent"?[0,0,0,0]:n.call(t,g[1])?(p=t[g[1]],p[3]=1,p):null:null;for(v=0;v<3;v++)p[v]=o(p[v],0,255);return p[3]=o(p[3],0,1),p},a.get.hsl=function(l){if(!l)return null;var u=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,c=l.match(u);if(c){var f=parseFloat(c[4]),d=(parseFloat(c[1])%360+360)%360,h=o(parseFloat(c[2]),0,100),p=o(parseFloat(c[3]),0,100),g=o(isNaN(f)?1:f,0,1);return[d,h,p,g]}return null},a.get.hwb=function(l){if(!l)return null;var u=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,c=l.match(u);if(c){var f=parseFloat(c[4]),d=(parseFloat(c[1])%360+360)%360,h=o(parseFloat(c[2]),0,100),p=o(parseFloat(c[3]),0,100),g=o(isNaN(f)?1:f,0,1);return[d,h,p,g]}return null},a.to.hex=function(){var l=e(arguments);return"#"+s(l[0])+s(l[1])+s(l[2])+(l[3]<1?s(Math.round(l[3]*255)):"")},a.to.rgb=function(){var l=e(arguments);return l.length<4||l[3]===1?"rgb("+Math.round(l[0])+", "+Math.round(l[1])+", "+Math.round(l[2])+")":"rgba("+Math.round(l[0])+", "+Math.round(l[1])+", "+Math.round(l[2])+", "+l[3]+")"},a.to.rgb.percent=function(){var l=e(arguments),u=Math.round(l[0]/255*100),c=Math.round(l[1]/255*100),f=Math.round(l[2]/255*100);return l.length<4||l[3]===1?"rgb("+u+"%, "+c+"%, "+f+"%)":"rgba("+u+"%, "+c+"%, "+f+"%, "+l[3]+")"},a.to.hsl=function(){var l=e(arguments);return l.length<4||l[3]===1?"hsl("+l[0]+", "+l[1]+"%, "+l[2]+"%)":"hsla("+l[0]+", "+l[1]+"%, "+l[2]+"%, "+l[3]+")"},a.to.hwb=function(){var l=e(arguments),u="";return l.length>=4&&l[3]!==1&&(u=", "+l[3]),"hwb("+l[0]+", "+l[1]+"%, "+l[2]+"%"+u+")"},a.to.keyword=function(l){return r[l.slice(0,3)]};function o(l,u,c){return Math.min(Math.max(u,l),c)}function s(l){var u=Math.round(l).toString(16).toUpperCase();return u.length<2?"0"+u:u}return JS.exports}var m3e=v3e();const y3e=dp(m3e);function nE(t,e,n){let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function b3e(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100,i=t[3];if(n===0)return[r*255,r*255,r*255,i];const a=r<.5?r*(1+n):r+n-r*n,o=2*r-a,s=nE(o,a,e+1/3),l=nE(o,a,e),u=nE(o,a,e-1/3);return[s*255,l*255,u*255,i]}function J9(t){const e=y3e.get(t);if(!e)return null;const{model:n,value:r}=e;return n==="rgb"?r:n==="hsl"?b3e(r):null}const qh=(t,e)=>n=>t*(1-n)+e*n,x3e=(t,e)=>{const n=J9(t),r=J9(e);return n===null||r===null?n?()=>t:()=>e:i=>{const a=new Array(4);for(let c=0;c<4;c+=1){const f=n[c],d=r[c];a[c]=f*(1-i)+d*i}const[o,s,l,u]=a;return`rgba(${Math.round(o)}, ${Math.round(s)}, ${Math.round(l)}, ${u})`}},Fv=(t,e)=>typeof t=="number"&&typeof e=="number"?qh(t,e):typeof t=="string"&&typeof e=="string"?x3e(t,e):()=>t,w3e=(t,e)=>{const n=qh(t,e);return r=>Math.round(n(r))};function _3e(t,e){const{second:n,minute:r,hour:i,day:a,week:o,month:s,year:l}=e;return n.floor(t)<t?".SSS":r.floor(t)<t?":ss":i.floor(t)<t?"hh:mm":a.floor(t)<t?"hh A":s.floor(t)<t?o.floor(t)<t?"MMM DD":"ddd DD":l.floor(t)<t?"MMMM":"YYYY"}function Q9({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):n}function S3e({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function E3e({map:t,initKey:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function O3e(t){return typeof t=="object"?t.valueOf():t}class eF extends Map{constructor(e){if(super(),this.map=new Map,this.initKey=O3e,e!==null)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(Q9({map:this.map,initKey:this.initKey},e))}has(e){return super.has(Q9({map:this.map,initKey:this.initKey},e))}set(e,n){return super.set(S3e({map:this.map,initKey:this.initKey},e),n)}delete(e){return super.delete(E3e({map:this.map,initKey:this.initKey},e))}}class zv{constructor(e){this.options=me({},this.getDefaultOptions()),this.update(e)}getOptions(){return this.options}update(e={}){this.options=me({},this.options,e),this.rescale(e)}rescale(e){}}const w2=Symbol("defaultUnknown");function tF(t,e,n){for(let r=0;r<e.length;r+=1)t.has(e[r])||t.set(n(e[r]),r)}function nF(t){const{value:e,from:n,to:r,mapper:i,notFoundReturn:a}=t;let o=i.get(e);if(o===void 0){if(a!==w2)return a;o=n.push(e)-1,i.set(e,o)}return r[o%r.length]}function rF(t){return t instanceof Date?e=>`${e}`:typeof t=="object"?e=>JSON.stringify(e):e=>e}let PJ=class DJ extends zv{getDefaultOptions(){return{domain:[],range:[],unknown:w2}}constructor(e){super(e)}map(e){return this.domainIndexMap.size===0&&tF(this.domainIndexMap,this.getDomain(),this.domainKey),nF({value:this.domainKey(e),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(e){return this.rangeIndexMap.size===0&&tF(this.rangeIndexMap,this.getRange(),this.rangeKey),nF({value:this.rangeKey(e),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(e){const[n]=this.options.domain,[r]=this.options.range;if(this.domainKey=rF(n),this.rangeKey=rF(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!e||e.range)&&this.rangeIndexMap.clear(),(!e||e.domain||e.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new DJ(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:e,compare:n}=this.options;return this.sortedDomain=n?[...e].sort(n):e,this.sortedDomain}};function k3e(t){const e=Math.min(...t);return t.map(n=>n/e)}function A3e(t,e){const n=t.length,r=e-n;return r>0?[...t,...new Array(r).fill(1)]:r<0?t.slice(0,e):t}function T3e(t){return Math.round(t*1e12)/1e12}function M3e(t){const{domain:e,range:n,paddingOuter:r,paddingInner:i,flex:a,round:o,align:s}=t,l=e.length,u=A3e(a,l),[c,f]=n,d=f-c,h=2/l*r+1-1/l*i,p=d/h,g=p*i/l,v=p-l*g,m=k3e(u),y=m.reduce((I,D)=>I+D),b=v/y,x=new eF(e.map((I,D)=>{const R=m[D]*b;return[I,o?Math.floor(R):R]})),w=new eF(e.map((I,D)=>{const F=m[D]*b+g;return[I,o?Math.floor(F):F]})),_=Array.from(w.values()).reduce((I,D)=>I+D),S=(d-(_-_/l*i))*s,O=c+S;let A=o?Math.round(O):O;const T=new Array(l);for(let I=0;I<l;I+=1){T[I]=T3e(A);const D=e[I];A+=w.get(D)}return{valueBandWidth:x,valueStep:w,adjustedRange:T}}function C3e(t){var e;const{domain:n}=t,r=n.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((e=t.flex)===null||e===void 0)&&e.length))return M3e(t);const{range:a,paddingOuter:o,paddingInner:s,round:l,align:u}=t;let c,f,d=a[0];const p=a[1]-d,g=o*2,v=r-s;c=p/Math.max(1,g+v),l&&(c=Math.floor(c)),d+=(p-c*(r-s))*u,f=c*(1-s),l&&(d=Math.round(d),f=Math.round(f));const m=new Array(r).fill(0).map((y,b)=>d+b*c);return{valueStep:c,valueBandWidth:f,adjustedRange:m}}let Wh=class IJ extends PJ{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:w2,flex:[]}}constructor(e){super(e)}clone(){return new IJ(this.options)}getStep(e){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:e===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(e)}getBandWidth(e){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:e===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(e)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:e,paddingInner:n}=this.options;return e>0?e:n}getPaddingOuter(){const{padding:e,paddingOuter:n}=this.options;return e>0?e:n}rescale(){super.rescale();const{align:e,domain:n,range:r,round:i,flex:a}=this.options,{adjustedRange:o,valueBandWidth:s,valueStep:l}=C3e({align:e,range:r,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:n});this.valueStep=l,this.valueBandWidth=s,this.adjustedRange=o}};const $f=(t,e,n)=>{let r,i,a=t,o=e;if(a===o&&n>0)return[a];let s=T1(a,o,n);if(s===0||!Number.isFinite(s))return[];if(s>0){a=Math.ceil(a/s),o=Math.floor(o/s),i=new Array(r=Math.ceil(o-a+1));for(let l=0;l<r;l+=1)i[l]=(a+l)*s}else{s=-s,a=Math.ceil(a*s),o=Math.floor(o*s),i=new Array(r=Math.ceil(o-a+1));for(let l=0;l<r;l+=1)i[l]=(a+l)/s}return i};let jI=class LJ extends zv{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:$f}}map(e){const[n]=this.options.range;return n!==void 0?n:this.options.unknown}invert(e){const[n]=this.options.range;return e===n&&n!==void 0?this.options.domain:[]}getTicks(){const{tickMethod:e,domain:n,tickCount:r}=this.options,[i,a]=n;return!je(i)||!je(a)?[]:e(i,a,r)}clone(){return new LJ(this.options)}};function Qp(t){return Math.abs(t)<1e-14?t:parseFloat(t.toFixed(14))}const P3e=[1,5,2,2.5,4,3],iF=Number.EPSILON*100;function D3e(t,e){return(t%e+e)%e}function I3e(t){return Math.round(t*1e12)/1e12}function L3e(t,e,n,r,i,a){const o=_b(e),s=WK(e,t);let l=0;const u=D3e(r,a);return(u<iF||a-u<iF)&&r<=0&&i>=0&&(l=1),1-s/(o-1)-n+l}function R3e(t,e,n){const r=_b(e);return 1-WK(e,t)/(r-1)-n+1}function N3e(t,e,n,r,i,a){const o=(t-1)/(a-i),s=(e-1)/(Math.max(a,r)-Math.min(n,i));return 2-Math.max(o/s,s/o)}function F3e(t,e){return t>=e?2-(t-1)/(e-1):1}function z3e(t,e,n,r){const i=e-t;return 1-.5*((e-r)**2+(t-n)**2)/(.1*i)**2}function j3e(t,e,n){const r=e-t;return n>r?1-((n-r)/2)**2/(.1*r)**2:1}function B3e(){return 1}const BI=(t,e,n=5,r=!0,i=P3e,a=[.25,.2,.5,.05])=>{const o=n<0?0:Math.round(n);if(Number.isNaN(t)||Number.isNaN(e)||typeof t!="number"||typeof e!="number"||!o)return[];if(e-t<1e-15||o===1)return[t];const s={score:-2,lmin:0,lmax:0,lstep:0};let l=1;for(;l<1/0;){for(let p=0;p<i.length;p+=1){const g=i[p],v=R3e(g,i,l);if(a[0]*v+a[1]+a[2]+a[3]<s.score){l=1/0;break}let m=2;for(;m<1/0;){const y=F3e(m,o);if(a[0]*v+a[1]+a[2]*y+a[3]<s.score)break;const b=(e-t)/(m+1)/l/g;let x=Math.ceil(Math.log10(b));for(;x<1/0;){const w=l*g*10**x,_=j3e(t,e,w*(m-1));if(a[0]*v+a[1]*_+a[2]*y+a[3]<s.score)break;const E=Math.floor(e/w)*l-(m-1)*l,S=Math.ceil(t/w)*l;if(E<=S){const O=S-E;for(let A=0;A<=O;A+=1){const I=(E+A)*(w/l),D=I+w*(m-1),R=w,F=L3e(g,i,l,I,D,R),z=z3e(t,e,I,D),N=N3e(m,o,t,e,I,D),L=B3e(),B=a[0]*F+a[1]*z+a[2]*N+a[3]*L;B>s.score&&(!r||I<=t&&D>=e)&&(s.lmin=I,s.lmax=D,s.lstep=R,s.score=B)}}x+=1}m+=1}}l+=1}const u=Qp(s.lmax),c=Qp(s.lmin),f=Qp(s.lstep),d=Math.floor(I3e((u-c)/f))+1,h=new Array(d);h[0]=Qp(c);for(let p=1;p<d;p+=1)h[p]=Qp(h[p-1]+f);return h};let RJ=class NJ extends zv{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:BI}}map(e){return Ib(e)?e:this.options.unknown}invert(e){return this.map(e)}clone(){return new NJ(this.options)}getTicks(){const{domain:e,tickCount:n,tickMethod:r}=this.options,[i,a]=e;return!je(i)||!je(a)?[]:r(i,a,n)}};const $3e=(t,e,n)=>{const[r,i]=t,[a,o]=e;let s,l;return r<i?(s=Db(r,i),l=n(a,o)):(s=Db(i,r),l=n(o,a)),Vh(l,s)},V3e=(t,e,n)=>{const r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=t[0]>t[r],s=o?[...t].reverse():t,l=o?[...e].reverse():e;for(let u=0;u<r;u+=1)i[u]=Db(s[u],s[u+1]),a[u]=n(l[u],l[u+1]);return u=>{const c=NI(t,u,1,r)-1,f=i[c],d=a[c];return Vh(d,f)(u)}},aF=(t,e,n,r)=>(Math.min(t.length,e.length)>2?V3e:$3e)(t,e,r?w3e:n);let _2=class extends zv{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:qh,tickCount:5}}map(e){return Ib(e)?this.output(e):this.options.unknown}invert(e){return Ib(e)?this.input(e):this.options.unknown}nice(){if(!this.options.nice)return;const[e,n,r,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(e,n,r,...i)}getTicks(){const{tickMethod:e}=this.options,[n,r,i,...a]=this.getTickMethodOptions();return e(n,r,i,...a)}getTickMethodOptions(){const{domain:e,tickCount:n}=this.options,r=e[0],i=e[e.length-1];return[r,i,n]}chooseNice(){return _J}rescale(){this.nice();const[e,n]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,n,this.chooseClamp(n))}chooseClamp(e){const{clamp:n,range:r}=this.options,i=this.options.domain.map(e),a=Math.min(i.length,r.length);return n?YAe(i[0],i[a-1]):zf}composeOutput(e,n){const{domain:r,range:i,round:a,interpolate:o}=this.options,s=aF(r.map(e),i,o,a);this.output=Vh(s,n,e)}composeInput(e,n,r){const{domain:i,range:a}=this.options,o=aF(a,i.map(e),qh);this.input=Vh(n,r,o)}},Gn=class FJ extends _2{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:Fv,tickMethod:$f,tickCount:5}}chooseTransforms(){return[zf,zf]}clone(){return new FJ(this.options)}},zJ=class jJ extends Wh{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:w2,paddingInner:1,paddingOuter:0}}constructor(e){super(e)}getPaddingInner(){return 1}clone(){return new jJ(this.options)}update(e){super.update(e)}getPaddingOuter(){return this.options.padding}};const q3e=t=>e=>e<0?-((-e)**t):e**t,W3e=t=>e=>e<0?-((-e)**(1/t)):e**(1/t),G3e=t=>t<0?-Math.sqrt(-t):Math.sqrt(t);let BJ=class $J extends _2{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:Fv,tickMethod:$f,tickCount:5}}constructor(e){super(e)}chooseTransforms(){const{exponent:e}=this.options;if(e===1)return[zf,zf];const n=e===.5?G3e:q3e(e),r=W3e(e);return[n,r]}clone(){return new $J(this.options)}},H3e=class VJ extends BJ{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Fv,tickMethod:$f,tickCount:5,exponent:.5}}constructor(e){super(e)}update(e){super.update(e)}clone(){return new VJ(this.options)}},S2=class qJ extends zv{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(e){super(e)}map(e){if(!Ib(e))return this.options.unknown;const n=NI(this.thresholds,e,0,this.n);return this.options.range[n]}invert(e){const{range:n}=this.options,r=n.indexOf(e),i=this.thresholds;return[i[r-1],i[r]]}clone(){return new qJ(this.options)}rescale(){const{domain:e,range:n}=this.options;this.n=Math.min(e.length,n.length-1),this.thresholds=e}};const Y3e=(t,e,n,r=10)=>{const i=t<0,a=zI(r,i),o=FI(r,i),s=e<t,l=s?e:t,u=s?t:e;let c=o(l),f=o(u),d=[];if(!(r%1)&&f-c<n){if(c=Math.floor(c),f=Math.ceil(f),i)for(;c<=f;c+=1){const h=a(c);for(let p=r-1;p>=1;p-=1){const g=h*p;if(g>u)break;g>=l&&d.push(g)}}else for(;c<=f;c+=1){const h=a(c);for(let p=1;p<r;p+=1){const g=h*p;if(g>u)break;g>=l&&d.push(g)}}d.length*2<n&&(d=$f(l,u,n))}else{const h=n===-1?f-c:Math.min(f-c,n);d=$f(c,f,h).map(a)}return s?d.reverse():d};let U3e=class WJ extends _2{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:Fv,tickMethod:Y3e,tickCount:5}}chooseNice(){return c3e}getTickMethodOptions(){const{domain:e,tickCount:n,base:r}=this.options,i=e[0],a=e[e.length-1];return[i,a,n,r]}chooseTransforms(){const{base:e,domain:n}=this.options,r=n[0]<0;return[FI(e,r),zI(e,r)]}clone(){return new WJ(this.options)}},GJ=class HJ extends S2{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:BI}}constructor(e){super(e)}nice(){const{nice:e}=this.options;if(e){const[n,r,i]=this.getTickMethodOptions();this.options.domain=_J(n,r,i)}}getTicks(){const{tickMethod:e}=this.options,[n,r,i]=this.getTickMethodOptions();return e(n,r,i)}getTickMethodOptions(){const{domain:e,tickCount:n}=this.options,r=e[0],i=e[e.length-1];return[r,i,n]}rescale(){this.nice();const{range:e,domain:n}=this.options,[r,i]=n;this.n=e.length-1,this.thresholds=new Array(this.n);for(let a=0;a<this.n;a+=1)this.thresholds[a]=((a+1)*i-(a-this.n)*r)/(this.n+1)}invert(e){const[n,r]=super.invert(e),[i,a]=this.options.domain;return n===void 0&&r===void 0?[n,r]:[n||i,r||a]}getThresholds(){return this.thresholds}clone(){return new HJ(this.options)}};function X3e(t,e){const n=t.length;if(!n)return;if(n<2)return t[n-1];const r=(n-1)*e,i=Math.floor(r),a=t[i],o=t[i+1];return a+(o-a)*(r-i)}function Z3e(t,e,n=!1){const r=t;n||r.sort((a,o)=>a-o);const i=[];for(let a=1;a<e;a+=1)i.push(X3e(r,a/e));return i}let YJ=class UJ extends S2{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:BI}}constructor(e){super(e)}rescale(){const{domain:e,range:n}=this.options;this.n=n.length-1,this.thresholds=Z3e(e,this.n+1,!1)}invert(e){const[n,r]=super.invert(e),{domain:i}=this.options,a=i[0],o=i[i.length-1];return n===void 0&&r===void 0?[n,r]:[n||a,r||o]}getThresholds(){return this.thresholds}clone(){return new UJ(this.options)}getTicks(){const{tickCount:e,domain:n,tickMethod:r}=this.options,i=n.length-1,a=n[0],o=n[i];return r(a,o,e)}};var K3e=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,J3e=/\[([^]*?)\]/gm;function XJ(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}function R6(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var a=i[r];for(var o in a)t[o]=a[o]}return t}var ZJ=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],KJ=["January","February","March","April","May","June","July","August","September","October","November","December"],Q3e=XJ(KJ,3),eTe=XJ(ZJ,3),tTe={dayNamesShort:eTe,dayNames:ZJ,monthNamesShort:Q3e,monthNames:KJ,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!==10?1:0)*t%10]}},nTe=R6({},tTe),Sa=function(t,e){for(e===void 0&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},rTe={D:function(t){return String(t.getDate())},DD:function(t){return Sa(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return Sa(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return Sa(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return Sa(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return Sa(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return Sa(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return Sa(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return Sa(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return Sa(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return Sa(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return Sa(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+Sa(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+Sa(Math.floor(Math.abs(e)/60),2)+":"+Sa(Math.abs(e)%60,2)}},oF={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},iTe=function(t,e,n){if(e===void 0&&(e=oF.default),n===void 0&&(n={}),typeof t=="number"&&(t=new Date(t)),Object.prototype.toString.call(t)!=="[object Date]"||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");e=oF[e]||e;var r=[];e=e.replace(J3e,function(a,o){return r.push(o),"@@@"});var i=R6(R6({},nTe),n);return e=e.replace(K3e,function(a){return rTe[a](t,i)}),e.replace(/@@@/g,function(){return r.shift()})};const aTe=(t,e,n,r,i)=>{const a=t>e,o=a?e:t,s=a?t:e,[l,u]=MJ(o,s,n,r,i),c=l.range(o,new Date(+s+1),u,!0);return a?c.reverse():c};function oTe(t){const e=t.getTimezoneOffset(),n=new Date(t);return n.setMinutes(n.getMinutes()+e,n.getSeconds(),n.getMilliseconds()),n}let sTe=class JJ extends _2{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:aTe,interpolate:qh,mask:void 0,utc:!1}}chooseTransforms(){return[r=>+r,r=>new Date(r)]}chooseNice(){return u3e}getTickMethodOptions(){const{domain:e,tickCount:n,tickInterval:r,utc:i}=this.options,a=e[0],o=e[e.length-1];return[a,o,n,r,i]}getFormatter(){const{mask:e,utc:n}=this.options,r=n?TJ:kJ,i=n?oTe:zf;return a=>iTe(i(a),e||_3e(a,r))}clone(){return new JJ(this.options)}};var lTe=function(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},N6;function uTe(t){return[t(0),t(1)]}const cTe=t=>{const[e,n]=t;return Vh(qh(0,1),Db(e,n))};let F6=N6=class extends Gn{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:zf,tickMethod:$f,tickCount:5}}constructor(e){super(e)}clone(){return new N6(this.options)}};F6=N6=lTe([d3e(uTe,cTe)],F6);var fTe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};function dTe(t){var e;let n=t;for(;n;){if(((e=n.attributes)===null||e===void 0?void 0:e.class)==="view")return n;n=n.parentNode}return null}function QJ(t,e){const n=e??dTe(t).__data__,r=t.__data__,{markKey:i,index:a,seriesIndex:o}=r,{markState:s}=n,l=Array.from(s.keys()).find(u=>u.key===i);if(l)return o?o.map(u=>l.data[u]):l.data[a]}function hTe(t,e){const{color:n,series:r,facet:i=!1}=t,{color:a,series:o}=e,s=l=>l&&l.invert&&!(l instanceof Wh)&&!(l instanceof jI);if(s(r))return r.clone().invert(o);if(o&&r instanceof Wh&&r.invert(o)!==a&&!i)return r.invert(o);if(s(n)){const l=n.invert(a);return Array.isArray(l)?null:l}return null}function Vf(t){return t}function $I(t){return t.reduce((e,n)=>(r,...i)=>n(e(r,...i),...i),Vf)}function pTe(t){return t.reduce((e,n)=>r=>fTe(this,void 0,void 0,function*(){const i=yield e(r);return n(i)}),Vf)}function VI(t){return t.replace(/( |^)[a-z]/g,e=>e.toUpperCase())}function Gh(t=""){throw new Error(t)}function qI(t,e){const{attributes:n}=e,r=new Set(["id","className"]);for(const[i,a]of Object.entries(n))r.has(i)||t.attr(i,a)}function $n(t){return t!=null&&!Number.isNaN(t)}function gTe(t){const e=new Map;return n=>{if(e.has(n))return e.get(n);const r=t(n);return e.set(n,r),r}}function vTe(t,e){const{transform:n}=t.style,i=(a=>a==="none"||a===void 0)(n)?"":n;t.style.transform=`${i} ${e}`.trimStart()}function Fe(t,e){return eQ(t,e)||{}}function eQ(t,e){const n=Object.entries(t||{}).filter(([r])=>r.startsWith(e)).map(([r,i])=>[OI(r.replace(e,"").trim()),i]).filter(([r])=>!!r);return n.length===0?null:Object.fromEntries(n)}function mTe(t,e){return Object.fromEntries(Object.entries(t).filter(([n])=>e.find(r=>n.startsWith(r))))}function rE(t,...e){return Object.fromEntries(Object.entries(t).filter(([n])=>e.every(r=>!n.startsWith(r))))}function sF(t,e){if(t===void 0)return null;if(typeof t=="number")return t;const n=+t.replace("%","");return Number.isNaN(n)?null:n/100*e}function Hh(t){return typeof t=="object"&&!(t instanceof Date)&&t!==null&&!Array.isArray(t)}function su(t){return t===null||t===!1}function tQ(t,e,n=5,r=0){if(!(r>=n)){for(const i of Object.keys(e)){const a=e[i];!au(a)||!au(t[i])?t[i]=a:tQ(t[i],a,n,r+1)}return t}}function pl(t,e){return Object.entries(t).reduce((n,[r,i])=>(n[r]=e(i,r,t),n),{})}function id(t){return t.map((e,n)=>n)}function yTe(t){return t[0]}function nQ(t){return t[t.length-1]}function bTe(t){return Array.from(new Set(t))}function rQ(t,e){const n=[[],[]];return t.forEach(r=>{n[e(r)?0:1].push(r)}),n}function iQ(t,e=t.length){if(e===1)return t.map(r=>[r]);const n=[];for(let r=0;r<t.length;r++){const i=t.slice(r+1);iQ(i,e-1).forEach(o=>{n.push([t[r],...o])})}return n}function xTe(t){if(t.length===1)return[t];const e=[];for(let n=1;n<=t.length;n++)e.push(...iQ(t,n));return e}function Cc(t,e,n){const{encode:r}=n;if(t===null)return[e];const i=wTe(t).map(o=>{var s;return[o,(s=Qt(r,o))===null||s===void 0?void 0:s[0]]}).filter(([,o])=>$n(o)),a=o=>i.map(([,s])=>s[o]).join("-");return Array.from(Bn(e,a).values())}function aQ(t){return Array.isArray(t)?ETe(t):typeof t=="function"?STe(t):t==="series"?_Te:t==="value"?OTe:t==="sum"?kTe:t==="maxIndex"?ATe:null}function oQ(t,e){for(const n of t)n.sort(e)}function sQ(t,e){return(e==null?void 0:e.domain)||Array.from(new Set(t))}function wTe(t){return Array.isArray(t)?t:[t]}function _Te(t,e,n){return jv(r=>n[r])}function STe(t){return(e,n,r)=>jv(i=>t(e[i]))}function ETe(t){return(e,n,r)=>(i,a)=>t.reduce((o,s)=>o!==0?o:Mr(e[i][s],e[a][s]),0)}function OTe(t,e,n){return jv(r=>e[r])}function kTe(t,e,n){const r=id(t),i=Array.from(Bn(r,o=>n[+o]).entries()),a=new Map(i.map(([o,s])=>[o,s.reduce((l,u)=>l+ +e[u])]));return jv(o=>a.get(n[o]))}function ATe(t,e,n){const r=id(t),i=Array.from(Bn(r,o=>n[+o]).entries()),a=new Map(i.map(([o,s])=>[o,yp(s,l=>e[l])]));return jv(o=>a.get(n[o]))}function jv(t){return(e,n)=>Mr(t(e),t(n))}const lQ=(t={})=>{const{groupBy:e="x",orderBy:n=null,reverse:r=!1,y:i="y",y1:a="y1",series:o=!0}=t;return(s,l)=>{var u;const{data:c,encode:f,style:d={}}=l,[h,p]=Qt(f,"y"),[g,v]=Qt(f,"y1"),[m]=o?Cb(f,"series","color"):Qt(f,"color"),y=Cc(e,s,l),x=((u=aQ(n))!==null&&u!==void 0?u:()=>null)(c,h,m);x&&oQ(y,x);const w=new Array(s.length),_=new Array(s.length),E=new Array(s.length),S=[],O=[];for(const F of y){r&&F.reverse();const z=g?+g[F[0]]:0,N=[],L=[];for(const q of F){const K=E[q]=+h[q]-z;K<0?L.push(q):K>=0&&N.push(q)}const B=N.length>0?N:L,$=L.length>0?L:N;let G=N.length-1,W=0;for(;G>0&&h[B[G]]===0;)G--;for(;W<$.length-1&&h[$[W]]===0;)W++;S.push(B[G]),O.push($[W]);let U=z;for(const q of L.reverse()){const K=E[q];U=w[q]=(_[q]=U)+K}let Y=z;for(const q of N){const K=E[q];K>0?Y=w[q]=(_[q]=Y)+K:w[q]=_[q]=Y}}const A=new Set(S),T=new Set(O),I=i==="y"?w:_,D=a==="y"?w:_;let R;return l.type==="point"?R={y0:P0(h,p),y:Ln(I,p)}:R={y0:P0(h,p),y:Ln(I,p),y1:Ln(D,v)},[s,me({},l,{encode:Object.assign({},R),style:Object.assign({first:(F,z)=>A.has(z),last:(F,z)=>T.has(z)},d)})]}};lQ.props={};function eg(t){return Math.abs(t)>10?String(t):t.toString().padStart(2,"0")}function TTe(t){const e=t.getFullYear(),n=eg(t.getMonth()+1),r=eg(t.getDate()),i=`${e}-${n}-${r}`,a=t.getHours(),o=t.getMinutes(),s=t.getSeconds();return a||o||s?`${i} ${eg(a)}:${eg(o)}:${eg(s)}`:i}const E2=(t={})=>{const{channel:e="x"}=t;return(n,r)=>{const{encode:i}=r,{tooltip:a}=r;if(su(a))return[n,r];const{title:o}=a;if(o!==void 0)return[n,r];const s=Object.keys(i).filter(u=>u.startsWith(e)).filter(u=>!i[u].inferred).map(u=>Qt(i,u)).filter(([u])=>u).map(u=>u[0]);if(s.length===0)return[n,r];const l=[];for(const u of n)l[u]={value:s.map(c=>c[u]instanceof Date?TTe(c[u]):c[u]).join(", ")};return[n,me({},r,{tooltip:{title:l}})]}};E2.props={};const ad=()=>(t,e)=>{const{encode:n}=e,{x:r}=n;return r!==void 0?[t,e]:[t,me({},e,{encode:{x:P0(oc(t,0))},scale:{x:{guide:null}}})]};ad.props={};const O2=()=>(t,e)=>{const{encode:n}=e,{y:r}=n;return r!==void 0?[t,e]:[t,me({},e,{encode:{y:P0(oc(t,0))},scale:{y:{guide:null}}})]};O2.props={};const uQ=()=>(t,e)=>{const{encode:n}=e,{size:r}=n;return r!==void 0?[t,e]:[t,me({},e,{encode:{size:Mb(oc(t,3))}})]};uQ.props={};var MTe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const cQ=()=>(t,e)=>{const{encode:n}=e,{key:r}=n,i=MTe(n,["key"]);if(r!==void 0)return[t,e];const a=Object.values(i).map(({value:s})=>s),o=t.map(s=>a.filter(Array.isArray).map(l=>l[s]).join("-"));return[t,me({},e,{encode:{key:Ln(o)}})]};cQ.props={};const WI=()=>(t,e)=>{const{encode:n}=e,{series:r,color:i}=n;if(r!==void 0||i===void 0)return[t,e];const[a,o]=Qt(n,"color");return[t,me({},e,{encode:{series:Ln(a,o)}})]};WI.props={};const fQ=()=>(t,e)=>{const{data:n}=e;return!Array.isArray(n)||n.some(Lv)?[t,e]:[t,me({},e,{encode:{y:Ln(n)}})]};fQ.props={};const dQ=()=>(t,e)=>{const{data:n}=e;return!Array.isArray(n)||n.some(Lv)?[t,e]:[t,me({},e,{encode:{x:Ln(n)}})]};dQ.props={};const hQ=()=>(t,e)=>{const{encode:n}=e,{y1:r}=n;if(r)return[t,e];const[i]=Qt(n,"y");return[t,me({},e,{encode:{y1:Ln([...i])}})]};hQ.props={};const pQ=()=>(t,e)=>{const{encode:n}=e,{x1:r}=n;if(r)return[t,e];const[i]=Qt(n,"x");return[t,me({},e,{encode:{x1:Ln([...i])}})]};pQ.props={};const gQ=()=>(t,e)=>{const{data:n}=e;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(Lv))){const r=(i,a)=>Array.isArray(i[0])?i.map(o=>o[a]):[i[a]];return[t,me({},e,{encode:{x:Ln(r(n,0)),x1:Ln(r(n,1))}})]}return[t,e]};gQ.props={};const vQ=()=>(t,e)=>{const{data:n}=e;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(Lv))){const r=(i,a)=>Array.isArray(i[0])?i.map(o=>o[a]):[i[a]];return[t,me({},e,{encode:{y:Ln(r(n,0)),y1:Ln(r(n,1))}})]}return[t,e]};vQ.props={};const k2=t=>{const{channel:e}=t;return(n,r)=>{const{encode:i,tooltip:a}=r;if(su(a))return[n,r];const{items:o=[]}=a;if(!o||o.length>0)return[n,r];const l=(Array.isArray(e)?e:[e]).flatMap(u=>Object.keys(i).filter(c=>c.startsWith(u)).map(c=>{const{field:f,value:d,inferred:h=!1,aggregate:p}=i[c];return h?null:p&&d?{channel:c}:f?{field:f}:d?{channel:c}:null}).filter(c=>c!==null));return[n,me({},r,{tooltip:{items:l}})]}};k2.props={};const GI=()=>(t,e)=>[t,me({scale:{x:{padding:0},y:{padding:0}}},e)];GI.props={};var lF=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const A2=()=>(t,e)=>{const{data:n,style:r={}}=e,i=lF(e,["data","style"]),{x:a,y:o}=r,s=lF(r,["x","y"]);if(a==null||o==null)return[t,e];const l=a||0,u=o||0;return[[0],me({},i,{data:[0],cartesian:!0,encode:{x:Ln([l]),y:Ln([u])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:s})]};A2.props={};const mQ=()=>(t,e)=>{const{style:n={}}=e;return[t,me({},e,{style:Object.assign(Object.assign({},n),Object.fromEntries(Object.entries(n).filter(([,r])=>typeof r=="function").map(([r,i])=>[r,()=>i])))})]};mQ.props={};const T2=()=>(t,e)=>{const{data:n}=e;if(!Array.isArray(n)||n.some(Lv))return[t,e];const r=Array.isArray(n[0])?n:[n],i=r.map(o=>o[0]),a=r.map(o=>o[1]);return[t,me({},e,{encode:{x:Ln(i),y:Ln(a)}})]};T2.props={};const yQ=()=>(t,e)=>{const{style:n={},encode:r}=e,{series:i}=r,{gradient:a}=n;return!a||i?[t,e]:[t,me({},e,{encode:{series:Mb(oc(t,void 0))}})]};yQ.props={};var CTe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const bQ=(t={})=>{const{groupBy:e="x",reverse:n=!1,orderBy:r,padding:i}=t;return CTe(t,["groupBy","reverse","orderBy","padding"]),(a,o)=>{const{data:s,encode:l,scale:u}=o,{series:c}=u,[f]=Qt(l,"y"),[d]=Cb(l,"series","color"),h=sQ(d,c),p=me({},o,{scale:{series:{domain:h,paddingInner:i}}}),g=Cc(e,a,o),v=aQ(r);if(!v)return[a,me(p,{encode:{series:Ln(d)}})];const m=v(s,f,d);m&&oQ(g,m);const y=new Array(a.length);for(const b of g){n&&b.reverse();for(let x=0;x<b.length;x++)y[b[x]]=h[x]}return[a,me(p,{encode:{series:Ln(r?y:d)}})]}};bQ.props={};const xQ=t=>{const{groupBy:e=["x"],reducer:n=(o,s)=>s[o[0]],orderBy:r=null,reverse:i=!1,duration:a}=t;return(o,s)=>{const{encode:l}=s,c=(Array.isArray(e)?e:[e]).map(v=>[v,Qt(l,v)[0]]);if(c.length===0)return[o,s];let f=[o];for(const[,v]of c){const m=[];for(const y of f){const b=Array.from(Bn(y,x=>v[x]).values());m.push(...b)}f=m}if(r){const[v]=Qt(l,r);v&&f.sort((m,y)=>n(m,v)-n(y,v)),i&&f.reverse()}const d=(a||3e3)/f.length,[h]=a?[oc(o,d)]:Cb(l,"enterDuration",oc(o,d)),[p]=Cb(l,"enterDelay",oc(o,0)),g=new Array(o.length);for(let v=0,m=0;v<f.length;v++){const y=f[v],b=yn(y,x=>+h[x]);for(const x of y)g[x]=+p[x]+m;m+=b}return[o,me({},s,{encode:{enterDuration:Mb(h),enterDelay:Mb(g)}})]}};xQ.props={};var PTe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function DTe(t){return typeof t=="function"?t:{min:(n,r)=>fo(n,i=>r[+i]),max:(n,r)=>yn(n,i=>r[+i]),first:(n,r)=>r[n[0]],last:(n,r)=>r[n[n.length-1]],mean:(n,r)=>L0(n,i=>r[+i]),median:(n,r)=>RI(n,i=>r[+i]),sum:(n,r)=>Ro(n,i=>r[+i]),deviation:(n,r)=>bJ(n,i=>r[+i])}[t]||yn}const wQ=(t={})=>{const{groupBy:e="x",basis:n="max"}=t;return(r,i)=>{const{encode:a,tooltip:o}=i,s=PTe(a,["x"]),l=Object.entries(s).filter(([p])=>p.startsWith("y")).map(([p])=>[p,Qt(a,p)[0]]),[,u]=l.find(([p])=>p==="y"),c=l.map(([p])=>[p,new Array(r.length)]),f=Cc(e,r,i),d=DTe(n);for(const p of f){const g=d(p,u);for(const v of p)for(let m=0;m<l.length;m++){const[,y]=l[m],[,b]=c[m];b[v]=+y[v]/g}}const h=su(o)||(o==null?void 0:o.items)&&(o==null?void 0:o.items.length)!==0;return[r,me({},i,Object.assign({encode:Object.fromEntries(c.map(([p,g])=>[p,Ln(g,Qt(a,p)[1])]))},!h&&a.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};wQ.props={};function Lb(t,e,n){if(t===null)return[-.5,.5];const r=sQ(t,e),a=new Wh({domain:r,range:[0,1],padding:n}).getBandWidth();return[-a/2,a/2]}function Rb(t,e,n){return e*(1-t)+n*t}const _Q=(t={})=>{const{padding:e=0,paddingX:n=e,paddingY:r=e,random:i=Math.random}=t;return(a,o)=>{const{encode:s,scale:l}=o,{x:u,y:c}=l,[f]=Qt(s,"x"),[d]=Qt(s,"y"),h=Lb(f,u,n),p=Lb(d,c,r),g=a.map(()=>Rb(i(),...p)),v=a.map(()=>Rb(i(),...h));return[a,me({scale:{x:{padding:.5},y:{padding:.5}}},o,{encode:{dy:Ln(g),dx:Ln(v)}})]}};_Q.props={};const SQ=(t={})=>{const{padding:e=0,random:n=Math.random}=t;return(r,i)=>{const{encode:a,scale:o}=i,{x:s}=o,[l]=Qt(a,"x"),u=Lb(l,s,e),c=r.map(()=>Rb(n(),...u));return[r,me({scale:{x:{padding:.5}}},i,{encode:{dx:Ln(c)}})]}};SQ.props={};const EQ=(t={})=>{const{padding:e=0,random:n=Math.random}=t;return(r,i)=>{const{encode:a,scale:o}=i,{y:s}=o,[l]=Qt(a,"y"),u=Lb(l,s,e),c=r.map(()=>Rb(n(),...u));return[r,me({scale:{y:{padding:.5}}},i,{encode:{dy:Ln(c)}})]}};EQ.props={};var ITe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const OQ=(t={})=>{const{groupBy:e="x"}=t;return(n,r)=>{const{encode:i}=r,a=ITe(i,["x"]),o=Object.entries(a).filter(([f])=>f.startsWith("y")).map(([f])=>[f,Qt(i,f)[0]]),s=o.map(([f])=>[f,new Array(n.length)]),l=Cc(e,n,r),u=new Array(l.length);for(let f=0;f<l.length;f++){const h=l[f].flatMap(v=>o.map(([,m])=>+m[v])),[p,g]=Kl(h);u[f]=(p+g)/2}const c=Math.max(...u);for(let f=0;f<l.length;f++){const d=c-u[f],h=l[f];for(const p of h)for(let g=0;g<o.length;g++){const[,v]=o[g],[,m]=s[g];m[p]=+v[p]+d}}return[n,me({},r,{encode:Object.fromEntries(s.map(([f,d])=>[f,Ln(d,Qt(i,f)[1])]))})]}};OQ.props={};const kQ=(t={})=>{const{groupBy:e="x"}=t;return(n,r)=>{const{encode:i}=r,[a]=Qt(i,"y"),[o,s]=Qt(i,"y1"),l=Cc(e,n,r),u=new Array(n.length);for(const c of l){const f=c.map(d=>+a[d]);for(let d=0;d<c.length;d++){const h=c[d],p=Math.max(...f.filter((g,v)=>v!==d));u[h]=+a[h]>p?p:a[h]}}return[n,me({},r,{encode:{y1:Ln(u,s)}})]}};kQ.props={};function uF(t,e){return[t[0]]}function LTe(t,e){const n=t.length-1;return[t[n]]}function RTe(t,e){const n=yp(t,r=>e[r]);return[t[n]]}function NTe(t,e){const n=Nv(t,r=>e[r]);return[t[n]]}function FTe(t){return typeof t=="function"?t:{first:uF,last:LTe,max:RTe,min:NTe}[t]||uF}const M2=(t={})=>{const{groupBy:e="series",channel:n,selector:r}=t;return(i,a)=>{const{encode:o}=a,s=Cc(e,i,a),[l]=Qt(o,n),u=FTe(r);return[s.flatMap(c=>u(c,l)),a]}};M2.props={};var zTe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const AQ=(t={})=>{const{selector:e}=t,n=zTe(t,["selector"]);return M2(Object.assign({channel:"x",selector:e},n))};AQ.props={};var jTe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const TQ=(t={})=>{const{selector:e}=t,n=jTe(t,["selector"]);return M2(Object.assign({channel:"y",selector:e},n))};TQ.props={};var BTe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Pc(t){return e=>e===null?t:`${t} of ${e}`}function $Te(t){if(typeof t=="function")return[t,null];const n={mean:VTe,max:WTe,count:HTe,first:UTe,last:XTe,sum:YTe,min:GTe,median:qTe}[t];if(!n)throw new Error(`Unknown reducer: ${t}.`);return n()}function VTe(){const t=(n,r)=>L0(n,i=>+r[i]),e=Pc("mean");return[t,e]}function qTe(){const t=(n,r)=>RI(n,i=>+r[i]),e=Pc("median");return[t,e]}function WTe(){const t=(n,r)=>yn(n,i=>+r[i]),e=Pc("max");return[t,e]}function GTe(){const t=(n,r)=>fo(n,i=>+r[i]),e=Pc("min");return[t,e]}function HTe(){const t=(n,r)=>n.length,e=Pc("count");return[t,e]}function YTe(){const t=(n,r)=>Ro(n,i=>+r[i]),e=Pc("sum");return[t,e]}function UTe(){const t=(n,r)=>r[n[0]],e=Pc("first");return[t,e]}function XTe(){const t=(n,r)=>r[n[n.length-1]],e=Pc("last");return[t,e]}const HI=(t={})=>{const{groupBy:e}=t,n=BTe(t,["groupBy"]);return(r,i)=>{const{data:a,encode:o}=i,s=e(r,i);if(!s)return[r,i];const l=(h,p)=>{if(h)return h;const{from:g}=p;if(!g)return h;const[,v]=Qt(o,g);return v},u=Object.entries(n).map(([h,p])=>{const[g,v]=$Te(p),[m,y]=Qt(o,h),b=l(y,p),x=s.map(w=>g(w,m??a));return[h,Object.assign(Object.assign({},bAe(x,(v==null?void 0:v(b))||b)),{aggregate:!0})]}),c=Object.keys(o).map(h=>{const[p,g]=Qt(o,h),v=s.map(m=>p[m[0]]);return[h,Ln(v,g)]}),f=s.map(h=>a[h[0]]);return[id(s),me({},i,{data:f,encode:Object.fromEntries([...c,...u])})]}};HI.props={};var ZTe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Bv=(t={})=>{const{channels:e=["x","y"]}=t,n=ZTe(t,["channels"]),r=(i,a)=>Cc(e,i,a);return HI(Object.assign(Object.assign({},n),{groupBy:r}))};Bv.props={};const MQ=(t={})=>Bv(Object.assign(Object.assign({},t),{channels:["x","color","series"]}));MQ.props={};const CQ=(t={})=>Bv(Object.assign(Object.assign({},t),{channels:["y","color","series"]}));CQ.props={};const PQ=(t={})=>Bv(Object.assign(Object.assign({},t),{channels:["color"]}));PQ.props={};function KTe(t,e,n){const{by:r=t,reducer:i="max"}=e,[a]=Qt(n,r);if(typeof i=="function")return o=>i(o,a);if(i==="max")return o=>yn(o,s=>+a[s]);if(i==="min")return o=>fo(o,s=>+a[s]);if(i==="sum")return o=>Ro(o,s=>+a[s]);if(i==="median")return o=>RI(o,s=>+a[s]);if(i==="mean")return o=>L0(o,s=>+a[s]);if(i==="first")return o=>a[o[0]];if(i==="last")return o=>a[o[o.length-1]];throw new Error(`Unknown reducer: ${i}`)}function JTe(t,e,n){if(!Array.isArray(n))return t;const r=new Set(n);return t.filter(i=>r.has(e[i]))}const C2=(t={})=>(e,n)=>{const{reverse:r,slice:i,channel:a,by:o,ordinal:s=!0,reducer:l}=t,{encode:u,scale:c={}}=n,f=c[a].domain,[d]=Qt(u,o??a),[h]=Qt(u,a),p=KTe(a,{by:o,reducer:l},u),g=JTe(e,h,f),v=DAe(g,p,x=>h[x]),m=s?e:bs(e,x=>d[x]);r&&(!s&&m.reverse(),v.reverse());const y=typeof i=="number"?[0,i]:i,b=i?v.slice(...y):v;return[m,me(n,{scale:{[a]:{domain:b}}})]};C2.props={};const DQ=(t={})=>C2(Object.assign(Object.assign({},t),{channel:"x"}));DQ.props={};const IQ=(t={})=>C2(Object.assign(Object.assign({},t),{channel:"color"}));IQ.props={};const LQ=(t={})=>C2(Object.assign(Object.assign({},t),{channel:"y"}));LQ.props={};function QTe(t,e){return typeof e=="string"?t.map(n=>n[e]):t.map(e)}function eMe(t,e){if(typeof t=="function")return n=>t(n,e);if(t==="sum")return n=>Ro(n,r=>+e[r]);throw new Error(`Unknown reducer: ${t}`)}const RQ=(t={})=>{const{field:e,channel:n="y",reducer:r="sum"}=t;return(i,a)=>{const{data:o,encode:s}=a,[l]=Qt(s,"x"),u=e?QTe(o,e):Qt(s,n)[0],c=eMe(r,u),f=II(i,c,d=>l[d]).map(d=>d[1]);return[i,me({},a,{scale:{x:{flex:f}}})]}};RQ.props={};function Pr([t,e],[n,r]){return[t-n,e-r]}function ey([t,e],[n,r]){return[t+n,e+r]}function mr([t,e],[n,r]){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))}function $o([t,e]){return Math.atan2(e,t)}function Yh([t,e]){return $o([t,e])+Math.PI/2}function NQ(t,e){const n=$o(t),r=$o(e);return n<r?r-n:Math.PI*2-(n-r)}function YI(t){let e=1/0,n=-1/0,r=1/0,i=-1/0;for(const[s,l]of t)e=Math.min(s,e),n=Math.max(s,n),r=Math.min(l,r),i=Math.max(l,i);const a=n-e,o=i-r;return[e,r,a,o]}function FQ([t,e],[n,r]){return[(t+n)/2,(e+r)/2]}function tMe(t){const{padding:e=0,direction:n="col"}=t;return(r,i,a)=>{const o=r.length;if(o===0)return[];const{innerWidth:s,innerHeight:l}=a,u=l/s;let c=Math.ceil(Math.sqrt(i/u)),f=s/c,d=Math.ceil(i/c),h=d*f;for(;h>l;)c=c+1,f=s/c,d=Math.ceil(i/c),h=d*f;const p=l-d*f,g=d<=1?0:p/(d-1),[v,m]=d<=1?[(s-o*f)/(o-1),(l-f)/2]:[0,0];return r.map((y,b)=>{const[x,w,_,E]=YI(y),S=n==="col"?b%c:Math.floor(b/d),O=n==="col"?Math.floor(b/c):b%d,A=S*f,T=(d-O-1)*f+p,I=(f-e)/_,D=(f-e)/E,R=A-x+v*S+1/2*e,F=T-w-g*O-m+1/2*e;return`translate(${R}, ${F}) scale(${I}, ${D})`})}}const zQ=t=>(e,n)=>[e,me({},n,{modifier:tMe(t),axis:!1})];zQ.props={};var nMe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const cF="thresholds";function rMe(t){const[e,n]=Kl(t);return Math.min(200,WAe(t,e,n))}const UI=(t={})=>{const{groupChannels:e=["color"],binChannels:n=["x","y"]}=t,r=nMe(t,["groupChannels","binChannels"]),i={},a=(o,s)=>{const{encode:l}=s,u=n.map(p=>{const[g]=Qt(l,p);return g}),c=Fe(r,cF),f=o.filter(p=>u.every(g=>$n(g[p]))),d=[...e.map(p=>{const[g]=Qt(l,p);return g}).filter($n).map(p=>g=>p[g]),...n.map((p,g)=>{const v=u[g],m=c[p]||rMe(v),y=$Ae().thresholds(m).value(x=>+v[x])(f),b=new Map(y.flatMap(x=>{const{x0:w,x1:_}=x,E=`${w},${_}`;return x.map(S=>[S,E])}));return i[p]=b,x=>b.get(x)})],h=p=>d.map(g=>g(p)).join("-");return Array.from(Bn(f,h).values())};return HI(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(r).filter(([o])=>!o.startsWith(cF)))),Object.fromEntries(n.flatMap(o=>{const s=([u])=>+i[o].get(u).split(",")[0],l=([u])=>+i[o].get(u).split(",")[1];return l.from=o,[[o,s],[`${o}1`,l]]}))),{groupBy:a}))};UI.props={};const jQ=(t={})=>{const{thresholds:e}=t;return UI(Object.assign(Object.assign({},t),{thresholdsX:e,groupChannels:["color"],binChannels:["x"]}))};jQ.props={};function iMe(t,e,n,r){const i=t.length;if(r>=i||r===0)return t;const a=h=>e[t[h]]*1,o=h=>n[t[h]]*1,s=[],l=(i-2)/(r-2);let u=0,c,f,d;s.push(u);for(let h=0;h<r-2;h++){let p=0,g=0,v=Math.floor((h+1)*l)+1,m=Math.floor((h+2)*l)+1;m=Math.min(m,i);const y=m-v;for(;v<m;v++)p+=a(v),g+=o(v);p/=y,g/=y;let b=Math.floor((h+0)*l)+1;const x=Math.floor((h+1)*l)+1,w=[a(u),o(u)];for(c=f=-1;b<x;b++)f=Math.abs((w[0]-p)*(a(b)-w[1])-(w[0]-o(b))*(g-w[0]))*.5,f>c&&(c=f,d=b);s.push(d),u=d}return s.push(i-1),s.map(h=>t[h])}function aMe(t){if(typeof t=="function")return t;if(t==="lttb")return iMe;const e={first:r=>[r[0]],last:r=>[r[r.length-1]],min:(r,i,a)=>[r[Nv(r,o=>a[o])]],max:(r,i,a)=>[r[yp(r,o=>a[o])]],median:(r,i,a)=>[r[GAe(r,o=>a[o])]]},n=e[t]||e.median;return(r,i,a,o)=>{const s=Math.max(1,Math.floor(r.length/o));return oMe(r,s).flatMap(u=>n(u,i,a))}}function oMe(t,e){const n=t.length,r=[];let i=0;for(;i<n;)r.push(t.slice(i,i+=e));return r}const BQ=(t={})=>{const{strategy:e="median",thresholds:n=2e3,groupBy:r=["series","color"]}=t,i=aMe(e);return(a,o)=>{const{encode:s}=o,l=Cc(r,a,o),[u]=Qt(s,"x"),[c]=Qt(s,"y");return[l.flatMap(f=>i(f,u,c,n)),o]}};BQ.props={};function sMe(t){return typeof t=="object"?[t.value,t.ordinal]:[t,!0]}function lMe(t){var e;const{encode:n}=t,r=Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),{y:Object.assign(Object.assign({},t.encode.y),{value:[]})})}),i=(e=n==null?void 0:n.color)===null||e===void 0?void 0:e.field;if(!n||!i)return r;let a;for(const[o,s]of Object.entries(n))(o==="x"||o==="y")&&s.field===i&&(a=Object.assign(Object.assign({},a),{[o]:Object.assign(Object.assign({},s),{value:[]})}));return a?Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),a)}):r}const $Q=(t={})=>(e,n)=>{const{encode:r,data:i}=n,a=Object.entries(t).map(([c,f])=>{const[d]=Qt(r,c);if(!d)return null;const[h,p=!0]=sMe(f);if(typeof h=="function")return g=>h(d[g]);if(p){const g=Array.isArray(h)?h:[h];return g.length===0?null:v=>g.includes(d[v])}else{const[g,v]=h;return m=>d[m]>=g&&d[m]<=v}}).filter($n),o=c=>a.every(f=>f(c)),s=e.filter(o),l=s.map((c,f)=>f);if(a.length===0){const c=lMe(n);return[e,c]}const u=Object.entries(r).map(([c,f])=>[c,Object.assign(Object.assign({},f),{value:l.map(d=>f.value[s[d]]).filter(d=>d!==void 0)})]);return[l,me({},n,{encode:Object.fromEntries(u),data:s.map(c=>i[c])})]};$Q.props={};function Zn(t){return function(){return t}}const fF=Math.abs,Ji=Math.atan2,Gc=Math.cos,uMe=Math.max,iE=Math.min,Fs=Math.sin,ih=Math.sqrt,ea=1e-12,z0=Math.PI,Nb=z0/2,cMe=2*z0;function fMe(t){return t>1?0:t<-1?z0:Math.acos(t)}function dF(t){return t>=1?Nb:t<=-1?-Nb:Math.asin(t)}const z6=Math.PI,j6=2*z6,nf=1e-6,dMe=j6-nf;function VQ(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function hMe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return VQ;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let XI=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?VQ:hMe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-e,u=i-n,c=o-e,f=s-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>nf)if(!(Math.abs(f*l-u*c)>nf)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-o,p=i-s,g=l*l+u*u,v=h*h+p*p,m=Math.sqrt(g),y=Math.sqrt(d),b=a*Math.tan((z6-Math.acos((g+d-v)/(2*m*y)))/2),x=b/y,w=b/m;Math.abs(x-1)>nf&&this._append`L${e+x*c},${n+x*f}`,this._append`A${a},${a},0,0,${+(f*h>c*p)},${this._x1=e+w*l},${this._y1=n+w*u}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),u=e+s,c=n+l,f=1^o,d=o?i-a:a-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>nf||Math.abs(this._y1-c)>nf)&&this._append`L${u},${c}`,r&&(d<0&&(d=d%j6+j6),d>dMe?this._append`A${r},${r},0,1,${f},${e-s},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:d>nf&&this._append`A${r},${r},0,${+(d>=z6)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Ho(){return new XI}Ho.prototype=XI.prototype;function ZI(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new XI(e)}function pMe(t){return t.innerRadius}function gMe(t){return t.outerRadius}function vMe(t){return t.startAngle}function mMe(t){return t.endAngle}function yMe(t){return t&&t.padAngle}function bMe(t,e,n,r,i,a,o,s){var l=n-t,u=r-e,c=o-i,f=s-a,d=f*l-c*u;if(!(d*d<ea))return d=(c*(e-a)-f*(t-i))/d,[t+d*l,e+d*u]}function ty(t,e,n,r,i,a,o){var s=t-n,l=e-r,u=(o?a:-a)/ih(s*s+l*l),c=u*l,f=-u*s,d=t+c,h=e+f,p=n+c,g=r+f,v=(d+p)/2,m=(h+g)/2,y=p-d,b=g-h,x=y*y+b*b,w=i-a,_=d*g-p*h,E=(b<0?-1:1)*ih(uMe(0,w*w*x-_*_)),S=(_*b-y*E)/x,O=(-_*y-b*E)/x,A=(_*b+y*E)/x,T=(-_*y+b*E)/x,I=S-v,D=O-m,R=A-v,F=T-m;return I*I+D*D>R*R+F*F&&(S=A,O=T),{cx:S,cy:O,x01:-c,y01:-f,x11:S*(i/w-1),y11:O*(i/w-1)}}function KI(){var t=pMe,e=gMe,n=Zn(0),r=null,i=vMe,a=mMe,o=yMe,s=null,l=ZI(u);function u(){var c,f,d=+t.apply(this,arguments),h=+e.apply(this,arguments),p=i.apply(this,arguments)-Nb,g=a.apply(this,arguments)-Nb,v=fF(g-p),m=g>p;if(s||(s=c=l()),h<d&&(f=h,h=d,d=f),!(h>ea))s.moveTo(0,0);else if(v>cMe-ea)s.moveTo(h*Gc(p),h*Fs(p)),s.arc(0,0,h,p,g,!m),d>ea&&(s.moveTo(d*Gc(g),d*Fs(g)),s.arc(0,0,d,g,p,m));else{var y=p,b=g,x=p,w=g,_=v,E=v,S=o.apply(this,arguments)/2,O=S>ea&&(r?+r.apply(this,arguments):ih(d*d+h*h)),A=iE(fF(h-d)/2,+n.apply(this,arguments)),T=A,I=A,D,R;if(O>ea){var F=dF(O/d*Fs(S)),z=dF(O/h*Fs(S));(_-=F*2)>ea?(F*=m?1:-1,x+=F,w-=F):(_=0,x=w=(p+g)/2),(E-=z*2)>ea?(z*=m?1:-1,y+=z,b-=z):(E=0,y=b=(p+g)/2)}var N=h*Gc(y),L=h*Fs(y),B=d*Gc(w),$=d*Fs(w);if(A>ea){var G=h*Gc(b),W=h*Fs(b),U=d*Gc(x),Y=d*Fs(x),q;if(v<z0)if(q=bMe(N,L,U,Y,G,W,B,$)){var K=N-q[0],J=L-q[1],Q=G-q[0],se=W-q[1],de=1/Fs(fMe((K*Q+J*se)/(ih(K*K+J*J)*ih(Q*Q+se*se)))/2),ye=ih(q[0]*q[0]+q[1]*q[1]);T=iE(A,(d-ye)/(de-1)),I=iE(A,(h-ye)/(de+1))}else T=I=0}E>ea?I>ea?(D=ty(U,Y,N,L,h,I,m),R=ty(G,W,B,$,h,I,m),s.moveTo(D.cx+D.x01,D.cy+D.y01),I<A?s.arc(D.cx,D.cy,I,Ji(D.y01,D.x01),Ji(R.y01,R.x01),!m):(s.arc(D.cx,D.cy,I,Ji(D.y01,D.x01),Ji(D.y11,D.x11),!m),s.arc(0,0,h,Ji(D.cy+D.y11,D.cx+D.x11),Ji(R.cy+R.y11,R.cx+R.x11),!m),s.arc(R.cx,R.cy,I,Ji(R.y11,R.x11),Ji(R.y01,R.x01),!m))):(s.moveTo(N,L),s.arc(0,0,h,y,b,!m)):s.moveTo(N,L),!(d>ea)||!(_>ea)?s.lineTo(B,$):T>ea?(D=ty(B,$,G,W,d,-T,m),R=ty(N,L,U,Y,d,-T,m),s.lineTo(D.cx+D.x01,D.cy+D.y01),T<A?s.arc(D.cx,D.cy,T,Ji(D.y01,D.x01),Ji(R.y01,R.x01),!m):(s.arc(D.cx,D.cy,T,Ji(D.y01,D.x01),Ji(D.y11,D.x11),!m),s.arc(0,0,d,Ji(D.cy+D.y11,D.cx+D.x11),Ji(R.cy+R.y11,R.cx+R.x11),m),s.arc(R.cx,R.cy,T,Ji(R.y11,R.x11),Ji(R.y01,R.x01),!m))):s.arc(0,0,d,w,x,m)}if(s.closePath(),c)return s=null,c+""||null}return u.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-z0/2;return[Gc(f)*c,Fs(f)*c]},u.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Zn(+c),u):t},u.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Zn(+c),u):e},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Zn(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Zn(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Zn(+c),u):i},u.endAngle=function(c){return arguments.length?(a=typeof c=="function"?c:Zn(+c),u):a},u.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Zn(+c),u):o},u.context=function(c){return arguments.length?(s=c??null,u):s},u}function qQ(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function WQ(t){this._context=t}WQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function $v(t){return new WQ(t)}function GQ(t){return t[0]}function HQ(t){return t[1]}function od(t,e){var n=Zn(!0),r=null,i=$v,a=null,o=ZI(s);t=typeof t=="function"?t:t===void 0?GQ:Zn(t),e=typeof e=="function"?e:e===void 0?HQ:Zn(e);function s(l){var u,c=(l=qQ(l)).length,f,d=!1,h;for(r==null&&(a=i(h=o())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(f,u,l),+e(f,u,l));if(h)return a=null,h+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:Zn(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:Zn(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Zn(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),s):r},s}function B6(t,e,n){var r=null,i=Zn(!0),a=null,o=$v,s=null,l=ZI(u);t=typeof t=="function"?t:t===void 0?GQ:Zn(+t),e=typeof e=="function"?e:Zn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?HQ:Zn(+n);function u(f){var d,h,p,g=(f=qQ(f)).length,v,m=!1,y,b=new Array(g),x=new Array(g);for(a==null&&(s=o(y=l())),d=0;d<=g;++d){if(!(d<g&&i(v=f[d],d,f))===m)if(m=!m)h=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),p=d-1;p>=h;--p)s.point(b[p],x[p]);s.lineEnd(),s.areaEnd()}m&&(b[d]=+t(v,d,f),x[d]=+e(v,d,f),s.point(r?+r(v,d,f):b[d],n?+n(v,d,f):x[d]))}if(y)return s=null,y+""||null}function c(){return od().defined(i).curve(o).context(a)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Zn(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Zn(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Zn(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Zn(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Zn(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Zn(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Zn(!!f),u):i},u.curve=function(f){return arguments.length?(o=f,a!=null&&(s=o(a)),u):o},u.context=function(f){return arguments.length?(f==null?a=s=null:s=o(a=f),u):a},u}var YQ=JI($v);function UQ(t){this._curve=t}UQ.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function JI(t){function e(n){return new UQ(t(n))}return e._curve=t,e}function Sg(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(JI(n)):e()._curve},t}function xMe(){return Sg(od().curve(YQ))}function wMe(){var t=B6().curve(YQ),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Sg(n())},delete t.lineX0,t.lineEndAngle=function(){return Sg(r())},delete t.lineX1,t.lineInnerRadius=function(){return Sg(i())},delete t.lineY0,t.lineOuterRadius=function(){return Sg(a())},delete t.lineY1,t.curve=function(o){return arguments.length?e(JI(o)):e()._curve},t}function Uh(){}function $6(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function QI(t,e){this._context=t,this._k=(1-e)/6}QI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:$6(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:$6(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new QI(r,e)}return n.tension=function(r){return t(+r)},n})(0);function eL(t,e){this._context=t,this._k=(1-e)/6}eL.prototype={areaStart:Uh,areaEnd:Uh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:$6(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new eL(r,e)}return n.tension=function(r){return t(+r)},n})(0);function XQ(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>ea){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>ea){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function ZQ(t,e){this._context=t,this._alpha=e}ZQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:XQ(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new ZQ(r,e):new QI(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function KQ(t,e){this._context=t,this._alpha=e}KQ.prototype={areaStart:Uh,areaEnd:Uh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:XQ(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const JQ=function t(e){function n(r){return e?new KQ(r,e):new eL(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function QQ(t){this._context=t}QQ.prototype={areaStart:Uh,areaEnd:Uh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function tL(t){return new QQ(t)}function hF(t){return t<0?-1:1}function pF(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(hF(a)+hF(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function gF(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function aE(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function Fb(t){this._context=t}Fb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:aE(this,this._t0,gF(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,aE(this,gF(this,n=pF(this,t,e)),n);break;default:aE(this,this._t0,n=pF(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function eee(t){this._context=new tee(t)}(eee.prototype=Object.create(Fb.prototype)).point=function(t,e){Fb.prototype.point.call(this,e,t)};function tee(t){this._context=t}tee.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function nee(t){return new Fb(t)}function ree(t){return new eee(t)}function P2(t,e){this._context=t,this._t=e}P2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function iee(t){return new P2(t,.5)}function aee(t){return new P2(t,0)}function oee(t){return new P2(t,1)}function Hn(t){const{transformations:e}=t.getOptions();return e.map(([r])=>r).filter(r=>r==="transpose").length%2!==0}function On(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="polar")}function D2(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="reflect")&&e.some(([n])=>n.startsWith("transpose"))}function see(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="helix")}function I2(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="parallel")}function lee(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="fisheye")}function _Me(t){return I2(t)&&On(t)}function bp(t){return see(t)||On(t)}function SMe(t){return On(t)&&Hn(t)}function EMe(t){if(bp(t)){const[e,n]=t.getSize(),r=t.getOptions().transformations.find(i=>i[0]==="polar");if(r)return Math.max(e,n)/2*r[4]}return 0}function L2(t){const{transformations:e}=t.getOptions(),[,,,n,r]=e.find(i=>i[0]==="polar");return[+n,+r]}function nL(t,e=!0){const{transformations:n}=t.getOptions(),[,r,i]=n.find(a=>a[0]==="polar");return e?[+r*180/Math.PI,+i*180/Math.PI]:[r,i]}function OMe(t,e){const{transformations:n}=t.getOptions(),[,...r]=n.find(i=>i[0]===e);return r}function Ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ede(r.key),r)}}function Te(t,e,n){return e&&vF(t.prototype,e),n&&vF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function V6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function kMe(t){if(Array.isArray(t))return V6(t)}function AMe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rL(t,e){if(t){if(typeof t=="string")return V6(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V6(t,e):void 0}}function TMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bt(t){return kMe(t)||AMe(t)||rL(t)||TMe()}function Xh(t){return Xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xh(t)}function uee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uee=function(){return!!t})()}function MMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CMe(t,e){if(e&&(mC(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MMe(t)}function Nt(t,e,n){return e=Xh(e),CMe(t,uee()?Reflect.construct(e,n||[],Xh(t).constructor):e.apply(t,n))}function q6(t,e){return q6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},q6(t,e)}function Ft(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q6(t,e)}function PMe(t){if(Array.isArray(t))return t}function DMe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function IMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ot(t,e){return PMe(t)||DMe(t,e)||rL(t,e)||IMe()}var oE={exports:{}},mF;function LMe(){return mF||(mF=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function a(l,u,c,f,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var h=new i(c,f||l,d),p=n?n+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],h]:l._events[p].push(h):(l._events[p]=h,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)e.call(c,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},s.prototype.listeners=function(u){var c=n?n+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,h=f.length,p=new Array(h);d<h;d++)p[d]=f[d].fn;return p},s.prototype.listenerCount=function(u){var c=n?n+u:u,f=this._events[c];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,c,f,d,h,p){var g=n?n+u:u;if(!this._events[g])return!1;var v=this._events[g],m=arguments.length,y,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),m){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,f),!0;case 4:return v.fn.call(v.context,c,f,d),!0;case 5:return v.fn.call(v.context,c,f,d,h),!0;case 6:return v.fn.call(v.context,c,f,d,h,p),!0}for(b=1,y=new Array(m-1);b<m;b++)y[b-1]=arguments[b];v.fn.apply(v.context,y)}else{var x=v.length,w;for(b=0;b<x;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),m){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,c);break;case 3:v[b].fn.call(v[b].context,c,f);break;case 4:v[b].fn.call(v[b].context,c,f,d);break;default:if(!y)for(w=1,y=new Array(m-1);w<m;w++)y[w-1]=arguments[w];v[b].fn.apply(v[b].context,y)}}return!0},s.prototype.on=function(u,c,f){return a(this,u,c,f,!1)},s.prototype.once=function(u,c,f){return a(this,u,c,f,!0)},s.prototype.removeListener=function(u,c,f,d){var h=n?n+u:u;if(!this._events[h])return this;if(!c)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===c&&(!d||p.once)&&(!f||p.context===f)&&o(this,h);else{for(var g=0,v=[],m=p.length;g<m;g++)(p[g].fn!==c||d&&!p[g].once||f&&p[g].context!==f)&&v.push(p[g]);v.length?this._events[h]=v.length===1?v[0]:v:o(this,h)}return this},s.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s}(oE)),oE.exports}var RMe=LMe();const cee=dp(RMe);function NMe(t,e){for(;!{}.hasOwnProperty.call(t,e)&&(t=Xh(t))!==null;);return t}function W6(){return W6=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=NMe(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},W6.apply(null,arguments)}function yF(t,e,n,r){var i=W6(Xh(t.prototype),e,n);return typeof i=="function"?function(a){return i.apply(n,a)}:i}/*!
 * @antv/g-math
 * @description Geometry util
 * @version 3.0.1
 * @date 5/9/2025, 8:18:51 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */function Jl(t,e,n,r){var i=t-n,a=e-r;return Math.sqrt(i*i+a*a)}function fee(t,e){var n=Math.min.apply(Math,Bt(t)),r=Math.min.apply(Math,Bt(e)),i=Math.max.apply(Math,Bt(t)),a=Math.max.apply(Math,Bt(e));return{x:n,y:r,width:i-n,height:a-r}}function FMe(t,e,n){return Math.atan(-e/t*Math.tan(n))}function zMe(t,e,n){return Math.atan(e/(t*Math.tan(n)))}function jMe(t,e,n,r,i,a){return n*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+t}function BMe(t,e,n,r,i,a){return n*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+e}function $Me(t,e,n,r,i,a,o){for(var s=FMe(n,r,i),l=1/0,u=-1/0,c=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var d=s+f;a<o?a<d&&d<o&&c.push(d):o<d&&d<a&&c.push(d)}for(var h=0;h<c.length;h++){var p=jMe(t,e,n,r,i,c[h]);p<l&&(l=p),p>u&&(u=p)}for(var g=zMe(n,r,i),v=1/0,m=-1/0,y=[a,o],b=-Math.PI*2;b<=Math.PI*2;b+=Math.PI){var x=g+b;a<o?a<x&&x<o&&y.push(x):o<x&&x<a&&y.push(x)}for(var w=0;w<y.length;w++){var _=BMe(t,e,n,r,i,y[w]);_<v&&(v=_),_>m&&(m=_)}return{x:l,y:v,width:u-l,height:m-v}}var VMe=1e-4;function dee(t,e,n,r,i,a){var o=-1,s=1/0,l=[n,r],u=20;a&&a>200&&(u=a/10);for(var c=1/u,f=c/10,d=0;d<=u;d++){var h=d*c,p=[i.apply(void 0,Bt(t.concat([h]))),i.apply(void 0,Bt(e.concat([h])))],g=Jl(l[0],l[1],p[0],p[1]);g<s&&(o=h,s=g)}if(o===0)return{x:t[0],y:e[0]};if(o===1){var v=t.length;return{x:t[v-1],y:e[v-1]}}s=1/0;for(var m=0;m<32&&!(f<VMe);m++){var y=o-f,b=o+f,x=[i.apply(void 0,Bt(t.concat([y]))),i.apply(void 0,Bt(e.concat([y])))],w=Jl(l[0],l[1],x[0],x[1]);if(y>=0&&w<s)o=y,s=w;else{var _=[i.apply(void 0,Bt(t.concat([b]))),i.apply(void 0,Bt(e.concat([b])))],E=Jl(l[0],l[1],_[0],_[1]);b<=1&&E<s?(o=b,s=E):f*=.5}}return{x:i.apply(void 0,Bt(t.concat([o]))),y:i.apply(void 0,Bt(e.concat([o])))}}function hee(t,e,n,r){return Jl(t,e,n,r)}function pee(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}}function qMe(t,e,n,r,i,a){var o=[n-t,r-e];if(Vke(o,[0,0]))return Math.sqrt((i-t)*(i-t)+(a-e)*(a-e));var s=[-o[1],o[0]];Bke(s,s);var l=[i-t,a-e];return Math.abs($ke(l,s))}function G6(t,e,n,r,i){var a=1-i;return a*a*a*t+3*e*i*a*a+3*n*i*i*a+r*i*i*i}function bF(t,e,n,r){var i=-3*t+9*e-9*n+3*r,a=6*t-12*e+6*n,o=3*e-3*t,s=[],l,u,c;if(Hg(i,0))Hg(a,0)||(l=-o/a,l>=0&&l<=1&&s.push(l));else{var f=a*a-4*i*o;Hg(f,0)?s.push(-a/(2*i)):f>0&&(c=Math.sqrt(f),l=(-a+c)/(2*i),u=(-a-c)/(2*i),l>=0&&l<=1&&s.push(l),u>=0&&u<=1&&s.push(u))}return s}function WMe(t,e,n,r,i,a,o,s){for(var l=[t,o],u=[e,s],c=bF(t,n,i,o),f=bF(e,r,a,s),d=0;d<c.length;d++)l.push(G6(t,n,i,o,c[d]));for(var h=0;h<f.length;h++)u.push(G6(e,r,a,s,f[h]));return fee(l,u)}function GMe(t,e,n,r,i,a,o,s,l,u,c){return dee([t,n,i,o],[e,r,a,s],l,u,G6,c)}function xF(t,e,n,r,i,a,o,s,l,u,c){var f=GMe(t,e,n,r,i,a,o,s,l,u,c);return Jl(f.x,f.y,l,u)}function HMe(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=Jl(r[0],r[1],i[0],i[1])}return e}function YMe(t){return HMe(t)}function H6(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function wF(t,e,n){var r=t+n-2*e;if(Hg(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function UMe(t,e,n,r,i,a){var o=wF(t,n,i)[0],s=wF(e,r,a)[0],l=[t,i],u=[e,a];return o!==void 0&&l.push(H6(t,n,i,o)),s!==void 0&&u.push(H6(e,r,a,s)),fee(l,u)}function XMe(t,e,n,r,i,a,o,s){return dee([t,n,i],[e,r,a],o,s,H6)}function ZMe(t,e,n,r,i,a,o,s){var l=XMe(t,e,n,r,i,a,o,s);return Jl(l.x,l.y,o,s)}function qi(){qi=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(z,N,L){z[N]=L.value},a=typeof Symbol=="function"?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(z,N,L){return Object.defineProperty(z,N,{value:L,enumerable:!0,configurable:!0,writable:!0}),z[N]}try{u({},"")}catch{u=function(L,B,$){return L[B]=$}}function c(z,N,L,B){var $=N&&N.prototype instanceof m?N:m,G=Object.create($.prototype),W=new R(B||[]);return i(G,"_invoke",{value:A(z,L,W)}),G}function f(z,N,L){try{return{type:"normal",arg:z.call(N,L)}}catch(B){return{type:"throw",arg:B}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",g="completed",v={};function m(){}function y(){}function b(){}var x={};u(x,o,function(){return this});var w=Object.getPrototypeOf,_=w&&w(w(F([])));_&&_!==n&&r.call(_,o)&&(x=_);var E=b.prototype=m.prototype=Object.create(x);function S(z){["next","throw","return"].forEach(function(N){u(z,N,function(L){return this._invoke(N,L)})})}function O(z,N){function L($,G,W,U){var Y=f(z[$],z,G);if(Y.type!=="throw"){var q=Y.arg,K=q.value;return K&&mC(K)=="object"&&r.call(K,"__await")?N.resolve(K.__await).then(function(J){L("next",J,W,U)},function(J){L("throw",J,W,U)}):N.resolve(K).then(function(J){q.value=J,W(q)},function(J){return L("throw",J,W,U)})}U(Y.arg)}var B;i(this,"_invoke",{value:function(G,W){function U(){return new N(function(Y,q){L(G,W,Y,q)})}return B=B?B.then(U,U):U()}})}function A(z,N,L){var B=d;return function($,G){if(B===p)throw Error("Generator is already running");if(B===g){if($==="throw")throw G;return{value:t,done:!0}}for(L.method=$,L.arg=G;;){var W=L.delegate;if(W){var U=T(W,L);if(U){if(U===v)continue;return U}}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(B===d)throw B=g,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);B=p;var Y=f(z,N,L);if(Y.type==="normal"){if(B=L.done?g:h,Y.arg===v)continue;return{value:Y.arg,done:L.done}}Y.type==="throw"&&(B=g,L.method="throw",L.arg=Y.arg)}}}function T(z,N){var L=N.method,B=z.iterator[L];if(B===t)return N.delegate=null,L==="throw"&&z.iterator.return&&(N.method="return",N.arg=t,T(z,N),N.method==="throw")||L!=="return"&&(N.method="throw",N.arg=new TypeError("The iterator does not provide a '"+L+"' method")),v;var $=f(B,z.iterator,N.arg);if($.type==="throw")return N.method="throw",N.arg=$.arg,N.delegate=null,v;var G=$.arg;return G?G.done?(N[z.resultName]=G.value,N.next=z.nextLoc,N.method!=="return"&&(N.method="next",N.arg=t),N.delegate=null,v):G:(N.method="throw",N.arg=new TypeError("iterator result is not an object"),N.delegate=null,v)}function I(z){var N={tryLoc:z[0]};1 in z&&(N.catchLoc=z[1]),2 in z&&(N.finallyLoc=z[2],N.afterLoc=z[3]),this.tryEntries.push(N)}function D(z){var N=z.completion||{};N.type="normal",delete N.arg,z.completion=N}function R(z){this.tryEntries=[{tryLoc:"root"}],z.forEach(I,this),this.reset(!0)}function F(z){if(z||z===""){var N=z[o];if(N)return N.call(z);if(typeof z.next=="function")return z;if(!isNaN(z.length)){var L=-1,B=function $(){for(;++L<z.length;)if(r.call(z,L))return $.value=z[L],$.done=!1,$;return $.value=t,$.done=!0,$};return B.next=B}}throw new TypeError(mC(z)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(z){var N=typeof z=="function"&&z.constructor;return!!N&&(N===y||(N.displayName||N.name)==="GeneratorFunction")},e.mark=function(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,b):(z.__proto__=b,u(z,l,"GeneratorFunction")),z.prototype=Object.create(E),z},e.awrap=function(z){return{__await:z}},S(O.prototype),u(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(z,N,L,B,$){$===void 0&&($=Promise);var G=new O(c(z,N,L,B),$);return e.isGeneratorFunction(N)?G:G.next().then(function(W){return W.done?W.value:G.next()})},S(E),u(E,l,"Generator"),u(E,o,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),e.keys=function(z){var N=Object(z),L=[];for(var B in N)L.push(B);return L.reverse(),function $(){for(;L.length;){var G=L.pop();if(G in N)return $.value=G,$.done=!1,$}return $.done=!0,$}},e.values=F,R.prototype={constructor:R,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!N)for(var L in this)L.charAt(0)==="t"&&r.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=t)},stop:function(){this.done=!0;var N=this.tryEntries[0].completion;if(N.type==="throw")throw N.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var L=this;function B(q,K){return W.type="throw",W.arg=N,L.next=q,K&&(L.method="next",L.arg=t),!!K}for(var $=this.tryEntries.length-1;$>=0;--$){var G=this.tryEntries[$],W=G.completion;if(G.tryLoc==="root")return B("end");if(G.tryLoc<=this.prev){var U=r.call(G,"catchLoc"),Y=r.call(G,"finallyLoc");if(U&&Y){if(this.prev<G.catchLoc)return B(G.catchLoc,!0);if(this.prev<G.finallyLoc)return B(G.finallyLoc)}else if(U){if(this.prev<G.catchLoc)return B(G.catchLoc,!0)}else{if(!Y)throw Error("try statement without catch or finally");if(this.prev<G.finallyLoc)return B(G.finallyLoc)}}}},abrupt:function(N,L){for(var B=this.tryEntries.length-1;B>=0;--B){var $=this.tryEntries[B];if($.tryLoc<=this.prev&&r.call($,"finallyLoc")&&this.prev<$.finallyLoc){var G=$;break}}G&&(N==="break"||N==="continue")&&G.tryLoc<=L&&L<=G.finallyLoc&&(G=null);var W=G?G.completion:{};return W.type=N,W.arg=L,G?(this.method="next",this.next=G.finallyLoc,v):this.complete(W)},complete:function(N,L){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&L&&(this.next=L),v},finish:function(N){for(var L=this.tryEntries.length-1;L>=0;--L){var B=this.tryEntries[L];if(B.finallyLoc===N)return this.complete(B.completion,B.afterLoc),D(B),v}},catch:function(N){for(var L=this.tryEntries.length-1;L>=0;--L){var B=this.tryEntries[L];if(B.tryLoc===N){var $=B.completion;if($.type==="throw"){var G=$.arg;D(B)}return G}}throw Error("illegal catch attempt")},delegateYield:function(N,L,B){return this.delegate={iterator:F(N),resultName:L,nextLoc:B},this.method==="next"&&(this.arg=t),v}},e}function _F(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(u){return void n(u)}s.done?e(l):Promise.resolve(l).then(r,i)}function xc(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(l){_F(a,r,i,o,s,"next",l)}function s(l){_F(a,r,i,o,s,"throw",l)}o(void 0)})}}function af(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=rL(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||n.return==null||n.return()}finally{if(s)throw a}}}}function KMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function sd(t,e){if(t==null)return{};var n,r,i=KMe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}/*!
 * @antv/g-lite
 * @description A core module for rendering engine implements DOM API.
 * @version 2.2.19
 * @date 5/9/2025, 8:18:56 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var JMe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gee={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(JMe,function(){function n(w,_,E,S,O){r(w,_,E||0,S||w.length-1,O||a)}function r(w,_,E,S,O){for(;S>E;){if(S-E>600){var A=S-E+1,T=_-E+1,I=Math.log(A),D=.5*Math.exp(2*I/3),R=.5*Math.sqrt(I*D*(A-D)/A)*(T-A/2<0?-1:1),F=Math.max(E,Math.floor(_-T*D/A+R)),z=Math.min(S,Math.floor(_+(A-T)*D/A+R));r(w,_,F,z,O)}var N=w[_],L=E,B=S;for(i(w,E,_),O(w[S],N)>0&&i(w,E,S);L<B;){for(i(w,L,B),L++,B--;O(w[L],N)<0;)L++;for(;O(w[B],N)>0;)B--}O(w[E],N)===0?i(w,E,B):(B++,i(w,B,S)),B<=_&&(E=B+1),_<=B&&(S=B-1)}}function i(w,_,E){var S=w[_];w[_]=w[E],w[E]=S}function a(w,_){return w<_?-1:w>_?1:0}var o=function(_){_===void 0&&(_=9),this._maxEntries=Math.max(4,_),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(_){var E=this.data,S=[];if(!y(_,E))return S;for(var O=this.toBBox,A=[];E;){for(var T=0;T<E.children.length;T++){var I=E.children[T],D=E.leaf?O(I):I;y(_,D)&&(E.leaf?S.push(I):m(_,D)?this._all(I,S):A.push(I))}E=A.pop()}return S},o.prototype.collides=function(_){var E=this.data;if(!y(_,E))return!1;for(var S=[];E;){for(var O=0;O<E.children.length;O++){var A=E.children[O],T=E.leaf?this.toBBox(A):A;if(y(_,T)){if(E.leaf||m(_,T))return!0;S.push(A)}}E=S.pop()}return!1},o.prototype.load=function(_){if(!(_&&_.length))return this;if(_.length<this._minEntries){for(var E=0;E<_.length;E++)this.insert(_[E]);return this}var S=this._build(_.slice(),0,_.length-1,0);if(!this.data.children.length)this.data=S;else if(this.data.height===S.height)this._splitRoot(this.data,S);else{if(this.data.height<S.height){var O=this.data;this.data=S,S=O}this._insert(S,this.data.height-S.height-1,!0)}return this},o.prototype.insert=function(_){return _&&this._insert(_,this.data.height-1),this},o.prototype.clear=function(){return this.data=b([]),this},o.prototype.remove=function(_,E){if(!_)return this;for(var S=this.data,O=this.toBBox(_),A=[],T=[],I,D,R;S||A.length;){if(S||(S=A.pop(),D=A[A.length-1],I=T.pop(),R=!0),S.leaf){var F=s(_,S.children,E);if(F!==-1)return S.children.splice(F,1),A.push(S),this._condense(A),this}!R&&!S.leaf&&m(S,O)?(A.push(S),T.push(I),I=0,D=S,S=S.children[0]):D?(I++,S=D.children[I],R=!1):S=null}return this},o.prototype.toBBox=function(_){return _},o.prototype.compareMinX=function(_,E){return _.minX-E.minX},o.prototype.compareMinY=function(_,E){return _.minY-E.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(_){return this.data=_,this},o.prototype._all=function(_,E){for(var S=[];_;)_.leaf?E.push.apply(E,_.children):S.push.apply(S,_.children),_=S.pop();return E},o.prototype._build=function(_,E,S,O){var A=S-E+1,T=this._maxEntries,I;if(A<=T)return I=b(_.slice(E,S+1)),l(I,this.toBBox),I;O||(O=Math.ceil(Math.log(A)/Math.log(T)),T=Math.ceil(A/Math.pow(T,O-1))),I=b([]),I.leaf=!1,I.height=O;var D=Math.ceil(A/T),R=D*Math.ceil(Math.sqrt(T));x(_,E,S,R,this.compareMinX);for(var F=E;F<=S;F+=R){var z=Math.min(F+R-1,S);x(_,F,z,D,this.compareMinY);for(var N=F;N<=z;N+=D){var L=Math.min(N+D-1,z);I.children.push(this._build(_,N,L,O-1))}}return l(I,this.toBBox),I},o.prototype._chooseSubtree=function(_,E,S,O){for(;O.push(E),!(E.leaf||O.length-1===S);){for(var A=1/0,T=1/0,I=void 0,D=0;D<E.children.length;D++){var R=E.children[D],F=h(R),z=g(_,R)-F;z<T?(T=z,A=F<A?F:A,I=R):z===T&&F<A&&(A=F,I=R)}E=I||E.children[0]}return E},o.prototype._insert=function(_,E,S){var O=S?_:this.toBBox(_),A=[],T=this._chooseSubtree(O,this.data,E,A);for(T.children.push(_),c(T,O);E>=0&&A[E].children.length>this._maxEntries;)this._split(A,E),E--;this._adjustParentBBoxes(O,A,E)},o.prototype._split=function(_,E){var S=_[E],O=S.children.length,A=this._minEntries;this._chooseSplitAxis(S,A,O);var T=this._chooseSplitIndex(S,A,O),I=b(S.children.splice(T,S.children.length-T));I.height=S.height,I.leaf=S.leaf,l(S,this.toBBox),l(I,this.toBBox),E?_[E-1].children.push(I):this._splitRoot(S,I)},o.prototype._splitRoot=function(_,E){this.data=b([_,E]),this.data.height=_.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(_,E,S){for(var O,A=1/0,T=1/0,I=E;I<=S-E;I++){var D=u(_,0,I,this.toBBox),R=u(_,I,S,this.toBBox),F=v(D,R),z=h(D)+h(R);F<A?(A=F,O=I,T=z<T?z:T):F===A&&z<T&&(T=z,O=I)}return O||S-E},o.prototype._chooseSplitAxis=function(_,E,S){var O=_.leaf?this.compareMinX:f,A=_.leaf?this.compareMinY:d,T=this._allDistMargin(_,E,S,O),I=this._allDistMargin(_,E,S,A);T<I&&_.children.sort(O)},o.prototype._allDistMargin=function(_,E,S,O){_.children.sort(O);for(var A=this.toBBox,T=u(_,0,E,A),I=u(_,S-E,S,A),D=p(T)+p(I),R=E;R<S-E;R++){var F=_.children[R];c(T,_.leaf?A(F):F),D+=p(T)}for(var z=S-E-1;z>=E;z--){var N=_.children[z];c(I,_.leaf?A(N):N),D+=p(I)}return D},o.prototype._adjustParentBBoxes=function(_,E,S){for(var O=S;O>=0;O--)c(E[O],_)},o.prototype._condense=function(_){for(var E=_.length-1,S=void 0;E>=0;E--)_[E].children.length===0?E>0?(S=_[E-1].children,S.splice(S.indexOf(_[E]),1)):this.clear():l(_[E],this.toBBox)};function s(w,_,E){if(!E)return _.indexOf(w);for(var S=0;S<_.length;S++)if(E(w,_[S]))return S;return-1}function l(w,_){u(w,0,w.children.length,_,w)}function u(w,_,E,S,O){O||(O=b(null)),O.minX=1/0,O.minY=1/0,O.maxX=-1/0,O.maxY=-1/0;for(var A=_;A<E;A++){var T=w.children[A];c(O,w.leaf?S(T):T)}return O}function c(w,_){return w.minX=Math.min(w.minX,_.minX),w.minY=Math.min(w.minY,_.minY),w.maxX=Math.max(w.maxX,_.maxX),w.maxY=Math.max(w.maxY,_.maxY),w}function f(w,_){return w.minX-_.minX}function d(w,_){return w.minY-_.minY}function h(w){return(w.maxX-w.minX)*(w.maxY-w.minY)}function p(w){return w.maxX-w.minX+(w.maxY-w.minY)}function g(w,_){return(Math.max(_.maxX,w.maxX)-Math.min(_.minX,w.minX))*(Math.max(_.maxY,w.maxY)-Math.min(_.minY,w.minY))}function v(w,_){var E=Math.max(w.minX,_.minX),S=Math.max(w.minY,_.minY),O=Math.min(w.maxX,_.maxX),A=Math.min(w.maxY,_.maxY);return Math.max(0,O-E)*Math.max(0,A-S)}function m(w,_){return w.minX<=_.minX&&w.minY<=_.minY&&_.maxX<=w.maxX&&_.maxY<=w.maxY}function y(w,_){return _.minX<=w.maxX&&_.minY<=w.maxY&&_.maxX>=w.minX&&_.maxY>=w.minY}function b(w){return{children:w,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x(w,_,E,S,O){for(var A=[_,E];A.length;)if(E=A.pop(),_=A.pop(),!(E-_<=S)){var T=_+Math.ceil((E-_)/S/2)*S;n(w,T,_,E,O),A.push(_,T,T,E)}}return o})})(gee);var QMe=gee.exports,pe=function(t){return t.GROUP="g",t.FRAGMENT="fragment",t.CIRCLE="circle",t.ELLIPSE="ellipse",t.IMAGE="image",t.RECT="rect",t.LINE="line",t.POLYLINE="polyline",t.POLYGON="polygon",t.TEXT="text",t.PATH="path",t.HTML="html",t.MESH="mesh",t}({}),M1=function(t){return t[t.ZERO=0]="ZERO",t[t.NEGATIVE_ONE=1]="NEGATIVE_ONE",t}({}),Dc=function(){function t(){Ae(this,t),this.plugins=[]}return Te(t,[{key:"addRenderingPlugin",value:function(n){this.plugins.push(n),this.context.renderingPlugins.push(n)}},{key:"removeAllRenderingPlugins",value:function(){var n=this;this.plugins.forEach(function(r){var i=n.context.renderingPlugins.indexOf(r);i>=0&&n.context.renderingPlugins.splice(i,1)})}}])}(),eCe=function(){function t(e){Ae(this,t),this.clipSpaceNearZ=M1.NEGATIVE_ONE,this.plugins=[],this.config=It({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},e)}return Te(t,[{key:"registerPlugin",value:function(n){var r=this.plugins.findIndex(function(i){return i===n});r===-1&&this.plugins.push(n)}},{key:"unregisterPlugin",value:function(n){var r=this.plugins.findIndex(function(i){return i===n});r>-1&&this.plugins.splice(r,1)}},{key:"getPlugins",value:function(){return this.plugins}},{key:"getPlugin",value:function(n){return this.plugins.find(function(r){return r.name===n})}},{key:"getConfig",value:function(){return this.config}},{key:"setConfig",value:function(n){Object.assign(this.config,n)}}])}(),sE=ic,Ld=el,tCe=Mke,nCe=Tke,SF=Ob,lE=Dke,zn=function(){function t(){Ae(this,t),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return Te(t,[{key:"update",value:function(n,r){Ld(this.center,n),Ld(this.halfExtents,r),lE(this.min,this.center,this.halfExtents),sE(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(n,r){sE(this.center,r,n),SF(this.center,this.center,.5),lE(this.halfExtents,r,n),SF(this.halfExtents,this.halfExtents,.5),Ld(this.min,n),Ld(this.max,r)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(n){if(!t.isEmpty(n)){if(t.isEmpty(this)){this.setMinMax(n.getMin(),n.getMax());return}var r=this.center,i=r[0],a=r[1],o=r[2],s=this.halfExtents,l=s[0],u=s[1],c=s[2],f=i-l,d=i+l,h=a-u,p=a+u,g=o-c,v=o+c,m=n.center,y=m[0],b=m[1],x=m[2],w=n.halfExtents,_=w[0],E=w[1],S=w[2],O=y-_,A=y+_,T=b-E,I=b+E,D=x-S,R=x+S;O<f&&(f=O),A>d&&(d=A),T<h&&(h=T),I>p&&(p=I),D<g&&(g=D),R>v&&(v=R),r[0]=(f+d)*.5,r[1]=(h+p)*.5,r[2]=(g+v)*.5,s[0]=(d-f)*.5,s[1]=(p-h)*.5,s[2]=(v-g)*.5,this.min[0]=f,this.min[1]=h,this.min[2]=g,this.max[0]=d,this.max[1]=p,this.max[2]=v}}},{key:"setFromTransformedAABB",value:function(n,r){var i=this.center,a=this.halfExtents,o=n.center,s=n.halfExtents,l=r[0],u=r[4],c=r[8],f=r[1],d=r[5],h=r[9],p=r[2],g=r[6],v=r[10],m=Math.abs(l),y=Math.abs(u),b=Math.abs(c),x=Math.abs(f),w=Math.abs(d),_=Math.abs(h),E=Math.abs(p),S=Math.abs(g),O=Math.abs(v);i[0]=r[12]+l*o[0]+u*o[1]+c*o[2],i[1]=r[13]+f*o[0]+d*o[1]+h*o[2],i[2]=r[14]+p*o[0]+g*o[1]+v*o[2],a[0]=m*s[0]+y*s[1]+b*s[2],a[1]=x*s[0]+w*s[1]+_*s[2],a[2]=E*s[0]+S*s[1]+O*s[2],lE(this.min,i,a),sE(this.max,i,a)}},{key:"intersects",value:function(n){var r=this.getMax(),i=this.getMin(),a=n.getMax(),o=n.getMin();return i[0]<=a[0]&&r[0]>=o[0]&&i[1]<=a[1]&&r[1]>=o[1]&&i[2]<=a[2]&&r[2]>=o[2]}},{key:"intersection",value:function(n){if(!this.intersects(n))return null;var r=new t,i=tCe([0,0,0],this.getMin(),n.getMin()),a=nCe([0,0,0],this.getMax(),n.getMax());return r.setMinMax(i,a),r}},{key:"getNegativeFarPoint",value:function(n){return n.pnVertexFlag===273?Ld([0,0,0],this.min):n.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:n.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:n.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:n.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:n.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:n.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(n){return n.pnVertexFlag===273?Ld([0,0,0],this.max):n.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:n.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:n.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:n.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:n.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:n.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(n){return!n||n.halfExtents[0]===0&&n.halfExtents[1]===0&&n.halfExtents[2]===0}}])}(),rCe=function(){function t(e,n){Ae(this,t),this.distance=e||0,this.normal=n||ln(0,1,0),this.updatePNVertexFlag()}return Te(t,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(n){return tl(n,this.normal)-this.distance}},{key:"normalize",value:function(){var n=1/lJ(this.normal);Ob(this.normal,this.normal,n),this.distance*=n}},{key:"intersectsLine",value:function(n,r,i){var a=this.distanceToPoint(n),o=this.distanceToPoint(r),s=a/(a-o),l=s>=0&&s<=1;return l&&i&&k6(i,n,r,s),l}}])}(),Rd=function(t){return t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE",t}({}),iCe=function(){function t(e){if(Ae(this,t),this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new rCe)}return Te(t,[{key:"extractFromVPMatrix",value:function(n){var r=Ot(n,16),i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],f=r[7],d=r[8],h=r[9],p=r[10],g=r[11],v=r[12],m=r[13],y=r[14],b=r[15];aa(this.planes[0].normal,s-i,f-l,g-d),this.planes[0].distance=b-v,aa(this.planes[1].normal,s+i,f+l,g+d),this.planes[1].distance=b+v,aa(this.planes[2].normal,s+a,f+u,g+h),this.planes[2].distance=b+m,aa(this.planes[3].normal,s-a,f-u,g-h),this.planes[3].distance=b-m,aa(this.planes[4].normal,s-o,f-c,g-p),this.planes[4].distance=b-y,aa(this.planes[5].normal,s+o,f+c,g+p),this.planes[5].distance=b+y,this.planes.forEach(function(x){x.normalize(),x.updatePNVertexFlag()})}}])}(),$i=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ae(this,t),this.x=0,this.y=0,this.x=e,this.y=n}return Te(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"copyFrom",value:function(n){this.x=n.x,this.y=n.y}}])}(),Zh=function(){function t(e,n,r,i){Ae(this,t),this.x=e,this.y=n,this.width=r,this.height=i,this.left=e,this.right=e+r,this.top=n,this.bottom=n+i}return Te(t,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(n){return new t(n.x,n.y,n.width,n.height)}},{key:"applyTransform",value:function(n,r){var i=_g(n.x,n.y,0,1),a=_g(n.x+n.width,n.y,0,1),o=_g(n.x,n.y+n.height,0,1),s=_g(n.x+n.width,n.y+n.height,0,1),l=nl(),u=nl(),c=nl(),f=nl();rl(l,i,r),rl(u,a,r),rl(c,o,r),rl(f,s,r);var d=Math.min(l[0],u[0],c[0],f[0]),h=Math.min(l[1],u[1],c[1],f[1]),p=Math.max(l[0],u[0],c[0],f[0]),g=Math.max(l[1],u[1],c[1],f[1]);return t.fromRect({x:d,y:h,width:p-d,height:g-h})}}])}(),Tn="Method not implemented.",Nd="Use document.documentElement instead.",aCe="Cannot append a destroyed element.";function ph(t){return t===void 0?0:t>360||t<-360?t%360:t}var uE=Wt();function ma(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return Array.isArray(t)&&t.length===3?r?Nl(t):el(uE,t):je(t)?r?ln(t,e,n):aa(uE,t,e,n):r?ln(t[0],t[1]||e,t[2]||n):aa(uE,t[0],t[1]||e,t[2]||n)}var oCe=Math.PI/180;function Cn(t){return t*oCe}var sCe=180/Math.PI;function Pa(t){return t*sCe}function lCe(t){return 360*t}var zb=Math.PI/2;function uCe(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n,s=r*r,l=i*i,u=a*a,c=o+s+l+u,f=n*a-r*i;return f>.499995*c?(t[0]=zb,t[1]=2*Math.atan2(r,n),t[2]=0):f<-.499995*c?(t[0]=-zb,t[1]=2*Math.atan2(r,n),t[2]=0):(t[0]=Math.asin(2*(n*i-a*r)),t[1]=Math.atan2(2*(n*a+r*i),1-2*(l+u)),t[2]=Math.atan2(2*(n*r+i*a),1-2*(s+l))),t}function cCe(t,e){var n,r,i=$h(Wt(),e),a=Ot(i,3),o=a[0],s=a[1],l=a[2],u=Math.asin(-e[2]/o);return u<zb?u>-zb?(n=Math.atan2(e[6]/s,e[10]/l),r=Math.atan2(e[1]/o,e[0]/o)):(r=0,n=-Math.atan2(e[4]/s,e[5]/s)):(r=0,n=Math.atan2(e[4]/s,e[5]/s)),t[0]=n,t[1]=u,t[2]=r,t}function cE(t,e){return e.length===16?cCe(t,e):uCe(t,e)}function fCe(t,e,n,r,i){var a=Math.cos(t),o=Math.sin(t);return nke(r*a,i*o,0,-r*o,i*a,0,e,n,1)}function dCe(t,e,n,r,i,a,o){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,l=2*a,u=n-e,c=r-i,f=l/u,d=l/c,h=(n+e)/u,p=(r+i)/c,g,v,m=o-a,y=o*a;return s?(g=-o/m,v=-y/m):(g=-(o+a)/m,v=-2*y/m),t[0]=f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=d,t[6]=0,t[7]=0,t[8]=h,t[9]=p,t[10]=g,t[11]=-1,t[12]=0,t[13]=0,t[14]=v,t[15]=0,t}function EF(t){var e=t[0],n=t[1],r=t[3],i=t[4],a=Math.sqrt(e*e+n*n),o=Math.sqrt(r*r+i*i),s=e*i-n*r;if(s<0&&(e<i?a=-a:o=-o),a){var l=1/a;e*=l,n*=l}if(o){var u=1/o;r*=u,i*=u}var c=Math.atan2(n,e),f=Pa(c);return[t[6],t[7],a,o,f]}var zs=wn(),Qo=wn(),tg=nl(),_t=[Wt(),Wt(),Wt()],OF=Wt();function hCe(t,e,n,r,i,a){if(!pCe(zs,t)||(Bh(Qo,zs),Qo[3]=0,Qo[7]=0,Qo[11]=0,Qo[15]=1,Math.abs(YK(Qo))<1e-8))return!1;var o=zs[3],s=zs[7],l=zs[11],u=zs[12],c=zs[13],f=zs[14],d=zs[15];if(o!==0||s!==0||l!==0){tg[0]=o,tg[1]=s,tg[2]=l,tg[3]=d;var h=ms(Qo,Qo);if(!h)return!1;HK(Qo,Qo),rl(i,tg,Qo)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=u,e[1]=c,e[2]=f,gCe(_t,zs),n[0]=$l(_t[0]),Ef(_t[0],_t[0]),r[0]=tl(_t[0],_t[1]),fE(_t[1],_t[1],_t[0],1,-r[0]),n[1]=$l(_t[1]),Ef(_t[1],_t[1]),r[0]/=n[1],r[1]=tl(_t[0],_t[2]),fE(_t[2],_t[2],_t[0],1,-r[1]),r[2]=tl(_t[1],_t[2]),fE(_t[2],_t[2],_t[1],1,-r[2]),n[2]=$l(_t[2]),Ef(_t[2],_t[2]),r[1]/=n[2],r[2]/=n[2],k1(OF,_t[1],_t[2]),tl(_t[0],OF)<0)for(var p=0;p<3;p++)n[p]*=-1,_t[p][0]*=-1,_t[p][1]*=-1,_t[p][2]*=-1;return a[0]=.5*Math.sqrt(Math.max(1+_t[0][0]-_t[1][1]-_t[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-_t[0][0]+_t[1][1]-_t[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-_t[0][0]-_t[1][1]+_t[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+_t[0][0]+_t[1][1]+_t[2][2],0)),_t[2][1]>_t[1][2]&&(a[0]=-a[0]),_t[0][2]>_t[2][0]&&(a[1]=-a[1]),_t[1][0]>_t[0][1]&&(a[2]=-a[2]),!0}function pCe(t,e){var n=e[15];if(n===0)return!1;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return!0}function gCe(t,e){t[0][0]=e[0],t[0][1]=e[1],t[0][2]=e[2],t[1][0]=e[4],t[1][1]=e[5],t[1][2]=e[6],t[2][0]=e[8],t[2][1]=e[9],t[2][2]=e[10]}function fE(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}var An=function(t){return t[t.ORBITING=0]="ORBITING",t[t.EXPLORING=1]="EXPLORING",t[t.TRACKING=2]="TRACKING",t}({}),Y6=function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.ROTATIONAL=1]="ROTATIONAL",t[t.TRANSLATIONAL=2]="TRANSLATIONAL",t[t.CINEMATIC=3]="CINEMATIC",t}({}),wo=function(t){return t[t.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",t[t.PERSPECTIVE=1]="PERSPECTIVE",t}({}),vee={UPDATED:"updated"},kF=2e-4,mee=function(){function t(){Ae(this,t),this.clipSpaceNearZ=M1.NEGATIVE_ONE,this.eventEmitter=new cee,this.matrix=wn(),this.right=ln(1,0,0),this.up=ln(0,1,0),this.forward=ln(0,0,1),this.position=ln(0,0,1),this.focalPoint=ln(0,0,0),this.distanceVector=ln(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=wn(),this.projectionMatrixInverse=wn(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=An.EXPLORING,this.trackingMode=Y6.DEFAULT,this.projectionMode=wo.PERSPECTIVE,this.frustum=new iCe,this.orthoMatrix=wn()}return Te(t,[{key:"isOrtho",value:function(){return this.projectionMode===wo.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(n){this.enableUpdate=n}},{key:"setType",value:function(n,r){return this.type=n,this.type===An.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===An.TRACKING&&r!==void 0&&this.setTrackingMode(r),this}},{key:"setProjectionMode",value:function(n){return this.projectionMode=n,this}},{key:"setTrackingMode",value:function(n){if(this.type!==An.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=n,this}},{key:"setWorldRotation",value:function(n){return this.rotateWorld=n,this._getAngles(),this}},{key:"getViewTransform",value:function(){return ms(wn(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(n,r){var i=Bl(wn(),[n,r,0]);this.jitteredProjectionMatrix=oa(wn(),i,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(n){return this.matrix=n,this._update(),this}},{key:"setProjectionMatrix",value:function(n){this.projectionMatrix=n}},{key:"setFov",value:function(n){return this.setPerspective(this.near,this.far,n,this.aspect),this}},{key:"setAspect",value:function(n){return this.setPerspective(this.near,this.far,this.fov,n),this}},{key:"setNear",value:function(n){return this.projectionMode===wo.PERSPECTIVE?this.setPerspective(n,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,n,this.far),this}},{key:"setFar",value:function(n){return this.projectionMode===wo.PERSPECTIVE?this.setPerspective(this.near,n,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,n),this}},{key:"setViewOffset",value:function(n,r,i,a,o,s){return this.aspect=n/r,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=a,this.view.width=o,this.view.height=s,this.projectionMode===wo.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===wo.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(n){return this.zoom=n,this.projectionMode===wo.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===wo.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(n,r){var i=this.canvas.viewport2Canvas({x:r[0],y:r[1]}),a=i.x,o=i.y,s=this.roll;this.rotate(0,0,-s),this.setPosition(a,o),this.setFocalPoint(a,o),this.setZoom(n),this.rotate(0,0,s);var l=this.canvas.viewport2Canvas({x:r[0],y:r[1]}),u=l.x,c=l.y,f=ln(u-a,c-o,0),d=tl(f,this.right)/$l(this.right),h=tl(f,this.up)/$l(this.up),p=this.getPosition(),g=Ot(p,2),v=g[0],m=g[1],y=this.getFocalPoint(),b=Ot(y,2),x=b[0],w=b[1];return this.setPosition(v-d,m-h),this.setFocalPoint(x-d,w-h),this}},{key:"setPerspective",value:function(n,r,i,a){var o;this.projectionMode=wo.PERSPECTIVE,this.fov=i,this.near=n,this.far=r,this.aspect=a;var s=this.near*Math.tan(Cn(.5*this.fov))/this.zoom,l=2*s,u=this.aspect*l,c=-.5*u;if((o=this.view)!==null&&o!==void 0&&o.enabled){var f=this.view.fullWidth,d=this.view.fullHeight;c+=this.view.offsetX*u/f,s-=this.view.offsetY*l/d,u*=this.view.width/f,l*=this.view.height/d}return dCe(this.projectionMatrix,c,c+u,s-l,s,n,this.far,this.clipSpaceNearZ===M1.ZERO),ms(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(n,r,i,a,o,s){var l;this.projectionMode=wo.ORTHOGRAPHIC,this.rright=r,this.left=n,this.top=i,this.bottom=a,this.near=o,this.far=s;var u=(this.rright-this.left)/(2*this.zoom),c=(this.top-this.bottom)/(2*this.zoom),f=(this.rright+this.left)/2,d=(this.top+this.bottom)/2,h=f-u,p=f+u,g=d+c,v=d-c;if((l=this.view)!==null&&l!==void 0&&l.enabled){var m=(this.rright-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=m*this.view.offsetX,p=h+m*this.view.width,g-=y*this.view.offsetY,v=g-y*this.view.height}return this.clipSpaceNearZ===M1.NEGATIVE_ONE?rJ(this.projectionMatrix,h,p,g,v,o,s):iJ(this.projectionMatrix,h,p,g,v,o,s),ms(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.position[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.position[2],a=ma(n,r,i);return this._setPosition(a),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.focalPoint[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.focalPoint[2],a=ln(0,1,0);if(this.focalPoint=ma(n,r,i),this.trackingMode===Y6.CINEMATIC){var o=O6(Wt(),this.focalPoint,this.position);n=o[0],r=o[1],i=o[2];var s=$l(o),l=Pa(Math.asin(r/s)),u=90+Pa(Math.atan2(i,n)),c=wn();ZK(c,c,Cn(u)),XK(c,c,Cn(l)),a=Cr(Wt(),[0,1,0],c)}return ms(this.matrix,aJ(wn(),this.position,this.focalPoint,a)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(n){if(this.distance===n||n<0)return this;this.distance=n,this.distance<kF&&(this.distance=kF),this.dollyingStep=this.distance/100;var r=Wt();n=this.distance;var i=this.forward,a=this.focalPoint;return r[0]=n*i[0]+a[0],r[1]=n*i[1]+a[1],r[2]=n*i[2]+a[2],this._setPosition(r),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(n){return this.maxDistance=n,this}},{key:"setMinDistance",value:function(n){return this.minDistance=n,this}},{key:"setAzimuth",value:function(n){return this.azimuth=ph(n),this.computeMatrix(),this._getAxes(),this.type===An.ORBITING||this.type===An.EXPLORING?this._getPosition():this.type===An.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(n){return this.elevation=ph(n),this.computeMatrix(),this._getAxes(),this.type===An.ORBITING||this.type===An.EXPLORING?this._getPosition():this.type===An.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(n){return this.roll=ph(n),this.computeMatrix(),this._getAxes(),this.type===An.ORBITING||this.type===An.EXPLORING?this._getPosition():this.type===An.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var n=Yu(gi(),[0,0,1],Cn(this.roll));yc(this.matrix);var r=Yu(gi(),[1,0,0],Cn((this.rotateWorld&&this.type!==An.TRACKING||this.type===An.TRACKING?1:-1)*this.elevation)),i=Yu(gi(),[0,1,0],Cn((this.rotateWorld&&this.type!==An.TRACKING||this.type===An.TRACKING?1:-1)*this.azimuth)),a=ac(gi(),i,r);a=ac(gi(),a,n);var o=AI(wn(),a);this.type===An.ORBITING||this.type===An.EXPLORING?(hh(this.matrix,this.matrix,this.focalPoint),oa(this.matrix,this.matrix,o),hh(this.matrix,this.matrix,[0,0,this.distance])):this.type===An.TRACKING&&(hh(this.matrix,this.matrix,this.position),oa(this.matrix,this.matrix,o))}},{key:"_setPosition",value:function(n,r,i){this.position=ma(n,r,i);var a=this.matrix;a[12]=this.position[0],a[13]=this.position[1],a[14]=this.position[2],a[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){el(this.right,ma(rl(nl(),[1,0,0,0],this.matrix))),el(this.up,ma(rl(nl(),[0,1,0,0],this.matrix))),el(this.forward,ma(rl(nl(),[0,0,1,0],this.matrix))),Ef(this.right,this.right),Ef(this.up,this.up),Ef(this.forward,this.forward)}},{key:"_getAngles",value:function(){var n=this.distanceVector[0],r=this.distanceVector[1],i=this.distanceVector[2],a=$l(this.distanceVector);if(a===0){this.elevation=0,this.azimuth=0;return}this.type===An.TRACKING?(this.elevation=Pa(Math.asin(r/a)),this.azimuth=Pa(Math.atan2(-n,-i))):this.rotateWorld?(this.elevation=Pa(Math.asin(r/a)),this.azimuth=Pa(Math.atan2(-n,-i))):(this.elevation=-Pa(Math.asin(r/a)),this.azimuth=-Pa(Math.atan2(-n,-i)))}},{key:"_getPosition",value:function(){el(this.position,ma(rl(nl(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){sJ(this.distanceVector,[0,0,-this.distance],eke(mp(),this.matrix)),ic(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=O6(Wt(),this.focalPoint,this.position),this.distance=$l(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===wo.ORTHOGRAPHIC){var n=this.position,r=Yu(gi(),[0,0,1],-this.roll*Math.PI/180);Yg(this.orthoMatrix,r,ln((this.rright-this.left)/2-n[0],(this.top-this.bottom)/2-n[1],0),ln(this.zoom,this.zoom,1),n)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var n=this.getViewTransform(),r=oa(wn(),this.getPerspective(),n);this.getFrustum().extractFromVPMatrix(r),this.eventEmitter.emit(vee.UPDATED)}}},{key:"rotate",value:function(n,r,i){throw new Error(Tn)}},{key:"pan",value:function(n,r){throw new Error(Tn)}},{key:"dolly",value:function(n){throw new Error(Tn)}},{key:"createLandmark",value:function(n,r){throw new Error(Tn)}},{key:"gotoLandmark",value:function(n,r){throw new Error(Tn)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error(Tn)}}])}(),vCe=function(t){return t[t.Standard=0]="Standard",t}({}),jb=function(t){return t[t.ADDED=0]="ADDED",t[t.REMOVED=1]="REMOVED",t[t.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",t}({}),yee={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Zh(0,0,0,0)},Ne=function(t){return t.COORDINATE="<coordinate>",t.COLOR="<color>",t.PAINT="<paint>",t.NUMBER="<number>",t.ANGLE="<angle>",t.OPACITY_VALUE="<opacity-value>",t.SHADOW_BLUR="<shadow-blur>",t.LENGTH="<length>",t.PERCENTAGE="<percentage>",t.LENGTH_PERCENTAGE="<length> | <percentage>",t.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",t.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",t.LIST_OF_POINTS="<list-of-points>",t.PATH="<path>",t.FILTER="<filter>",t.Z_INDEX="<z-index>",t.OFFSET_DISTANCE="<offset-distance>",t.DEFINED_PATH="<defined-path>",t.MARKER="<marker>",t.TRANSFORM="<transform>",t.TRANSFORM_ORIGIN="<transform-origin>",t.TEXT="<text>",t.TEXT_TRANSFORM="<text-transform>",t}({});function iL(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function bee(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Vv(){}var j0=.7,Bb=1/j0,gh="\\s*([+-]?\\d+)\\s*",B0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ll="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mCe=/^#([0-9a-f]{3,8})$/,yCe=new RegExp(`^rgb\\(${gh},${gh},${gh}\\)$`),bCe=new RegExp(`^rgb\\(${ll},${ll},${ll}\\)$`),xCe=new RegExp(`^rgba\\(${gh},${gh},${gh},${B0}\\)$`),wCe=new RegExp(`^rgba\\(${ll},${ll},${ll},${B0}\\)$`),_Ce=new RegExp(`^hsl\\(${B0},${ll},${ll}\\)$`),SCe=new RegExp(`^hsla\\(${B0},${ll},${ll},${B0}\\)$`),AF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iL(Vv,R2,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:TF,formatHex:TF,formatHex8:ECe,formatHsl:OCe,formatRgb:MF,toString:MF});function TF(){return this.rgb().formatHex()}function ECe(){return this.rgb().formatHex8()}function OCe(){return xee(this).formatHsl()}function MF(){return this.rgb().formatRgb()}function R2(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=mCe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?CF(e):n===3?new La(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ny(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ny(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=yCe.exec(t))?new La(e[1],e[2],e[3],1):(e=bCe.exec(t))?new La(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xCe.exec(t))?ny(e[1],e[2],e[3],e[4]):(e=wCe.exec(t))?ny(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_Ce.exec(t))?IF(e[1],e[2]/100,e[3]/100,1):(e=SCe.exec(t))?IF(e[1],e[2]/100,e[3]/100,e[4]):AF.hasOwnProperty(t)?CF(AF[t]):t==="transparent"?new La(NaN,NaN,NaN,0):null}function CF(t){return new La(t>>16&255,t>>8&255,t&255,1)}function ny(t,e,n,r){return r<=0&&(t=e=n=NaN),new La(t,e,n,r)}function kCe(t){return t instanceof Vv||(t=R2(t)),t?(t=t.rgb(),new La(t.r,t.g,t.b,t.opacity)):new La}function ACe(t,e,n,r){return arguments.length===1?kCe(t):new La(t,e,n,r??1)}function La(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}iL(La,ACe,bee(Vv,{brighter(t){return t=t==null?Bb:Math.pow(Bb,t),new La(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?j0:Math.pow(j0,t),new La(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new La(Of(this.r),Of(this.g),Of(this.b),$b(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:PF,formatHex:PF,formatHex8:TCe,formatRgb:DF,toString:DF}));function PF(){return`#${ff(this.r)}${ff(this.g)}${ff(this.b)}`}function TCe(){return`#${ff(this.r)}${ff(this.g)}${ff(this.b)}${ff((isNaN(this.opacity)?1:this.opacity)*255)}`}function DF(){const t=$b(this.opacity);return`${t===1?"rgb(":"rgba("}${Of(this.r)}, ${Of(this.g)}, ${Of(this.b)}${t===1?")":`, ${t})`}`}function $b(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Of(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ff(t){return t=Of(t),(t<16?"0":"")+t.toString(16)}function IF(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new hs(t,e,n,r)}function xee(t){if(t instanceof hs)return new hs(t.h,t.s,t.l,t.opacity);if(t instanceof Vv||(t=R2(t)),!t)return new hs;if(t instanceof hs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new hs(o,s,l,t.opacity)}function MCe(t,e,n,r){return arguments.length===1?xee(t):new hs(t,e,n,r??1)}function hs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}iL(hs,MCe,bee(Vv,{brighter(t){return t=t==null?Bb:Math.pow(Bb,t),new hs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?j0:Math.pow(j0,t),new hs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new La(dE(t>=240?t-240:t+120,i,r),dE(t,i,r),dE(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new hs(LF(this.h),ry(this.s),ry(this.l),$b(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=$b(this.opacity);return`${t===1?"hsl(":"hsla("}${LF(this.h)}, ${ry(this.s)*100}%, ${ry(this.l)*100}%${t===1?")":`, ${t})`}`}}));function LF(t){return t=(t||0)%360,t<0?t+360:t}function ry(t){return Math.max(0,Math.min(1,t||0))}function dE(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function si(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var n=function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=e?e.apply(this,a):a[0],l=n.cache;if(l.has(s))return l.get(s);var u=t.apply(this,a);return n.cache=l.set(s,u)||l,u};return n.cache=new(si.Cache||Map),si.cacheList.push(n.cache),n}si.Cache=Map;si.cacheList=[];si.clearCache=function(){si.cacheList.forEach(function(t){return t.clear()})};var Ve=function(t){return t[t.kUnknown=0]="kUnknown",t[t.kNumber=1]="kNumber",t[t.kPercentage=2]="kPercentage",t[t.kEms=3]="kEms",t[t.kPixels=4]="kPixels",t[t.kRems=5]="kRems",t[t.kDegrees=6]="kDegrees",t[t.kRadians=7]="kRadians",t[t.kGradians=8]="kGradians",t[t.kTurns=9]="kTurns",t[t.kMilliseconds=10]="kMilliseconds",t[t.kSeconds=11]="kSeconds",t[t.kInteger=12]="kInteger",t}({}),ds=function(t){return t[t.kUNumber=0]="kUNumber",t[t.kUPercent=1]="kUPercent",t[t.kULength=2]="kULength",t[t.kUAngle=3]="kUAngle",t[t.kUTime=4]="kUTime",t[t.kUOther=5]="kUOther",t}({}),CCe=function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t}({}),PCe=function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t}({}),DCe=[{name:"em",unit_type:Ve.kEms},{name:"px",unit_type:Ve.kPixels},{name:"deg",unit_type:Ve.kDegrees},{name:"rad",unit_type:Ve.kRadians},{name:"grad",unit_type:Ve.kGradians},{name:"ms",unit_type:Ve.kMilliseconds},{name:"s",unit_type:Ve.kSeconds},{name:"rem",unit_type:Ve.kRems},{name:"turn",unit_type:Ve.kTurns}],Kh=function(t){return t[t.kUnknownType=0]="kUnknownType",t[t.kUnparsedType=1]="kUnparsedType",t[t.kKeywordType=2]="kKeywordType",t[t.kUnitType=3]="kUnitType",t[t.kSumType=4]="kSumType",t[t.kProductType=5]="kProductType",t[t.kNegateType=6]="kNegateType",t[t.kInvertType=7]="kInvertType",t[t.kMinType=8]="kMinType",t[t.kMaxType=9]="kMaxType",t[t.kClampType=10]="kClampType",t[t.kTransformType=11]="kTransformType",t[t.kPositionType=12]="kPositionType",t[t.kURLImageType=13]="kURLImageType",t[t.kColorType=14]="kColorType",t[t.kUnsupportedColorType=15]="kUnsupportedColorType",t}({}),ICe=function(e){return DCe.find(function(n){return n.name===e}).unit_type},LCe=function(e){return e?e==="number"?Ve.kNumber:e==="percent"||e==="%"?Ve.kPercentage:ICe(e):Ve.kUnknown},RCe=function(e){switch(e){case Ve.kNumber:case Ve.kInteger:return ds.kUNumber;case Ve.kPercentage:return ds.kUPercent;case Ve.kPixels:return ds.kULength;case Ve.kMilliseconds:case Ve.kSeconds:return ds.kUTime;case Ve.kDegrees:case Ve.kRadians:case Ve.kGradians:case Ve.kTurns:return ds.kUAngle;default:return ds.kUOther}},NCe=function(e){switch(e){case ds.kUNumber:return Ve.kNumber;case ds.kULength:return Ve.kPixels;case ds.kUPercent:return Ve.kPercentage;case ds.kUTime:return Ve.kSeconds;case ds.kUAngle:return Ve.kDegrees;default:return Ve.kUnknown}},RF=function(e){var n=1;switch(e){case Ve.kPixels:case Ve.kDegrees:case Ve.kSeconds:break;case Ve.kMilliseconds:n=.001;break;case Ve.kRadians:n=180/Math.PI;break;case Ve.kGradians:n=.9;break;case Ve.kTurns:n=360;break}return n},U6=function(e){switch(e){case Ve.kNumber:case Ve.kInteger:return"";case Ve.kPercentage:return"%";case Ve.kEms:return"em";case Ve.kRems:return"rem";case Ve.kPixels:return"px";case Ve.kDegrees:return"deg";case Ve.kRadians:return"rad";case Ve.kGradians:return"grad";case Ve.kMilliseconds:return"ms";case Ve.kSeconds:return"s";case Ve.kTurns:return"turn"}return""},N2=function(){function t(){Ae(this,t)}return Te(t,[{key:"toString",value:function(){return this.buildCSSText(CCe.kNo,PCe.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=Kh.kUnitType&&this.getType()<=Kh.kClampType}}],[{key:"isAngle",value:function(n){return n===Ve.kDegrees||n===Ve.kRadians||n===Ve.kGradians||n===Ve.kTurns}},{key:"isLength",value:function(n){return n>=Ve.kEms&&n<Ve.kDegrees}},{key:"isRelativeUnit",value:function(n){return n===Ve.kPercentage||n===Ve.kEms||n===Ve.kRems}},{key:"isTime",value:function(n){return n===Ve.kSeconds||n===Ve.kMilliseconds}}])}(),FCe=function(t){function e(n){var r;return Ae(this,e),r=Nt(this,e),r.colorSpace=n,r}return Ft(e,t),Te(e,[{key:"getType",value:function(){return Kh.kColorType}},{key:"to",value:function(r){return this}}])}(N2),Uu=function(t){return t[t.Constant=0]="Constant",t[t.LinearGradient=1]="LinearGradient",t[t.RadialGradient=2]="RadialGradient",t}({}),iy=function(t){function e(n,r){var i;return Ae(this,e),i=Nt(this,e),i.type=n,i.value=r,i}return Ft(e,t),Te(e,[{key:"clone",value:function(){return new e(this.type,this.value)}},{key:"buildCSSText",value:function(r,i,a){return a}},{key:"getType",value:function(){return Kh.kColorType}}])}(N2),Yo=function(t){function e(n){var r;return Ae(this,e),r=Nt(this,e),r.value=n,r}return Ft(e,t),Te(e,[{key:"clone",value:function(){return new e(this.value)}},{key:"getType",value:function(){return Kh.kKeywordType}},{key:"buildCSSText",value:function(r,i,a){return a+this.value}}])}(N2),zCe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r="";return Number.isFinite(e)?r="NaN":e>0?r="infinity":r="-infinity",r+=n},X6=function(e){return NCe(RCe(e))},Mn=function(t){function e(n){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ve.kNumber;Ae(this,e),r=Nt(this,e);var a;return typeof i=="string"?a=LCe(i):a=i,r.unit=a,r.value=n,r}return Ft(e,t),Te(e,[{key:"clone",value:function(){return new e(this.value,this.unit)}},{key:"equals",value:function(r){var i=r;return this.value===i.value&&this.unit===i.unit}},{key:"getType",value:function(){return Kh.kUnitType}},{key:"convertTo",value:function(r){if(this.unit===r)return new e(this.value,this.unit);var i=X6(this.unit);if(i!==X6(r)||i===Ve.kUnknown)return null;var a=RF(this.unit)/RF(r);return new e(this.value*a,r)}},{key:"buildCSSText",value:function(r,i,a){var o;switch(this.unit){case Ve.kUnknown:break;case Ve.kInteger:o=Number(this.value).toFixed(0);break;case Ve.kNumber:case Ve.kPercentage:case Ve.kEms:case Ve.kRems:case Ve.kPixels:case Ve.kDegrees:case Ve.kRadians:case Ve.kGradians:case Ve.kMilliseconds:case Ve.kSeconds:case Ve.kTurns:{var s=-999999,l=999999,u=this.value,c=U6(this.unit);if(u<s||u>l){var f=U6(this.unit);!Number.isFinite(u)||Number.isNaN(u)?o=zCe(u,f):o=u+(f||"")}else o="".concat(u).concat(c)}}return a+=o,a}}])}(N2),ns=new Mn(0,"px");new Mn(1,"px");var qf=new Mn(0,"deg"),aL=function(t){function e(n,r,i){var a,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return Ae(this,e),a=Nt(this,e,["rgb"]),a.r=n,a.g=r,a.b=i,a.alpha=o,a.isNone=s,a}return Ft(e,t),Te(e,[{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(r,i,a){return"".concat(a,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])}(FCe),NF=new Yo("unset"),jCe=new Yo("initial"),BCe=new Yo("inherit"),hE={"":NF,unset:NF,initial:jCe,inherit:BCe},$Ce=function(e){return hE[e]||(hE[e]=new Yo(e)),hE[e]},wee=new aL(0,0,0,0,!0),_ee=new aL(0,0,0,0),VCe=si(function(t,e,n,r){return new aL(t,e,n,r)},function(t,e,n,r){return"rgba(".concat(t,",").concat(e,",").concat(n,",").concat(r,")")}),lr=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ve.kNumber;return new Mn(e,n)};new Mn(50,"%");function qCe(t){var e=t.type,n=t.value;return e==="hex"?"#".concat(n):e==="literal"?n:e==="rgb"?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}var WCe=function(){var t={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},e="";function n(N){throw new Error("".concat(e,": ").concat(N))}function r(){var N=i();return e.length>0&&n("Invalid input not EOF"),N}function i(){return b(a)}function a(){return o("linear-gradient",t.linearGradient,l)||o("repeating-linear-gradient",t.repeatingLinearGradient,l)||o("radial-gradient",t.radialGradient,f)||o("repeating-radial-gradient",t.repeatingRadialGradient,f)||o("conic-gradient",t.conicGradient,f)}function o(N,L,B){return s(L,function($){var G=B();return G&&(F(t.comma)||n("Missing comma before color stops")),{type:N,orientation:G,colorStops:b(x)}})}function s(N,L){var B=F(N);if(B){F(t.startCall)||n("Missing (");var $=L(B);return F(t.endCall)||n("Missing )"),$}}function l(){return u()||c()}function u(){return R("directional",t.sideOrCorner,1)}function c(){return R("angular",t.angleValue,1)}function f(){var N,L=d(),B;return L&&(N=[],N.push(L),B=e,F(t.comma)&&(L=d(),L?N.push(L):e=B)),N}function d(){var N=h()||p();if(N)N.at=v();else{var L=g();if(L){N=L;var B=v();B&&(N.at=B)}else{var $=m();$&&(N={type:"default-radial",at:$})}}return N}function h(){var N=R("shape",/^(circle)/i,0);return N&&(N.style=D()||g()),N}function p(){var N=R("shape",/^(ellipse)/i,0);return N&&(N.style=T()||g()),N}function g(){return R("extent-keyword",t.extentKeywords,1)}function v(){if(R("position",/^at/,0)){var N=m();return N||n("Missing positioning value"),N}}function m(){var N=y();if(N.x||N.y)return{type:"position",value:N}}function y(){return{x:T(),y:T()}}function b(N){var L=N(),B=[];if(L)for(B.push(L);F(t.comma);)L=N(),L?B.push(L):n("One extra comma");return B}function x(){var N=w();return N||n("Expected color definition"),N.length=T(),N}function w(){return E()||O()||S()||_()}function _(){return R("literal",t.literalColor,0)}function E(){return R("hex",t.hexColor,1)}function S(){return s(t.rgbColor,function(){return{type:"rgb",value:b(A)}})}function O(){return s(t.rgbaColor,function(){return{type:"rgba",value:b(A)}})}function A(){return F(t.number)[1]}function T(){return R("%",t.percentageValue,1)||I()||D()}function I(){return R("position-keyword",t.positionKeywords,1)}function D(){return R("px",t.pixelValue,1)||R("em",t.emValue,1)}function R(N,L,B){var $=F(L);if($)return{type:N,value:$[B]}}function F(N){var L=/^[\n\r\t\s]+/.exec(e);L&&z(L[0].length);var B=N.exec(e);return B&&z(B[0].length),B}function z(N){e=e.substring(N)}return function(N){return e=N,r()}}();function GCe(t,e,n,r){var i=Cn(r.value),a=0,o=0,s=a+e/2,l=o+n/2,u=Math.abs(e*Math.cos(i))+Math.abs(n*Math.sin(i)),c=t[0]+s-Math.cos(i)*u/2,f=t[1]+l-Math.sin(i)*u/2,d=t[0]+s+Math.cos(i)*u/2,h=t[1]+l+Math.sin(i)*u/2;return{x1:c,y1:f,x2:d,y2:h}}function HCe(t,e,n,r,i,a){var o=r.value,s=i.value;r.unit===Ve.kPercentage&&(o=r.value/100*e),i.unit===Ve.kPercentage&&(s=i.value/100*n);var l=Math.max(Ca([0,0],[o,s]),Ca([0,n],[o,s]),Ca([e,n],[o,s]),Ca([e,0],[o,s]));return a&&(a instanceof Mn?l=a.value:a instanceof Yo&&(a.value==="closest-side"?l=Math.min(o,e-o,s,n-s):a.value==="farthest-side"?l=Math.max(o,e-o,s,n-s):a.value==="closest-corner"&&(l=Math.min(Ca([0,0],[o,s]),Ca([0,n],[o,s]),Ca([e,n],[o,s]),Ca([e,0],[o,s]))))),{x:o+t[0],y:s+t[1],r:l}}var YCe=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,UCe=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,XCe=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,See=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function ZCe(t){var e,n=t.length;if(t[n-1].length=(e=t[n-1].length)!==null&&e!==void 0?e:{type:"%",value:"100"},n>1){var r;t[0].length=(r=t[0].length)!==null&&r!==void 0?r:{type:"%",value:"0"}}for(var i=0,a=Number(t[0].length.value),o=1;o<n;o++){var s,l=(s=t[o].length)===null||s===void 0?void 0:s.value;if(!lt(l)&&!lt(a)){for(var u=1;u<o-i;u++)t[i+u].length={type:"%",value:"".concat(a+(Number(l)-a)*u/(o-i))};i=o,a=Number(l)}}}var KCe={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},JCe=si(function(t){var e;return t.type==="angular"?e=Number(t.value):e=KCe[t.value]||0,lr(e,"deg")}),QCe=si(function(t){var e=50,n=50,r="%",i="%";if((t==null?void 0:t.type)==="position"){var a=t.value,o=a.x,s=a.y;(o==null?void 0:o.type)==="position-keyword"&&(o.value==="left"?e=0:o.value==="center"?e=50:o.value==="right"?e=100:o.value==="top"?n=0:o.value==="bottom"&&(n=100)),(s==null?void 0:s.type)==="position-keyword"&&(s.value==="left"?e=0:s.value==="center"?n=50:s.value==="right"?e=100:s.value==="top"?n=0:s.value==="bottom"&&(n=100)),((o==null?void 0:o.type)==="px"||(o==null?void 0:o.type)==="%"||(o==null?void 0:o.type)==="em")&&(r=o==null?void 0:o.type,e=Number(o.value)),((s==null?void 0:s.type)==="px"||(s==null?void 0:s.type)==="%"||(s==null?void 0:s.type)==="em")&&(i=s==null?void 0:s.type,n=Number(s.value))}return{cx:lr(e,r),cy:lr(n,i)}}),e6e=si(function(t){if(t.indexOf("linear")>-1||t.indexOf("radial")>-1){var e=WCe(t);return e.map(function(s){var l=s.type,u=s.orientation,c=s.colorStops;ZCe(c);var f=c.map(function(b){return{offset:lr(Number(b.length.value),"%"),color:qCe(b)}});if(l==="linear-gradient")return new iy(Uu.LinearGradient,{angle:u?JCe(u):qf,steps:f});if(l==="radial-gradient"&&(u||(u=[{type:"shape",value:"circle"}]),u[0].type==="shape"&&u[0].value==="circle")){var d=QCe(u[0].at),h=d.cx,p=d.cy,g;if(u[0].style){var v=u[0].style,m=v.type,y=v.value;m==="extent-keyword"?g=$Ce(y):g=lr(y,m)}return new iy(Uu.RadialGradient,{cx:h,cy:p,size:g,steps:f})}})}var n=t[0];if(t[1]==="("||t[2]==="("){if(n==="l"){var r=YCe.exec(t);if(r){var i,a=((i=r[2].match(See))===null||i===void 0?void 0:i.map(function(s){return s.split(":")}))||[];return[new iy(Uu.LinearGradient,{angle:lr(parseFloat(r[1]),"deg"),steps:a.map(function(s){var l=Ot(s,2),u=l[0],c=l[1];return{offset:lr(Number(u)*100,"%"),color:c}})})]}}else if(n==="r"){var o=t6e(t);if(o)if(an(o))t=o;else return[new iy(Uu.RadialGradient,o)]}else if(n==="p")return n6e(t)}});function t6e(t){var e=UCe.exec(t);if(e){var n,r=((n=e[4].match(See))===null||n===void 0?void 0:n.map(function(i){return i.split(":")}))||[];return{cx:lr(50,"%"),cy:lr(50,"%"),steps:r.map(function(i){var a=Ot(i,2),o=a[0],s=a[1];return{offset:lr(Number(o)*100,"%"),color:s}})}}return null}function n6e(t){var e=XCe.exec(t);if(e){var n=e[1],r=e[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;case"n":n="no-repeat";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}function Wf(t){return t&&!!t.image}function Vb(t){return t&&!lt(t.r)&&!lt(t.g)&&!lt(t.b)}var sc=si(function(t){if(Wf(t))return It({repetition:"repeat"},t);if(lt(t)&&(t=""),t==="transparent")return _ee;if(t==="currentColor")t="black";else if(t==="none")return wee;var e=e6e(t);if(e)return e;var n=R2(t),r=[0,0,0,0];return n!==null&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),VCe.apply(void 0,r)});function r6e(t,e){if(!(!Vb(t)||!Vb(e)))return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(n){var r=n.slice();if(r[3])for(var i=0;i<3;i++)r[i]=Math.round(jn(r[i],0,255));return r[3]=jn(r[3],0,1),"rgba(".concat(r.join(","),")")}]}function qv(t,e){if(lt(e))return lr(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(t)>=0)return lr(Number(e),"px");if("deg".search(t)>=0)return lr(Number(e),"deg")}var n=[];e=e.replace(t,function(i){return n.push(i),"U".concat(i)});var r="U(".concat(t.source,")");return n.map(function(i){return lr(Number(e.replace(new RegExp("U".concat(i),"g"),"").replace(new RegExp(r,"g"),"*0")),i)})[0]}var Eee=function(e){return qv(new RegExp("px","g"),e)},i6e=si(Eee),a6e=function(e){return qv(new RegExp("%","g"),e)};si(a6e);var Oee=function(e){return je(e)||isFinite(Number(e))?lr(Number(e)||0,"px"):qv(new RegExp("px|%|em|rem","g"),e)},Z6=si(Oee),kee=function(e){return qv(new RegExp("deg|rad|grad|turn","g"),e)},o6e=si(kee);function s6e(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a="",o=t.value||0,s=e.value||0,l=X6(t.unit),u=t.convertTo(l),c=e.convertTo(l);return u&&c?(o=u.value,s=c.value,a=U6(t.unit)):(Mn.isLength(t.unit)||Mn.isLength(e.unit))&&(o=Ja(t,i,n),s=Ja(e,i,n),a="px"),[o,s,function(f){return f+a}]}function Da(t){var e=0;return t.unit===Ve.kDegrees?e=t.value:t.unit===Ve.kRadians?e=Pa(Number(t.value)):t.unit===Ve.kTurns?e=lCe(Number(t.value)):t.value&&(e=t.value),e}function FF(t,e){var n;return Array.isArray(t)?n=t.map(function(r){return Number(r)}):an(t)?n=t.split(" ").map(function(r){return Number(r)}):je(t)&&(n=[t]),e===2?n.length===1?[n[0],n[0]]:[n[0],n[1]]:e===4?n.length===1?[n[0],n[0],n[0],n[0]]:n.length===2?[n[0],n[1],n[0],n[1]]:n.length===3?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]:e==="even"&&n.length%2===1?[].concat(Bt(n),Bt(n)):n}function Ja(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t.unit===Ve.kPixels)return Number(t.value);if(t.unit===Ve.kPercentage&&n){var i=n.nodeName===pe.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[e]:0)+t.value/100*i.halfExtents[e]*2}return 0}var l6e=function(e){return qv(/deg|rad|grad|turn|px|%/g,e)},u6e=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function c6e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(t=t.toLowerCase().trim(),t==="none")return[];for(var e=/\s*([\w-]+)\(([^)]*)\)/g,n=[],r,i=0;r=e.exec(t);){if(r.index!==i)return[];if(i=r.index+r[0].length,u6e.indexOf(r[1])>-1&&n.push({name:r[1],params:r[2].split(" ").map(function(a){return l6e(a)||sc(a)})}),e.lastIndex===t.length)return n}return[]}function Aee(t){return t.toString()}var Tee=function(e){return typeof e=="number"?lr(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?lr(Number(e)):lr(0)},K6=si(Tee);si(function(t){return an(t)?t.split(" ").map(K6):t.map(K6)});function oL(t,e){return[t,e,Aee]}function sL(t,e){return function(n,r){return[n,r,function(i){return Aee(jn(i,t,e))}]}}function Mee(t,e){if(t.length===e.length)return[t,e,function(n){return n}]}function J6(t){return t.parsedStyle.d.totalLength===0&&(t.parsedStyle.d.totalLength=dAe(t.parsedStyle.d.absolutePath)),t.parsedStyle.d.totalLength}function f6e(t){return t.parsedStyle.points.totalLength===0&&(t.parsedStyle.points.totalLength=YMe(t.parsedStyle.points.points)),t.parsedStyle.points.totalLength}function d6e(t){for(var e=0;e<t.length;e++){var n=t[e-1],r=t[e],i=r[0];if(i==="M"&&n){var a=n[0],o=[r[1],r[2]],s=void 0;a==="L"||a==="M"?s=[n[1],n[2]]:(a==="C"||a==="A"||a==="Q")&&(s=[n[n.length-2],n[n.length-1]]),s&&qb(o,s)&&(t.splice(e,1),e--)}}}function h6e(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r],a=i[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function p6e(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var a=t[i],o=a[0];o==="M"?(r.length&&(n.push(r),r=[]),r.push([a[1],a[2]])):o==="Z"?r.length&&(e.push(r),r=[]):r.push([a[1],a[2]])}return r.length>0&&n.push(r),{polygons:e,polylines:n}}function qb(t,e){return t[0]===e[0]&&t[1]===e[1]}function g6e(t,e){for(var n=[],r=[],i=[],a=0;a<t.length;a++){var o=t[a],s=o.currentPoint,l=o.params,u=o.prePoint,c=void 0;switch(o.command){case"Q":c=UMe(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":c=WMe(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=o.arcParams;c=$Me(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:n.push(s[0]),r.push(s[1]);break}c&&(o.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height))}n=n.filter(function(x){return!Number.isNaN(x)&&x!==1/0&&x!==-1/0}),r=r.filter(function(x){return!Number.isNaN(x)&&x!==1/0&&x!==-1/0});var d=wb(n),h=wb(r),p=xb(n),g=xb(r);if(i.length===0)return{x:d,y:h,width:p-d,height:g-h};for(var v=0;v<i.length;v++){var m=i[v],y=m.currentPoint,b=void 0;y[0]===d?(b=ay(m,e),d-=b.xExtra):y[0]===p&&(b=ay(m,e),p+=b.xExtra),y[1]===h?(b=ay(m,e),h-=b.yExtra):y[1]===g&&(b=ay(m,e),g+=b.yExtra)}return{x:d,y:h,width:p-d,height:g-h}}function ay(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||Hg(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),c=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));u=u>Math.PI/2?Math.PI-u:u,c=c>Math.PI/2?Math.PI-c:c;var f={xExtra:Math.cos(l/2-u)*(e/2*(1/Math.sin(l/2)))-e/2||0,yExtra:Math.cos(c-l/2)*(e/2*(1/Math.sin(l/2)))-e/2||0};return f}function zF(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}var jF=function(e,n){var r=e.x*n.x+e.y*n.y,i=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(n.x,2)+Math.pow(n.y,2))),a=e.x*n.y-e.y*n.x<0?-1:1,o=a*Math.acos(r/i);return o},BF=function(e,n,r,i,a,o,s,l){n=Math.abs(n),r=Math.abs(r),i=$K(i,360);var u=Cn(i);if(e.x===s.x&&e.y===s.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(n===0||r===0)return{x:0,y:0,ellipticalArcAngle:0};var c=(e.x-s.x)/2,f=(e.y-s.y)/2,d={x:Math.cos(u)*c+Math.sin(u)*f,y:-Math.sin(u)*c+Math.cos(u)*f},h=Math.pow(d.x,2)/Math.pow(n,2)+Math.pow(d.y,2)/Math.pow(r,2);h>1&&(n*=Math.sqrt(h),r*=Math.sqrt(h));var p=Math.pow(n,2)*Math.pow(r,2)-Math.pow(n,2)*Math.pow(d.y,2)-Math.pow(r,2)*Math.pow(d.x,2),g=Math.pow(n,2)*Math.pow(d.y,2)+Math.pow(r,2)*Math.pow(d.x,2),v=p/g;v=v<0?0:v;var m=(a!==o?1:-1)*Math.sqrt(v),y={x:m*(n*d.y/r),y:m*(-(r*d.x)/n)},b={x:Math.cos(u)*y.x-Math.sin(u)*y.y+(e.x+s.x)/2,y:Math.sin(u)*y.x+Math.cos(u)*y.y+(e.y+s.y)/2},x={x:(d.x-y.x)/n,y:(d.y-y.y)/r},w=jF({x:1,y:0},x),_={x:(-d.x-y.x)/n,y:(-d.y-y.y)/r},E=jF(x,_);!o&&E>0?E-=2*Math.PI:o&&E<0&&(E+=2*Math.PI),E%=2*Math.PI;var S=w+E*l,O=n*Math.cos(S),A=r*Math.sin(S),T={x:Math.cos(u)*O-Math.sin(u)*A+b.x,y:Math.sin(u)*O+Math.cos(u)*A+b.y,ellipticalArcStartAngle:w,ellipticalArcEndAngle:w+E,ellipticalArcAngle:S,ellipticalArcCenter:b,resultantRx:n,resultantRy:r};return T};function v6e(t){for(var e=[],n=null,r=null,i=null,a=0,o=t.length,s=0;s<o;s++){var l=t[s];r=t[s+1];var u=l[0],c={command:u,prePoint:n,params:l,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(u){case"M":i=[l[1],l[2]],a=s;break;case"A":var f=m6e(n,l);c.arcParams=f;break}if(u==="Z")n=i,r=t[a+1];else{var d=l.length;n=[l[d-2],l[d-1]]}r&&r[0]==="Z"&&(r=t[a],e[a]&&(e[a].prePoint=n)),c.currentPoint=n,e[a]&&qb(n,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var h=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=h;var p=c.prePoint;if(["L","H","V"].includes(u))c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]];else if(u==="Q"){var g=[l[1],l[2]];c.startTangent=[p[0]-g[0],p[1]-g[1]],c.endTangent=[n[0]-g[0],n[1]-g[1]]}else if(u==="T"){var v=e[s-1],m=zF(v.currentPoint,p);v.command==="Q"?(c.command="Q",c.startTangent=[p[0]-m[0],p[1]-m[1]],c.endTangent=[n[0]-m[0],n[1]-m[1]]):(c.command="TL",c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]])}else if(u==="C"){var y=[l[1],l[2]],b=[l[3],l[4]];c.startTangent=[p[0]-y[0],p[1]-y[1]],c.endTangent=[n[0]-b[0],n[1]-b[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[y[0]-b[0],y[1]-b[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[b[0]-y[0],b[1]-y[1]])}else if(u==="S"){var x=e[s-1],w=zF(x.currentPoint,p),_=[l[1],l[2]];x.command==="C"?(c.command="C",c.startTangent=[p[0]-w[0],p[1]-w[1]],c.endTangent=[n[0]-_[0],n[1]-_[1]]):(c.command="SQ",c.startTangent=[p[0]-_[0],p[1]-_[1]],c.endTangent=[n[0]-_[0],n[1]-_[1]])}else if(u==="A"){var E=$F(c,0),S=E.x,O=E.y,A=$F(c,1,!1),T=A.x,I=A.y;c.startTangent=[S,O],c.endTangent=[T,I]}e.push(c)}return e}function $F(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=t.arcParams,i=r.rx,a=i===void 0?0:i,o=r.ry,s=o===void 0?0:o,l=r.xRotation,u=r.arcFlag,c=r.sweepFlag,f=BF({x:t.prePoint[0],y:t.prePoint[1]},a,s,l,!!u,!!c,{x:t.currentPoint[0],y:t.currentPoint[1]},e),d=BF({x:t.prePoint[0],y:t.prePoint[1]},a,s,l,!!u,!!c,{x:t.currentPoint[0],y:t.currentPoint[1]},n?e+.005:e-.005),h=d.x-f.x,p=d.y-f.y,g=Math.sqrt(h*h+p*p);return{x:-h/g,y:-p/g}}function oy(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Q6(t,e){return oy(t)*oy(e)?(t[0]*e[0]+t[1]*e[1])/(oy(t)*oy(e)):1}function VF(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Q6(t,e))}function m6e(t,e){var n=e[1],r=e[2],i=$K(Cn(e[3]),Math.PI*2),a=e[4],o=e[5],s=t[0],l=t[1],u=e[6],c=e[7],f=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,d=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,h=f*f/(n*n)+d*d/(r*r);h>1&&(n*=Math.sqrt(h),r*=Math.sqrt(h));var p=n*n*(d*d)+r*r*(f*f),g=p?Math.sqrt((n*n*(r*r)-p)/p):1;a===o&&(g*=-1),isNaN(g)&&(g=0);var v=r?g*n*d/r:0,m=n?g*-r*f/n:0,y=(s+u)/2+Math.cos(i)*v-Math.sin(i)*m,b=(l+c)/2+Math.sin(i)*v+Math.cos(i)*m,x=[(f-v)/n,(d-m)/r],w=[(-1*f-v)/n,(-1*d-m)/r],_=VF([1,0],x),E=VF(x,w);return Q6(x,w)<=-1&&(E=Math.PI),Q6(x,w)>=1&&(E=0),o===0&&E>0&&(E-=2*Math.PI),o===1&&E<0&&(E+=2*Math.PI),{cx:y,cy:b,rx:qb(t,[u,c])?0:n,ry:qb(t,[u,c])?0:r,startAngle:_,endAngle:_+E,xRotation:i,arcFlag:a,sweepFlag:o}}function y6e(t,e,n){return t.reduce(function(r,i){var a="";if(i[0]==="M"||i[0]==="L"){var o=ln(i[1],i[2],0);n&&Cr(o,o,n),a="".concat(i[0]).concat(o[0],",").concat(o[1])}else if(i[0]==="Z")a=i[0];else if(i[0]==="C"){var s=ln(i[1],i[2],0),l=ln(i[3],i[4],0),u=ln(i[5],i[6],0);n&&(Cr(s,s,n),Cr(l,l,n),Cr(u,u,n)),a="".concat(i[0]).concat(s[0],",").concat(s[1],",").concat(l[0],",").concat(l[1],",").concat(u[0],",").concat(u[1])}else if(i[0]==="A"){var c=ln(i[6],i[7],0);n&&Cr(c,c,n),a="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],",").concat(i[5],",").concat(c[0],",").concat(c[1])}else if(i[0]==="Q"){var f=ln(i[1],i[2],0),d=ln(i[3],i[4],0);n&&(Cr(f,f,n),Cr(d,d,n)),a="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],"}")}return r+=a},"")}function b6e(t,e,n,r){return[["M",t,e],["L",n,r]]}function qF(t,e,n,r){var i=(-1+Math.sqrt(2))/3*4,a=t*i,o=e*i,s=n-t,l=n+t,u=r-e,c=r+e;return[["M",s,r],["C",s,r-o,n-a,u,n,u],["C",n+a,u,l,r-o,l,r],["C",l,r+o,n+a,c,n,c],["C",n-a,c,s,r+o,s,r],["Z"]]}function x6e(t,e){var n=t.map(function(r,i){return[i===0?"M":"L",r[0],r[1]]});return e&&n.push(["Z"]),n}function w6e(t,e,n,r,i){if(i){var a=Ot(i,4),o=a[0],s=a[1],l=a[2],u=a[3],c=t>0?1:-1,f=e>0?1:-1,d=c+f!==0?1:0;return[["M",c*o+n,r],["L",t-c*s+n,r],s?["A",s,s,0,0,d,t+n,f*s+r]:null,["L",t+n,e-f*l+r],l?["A",l,l,0,0,d,t+n-c*l,e+r]:null,["L",n+c*u,e+r],u?["A",u,u,0,0,d,n,e+r-f*u]:null,["L",n,f*o+r],o?["A",o,o,0,0,d,c*o+n,r]:null,["Z"]].filter(function(h){return h})}return[["M",n,r],["L",n+t,r],["L",n+t,r+e],["L",n,r+e],["Z"]]}function _6e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.getLocalTransform(),n=[];switch(t.nodeName){case pe.LINE:var r=t.parsedStyle,i=r.x1,a=i===void 0?0:i,o=r.y1,s=o===void 0?0:o,l=r.x2,u=l===void 0?0:l,c=r.y2,f=c===void 0?0:c;n=b6e(a,s,u,f);break;case pe.CIRCLE:{var d=t.parsedStyle,h=d.r,p=h===void 0?0:h,g=d.cx,v=g===void 0?0:g,m=d.cy,y=m===void 0?0:m;n=qF(p,p,v,y);break}case pe.ELLIPSE:{var b=t.parsedStyle,x=b.rx,w=x===void 0?0:x,_=b.ry,E=_===void 0?0:_,S=b.cx,O=S===void 0?0:S,A=b.cy,T=A===void 0?0:A;n=qF(w,E,O,T);break}case pe.POLYLINE:case pe.POLYGON:var I=t.parsedStyle.points;n=x6e(I.points,t.nodeName===pe.POLYGON);break;case pe.RECT:var D=t.parsedStyle,R=D.width,F=R===void 0?0:R,z=D.height,N=z===void 0?0:z,L=D.x,B=L===void 0?0:L,$=D.y,G=$===void 0?0:$,W=D.radius,U=W&&W.some(function(q){return q!==0});n=w6e(F,N,B,G,U&&W.map(function(q){return jn(q,0,Math.min(Math.abs(F)/2,Math.abs(N)/2))}));break;case pe.PATH:var Y=t.parsedStyle.d.absolutePath;n=Bt(Y);break}if(n.length)return y6e(n,t,e)}var Cee=function(e){if(e===""||Array.isArray(e)&&e.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var n;try{n=Tb(e)}catch{n=Tb(""),console.error("[g]: Invalid SVG Path definition: ".concat(e))}d6e(n);var r=h6e(n),i=p6e(n),a=i.polygons,o=i.polylines,s=v6e(n),l=g6e(s,0),u=l.x,c=l.y,f=l.width,d=l.height;return{absolutePath:n,hasArc:r,segments:s,polygons:a,polylines:o,totalLength:0,rect:{x:Number.isFinite(u)?u:0,y:Number.isFinite(c)?c:0,width:Number.isFinite(f)?f:0,height:Number.isFinite(d)?d:0}}},S6e=si(Cee);function Pee(t){return an(t)?S6e(t):Cee(t)}function E6e(t,e,n){var r=t.curve,i=e.curve;(!r||r.length===0)&&(r=A6(t.absolutePath,!1),t.curve=r),(!i||i.length===0)&&(i=A6(e.absolutePath,!1),e.curve=i);var a=[r,i];r.length!==i.length&&(a=vJ(r,i));var o=W9(a[0])!==W9(a[1])?oAe(a[0]):aAe(a[0]);return[o,pAe(a[1],o),function(s){return s}]}function O6e(t,e){var n;return an(t)?n=t.split(" ").map(function(r){var i=r.split(","),a=Ot(i,2),o=a[0],s=a[1];return[Number(o),Number(s)]}):n=t,{points:n,totalLength:0,segments:[]}}function k6e(t,e){return[t.points,e.points,function(n){return n}]}var Er=null,vh=/\s*(\w+)\(([^)]*)\)/g;function Ea(t){return function(e){var n=0;return t.map(function(r){return r===Er?e[n++]:r})}}function Hc(t){return t}var $0={matrix:["NNNNNN",[Er,Er,0,0,Er,Er,0,0,0,0,1,0,Er,Er,0,1],Hc],matrix3d:["NNNNNNNNNNNNNNNN",Hc],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Ea([Er,Er,new Mn(1)]),Hc],scaleX:["N",Ea([Er,new Mn(1),new Mn(1)]),Ea([Er,new Mn(1)])],scaleY:["N",Ea([new Mn(1),Er,new Mn(1)]),Ea([new Mn(1),Er])],scaleZ:["N",Ea([new Mn(1),new Mn(1),Er])],scale3d:["NNN",Hc],skew:["Aa",null,Hc],skewX:["A",null,Ea([Er,qf])],skewY:["A",null,Ea([qf,Er])],translate:["Tt",Ea([Er,Er,ns]),Hc],translateX:["T",Ea([Er,ns,ns]),Ea([Er,ns])],translateY:["T",Ea([ns,Er,ns]),Ea([ns,Er])],translateZ:["L",Ea([ns,ns,Er])],translate3d:["TTL",Hc]};function Dee(t){for(var e=[],n=t.length,r=0;r<n;r++){var i=t[r],a=i[0],o=i.slice(1);a==="translate"||a==="skew"?o.length===1&&o.push(0):a==="scale"&&o.length===1&&o.push(o[0]);var s=$0[a];if(!s)return[];var l=o.map(function(u){return lr(u)});e.push({t:a,d:l})}return e}function Iee(t){if(Array.isArray(t))return Dee(t);if(t=(t||"none").trim(),t==="none")return[];var e=[],n,r=0;for(vh.lastIndex=0;n=vh.exec(t);){if(n.index!==r)return[];r=n.index+n[0].length;var i=n[1],a=$0[i];if(!a)return[];var o=n[2].split(","),s=a[0];if(s.length<o.length)return[];for(var l=[],u=0;u<s.length;u++){var c=o[u],f=s[u],d=void 0;if(c?d={A:function(p){return p.trim()==="0"?qf:o6e(p)},N:K6,T:Z6,L:i6e}[f.toUpperCase()](c):d={a:qf,n:l[0],t:ns}[f],d===void 0)return[];l.push(d)}if(e.push({t:i,d:l}),vh.lastIndex===t.length)return e}return[]}function A6e(t){if(Array.isArray(t))return Dee(t);if(t=(t||"none").trim(),t==="none")return[];var e=[],n,r=0;for(vh.lastIndex=0;n=vh.exec(t);){if(n.index!==r)return[];r=n.index+n[0].length;var i=n[1],a=$0[i];if(!a)return[];var o=n[2].split(","),s=a[0];if(s.length<o.length)return[];for(var l=[],u=0;u<s.length;u++){var c=o[u],f=s[u],d=void 0;if(c?d={A:function(p){return p.trim()==="0"?qf:kee(p)},N:Tee,T:Oee,L:Eee}[f.toUpperCase()](c):d={a:qf,n:l[0],t:ns}[f],d===void 0)return[];l.push(d)}if(e.push({t:i,d:l}),vh.lastIndex===t.length)return e}return[]}function T6e(t){var e,n,r,i;switch(t.t){case"rotateX":return i=Cn(Da(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return i=Cn(Da(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return i=Cn(Da(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=t.d[0].value,n=t.d[1].value,r=t.d[2].value,i=Cn(Da(t.d[3]));var a=e*e+n*n+r*r;if(a===0)e=1,n=0,r=0;else if(a!==1){var o=Math.sqrt(a);e/=o,n/=o,r/=o}var s=Math.sin(i/2),l=s*Math.cos(i/2),u=s*s;return[1-2*(n*n+r*r)*u,2*(e*n*u+r*l),2*(e*r*u-n*l),0,2*(e*n*u-r*l),1-2*(e*e+r*r)*u,2*(n*r*u+e*l),0,2*(e*r*u+n*l),2*(n*r*u-e*l),1-2*(e*e+n*n)*u,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":var c=Cn(Da(t.d[0])),f=Cn(Da(t.d[1]));return[1,Math.tan(f),0,0,Math.tan(c),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return i=Cn(Da(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return i=Cn(Da(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return e=Ja(t.d[0],0,null)||0,n=Ja(t.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,n,0,1];case"translateX":return e=Ja(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,0,0,1];case"translateY":return n=Ja(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,n,0,1];case"translateZ":return r=Ja(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case"translate3d":return e=Ja(t.d[0],0,null)||0,n=Ja(t.d[1],0,null)||0,r=Ja(t.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,n,r,1];case"perspective":var d=Ja(t.d[0],0,null)||0,h=d?-1/d:0;return[1,0,0,0,0,1,0,0,0,0,1,h,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map(function(p){return p.value})}}function M6e(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function C6e(t){return t.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(T6e).reduce(M6e)}function WF(t){var e=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return hCe(C6e(t),e,n,r,i,a),[[e,n,r,a,i]]}var P6e=function(){function t(r,i){for(var a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],o=0;o<4;o++)for(var s=0;s<4;s++)for(var l=0;l<4;l++)a[o][s]+=i[o][l]*r[l][s];return a}function e(r){return r[0][2]===0&&r[0][3]===0&&r[1][2]===0&&r[1][3]===0&&r[2][0]===0&&r[2][1]===0&&r[2][2]===1&&r[2][3]===0&&r[3][2]===0&&r[3][3]===1}function n(r,i,a,o,s){for(var l=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],u=0;u<4;u++)l[u][3]=s[u];for(var c=0;c<3;c++)for(var f=0;f<3;f++)l[3][c]+=r[f]*l[f][c];var d=o[0],h=o[1],p=o[2],g=o[3],v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];v[0][0]=1-2*(h*h+p*p),v[0][1]=2*(d*h-p*g),v[0][2]=2*(d*p+h*g),v[1][0]=2*(d*h+p*g),v[1][1]=1-2*(d*d+p*p),v[1][2]=2*(h*p-d*g),v[2][0]=2*(d*p-h*g),v[2][1]=2*(h*p+d*g),v[2][2]=1-2*(d*d+h*h),l=t(l,v);var m=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];a[2]&&(m[2][1]=a[2],l=t(l,m)),a[1]&&(m[2][1]=0,m[2][0]=a[0],l=t(l,m)),a[0]&&(m[2][0]=0,m[1][0]=a[0],l=t(l,m));for(var y=0;y<3;y++)for(var b=0;b<3;b++)l[y][b]*=i[y];return e(l)?[l[0][0],l[0][1],l[1][0],l[1][1],l[3][0],l[3][1]]:l[0].concat(l[1],l[2],l[3])}return n}();function D6e(t){return t.toFixed(6).replace(".000000","")}function pE(t,e){var n,r;return t.decompositionPair!==e&&(t.decompositionPair=e,n=WF(t)),e.decompositionPair!==t&&(e.decompositionPair=t,r=WF(e)),n[0]===null||r[0]===null?[[!1],[!0],function(i){return i?e[0].d:t[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(i){var a=L6e(n[0][3],r[0][3],i[5]),o=P6e(i[0],i[1],i[2],a,i[4]),s=o.map(D6e).join(",");return s}])}function I6e(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}function L6e(t,e,n){var r=I6e(t,e);r=jn(r,-1,1);var i=[];if(r===1)i=t;else for(var a=Math.acos(r),o=Math.sin(n*a)*1/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(t[s]*(Math.cos(n*a)-r*o)+e[s]*o);return i}function gE(t){return t.replace(/[XY]/,"")}function vE(t){return t.replace(/(X|Y|Z|3d)?$/,"3d")}var R6e=function(e,n){return e==="perspective"&&n==="perspective"||(e==="matrix"||e==="matrix3d")&&(n==="matrix"||n==="matrix3d")};function N6e(t,e,n){var r=!1;if(!t.length||!e.length){t.length||(r=!0,t=e,e=[]);for(var i=function(){var T=t[a],I=T.t,D=T.d,R=I.substring(0,5)==="scale"?1:0;e.push({t:I,d:D.map(function(F){return typeof F=="number"?lr(R):lr(R,F.unit)})})},a=0;a<t.length;a++)i()}var o=[],s=[],l=[];if(t.length!==e.length){var u=pE(t,e);o=[u[0]],s=[u[1]],l=[["matrix",[u[2]]]]}else for(var c=0;c<t.length;c++){var f=t[c].t,d=e[c].t,h=t[c].d,p=e[c].d,g=$0[f],v=$0[d],m=void 0;if(R6e(f,d)){var y=pE([t[c]],[e[c]]);o.push(y[0]),s.push(y[1]),l.push(["matrix",[y[2]]]);continue}else if(f===d)m=f;else if(g[2]&&v[2]&&gE(f)===gE(d))m=gE(f),h=g[2](h),p=v[2](p);else if(g[1]&&v[1]&&vE(f)===vE(d))m=vE(f),h=g[1](h),p=v[1](p);else{var b=pE(t,e);o=[b[0]],s=[b[1]],l=[["matrix",[b[2]]]];break}for(var x=[],w=[],_=[],E=0;E<h.length;E++){var S=s6e(h[E],p[E],n,!1,E);x[E]=S[0],w[E]=S[1],_.push(S[2])}o.push(x),s.push(w),l.push([m,_])}if(r){var O=o;o=s,s=O}return[o,s,function(A){return A.map(function(T,I){var D=T.map(function(R,F){return l[I][1][F](R)}).join(",");return l[I][0]==="matrix"&&D.split(",").length===16&&(l[I][0]="matrix3d"),l[I][0]==="matrix3d"&&D.split(",").length===6&&(l[I][0]="matrix"),"".concat(l[I][0],"(").concat(D,")")}).join(" ")}]}var F6e=si(function(t){if(an(t)){if(t==="text-anchor")return[lr(0,"px"),lr(0,"px")];var e=t.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[Z6(GF(e[0])),Z6(GF(e[1]))]}return[lr(t[0]||0,"px"),lr(t[1]||0,"px")]});function GF(t){return t==="center"?"50%":t==="left"||t==="top"?"0%":t==="right"||t==="bottom"?"100%":t}var lL=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:Ne.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:Ne.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:Ne.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:Ne.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:Ne.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:Ne.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:Ne.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:Ne.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:Ne.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:Ne.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:Ne.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:Ne.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:Ne.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:Ne.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:Ne.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:Ne.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:Ne.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:Ne.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:Ne.FILTER},{n:"clipPath",syntax:Ne.DEFINED_PATH},{n:"textPath",syntax:Ne.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:Ne.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:Ne.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:Ne.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:Ne.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:Ne.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:Ne.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:Ne.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:Ne.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:Ne.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:Ne.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:Ne.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:Ne.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Ne.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Ne.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:Ne.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:Ne.COORDINATE},{n:"y1",int:!0,l:!0,syntax:Ne.COORDINATE},{n:"z1",int:!0,l:!0,syntax:Ne.COORDINATE},{n:"x2",int:!0,l:!0,syntax:Ne.COORDINATE},{n:"y2",int:!0,l:!0,syntax:Ne.COORDINATE},{n:"z2",int:!0,l:!0,syntax:Ne.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:Ne.PATH,p:50},{n:"points",int:!0,l:!0,syntax:Ne.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:Ne.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:Ne.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:Ne.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:Ne.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:Ne.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:Ne.NUMBER,d:function(e){return e===pe.PATH||e===pe.POLYGON||e===pe.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:Ne.MARKER},{n:"markerEnd",syntax:Ne.MARKER},{n:"markerMid",syntax:Ne.MARKER},{n:"markerStartOffset",syntax:Ne.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:Ne.LENGTH,l:!0,int:!0,d:"0"}],z6e=new Set(lL.filter(function(t){return!!t.l}).map(function(t){return t.n})),Lee={},j6e=function(){function t(e){var n=this;Ae(this,t),this.runtime=e,lL.forEach(function(r){n.registerMetadata(r)})}return Te(t,[{key:"registerMetadata",value:function(n){[n.n].concat(Bt(n.a||[])).forEach(function(r){Lee[r]=n})}},{key:"getPropertySyntax",value:function(n){return this.runtime.CSSPropertySyntaxFactory[n]}},{key:"processProperties",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0};Object.assign(n.attributes,r);var a=n.parsedStyle.clipPath,o=n.parsedStyle.offsetPath;B6e(n,r);var s=!!i.forceUpdateGeometry;if(!s){for(var l in r)if(z6e.has(l)){s=!0;break}}var u=Ree(n);u.has("fill")&&r.fill&&(n.parsedStyle.fill=sc(r.fill)),u.has("stroke")&&r.stroke&&(n.parsedStyle.stroke=sc(r.stroke)),u.has("shadowColor")&&r.shadowColor&&(n.parsedStyle.shadowColor=sc(r.shadowColor)),u.has("filter")&&r.filter&&(n.parsedStyle.filter=c6e(r.filter)),u.has("radius")&&!lt(r.radius)&&(n.parsedStyle.radius=FF(r.radius,4)),u.has("lineDash")&&!lt(r.lineDash)&&(n.parsedStyle.lineDash=FF(r.lineDash,"even")),u.has("points")&&r.points&&(n.parsedStyle.points=O6e(r.points)),u.has("d")&&r.d===""&&(n.parsedStyle.d=It({},yee)),u.has("d")&&r.d&&(n.parsedStyle.d=Pee(r.d)),u.has("textTransform")&&r.textTransform&&this.runtime.CSSPropertySyntaxFactory[Ne.TEXT_TRANSFORM].calculator(null,null,{value:r.textTransform},n,null),u.has("clipPath")&&!bt(r.clipPath)&&this.runtime.CSSPropertySyntaxFactory[Ne.DEFINED_PATH].calculator("clipPath",a,r.clipPath,n,this.runtime),u.has("offsetPath")&&r.offsetPath&&this.runtime.CSSPropertySyntaxFactory[Ne.DEFINED_PATH].calculator("offsetPath",o,r.offsetPath,n,this.runtime),u.has("transform")&&r.transform&&(n.parsedStyle.transform=Iee(r.transform)),u.has("transformOrigin")&&r.transformOrigin&&(n.parsedStyle.transformOrigin=F6e(r.transformOrigin)),u.has("markerStart")&&r.markerStart&&(n.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[Ne.MARKER].calculator(null,r.markerStart,r.markerStart,null,null)),u.has("markerEnd")&&r.markerEnd&&(n.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[Ne.MARKER].calculator(null,r.markerEnd,r.markerEnd,null,null)),u.has("markerMid")&&r.markerMid&&(n.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[Ne.MARKER].calculator("",r.markerMid,r.markerMid,null,null)),u.has("zIndex")&&!lt(r.zIndex)&&this.runtime.CSSPropertySyntaxFactory[Ne.Z_INDEX].postProcessor(n),u.has("offsetDistance")&&!lt(r.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[Ne.OFFSET_DISTANCE].postProcessor(n),u.has("transform")&&r.transform&&this.runtime.CSSPropertySyntaxFactory[Ne.TRANSFORM].postProcessor(n),u.has("transformOrigin")&&r.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[Ne.TRANSFORM_ORIGIN].postProcessor(n),s&&(n.geometry.dirty=!0,n.renderable.boundsDirty=!0,n.renderable.renderBoundsDirty=!0,i.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(n))}},{key:"updateGeometry",value:function(n){var r=n.nodeName,i=this.runtime.geometryUpdaterFactory[r];if(i){var a=n.geometry;a.contentBounds||(a.contentBounds=new zn),a.renderBounds||(a.renderBounds=new zn);var o=n.parsedStyle,s=i.update(o,n),l=s.cx,u=l===void 0?0:l,c=s.cy,f=c===void 0?0:c,d=s.cz,h=d===void 0?0:d,p=s.hwidth,g=p===void 0?0:p,v=s.hheight,m=v===void 0?0:v,y=s.hdepth,b=y===void 0?0:y,x=[Math.abs(g),Math.abs(m),b],w=o.stroke,_=o.lineWidth,E=_===void 0?1:_,S=o.increasedLineWidthForHitTesting,O=S===void 0?0:S,A=o.shadowType,T=A===void 0?"outer":A,I=o.shadowColor,D=o.filter,R=D===void 0?[]:D,F=o.transformOrigin,z=[u,f,h];a.contentBounds.update(z,x);var N=r===pe.POLYLINE||r===pe.POLYGON||r===pe.PATH?Math.SQRT2:.5,L=w&&!w.isNone;if(L){var B=((E||0)+(O||0))*N;x[0]+=B,x[1]+=B}if(a.renderBounds.update(z,x),I&&T&&T!=="inner"){var $=a.renderBounds,G=$.min,W=$.max,U=o.shadowBlur,Y=o.shadowOffsetX,q=o.shadowOffsetY,K=U||0,J=Y||0,Q=q||0,se=G[0]-K+J,de=W[0]+K+J,ye=G[1]-K+Q,_e=W[1]+K+Q;G[0]=Math.min(G[0],se),W[0]=Math.max(W[0],de),G[1]=Math.min(G[1],ye),W[1]=Math.max(W[1],_e),a.renderBounds.setMinMax(G,W)}R.forEach(function(Se){var Me=Se.name,Be=Se.params;if(Me==="blur"){var en=Be[0].value;a.renderBounds.update(a.renderBounds.center,ic(a.renderBounds.halfExtents,a.renderBounds.halfExtents,[en,en,0]))}else if(Me==="drop-shadow"){var Ht=Be[0].value,wt=Be[1].value,At=Be[2].value,nn=a.renderBounds,sn=nn.min,Zt=nn.max,gn=sn[0]-At+Ht,cn=Zt[0]+At+Ht,Nn=sn[1]-At+wt,vn=Zt[1]+At+wt;sn[0]=Math.min(sn[0],gn),Zt[0]=Math.max(Zt[0],cn),sn[1]=Math.min(sn[1],Nn),Zt[1]=Math.max(Zt[1],vn),a.renderBounds.setMinMax(sn,Zt)}}),n.geometry.dirty=!1;var Ee=g<0,ue=m<0,he=(Ee?-1:1)*(F?Ja(F[0],0,n,!0):0),ke=(ue?-1:1)*(F?Ja(F[1],1,n,!0):0);(he||ke)&&n.setOrigin(he,ke)}}},{key:"updateSizeAttenuation",value:function(n,r){n.style.isSizeAttenuation?(n.style.rawLineWidth||(n.style.rawLineWidth=n.style.lineWidth),n.style.lineWidth=(n.style.rawLineWidth||1)/r,n.nodeName===pe.CIRCLE&&(n.style.rawR||(n.style.rawR=n.style.r),n.style.r=(n.style.rawR||1)/r)):(n.style.rawLineWidth&&(n.style.lineWidth=n.style.rawLineWidth,delete n.style.rawLineWidth),n.nodeName===pe.CIRCLE&&n.style.rawR&&(n.style.r=n.style.rawR,delete n.style.rawR))}}])}();function B6e(t,e){var n=Ree(t);for(var r in e)n.has(r)&&(t.parsedStyle[r]=e[r])}function Ree(t){return t.constructor.PARSED_STYLE_LIST}var $6e=function(){function t(){Ae(this,t),this.mixer=oL}return Te(t,[{key:"calculator",value:function(n,r,i,a){return Da(i)}}])}(),V6e=function(){function t(){Ae(this,t)}return Te(t,[{key:"calculator",value:function(n,r,i,a,o){return i instanceof Yo&&(i=null),o.sceneGraphService.updateDisplayObjectDependency(n,r,i,a),n==="clipPath"&&a.forEach(function(s){s.childNodes.length===0&&o.sceneGraphService.dirtifyToRoot(s)}),i}}])}(),q6e=function(){function t(){Ae(this,t),this.parser=sc,this.mixer=r6e}return Te(t,[{key:"calculator",value:function(n,r,i,a){return i instanceof Yo?i.value==="none"?wee:_ee:i}}])}(),W6e=function(){function t(){Ae(this,t)}return Te(t,[{key:"calculator",value:function(n,r,i){return i instanceof Yo?[]:i}}])}();function HF(t){var e=t.parsedStyle,n=e.fontSize;return lt(n)?null:n}var eP=function(){function t(){Ae(this,t),this.mixer=oL}return Te(t,[{key:"calculator",value:function(n,r,i,a,o){if(je(i))return i;if(Mn.isRelativeUnit(i.unit)){if(i.unit===Ve.kPercentage)return 0;if(i.unit===Ve.kEms){if(a.parentNode){var s=HF(a.parentNode);if(s)return s*=i.value,s}return 0}if(i.unit===Ve.kRems){var l;if(a!=null&&(l=a.ownerDocument)!==null&&l!==void 0&&l.documentElement){var u=HF(a.ownerDocument.documentElement);if(u)return u*=i.value,u}return 0}}else return i.value}}])}(),G6e=function(){function t(){Ae(this,t),this.mixer=Mee}return Te(t,[{key:"calculator",value:function(n,r,i){return i.map(function(a){return a.value})}}])}(),H6e=function(){function t(){Ae(this,t),this.mixer=Mee}return Te(t,[{key:"calculator",value:function(n,r,i){return i.map(function(a){return a.value})}}])}(),Y6e=function(){function t(){Ae(this,t)}return Te(t,[{key:"calculator",value:function(n,r,i,a){var o;i instanceof Yo&&(i=null);var s=(o=i)===null||o===void 0?void 0:o.cloneNode(!0);return s&&(s.style.isMarker=!0),s}}])}(),U6e=function(){function t(){Ae(this,t),this.mixer=oL}return Te(t,[{key:"calculator",value:function(n,r,i){return i.value}}])}(),X6e=function(){function t(){Ae(this,t),this.mixer=sL(0,1)}return Te(t,[{key:"calculator",value:function(n,r,i){return i.value}},{key:"postProcessor",value:function(n){var r=n.parsedStyle,i=r.offsetPath,a=r.offsetDistance;if(i){var o=i.nodeName;if(o===pe.LINE||o===pe.PATH||o===pe.POLYLINE){var s=i.getPoint(a);s&&n.setLocalPosition(s.x,s.y)}}}}])}(),Z6e=function(){function t(){Ae(this,t),this.mixer=sL(0,1)}return Te(t,[{key:"calculator",value:function(n,r,i){return i.value}}])}(),K6e=function(){function t(){Ae(this,t),this.parser=Pee,this.mixer=E6e}return Te(t,[{key:"calculator",value:function(n,r,i){return i instanceof Yo&&i.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Zh(0,0,0,0)}:i}}])}(),J6e=Te(function t(){Ae(this,t),this.mixer=k6e}),Q6e=function(t){function e(){var n;Ae(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Nt(this,e,[].concat(i)),n.mixer=sL(0,1/0),n}return Ft(e,t),Te(e)}(eP),ePe=function(){function t(){Ae(this,t)}return Te(t,[{key:"calculator",value:function(n,r,i,a){return i instanceof Yo?i.value==="unset"?"":i.value:"".concat(i)}},{key:"postProcessor",value:function(n){n.nodeValue="".concat(n.parsedStyle.text)||""}}])}(),tPe=function(){function t(){Ae(this,t)}return Te(t,[{key:"calculator",value:function(n,r,i,a){var o=a.getAttribute("text");if(o){var s=o;i.value==="capitalize"?s=o.charAt(0).toUpperCase()+o.slice(1):i.value==="lowercase"?s=o.toLowerCase():i.value==="uppercase"&&(s=o.toUpperCase()),a.parsedStyle.text=s}return i.value}}])}(),mE=new WeakMap;function nPe(t,e,n){if(t){var r=typeof t=="string"?document.getElementById(t):t;mE.has(r)&&mE.get(r).destroy(n),mE.set(r,e)}}var uL=typeof window<"u"&&typeof window.document<"u";function rPe(t){return!!t.getAttribute}function iPe(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;Nee(t[i],e)<0?n=i+1:r=i}return n}function Nee(t,e){var n=Number(t.parsedStyle.zIndex||0),r=Number(e.parsedStyle.zIndex||0);if(n===r){var i=t.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(t)-a.indexOf(e)}}return n-r}function Fee(t){var e=t;do{var n,r=(n=e.parsedStyle)===null||n===void 0?void 0:n.clipPath;if(r)return e;e=e.parentElement}while(e!==null);return null}var YF="px";function aPe(t,e,n){uL&&t.style&&(t.style.width=e+YF,t.style.height=n+YF)}function zee(t,e){if(uL)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}function oPe(t){var e=zee(t,"width");return e==="auto"?t.offsetWidth:parseFloat(e)}function sPe(t){var e=zee(t,"height");return e==="auto"?t.offsetHeight:parseFloat(e)}var lPe=1,uPe={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},tP=typeof performance=="object"&&performance.now?performance:Date;function Wb(t){return t.nodeName===pe.FRAGMENT?!0:t.getRootNode().nodeName===pe.FRAGMENT}function ld(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"auto",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=!1,i=!1,a=!!e&&!e.isNone,o=!!n&&!n.isNone;return t==="visiblepainted"||t==="painted"||t==="auto"?(r=a,i=o):t==="visiblefill"||t==="fill"?r=!0:t==="visiblestroke"||t==="stroke"?i=!0:(t==="visible"||t==="all")&&(r=!0,i=!0),[r,i]}var cPe=1,fPe=function(){return cPe++},ul=typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:{},dPe=Date.now(),hPe=function(){return ul.performance&&typeof ul.performance.now=="function"?ul.performance.now():Date.now()-dPe},Eg={},UF=Date.now(),pPe=function(e){if(typeof e!="function")throw new TypeError("".concat(e," is not a function"));var n=Date.now(),r=n-UF,i=r>16?0:16-r,a=fPe();return Eg[a]=e,Object.keys(Eg).length>1||setTimeout(function(){UF=n;var o=Eg;Eg={},Object.keys(o).forEach(function(s){return o[s](hPe())})},i),a},gPe=function(e){delete Eg[e]},vPe=["","webkit","moz","ms","o"],jee=function(e){return typeof e!="string"?pPe:e===""?ul.requestAnimationFrame:ul["".concat(e,"RequestAnimationFrame")]},mPe=function(e){return typeof e!="string"?gPe:e===""?ul.cancelAnimationFrame:ul["".concat(e,"CancelAnimationFrame")]||ul["".concat(e,"CancelRequestAnimationFrame")]},yPe=function(e,n){for(var r=0;e[r]!==void 0;){if(n(e[r]))return e[r];r+=1}},Bee=yPe(vPe,function(t){return!!jee(t)}),cL=jee(Bee),$ee=mPe(Bee);ul.requestAnimationFrame=cL;ul.cancelAnimationFrame=$ee;var bPe=function(){function t(){Ae(this,t),this.callbacks=[]}return Te(t,[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(n,r){this.callbacks.push(r)}},{key:"promise",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Promise.all(this.callbacks.map(function(a){return a.apply(void 0,r)}))}}])}(),xPe=function(){function t(){Ae(this,t),this.callbacks=[]}return Te(t,[{key:"tapPromise",value:function(n,r){this.callbacks.push(r)}},{key:"promise",value:function(){var e=xc(qi().mark(function r(){var i,a,o,s,l=arguments;return qi().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!this.callbacks.length){c.next=14;break}return c.next=3,(i=this.callbacks)[0].apply(i,l);case 3:a=c.sent,o=0;case 5:if(!(o<this.callbacks.length-1)){c.next=13;break}return s=this.callbacks[o],c.next=9,s(a);case 9:a=c.sent;case 10:o++,c.next=5;break;case 13:return c.abrupt("return",a);case 14:return c.abrupt("return",null);case 15:case"end":return c.stop()}},r,this)}));function n(){return e.apply(this,arguments)}return n}()}])}(),fa=function(){function t(){Ae(this,t),this.callbacks=[]}return Te(t,[{key:"tap",value:function(n,r){this.callbacks.push(r)}},{key:"call",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=arguments;this.callbacks.forEach(function(o){o.apply(void 0,a)})}}])}(),yE=function(){function t(){Ae(this,t),this.callbacks=[]}return Te(t,[{key:"tap",value:function(n,r){this.callbacks.push(r)}},{key:"call",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(this.callbacks.length){for(var a=arguments,o=this.callbacks[0].apply(void 0,a),s=0;s<this.callbacks.length-1;s++){var l=this.callbacks[s];o=l(o)}return o}return null}}])}(),wPe=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],_Pe=/([\"\'])[^\'\"]+\1/;function SPe(t){for(var e=t.fontSize,n=e===void 0?16:e,r=t.fontFamily,i=r===void 0?"sans-serif":r,a=t.fontStyle,o=a===void 0?"normal":a,s=t.fontVariant,l=s===void 0?"normal":s,u=t.fontWeight,c=u===void 0?"normal":u,f=je(n)&&"".concat(n,"px")||"16px",d=i.split(","),h=d.length-1;h>=0;h--){var p=d[h].trim();!_Pe.test(p)&&wPe.indexOf(p)<0&&(p='"'.concat(p,'"')),d[h]=p}return"".concat(o," ").concat(l," ").concat(c," ").concat(f," ").concat(d.join(","))}function bE(t,e,n){return yc(t),t[4]=Math.tan(e),t[1]=Math.tan(n),t}var Gr=wn(),EPe=wn(),OPe={scale:function(e){zu(Gr,[e[0].value,e[1].value,1])},scaleX:function(e){zu(Gr,[e[0].value,1,1])},scaleY:function(e){zu(Gr,[1,e[0].value,1])},scaleZ:function(e){zu(Gr,[1,1,e[0].value])},scale3d:function(e){zu(Gr,[e[0].value,e[1].value,e[2].value])},translate:function(e){Bl(Gr,[e[0].value,e[1].value,0])},translateX:function(e){Bl(Gr,[e[0].value,0,0])},translateY:function(e){Bl(Gr,[0,e[0].value,0])},translateZ:function(e){Bl(Gr,[0,0,e[0].value])},translate3d:function(e){Bl(Gr,[e[0].value,e[1].value,e[2].value])},rotate:function(e){S6(Gr,Cn(Da(e[0])))},rotateX:function(e){JK(Gr,Cn(Da(e[0])))},rotateY:function(e){QK(Gr,Cn(Da(e[0])))},rotateZ:function(e){S6(Gr,Cn(Da(e[0])))},rotate3d:function(e){KK(Gr,Cn(Da(e[3])),[e[0].value,e[1].value,e[2].value])},skew:function(e){bE(Gr,Cn(e[0].value),Cn(e[1].value))},skewX:function(e){bE(Gr,Cn(e[0].value),0)},skewY:function(e){bE(Gr,0,Cn(e[0].value))},matrix:function(e){_6(Gr,e[0].value,e[1].value,0,0,e[2].value,e[3].value,0,0,0,0,1,0,e[4].value,e[5].value,0,1)},matrix3d:function(e){_6.apply(kke,[Gr].concat(Bt(e.map(function(n){return n.value}))))}},kPe=ln(1,1,1),APe=Wt(),XF={translate:function(e,n){Ce.sceneGraphService.setLocalScale(e,kPe,!1),Ce.sceneGraphService.setLocalEulerAngles(e,APe,void 0,void 0,!1),Ce.sceneGraphService.setLocalPosition(e,[n[0].value,n[1].value,0],!1),Ce.sceneGraphService.dirtifyLocal(e,e.transformable)}};function Vee(t,e){if(t.length){if(t.length===1&&XF[t[0].t]){XF[t[0].t](e,t[0].d);return}for(var n=yc(EPe),r=0;r<t.length;r++){var i=t[r],a=i.t,o=i.d,s=OPe[a];s&&(s(o),TI(n,n,Gr))}e.setLocalTransform(n)}else e.resetLocalTransform();return e.getLocalTransform()}var TPe=function(){function t(){Ae(this,t),this.parser=A6e,this.mixer=N6e}return Te(t,[{key:"calculator",value:function(n,r,i,a){return i instanceof Yo?[]:i}},{key:"postProcessor",value:function(n){Vee(n.parsedStyle.transform,n)}}])}(),MPe=function(){function t(){Ae(this,t)}return Te(t,[{key:"postProcessor",value:function(n){var r=n.parsedStyle.transformOrigin;r[0].unit===Ve.kPixels&&r[1].unit===Ve.kPixels?n.setOrigin(r[0].value,r[1].value):n.getGeometryBounds()}}])}(),CPe=function(){function t(){Ae(this,t)}return Te(t,[{key:"calculator",value:function(n,r,i,a){return i.value}},{key:"postProcessor",value:function(n){if(n.parentNode){var r=n.parentNode,i=r.renderable,a=r.sortable;i&&(i.dirty=!0),a&&(a.dirty=!0,a.dirtyReason=jb.Z_INDEX_CHANGED)}}}])}(),PPe=function(){function t(){Ae(this,t)}return Te(t,[{key:"update",value:function(n,r){var i=n.cx,a=i===void 0?0:i,o=n.cy,s=o===void 0?0:o,l=n.r,u=l===void 0?0:l;return{cx:a,cy:s,hwidth:u,hheight:u}}}])}(),DPe=function(){function t(){Ae(this,t)}return Te(t,[{key:"update",value:function(n,r){var i=n.cx,a=i===void 0?0:i,o=n.cy,s=o===void 0?0:o,l=n.rx,u=l===void 0?0:l,c=n.ry,f=c===void 0?0:c;return{cx:a,cy:s,hwidth:u,hheight:f}}}])}(),IPe=function(){function t(){Ae(this,t)}return Te(t,[{key:"update",value:function(n){var r=n.x1,i=n.y1,a=n.x2,o=n.y2,s=Math.min(r,a),l=Math.max(r,a),u=Math.min(i,o),c=Math.max(i,o),f=l-s,d=c-u,h=f/2,p=d/2;return{cx:s+h,cy:u+p,hwidth:h,hheight:p}}}])}(),LPe=function(){function t(){Ae(this,t)}return Te(t,[{key:"update",value:function(n){var r=n.d,i=r.rect,a=i.x,o=i.y,s=i.width,l=i.height,u=s/2,c=l/2;return{cx:a+u,cy:o+c,hwidth:u,hheight:c}}}])}(),RPe=function(){function t(){Ae(this,t)}return Te(t,[{key:"update",value:function(n){if(n.points&&wi(n.points.points)){var r=n.points.points,i=Math.min.apply(Math,Bt(r.map(function(d){return d[0]}))),a=Math.max.apply(Math,Bt(r.map(function(d){return d[0]}))),o=Math.min.apply(Math,Bt(r.map(function(d){return d[1]}))),s=Math.max.apply(Math,Bt(r.map(function(d){return d[1]}))),l=a-i,u=s-o,c=l/2,f=u/2;return{cx:i+c,cy:o+f,hwidth:c,hheight:f}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),NPe=function(){function t(){Ae(this,t)}return Te(t,[{key:"update",value:function(n,r){var i=n.x,a=i===void 0?0:i,o=n.y,s=o===void 0?0:o,l=n.src,u=n.width,c=u===void 0?0:u,f=n.height,d=f===void 0?0:f,h=c,p=d;return l&&!an(l)&&(h||(h=l.width,n.width=h),p||(p=l.height,n.height=p)),{cx:a+h/2,cy:s+p/2,hwidth:h/2,hheight:p/2}}}])}(),FPe=function(){function t(e){Ae(this,t),this.globalRuntime=e}return Te(t,[{key:"isReadyToMeasure",value:function(n,r){var i=n.text;return i}},{key:"update",value:function(n,r){var i,a=n.text,o=n.textAlign,s=o===void 0?"start":o,l=n.lineWidth,u=l===void 0?1:l,c=n.textBaseline,f=c===void 0?"alphabetic":c,d=n.dx,h=d===void 0?0:d,p=n.dy,g=p===void 0?0:p,v=n.x,m=v===void 0?0:v,y=n.y,b=y===void 0?0:y;if(!this.isReadyToMeasure(n,r))return n.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var x=(r==null||(i=r.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0?void 0:i.getConfig())||{},w=x.offscreenCanvas,_=this.globalRuntime.textService.measureText(a,n,w);n.metrics=_;var E=_.width,S=_.height,O=E/2,A=S/2,T=m+O;s==="center"||s==="middle"?T+=u/2-O:(s==="right"||s==="end")&&(T+=u-O*2);var I=b-A;return f==="middle"?I+=A:f==="top"||f==="hanging"?I+=A*2:f==="alphabetic"||(f==="bottom"||f==="ideographic")&&(I+=0),h&&(T+=h),g&&(I+=g),{cx:T,cy:I,hwidth:O,hheight:A}}}])}(),zPe=function(){function t(){Ae(this,t)}return Te(t,[{key:"update",value:function(n,r){return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),jPe=function(){function t(){Ae(this,t)}return Te(t,[{key:"update",value:function(n,r){var i=n.x,a=i===void 0?0:i,o=n.y,s=o===void 0?0:o,l=n.width,u=l===void 0?0:l,c=n.height,f=c===void 0?0:c;return{cx:a+u/2,cy:s+f/2,hwidth:u/2,hheight:f/2}}}])}(),F2=function(){function t(e){Ae(this,t),this.eventPhase=t.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new $i,this.page=new $i,this.canvas=new $i,this.viewport=new $i,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}return Te(t,[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error(Tn)}}])}(),qee=function(t){function e(){var n;Ae(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Nt(this,e,[].concat(i)),n.client=new $i,n.movement=new $i,n.offset=new $i,n.global=new $i,n.screen=new $i,n}return Ft(e,t),Te(e,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(r){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(r)}},{key:"initMouseEvent",value:function(){throw new Error(Tn)}}])}(F2),Gb=function(t){function e(){var n;Ae(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Nt(this,e,[].concat(i)),n.width=0,n.height=0,n.isPrimary=!1,n}return Ft(e,t),Te(e,[{key:"getCoalescedEvents",value:function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])}(qee),nP=function(t){function e(){return Ae(this,e),Nt(this,e,arguments)}return Ft(e,t),Te(e,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])}(qee),_n=function(t){function e(n,r){var i;return Ae(this,e),i=Nt(this,e,[null]),i.type=n,i.detail=r,Object.assign(i,r),i}return Ft(e,t),Te(e)}(F2),ZF=new WeakMap,Wee=function(){function t(){Ae(this,t),this.emitter=new cee}return Te(t,[{key:"on",value:function(n,r,i){return this.addEventListener(n,r,i),this}},{key:"addEventListener",value:function(n,r,i){var a=!1,o=!1;if(M0(i))a=i;else if(i){var s=i.capture;a=s===void 0?!1:s;var l=i.once;o=l===void 0?!1:l}a&&(n+="capture"),r=Ue(r)?r:r.handleEvent;var u=Ue(r)?void 0:r;return o?this.emitter.once(n,r,u):this.emitter.on(n,r,u),this}},{key:"off",value:function(n,r,i){return n?this.removeEventListener(n,r,i):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var n;(n=this.emitter)===null||n===void 0||n.removeAllListeners()}},{key:"removeEventListener",value:function(n,r,i){var a;if(!this.emitter)return this;var o=M0(i)?i:i==null?void 0:i.capture;o&&(n+="capture"),r=Ue(r)?r:(a=r)===null||a===void 0?void 0:a.handleEvent;var s=Ue(r)?void 0:r;return this.emitter.off(n,r,s),this}},{key:"emit",value:function(n,r){this.dispatchEvent(new _n(n,r))}},{key:"dispatchEvent",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=ZF.get(this);if(!i){var a;this.document?i=this:this.defaultView?i=this.defaultView:i=(a=this.ownerDocument)===null||a===void 0?void 0:a.defaultView,i&&ZF.set(this,i)}if(i){if(n.manager=i.getEventService(),!n.manager)return!1;n.defaultPrevented=!1,n.path?n.path.length=0:n.page=[],r||(n.target=this),n.manager.dispatchEvent(n,n.type,r)}else this.emitter.emit(n.type,n);return!n.defaultPrevented}}])}(),vr=function(t){function e(){var n;Ae(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Nt(this,e,[].concat(i)),n.shadow=!1,n.ownerDocument=null,n.isConnected=!1,n.baseURI="",n.childNodes=[],n.nodeType=0,n.nodeName="",n.nodeValue=null,n.parentNode=null,n}return Ft(e,t),Te(e,[{key:"textContent",get:function(){var r="";this.nodeName===pe.TEXT&&(r+=this.style.text);var i=af(this.childNodes),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;o.nodeName===pe.TEXT?r+=o.nodeValue:r+=o.textContent}}catch(s){i.e(s)}finally{i.f()}return r},set:function(r){var i=this;this.childNodes.slice().forEach(function(a){i.removeChild(a)}),this.nodeName===pe.TEXT&&(this.style.text="".concat(r))}},{key:"getRootNode",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(r):r.composed&&this.host?this.host.getRootNode(r):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(r){throw new Error(Tn)}},{key:"lookupNamespaceURI",value:function(r){throw new Error(Tn)}},{key:"lookupPrefix",value:function(r){throw new Error(Tn)}},{key:"normalize",value:function(){throw new Error(Tn)}},{key:"isEqualNode",value:function(r){return this===r}},{key:"isSameNode",value:function(r){return this.isEqualNode(r)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(r){if(r===this)return 0;for(var i=r,a=this,o=[i],s=[a];(l=i.parentNode)!==null&&l!==void 0?l:a.parentNode;){var l;i=i.parentNode?(o.push(i.parentNode),i.parentNode):i,a=a.parentNode?(s.push(a.parentNode),a.parentNode):a}if(i!==a)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var u=o.length>s.length?o:s,c=u===o?s:o;if(u[u.length-c.length]===c[0])return u===o?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var f=u.length-c.length,d=c.length-1;d>=0;d--){var h=c[d],p=u[f+d];if(p!==h){var g=h.parentNode.childNodes;return g.indexOf(h)<g.indexOf(p)?c===o?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:u===o?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(r){return this.contains(r)}},{key:"contains",value:function(r){for(var i=r;i&&this!==i;)i=i.parentNode;return!!i}},{key:"getAncestor",value:function(r){for(var i=this;r>0&&i;)i=i.parentNode,r--;return i}},{key:"forEach",value:function(r){for(var i=[this];i.length>0;){var a=i.pop(),o=r(a);if(o===!1)break;for(var s=a.childNodes.length-1;s>=0;s--)i.push(a.childNodes[s])}}}],[{key:"isNode",value:function(r){return!!r.childNodes}}])}(Wee);vr.DOCUMENT_POSITION_DISCONNECTED=1;vr.DOCUMENT_POSITION_PRECEDING=2;vr.DOCUMENT_POSITION_FOLLOWING=4;vr.DOCUMENT_POSITION_CONTAINS=8;vr.DOCUMENT_POSITION_CONTAINED_BY=16;vr.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var BPe=2048,$Pe=function(){function t(e,n){var r=this;Ae(this,t),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=wn(),this.tmpVec3=Wt(),this.onPointerDown=function(i){var a=r.createPointerEvent(i);if(r.dispatchEvent(a,"pointerdown"),a.pointerType==="touch")r.dispatchEvent(a,"touchstart");else if(a.pointerType==="mouse"||a.pointerType==="pen"){var o=a.button===2;r.dispatchEvent(a,o?"rightdown":"mousedown")}var s=r.trackingData(i.pointerId);s.pressTargetsByButton[i.button]=a.composedPath(),r.freeEvent(a)},this.onPointerUp=function(i){var a=tP.now(),o=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(o,"pointerup"),o.pointerType==="touch")r.dispatchEvent(o,"touchend");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var s=o.button===2;r.dispatchEvent(o,s?"rightup":"mouseup")}var l=r.trackingData(i.pointerId),u=r.findMountedTarget(l.pressTargetsByButton[i.button]),c=u;if(u&&!o.composedPath().includes(u)){for(var f=u;f&&!o.composedPath().includes(f);){if(o.currentTarget=f,r.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch")r.notifyTarget(o,"touchendoutside");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var d=o.button===2;r.notifyTarget(o,d?"rightupoutside":"mouseupoutside")}vr.isNode(f)&&(f=f.parentNode)}delete l.pressTargetsByButton[i.button],c=f}if(c){var h,p=r.clonePointerEvent(o,"click");p.target=c,p.path=[],l.clicksByButton[i.button]||(l.clicksByButton[i.button]={clickCount:0,target:p.target,timeStamp:a});var g=r.context.renderingContext.root.ownerDocument.defaultView,v=l.clicksByButton[i.button];v.target===p.target&&a-v.timeStamp<g.getConfig().dblClickSpeed?++v.clickCount:v.clickCount=1,v.target=p.target,v.timeStamp=a,p.detail=v.clickCount,(h=o.detail)!==null&&h!==void 0&&h.preventClick||(!r.context.config.useNativeClickEvent&&(p.pointerType==="mouse"||p.pointerType==="touch")&&r.dispatchEvent(p,"click"),r.dispatchEvent(p,"pointertap")),r.freeEvent(p)}r.freeEvent(o)},this.onPointerMove=function(i){var a=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),o=a.pointerType==="mouse"||a.pointerType==="pen",s=r.trackingData(i.pointerId),l=r.findMountedTarget(s.overTargets);if(s.overTargets&&l!==a.target){var u=i.type==="mousemove"?"mouseout":"pointerout",c=r.createPointerEvent(i,u,l||void 0);if(r.dispatchEvent(c,"pointerout"),o&&r.dispatchEvent(c,"mouseout"),!a.composedPath().includes(l)){var f=r.createPointerEvent(i,"pointerleave",l||void 0);for(f.eventPhase=f.AT_TARGET;f.target&&!a.composedPath().includes(f.target);)f.currentTarget=f.target,r.notifyTarget(f),o&&r.notifyTarget(f,"mouseleave"),vr.isNode(f.target)&&(f.target=f.target.parentNode);r.freeEvent(f)}r.freeEvent(c)}if(l!==a.target){var d=i.type==="mousemove"?"mouseover":"pointerover",h=r.clonePointerEvent(a,d);r.dispatchEvent(h,"pointerover"),o&&r.dispatchEvent(h,"mouseover");for(var p=l&&vr.isNode(l)&&l.parentNode;p&&p!==(vr.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&p!==a.target;)p=p.parentNode;var g=!p||p===(vr.isNode(r.rootTarget)&&r.rootTarget.parentNode);if(g){var v=r.clonePointerEvent(a,"pointerenter");for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==l&&v.target!==(vr.isNode(r.rootTarget)&&r.rootTarget.parentNode);)v.currentTarget=v.target,r.notifyTarget(v),o&&r.notifyTarget(v,"mouseenter"),vr.isNode(v.target)&&(v.target=v.target.parentNode);r.freeEvent(v)}r.freeEvent(h)}r.dispatchEvent(a,"pointermove"),a.pointerType==="touch"&&r.dispatchEvent(a,"touchmove"),o&&(r.dispatchEvent(a,"mousemove"),r.cursor=r.getCursor(a.target)),s.overTargets=a.composedPath(),r.freeEvent(a)},this.onPointerOut=function(i){var a=r.trackingData(i.pointerId);if(a.overTargets){var o=i.pointerType==="mouse"||i.pointerType==="pen",s=r.findMountedTarget(a.overTargets),l=r.createPointerEvent(i,"pointerout",s||void 0);r.dispatchEvent(l),o&&r.dispatchEvent(l,"mouseout");var u=r.createPointerEvent(i,"pointerleave",s||void 0);for(u.eventPhase=u.AT_TARGET;u.target&&u.target!==(vr.isNode(r.rootTarget)&&r.rootTarget.parentNode);)u.currentTarget=u.target,r.notifyTarget(u),o&&r.notifyTarget(u,"mouseleave"),vr.isNode(u.target)&&(u.target=u.target.parentNode);a.overTargets=null,r.freeEvent(l),r.freeEvent(u)}r.cursor=null},this.onPointerOver=function(i){var a=r.trackingData(i.pointerId),o=r.createPointerEvent(i),s=o.pointerType==="mouse"||o.pointerType==="pen";r.dispatchEvent(o,"pointerover"),s&&r.dispatchEvent(o,"mouseover"),o.pointerType==="mouse"&&(r.cursor=r.getCursor(o.target));var l=r.clonePointerEvent(o,"pointerenter");for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(vr.isNode(r.rootTarget)&&r.rootTarget.parentNode);)l.currentTarget=l.target,r.notifyTarget(l),s&&r.notifyTarget(l,"mouseenter"),vr.isNode(l.target)&&(l.target=l.target.parentNode);a.overTargets=o.composedPath(),r.freeEvent(o),r.freeEvent(l)},this.onPointerUpOutside=function(i){var a=r.trackingData(i.pointerId),o=r.findMountedTarget(a.pressTargetsByButton[i.button]),s=r.createPointerEvent(i);if(o){for(var l=o;l;)s.currentTarget=l,r.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"||(s.pointerType==="mouse"||s.pointerType==="pen")&&r.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),vr.isNode(l)&&(l=l.parentNode);delete a.pressTargetsByButton[i.button]}r.freeEvent(s)},this.onWheel=function(i){var a=r.createWheelEvent(i);r.dispatchEvent(a),r.freeEvent(a)},this.onClick=function(i){if(r.context.config.useNativeClickEvent){var a=r.createPointerEvent(i);r.dispatchEvent(a),r.freeEvent(a)}},this.onPointerCancel=function(i){var a=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(a),r.freeEvent(a)},this.globalRuntime=e,this.context=n}return Te(t,[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var n=this.context.contextService.getBoundingClientRect(),r=1,i=1,a=this.context.contextService.getDomElement();if(a&&n){var o=a.offsetWidth,s=a.offsetHeight;o&&s&&(r=n.width/o,i=n.height/s)}return{scaleX:r,scaleY:i,bbox:n}}},{key:"client2Viewport",value:function(n){var r=this.getScale(),i=r.scaleX,a=r.scaleY,o=r.bbox;return new $i((n.x-((o==null?void 0:o.left)||0))/i,(n.y-((o==null?void 0:o.top)||0))/a)}},{key:"viewport2Client",value:function(n){var r=this.getScale(),i=r.scaleX,a=r.scaleY,o=r.bbox;return new $i((n.x+((o==null?void 0:o.left)||0))*i,(n.y+((o==null?void 0:o.top)||0))*a)}},{key:"viewport2Canvas",value:function(n){var r=n.x,i=n.y,a=this.rootTarget.defaultView,o=a.getCamera(),s=this.context.config,l=s.width,u=s.height,c=o.getPerspectiveInverse(),f=o.getWorldTransform(),d=oa(this.tmpMatrix,f,c),h=aa(this.tmpVec3,r/l*2-1,(1-i/u)*2-1,0);return Cr(h,h,d),new $i(h[0],h[1])}},{key:"canvas2Viewport",value:function(n){var r=this.rootTarget.defaultView,i=r.getCamera(),a=i.getPerspective(),o=i.getViewTransform(),s=oa(this.tmpMatrix,a,o),l=aa(this.tmpVec3,n.x,n.y,0);Cr(this.tmpVec3,this.tmpVec3,s);var u=this.context.config,c=u.width,f=u.height;return new $i((l[0]+1)/2*c,(1-(l[1]+1)/2)*f)}},{key:"setPickHandler",value:function(n){this.pickHandler=n}},{key:"addEventMapping",value:function(n,r){this.mappingTable[n]||(this.mappingTable[n]=[]),this.mappingTable[n].push({fn:r,priority:0}),this.mappingTable[n].sort(function(i,a){return i.priority-a.priority})}},{key:"mapEvent",value:function(n){if(this.rootTarget){var r=this.mappingTable[n.type];if(r)for(var i=0,a=r.length;i<a;i++)r[i].fn(n);else console.warn("[EventService]: Event mapping not defined for ".concat(n.type))}}},{key:"dispatchEvent",value:function(n,r,i){if(!i)n.propagationStopped=!1,n.propagationImmediatelyStopped=!1,this.propagate(n,r);else{n.eventPhase=n.AT_TARGET;var a=this.rootTarget.defaultView||null;n.currentTarget=a,this.notifyListeners(n,r)}}},{key:"propagate",value:function(n,r){if(n.target){var i=n.composedPath();n.eventPhase=n.CAPTURING_PHASE;for(var a=i.length-1;a>=1;a--)if(n.currentTarget=i[a],this.notifyTarget(n,r),n.propagationStopped||n.propagationImmediatelyStopped)return;if(n.eventPhase=n.AT_TARGET,n.currentTarget=n.target,this.notifyTarget(n,r),!(n.propagationStopped||n.propagationImmediatelyStopped)){var o=i.indexOf(n.currentTarget);n.eventPhase=n.BUBBLING_PHASE;for(var s=o+1;s<i.length;s++)if(n.currentTarget=i[s],this.notifyTarget(n,r),n.propagationStopped||n.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(n){var r=[n],i=this.rootTarget.defaultView||null;if(i&&i===n)return r.unshift(i.document),r;for(var a=0;a<BPe&&n!==this.rootTarget;a++)vr.isNode(n)&&n.parentNode&&(r.push(n.parentNode),n=n.parentNode);return i&&r.push(i),r}},{key:"hitTest",value:function(n){var r=n.viewportX,i=n.viewportY,a=this.context.config,o=a.width,s=a.height,l=a.disableHitTesting;return r<0||i<0||r>o||i>s?null:!l&&this.pickHandler(n)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(n,r){var i,a=r==null?void 0:r.target;if((i=a)!==null&&i!==void 0&&i.shadowRoot&&(a=r.composedPath()[0]),a){if(a===n)return!0;if(n&&n.contains)return n.contains(a)}return r!=null&&r.composedPath?r.composedPath().indexOf(n)>-1:!1}},{key:"getExistedHTML",value:function(n){if(n.nativeEvent.composedPath)for(var r=0,i=n.nativeEvent.composedPath();r<i.length;r++){var a=i[r],o=this.nativeHTMLMap.get(a);if(o)return o}return null}},{key:"pickTarget",value:function(n){return this.hitTest({clientX:n.clientX,clientY:n.clientY,viewportX:n.viewportX,viewportY:n.viewportY,x:n.canvasX,y:n.canvasY})}},{key:"createPointerEvent",value:function(n,r,i,a){var o=this.allocateEvent(Gb);this.copyPointerData(n,o),this.copyMouseData(n,o),this.copyData(n,o),o.nativeEvent=n.nativeEvent,o.originalEvent=n;var s=this.getExistedHTML(o),l=this.context.contextService.getDomElement();return o.target=i??(s||this.isNativeEventFromCanvas(l,o.nativeEvent)&&this.pickTarget(o)||a),typeof r=="string"&&(o.type=r),o}},{key:"createWheelEvent",value:function(n){var r=this.allocateEvent(nP);this.copyWheelData(n,r),this.copyMouseData(n,r),this.copyData(n,r),r.nativeEvent=n.nativeEvent,r.originalEvent=n;var i=this.getExistedHTML(r),a=this.context.contextService.getDomElement();return r.target=i||this.isNativeEventFromCanvas(a,r.nativeEvent)&&this.pickTarget(r),r}},{key:"trackingData",value:function(n){return this.mappingState.trackingData[n]||(this.mappingState.trackingData[n]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[n]}},{key:"cloneWheelEvent",value:function(n){var r=this.allocateEvent(nP);return r.nativeEvent=n.nativeEvent,r.originalEvent=n.originalEvent,this.copyWheelData(n,r),this.copyMouseData(n,r),this.copyData(n,r),r.target=n.target,r.path=n.composedPath().slice(),r.type=n.type,r}},{key:"clonePointerEvent",value:function(n,r){var i=this.allocateEvent(Gb);return i.nativeEvent=n.nativeEvent,i.originalEvent=n.originalEvent,this.copyPointerData(n,i),this.copyMouseData(n,i),this.copyData(n,i),i.target=n.target,i.path=n.composedPath().slice(),i.type=r??i.type,i}},{key:"copyPointerData",value:function(n,r){r.pointerId=n.pointerId,r.width=n.width,r.height=n.height,r.isPrimary=n.isPrimary,r.pointerType=n.pointerType,r.pressure=n.pressure,r.tangentialPressure=n.tangentialPressure,r.tiltX=n.tiltX,r.tiltY=n.tiltY,r.twist=n.twist}},{key:"copyMouseData",value:function(n,r){r.altKey=n.altKey,r.button=n.button,r.buttons=n.buttons,r.ctrlKey=n.ctrlKey,r.metaKey=n.metaKey,r.shiftKey=n.shiftKey,r.client.copyFrom(n.client),r.movement.copyFrom(n.movement),r.canvas.copyFrom(n.canvas),r.screen.copyFrom(n.screen),r.global.copyFrom(n.global),r.offset.copyFrom(n.offset)}},{key:"copyWheelData",value:function(n,r){r.deltaMode=n.deltaMode,r.deltaX=n.deltaX,r.deltaY=n.deltaY,r.deltaZ=n.deltaZ}},{key:"copyData",value:function(n,r){r.isTrusted=n.isTrusted,r.timeStamp=tP.now(),r.type=n.type,r.detail=n.detail,r.view=n.view,r.page.copyFrom(n.page),r.viewport.copyFrom(n.viewport)}},{key:"allocateEvent",value:function(n){this.eventPool.has(n)||this.eventPool.set(n,[]);var r=this.eventPool.get(n).pop()||new n(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.target=null,r}},{key:"freeEvent",value:function(n){if(n.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var r=n.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(n)}},{key:"notifyTarget",value:function(n,r){r=r??n.type;var i=n.eventPhase===n.CAPTURING_PHASE||n.eventPhase===n.AT_TARGET?"".concat(r,"capture"):r;this.notifyListeners(n,i),n.eventPhase===n.AT_TARGET&&this.notifyListeners(n,r)}},{key:"notifyListeners",value:function(n,r){var i=n.currentTarget.emitter,a=i._events[r];if(a)if("fn"in a)a.once&&i.removeListener(r,a.fn,void 0,!0),a.fn.call(n.currentTarget||a.context,n);else for(var o=0;o<a.length&&!n.propagationImmediatelyStopped;o++)a[o].once&&i.removeListener(r,a[o].fn,void 0,!0),a[o].fn.call(n.currentTarget||a[o].context,n)}},{key:"findMountedTarget",value:function(n){if(!n)return null;for(var r=n[n.length-1],i=n.length-2;i>=0;i--){var a=n[i];if(a===this.rootTarget||vr.isNode(a)&&a.parentNode===r)r=n[i];else break}return r}},{key:"getCursor",value:function(n){for(var r=n;r;){var i=rPe(r)&&r.getAttribute("cursor");if(i)return i;r=vr.isNode(r)&&r.parentNode}}}])}(),fL=function(){function t(){Ae(this,t)}return Te(t,[{key:"getOrCreateCanvas",value:function(n,r){if(this.canvas)return this.canvas;if(n||Ce.offscreenCanvas)this.canvas=n||Ce.offscreenCanvas,this.context=this.canvas.getContext("2d",It({willReadFrequently:!0},r));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",It({willReadFrequently:!0},r)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch{this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",It({willReadFrequently:!0},r))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(n,r){return this.context?this.context:(this.getOrCreateCanvas(n,r),this.context)}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch{}try{return document.createElement("canvas")}catch{}return null}}])}(),mh=function(t){return t[t.CAMERA_CHANGED=0]="CAMERA_CHANGED",t[t.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",t[t.NONE=2]="NONE",t}({}),VPe=function(){function t(e,n){Ae(this,t),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new fa,initAsync:new bPe,dirtycheck:new yE,cull:new yE,beginFrame:new fa,beforeRender:new fa,render:new fa,afterRender:new fa,endFrame:new fa,destroy:new fa,pick:new xPe,pickSync:new yE,pointerDown:new fa,pointerUp:new fa,pointerMove:new fa,pointerOut:new fa,pointerOver:new fa,pointerWheel:new fa,pointerCancel:new fa,click:new fa},this.globalRuntime=e,this.context=n}return Te(t,[{key:"init",value:function(n){var r=this,i=It(It({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(a){a.apply(i,r.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,n()):this.hooks.initAsync.promise().then(function(){r.inited=!0,n()}).catch(function(a){})}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){var n=this.context.config.renderer,r=n.getConfig(),i=r.enableDirtyRectangleRendering;return!i||this.context.renderingContext.renderReasons.has(mh.CAMERA_CHANGED)}},{key:"render",value:function(n,r,i){var a=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var o=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(o.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),o.renderReasons.size&&this.inited){o.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var s=o.renderReasons.size===1&&o.renderReasons.has(mh.CAMERA_CHANGED),l=!n.disableRenderHooks||!(n.disableRenderHooks&&s);l&&this.renderDisplayObject(o.root,n,o),this.hooks.beginFrame.call(r),l&&o.renderListCurrentFrame.forEach(function(u){a.hooks.beforeRender.call(u),a.hooks.render.call(u),a.hooks.afterRender.call(u)}),this.hooks.endFrame.call(r),o.renderListCurrentFrame=[],o.renderReasons.clear(),i()}}},{key:"renderDisplayObject",value:function(n,r,i){var a=this,o=r.renderer.getConfig(),s=o.enableDirtyCheck,l=o.enableCulling;function u(g){var v=g.renderable,m=g.sortable,y=s?v.dirty||i.dirtyRectangleRenderingDisabled?g:null:g;if(y){var b=l?a.hooks.cull.call(y,a.context.camera):y;b&&(a.stats.rendered+=1,i.renderListCurrentFrame.push(b))}v.dirty=!1,m.renderOrder=a.zIndexCounter,a.zIndexCounter+=1,a.stats.total+=1,m.dirty&&(a.sort(g,m),m.dirty=!1,m.dirtyChildren=[],m.dirtyReason=void 0)}for(var c=[n];c.length>0;){var f,d=c.pop();u(d);for(var h=((f=d.sortable)===null||f===void 0||(f=f.sorted)===null||f===void 0?void 0:f.length)>0?d.sortable.sorted:d.childNodes,p=h.length-1;p>=0;p--)c.push(h[p])}}},{key:"sort",value:function(n,r){var i,a;(r==null||(i=r.sorted)===null||i===void 0?void 0:i.length)>0&&r.dirtyReason!==jb.Z_INDEX_CHANGED?r.dirtyChildren.forEach(function(o){var s=r.sorted.indexOf(o);s>-1&&r.sorted.splice(s,1);var l=n.childNodes.indexOf(o);if(l>-1)if(r.sorted.length===0)r.sorted.push(o);else{var u=iPe(r.sorted,o);r.sorted.splice(u,0,o)}}):r.sorted=n.childNodes.slice().sort(Nee),((a=r.sorted)===null||a===void 0?void 0:a.length)>0&&n.childNodes.filter(function(o){return o.parsedStyle.zIndex}).length===0&&(r.sorted=[])}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()}},{key:"dirtify",value:function(){this.context.renderingContext.renderReasons.add(mh.DISPLAY_OBJECT_CHANGED)}}])}(),qPe=/\[\s*(.*)=(.*)\s*\]/,WPe=function(){function t(){Ae(this,t)}return Te(t,[{key:"selectOne",value:function(n,r){var i=this;if(n.startsWith("."))return r.find(function(l){return((l==null?void 0:l.classList)||[]).indexOf(i.getIdOrClassname(n))>-1});if(n.startsWith("#"))return r.find(function(l){return l.id===i.getIdOrClassname(n)});if(n.startsWith("[")){var a=this.getAttribute(n),o=a.name,s=a.value;return o?r.find(function(l){return r!==l&&(o==="name"?l.name===s:i.attributeToString(l,o)===s)}):null}return r.find(function(l){return r!==l&&l.nodeName===n})}},{key:"selectAll",value:function(n,r){var i=this;if(n.startsWith("."))return r.findAll(function(l){return r!==l&&((l==null?void 0:l.classList)||[]).indexOf(i.getIdOrClassname(n))>-1});if(n.startsWith("#"))return r.findAll(function(l){return r!==l&&l.id===i.getIdOrClassname(n)});if(n.startsWith("[")){var a=this.getAttribute(n),o=a.name,s=a.value;return o?r.findAll(function(l){return r!==l&&(o==="name"?l.name===s:i.attributeToString(l,o)===s)}):[]}return r.findAll(function(l){return r!==l&&l.nodeName===n})}},{key:"is",value:function(n,r){if(n.startsWith("."))return r.className===this.getIdOrClassname(n);if(n.startsWith("#"))return r.id===this.getIdOrClassname(n);if(n.startsWith("[")){var i=this.getAttribute(n),a=i.name,o=i.value;return a==="name"?r.name===o:this.attributeToString(r,a)===o}return r.nodeName===n}},{key:"getIdOrClassname",value:function(n){return n.substring(1)}},{key:"getAttribute",value:function(n){var r=n.match(qPe),i="",a="";return r&&r.length>2&&(i=r[1].replace(/"/g,""),a=r[2].replace(/"/g,"")),{name:i,value:a}}},{key:"attributeToString",value:function(n,r){if(!n.getAttribute)return"";var i=n.getAttribute(r);return lt(i)?"":i.toString?i.toString():""}}])}(),Dt=function(t){return t.ATTR_MODIFIED="DOMAttrModified",t.INSERTED="DOMNodeInserted",t.MOUNTED="DOMNodeInsertedIntoDocument",t.REMOVED="removed",t.UNMOUNTED="DOMNodeRemovedFromDocument",t.REPARENT="reparent",t.DESTROY="destroy",t.BOUNDS_CHANGED="bounds-changed",t.CULLED="culled",t}({}),gl=function(t){function e(n,r,i,a,o,s,l,u){var c;return Ae(this,e),c=Nt(this,e,[null]),c.relatedNode=r,c.prevValue=i,c.newValue=a,c.attrName=o,c.attrChange=s,c.prevParsedValue=l,c.newParsedValue=u,c.type=n,c}return Ft(e,t),Te(e)}(F2);gl.ADDITION=2;gl.MODIFICATION=1;gl.REMOVAL=3;function KF(t){var e=t.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0)}var GPe=new gl(Dt.REPARENT,null,"","","",0,"",""),HPe=MI(),sy=Wt(),YPe=ln(1,1,1),UPe=wn(),XPe=MI(),xu=Wt(),Fd=wn(),wu=gi(),ZPe=Wt(),KPe=gi(),JPe=Wt(),ng=Wt(),Yc=Wt(),ly=wn(),JF=gi(),QF=gi(),uy=gi(),xE={affectChildren:!0},QPe=function(){function t(e){Ae(this,t),this.pendingEvents=new Map,this.boundsChangedEvent=new _n(Dt.BOUNDS_CHANGED),this.displayObjectDependencyMap=new WeakMap,this.runtime=e}return Te(t,[{key:"matches",value:function(n,r){return this.runtime.sceneGraphSelector.is(n,r)}},{key:"querySelector",value:function(n,r){return this.runtime.sceneGraphSelector.selectOne(n,r)}},{key:"querySelectorAll",value:function(n,r){return this.runtime.sceneGraphSelector.selectAll(n,r)}},{key:"attach",value:function(n,r,i){var a,o=!1;n.parentNode&&(o=n.parentNode!==r,this.detach(n));var s=n.nodeName===pe.FRAGMENT,l=Wb(r);n.parentNode=r;var u=s?n.childNodes:[n];je(i)?u.forEach(function(h){r.childNodes.splice(i,0,h),h.parentNode=r}):u.forEach(function(h){r.childNodes.push(h),h.parentNode=r});var c=r,f=c.sortable;if((f!=null&&(a=f.sorted)!==null&&a!==void 0&&a.length||f.dirty||n.parsedStyle.zIndex)&&(f.dirtyChildren.indexOf(n)===-1&&f.dirtyChildren.push(n),f.dirty=!0,f.dirtyReason=jb.ADDED),!l){if(s)this.dirtifyFragment(n);else{var d=n.transformable;d&&this.dirtifyWorld(n,d)}o&&n.dispatchEvent(GPe)}}},{key:"detach",value:function(n){var r,i;if(n.parentNode){var a=n.transformable,o=n.parentNode,s=o.sortable;(s!=null&&(r=s.sorted)!==null&&r!==void 0&&r.length||(i=n.style)!==null&&i!==void 0&&i.zIndex)&&(s.dirtyChildren.indexOf(n)===-1&&s.dirtyChildren.push(n),s.dirty=!0,s.dirtyReason=jb.REMOVED);var l=n.parentNode.childNodes.indexOf(n);l>-1&&n.parentNode.childNodes.splice(l,1),a&&this.dirtifyWorld(n,a),n.parentNode=null}}},{key:"getOrigin",value:function(n){return n.getGeometryBounds(),n.transformable.origin}},{key:"setOrigin",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=[r,i,a]);var o=n.transformable;if(!(r[0]===o.origin[0]&&r[1]===o.origin[1]&&r[2]===o.origin[2])){var s=o.origin;s[0]=r[0],s[1]=r[1],s[2]=r[2]||0,this.dirtifyLocal(n,o)}}},{key:"rotate",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=ln(r,i,a));var o=n.transformable;if(n.parentNode===null||!n.parentNode.transformable)this.rotateLocal(n,r);else{var s=wu;Km(s,r[0],r[1],r[2]);var l=this.getRotation(n),u=this.getRotation(n.parentNode);Jm(uy,u),ZS(uy,uy),ac(s,uy,s),ac(o.localRotation,s,l),kb(o.localRotation,o.localRotation),this.dirtifyLocal(n,o)}}},{key:"rotateLocal",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=ln(r,i,a));var o=n.transformable;Km(QF,r[0],r[1],r[2]),B9(o.localRotation,o.localRotation,QF),this.dirtifyLocal(n,o)}},{key:"setEulerAngles",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=ln(r,i,a));var o=n.transformable;if(n.parentNode===null||!n.parentNode.transformable)this.setLocalEulerAngles(n,r);else{Km(o.localRotation,r[0],r[1],r[2]);var s=this.getRotation(n.parentNode);Jm(JF,ZS(wu,s)),B9(o.localRotation,o.localRotation,JF),this.dirtifyLocal(n,o)}}},{key:"setLocalEulerAngles",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;typeof r=="number"&&(r=ln(r,i,a));var s=n.transformable;Km(s.localRotation,r[0],r[1],r[2]),o&&this.dirtifyLocal(n,s)}},{key:"translateLocal",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=ln(r,i,a));var o=n.transformable;Kp(r,sy)||(Pke(r,r,o.localRotation),ic(o.localPosition,o.localPosition,r),this.dirtifyLocal(n,o))}},{key:"setPosition",value:function(n,r){var i,a=n.transformable;if(Yc[0]=r[0],Yc[1]=r[1],Yc[2]=(i=r[2])!==null&&i!==void 0?i:0,!Kp(this.getPosition(n),Yc)){if(el(a.position,Yc),n.parentNode===null||!n.parentNode.transformable)el(a.localPosition,Yc);else{var o=n.parentNode.transformable;Bh(ly,o.worldTransform),ms(ly,ly),Cr(a.localPosition,Yc,ly)}this.dirtifyLocal(n,a)}}},{key:"setLocalPosition",value:function(n,r){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=n.transformable;ng[0]=r[0],ng[1]=r[1],ng[2]=(i=r[2])!==null&&i!==void 0?i:0,!Kp(o.localPosition,ng)&&(el(o.localPosition,ng),a&&this.dirtifyLocal(n,o))}},{key:"scaleLocal",value:function(n,r){var i,a=n.transformable;Ake(a.localScale,a.localScale,aa(xu,r[0],r[1],(i=r[2])!==null&&i!==void 0?i:1)),this.dirtifyLocal(n,a)}},{key:"setLocalScale",value:function(n,r){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=n.transformable;aa(xu,r[0],r[1],(i=r[2])!==null&&i!==void 0?i:o.localScale[2]),!Kp(xu,o.localScale)&&(el(o.localScale,xu),a&&this.dirtifyLocal(n,o))}},{key:"translate",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=aa(xu,r,i,a)),!Kp(r,sy)&&(ic(xu,this.getPosition(n),r),this.setPosition(n,xu))}},{key:"setRotation",value:function(n,r,i,a,o){var s=n.transformable;if(typeof r=="number"&&(r=Fke(r,i,a,o)),n.parentNode===null||!n.parentNode.transformable)this.setLocalRotation(n,r);else{var l=this.getRotation(n.parentNode);Jm(wu,l),ZS(wu,wu),ac(s.localRotation,wu,r),kb(s.localRotation,s.localRotation),this.dirtifyLocal(n,s)}}},{key:"setLocalRotation",value:function(n,r,i,a,o){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;typeof r=="number"&&(r=j9(wu,r,i,a,o));var l=n.transformable;Jm(l.localRotation,r),s&&this.dirtifyLocal(n,l)}},{key:"setLocalSkew",value:function(n,r,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;typeof r=="number"&&(r=jke(XPe,r,i));var o=n.transformable;zke(o.localSkew,r),a&&this.dirtifyLocal(n,o)}},{key:"dirtifyLocal",value:function(n,r){Wb(n)||r.localDirtyFlag||(r.localDirtyFlag=!0,r.dirtyFlag||this.dirtifyWorld(n,r))}},{key:"dirtifyWorld",value:function(n,r){r.dirtyFlag||this.unfreezeParentToRoot(n),this.dirtifyWorldInternal(n,r),this.dirtifyToRoot(n,!0)}},{key:"dirtifyFragment",value:function(n){var r=n.transformable;r&&(r.frozen=!1,r.dirtyFlag=!0,r.localDirtyFlag=!0);var i=n.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0);for(var a=n.childNodes.length,o=0;o<a;o++)this.dirtifyFragment(n.childNodes[o]);n.nodeName===pe.FRAGMENT&&this.pendingEvents.set(n,!1)}},{key:"triggerPendingEvents",value:function(){var n=this,r=new Set,i=function(o,s){!o.isConnected||r.has(o)||o.nodeName===pe.FRAGMENT||(n.boundsChangedEvent.detail=s,n.boundsChangedEvent.target=o,o.isMutationObserved?o.dispatchEvent(n.boundsChangedEvent):o.ownerDocument.defaultView.dispatchEvent(n.boundsChangedEvent,!0),r.add(o))};this.pendingEvents.forEach(function(a,o){o.nodeName!==pe.FRAGMENT&&(xE.affectChildren=a,a?o.forEach(function(s){i(s,xE)}):i(o,xE))}),r.clear(),this.clearPendingEvents()}},{key:"clearPendingEvents",value:function(){this.pendingEvents.clear()}},{key:"dirtifyToRoot",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=n;for(i.renderable&&(i.renderable.dirty=!0);i;)KF(i),i=i.parentNode;r&&n.forEach(function(a){KF(a)}),this.informDependentDisplayObjects(n),this.pendingEvents.set(n,r)}},{key:"updateDisplayObjectDependency",value:function(n,r,i,a){if(r&&r!==i){var o=this.displayObjectDependencyMap.get(r);if(o&&o[n]){var s=o[n].indexOf(a);o[n].splice(s,1)}}if(i){var l=this.displayObjectDependencyMap.get(i);l||(this.displayObjectDependencyMap.set(i,{}),l=this.displayObjectDependencyMap.get(i)),l[n]||(l[n]=[]),l[n].push(a)}}},{key:"informDependentDisplayObjects",value:function(n){var r=this,i=this.displayObjectDependencyMap.get(n);i&&Object.keys(i).forEach(function(a){i[a].forEach(function(o){r.dirtifyToRoot(o,!0),o.dispatchEvent(new gl(Dt.ATTR_MODIFIED,o,r,r,a,gl.MODIFICATION,r,r)),o.isCustomElement&&o.isConnected&&o.attributeChangedCallback&&o.attributeChangedCallback(a,r,r)})})}},{key:"getPosition",value:function(n){var r=n.transformable;return Sb(r.position,this.getWorldTransform(n,r))}},{key:"getRotation",value:function(n){var r=n.transformable;return Eb(r.rotation,this.getWorldTransform(n,r))}},{key:"getScale",value:function(n){var r=n.transformable;return $h(r.scaling,this.getWorldTransform(n,r))}},{key:"getWorldTransform",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.transformable;return!r.localDirtyFlag&&!r.dirtyFlag||(n.parentNode&&n.parentNode.transformable&&this.getWorldTransform(n.parentNode),this.sync(n,r)),r.worldTransform}},{key:"getLocalPosition",value:function(n){return n.transformable.localPosition}},{key:"getLocalRotation",value:function(n){return n.transformable.localRotation}},{key:"getLocalScale",value:function(n){return n.transformable.localScale}},{key:"getLocalSkew",value:function(n){return n.transformable.localSkew}},{key:"calcLocalTransform",value:function(n){var r=n.localSkew[0]!==0||n.localSkew[1]!==0;if(r){Yg(n.localTransform,n.localRotation,n.localPosition,ln(1,1,1),n.origin),(n.localSkew[0]!==0||n.localSkew[1]!==0)&&(yc(Fd),Fd[4]=Math.tan(n.localSkew[0]),Fd[1]=Math.tan(n.localSkew[1]),oa(n.localTransform,n.localTransform,Fd));var i=Yg(Fd,j9(wu,0,0,0,1),aa(xu,1,1,1),n.localScale,n.origin);oa(n.localTransform,n.localTransform,i)}else{var a=n.localTransform,o=n.localPosition,s=n.localRotation,l=n.localScale,u=n.origin,c=o[0]!==0||o[1]!==0||o[2]!==0,f=s[3]!==1||s[0]!==0||s[1]!==0||s[2]!==0,d=l[0]!==1||l[1]!==1||l[2]!==1,h=u[0]!==0||u[1]!==0||u[2]!==0;!f&&!d&&!h?c?Bl(a,o):yc(a):Yg(a,s,o,l,u)}}},{key:"getLocalTransform",value:function(n){var r=n.transformable;return r.localDirtyFlag&&(this.calcLocalTransform(r),r.localDirtyFlag=!1),r.localTransform}},{key:"setLocalTransform",value:function(n,r){var i=Sb(ZPe,r),a=Eb(KPe,r),o=$h(JPe,r);this.setLocalScale(n,o,!1),this.setLocalPosition(n,i,!1),this.setLocalRotation(n,a,void 0,void 0,void 0,!1),this.dirtifyLocal(n,n.transformable)}},{key:"resetLocalTransform",value:function(n){this.setLocalScale(n,YPe,!1),this.setLocalPosition(n,sy,!1),this.setLocalEulerAngles(n,sy,void 0,void 0,!1),this.setLocalSkew(n,HPe,void 0,!1),this.dirtifyLocal(n,n.transformable)}},{key:"getTransformedGeometryBounds",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0,a=this.getGeometryBounds(n,r);if(!zn.isEmpty(a)){var o=i||new zn;return o.setFromTransformedAABB(a,this.getWorldTransform(n)),o}return null}},{key:"getGeometryBounds",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=n,a=i.geometry;a.dirty&&Ce.styleValueRegistry.updateGeometry(n);var o=r?a.renderBounds:a.contentBounds||null;return o||new zn}},{key:"getBounds",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=n,o=a.renderable;if(!o.boundsDirty&&!i&&o.bounds)return o.bounds;if(!o.renderBoundsDirty&&i&&o.renderBounds)return o.renderBounds;var s=i?o.renderBounds:o.bounds,l=this.getTransformedGeometryBounds(n,i,s),u=n.childNodes;if(u.forEach(function(d){var h=r.getBounds(d,i);h&&(l?l.add(h):(l=s||new zn,l.update(h.center,h.halfExtents)))}),l||(l=new zn),i){var c=Fee(n);if(c){var f=c.parsedStyle.clipPath.getBounds(i);l?f&&(l=f.intersection(l)):l.update(f.center,f.halfExtents)}}return i?(o.renderBounds=l,o.renderBoundsDirty=!1):(o.bounds=l,o.boundsDirty=!1),l}},{key:"getLocalBounds",value:function(n){if(n.parentNode){var r=UPe;n.parentNode.transformable&&(r=ms(Fd,this.getWorldTransform(n.parentNode)));var i=this.getBounds(n);if(!zn.isEmpty(i)){var a=new zn;return a.setFromTransformedAABB(i,r),a}}return this.getBounds(n)}},{key:"getBoundingClientRect",value:function(n){var r,i,a=this.getGeometryBounds(n);zn.isEmpty(a)||(i=new zn,i.setFromTransformedAABB(a,this.getWorldTransform(n)));var o=(r=n.ownerDocument)===null||r===void 0||(r=r.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect();if(i){var s=i.getMin(),l=Ot(s,2),u=l[0],c=l[1],f=i.getMax(),d=Ot(f,2),h=d[0],p=d[1];return new Zh(u+((o==null?void 0:o.left)||0),c+((o==null?void 0:o.top)||0),h-u,p-c)}return new Zh((o==null?void 0:o.left)||0,(o==null?void 0:o.top)||0,0,0)}},{key:"dirtifyWorldInternal",value:function(n,r){var i=this;if(!r.dirtyFlag){r.dirtyFlag=!0,r.frozen=!1,n.childNodes.forEach(function(s){var l=s.transformable;l.dirtyFlag||i.dirtifyWorldInternal(s,l)});var a=n,o=a.renderable;o&&(o.renderBoundsDirty=!0,o.boundsDirty=!0,o.dirty=!0)}}},{key:"syncHierarchy",value:function(n){var r=n.transformable;if(!r.frozen){r.frozen=!0,(r.localDirtyFlag||r.dirtyFlag)&&this.sync(n,r);for(var i=n.childNodes,a=0;a<i.length;a++)this.syncHierarchy(i[a])}}},{key:"sync",value:function(n,r){if(r.localDirtyFlag&&(this.calcLocalTransform(r),r.localDirtyFlag=!1),r.dirtyFlag){var i=n.parentNode,a=i&&i.transformable;i===null||!a?Bh(r.worldTransform,r.localTransform):oa(r.worldTransform,a.worldTransform,r.localTransform),r.dirtyFlag=!1}}},{key:"unfreezeParentToRoot",value:function(n){for(var r=n.parentNode;r;){var i=r.transformable;i&&(i.frozen=!1),r=r.parentNode}}}])}(),Uc={MetricsString:"|q",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},e7=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,eDe=/[!%),.:;?\]}'""]/,tDe=/[$('"]/,nDe=/[!),.:;?\]}'""]/,rDe=/[([{'"]/,iDe=/[)\]'"?!:;,.]/,aDe=/[(['"...]/,oDe=/[!%),.:;?\]}'"]/,sDe=/[$([{'"#]/,lDe=new RegExp("".concat(eDe.source,"|").concat(nDe.source,"|").concat(iDe.source,"|").concat(oDe.source)),uDe=new RegExp("".concat(tDe.source,"|").concat(rDe.source,"|").concat(aDe.source,"|").concat(sDe.source)),cDe=function(){function t(e){var n=this;Ae(this,t),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(r,i){return n.isBreakingSpace(i)?!1:!!(r&&(uDe.exec(i)||lDe.exec(r)))},this.trimByKinsokuShorui=function(r){var i=Bt(r),a=i[i.length-2];if(!a)return r;var o=a[a.length-1];return i[i.length-2]=a.slice(0,-1),i[i.length-1]=o+i[i.length-1],i},this.runtime=e}return Te(t,[{key:"measureFont",value:function(n,r){if(this.fontMetricsCache[n])return this.fontMetricsCache[n];var i={ascent:0,descent:0,fontSize:0},a=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(r),o=this.runtime.offscreenCanvasCreator.getOrCreateContext(r,{willReadFrequently:!0});o.font=n;var s=Uc.MetricsString+Uc.BaselineSymbol,l=Math.ceil(o.measureText(s).width),u=Math.ceil(o.measureText(Uc.BaselineSymbol).width),c=Uc.HeightMultiplier*u;u=u*Uc.BaselineMultiplier|0,a.width=l,a.height=c,o.fillStyle="#f00",o.fillRect(0,0,l,c),o.font=n,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(s,0,u);var f=o.getImageData(0,0,l||1,c||1).data,d=f.length,h=l*4,p=0,g=0,v=!1;for(p=0;p<u;++p){for(var m=0;m<h;m+=4)if(f[g+m]!==255){v=!0;break}if(!v)g+=h;else break}for(i.ascent=u-p,g=d-h,v=!1,p=c;p>u;--p){for(var y=0;y<h;y+=4)if(f[g+y]!==255){v=!0;break}if(!v)g-=h;else break}return i.descent=p-u,i.fontSize=i.ascent+i.descent,this.fontMetricsCache[n]=i,i}},{key:"measureText",value:function(n,r,i){var a=r.fontSize,o=a===void 0?16:a,s=r.wordWrap,l=s===void 0?!1:s,u=r.lineHeight,c=r.lineWidth,f=c===void 0?1:c,d=r.textBaseline,h=d===void 0?"alphabetic":d,p=r.textAlign,g=p===void 0?"start":p,v=r.letterSpacing,m=v===void 0?0:v,y=r.textPath;r.textPathSide,r.textPathStartOffset;var b=r.leading,x=b===void 0?0:b,w=SPe(r),_=this.measureFont(w,i);_.fontSize===0&&(_.fontSize=o,_.ascent=o);var E=this.runtime.offscreenCanvasCreator.getOrCreateContext(i);E.font=w,r.isOverflowing=!1;var S=l?this.wordWrap(n,r,i):n,O=S.split(/(?:\r\n|\r|\n)/),A=new Array(O.length),T=0;if(y){y.getTotalLength();for(var I=0;I<O.length;I++)E.measureText(O[I]).width+(O[I].length-1)*m}else{for(var D=0;D<O.length;D++){var R=E.measureText(O[D]).width+(O[D].length-1)*m;A[D]=R,T=Math.max(T,R)}var F=T+f,z=u||_.fontSize+f,N=Math.max(z,_.fontSize+f)+(O.length-1)*(z+x);z+=x;var L=0;return h==="middle"?L=-N/2:h==="bottom"||h==="alphabetic"||h==="ideographic"?L=-N:(h==="top"||h==="hanging")&&(L=0),{font:w,width:F,height:N,lines:O,lineWidths:A,lineHeight:z,maxLineWidth:T,fontProperties:_,lineMetrics:A.map(function(B,$){var G=0;return g==="center"||g==="middle"?G-=B/2:(g==="right"||g==="end")&&(G-=B),new Zh(G-f/2,L+$*z,B+f,z)})}}}},{key:"wordWrap",value:function(n,r,i){var a=this,o=this,s=r.wordWrapWidth,l=s===void 0?0:s,u=r.letterSpacing,c=u===void 0?0:u,f=r.maxLines,d=f===void 0?1/0:f,h=r.textOverflow,p=this.runtime.offscreenCanvasCreator.getOrCreateContext(i),g=l+c,v="";h==="ellipsis"?v="...":h&&h!=="clip"&&(v=h);var m=Array.from(n),y=[],b=0,x=0,w=-1,_={},E=function(L){return a.getFromCache(L,c,_,p)},S=E(v);function O(N,L,B,$){for(;E(N)<$&&L<m.length-1&&!o.isNewline(m[L+1]);)L+=1,N+=m[L];for(;E(N)>$&&L>=B;)L-=1,N=N.slice(0,-1);return{lineTxt:N,txtLastCharIndex:L}}function A(N,L){if(!(S<=0||S>g)){if(!y[N]){y[N]=v;return}var B=O(y[N],L,w+1,g-S);y[N]=B.lineTxt+v}}for(var T=0;T<m.length;T++){var I=m[T],D=m[T-1],R=m[T+1],F=E(I);if(this.isNewline(I)){if(b+1>=d){r.isOverflowing=!0,T<m.length-1&&A(b,T-1);break}w=T-1,b+=1,x=0,y[b]="";continue}if(x>0&&x+F>g){var z=O(y[b],T-1,w+1,g);if(z.txtLastCharIndex!==T-1){if(y[b]=z.lineTxt,z.txtLastCharIndex===m.length-1)break;T=z.txtLastCharIndex+1,I=m[T],D=m[T-1],R=m[T+1],F=E(I)}if(b+1>=d){r.isOverflowing=!0,A(b,T-1);break}if(w=T-1,b+=1,x=0,y[b]="",this.isBreakingSpace(I))continue;this.canBreakInLastChar(I)||(y=this.trimToBreakable(y),x=this.sumTextWidthByCache(y[b]||"",E)),this.shouldBreakByKinsokuShorui(I,R)&&(y=this.trimByKinsokuShorui(y),x+=E(D||""))}x+=F,y[b]=(y[b]||"")+I}return y.join(`
`)}},{key:"isBreakingSpace",value:function(n){return typeof n!="string"?!1:Uc.BreakingSpaces.indexOf(n.charCodeAt(0))>=0}},{key:"isNewline",value:function(n){return typeof n!="string"?!1:Uc.Newlines.indexOf(n.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(n){var r=Bt(n),i=r[r.length-2],a=this.findBreakableIndex(i);if(a===-1||!i)return r;var o=i.slice(a,a+1),s=this.isBreakingSpace(o),l=a+1,u=a+(s?0:1);return r[r.length-1]+=i.slice(l,i.length),r[r.length-2]=i.slice(0,u),r}},{key:"canBreakInLastChar",value:function(n){return!(n&&e7.test(n))}},{key:"sumTextWidthByCache",value:function(n,r){return n.split("").reduce(function(i,a){return i+r(a)},0)}},{key:"findBreakableIndex",value:function(n){for(var r=n.length-1;r>=0;r--)if(!e7.test(n[r]))return r;return-1}},{key:"getFromCache",value:function(n,r,i,a){var o=i[n];if(typeof o!="number"){var s=n.length*r,l=a.measureText(n);o=l.width+s,i[n]=o}return o}}])}(),Ce={},fDe=function(t){var e=new NPe,n=new RPe;return t={},He(He(He(He(He(He(He(He(He(He(t,pe.FRAGMENT,null),pe.CIRCLE,new PPe),pe.ELLIPSE,new DPe),pe.RECT,e),pe.IMAGE,e),pe.GROUP,new zPe),pe.LINE,new IPe),pe.TEXT,new FPe(Ce)),pe.POLYLINE,n),pe.POLYGON,n),He(He(He(t,pe.PATH,new LPe),pe.HTML,new jPe),pe.MESH,null)}(),dDe=function(t){var e=new q6e,n=new eP;return t={},He(He(He(He(He(He(He(He(He(He(t,Ne.PERCENTAGE,null),Ne.NUMBER,new U6e),Ne.ANGLE,new $6e),Ne.DEFINED_PATH,new V6e),Ne.PAINT,e),Ne.COLOR,e),Ne.FILTER,new W6e),Ne.LENGTH,n),Ne.LENGTH_PERCENTAGE,n),Ne.LENGTH_PERCENTAGE_12,new G6e),He(He(He(He(He(He(He(He(He(He(t,Ne.LENGTH_PERCENTAGE_14,new H6e),Ne.COORDINATE,new eP),Ne.OFFSET_DISTANCE,new X6e),Ne.OPACITY_VALUE,new Z6e),Ne.PATH,new K6e),Ne.LIST_OF_POINTS,new J6e),Ne.SHADOW_BLUR,new Q6e),Ne.TEXT,new ePe),Ne.TEXT_TRANSFORM,new tPe),Ne.TRANSFORM,new TPe),He(He(He(t,Ne.TRANSFORM_ORIGIN,new MPe),Ne.Z_INDEX,new CPe),Ne.MARKER,new Y6e)}(),hDe=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}};Ce.CameraContribution=mee;Ce.AnimationTimeline=null;Ce.EasingFunction=null;Ce.offscreenCanvasCreator=new fL;Ce.sceneGraphSelector=new WPe;Ce.sceneGraphService=new QPe(Ce);Ce.textService=new cDe(Ce);Ce.geometryUpdaterFactory=fDe;Ce.CSSPropertySyntaxFactory=dDe;Ce.styleValueRegistry=new j6e(Ce);Ce.layoutRegistry=null;Ce.globalThis=hDe();Ce.enableStyleSyntax=!0;Ce.enableSizeAttenuation=!1;var pDe=0,rP=new gl(Dt.INSERTED,null,"","","",0,"",""),iP=new gl(Dt.REMOVED,null,"","","",0,"",""),Gee=new _n(Dt.DESTROY),gDe=function(t){function e(){var n;Ae(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Nt(this,e,[].concat(i)),n.entity=pDe++,n.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},n.cullable={strategy:vCe.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},n.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},n.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},n.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},n.rBushNode={aabb:void 0},n.namespaceURI="g",n.scrollLeft=0,n.scrollTop=0,n.clientTop=0,n.clientLeft=0,n.destroyed=!1,n.style={},n.computedStyle={},n.parsedStyle={},n.attributes={},n}return Ft(e,t),Te(e,[{key:"className",get:function(){return this.getAttribute("class")||""},set:function(r){this.setAttribute("class",r)}},{key:"classList",get:function(){return this.className.split(" ").filter(function(r){return r!==""})}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var r=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[r+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var r=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[r-1]||null}return null}},{key:"cloneNode",value:function(r){throw new Error(Tn)}},{key:"appendChild",value:function(r,i){var a;if(r.destroyed)throw new Error(aCe);return Ce.sceneGraphService.attach(r,this,i),(a=this.ownerDocument)!==null&&a!==void 0&&a.defaultView&&(!Wb(this)&&r.nodeName===pe.FRAGMENT?this.ownerDocument.defaultView.mountFragment(r):this.ownerDocument.defaultView.mountChildren(r)),this.isMutationObserved&&(rP.relatedNode=this,r.dispatchEvent(rP)),r}},{key:"insertBefore",value:function(r,i){if(!i)this.appendChild(r);else{r.parentElement&&r.parentElement.removeChild(r);var a=this.childNodes.indexOf(i);a===-1?this.appendChild(r):this.appendChild(r,a)}return r}},{key:"replaceChild",value:function(r,i){var a=this.childNodes.indexOf(i);return this.removeChild(i),this.appendChild(r,a),i}},{key:"removeChild",value:function(r){var i;return iP.relatedNode=this,r.dispatchEvent(iP),(i=r.ownerDocument)!==null&&i!==void 0&&i.defaultView&&r.ownerDocument.defaultView.unmountChildren(r),Ce.sceneGraphService.detach(r),r}},{key:"removeChildren",value:function(){for(var r=this.childNodes.length-1;r>=0;r--){var i=this.childNodes[r];this.removeChild(i)}}},{key:"destroyChildren",value:function(){for(var r=this.childNodes.length-1;r>=0;r--){var i=this.childNodes[r];i.childNodes.length>0&&i.destroyChildren(),i.destroy()}}},{key:"matches",value:function(r){return Ce.sceneGraphService.matches(r,this)}},{key:"getElementById",value:function(r){return Ce.sceneGraphService.querySelector("#".concat(r),this)}},{key:"getElementsByName",value:function(r){return Ce.sceneGraphService.querySelectorAll('[name="'.concat(r,'"]'),this)}},{key:"getElementsByClassName",value:function(r){return Ce.sceneGraphService.querySelectorAll(".".concat(r),this)}},{key:"getElementsByTagName",value:function(r){return Ce.sceneGraphService.querySelectorAll(r,this)}},{key:"querySelector",value:function(r){return Ce.sceneGraphService.querySelector(r,this)}},{key:"querySelectorAll",value:function(r){return Ce.sceneGraphService.querySelectorAll(r,this)}},{key:"closest",value:function(r){var i=this;do{if(Ce.sceneGraphService.matches(r,i))return i;i=i.parentElement}while(i!==null);return null}},{key:"find",value:function(r){var i=this,a=null;return this.forEach(function(o){return o!==i&&r(o)?(a=o,!1):!0}),a}},{key:"findAll",value:function(r){var i=this,a=[];return this.forEach(function(o){o!==i&&r(o)&&a.push(o)}),a}},{key:"after",value:function(){var r=this;if(this.parentNode){for(var i=this.parentNode.childNodes.indexOf(this),a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];o.forEach(function(l,u){var c;return(c=r.parentNode)===null||c===void 0?void 0:c.appendChild(l,i+u+1)})}}},{key:"before",value:function(){if(this.parentNode){for(var r,i=this.parentNode.childNodes.indexOf(this),a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var l=o[0],u=o.slice(1);this.parentNode.appendChild(l,i),(r=l).after.apply(r,Bt(u))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];a.forEach(function(s){return r.appendChild(s)})}},{key:"prepend",value:function(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];a.forEach(function(s,l){return r.appendChild(s,l)})}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){this.destroyChildren(),this.dispatchEvent(Gee),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){return Ce.sceneGraphService.getGeometryBounds(this)}},{key:"getRenderBounds",value:function(){return Ce.sceneGraphService.getBounds(this,!0)}},{key:"getBounds",value:function(){return Ce.sceneGraphService.getBounds(this)}},{key:"getLocalBounds",value:function(){return Ce.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return Ce.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(r){if(typeof r!="symbol"){var i=this.attributes[r];return i}}},{key:"hasAttribute",value:function(r){return this.getAttributeNames().includes(r)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(r){this.setAttribute(r,null),delete this.attributes[r]}},{key:"setAttribute",value:function(r,i,a,o){this.attributes[r]=i}},{key:"getAttributeNS",value:function(r,i){throw new Error(Tn)}},{key:"getAttributeNode",value:function(r){throw new Error(Tn)}},{key:"getAttributeNodeNS",value:function(r,i){throw new Error(Tn)}},{key:"hasAttributeNS",value:function(r,i){throw new Error(Tn)}},{key:"removeAttributeNS",value:function(r,i){throw new Error(Tn)}},{key:"removeAttributeNode",value:function(r){throw new Error(Tn)}},{key:"setAttributeNS",value:function(r,i,a){throw new Error(Tn)}},{key:"setAttributeNode",value:function(r){throw new Error(Tn)}},{key:"setAttributeNodeNS",value:function(r){throw new Error(Tn)}},{key:"toggleAttribute",value:function(r,i){throw new Error(Tn)}}])}(vr);function rn(t){return!!(t!=null&&t.nodeName)}var vDe=Ce.globalThis.Proxy?Ce.globalThis.Proxy:function(){},qs=new gl(Dt.ATTR_MODIFIED,null,null,null,null,gl.MODIFICATION,null,null),rg=Wt(),mDe=gi(),Un=function(t){function e(n){var r;return Ae(this,e),r=Nt(this,e),r.isCustomElement=!1,r.isMutationObserved=!1,r.activeAnimations=[],r.config=n,r.id=n.id||"",r.name=n.name||"",(n.className||n.class)&&(r.className=n.className||n.class),r.nodeName=n.type||pe.GROUP,n.initialParsedStyle&&Object.assign(r.parsedStyle,n.initialParsedStyle),r.initAttributes(n.style),Ce.enableStyleSyntax&&(r.style=new vDe({setProperty:function(a,o){r.setAttribute(a,o)},getPropertyValue:function(a){return r.getAttribute(a)},removeProperty:function(a){r.removeAttribute(a)},item:function(){return""}},{get:function(a,o){return a[o]!==void 0?a[o]:r.getAttribute(o)},set:function(a,o,s){return r.setAttribute(o,s),!0}})),r}return Ft(e,t),Te(e,[{key:"destroy",value:function(){yF(e,"destroy",this)([]),this.getAnimations().forEach(function(r){r.cancel()})}},{key:"cloneNode",value:function(r,i){var a=It({},this.attributes);for(var o in a){var s=a[o];rn(s)&&o!=="clipPath"&&o!=="offsetPath"&&o!=="textPath"&&(a[o]=s.cloneNode(r)),i&&(a[o]=i(o,s))}var l=new this.constructor(It(It({},this.config),{},{style:a}));return l.setLocalTransform(this.getLocalTransform()),r&&this.children.forEach(function(u){if(!u.style.isMarker){var c=u.cloneNode(r);l.appendChild(c)}}),l}},{key:"initAttributes",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i={forceUpdateGeometry:!0};Ce.styleValueRegistry.processProperties(this,r,i),this.renderable.dirty=!0}},{key:"setAttribute",value:function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;bt(i)||(a||i!==this.attributes[r])&&(this.internalSetAttribute(r,i,{memoize:o}),yF(e,"setAttribute",this)([r,i]))}},{key:"internalSetAttribute",value:function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=this.renderable,s=this.attributes[r],l=this.parsedStyle[r];Ce.styleValueRegistry.processProperties(this,He({},r,i),a),o.dirty=!0;var u=this.parsedStyle[r];if(this.isConnected&&(qs.relatedNode=this,qs.prevValue=s,qs.newValue=i,qs.attrName=r,qs.prevParsedValue=l,qs.newParsedValue=u,this.isMutationObserved?this.dispatchEvent(qs):(qs.target=this,this.ownerDocument.defaultView.dispatchEvent(qs,!0))),this.isCustomElement&&this.isConnected||!this.isCustomElement){var c,f;(c=(f=this).attributeChangedCallback)===null||c===void 0||c.call(f,r,s,i,l,u)}}},{key:"getBBox",value:function(){var r=this.getBounds(),i=r.getMin(),a=Ot(i,2),o=a[0],s=a[1],l=r.getMax(),u=Ot(l,2),c=u[0],f=u[1];return new Zh(o,s,c-o,f-s)}},{key:"setOrigin",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Ce.sceneGraphService.setOrigin(this,ma(r,i,a,!1)),this}},{key:"getOrigin",value:function(){return Ce.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Ce.sceneGraphService.setPosition(this,ma(r,i,a,!1)),this}},{key:"setLocalPosition",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Ce.sceneGraphService.setLocalPosition(this,ma(r,i,a,!1)),this}},{key:"translate",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Ce.sceneGraphService.translate(this,ma(r,i,a,!1)),this}},{key:"translateLocal",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Ce.sceneGraphService.translateLocal(this,ma(r,i,a,!1)),this}},{key:"getPosition",value:function(){return Ce.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return Ce.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(r,i,a){return this.scaleLocal(r,i,a)}},{key:"scaleLocal",value:function(r,i,a){return typeof r=="number"&&(i=i||r,a=a||r,r=ma(r,i,a,!1)),Ce.sceneGraphService.scaleLocal(this,r),this}},{key:"setLocalScale",value:function(r,i,a){return typeof r=="number"&&(i=i||r,a=a||r,r=ma(r,i,a,!1)),Ce.sceneGraphService.setLocalScale(this,r),this}},{key:"getLocalScale",value:function(){return Ce.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return Ce.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){var r=cE(rg,Ce.sceneGraphService.getWorldTransform(this)),i=Ot(r,3),a=i[2];return Pa(a)}},{key:"getLocalEulerAngles",value:function(){var r=cE(rg,Ce.sceneGraphService.getLocalRotation(this)),i=Ot(r,3),a=i[2];return Pa(a)}},{key:"setEulerAngles",value:function(r){return Ce.sceneGraphService.setEulerAngles(this,0,0,r),this}},{key:"setLocalEulerAngles",value:function(r){return Ce.sceneGraphService.setLocalEulerAngles(this,0,0,r),this}},{key:"rotateLocal",value:function(r,i,a){return lt(i)&&lt(a)?Ce.sceneGraphService.rotateLocal(this,0,0,r):Ce.sceneGraphService.rotateLocal(this,r,i,a),this}},{key:"rotate",value:function(r,i,a){return lt(i)&&lt(a)?Ce.sceneGraphService.rotate(this,0,0,r):Ce.sceneGraphService.rotate(this,r,i,a),this}},{key:"setRotation",value:function(r,i,a,o){return Ce.sceneGraphService.setRotation(this,r,i,a,o),this}},{key:"setLocalRotation",value:function(r,i,a,o){return Ce.sceneGraphService.setLocalRotation(this,r,i,a,o),this}},{key:"setLocalSkew",value:function(r,i){return Ce.sceneGraphService.setLocalSkew(this,r,i),this}},{key:"getRotation",value:function(){return Ce.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return Ce.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return Ce.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return Ce.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return Ce.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(r){return Ce.sceneGraphService.setLocalTransform(this,r),this}},{key:"resetLocalTransform",value:function(){Ce.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(r,i){var a,o=(a=this.ownerDocument)===null||a===void 0?void 0:a.timeline;return o?o.play(this,r,i):null}},{key:"isVisible",value:function(){var r;return((r=this.parsedStyle)===null||r===void 0?void 0:r.visibility)!=="hidden"}},{key:"interactive",get:function(){return this.isInteractive()},set:function(r){this.style.pointerEvents=r?"auto":"none"}},{key:"isInteractive",value:function(){var r;return((r=this.parsedStyle)===null||r===void 0?void 0:r.pointerEvents)!=="none"}},{key:"isCulled",value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,Bt(this.parentNode.children.map(function(r){return Number(r.style.zIndex)})))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,Bt(this.parentNode.children.map(function(r){return Number(r.style.zIndex)})))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=a[0],l=a[1];return s?jr(s)?(Object.keys(s).forEach(function(u){r.setAttribute(u,s[u])}),this):a.length===2?(this.setAttribute(s,l),this):this.attributes[s]:this.attributes}},{key:"getMatrix",value:function(r){var i=r||this.getWorldTransform(),a=Sb(rg,i),o=Ot(a,2),s=o[0],l=o[1],u=$h(rg,i),c=Ot(u,2),f=c[0],d=c[1],h=Eb(mDe,i),p=cE(rg,h),g=Ot(p,3),v=g[0],m=g[2];return fCe(v||m,s,l,f,d)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(r){var i=EF(r),a=Ot(i,5),o=a[0],s=a[1],l=a[2],u=a[3],c=a[4];this.setEulerAngles(c).setPosition(o,s).setLocalScale(l,u)}},{key:"setLocalMatrix",value:function(r){var i=EF(r),a=Ot(i,5),o=a[0],s=a[1],l=a[2],u=a[3],c=a[4];this.setLocalEulerAngles(c).setLocalPosition(o,s).setLocalScale(l,u)}},{key:"show",value:function(){this.forEach(function(r){r.style.visibility="visible"})}},{key:"hide",value:function(){this.forEach(function(r){r.style.visibility="hidden"})}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(r){return this.children[r]||null}},{key:"add",value:function(r,i){return this.appendChild(r,i)}},{key:"set",value:function(r,i){this.config[r]=i}},{key:"get",value:function(r){return this.config[r]}},{key:"moveTo",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(r,i,a),this}},{key:"move",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(r,i,a),this}},{key:"setZIndex",value:function(r){return this.style.zIndex=r,this}}])}(gDe);Un.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var $a=function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ae(this,e),Nt(this,e,[It({type:pe.CIRCLE},n)])}return Ft(e,t),Te(e)}(Un);$a.PARSED_STYLE_LIST=new Set([].concat(Bt(Un.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var yDe=["style"],Wv=function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=sd(r,yDe);return Ae(this,e),n=Nt(this,e,[It({style:i},a)]),n.isCustomElement=!0,n}return Ft(e,t),Te(e)}(Un);Wv.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var xp=function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ae(this,e),Nt(this,e,[It({type:pe.ELLIPSE},n)])}return Ft(e,t),Te(e)}(Un);xp.PARSED_STYLE_LIST=new Set([].concat(Bt(Un.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"]));var bDe=function(t){function e(){return Ae(this,e),Nt(this,e,[{type:pe.FRAGMENT}])}return Ft(e,t),Te(e)}(Un);bDe.PARSED_STYLE_LIST=new Set(["class","className"]);var fr=function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ae(this,e),Nt(this,e,[It({type:pe.GROUP},n)])}return Ft(e,t),Te(e)}(Un);fr.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var xDe=["style"],ud=function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=sd(r,xDe);return Ae(this,e),n=Nt(this,e,[It({type:pe.HTML,style:i},a)]),n.cullable.enable=!1,n}return Ft(e,t),Te(e,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var r=ms(wn(),this.parentNode.getWorldTransform()),i=this.getBounds();if(!zn.isEmpty(i)){var a=new zn;return a.setFromTransformedAABB(i,r),a}}return this.getBounds()}}])}(Un);ud.PARSED_STYLE_LIST=new Set([].concat(Bt(Un.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var wp=function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ae(this,e),Nt(this,e,[It({type:pe.IMAGE},n)])}return Ft(e,t),Te(e)}(Un);wp.PARSED_STYLE_LIST=new Set([].concat(Bt(Un.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var wDe=["style"],Es=function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=sd(r,wDe);Ae(this,e),n=Nt(this,e,[It({type:pe.LINE,style:It({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},a)]),n.markerStartAngle=0,n.markerEndAngle=0;var o=n.parsedStyle,s=o.markerStart,l=o.markerEnd;return s&&rn(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),l&&rn(l)&&(n.markerEndAngle=l.getLocalEulerAngles(),n.appendChild(l)),n.transformMarker(!0),n.transformMarker(!1),n}return Ft(e,t),Te(e,[{key:"attributeChangedCallback",value:function(r,i,a,o,s){r==="x1"||r==="y1"||r==="x2"||r==="y2"||r==="markerStartOffset"||r==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):r==="markerStart"?(o&&rn(o)&&(this.markerStartAngle=0,o.remove()),s&&rn(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):r==="markerEnd"&&(o&&rn(o)&&(this.markerEndAngle=0,o.remove()),s&&rn(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1)))}},{key:"transformMarker",value:function(r){var i=this.parsedStyle,a=i.markerStart,o=i.markerEnd,s=i.markerStartOffset,l=i.markerEndOffset,u=i.x1,c=i.x2,f=i.y1,d=i.y2,h=r?a:o;if(!(!h||!rn(h))){var p=0,g,v,m,y,b,x;r?(m=u,y=f,g=c-u,v=d-f,b=s||0,x=this.markerStartAngle):(m=c,y=d,g=u-c,v=f-d,b=l||0,x=this.markerEndAngle),p=Math.atan2(v,g),h.setLocalEulerAngles(p*180/Math.PI+x),h.setLocalPosition(m+Math.cos(p)*b,y+Math.sin(p)*b)}}},{key:"getPoint",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle,o=a.x1,s=a.y1,l=a.x2,u=a.y2,c=pee(o,s,l,u,r),f=c.x,d=c.y,h=Cr(Wt(),ln(f,d,0),i?this.getWorldTransform():this.getLocalTransform());return new $i(h[0],h[1])}},{key:"getPointAtLength",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(r/this.getTotalLength(),i)}},{key:"getTotalLength",value:function(){var r=this.parsedStyle,i=r.x1,a=r.y1,o=r.x2,s=r.y2;return hee(i,a,o,s)}}])}(Un);Es.PARSED_STYLE_LIST=new Set([].concat(Bt(Un.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var _De=["style"],yr=function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=sd(r,_De);Ae(this,e),n=Nt(this,e,[It({type:pe.PATH,style:i,initialParsedStyle:{miterLimit:4,d:It({},yee)}},a)]),n.markerStartAngle=0,n.markerEndAngle=0,n.markerMidList=[];var o=n.parsedStyle,s=o.markerStart,l=o.markerEnd,u=o.markerMid;return s&&rn(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),u&&rn(u)&&n.placeMarkerMid(u),l&&rn(l)&&(n.markerEndAngle=l.getLocalEulerAngles(),n.appendChild(l)),n.transformMarker(!0),n.transformMarker(!1),n}return Ft(e,t),Te(e,[{key:"attributeChangedCallback",value:function(r,i,a,o,s){r==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):r==="markerStartOffset"||r==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):r==="markerStart"?(o&&rn(o)&&(this.markerStartAngle=0,o.remove()),s&&rn(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):r==="markerEnd"?(o&&rn(o)&&(this.markerEndAngle=0,o.remove()),s&&rn(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1))):r==="markerMid"&&this.placeMarkerMid(s)}},{key:"transformMarker",value:function(r){var i=this.parsedStyle,a=i.markerStart,o=i.markerEnd,s=i.markerStartOffset,l=i.markerEndOffset,u=r?a:o;if(!(!u||!rn(u))){var c=0,f,d,h,p,g,v;if(r){var m=this.getStartTangent(),y=Ot(m,2),b=y[0],x=y[1];h=x[0],p=x[1],f=b[0]-x[0],d=b[1]-x[1],g=s||0,v=this.markerStartAngle}else{var w=this.getEndTangent(),_=Ot(w,2),E=_[0],S=_[1];h=S[0],p=S[1],f=E[0]-S[0],d=E[1]-S[1],g=l||0,v=this.markerEndAngle}c=Math.atan2(d,f),u.setLocalEulerAngles(c*180/Math.PI+v),u.setLocalPosition(h+Math.cos(c)*g,p+Math.sin(c)*g)}}},{key:"placeMarkerMid",value:function(r){var i=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(c){c.remove()}),r&&rn(r))for(var a=1;a<i.length-1;a++){var o=Ot(i[a].currentPoint,2),s=o[0],l=o[1],u=a===1?r:r.cloneNode(!0);this.markerMidList.push(u),this.appendChild(u),u.setLocalPosition(s,l)}}},{key:"getTotalLength",value:function(){return J6(this)}},{key:"getPointAtLength",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle.d.absolutePath,o=mAe(a,r),s=o.x,l=o.y,u=Cr(Wt(),ln(s,l,0),i?this.getWorldTransform():this.getLocalTransform());return new $i(u[0],u[1])}},{key:"getPoint",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPointAtLength(r*J6(this),i)}},{key:"getStartTangent",value:function(){var r=this.parsedStyle.d.segments,i=[];if(r.length>1){var a=r[0].currentPoint,o=r[1].currentPoint,s=r[1].startTangent;i=[],s?(i.push([a[0]-s[0],a[1]-s[1]]),i.push([a[0],a[1]])):(i.push([o[0],o[1]]),i.push([a[0],a[1]]))}return i}},{key:"getEndTangent",value:function(){var r=this.parsedStyle.d.segments,i=r.length,a=[];if(i>1){var o=r[i-2].currentPoint,s=r[i-1].currentPoint,l=r[i-1].endTangent;a=[],l?(a.push([s[0]-l[0],s[1]-l[1]]),a.push([s[0],s[1]])):(a.push([o[0],o[1]]),a.push([s[0],s[1]]))}return a}}])}(Un);yr.PARSED_STYLE_LIST=new Set([].concat(Bt(Un.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var SDe=["style"],Ic=function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=sd(r,SDe);Ae(this,e),n=Nt(this,e,[It({type:pe.POLYGON,style:i,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},a)]),n.markerStartAngle=0,n.markerEndAngle=0,n.markerMidList=[];var o=n.parsedStyle,s=o.markerStart,l=o.markerEnd,u=o.markerMid;return s&&rn(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),u&&rn(u)&&n.placeMarkerMid(u),l&&rn(l)&&(n.markerEndAngle=l.getLocalEulerAngles(),n.appendChild(l)),n.transformMarker(!0),n.transformMarker(!1),n}return Ft(e,t),Te(e,[{key:"attributeChangedCallback",value:function(r,i,a,o,s){r==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):r==="markerStartOffset"||r==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):r==="markerStart"?(o&&rn(o)&&(this.markerStartAngle=0,o.remove()),s&&rn(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):r==="markerEnd"?(o&&rn(o)&&(this.markerEndAngle=0,o.remove()),s&&rn(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1))):r==="markerMid"&&this.placeMarkerMid(s)}},{key:"transformMarker",value:function(r){var i=this.parsedStyle,a=i.markerStart,o=i.markerEnd,s=i.markerStartOffset,l=i.markerEndOffset,u=i.points,c=u||{},f=c.points,d=r?a:o;if(!(!d||!rn(d)||!f)){var h=0,p,g,v,m,y,b;if(v=f[0][0],m=f[0][1],r)p=f[1][0]-f[0][0],g=f[1][1]-f[0][1],y=s||0,b=this.markerStartAngle;else{var x=f.length;this.parsedStyle.isClosed?(p=f[x-1][0]-f[0][0],g=f[x-1][1]-f[0][1]):(v=f[x-1][0],m=f[x-1][1],p=f[x-2][0]-f[x-1][0],g=f[x-2][1]-f[x-1][1]),y=l||0,b=this.markerEndAngle}h=Math.atan2(g,p),d.setLocalEulerAngles(h*180/Math.PI+b),d.setLocalPosition(v+Math.cos(h)*y,m+Math.sin(h)*y)}}},{key:"placeMarkerMid",value:function(r){var i=this.parsedStyle.points,a=i||{},o=a.points;if(this.markerMidList.forEach(function(f){f.remove()}),this.markerMidList=[],r&&rn(r)&&o)for(var s=1;s<(this.parsedStyle.isClosed?o.length:o.length-1);s++){var l=o[s][0],u=o[s][1],c=s===1?r:r.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(l,u)}}}])}(Un);Ic.PARSED_STYLE_LIST=new Set([].concat(Bt(Un.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var EDe=["style"],Gv=function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.style,i=sd(n,EDe);return Ae(this,e),Nt(this,e,[It({type:pe.POLYLINE,style:r,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i)])}return Ft(e,t),Te(e,[{key:"getTotalLength",value:function(){return f6e(this)}},{key:"getPointAtLength",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(r/this.getTotalLength(),i)}},{key:"getPoint",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var o=[],s=0,l,u,c=this.getTotalLength();a.forEach(function(m,y){a[y+1]&&(l=[0,0],l[0]=s/c,u=hee(m[0],m[1],a[y+1][0],a[y+1][1]),s+=u,l[1]=s/c,o.push(l))}),this.parsedStyle.points.segments=o}var f=0,d=0;this.parsedStyle.points.segments.forEach(function(m,y){r>=m[0]&&r<=m[1]&&(f=(r-m[0])/(m[1]-m[0]),d=y)});var h=pee(a[d][0],a[d][1],a[d+1][0],a[d+1][1],f),p=h.x,g=h.y,v=Cr(Wt(),ln(p,g,0),i?this.getWorldTransform():this.getLocalTransform());return new $i(v[0],v[1])}},{key:"getStartTangent",value:function(){var r=this.parsedStyle.points.points,i=[];return i.push([r[1][0],r[1][1]]),i.push([r[0][0],r[0][1]]),i}},{key:"getEndTangent",value:function(){var r=this.parsedStyle.points.points,i=r.length-1,a=[];return a.push([r[i-1][0],r[i-1][1]]),a.push([r[i][0],r[i][1]]),a}}])}(Ic);Gv.PARSED_STYLE_LIST=new Set([].concat(Bt(Ic.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var Vr=function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ae(this,e),Nt(this,e,[It({type:pe.RECT},n)])}return Ft(e,t),Te(e)}(Un);Vr.PARSED_STYLE_LIST=new Set([].concat(Bt(Un.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var ODe=["style"],Va=function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.style,i=sd(n,ODe);return Ae(this,e),Nt(this,e,[It({type:pe.TEXT,style:It({fill:"black"},r)},i)])}return Ft(e,t),Te(e,[{key:"getComputedTextLength",value:function(){var r;return this.getGeometryBounds(),((r=this.parsedStyle.metrics)===null||r===void 0?void 0:r.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var r;return this.getGeometryBounds(),((r=this.parsedStyle.metrics)===null||r===void 0?void 0:r.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])}(Un);Va.PARSED_STYLE_LIST=new Set([].concat(Bt(Un.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textPathSide","textPathStartOffset","metrics","dx","dy"]));var kDe=function(){function t(){Ae(this,t),this.registry={},this.define(pe.CIRCLE,$a),this.define(pe.ELLIPSE,xp),this.define(pe.RECT,Vr),this.define(pe.IMAGE,wp),this.define(pe.LINE,Es),this.define(pe.GROUP,fr),this.define(pe.PATH,yr),this.define(pe.POLYGON,Ic),this.define(pe.POLYLINE,Gv),this.define(pe.TEXT,Va),this.define(pe.HTML,ud)}return Te(t,[{key:"define",value:function(n,r){this.registry[n]=r}},{key:"get",value:function(n){return this.registry[n]}}])}(),Hee={number:function(e){return new Mn(e)},percent:function(e){return new Mn(e,"%")},px:function(e){return new Mn(e,"px")},em:function(e){return new Mn(e,"em")},rem:function(e){return new Mn(e,"rem")},deg:function(e){return new Mn(e,"deg")},grad:function(e){return new Mn(e,"grad")},rad:function(e){return new Mn(e,"rad")},turn:function(e){return new Mn(e,"turn")},s:function(e){return new Mn(e,"s")},ms:function(e){return new Mn(e,"ms")},registerProperty:function(e){var n=e.name,r=e.inherits,i=e.interpolable,a=e.initialValue,o=e.syntax;Ce.styleValueRegistry.registerMetadata({n,inh:r,int:i,d:a,syntax:o})},registerLayout:function(e,n){Ce.layoutRegistry.registerLayout(e,n)}},Yee=function(t){function e(){var n;Ae(this,e),n=Nt(this,e),n.defaultView=null,n.ownerDocument=null,n.nodeName="document";try{n.timeline=new Ce.AnimationTimeline(n)}catch{}var r={};return lL.forEach(function(i){var a=i.n,o=i.inh,s=i.d;o&&s&&(r[a]=Ue(s)?s(pe.GROUP):s)}),n.documentElement=new fr({id:"g-root",style:r}),n.documentElement.ownerDocument=n,n.documentElement.parentNode=n,n.childNodes=[n.documentElement],n}return Ft(e,t),Te(e,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(r,i){if(r==="svg")return this.documentElement;var a=this.defaultView.customElements.get(r);a||(console.warn("Unsupported tagName: ",r),a=r==="tspan"?Va:fr);var o=new a(i);return o.ownerDocument=this,o}},{key:"createElementNS",value:function(r,i,a){return this.createElement(i,a)}},{key:"cloneNode",value:function(r){throw new Error(Tn)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch{}}},{key:"elementsFromBBox",value:function(r,i,a,o){var s=this.defaultView.context.rBushRoot,l=s.search({minX:r,minY:i,maxX:a,maxY:o}),u=[];return l.forEach(function(c){var f=c.displayObject,d=f.parsedStyle.pointerEvents,h=d===void 0?"auto":d,p=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(h);(!p||p&&f.isVisible())&&!f.isCulled()&&f.isInteractive()&&u.push(f)}),u.sort(function(c,f){return f.sortable.renderOrder-c.sortable.renderOrder}),u}},{key:"elementFromPointSync",value:function(r,i){var a=this.defaultView.canvas2Viewport({x:r,y:i}),o=a.x,s=a.y,l=this.defaultView.getConfig(),u=l.width,c=l.height;if(o<0||s<0||o>u||s>c)return null;var f=this.defaultView.viewport2Client({x:o,y:s}),d=f.x,h=f.y,p=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:r,y:i,viewportX:o,viewportY:s,clientX:d,clientY:h},picked:[]}),g=p.picked;return g&&g[0]||this.documentElement}},{key:"elementFromPoint",value:function(){var n=xc(qi().mark(function i(a,o){var s,l,u,c,f,d,h,p,g,v,m;return qi().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(s=this.defaultView.canvas2Viewport({x:a,y:o}),l=s.x,u=s.y,c=this.defaultView.getConfig(),f=c.width,d=c.height,!(l<0||u<0||l>f||u>d)){b.next=4;break}return b.abrupt("return",null);case 4:return h=this.defaultView.viewport2Client({x:l,y:u}),p=h.x,g=h.y,b.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:a,y:o,viewportX:l,viewportY:u,clientX:p,clientY:g},picked:[]});case 7:return v=b.sent,m=v.picked,b.abrupt("return",m&&m[0]||this.documentElement);case 10:case"end":return b.stop()}},i,this)}));function r(i,a){return n.apply(this,arguments)}return r}()},{key:"elementsFromPointSync",value:function(r,i){var a=this.defaultView.canvas2Viewport({x:r,y:i}),o=a.x,s=a.y,l=this.defaultView.getConfig(),u=l.width,c=l.height;if(o<0||s<0||o>u||s>c)return[];var f=this.defaultView.viewport2Client({x:o,y:s}),d=f.x,h=f.y,p=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:r,y:i,viewportX:o,viewportY:s,clientX:d,clientY:h},picked:[]}),g=p.picked;return g[g.length-1]!==this.documentElement&&g.push(this.documentElement),g}},{key:"elementsFromPoint",value:function(){var n=xc(qi().mark(function i(a,o){var s,l,u,c,f,d,h,p,g,v,m;return qi().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(s=this.defaultView.canvas2Viewport({x:a,y:o}),l=s.x,u=s.y,c=this.defaultView.getConfig(),f=c.width,d=c.height,!(l<0||u<0||l>f||u>d)){b.next=4;break}return b.abrupt("return",[]);case 4:return h=this.defaultView.viewport2Client({x:l,y:u}),p=h.x,g=h.y,b.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:a,y:o,viewportX:l,viewportY:u,clientX:p,clientY:g},picked:[]});case 7:return v=b.sent,m=v.picked,m[m.length-1]!==this.documentElement&&m.push(this.documentElement),b.abrupt("return",m);case 11:case"end":return b.stop()}},i,this)}));function r(i,a){return n.apply(this,arguments)}return r}()},{key:"appendChild",value:function(r,i){throw new Error(Nd)}},{key:"insertBefore",value:function(r,i){throw new Error(Nd)}},{key:"removeChild",value:function(r,i){throw new Error(Nd)}},{key:"replaceChild",value:function(r,i,a){throw new Error(Nd)}},{key:"append",value:function(){throw new Error(Nd)}},{key:"prepend",value:function(){throw new Error(Nd)}},{key:"getElementById",value:function(r){return this.documentElement.getElementById(r)}},{key:"getElementsByName",value:function(r){return this.documentElement.getElementsByName(r)}},{key:"getElementsByTagName",value:function(r){return this.documentElement.getElementsByTagName(r)}},{key:"getElementsByClassName",value:function(r){return this.documentElement.getElementsByClassName(r)}},{key:"querySelector",value:function(r){return this.documentElement.querySelector(r)}},{key:"querySelectorAll",value:function(r){return this.documentElement.querySelectorAll(r)}},{key:"find",value:function(r){return this.documentElement.find(r)}},{key:"findAll",value:function(r){return this.documentElement.findAll(r)}}])}(vr),Uee=function(){function t(e){Ae(this,t),this.strategies=e}return Te(t,[{key:"apply",value:function(n){var r=n.camera,i=n.renderingService,a=n.renderingContext,o=this.strategies;i.hooks.cull.tap(t.tag,function(s){if(s){var l=s.cullable;return o.length===0?l.visible=a.unculledEntities.indexOf(s.entity)>-1:l.visible=o.every(function(u){return u.isVisible(r,s)}),!s.isCulled()&&s.isVisible()?s:(s.dispatchEvent(new _n(Dt.CULLED)),null)}return s}),i.hooks.afterRender.tap(t.tag,function(s){s.cullable.visibilityPlaneMask=-1})}}])}();Uee.tag="Culling";var Xee=function(){function t(){var e=this;Ae(this,t),this.autoPreventDefault=!1,this.rootPointerEvent=new Gb(null),this.rootWheelEvent=new nP(null),this.onPointerMove=function(n){var r,i=(r=e.context.renderingContext.root)===null||r===void 0||(r=r.ownerDocument)===null||r===void 0?void 0:r.defaultView;if(!(i.supportsTouchEvents&&n.pointerType==="touch")){var a=e.normalizeToPointerEvent(n,i),o=af(a),s;try{for(o.s();!(s=o.n()).done;){var l=s.value,u=e.bootstrapEvent(e.rootPointerEvent,l,i,n);e.context.eventService.mapEvent(u)}}catch(c){o.e(c)}finally{o.f()}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(n){var r,i=(r=e.context.renderingContext.root)===null||r===void 0||(r=r.ownerDocument)===null||r===void 0?void 0:r.defaultView,a=e.normalizeToPointerEvent(n,i),o=af(a),s;try{for(o.s();!(s=o.n()).done;){var l=s.value,u=e.bootstrapEvent(e.rootPointerEvent,l,i,n);e.context.eventService.mapEvent(u)}}catch(c){o.e(c)}finally{o.f()}e.setCursor(e.context.eventService.cursor)}}return Te(t,[{key:"apply",value:function(n){var r=this;this.context=n;var i=n.renderingService,a=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(o){var s=r.context.renderingService.hooks.pickSync.call({position:o,picked:[],topmost:!0}),l=s.picked;return l[0]||null}),i.hooks.pointerWheel.tap(t.tag,function(o){var s=r.normalizeWheelEvent(o);r.context.eventService.mapEvent(s)}),i.hooks.pointerDown.tap(t.tag,function(o){if(!(a.supportsTouchEvents&&o.pointerType==="touch")){var s=r.normalizeToPointerEvent(o,a);if(r.autoPreventDefault&&s[0].isNormalized){var l=o.cancelable||!("cancelable"in o);l&&o.preventDefault()}var u=af(s),c;try{for(u.s();!(c=u.n()).done;){var f=c.value,d=r.bootstrapEvent(r.rootPointerEvent,f,a,o);r.context.eventService.mapEvent(d)}}catch(h){u.e(h)}finally{u.f()}r.setCursor(r.context.eventService.cursor)}}),i.hooks.pointerUp.tap(t.tag,function(o){if(!(a.supportsTouchEvents&&o.pointerType==="touch")){var s=r.context.contextService.getDomElement(),l=r.context.eventService.isNativeEventFromCanvas(s,o),u=l?"":"outside",c=r.normalizeToPointerEvent(o,a),f=af(c),d;try{for(f.s();!(d=f.n()).done;){var h=d.value,p=r.bootstrapEvent(r.rootPointerEvent,h,a,o);p.type+=u,r.context.eventService.mapEvent(p)}}catch(g){f.e(g)}finally{f.f()}r.setCursor(r.context.eventService.cursor)}}),i.hooks.pointerMove.tap(t.tag,this.onPointerMove),i.hooks.pointerOver.tap(t.tag,this.onPointerMove),i.hooks.pointerOut.tap(t.tag,this.onPointerMove),i.hooks.click.tap(t.tag,this.onClick),i.hooks.pointerCancel.tap(t.tag,function(o){var s=r.normalizeToPointerEvent(o,a),l=af(s),u;try{for(l.s();!(u=l.n()).done;){var c=u.value,f=r.bootstrapEvent(r.rootPointerEvent,c,a,o);r.context.eventService.mapEvent(f)}}catch(d){l.e(d)}finally{l.f()}r.setCursor(r.context.eventService.cursor)})}},{key:"bootstrapEvent",value:function(n,r,i,a){n.view=i,n.originalEvent=null,n.nativeEvent=a,n.pointerId=r.pointerId,n.width=r.width,n.height=r.height,n.isPrimary=r.isPrimary,n.pointerType=r.pointerType,n.pressure=r.pressure,n.tangentialPressure=r.tangentialPressure,n.tiltX=r.tiltX,n.tiltY=r.tiltY,n.twist=r.twist,this.transferMouseData(n,r);var o=this.context.eventService.client2Viewport({x:r.clientX,y:r.clientY}),s=o.x,l=o.y;n.viewport.x=s,n.viewport.y=l;var u=this.context.eventService.viewport2Canvas(n.viewport),c=u.x,f=u.y;return n.canvas.x=c,n.canvas.y=f,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.isTrusted=a.isTrusted,n.type==="pointerleave"&&(n.type="pointerout"),n.type.startsWith("mouse")&&(n.type=n.type.replace("mouse","pointer")),n.type.startsWith("touch")&&(n.type=uPe[n.type]||n.type),n}},{key:"normalizeWheelEvent",value:function(n){var r=this.rootWheelEvent;this.transferMouseData(r,n),r.deltaMode=n.deltaMode,r.deltaX=n.deltaX,r.deltaY=n.deltaY,r.deltaZ=n.deltaZ;var i=this.context.eventService.client2Viewport({x:n.clientX,y:n.clientY}),a=i.x,o=i.y;r.viewport.x=a,r.viewport.y=o;var s=this.context.eventService.viewport2Canvas(r.viewport),l=s.x,u=s.y;return r.canvas.x=l,r.canvas.y=u,r.global.copyFrom(r.canvas),r.offset.copyFrom(r.canvas),r.nativeEvent=n,r.type=n.type,r}},{key:"transferMouseData",value:function(n,r){n.isTrusted=r.isTrusted,n.srcElement=r.srcElement,n.timeStamp=tP.now(),n.type=r.type,n.altKey=r.altKey,n.metaKey=r.metaKey,n.shiftKey=r.shiftKey,n.ctrlKey=r.ctrlKey,n.button=r.button,n.buttons=r.buttons,n.client.x=r.clientX,n.client.y=r.clientY,n.movement.x=r.movementX,n.movement.y=r.movementY,n.page.x=r.pageX,n.page.y=r.pageY,n.screen.x=r.screenX,n.screen.y=r.screenY,n.relatedTarget=null}},{key:"setCursor",value:function(n){this.context.contextService.applyCursorStyle(n||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(n,r){var i=[];if(r.isTouchEvent(n))for(var a=0;a<n.changedTouches.length;a++){var o=n.changedTouches[a];bt(o.button)&&(o.button=0),bt(o.buttons)&&(o.buttons=1),bt(o.isPrimary)&&(o.isPrimary=n.touches.length===1&&n.type==="touchstart"),bt(o.width)&&(o.width=o.radiusX||1),bt(o.height)&&(o.height=o.radiusY||1),bt(o.tiltX)&&(o.tiltX=0),bt(o.tiltY)&&(o.tiltY=0),bt(o.pointerType)&&(o.pointerType="touch"),bt(o.pointerId)&&(o.pointerId=o.identifier||0),bt(o.pressure)&&(o.pressure=o.force||.5),bt(o.twist)&&(o.twist=0),bt(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,o.type=n.type,i.push(o)}else if(r.isMouseEvent(n)){var s=n;bt(s.isPrimary)&&(s.isPrimary=!0),bt(s.width)&&(s.width=1),bt(s.height)&&(s.height=1),bt(s.tiltX)&&(s.tiltX=0),bt(s.tiltY)&&(s.tiltY=0),bt(s.pointerType)&&(s.pointerType="mouse"),bt(s.pointerId)&&(s.pointerId=lPe),bt(s.pressure)&&(s.pressure=.5),bt(s.twist)&&(s.twist=0),bt(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,i.push(s)}else i.push(n);return i}}])}();Xee.tag="Event";var ADe=[pe.CIRCLE,pe.ELLIPSE,pe.IMAGE,pe.RECT,pe.LINE,pe.POLYLINE,pe.POLYGON,pe.TEXT,pe.PATH,pe.HTML],TDe=function(){function t(){Ae(this,t)}return Te(t,[{key:"isVisible",value:function(n,r){var i,a=r.cullable;if(!a.enable)return!0;var o=r.getRenderBounds();if(zn.isEmpty(o))return!1;var s=n.getFrustum(),l=(i=r.parentNode)===null||i===void 0||(i=i.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return a.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(r,o,l||Rd.INDETERMINATE,s.planes),a.visible=a.visibilityPlaneMask!==Rd.OUTSIDE,a.visible}},{key:"computeVisibilityWithPlaneMask",value:function(n,r,i,a){if(i===Rd.OUTSIDE||i===Rd.INSIDE)return i;for(var o=Rd.INSIDE,s=ADe.indexOf(n.nodeName)>-1,l=0,u=a.length;l<u;++l){var c=1<<l;if(i&c&&!(s&&(l===4||l===5))){var f=a[l],d=f.normal,h=f.distance;if(tl(d,r.getPositiveFarPoint(a[l]))+h<0)return Rd.OUTSIDE;tl(d,r.getNegativeFarPoint(a[l]))+h<0&&(o|=c)}}return o}}])}(),Zee=function(){function t(){Ae(this,t),this.syncTasks=new Map,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return Te(t,[{key:"apply",value:function(n){var r=this,i,a=n.renderingService,o=n.renderingContext,s=n.rBushRoot,l=o.root.ownerDocument.defaultView;this.rBush=s;var u=function(g){var v=g.target;v.renderable.dirty=!0,a.dirtify()},c=function(g){r.syncTasks.set(g.target,g.detail.affectChildren),a.dirtify()},f=function(g){var v=g.target;Ce.enableSizeAttenuation&&Ce.styleValueRegistry.updateSizeAttenuation(v,l.getCamera().getZoom())},d=function(g){var v=g.target,m=v.rBushNode;m.aabb&&r.rBush.remove(m.aabb),r.syncTasks.delete(v),Ce.sceneGraphService.dirtifyToRoot(v),a.dirtify()};a.hooks.init.tap(t.tag,function(){l.addEventListener(Dt.MOUNTED,f),l.addEventListener(Dt.UNMOUNTED,d),l.addEventListener(Dt.ATTR_MODIFIED,u),l.addEventListener(Dt.BOUNDS_CHANGED,c)}),a.hooks.destroy.tap(t.tag,function(){l.removeEventListener(Dt.MOUNTED,f),l.removeEventListener(Dt.UNMOUNTED,d),l.removeEventListener(Dt.ATTR_MODIFIED,u),l.removeEventListener(Dt.BOUNDS_CHANGED,c),r.syncTasks.clear()});var h=(i=Ce.globalThis.requestIdleCallback)!==null&&i!==void 0?i:cL.bind(Ce.globalThis);a.hooks.endFrame.tap(t.tag,function(){r.isFirstTimeRendering?(r.isFirstTimeRendering=!1,r.syncing=!0,h(function(){r.syncRTree(!0),r.isFirstTimeRenderingFinished=!0})):r.syncRTree()})}},{key:"syncNode",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n.isConnected){var i=n.rBushNode;i.aabb&&this.rBush.remove(i.aabb);var a=n.getRenderBounds();if(a){var o=n.renderable;r&&(o.dirtyRenderBounds||(o.dirtyRenderBounds=new zn),o.dirtyRenderBounds.update(a.center,a.halfExtents));var s=a.getMin(),l=Ot(s,2),u=l[0],c=l[1],f=a.getMax(),d=Ot(f,2),h=d[0],p=d[1];i.aabb||(i.aabb={}),i.aabb.displayObject=n,i.aabb.minX=u,i.aabb.minY=c,i.aabb.maxX=h,i.aabb.maxY=p}if(i.aabb&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.minX)&&!isNaN(i.aabb.minY))return i.aabb}}},{key:"syncRTree",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!r&&(this.syncing||this.syncTasks.size===0))){this.syncing=!0;var i=[],a=new Set,o=function(l){if(!a.has(l)&&l.renderable){var u=n.syncNode(l,r);u&&(i.push(u),a.add(l))}};this.syncTasks.forEach(function(s,l){s&&l.forEach(o);for(var u=l;u;)o(u),u=u.parentElement}),this.rBush.load(i),i.length=0,this.syncing=!1}}}])}();Zee.tag="Prepare";var Qa=function(t){return t.READY="ready",t.BEFORE_RENDER="beforerender",t.RERENDER="rerender",t.AFTER_RENDER="afterrender",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.RESIZE="resize",t.DIRTY_RECTANGLE="dirtyrectangle",t.RENDERER_CHANGED="rendererchanged",t}({}),t7=500,MDe=.1,CDe=1e3,cy=new _n(Dt.MOUNTED),fy=new _n(Dt.UNMOUNTED),wE=new _n(Qa.BEFORE_RENDER),n7=new _n(Qa.RERENDER),_E=new _n(Qa.AFTER_RENDER),V0=function(t){function e(n){var r;Ae(this,e),r=Nt(this,e),r.Element=Un,r.inited=!1,r.context={};var i=n.container,a=n.canvas,o=n.renderer,s=n.width,l=n.height,u=n.background,c=n.cursor,f=n.supportsMutipleCanvasesInOneContainer,d=n.cleanUpOnDestroy,h=d===void 0?!0:d,p=n.offscreenCanvas,g=n.devicePixelRatio,v=n.requestAnimationFrame,m=n.cancelAnimationFrame,y=n.createImage,b=n.supportsTouchEvents,x=n.supportsPointerEvents,w=n.isTouchEvent,_=n.isMouseEvent,E=n.dblClickSpeed,S=s,O=l,A=g||uL&&window.devicePixelRatio||1;return A=A>=1?Math.ceil(A):1,a&&(S=s||oPe(a)||a.width/A,O=l||sPe(a)||a.height/A),r.customElements=new kDe,r.devicePixelRatio=A,r.requestAnimationFrame=v??cL.bind(Ce.globalThis),r.cancelAnimationFrame=m??$ee.bind(Ce.globalThis),r.supportsTouchEvents=b??"ontouchstart"in Ce.globalThis,r.supportsPointerEvents=x??!!Ce.globalThis.PointerEvent,r.isTouchEvent=w??function(T){return r.supportsTouchEvents&&T instanceof Ce.globalThis.TouchEvent},r.isMouseEvent=_??function(T){return!Ce.globalThis.MouseEvent||T instanceof Ce.globalThis.MouseEvent&&(!r.supportsPointerEvents||!(T instanceof Ce.globalThis.PointerEvent))},p&&(Ce.offscreenCanvas=p),r.document=new Yee,r.document.defaultView=r,f||nPe(i,r,h),r.initRenderingContext(It(It({},n),{},{width:S,height:O,background:u??"transparent",cursor:c??"default",cleanUpOnDestroy:h,devicePixelRatio:A,requestAnimationFrame:r.requestAnimationFrame,cancelAnimationFrame:r.cancelAnimationFrame,supportsTouchEvents:r.supportsTouchEvents,supportsPointerEvents:r.supportsPointerEvents,isTouchEvent:r.isTouchEvent,isMouseEvent:r.isMouseEvent,dblClickSpeed:E??200,createImage:y??function(){return new window.Image}})),r.initDefaultCamera(S,O,o.clipSpaceNearZ),r.initRenderer(o,!0),r}return Ft(e,t),Te(e,[{key:"initRenderingContext",value:function(r){this.context.config=r,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(r,i,a){var o=this,s=new Ce.CameraContribution;s.clipSpaceNearZ=a,s.setType(An.EXPLORING,Y6.DEFAULT).setPosition(r/2,i/2,t7).setFocalPoint(r/2,i/2,0).setOrthographic(r/-2,r/2,i/2,i/-2,MDe,CDe),s.canvas=this,s.eventEmitter.on(vee.UPDATED,function(){o.context.renderingContext.renderReasons.add(mh.CAMERA_CHANGED),Ce.enableSizeAttenuation&&o.getConfig().renderer.getConfig().enableSizeAttenuation&&o.updateSizeAttenuation()}),this.context.camera=s}},{key:"updateSizeAttenuation",value:function(){var r=this.getCamera().getZoom();this.document.documentElement.forEach(function(i){Ce.styleValueRegistry.updateSizeAttenuation(i,r)})}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var r=this;return this.readyPromise||(this.readyPromise=new Promise(function(i){r.resolveReadyPromise=function(){i(r)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=arguments.length>1?arguments[1]:void 0;si.clearCache(),i||this.dispatchEvent(new _n(Qa.BEFORE_DESTROY)),this.frameId&&this.cancelAnimationFrame(this.frameId);var a=this.getRoot();r&&(this.unmountChildren(a),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),this.context.rBushRoot&&this.context.rBushRoot.clear(),i||this.dispatchEvent(new _n(Qa.AFTER_DESTROY));var o=function(l){l.currentTarget=null,l.manager=null,l.target=null,l.relatedNode=null};o(cy),o(fy),o(wE),o(n7),o(_E),o(qs),o(rP),o(iP),o(Gee)}},{key:"changeSize",value:function(r,i){this.resize(r,i)}},{key:"resize",value:function(r,i){var a=this.context.config;a.width=r,a.height=i,this.getContextService().resize(r,i);var o=this.context.camera,s=o.getProjectionMode();o.setPosition(r/2,i/2,t7).setFocalPoint(r/2,i/2,0),s===wo.ORTHOGRAPHIC?o.setOrthographic(r/-2,r/2,i/2,i/-2,o.getNear(),o.getFar()):o.setAspect(r/i),this.dispatchEvent(new _n(Qa.RESIZE,{width:r,height:i}))}},{key:"appendChild",value:function(r,i){return this.document.documentElement.appendChild(r,i)}},{key:"insertBefore",value:function(r,i){return this.document.documentElement.insertBefore(r,i)}},{key:"removeChild",value:function(r){return this.document.documentElement.removeChild(r)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(r){var i=this;r&&(wE.detail=r,_E.detail=r),this.dispatchEvent(wE);var a=this.getRenderingService();a.render(this.getConfig(),r,function(){i.dispatchEvent(n7)}),this.dispatchEvent(_E)}},{key:"run",value:function(){var r=this,i=function(o,s){r.render(s),r.frameId=r.requestAnimationFrame(i)};i()}},{key:"initRenderer",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new QMe,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new Xee,new Zee,new Uee([new TDe])),this.loadRendererContainerModule(r),this.context.contextService=new this.context.ContextService(It(It({},Ce),this.context)),this.context.renderingService=new VPe(Ce,this.context),this.context.eventService=new $Pe(Ce,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(r,a,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(r,a)}).catch(function(o){console.error(o)})}},{key:"initRenderingService",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.context.renderingService.init(function(){i.inited=!0,a?o?i.requestAnimationFrame(function(){i.dispatchEvent(new _n(Qa.READY))}):i.dispatchEvent(new _n(Qa.READY)):i.dispatchEvent(new _n(Qa.RENDERER_CHANGED)),i.readyPromise&&i.resolveReadyPromise(),a||i.getRoot().forEach(function(s){var l=s,u=l.renderable;u&&(u.renderBoundsDirty=!0,u.boundsDirty=!0,u.dirty=!0)}),i.mountChildren(i.getRoot()),r.getConfig().enableAutoRendering&&i.run()})}},{key:"loadRendererContainerModule",value:function(r){var i=this,a=r.getPlugins();a.forEach(function(o){o.context=i.context,o.init(Ce)})}},{key:"setRenderer",value:function(r){var i=this.getConfig();if(i.renderer!==r){var a=i.renderer;i.renderer=r,this.destroy(!1,!0),Bt((a==null?void 0:a.getPlugins())||[]).reverse().forEach(function(o){o.destroy(Ce)}),this.initRenderer(r)}}},{key:"setCursor",value:function(r){var i=this.getConfig();i.cursor=r,this.getContextService().applyCursorStyle(r)}},{key:"unmountChildren",value:function(r){var i=this;r.childNodes.forEach(function(a){i.unmountChildren(a)}),this.inited&&(r.isMutationObserved?r.dispatchEvent(fy):(fy.target=r,this.dispatchEvent(fy,!0)),r!==this.document.documentElement&&(r.ownerDocument=null),r.isConnected=!1),r.isCustomElement&&r.disconnectedCallback&&r.disconnectedCallback()}},{key:"mountChildren",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wb(r);this.inited?r.isConnected||(r.ownerDocument=this.document,r.isConnected=!0,a||(r.isMutationObserved?r.dispatchEvent(cy):(cy.target=r,this.dispatchEvent(cy,!0)))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",r.nodeName),r.childNodes.forEach(function(o){i.mountChildren(o,a)}),r.isCustomElement&&r.connectedCallback&&r.connectedCallback()}},{key:"mountFragment",value:function(r){this.mountChildren(r,!1)}},{key:"client2Viewport",value:function(r){return this.getEventService().client2Viewport(r)}},{key:"viewport2Client",value:function(r){return this.getEventService().viewport2Client(r)}},{key:"viewport2Canvas",value:function(r){return this.getEventService().viewport2Canvas(r)}},{key:"canvas2Viewport",value:function(r){return this.getEventService().canvas2Viewport(r)}},{key:"getPointByClient",value:function(r,i){return this.client2Viewport({x:r,y:i})}},{key:"getClientByPoint",value:function(r,i){return this.viewport2Client({x:r,y:i})}}])}(Wee);/*!
 * @antv/g-camera-api
 * @description A simple implementation of Camera API.
 * @version 2.0.38
 * @date 5/9/2025, 8:19:12 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var PDe=function(t){function e(){var n;Ae(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Nt(this,e,[].concat(i)),n.landmarks=[],n}return Ft(e,t),Te(e,[{key:"rotate",value:function(r,i,a){if(this.relElevation=ph(i),this.relAzimuth=ph(r),this.relRoll=ph(a),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===An.EXPLORING){var o=Yu(gi(),[1,0,0],Cn((this.rotateWorld?1:-1)*this.relElevation)),s=Yu(gi(),[0,1,0],Cn((this.rotateWorld?1:-1)*this.relAzimuth)),l=Yu(gi(),[0,0,1],Cn(this.relRoll)),u=ac(gi(),s,o);u=ac(gi(),u,l);var c=AI(wn(),u);hh(this.matrix,this.matrix,[0,0,-this.distance]),oa(this.matrix,this.matrix,c),hh(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===An.ORBITING||this.type===An.EXPLORING?this._getPosition():this.type===An.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(r,i){var a=ma(r,i,0),o=Nl(this.position);return ic(o,o,Ob(Wt(),this.right,a[0])),ic(o,o,Ob(Wt(),this.up,a[1])),this._setPosition(o),this.triggerUpdate(),this}},{key:"dolly",value:function(r){var i=this.forward,a=Nl(this.position),o=r*this.dollyingStep,s=this.distance+r*this.dollyingStep;return o=Math.max(Math.min(s,this.maxDistance),this.minDistance)-this.distance,a[0]+=o*i[0],a[1]+=o*i[1],a[2]+=o*i[2],this._setPosition(a),this.type===An.ORBITING||this.type===An.EXPLORING?this._getDistance():this.type===An.TRACKING&&ic(this.focalPoint,a,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(r){var i,a,o,s,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=l.position,c=u===void 0?this.position:u,f=l.focalPoint,d=f===void 0?this.focalPoint:f,h=l.roll,p=l.zoom,g=new Ce.CameraContribution;g.setType(this.type,void 0),g.setPosition(c[0],(i=c[1])!==null&&i!==void 0?i:this.position[1],(a=c[2])!==null&&a!==void 0?a:this.position[2]),g.setFocalPoint(d[0],(o=d[1])!==null&&o!==void 0?o:this.focalPoint[1],(s=d[2])!==null&&s!==void 0?s:this.focalPoint[2]),g.setRoll(h??this.roll),g.setZoom(p??this.zoom);var v={name:r,matrix:kI(g.getWorldTransform()),right:Nl(g.right),up:Nl(g.up),forward:Nl(g.forward),position:Nl(g.getPosition()),focalPoint:Nl(g.getFocalPoint()),distanceVector:Nl(g.getDistanceVector()),distance:g.getDistance(),dollyingStep:g.getDollyingStep(),azimuth:g.getAzimuth(),elevation:g.getElevation(),roll:g.getRoll(),relAzimuth:g.relAzimuth,relElevation:g.relElevation,relRoll:g.relRoll,zoom:g.getZoom()};return this.landmarks.push(v),v}},{key:"gotoLandmark",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=an(r)?this.landmarks.find(function(T){return T.name===r}):r;if(o){var s=je(a)?{duration:a}:a,l=s.easing,u=l===void 0?"linear":l,c=s.duration,f=c===void 0?100:c,d=s.easingFunction,h=d===void 0?void 0:d,p=s.onfinish,g=p===void 0?void 0:p,v=s.onframe,m=v===void 0?void 0:v,y=.01;this.cancelLandmarkAnimation();var b=o.position,x=o.focalPoint,w=o.zoom,_=o.roll,E=h||Ce.EasingFunction(u),S,O=function(){i.setFocalPoint(x),i.setPosition(b),i.setRoll(_),i.setZoom(w),i.computeMatrix(),i.triggerUpdate(),g==null||g()};if(f===0)return O();var A=function(I){S===void 0&&(S=I);var D=I-S;if(D>=f){O();return}var R=E(D/f),F=Wt(),z=Wt(),N=1,L=0;k6(F,i.focalPoint,x,R),k6(z,i.position,b,R),L=i.roll*(1-R)+_*R,N=i.zoom*(1-R)+w*R,i.setFocalPoint(F),i.setPosition(z),i.setRoll(L),i.setZoom(N);var B=z9(F,x)+z9(z,b);if(B<=y&&w===void 0&&_===void 0)return O();i.computeMatrix(),i.triggerUpdate(),D<f&&(m==null||m(R),i.landmarkAnimationID=i.canvas.requestAnimationFrame(A))};this.canvas.requestAnimationFrame(A)}}}])}(mee);Ce.CameraContribution=PDe;/*!
 * @antv/g-web-animations-api
 * @description A simple implementation of Web Animations API.
 * @version 2.1.25
 * @date 5/23/2025, 7:01:32 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var SE=function(t){function e(n,r,i,a){var o;return Ae(this,e),o=Nt(this,e,[n]),o.currentTime=i,o.timelineTime=a,o.target=r,o.type="finish",o.bubbles=!1,o.currentTarget=r,o.defaultPrevented=!1,o.eventPhase=o.AT_TARGET,o.timeStamp=Date.now(),o.currentTime=i,o.timelineTime=a,o}return Ft(e,t),Te(e)}(F2),DDe=0,IDe=function(){function t(e,n){var r;Ae(this,t),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=e,e.animation=this,this.timeline=n,this.id="".concat(DDe++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((r=this.effect)===null||r===void 0?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return Te(t,[{key:"pending",get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var n=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(r,i){n.resolveReadyPromise=function(){r(n)},n.rejectReadyPromise=function(){i(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var n=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(r,i){n.resolveFinishedPromise=function(){r(n)},n.rejectFinishedPromise=function(){i(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(n){if(n=Number(n),!isNaN(n)){if(this.timeline.restart(),!this._paused&&this._startTime!==null){var r;this._startTime=Number((r=this.timeline)===null||r===void 0?void 0:r.currentTime)-n/this.playbackRate}this.currentTimePending=!1,this._currentTime!==n&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(n,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(n){if(n!==null){if(this.updatePromises(),n=Number(n),isNaN(n)||this._paused||this._idle)return;this._startTime=n,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(n){if(n!==this._playbackRate){this.updatePromises();var r=this.currentTime;this._playbackRate=n,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),r!==null&&(this.currentTime=r),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||this.playState==="running"||!this._finishedFlag}},{key:"updatePromises",value:function(){var n;if((n=this.effect.target)!==null&&n!==void 0&&n.destroyed)return this.readyPromise=void 0,this.finishedPromise=void 0,!1;var r=this.oldPlayState,i=this.pending?"pending":this.playState;return this.readyPromise&&i!==r&&(i==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):r==="pending"?this.resolveReadyPromise():i==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&i!==r&&(i==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):i==="finished"?this.resolveFinishedPromise():r==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=i,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var n=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var r=new SE(null,this,this.currentTime,null);setTimeout(function(){n.oncancel(r)})}}},{key:"reverse",value:function(){this.updatePromises();var n=this.currentTime;this.playbackRate*=-1,this.play(),n!==null&&(this.currentTime=n),this.updatePromises()}},{key:"updatePlaybackRate",value:function(n){this.playbackRate=n}},{key:"targetAnimations",value:function(){var n,r=(n=this.effect)===null||n===void 0?void 0:n.target;return r.getAnimations()}},{key:"markTarget",value:function(){var n=this.targetAnimations();n.indexOf(this)===-1&&n.push(this)}},{key:"unmarkTarget",value:function(){var n=this.targetAnimations(),r=n.indexOf(this);r!==-1&&n.splice(r,1)}},{key:"tick",value:function(n,r){!this._idle&&!this._paused&&(this._startTime===null?r&&(this.startTime=n-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((n-this._startTime)*this.playbackRate)),r&&(this.currentTimePending=!1,this.fireEvents(n))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")}},{key:"persist",value:function(){throw new Error(Tn)}},{key:"addEventListener",value:function(n,r,i){throw new Error(Tn)}},{key:"removeEventListener",value:function(n,r,i){throw new Error(Tn)}},{key:"dispatchEvent",value:function(n){throw new Error(Tn)}},{key:"commitStyles",value:function(){throw new Error(Tn)}},{key:"ensureAlive",value:function(){if(this.playbackRate<0&&this.currentTime===0){var n;this._inEffect=!!((n=this.effect)!==null&&n!==void 0&&n.update(-1))}else{var r;this._inEffect=!!((r=this.effect)!==null&&r!==void 0&&r.update(this.currentTime))}!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(n,r){n!==this._currentTime&&(this._currentTime=n,this._isFinished&&!r&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(n){var r=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var i=new SE(null,this,this.currentTime,n);setTimeout(function(){r.onfinish&&r.onfinish(i)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var a=new SE(null,this,this.currentTime,n);this.onframe(a)}this._finishedFlag=!1}}}])}(),LDe=4,RDe=.001,NDe=1e-7,FDe=10,Og=11,dy=1/(Og-1),zDe=typeof Float32Array=="function",Kee=function(e,n){return 1-3*n+3*e},Jee=function(e,n){return 3*n-6*e},Qee=function(e){return 3*e},Hb=function(e,n,r){return((Kee(n,r)*e+Jee(n,r))*e+Qee(n))*e},ete=function(e,n,r){return 3*Kee(n,r)*e*e+2*Jee(n,r)*e+Qee(n)},jDe=function(e,n,r,i,a){var o,s,l=0;do s=n+(r-n)/2,o=Hb(s,i,a)-e,o>0?r=s:n=s;while(Math.abs(o)>NDe&&++l<FDe);return s},BDe=function(e,n,r,i){for(var a=0;a<LDe;++a){var o=ete(n,r,i);if(o===0)return n;var s=Hb(n,r,i)-e;n-=s/o}return n},dL=function(e,n,r,i){if(!(e>=0&&e<=1&&r>=0&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===n&&r===i)return function(l){return l};for(var a=zDe?new Float32Array(Og):new Array(Og),o=0;o<Og;++o)a[o]=Hb(o*dy,e,r);var s=function(u){for(var c=0,f=1,d=Og-1;f!==d&&a[f]<=u;++f)c+=dy;--f;var h=(u-a[f])/(a[f+1]-a[f]),p=c+h*dy,g=ete(p,e,r);return g>=RDe?BDe(u,p,e,r):g===0?p:jDe(u,c,c+dy,e,r)};return function(l){return l===0||l===1?l:Hb(s(l),n,i)}},$De=function(e){return e=e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())}),e.charAt(0)==="-"?e.substring(1):e},hy=function(e){return Math.pow(e,2)},py=function(e){return Math.pow(e,3)},gy=function(e){return Math.pow(e,4)},vy=function(e){return Math.pow(e,5)},my=function(e){return Math.pow(e,6)},yy=function(e){return 1-Math.cos(e*Math.PI/2)},by=function(e){return 1-Math.sqrt(1-e*e)},xy=function(e){return e*e*(3*e-2)},wy=function(e){for(var n,r=4;e<((n=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((n*3-2)/22-e,2)},_y=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=Ot(n,2),i=r[0],a=i===void 0?1:i,o=r[1],s=o===void 0?.5:o,l=jn(Number(a),1,10),u=jn(Number(s),.1,2);return e===0||e===1?e:-l*Math.pow(2,10*(e-1))*Math.sin((e-1-u/(Math.PI*2)*Math.asin(1/l))*(Math.PI*2)/u)},ig=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=Ot(n,4),a=i[0],o=a===void 0?1:a,s=i[1],l=s===void 0?100:s,u=i[2],c=u===void 0?10:u,f=i[3],d=f===void 0?0:f;o=jn(o,.1,1e3),l=jn(l,.1,1e3),c=jn(c,.1,1e3),d=jn(d,.1,1e3);var h=Math.sqrt(l/o),p=c/(2*Math.sqrt(l*o)),g=p<1?h*Math.sqrt(1-p*p):0,v=1,m=p<1?(p*h+-d)/g:-d+h,y=r?r*e/1e3:e;return p<1?y=Math.exp(-y*p*h)*(v*Math.cos(g*y)+m*Math.sin(g*y)):y=(v+m*y)*Math.exp(-y*h),e===0||e===1?e:1-y},EE=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=n,i=Ot(r,2),a=i[0],o=a===void 0?10:a,s=i[1],l=s==="start"?Math.ceil:Math.floor;return l(jn(e,0,1)*o)/o},r7=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=Ot(n,4),i=r[0],a=r[1],o=r[2],s=r[3];return dL(i,a,o,s)(e)},Sy=dL(.42,0,1,1),mo=function(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return 1-e(1-n,r,i)}},yo=function(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return n<.5?e(n*2,r,i)/2:1-e(n*-2+2,r,i)/2}},bo=function(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return n<.5?(1-e(1-n*2,r,i))/2:(e(n*2-1,r,i)+1)/2}},i7={steps:EE,"step-start":function(e){return EE(e,[1,"start"])},"step-end":function(e){return EE(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":r7,ease:function(e){return r7(e,[.25,.1,.25,1])},in:Sy,out:mo(Sy),"in-out":yo(Sy),"out-in":bo(Sy),"in-quad":hy,"out-quad":mo(hy),"in-out-quad":yo(hy),"out-in-quad":bo(hy),"in-cubic":py,"out-cubic":mo(py),"in-out-cubic":yo(py),"out-in-cubic":bo(py),"in-quart":gy,"out-quart":mo(gy),"in-out-quart":yo(gy),"out-in-quart":bo(gy),"in-quint":vy,"out-quint":mo(vy),"in-out-quint":yo(vy),"out-in-quint":bo(vy),"in-expo":my,"out-expo":mo(my),"in-out-expo":yo(my),"out-in-expo":bo(my),"in-sine":yy,"out-sine":mo(yy),"in-out-sine":yo(yy),"out-in-sine":bo(yy),"in-circ":by,"out-circ":mo(by),"in-out-circ":yo(by),"out-in-circ":bo(by),"in-back":xy,"out-back":mo(xy),"in-out-back":yo(xy),"out-in-back":bo(xy),"in-bounce":wy,"out-bounce":mo(wy),"in-out-bounce":yo(wy),"out-in-bounce":bo(wy),"in-elastic":_y,"out-elastic":mo(_y),"in-out-elastic":yo(_y),"out-in-elastic":bo(_y),spring:ig,"spring-in":ig,"spring-out":mo(ig),"spring-in-out":yo(ig),"spring-out-in":bo(ig)},VDe=function(e){return $De(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},qDe=function(e){return i7[VDe(e)]||i7.linear},WDe=function(e){return e},GDe=1,HDe=.5,a7=0;function o7(t,e){return function(n){if(n>=1)return 1;var r=1/t;return n+=e*r,n-n%r}}var Ey="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",YDe=new RegExp("cubic-bezier\\(".concat(Ey,",").concat(Ey,",").concat(Ey,",").concat(Ey,"\\)")),UDe=/steps\(\s*(\d+)\s*\)/,XDe=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function hL(t){var e=YDe.exec(t);if(e)return dL.apply(void 0,Bt(e.slice(1).map(Number)));var n=UDe.exec(t);if(n)return o7(Number(n[1]),a7);var r=XDe.exec(t);return r?o7(Number(r[1]),{start:GDe,middle:HDe,end:a7}[r[2]]):qDe(t)}function ZDe(t){return Math.abs(KDe(t)/(t.playbackRate||1))}function KDe(t){var e;return t.duration===0||t.iterations===0?0:(t.duration==="auto"?0:Number(t.duration))*((e=t.iterations)!==null&&e!==void 0?e:1)}var tte=0,pL=1,z2=2,nte=3;function JDe(t,e,n){if(e===null)return tte;var r=n.endTime;return e<Math.min(n.delay,r)?pL:e>=Math.min(n.delay+t+n.endDelay,r)?z2:nte}function QDe(t,e,n,r,i){switch(r){case pL:return e==="backwards"||e==="both"?0:null;case nte:return n-i;case z2:return e==="forwards"||e==="both"?t:null;case tte:return null}}function eIe(t,e,n,r,i){var a=i;return t===0?e!==pL&&(a+=n):a+=r/t,a}function tIe(t,e,n,r,i,a){var o=t===1/0?e%1:t%1;return o===0&&n===z2&&r!==0&&(i!==0||a===0)&&(o=1),o}function nIe(t,e,n,r){return t===z2&&e===1/0?1/0:n===1?Math.floor(r)-1:Math.floor(r)}function rIe(t,e,n){var r=t;if(t!=="normal"&&t!=="reverse"){var i=e;t==="alternate-reverse"&&(i+=1),r="normal",i!==1/0&&i%2!==0&&(r="reverse")}return r==="normal"?n:1-n}function iIe(t,e,n){var r=JDe(t,e,n),i=QDe(t,n.fill,e,r,n.delay);if(i===null)return null;var a=n.duration==="auto"?0:n.duration,o=eIe(a,r,n.iterations,i,n.iterationStart),s=tIe(o,n.iterationStart,r,n.iterations,i,a),l=nIe(r,n.iterations,s,o),u=rIe(n.direction,l,s);return n.currentIteration=l,n.progress=u,n.easingFunction(u)}function aIe(t,e,n){var r=oIe(t,e),i=sIe(r,n);return function(a,o){if(o!==null)i.filter(function(l){return o>=l.applyFrom&&o<l.applyTo}).forEach(function(l){var u=o-l.startOffset,c=l.endOffset-l.startOffset,f=c===0?0:u/c;a.setAttribute(l.property,l.interpolation(f),!1,!1)});else for(var s in r)rte(s)&&a.setAttribute(s,null)}}function rte(t){return t!=="offset"&&t!=="easing"&&t!=="composite"&&t!=="computedOffset"}function oIe(t,e){for(var n={},r=0;r<t.length;r++)for(var i in t[r])if(rte(i)){var a={offset:t[r].offset,computedOffset:t[r].computedOffset,easing:t[r].easing,easingFunction:hL(t[r].easing)||e.easingFunction,value:t[r][i]};n[i]=n[i]||[],n[i].push(a)}return n}function sIe(t,e){var n=[];for(var r in t)for(var i=t[r],a=0;a<i.length-1;a++){var o=a,s=a+1,l=i[o].computedOffset,u=i[s].computedOffset,c=l,f=u;a===0&&(c=-1/0,u===0&&(s=o)),a===i.length-2&&(f=1/0,l===1&&(o=s)),n.push({applyFrom:c,applyTo:f,startOffset:i[o].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[o].easingFunction,property:r,interpolation:lIe(r,i[o].value,i[s].value,e)})}return n.sort(function(d,h){return d.startOffset-h.startOffset}),n}var s7=function(e,n,r){return function(i){var a=ite(e,n,i);return je(a)?a:r(a)}};function lIe(t,e,n,r){var i=Lee[t];if(i&&i.syntax&&i.int){var a=Ce.styleValueRegistry.getPropertySyntax(i.syntax);if(a){var o=a.parser,s=o?o(e,r):e,l=o?o(n,r):n,u=a.mixer(s,l,r);if(u){var c=s7.apply(void 0,Bt(u));return function(f){return f===0?e:f===1?n:c(f)}}}}return s7(!1,!0,function(f){return f?n:e})}function ite(t,e,n){if(typeof t=="number"&&typeof e=="number")return t*(1-n)+e*n;if(typeof t=="boolean"&&typeof e=="boolean"||typeof t=="string"&&typeof e=="string")return n<.5?t:e;if(Array.isArray(t)&&Array.isArray(e)){for(var r=t.length,i=e.length,a=Math.max(r,i),o=[],s=0;s<a;s++)o.push(ite(t[s<r?s:r-1],e[s<i?s:i-1],n));return o}throw new Error("Mismatched interpolation arguments ".concat(t,":").concat(e))}var uIe=function(){function t(){Ae(this,t),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=WDe,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return Te(t,[{key:"easing",get:function(){return this._easing},set:function(n){this.easingFunction=hL(n),this._easing=n}}])}();function cIe(t){var e=[];for(var n in t)if(!(n in["easing","offset","composite"])){var r=t[n];Array.isArray(r)||(r=[r]);for(var i=r.length,a=0;a<i;a++){if(!e[a]){var o={};"offset"in t&&(o.offset=Number(t.offset)),"easing"in t&&(o.easing=t.easing),"composite"in t&&(o.composite=t.composite),e[a]=o}r[a]!==void 0&&r[a]!==null&&(e[a][n]=r[a])}}return e.sort(function(s,l){return(s.computedOffset||0)-(l.computedOffset||0)}),e}function l7(t,e){if(t===null)return[];Array.isArray(t)||(t=cIe(t));for(var n=t.map(function(l){var u={};e!=null&&e.composite&&(u.composite="auto");for(var c in l){var f=l[c];if(c==="offset"){if(f!==null){if(f=Number(f),!isFinite(f))throw new Error("Keyframe offsets must be numbers.");if(f<0||f>1)throw new Error("Keyframe offsets must be between 0 and 1.");u.computedOffset=f}}else if(c==="composite"&&["replace","add","accumulate","auto"].indexOf(f)===-1)throw new Error("".concat(f," compositing is not supported"));u[c]=f}return u.offset===void 0&&(u.offset=null),u.easing===void 0&&(u.easing=(e==null?void 0:e.easing)||"linear"),u.composite===void 0&&(u.composite="auto"),u}),r=!0,i=-1/0,a=0;a<n.length;a++){var o=n[a].offset;if(lt(o))r=!1;else{if(o<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=o}}n=n.filter(function(l){return Number(l.offset)>=0&&Number(l.offset)<=1});function s(){var l,u=n,c=u.length;if(n[c-1].computedOffset=Number((l=n[c-1].offset)!==null&&l!==void 0?l:1),c>1){var f;n[0].computedOffset=Number((f=n[0].offset)!==null&&f!==void 0?f:0)}for(var d=0,h=Number(n[0].computedOffset),p=1;p<c;p++){var g=n[p].computedOffset;if(!lt(g)&&!lt(h)){for(var v=1;v<p-d;v++)n[d+v].computedOffset=h+(Number(g)-h)*v/(p-d);d=p,h=Number(g)}}}return r||s(),n}var fIe="backwards|forwards|both|none".split("|"),dIe="reverse|alternate|alternate-reverse".split("|");function hIe(t,e){var n=new uIe;return typeof t=="number"&&!isNaN(t)?n.duration=t:t!==void 0&&Object.keys(t).forEach(function(r){if(t[r]!==void 0&&t[r]!==null&&t[r]!=="auto"){if((typeof n[r]=="number"||r==="duration")&&(typeof t[r]!="number"||isNaN(t[r]))||r==="fill"&&fIe.indexOf(t[r])===-1||r==="direction"&&dIe.indexOf(t[r])===-1)return;n[r]=t[r]}}),n}function pIe(t,e){return t=gIe(t??{duration:"auto"}),hIe(t)}function gIe(t){return typeof t=="number"&&(isNaN(t)?t={duration:"auto"}:t={duration:t}),t}var vIe=function(){function t(e,n,r){var i=this;Ae(this,t),this.composite="replace",this.iterationComposite="replace",this.target=e,this.timing=pIe(r),this.timing.effect=this,this.timing.activeDuration=ZDe(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=l7(n,this.timing),this.interpolations=aIe(this.normalizedKeyframes,this.timing,this.target);var a=Ce.globalThis.Proxy;this.computedTiming=a?new a(this.timing,{get:function(s,l){return l==="duration"?s.duration==="auto"?0:s.duration:l==="fill"?s.fill==="auto"?"none":s.fill:l==="localTime"?i.animation&&i.animation.currentTime||null:l==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:s.currentIteration||0:l==="progress"?!i.animation||i.animation.playState!=="running"?null:s.progress||0:s[l]},set:function(){return!0}}):this.timing}return Te(t,[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(n){return n===null?!1:(this.timeFraction=iIe(this.timing.activeDuration,n,this.timing),this.timeFraction!==null)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(n){this.normalizedKeyframes=l7(n)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(n){var r=this;Object.keys(n||{}).forEach(function(i){r.timing[i]=n[i]})}}])}();function u7(t,e){return Number(t.id)-Number(e.id)}var mIe=function(){function t(e){var n=this;Ae(this,t),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(r){n.currentTime=r,n.discardAnimations(),n.animations.length===0?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(r){var i=n.rafCallbacks;n.rafCallbacks=[],r<Number(n.currentTime)&&(r=Number(n.currentTime)),n.animations.sort(u7),n.animations=n.tick(r,!0,n.animations)[0],i.forEach(function(a){a[1](r)}),n.applyPendingEffects()},this.document=e}return Te(t,[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(n,r,i){var a=new vIe(n,r,i),o=new IDe(a,this);return this.animations.push(o),this.restartWebAnimationsNextTick(),o.updatePromises(),o.play(),o.updatePromises(),o}},{key:"applyDirtiedAnimation",value:function(n){var r=this;if(!this.inTick){n.markTarget();var i=n.targetAnimations();i.sort(u7);var a=this.tick(Number(this.currentTime),!1,i.slice())[1];a.forEach(function(o){var s=r.animations.indexOf(o);s!==-1&&r.animations.splice(s,1)}),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach(function(n){n==null||n.applyInterpolations()}),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(n){return n.updatePromises()})}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(n){return n.playState!=="finished"&&n.playState!=="idle"})}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(n){var r=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([r,n]),r}},{key:"requestAnimationFrame",value:function(n){var r=this;return this.rAF(function(i){r.updateAnimationsPromises(),n(i),r.updateAnimationsPromises()})}},{key:"tick",value:function(n,r,i){var a=this,o,s;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=n,this.ticking=!1;var l=[],u=[],c=[],f=[];return i.forEach(function(d){d.tick(n,r),d._inEffect?(u.push(d.effect),d.markTarget()):(l.push(d.effect),d.unmarkTarget()),d._needsTick&&(a.ticking=!0);var h=d._inEffect||d._needsTick;d._inTimeline=h,h?c.push(d):f.push(d)}),(o=this.pendingEffects).push.apply(o,l),(s=this.pendingEffects).push.apply(s,u),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[c,f]}}])}();Ce.EasingFunction=hL;Ce.AnimationTimeline=mIe;function pt(t){return new Yb([t],null,t,t.ownerDocument)}let Yb=class Fi{constructor(e=null,n=null,r=null,i=null,a=[null,null,null,null,null],o=[],s=[]){this._elements=Array.from(e),this._data=n,this._parent=r,this._document=i,this._enter=a[0],this._update=a[1],this._exit=a[2],this._merge=a[3],this._split=a[4],this._transitions=o,this._facetElements=s}selectAll(e){const n=typeof e=="string"?this._parent.querySelectorAll(e):e;return new Fi(n,null,this._elements[0],this._document)}selectFacetAll(e){const n=typeof e=="string"?this._parent.querySelectorAll(e):e;return new Fi(this._elements,null,this._parent,this._document,void 0,void 0,n)}select(e){const n=typeof e=="string"?this._parent.querySelectorAll(e)[0]||null:e;return new Fi([n],null,n,this._document)}append(e){const n=typeof e=="function"?e:()=>this.createElement(e),r=[];if(this._data!==null){for(let i=0;i<this._data.length;i++){const a=this._data[i],[o,s]=Array.isArray(a)?a:[a,null],l=n(o,i);l.__data__=o,s!==null&&(l.__fromElements__=s),this._parent.appendChild(l),r.push(l)}return new Fi(r,null,this._parent,this._document)}else{for(let i=0;i<this._elements.length;i++){const a=this._elements[i],o=a.__data__,s=n(o,i);a.appendChild(s),r.push(s)}return new Fi(r,null,r[0],this._document)}}maybeAppend(e,n,r){const i=this._elements[0],a=i.getElementById(e);if(a)return new Fi([a],null,this._parent,this._document);const o=typeof n=="string"?this.createElement(n):n();return o.id=e,r&&(o.className=r),i.appendChild(o),new Fi([o],null,this._parent,this._document)}data(e,n=i=>i,r=()=>null){const i=[],a=[],o=new Set(this._elements),s=[],l=new Set,u=new Map(this._elements.map((h,p)=>[n(h.__data__,p),h])),c=new Map(this._facetElements.map((h,p)=>[n(h.__data__,p),h])),f=Bn(this._elements,h=>r(h.__data__));for(let h=0;h<e.length;h++){const p=e[h],g=n(p,h),v=r(p,h);if(u.has(g)){const m=u.get(g);m.__data__=p,m.__facet__=!1,a.push(m),o.delete(m),u.delete(g)}else if(c.has(g)){const m=c.get(g);m.__data__=p,m.__facet__=!0,a.push(m),c.delete(g)}else if(f.has(g)){const m=f.get(g);s.push([p,m]);for(const y of m)o.delete(y);f.delete(g)}else if(u.has(v)){const m=u.get(v);m.__toData__?m.__toData__.push(p):m.__toData__=[p],l.add(m),o.delete(m)}else i.push(p)}const d=[new Fi([],i,this._parent,this._document),new Fi(a,null,this._parent,this._document),new Fi(o,null,this._parent,this._document),new Fi([],s,this._parent,this._document),new Fi(l,null,this._parent,this._document)];return new Fi(this._elements,null,this._parent,this._document,d)}merge(e){const n=[...this._elements,...e._elements],r=[...this._transitions,...e._transitions];return new Fi(n,null,this._parent,this._document,void 0,r)}createElement(e){if(this._document)return this._document.createElement(e,{});const n=Fi.registry[e];return n?new n:Gh(`Unknown node type: ${e}`)}join(e=o=>o,n=o=>o,r=o=>o.remove(),i=o=>o,a=o=>o.remove()){const o=e(this._enter),s=n(this._update),l=r(this._exit),u=i(this._merge),c=a(this._split);return s.merge(o).merge(l).merge(u).merge(c)}remove(){for(let e=0;e<this._elements.length;e++){const n=this._transitions[e];if(n){const r=Array.isArray(n)?n:[n];Promise.all(r.map(i=>i.finished)).then(()=>{this._elements[e].remove()})}else this._elements[e].remove()}return new Fi([],null,this._parent,this._document,void 0,this._transitions)}each(e){for(let n=0;n<this._elements.length;n++){const r=this._elements[n],i=r.__data__;e(i,n,r)}return this}attr(e,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,a,o){n!==void 0&&(o[e]=r(i,a,o))})}style(e,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,a,o){n!==void 0&&(o.style[e]=r(i,a,o))})}transition(e){const n=typeof e!="function"?()=>e:e,{_transitions:r}=this;return this.each(function(i,a,o){r[a]=n(i,a,o)})}on(e,n){return this.each(function(r,i,a){a.addEventListener(e,n)}),this}call(e,...n){return e(this,...n),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}};Yb.registry={g:fr,rect:Vr,circle:$a,path:yr,text:Va,ellipse:xp,image:wp,line:Es,polygon:Ic,polyline:Gv,html:ud};function Oy(t,e,n){return Math.max(e,Math.min(t,n))}function Ub(t,e=10){return typeof t!="number"||Math.abs(t)<1e-15?t:parseFloat(t.toFixed(e))}function et(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}function yIe(t,e){return e.forEach((n,r)=>r===0?t.moveTo(n[0],n[1]):t.lineTo(n[0],n[1])),t.closePath(),t}function bIe(t,e,n){const{arrowSize:r}=n,i=typeof r=="string"?+parseFloat(r)/100*mr(t,e):r,a=Math.PI/6,o=Math.atan2(e[1]-t[1],e[0]-t[0]),s=Math.PI/2-o-a,l=[e[0]-i*Math.sin(s),e[1]-i*Math.cos(s)],u=o-a,c=[e[0]-i*Math.cos(u),e[1]-i*Math.sin(u)];return[l,c]}function q0(t,e,n,r,i){const a=$o(Pr(r,e))+Math.PI,o=$o(Pr(r,n))+Math.PI;return t.arc(r[0],r[1],i,a,o,o-a<0),t}function ate(t,e,n,r="y",i="between",a=!1){const o=(v,m)=>v==="y"||v===!0?m?180:90:m?90:0,s=r==="y"||r===!0?n:e,l=o(r,a),u=id(s),[c,f]=Kl(u,v=>s[v]),d=new Gn({domain:[c,f],range:[0,100]}),h=v=>je(s[v])&&!Number.isNaN(s[v])?d.map(s[v]):0,p={between:v=>`${t[v]} ${h(v)}%`,start:v=>v===0?`${t[v]} ${h(v)}%`:`${t[v-1]} ${h(v)}%, ${t[v]} ${h(v)}%`,end:v=>v===t.length-1?`${t[v]} ${h(v)}%`:`${t[v]} ${h(v)}%, ${t[v+1]} ${h(v)}%`},g=u.sort((v,m)=>h(v)-h(m)).map(p[i]||p.between).join(",");return`linear-gradient(${l}deg, ${g})`}function j2(t){const[e,n,r,i]=t;return[i,e,n,r]}function cd(t,e,n){const[r,i,,a]=Hn(t)?j2(e):e,[o,s]=n,l=t.getCenter(),u=Yh(Pr(r,l)),c=Yh(Pr(i,l)),f=c===u&&o!==s?c+Math.PI*2:c;return{startAngle:u,endAngle:f-u>=0?f:Math.PI*2+f,innerRadius:mr(a,l),outerRadius:mr(r,l)}}function gL(t){const{colorAttribute:e,opacityAttribute:n=e}=t;return`${n}Opacity`}function ote(t,e){if(!On(t))return"";const n=t.getCenter(),{transform:r}=e;return`translate(${n[0]}, ${n[1]}) ${r||""}`}function vL(t){if(t.length===1)return t[0];const[[e,n,r=0],[i,a,o=0]]=t;return[(e+i)/2,(n+a)/2,(r+o)/2]}var C1=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function ste(t,e,n,r,i={}){const{inset:a=0,radius:o=0,insetLeft:s=a,insetTop:l=a,insetRight:u=a,insetBottom:c=a,radiusBottomLeft:f=o,radiusBottomRight:d=o,radiusTopLeft:h=o,radiusTopRight:p=o,minWidth:g=-1/0,maxWidth:v=1/0,minHeight:m=-1/0}=i,y=C1(i,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!On(r)&&!see(r)){const S=!!Hn(r),[O,,A]=S?j2(e):e,[T,I]=O,[D,R]=Pr(A,O),F=D>0?T:T+D,z=R>0?I:I+R,N=Math.abs(D),L=Math.abs(R),B=F+s,$=z+l,G=N-(s+u),W=L-(l+c),U=S?Oy(G,m,1/0):Oy(G,g,v),Y=S?Oy(W,g,v):Oy(W,m,1/0),q=S?B:B-(U-G)/2,K=S?$-(Y-W)/2:$-(Y-W);return pt(t.createElement("rect",{})).style("x",q).style("y",K).style("width",U).style("height",Y).style("radius",[h,p,d,f]).call(et,y).node()}const{y:b,y1:x}=n,w=r.getCenter(),_=cd(r,e,[b,x]),E=KI().cornerRadius(o).padAngle(a*Math.PI/180);return pt(t.createElement("path",{})).style("d",E(_)).style("transform",`translate(${w[0]}, ${w[1]})`).style("radius",o).style("inset",a).call(et,y).node()}const Hv=(t,e)=>{const{colorAttribute:n,opacityAttribute:r="fill",first:i=!0,last:a=!0}=t,o=C1(t,["colorAttribute","opacityAttribute","first","last"]),{coordinate:s,document:l}=e;return(u,c,f)=>{const{color:d,radius:h=0}=f,p=C1(f,["color","radius"]),g=p.lineWidth||1,{stroke:v,radius:m=h,radiusTopLeft:y=m,radiusTopRight:b=m,radiusBottomRight:x=m,radiusBottomLeft:w=m,innerRadius:_=0,innerRadiusTopLeft:E=_,innerRadiusTopRight:S=_,innerRadiusBottomRight:O=_,innerRadiusBottomLeft:A=_,lineWidth:T=n==="stroke"||v?g:0,inset:I=0,insetLeft:D=I,insetRight:R=I,insetBottom:F=I,insetTop:z=I,minWidth:N,maxWidth:L,minHeight:B}=o,$=C1(o,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:G=d,opacity:W}=c,U=[i?y:E,i?b:S,a?x:O,a?w:A],Y=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];Hn(s)&&Y.push(Y.shift());const q=Object.assign(Object.assign({radius:m},Object.fromEntries(Y.map((K,J)=>[K,U[J]]))),{inset:I,insetLeft:D,insetRight:R,insetBottom:F,insetTop:z,minWidth:N,maxWidth:L,minHeight:B});return pt(ste(l,u,c,s,q)).call(et,p).style("fill","transparent").style(n,G).style(gL(t),W).style("lineWidth",T).style("stroke",v===void 0?G:v).call(et,$).node()}};Hv.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const fd=(t,e)=>Hv(Object.assign({colorAttribute:"fill"},t),e);fd.props=Object.assign(Object.assign({},Hv.props),{defaultMarker:"square"});const B2=(t,e)=>Hv(Object.assign({colorAttribute:"stroke"},t),e);B2.props=Object.assign(Object.assign({},Hv.props),{defaultMarker:"hollowSquare"});var c7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function xIe(t,e,n){const[r,i,a,o]=t;if(Hn(n)){const u=[e?e[0][0]:i[0],i[1]],c=[e?e[3][0]:a[0],a[1]];return[r,u,c,o]}const s=[i[0],e?e[0][1]:i[1]],l=[a[0],e?e[3][1]:a[1]];return[r,s,l,o]}const mL=(t,e)=>{const{adjustPoints:n=xIe}=t,r=c7(t,["adjustPoints"]),{coordinate:i,document:a}=e;return(o,s,l,u)=>{const{index:c}=s,{color:f}=l,d=c7(l,["color"]),h=u[c+1],p=n(o,h,i),g=!!Hn(i),[v,m,y,b]=g?j2(p):p,{color:x=f,opacity:w}=s,_=od().curve(tL)([v,m,y,b]);return pt(a.createElement("path",{})).call(et,d).style("d",_).style("fill",x).style("fillOpacity",w).call(et,r).node()}};mL.props={defaultMarker:"square"};function wIe(t,e,n){const[r,i,a,o]=t;if(Hn(n)){const u=[e?e[0][0]:(i[0]+a[0])/2,i[1]],c=[e?e[3][0]:(i[0]+a[0])/2,a[1]];return[r,u,c,o]}const s=[i[0],e?e[0][1]:(i[1]+a[1])/2],l=[a[0],e?e[3][1]:(i[1]+a[1])/2];return[r,s,l,o]}const lte=(t,e)=>mL(Object.assign({adjustPoints:wIe},t),e);lte.props={defaultMarker:"square"};function Jh(t){const e=typeof t=="function"?t:t.render;return class extends Wv{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){e(this)}}}var f7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const _Ie=Jh(t=>{const{d1:e,d2:n,style1:r,style2:i}=t.attributes,a=t.ownerDocument;pt(t).maybeAppend("line",()=>a.createElement("path",{})).style("d",e).call(et,r),pt(t).maybeAppend("line1",()=>a.createElement("path",{})).style("d",n).call(et,i)});function SIe(t,e){const n=[],r=[];let i=!1,a=null;for(const o of t)!e(o[0])||!e(o[1])?i=!0:(n.push(o),i&&(i=!1,r.push([a,o])),a=o);return[n,r]}const Uo=(t,e)=>{const{curve:n,gradient:r=!1,gradientColor:i="between",defined:a=c=>!Number.isNaN(c)&&c!==void 0&&c!==null,connect:o=!1}=t,s=f7(t,["curve","gradient","gradientColor","defined","connect"]),{coordinate:l,document:u}=e;return(c,f,d)=>{const{color:h,lineWidth:p}=d,g=f7(d,["color","lineWidth"]),{color:v=h,size:m=p,seriesColor:y,seriesX:b,seriesY:x}=f,w=ote(l,f),_=Hn(l),E=r&&y?ate(y,b,x,r,i,_):v,S=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},g),E&&{stroke:E}),m&&{lineWidth:m}),w&&{transform:w}),s);let O;if(On(l)){const F=l.getCenter();O=z=>xMe().angle((N,L)=>Yh(Pr(z[L],F))).radius((N,L)=>mr(z[L],F)).defined(([N,L])=>a(N)&&a(L)).curve(n)(z)}else O=od().x(F=>F[0]).y(F=>F[1]).defined(([F,z])=>a(F)&&a(z)).curve(n);const[A,T]=SIe(c,a),I=Fe(S,"connect"),D=!!T.length;if(!D||o&&!Object.keys(I).length)return pt(u.createElement("path",{})).style("d",O(A)||[]).call(et,S).node();if(D&&!o)return pt(u.createElement("path",{})).style("d",O(c)).call(et,S).node();const R=F=>F.map(O).join(",");return pt(new _Ie).style("style1",Object.assign(Object.assign({},S),I)).style("style2",S).style("d1",R(T)).style("d2",O(c)).node()}};Uo.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const ute=(t,e)=>{const{coordinate:n}=e;return(...r)=>{const i=On(n)?tL:$v;return Uo(Object.assign({curve:i},t),e)(...r)}};ute.props=Object.assign(Object.assign({},Uo.props),{defaultMarker:"line"});var EIe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const cte=(t,e)=>{const n=EIe(t,[]),{coordinate:r}=e;return(...i)=>{const a=On(r)?JQ:Hn(r)?ree:nee;return Uo(Object.assign({curve:a},n),e)(...i)}};cte.props=Object.assign(Object.assign({},Uo.props),{defaultMarker:"smooth"});const fte=(t,e)=>Uo(Object.assign({curve:oee},t),e);fte.props=Object.assign(Object.assign({},Uo.props),{defaultMarker:"hv"});const dte=(t,e)=>Uo(Object.assign({curve:aee},t),e);dte.props=Object.assign(Object.assign({},Uo.props),{defaultMarker:"vh"});const hte=(t,e)=>Uo(Object.assign({curve:iee},t),e);hte.props=Object.assign(Object.assign({},Uo.props),{defaultMarker:"hvh"});var OIe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function kIe(t,e,n,r,i){const a=Pr(n,e),o=$o(a),s=o+Math.PI/2,l=[r/2*Math.cos(s),r/2*Math.sin(s)],u=[i/2*Math.cos(s),i/2*Math.sin(s)],c=[i/2*Math.cos(o),i/2*Math.sin(o)],f=[r/2*Math.cos(o),r/2*Math.sin(o)],d=ey(e,l),h=ey(n,u),p=ey(h,c),g=ey(n,c),v=Pr(g,u),m=Pr(n,u),y=Pr(e,l),b=Pr(y,f),x=Pr(e,f),w=Pr(d,f);t.moveTo(...d),t.lineTo(...h),t.arcTo(...p,...g,i/2),t.arcTo(...v,...m,i/2),t.lineTo(...y),t.arcTo(...b,...x,r/2),t.arcTo(...w,...d,r/2),t.closePath()}const pte=(t,e)=>{const{document:n}=e;return(r,i,a)=>{const{seriesSize:o,color:s}=i,{color:l}=a,u=OIe(a,["color"]),c=Ho();for(let f=0;f<r.length-1;f++){const d=r[f],h=r[f+1],p=o[f],g=o[f+1];[...d,...h].every($n)&&kIe(c,d,h,p,g)}return pt(n.createElement("path",{})).call(et,u).style("fill",s||l).style("d",c.toString()).call(et,t).node()}};pte.props=Object.assign(Object.assign({},Uo.props),{defaultMarker:"line"});var AIe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const yL=(t,e,n)=>[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]];yL.style=["fill"];const gte=yL.bind(void 0);gte.style=["stroke","lineWidth"];const $2=(t,e,n)=>[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]];$2.style=["fill"];const vte=$2.bind(void 0);vte.style=["fill"];const mte=$2.bind(void 0);mte.style=["stroke","lineWidth"];const bL=(t,e,n)=>{const r=n*.618;return[["M",t-r,e],["L",t,e-n],["L",t+r,e],["L",t,e+n],["Z"]]};bL.style=["fill"];const yte=bL.bind(void 0);yte.style=["stroke","lineWidth"];const xL=(t,e,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]};xL.style=["fill"];const bte=xL.bind(void 0);bte.style=["stroke","lineWidth"];const wL=(t,e,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]};wL.style=["fill"];const xte=wL.bind(void 0);xte.style=["stroke","lineWidth"];const _L=(t,e,n)=>{const r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]};_L.style=["fill"];const wte=_L.bind(void 0);wte.style=["stroke","lineWidth"];const SL=(t,e,n)=>{const r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]};SL.style=["fill"];const _te=SL.bind(void 0);_te.style=["stroke","lineWidth"];const Ste=(t,e,n)=>[["M",t,e+n],["L",t,e-n]];Ste.style=["stroke","lineWidth"];const Ete=(t,e,n)=>[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]];Ete.style=["stroke","lineWidth"];const Ote=(t,e,n)=>[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]];Ote.style=["stroke","lineWidth"];const kte=(t,e,n)=>[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]];kte.style=["stroke","lineWidth"];const Ate=(t,e,n)=>[["M",t-n,e],["L",t+n,e]];Ate.style=["stroke","lineWidth"];const EL=(t,e,n)=>[["M",t-n,e],["L",t+n,e]];EL.style=["stroke","lineWidth"];const Tte=EL.bind(void 0);Tte.style=["stroke","lineWidth"];const Mte=(t,e,n)=>[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]];Mte.style=["stroke","lineWidth"];const Cte=(t,e,n)=>[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]];Cte.style=["stroke","lineWidth"];const Pte=(t,e,n)=>[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]];Pte.style=["stroke","lineWidth"];const Dte=(t,e,n)=>[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]];Dte.style=["stroke","lineWidth"];const Ite=(t,e,n)=>[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]];Ite.style=["stroke","lineWidth"];const Xb=new Map([["bowtie",SL],["cross",Ete],["dash",Tte],["diamond",bL],["dot",EL],["hexagon",_L],["hollowBowtie",_te],["hollowDiamond",yte],["hollowHexagon",wte],["hollowPoint",gte],["hollowSquare",mte],["hollowTriangle",bte],["hollowTriangleDown",xte],["hv",Cte],["hvh",Dte],["hyphen",Ate],["line",Ste],["plus",kte],["point",yL],["rect",vte],["smooth",Mte],["square",$2],["tick",Ote],["triangleDown",wL],["triangle",xL],["vh",Pte],["vhv",Ite]]);function TIe(t,e){var{d:n,fill:r,lineWidth:i,path:a,stroke:o,color:s}=e,l=AIe(e,["d","fill","lineWidth","path","stroke","color"]);const u=Xb.get(t)||Xb.get("point");return(...c)=>new yr({style:Object.assign(Object.assign({},l),{d:u(...c),stroke:u.style.includes("stroke")?s||o:"",fill:u.style.includes("fill")?s||r:"",lineWidth:u.style.includes("lineWidth")?i||i||2:0})})}function OL(t){return t.replace(/-(\w)/g,function(e,n){return n.toUpperCase()})}function MIe(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}var CIe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Lte(t,e,n,r){if(e.length===1)return;const{size:i}=n;if(t==="fixed")return i;if(t==="normal"||lee(r)){const[[a,o],[s,l]]=e,u=Math.abs((s-a)/2),c=Math.abs((l-o)/2);return Math.max(0,(u+c)/2)}return i}const Gt=(t,e)=>{const{colorAttribute:n,symbol:r,mode:i="auto"}=t,a=CIe(t,["colorAttribute","symbol","mode"]),o=Xb.get(OL(r))||Xb.get("point"),{coordinate:s,document:l}=e;return(u,c,f)=>{const{lineWidth:d,color:h}=f,p=a.stroke?d||1:d,{color:g=h,transform:v,opacity:m}=c,[y,b]=vL(u),w=Lte(i,u,c,s)||a.r||f.r;return pt(l.createElement("path",{})).call(et,f).style("fill","transparent").style("d",o(y,b,w)).style("lineWidth",p).style("transform",v).style("transformOrigin",`${y-w} ${b-w}`).style("stroke",g).style(gL(t),m).style(n,g).call(et,a).node()}};Gt.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Rte=(t,e)=>Gt(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},t),e);Rte.props=Object.assign({defaultMarker:"hollowBowtie"},Gt.props);const Nte=(t,e)=>Gt(Object.assign({colorAttribute:"stroke",symbol:"diamond"},t),e);Nte.props=Object.assign({defaultMarker:"hollowDiamond"},Gt.props);const Fte=(t,e)=>Gt(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},t),e);Fte.props=Object.assign({defaultMarker:"hollowHexagon"},Gt.props);const zte=(t,e)=>Gt(Object.assign({colorAttribute:"stroke",symbol:"point"},t),e);zte.props=Object.assign({defaultMarker:"hollowPoint"},Gt.props);const jte=(t,e)=>Gt(Object.assign({colorAttribute:"stroke",symbol:"square"},t),e);jte.props=Object.assign({defaultMarker:"hollowSquare"},Gt.props);const Bte=(t,e)=>Gt(Object.assign({colorAttribute:"stroke",symbol:"triangle"},t),e);Bte.props=Object.assign({defaultMarker:"hollowTriangle"},Gt.props);const $te=(t,e)=>Gt(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},t),e);$te.props=Object.assign({defaultMarker:"hollowTriangleDown"},Gt.props);var PIe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Vte=(t,e)=>{const{colorAttribute:n,mode:r="auto"}=t,i=PIe(t,["colorAttribute","mode"]),{coordinate:a,document:o}=e;return(s,l,u)=>{const{lineWidth:c,color:f}=u,d=i.stroke?c||1:c,{color:h=f,transform:p,opacity:g}=l,[v,m]=vL(s),b=Lte(r,s,l,a)||i.r||u.r;return pt(o.createElement("circle",{})).call(et,u).style("fill","transparent").style("cx",v).style("cy",m).style("r",b).style("lineWidth",d).style("transform",p).style("transformOrigin",`${v} ${m}`).style("stroke",h).style(gL(t),g).style(n,h).call(et,i).node()}},kL=(t,e)=>Vte(Object.assign({colorAttribute:"fill"},t),e);kL.props={defaultMarker:"circle",defaultEnterAnimation:"fadeIn",defaultExitAnimation:"fadeOut"};const qte=(t,e)=>Vte(Object.assign({colorAttribute:"stroke"},t),e);qte.props=Object.assign({defaultMarker:"hollowPoint"},kL.props);const Wte=(t,e)=>Gt(Object.assign({colorAttribute:"fill",symbol:"bowtie"},t),e);Wte.props=Object.assign({defaultMarker:"bowtie"},Gt.props);const Gte=(t,e)=>Gt(Object.assign({colorAttribute:"stroke",symbol:"cross"},t),e);Gte.props=Object.assign({defaultMarker:"cross"},Gt.props);const Hte=(t,e)=>Gt(Object.assign({colorAttribute:"fill",symbol:"diamond"},t),e);Hte.props=Object.assign({defaultMarker:"diamond"},Gt.props);const Yte=(t,e)=>Gt(Object.assign({colorAttribute:"fill",symbol:"hexagon"},t),e);Yte.props=Object.assign({defaultMarker:"hexagon"},Gt.props);const Ute=(t,e)=>Gt(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},t),e);Ute.props=Object.assign({defaultMarker:"hyphen"},Gt.props);const Xte=(t,e)=>Gt(Object.assign({colorAttribute:"stroke",symbol:"line"},t),e);Xte.props=Object.assign({defaultMarker:"line"},Gt.props);const Zte=(t,e)=>Gt(Object.assign({colorAttribute:"stroke",symbol:"plus"},t),e);Zte.props=Object.assign({defaultMarker:"plus"},Gt.props);const Kte=(t,e)=>Gt(Object.assign({colorAttribute:"fill",symbol:"point"},t),e);Kte.props=Object.assign({defaultMarker:"point"},Gt.props);const Jte=(t,e)=>Gt(Object.assign({colorAttribute:"fill",symbol:"square"},t),e);Jte.props=Object.assign({defaultMarker:"square"},Gt.props);const Qte=(t,e)=>Gt(Object.assign({colorAttribute:"stroke",symbol:"tick"},t),e);Qte.props=Object.assign({defaultMarker:"tick"},Gt.props);const ene=(t,e)=>Gt(Object.assign({colorAttribute:"fill",symbol:"triangle"},t),e);ene.props=Object.assign({defaultMarker:"triangle"},Gt.props);const tne=(t,e)=>Gt(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},t),e);tne.props=Object.assign({defaultMarker:"triangleDown"},Gt.props);var d7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const AL=(t,e)=>{const{arrow:n=!0,arrowSize:r="40%"}=t,i=d7(t,["arrow","arrowSize"]),{document:a}=e;return(o,s,l)=>{const{defaultColor:u}=l,c=d7(l,["defaultColor"]),{color:f=u,transform:d}=s,[h,p]=o,g=Ho();if(g.moveTo(...h),g.lineTo(...p),n){const[v,m]=bIe(h,p,{arrowSize:r});g.moveTo(...v),g.lineTo(...p),g.lineTo(...m)}return pt(a.createElement("path",{})).call(et,c).style("d",g.toString()).style("stroke",f).style("transform",d).call(et,i).node()}};AL.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function nne(t,e){e(t),t.children&&t.children.forEach(function(n){n&&nne(n,e)})}function _p(t){V2(t,!0)}function Po(t){V2(t,!1)}function V2(t,e){var n=e?"visible":"hidden";nne(t,function(r){r.attr("visibility",n)})}var DIe=function(t){ge(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,tt([],te(n),!1))||this;return i.isMutationObserved=!0,i.addEventListener(Dt.INSERTED,function(){Po(i)}),i}return e}(fr);function rne(t){var e=t.appendChild(new DIe({class:"offscreen"}));return Po(e),e}function IIe(t){for(var e=t;e;){if(e.className==="offscreen")return!0;e=e.parent}return!1}var TL=function(t){ge(e,t);function e(n){n===void 0&&(n={});var r=n.style,i=oi(n,["style"]);return t.call(this,we({style:we({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},r)},i))||this}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=rne(this)),this._offscreen},enumerable:!1,configurable:!0}),e.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},e}(Va);function Qh(t){return t*Math.PI/180}function ine(t){return Number((t*180/Math.PI).toPrecision(5))}var Pn=function(){function t(e,n,r,i){e===void 0&&(e=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=e,this.y=n,this.width=r,this.height=i}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},t.prototype.isPointIn=function(e,n){return e>=this.left&&e<=this.right&&n>=this.top&&n<=this.bottom},t}();function ho(t,e){return Ue(t)?t.apply(void 0,tt([],te(e),!1)):t}var Xo=function(t,e){var n=function(i){return"".concat(e,"-").concat(i)},r=Object.fromEntries(Object.entries(t).map(function(i){var a=te(i,2),o=a[0],s=a[1],l=n(s);return[o,{name:l,class:".".concat(l),id:"#".concat(l),toString:function(){return l}}]}));return Object.assign(r,{prefix:n}),r},LIe=5,ane=function(t,e,n,r){n===void 0&&(n=0),r===void 0&&(r=LIe),Object.entries(e).forEach(function(i){var a=te(i,2),o=a[0],s=a[1],l=t;Object.prototype.hasOwnProperty.call(e,o)&&(s?au(s)?(au(t[o])||(l[o]={}),n<r?ane(t[o],s,n+1,r):l[o]=e[o]):wi(s)?(l[o]=[],l[o]=l[o].concat(s)):l[o]=s:l[o]=s)})},li=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)ane(t,e[r]);return t},RIe=function(t){return t!==void 0&&t!=null&&!Number.isNaN(t)},ky,NIe=w6(function(t,e){var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,a=e.fontStyle,o=e.fontVariant;return ky||(ky=Ce.offscreenCanvasCreator.getOrCreateContext(void 0)),ky.font=[a,o,i,"".concat(n,"px"),r].join(" "),ky.measureText(t).width},function(t,e){return[t,Object.values(e||one(t)).join()].join("")},4096),one=function(t){var e=t.style.fontFamily||"sans-serif",n=t.style.fontWeight||"normal",r=t.style.fontStyle||"normal",i=t.style.fontVariant,a=t.style.fontSize;return a=typeof a=="object"?a.value:a,{fontSize:a,fontFamily:e,fontWeight:n,fontStyle:r,fontVariant:i}};function sne(t){return t.nodeName==="text"?t:t.nodeName==="g"&&t.children.length===1&&t.children[0].nodeName==="text"?t.children[0]:null}function lne(t,e){var n=sne(t);n&&n.attr(e)}function aP(t,e,n){n===void 0&&(n="..."),lne(t,{wordWrap:!0,wordWrapWidth:e,maxLines:1,textOverflow:n})}function FIe(t,e,n,r){n===void 0&&(n=2),r===void 0&&(r="top"),lne(t,{wordWrap:!0,wordWrapWidth:e,maxLines:n,textBaseline:r})}function Zb(t){var e=t.canvas,n=t.touches,r=t.offsetX,i=t.offsetY;if(e){var a=e.x,o=e.y;return[a,o]}if(n){var s=n[0],l=s.clientX,u=s.clientY;return[l,u]}return r&&i?[r,i]:[0,0]}function lu(t){return typeof t=="function"?t():an(t)||je(t)?new TL({style:{text:String(t)}}):t}function zIe(t,e){return t.reduce(function(n,r){return(n[r[e]]=n[r[e]]||[]).push(r),n},{})}function Na(t,e,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=function(a){a.node().removeChildren()}),t?n(e):(r&&i(e),null)}function zi(t,e,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=!1),r&&t===e||i&&t===n?!0:t>e&&t<n}var jIe=function(t,e){return function(n){return t*(1-n)+e*n}};function BIe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0;return function(i){var a=new Array(r),o=new Array(n),s=0;for(s=0;s<r;++s)a[s]=ML(t[s],e[s]);for(;s<n;++s)o[s]=e[s];for(s=0;s<r;++s)o[s]=a[s](i);return o}}function $Ie(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n={},r={};return Object.entries(e).forEach(function(i){var a=te(i,2),o=a[0],s=a[1];o in t?n[o]=ML(t[o],s):r[o]=s}),function(i){return Object.entries(n).forEach(function(a){var o=te(a,2),s=o[0],l=o[1];return r[s]=l(i)}),r}}function ML(t,e){return typeof t=="number"&&typeof e=="number"?jIe(t,e):Array.isArray(t)&&Array.isArray(e)?BIe(t,e):typeof t=="object"&&typeof e=="object"?$Ie(t,e):function(n){return t}}function VIe(t,e,n,r){if(!r)return t.attr("__keyframe_data__",n),null;var i=r.duration,a=i===void 0?0:i,o=ML(e,n),s=Math.ceil(+a/16),l=new Array(s).fill(0).map(function(u,c,f){return{__keyframe_data__:o(c/(f.length-1))}});return t.animate(l,we({fill:"both"},r))}function h7(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,a=0;a<t.length;a++){var o=t[a],s=o.x,l=o.y,u=o.width,c=o.height,f=te([s+u,l+c],2),d=f[0],h=f[1];s<e&&(e=s),l<n&&(n=l),d>r&&(r=d),h>i&&(i=h)}return new Pn(e,n,r-e,i-n)}var qIe=function(t,e,n){var r=t.width,i=t.height,a=n.flexDirection,o=a===void 0?"row":a;n.flexWrap;var s=n.justifyContent,l=s===void 0?"flex-start":s;n.alignContent;var u=n.alignItems,c=u===void 0?"flex-start":u,f=o==="row",d=o==="row"||o==="column",h=f?d?[1,0]:[-1,0]:d?[0,1]:[0,-1],p=te([0,0],2),g=p[0],v=p[1],m=e.map(function(S){var O,A=S.width,T=S.height,I=te([g,v],2),D=I[0],R=I[1];return O=te([g+A*h[0],v+T*h[1]],2),g=O[0],v=O[1],new Pn(D,R,A,T)}),y=h7(m),b={"flex-start":0,"flex-end":f?r-y.width:i-y.height,center:f?(r-y.width)/2:(i-y.height)/2},x=m.map(function(S){var O=S.x,A=S.y,T=Pn.fromRect(S);return T.x=f?O+b[l]:O,T.y=f?A:A+b[l],T});h7(x);var w=function(S){var O=te(f?["height",i]:["width",r],2),A=O[0],T=O[1];switch(c){case"flex-start":return 0;case"flex-end":return T-S[A];case"center":return T/2-S[A]/2;default:return 0}},_=x.map(function(S){var O=S.x,A=S.y,T=Pn.fromRect(S);return T.x=f?O:O+w(T),T.y=f?A+w(T):A,T}),E=_.map(function(S){var O,A,T=Pn.fromRect(S);return T.x+=(O=t.x)!==null&&O!==void 0?O:0,T.y+=(A=t.y)!==null&&A!==void 0?A:0,T});return E},WIe=function(t,e,n){return[]};const GIe=function(t,e,n){if(e.length===0)return[];var r={flex:qIe,grid:WIe},i=n.display in r?r[n.display]:null;return(i==null?void 0:i.call(null,t,e,n))||[]};function Vl(t,e){return[t[0]*e,t[1]*e]}function kg(t,e){return[t[0]+e[0],t[1]+e[1]]}function OE(t,e){return[t[0]-e[0],t[1]-e[1]]}function Xc(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1])]}function Zc(t,e){return[Math.max(t[0],e[0]),Math.max(t[1],e[1])]}function W0(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function une(t){if(t[0]===0&&t[1]===0)return[0,0];var e=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2));return[t[0]/e,t[1]/e]}function HIe(t,e){return e?[t[1],-t[0]]:[-t[1],t[0]]}function oP(t,e){return+t.toPrecision(e)}function p7(t,e){var n={},r=Array.isArray(e)?e:[e];for(var i in t)r.includes(i)||(n[i]=t[i]);return n}function YIe(t,e,n,r){var i,a=[],o=!!r,s,l,u=[1/0,1/0],c=[-1/0,-1/0],f,d,h;if(o){i=te(r,2),u=i[0],c=i[1];for(var p=0,g=t.length;p<g;p+=1){var v=t[p];u=Xc(u,v),c=Zc(c,v)}}for(var p=0,m=t.length;p<m;p+=1){var v=t[p];if(p===0&&!n)h=v;else if(p===m-1&&!n)d=v,a.push(h),a.push(d);else{var y=[p?p-1:m-1,p-1][1];s=t[y],l=t[p+1];var b=[0,0];b=OE(l,s),b=Vl(b,e);var x=W0(v,s),w=W0(v,l),_=x+w;_!==0&&(x/=_,w/=_);var E=Vl(b,-x),S=Vl(b,w);d=kg(v,E),f=kg(v,S),f=Xc(f,Zc(l,v)),f=Zc(f,Xc(l,v)),E=OE(f,v),E=Vl(E,-x/w),d=kg(v,E),d=Xc(d,Zc(s,v)),d=Zc(d,Xc(s,v)),S=OE(v,d),S=Vl(S,w/x),f=kg(v,S),o&&(d=Zc(d,u),d=Xc(d,c),f=Zc(f,u),f=Xc(f,c)),a.push(h),a.push(d),h=f}}return a}function UIe(t,e,n){n===void 0&&(n=[[0,0],[1,1]]);for(var r=!!e,i=[],a=0,o=t.length;a<o;a+=2)i.push([t[a],t[a+1]]);for(var s=YIe(i,.4,r,n),l=i.length,u=[],c,f,d,a=0;a<l-1;a+=1)c=s[a*2],f=s[a*2+1],d=i[a+1],u.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]]);return u}var XIe=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function ZIe(t){return XIe.includes(t)}function g7(t){var e={};for(var n in t)ZIe(n)&&(e[n]=t[n]);return e}function KIe(t,e){if(t.length<=e)return t;for(var n=Math.floor(t.length/e),r=[],i=0;i<t.length;i+=n)r.push(t[i]);return r}function CL(t,e,n){var r=t.getBBox(),i=r.width,a=r.height,o=e/Math.max(i,a);return t.style.transform="scale(".concat(o,")"),o}function JIe(t,e){var n=new Map;return t.forEach(function(r){var i=e(r);n.has(i)||n.set(i,[]),n.get(i).push(r)}),n}function QIe(t){throw new Error(t)}var eLe=function(){function t(i,a,o,s,l,u,c){i===void 0&&(i=null),a===void 0&&(a=null),o===void 0&&(o=null),s===void 0&&(s=null),l===void 0&&(l=[null,null,null,null,null]),u===void 0&&(u=[]),c===void 0&&(c=[]),e.add(this),this._elements=Array.from(i),this._data=a,this._parent=o,this._document=s,this._enter=l[0],this._update=l[1],this._exit=l[2],this._merge=l[3],this._split=l[4],this._transitions=u,this._facetElements=c}t.prototype.selectAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(a,null,this._elements[0],this._document)},t.prototype.selectFacetAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(this._elements,null,this._parent,this._document,void 0,void 0,a)},t.prototype.select=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new n([a],null,a,this._document)},t.prototype.append=function(i){var a=this,o=typeof i=="function"?i:function(){return a.createElement(i)},s=[];if(this._data!==null){for(var l=0;l<this._data.length;l++){var u=this._data[l],c=te(Array.isArray(u)?u:[u,null],2),f=c[0],d=c[1],h=o(f,l);h.__data__=f,d!==null&&(h.__fromElements__=d),this._parent.appendChild(h),s.push(h)}return new n(s,null,this._parent,this._document)}for(var l=0;l<this._elements.length;l++){var p=this._elements[l],f=p.__data__,h=o(f,l);p.appendChild(h),s.push(h)}return new n(s,null,s[0],this._document)},t.prototype.maybeAppend=function(i,a){var o=B_(this,e,"m",r).call(this,i[0]==="#"?i:"#".concat(i),a);return o.attr("id",i),o},t.prototype.maybeAppendByClassName=function(i,a){var o=i.toString(),s=B_(this,e,"m",r).call(this,o[0]==="."?o:".".concat(o),a);return s.attr("className",o),s},t.prototype.maybeAppendByName=function(i,a){var o=B_(this,e,"m",r).call(this,'[name="'.concat(i,'"]'),a);return o.attr("name",i),o},t.prototype.data=function(i,a,o){var s,l;a===void 0&&(a=function(A){return A}),o===void 0&&(o=function(){return null});for(var u=[],c=[],f=new Set(this._elements),d=[],h=new Set,p=new Map(this._elements.map(function(A,T){return[a(A.__data__,T),A]})),g=new Map(this._facetElements.map(function(A,T){return[a(A.__data__,T),A]})),v=JIe(this._elements,function(A){return o(A.__data__)}),m=0;m<i.length;m++){var y=i[m],b=a(y,m),x=o(y,m);if(p.has(b)){var w=p.get(b);w.__data__=y,w.__facet__=!1,c.push(w),f.delete(w),p.delete(b)}else if(g.has(b)){var w=g.get(b);w.__data__=y,w.__facet__=!0,c.push(w),g.delete(b)}else if(v.has(b)){var _=v.get(b);d.push([y,_]);try{for(var E=(s=void 0,Ov(_)),S=E.next();!S.done;S=E.next()){var w=S.value;f.delete(w)}}catch(A){s={error:A}}finally{try{S&&!S.done&&(l=E.return)&&l.call(E)}finally{if(s)throw s.error}}v.delete(b)}else if(p.has(x)){var w=p.get(x);w.__toData__?w.__toData__.push(y):w.__toData__=[y],h.add(w),f.delete(w)}else u.push(y)}var O=[new n([],u,this._parent,this._document),new n(c,null,this._parent,this._document),new n(f,null,this._parent,this._document),new n([],d,this._parent,this._document),new n(h,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,O)},t.prototype.merge=function(i){var a=tt(tt([],te(this._elements),!1),te(i._elements),!1),o=tt(tt([],te(this._transitions),!1),te(i._transitions),!1);return new n(a,null,this._parent,this._document,void 0,o)},t.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var a=n.registry[i];return a?new a:QIe("Unknown node type: ".concat(i))},t.prototype.join=function(i,a,o,s,l){i===void 0&&(i=function(p){return p}),a===void 0&&(a=function(p){return p}),o===void 0&&(o=function(p){return p.remove()}),s===void 0&&(s=function(p){return p}),l===void 0&&(l=function(p){return p.remove()});var u=i(this._enter),c=a(this._update),f=o(this._exit),d=s(this._merge),h=l(this._split);return c.merge(u).merge(f).merge(d).merge(h)},t.prototype.remove=function(){for(var i=function(s){var l=a._elements[s],u=a._transitions[s];u?u.then(function(){return l.remove()}):l.remove()},a=this,o=0;o<this._elements.length;o++)i(o);return new n([],null,this._parent,this._document,void 0,this._transitions)},t.prototype.each=function(i){for(var a=0;a<this._elements.length;a++){var o=this._elements[a],s=o.__data__;i.call(o,s,a)}return this},t.prototype.attr=function(i,a){var o=typeof a!="function"?function(){return a}:a;return this.each(function(s,l){a!==void 0&&(this[i]=o.call(this,s,l))})},t.prototype.style=function(i,a,o){o===void 0&&(o=!0);var s=typeof a!="function"||!o?function(){return a}:a;return this.each(function(l,u){a!==void 0&&(this.style[i]=s.call(this,l,u))})},t.prototype.styles=function(i,a){return i===void 0&&(i={}),a===void 0&&(a=!0),this.each(function(o,s){var l=this;Object.entries(i).forEach(function(u){var c=te(u,2),f=c[0],d=c[1],h=typeof d!="function"||!a?function(){return d}:d;d!==void 0&&l.attr(f,h.call(l,o,s))})})},t.prototype.update=function(i,a){a===void 0&&(a=!0);var o=typeof i!="function"||!a?function(){return i}:i;return this.each(function(s,l){i&&this.update&&this.update(o.call(this,s,l))})},t.prototype.maybeUpdate=function(i,a){a===void 0&&(a=!0);var o=typeof i!="function"||!a?function(){return i}:i;return this.each(function(s,l){i&&this.update&&this.update(o.call(this,s,l))})},t.prototype.transition=function(i){this._transitions;var a=new Array(this._elements.length);return this.each(function(o,s){a[s]=i.call(this,o,s)}),this._transitions=DOe(a),this},t.prototype.on=function(i,a){return this.each(function(){this.addEventListener(i,a)}),this},t.prototype.call=function(i){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];return i.call.apply(i,tt([this._parent,this],te(a),!1)),this},t.prototype.node=function(){return this._elements[0]},t.prototype.nodes=function(){return this._elements},t.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},t.prototype.parent=function(){return this._parent};var e,n,r;return n=t,e=new WeakSet,r=function(a,o){var s=this._elements[0],l=s.querySelector(a);if(l)return new n([l],null,this._parent,this._document);var u=typeof o=="string"?this.createElement(o):o();return s.appendChild(u),new n([u],null,this._parent,this._document)},t.registry={g:fr,rect:Vr,circle:$a,path:yr,text:TL,ellipse:xp,image:wp,line:Es,polygon:Ic,polyline:Gv,html:ud},t}();function Ye(t){return new eLe([t],null,t,t.ownerDocument)}function tLe(t,e,n){return t.querySelector(e)?Ye(t).select(e):Ye(t).append(n)}function $r(t){if(je(t))return[t,t,t,t];if(wi(t)){var e=t.length;if(e===1)return[t[0],t[0],t[0],t[0]];if(e===2)return[t[0],t[1],t[0],t[1]];if(e===3)return[t[0],t[1],t[2],t[1]];if(e===4)return t}return[0,0,0,0]}function v7(t){var e=t.getLocalBounds(),n=e.min,r=e.max,i=te([n,r],2),a=te(i[0],2),o=a[0],s=a[1],l=te(i[1],2),u=l[0],c=l[1];return{x:o,y:s,width:u-o,height:c-s,left:o,bottom:c,top:s,right:u}}function nLe(t,e){var n=te(t,2),r=n[0],i=n[1],a=te(e,2),o=a[0],s=a[1];return r!==o&&i===s}function rLe(t,e){var n,r,i=e.attributes;try{for(var a=Ov(Object.entries(i)),o=a.next();!o.done;o=a.next()){var s=te(o.value,2),l=s[0],u=s[1];l!=="id"&&l!=="className"&&t.attr(l,u)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}function PL(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function iLe(t){return t.toString().charAt(0).toLowerCase()+t.toString().slice(1)}function aLe(t,e){return"".concat(e).concat(PL(t))}function m7(t,e,n){var r;n===void 0&&(n=!0);var i=e||((r=t.match(/^([a-z][a-z0-9]+)/))===null||r===void 0?void 0:r[0])||"",a=t.replace(new RegExp("^(".concat(i,")")),"");return n?iLe(a):a}function oLe(t,e){Object.entries(e).forEach(function(n){var r=te(n,2),i=r[0],a=r[1];tt([t],te(t.querySelectorAll(i)),!1).filter(function(o){return o.matches(i)}).forEach(function(o){if(o){var s=o;s.style.cssText+=Object.entries(a).reduce(function(l,u){return"".concat(l).concat(u.join(":"),";")},"")}})})}var Ay=function(t,e){if(!(t!=null&&t.startsWith(e)))return!1;var n=t[e.length];return n>="A"&&n<="Z"};function ft(t,e,n){n===void 0&&(n=!1);var r={};return Object.entries(t).forEach(function(i){var a=te(i,2),o=a[0],s=a[1];if(!(o==="className"||o==="class")){if(Ay(o,"show")&&Ay(m7(o,"show"),e)!==n)o===aLe(e,"show")?r[o]=s:r[o.replace(new RegExp(PL(e)),"")]=s;else if(!Ay(o,"show")&&Ay(o,e)!==n){var l=m7(o,e);l==="filter"&&typeof s=="function"||(r[l]=s)}}}),r}function Us(t,e){return Object.entries(t).reduce(function(n,r){var i=te(r,2),a=i[0],o=i[1];return a.startsWith("show")?n["show".concat(e).concat(a.slice(4))]=o:n["".concat(e).concat(PL(a))]=o,n},{})}function uu(t,e){e===void 0&&(e=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(t).forEach(function(a){var o=te(a,2),s=o[0],l=o[1];e.includes(s)||(n.indexOf(s)!==-1?i[s]=l:r[s]=l)}),[r,i]}function Oa(t,e){var n={YYYY:t.getFullYear(),MM:t.getMonth()+1,DD:t.getDate(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()},r=e;return Object.keys(n).forEach(function(i){var a=n[i];r=r.replace(i,i==="YYYY"?"".concat(a):"".concat(a).padStart(2,"0"))}),r}function sLe(t,e,n){var r=t.getBBox(),i=r.width,a=r.height,o=te([e,n].map(function(u,c){var f;return u.includes("%")?parseFloat(((f=u.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||f===void 0?void 0:f[0])||"0")/100*(c===0?i:a):u}),2),s=o[0],l=o[1];return[s,l]}function cne(t,e){if(e)try{var n=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,r=e.replace(n,function(i,a,o){return"translate(".concat(sLe(t,a,o),")")});t.attr("transform",r)}catch{}}function lLe(t){var e;return((e=t[0])===null||e===void 0?void 0:e.map(function(n,r){return t.map(function(i){return i[r]})}))||[]}var y7=function(t,e){if(e==null){t.innerHTML="";return}t.replaceChildren?Array.isArray(e)?t.replaceChildren.apply(t,tt([],te(e),!1)):t.replaceChildren(e):(t.innerHTML="",Array.isArray(e)?e.forEach(function(n){return t.appendChild(n)}):t.appendChild(e))};function uLe(){V2(this,this.attributes.visibility!=="hidden")}var dr=function(t){ge(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this,li({},{style:r},n))||this;return i.initialized=!1,i._defaultOptions=r,i}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=rne(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},e.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},e.prototype.attributeChangedCallback=function(n){n==="visibility"&&uLe.call(this)},e.prototype.update=function(n,r){var i;return this.attr(li({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},e.prototype.clear=function(){this.removeChildren()},e.prototype.bindEvents=function(n,r){},e.prototype.getSubShapeStyle=function(n){n.x,n.y,n.transform,n.transformOrigin,n.class,n.className,n.zIndex;var r=oi(n,["x","y","transform","transformOrigin","class","className","zIndex"]);return r},e}(Wv),fne=function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]},cLe=fne,fLe=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},dLe=function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},hLe=function(t,e,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},pLe=function(t,e,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]},gLe=function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]},vLe=function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]},dne=function(t,e,n){return[["M",t,e+n],["L",t,e-n]]},mLe=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]},yLe=function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},bLe=function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]},xLe=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},hne=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},wLe=hne,_Le=function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]},SLe=function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]},ELe=function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]},OLe=function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]};function kLe(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]}var ALe=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e],["L",t-n,e+n],["Z"]]};function TLe(t){var e="default";if(jr(t)&&t instanceof Image)e="image";else if(Ue(t))e="symbol";else if(an(t)){var n=new RegExp("data:(image|text)");t.match(n)?e="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)?e="url":e="symbol"}return e}function MLe(t){var e=TLe(t);return["base64","url","image"].includes(e)?"image":t&&e==="symbol"?"path":null}var hn=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r){var i=n.x,a=i===void 0?0:i,o=n.y,s=o===void 0?0:o,l=this.getSubShapeStyle(n),u=l.symbol,c=l.size,f=c===void 0?16:c,d=oi(l,["symbol","size"]),h=MLe(u);Na(!!h,Ye(r),function(p){p.maybeAppendByClassName("marker",h).attr("className","marker ".concat(h,"-marker")).call(function(g){if(h==="image"){var v=f*2;g.styles({img:u,width:v,height:v,x:a-f,y:s-f})}else{var v=f/2,m=Ue(u)?u:e.getSymbol(u);g.styles(we({d:m==null?void 0:m(a,s,v)},d))}})})},e.MARKER_SYMBOL_MAP=new Map,e.registerSymbol=function(n,r){e.MARKER_SYMBOL_MAP.set(n,r)},e.getSymbol=function(n){return e.MARKER_SYMBOL_MAP.get(n)},e.getSymbols=function(){return Array.from(e.MARKER_SYMBOL_MAP.keys())},e}(dr);hn.registerSymbol("cross",mLe);hn.registerSymbol("hyphen",xLe);hn.registerSymbol("line",dne);hn.registerSymbol("plus",bLe);hn.registerSymbol("tick",yLe);hn.registerSymbol("circle",fne);hn.registerSymbol("point",cLe);hn.registerSymbol("bowtie",vLe);hn.registerSymbol("hexagon",gLe);hn.registerSymbol("square",fLe);hn.registerSymbol("diamond",dLe);hn.registerSymbol("triangle",hLe);hn.registerSymbol("triangle-down",pLe);hn.registerSymbol("line",dne);hn.registerSymbol("dot",hne);hn.registerSymbol("dash",wLe);hn.registerSymbol("smooth",_Le);hn.registerSymbol("hv",SLe);hn.registerSymbol("vh",ELe);hn.registerSymbol("hvh",OLe);hn.registerSymbol("vhv",kLe);var CLe=function(t){ge(e,t);function e(n){var r=this,i=n.style,a=oi(n,["style"]);return r=t.call(this,me({},{type:"column"},we({style:i},a)))||this,r.columnsGroup=new fr({name:"columns"}),r.appendChild(r.columnsGroup),r.render(),r}return e.prototype.render=function(){var n=this.attributes,r=n.columns,i=n.x,a=n.y;this.columnsGroup.style.transform="translate(".concat(i,", ").concat(a,")"),Ye(this.columnsGroup).selectAll(".column").data(r.flat()).join(function(o){return o.append("rect").attr("className","column").each(function(s){this.attr(s)})},function(o){return o.each(function(s){this.attr(s)})},function(o){return o.remove()})},e.prototype.update=function(n){this.attr(li({},this.attributes,n)),this.render()},e.prototype.clear=function(){this.removeChildren()},e}(Un),PLe=function(t){ge(e,t);function e(n){var r=this,i=n.style,a=oi(n,["style"]);return r=t.call(this,me({},{type:"lines"},we({style:i},a)))||this,r.linesGroup=r.appendChild(new fr),r.areasGroup=r.appendChild(new fr),r.render(),r}return e.prototype.render=function(){var n=this.attributes,r=n.lines,i=n.areas,a=n.x,o=n.y;this.style.transform="translate(".concat(a,", ").concat(o,")"),r&&this.renderLines(r),i&&this.renderAreas(i)},e.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},e.prototype.update=function(n){this.attr(li({},this.attributes,n)),this.render()},e.prototype.renderLines=function(n){Ye(this.linesGroup).selectAll(".line").data(n).join(function(r){return r.append("path").attr("className","line").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.attr(i)})},function(r){return r.remove()})},e.prototype.renderAreas=function(n){Ye(this.linesGroup).selectAll(".area").data(n).join(function(r){return r.append("path").attr("className","area").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.style(i)})},function(r){return r.remove()})},e}(Un);function DLe(t,e){var n,r=e.x,i=e.y,a=te(i.getOptions().range||[0,0],2),o=a[0],s=a[1];return s>o&&(n=te([o,s],2),s=n[0],o=n[1]),t.map(function(l){var u=l.map(function(c,f){return[r.map(f),jn(i.map(c),s,o)]});return u})}function G0(t,e){e===void 0&&(e=!1);var n=e?t.length-1:0,r=t.map(function(i,a){return tt([a===n?"M":"L"],te(i),!1)});return e?r.reverse():r}function Kb(t,e){if(e===void 0&&(e=!1),t.length<=2)return G0(t);for(var n=[],r=t.length,i=0;i<r;i+=1){var a=e?t[r-i-1]:t[i];br(a,n.slice(-2))||n.push.apply(n,tt([],te(a),!1))}var o=UIe(n,!1);return e?o.unshift(tt(["M"],te(t[r-1]),!1)):o.unshift(tt(["M"],te(t[0]),!1)),o}function DL(t,e,n){var r=vc(t);return r.push(["L",e,n],["L",0,n],["Z"]),r}function ILe(t,e,n,r){return t.map(function(i){return DL(e?Kb(i):G0(i),n,r)})}function LLe(t,e,n){for(var r=[],i=t.length-1;i>=0;i-=1){var a=t[i],o=G0(a),s=void 0;if(i===0)s=DL(o,e,n);else{var l=t[i-1],u=G0(l,!0);u[0][0]="L",s=tt(tt(tt([],te(o),!1),te(u),!1),[["Z"]],!1)}r.push(s)}return r}function RLe(t,e,n){for(var r=[],i=t.length-1;i>=0;i-=1){var a=t[i],o=Kb(a),s=void 0;if(i===0)s=DL(o,e,n);else{var l=t[i-1],u=Kb(l,!0),c=a[0];u[0][0]="L",s=tt(tt(tt([],te(o),!1),te(u),!1),[tt(["M"],te(c),!1),["Z"]],!1)}r.push(s)}return r}function b7(t){return t.length===0?[0,0]:[wb(zOe(t,function(e){return wb(e)||0})),xb(FOe(t,function(e){return xb(e)||0}))]}function x7(t){for(var e=vc(t),n=e[0].length,r=te([Array(n).fill(0),Array(n).fill(0)],2),i=r[0],a=r[1],o=0;o<e.length;o+=1)for(var s=e[o],l=0;l<n;l+=1)s[l]>=0?(s[l]+=i[l],i[l]=s[l]):(s[l]+=a[l],a[l]=s[l]);return e}var NLe=function(t){ge(e,t);function e(n){return t.call(this,n,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(e.prototype,"rawData",{get:function(){var n=this.attributes.data;if(!n||(n==null?void 0:n.length)===0)return[[]];var r=vc(n);return je(r[0])?[r]:r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.isStack?x7(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseline",{get:function(){var n=this.scales.y,r=te(n.getOptions().domain||[0,0],2),i=r[0],a=r[1];return a<0?n.map(a):n.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerShape",{get:function(){var n=this.attributes,r=n.width,i=n.height;return{width:r,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linesStyle",{get:function(){var n=this,r=this.attributes,i=r.type,a=r.isStack,o=r.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var s=ft(this.attributes,"area"),l=ft(this.attributes,"line"),u=this.containerShape.width,c=this.data;if(c[0].length===0)return{lines:[],areas:[]};var f=this.scales,d=f.x,h=f.y,p=DLe(c,{type:"line",x:d,y:h}),g=[];{var v=this.baseline;a?g=o?RLe(p,u,v):LLe(p,u,v):g=ILe(p,o,u,v)}return{lines:p.map(function(m,y){return we({stroke:n.getColor(y),d:o?Kb(m):G0(m)},l)}),areas:g.map(function(m,y){return we({d:m,fill:n.getColor(y)},s)})}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnsStyle",{get:function(){var n=this,r=ft(this.attributes,"column"),i=this.attributes,a=i.isStack,o=i.type,s=i.scale;if(o!=="column")throw new Error("columnsStyle can only be used in column type");var l=this.containerShape.height,u=this.rawData;if(!u)return{columns:[]};a&&(u=x7(u));var c=this.createScales(u),f=c.x,d=c.y,h=te(b7(u),2),p=h[0],g=h[1],v=new Gn({domain:[0,g-(p>0?0:p)],range:[0,l*s]}),m=f.getBandWidth(),y=this.rawData;return{columns:u.map(function(b,x){return b.map(function(w,_){var E=m/u.length,S=function(){return{x:f.map(_)+E*x,y:w>=0?d.map(w):d.map(0),width:E,height:v.map(Math.abs(w))}},O=function(){return{x:f.map(_),y:d.map(w),width:m,height:v.map(y[x][_])}};return we(we({fill:n.getColor(x)},r),a?O():S())})})}},enumerable:!1,configurable:!0}),e.prototype.render=function(n,r){tLe(r,".container","rect").attr("className","container").node();var i=n.type,a=n.x,o=n.y,s="spark".concat(i),l=we({x:a,y:o},i==="line"?this.linesStyle:this.columnsStyle);Ye(r).selectAll(".spark").data([i]).join(function(u){return u.append(function(c){return c==="line"?new PLe({className:s,style:l}):new CLe({className:s,style:l})}).attr("className","spark ".concat(s))},function(u){return u.update(l)},function(u){return u.remove()})},e.prototype.getColor=function(n){var r=this.attributes.color;return wi(r)?r[n%r.length]:Ue(r)?r.call(null,n):r},e.prototype.createScales=function(n){var r,i,a=this.attributes,o=a.type,s=a.scale,l=a.range,u=l===void 0?[]:l,c=a.spacing,f=this.containerShape,d=f.width,h=f.height,p=te(b7(n),2),g=p[0],v=p[1],m=new Gn({domain:[(r=u[0])!==null&&r!==void 0?r:g,(i=u[1])!==null&&i!==void 0?i:v],range:[h,h*(1-s)]});return o==="line"?{type:o,x:new Gn({domain:[0,n[0].length-1],range:[0,d]}),y:m}:{type:o,x:new Wh({domain:n[0].map(function(y,b){return b}),range:[0,d],paddingInner:c,paddingOuter:c/2,align:.5}),y:m}},e.tag="sparkline",e}(dr);function FLe(t){return typeof t=="boolean"?!1:"enter"in t&&"update"in t&&"exit"in t}function w7(t){if(!t)return{enter:!1,update:!1,exit:!1};var e=["enter","update","exit"],n=Object.fromEntries(Object.entries(t).filter(function(r){var i=te(r,1),a=i[0];return!e.includes(a)}));return Object.fromEntries(e.map(function(r){return FLe(t)?t[r]===!1?[r,!1]:[r,we(we({},t[r]),n)]:[r,n]}))}function Sp(t,e){t?t.finished.then(e):e()}function zLe(t,e){t.length===0?e():Promise.all(t.map(function(n){return n==null?void 0:n.finished})).then(e)}function pne(t,e){"update"in t?t.update(e):t.attr(e)}function gne(t,e,n){if(e.length===0)return null;if(!n){var r=e.slice(-1)[0];return pne(t,{style:r}),null}return t.animate(e,n)}function jLe(t,e){return!(t.nodeName!=="text"||e.nodeName!=="text"||t.attributes.text!==e.attributes.text)}function BLe(t,e,n,r){if(r===void 0&&(r="destroy"),jLe(t,e))return t.remove(),[null];var i=function(){r==="destroy"?t.destroy():r==="hide"&&Po(t),e.isVisible()&&_p(e)};if(!n)return i(),[null];var a=n.duration,o=a===void 0?0:a,s=n.delay,l=s===void 0?0:s,u=Math.ceil(+o/2),c=+o/4,f=te(t.getGeometryBounds().center,2),d=f[0],h=f[1],p=te(e.getGeometryBounds().center,2),g=p[0],v=p[1],m=te([(d+g)/2-d,(h+v)/2-h],2),y=m[0],b=m[1],x=t.style.opacity,w=x===void 0?1:x,_=e.style.opacity,E=_===void 0?1:_,S=t.style.transform||"",O=e.style.transform||"",A=t.animate([{opacity:w,transform:"translate(0, 0) ".concat(S)},{opacity:0,transform:"translate(".concat(y,", ").concat(b,") ").concat(S)}],we(we({fill:"both"},n),{duration:l+u+c})),T=e.animate([{opacity:0,transform:"translate(".concat(-y,", ").concat(-b,") ").concat(O),offset:.01},{opacity:E,transform:"translate(0, 0) ".concat(O)}],we(we({fill:"both"},n),{duration:u+c,delay:l+u-c}));return Sp(T,i),[A,T]}function xs(t,e,n){var r={},i={};return Object.entries(e).forEach(function(a){var o=te(a,2),s=o[0],l=o[1];if(!lt(l)){var u=t.style[s]||t.parsedStyle[s]||0;u!==l&&(r[s]=u,i[s]=l)}}),n?gne(t,[r,i],we({fill:"both"},n)):(pne(t,i),null)}function q2(t,e){return t.style.opacity||(t.style.opacity=1),xs(t,{opacity:0},e)}var vne={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},mne={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},yne={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},js=Xo({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),ju=Xo({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),$Le=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r){var i=n.x,a=n.y,o=n.size,s=o===void 0?10:o,l=n.radius,u=l===void 0?s/4:l,c=n.orientation,f=oi(n,["x","y","size","radius","orientation"]),d=s,h=d*2.4,p=Ye(r).maybeAppendByClassName(ju.iconRect,"rect").styles(we(we({},f),{width:d,height:h,radius:u,x:i-d/2,y:a-h/2,transformOrigin:"center"})),g=i+1/3*d-d/2,v=i+2/3*d-d/2,m=a+1/4*h-h/2,y=a+3/4*h-h/2;p.maybeAppendByClassName("".concat(ju.iconLine,"-1"),"line").styles(we({x1:g,x2:g,y1:m,y2:y},f)),p.maybeAppendByClassName("".concat(ju.iconLine,"-2"),"line").styles(we({x1:v,x2:v,y1:m,y2:y},f)),c==="vertical"&&(p.node().style.transform="rotate(90)")},e}(dr),bne=function(t){ge(e,t);function e(n){return t.call(this,n,yne)||this}return e.prototype.renderLabel=function(n){var r=this,i=this.attributes,a=i.x,o=i.y,s=i.showLabel,l=ft(this.attributes,"label"),u=l.x,c=u===void 0?0:u,f=l.y,d=f===void 0?0:f,h=l.transform,p=l.transformOrigin,g=oi(l,["x","y","transform","transformOrigin"]),v=te(uu(g,[]),2),m=v[0],y=v[1],b=Ye(n).maybeAppendByClassName(ju.labelGroup,"g").styles(y),x=we(we({},mne),m),w=x.text,_=oi(x,["text"]);Na(!!s,b,function(E){r.label=E.maybeAppendByClassName(ju.label,"text").styles(we(we({},_),{x:a+c,y:o+d,transform:h,transformOrigin:p,text:"".concat(w)})),r.label.on("mousedown",function(S){S.stopPropagation()}),r.label.on("touchstart",function(S){S.stopPropagation()})})},e.prototype.renderIcon=function(n){var r=this.attributes,i=r.x,a=r.y,o=r.orientation,s=r.type,l=we(we({x:i,y:a,orientation:o},vne),ft(this.attributes,"icon")),u=this.attributes.iconShape,c=u===void 0?function(){return new $Le({style:l})}:u,f=Ye(n).maybeAppendByClassName(ju.iconGroup,"g");f.selectAll(ju.icon.class).data([c]).join(function(d){return d.append(typeof c=="string"?c:function(){return c(s)}).attr("className",ju.icon.name)},function(d){return d.update(l)},function(d){return d.remove()})},e.prototype.render=function(n,r){this.renderIcon(r),this.renderLabel(r)},e}(dr),IL=function(t){ge(e,t);function e(n){var r=t.call(this,n,we(we(we({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},Us(yne,"handle")),Us(vne,"handleIcon")),Us(mne,"handleLabel")))||this;return r.range=[0,1],r.onDragStart=function(i){return function(a){a.stopPropagation(),r.target=i,r.prevPos=r.getOrientVal(Zb(a));var o=r.availableSpace,s=o.x,l=o.y,u=r.getBBox(),c=u.x,f=u.y;r.selectionStartPos=r.getRatio(r.prevPos-r.getOrientVal([s,l])-r.getOrientVal([+c,+f])),r.selectionWidth=0,document.addEventListener("pointermove",r.onDragging),document.addEventListener("pointerup",r.onDragEnd)}},r.onDragging=function(i){var a=r.attributes,o=a.slidable,s=a.brushable,l=a.type;i.stopPropagation();var u=r.getOrientVal(Zb(i)),c=u-r.prevPos;if(c){var f=r.getRatio(c);switch(r.target){case"start":o&&r.setValuesOffset(f);break;case"end":o&&r.setValuesOffset(0,f);break;case"selection":o&&r.setValuesOffset(f,f);break;case"track":if(!s)return;r.selectionWidth+=f,l==="range"?r.innerSetValues([r.selectionStartPos,r.selectionStartPos+r.selectionWidth].sort(),!0):r.innerSetValues([0,r.selectionStartPos+r.selectionWidth],!0);break}r.prevPos=u}},r.onDragEnd=function(){document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointerup",r.onDragEnd),r.target="",r.updateHandlesPosition(!1)},r.onValueChange=function(i){var a=r.attributes,o=a.onChange,s=a.type,l=s==="range"?i:i[1],u=s==="range"?r.getValues():r.getValues()[1],c=new _n("valuechange",{detail:{oldValue:l,value:u}});r.dispatchEvent(c),o==null||o(u)},r.selectionStartPos=0,r.selectionWidth=0,r.prevPos=0,r.target="",r}return Object.defineProperty(e.prototype,"values",{get:function(){return this.attributes.values},set:function(n){this.attributes.values=this.clampValues(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparklineStyle",{get:function(){var n=this.attributes.orientation;if(n!=="horizontal")return null;var r=ft(this.attributes,"sparkline");return we(we({zIndex:0},this.availableSpace),r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var n=this.attributes,r=n.trackLength,i=n.trackSize,a=te(this.getOrientVal([[r,i],[i,r]]),2),o=a[0],s=a[1];return{width:o,height:s}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var n=this.attributes;n.x,n.y;var r=n.padding,i=te($r(r),4),a=i[0],o=i[1],s=i[2],l=i[3],u=this.shape,c=u.width,f=u.height;return{x:l,y:a,width:c-(l+o),height:f-(a+s)}},enumerable:!1,configurable:!0}),e.prototype.getValues=function(){return this.values},e.prototype.setValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1),this.attributes.values=n;var i=r===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},e.prototype.updateSelectionArea=function(n){var r=this.calcSelectionArea();this.foregroundGroup.selectAll(js.selection.class).each(function(i,a){xs(this,r[a],n)})},e.prototype.updateHandlesPosition=function(n){this.attributes.showHandle&&(this.startHandle&&xs(this.startHandle,this.getHandleStyle("start"),n),this.endHandle&&xs(this.endHandle,this.getHandleStyle("end"),n))},e.prototype.innerSetValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1);var i=this.values,a=this.clampValues(n);this.attributes.values=a,this.setValues(a),r&&this.onValueChange(i)},e.prototype.renderTrack=function(n){var r=this.attributes,i=r.x,a=r.y,o=ft(this.attributes,"track");this.trackShape=Ye(n).maybeAppendByClassName(js.track,"rect").styles(we(we({x:i,y:a},this.shape),o))},e.prototype.renderBrushArea=function(n){var r=this.attributes,i=r.x,a=r.y,o=r.brushable;this.brushArea=Ye(n).maybeAppendByClassName(js.brushArea,"rect").styles(we({x:i,y:a,fill:"transparent",cursor:o?"crosshair":"default"},this.shape))},e.prototype.renderSparkline=function(n){var r=this,i=this.attributes,a=i.x,o=i.y,s=i.orientation,l=Ye(n).maybeAppendByClassName(js.sparklineGroup,"g");Na(s==="horizontal",l,function(u){var c=we(we({},r.sparklineStyle),{x:a,y:o});u.maybeAppendByClassName(js.sparkline,function(){return new NLe({style:c})}).update(c)})},e.prototype.renderHandles=function(){var n=this,r,i=this.attributes,a=i.showHandle,o=i.type,s=o==="range"?["start","end"]:["end"],l=a?s:[],u=this;(r=this.foregroundGroup)===null||r===void 0||r.selectAll(js.handle.class).data(l.map(function(c){return{type:c}}),function(c){return c.type}).join(function(c){return c.append(function(f){var d=f.type;return new bne({style:n.getHandleStyle(d)})}).each(function(f){var d=f.type;this.attr("class","".concat(js.handle.name," ").concat(d,"-handle"));var h="".concat(d,"Handle");u[h]=this,this.addEventListener("pointerdown",u.onDragStart(d))})},function(c){return c.each(function(f){var d=f.type;this.update(u.getHandleStyle(d))})},function(c){return c.each(function(f){var d=f.type,h="".concat(d,"Handle");u[h]=void 0}).remove()})},e.prototype.renderSelection=function(n){var r=this.attributes,i=r.x,a=r.y,o=r.type,s=r.selectionType;this.foregroundGroup=Ye(n).maybeAppendByClassName(js.foreground,"g");var l=ft(this.attributes,"selection"),u=function(f){return f.style("visibility",function(d){return d.show?"visible":"hidden"}).style("cursor",function(d){return s==="select"?"grab":s==="invert"?"crosshair":"default"}).styles(we(we({},l),{transform:"translate(".concat(i,", ").concat(a,")")}))},c=this;this.foregroundGroup.selectAll(js.selection.class).data(o==="value"?[]:this.calcSelectionArea().map(function(f,d){return{style:we({},f),index:d,show:s==="select"?d===1:d!==1}}),function(f){return f.index}).join(function(f){return f.append("rect").attr("className",js.selection.name).call(u).each(function(d,h){var p=this;h===1?(c.selectionShape=Ye(this),this.on("pointerdown",function(g){p.attr("cursor","grabbing"),c.onDragStart("selection")(g)}),c.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),c.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),c.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){p.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){p.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){p.attr("cursor","pointer")})):this.on("pointerdown",c.onDragStart("track"))})},function(f){return f.call(u)},function(f){return f.remove()}),this.updateSelectionArea(!1),this.renderHandles()},e.prototype.render=function(n,r){this.renderTrack(r),this.renderSparkline(r),this.renderBrushArea(r),this.renderSelection(r)},e.prototype.clampValues=function(n,r){var i;r===void 0&&(r=4);var a=te(this.range,2),o=a[0],s=a[1],l=te(this.getValues().map(function(v){return oP(v,r)}),2),u=l[0],c=l[1],f=Array.isArray(n)?n:[u,n??c],d=te((f||[u,c]).map(function(v){return oP(v,r)}),2),h=d[0],p=d[1];if(this.attributes.type==="value")return[0,jn(p,o,s)];h>p&&(i=te([p,h],2),h=i[0],p=i[1]);var g=p-h;return g>s-o?[o,s]:h<o?u===o&&c===p?[o,p]:[o,g+o]:p>s?c===s&&u===h?[h,s]:[s-g,s]:[h,p]},e.prototype.calcSelectionArea=function(n){var r=te(this.clampValues(n),2),i=r[0],a=r[1],o=this.availableSpace,s=o.x,l=o.y,u=o.width,c=o.height;return this.getOrientVal([[{y:l,height:c,x:s,width:i*u},{y:l,height:c,x:i*u+s,width:(a-i)*u},{y:l,height:c,x:a*u,width:(1-a)*u}],[{x:s,width:u,y:l,height:i*c},{x:s,width:u,y:i*c+l,height:(a-i)*c},{x:s,width:u,y:a*c,height:(1-a)*c}]])},e.prototype.calcHandlePosition=function(n){var r=this.attributes.handleIconOffset,i=this.availableSpace,a=i.x,o=i.y,s=i.width,l=i.height,u=te(this.clampValues(),2),c=u[0],f=u[1],d=n==="start"?-r:r,h=(n==="start"?c:f)*this.getOrientVal([s,l])+d;return{x:a+this.getOrientVal([h,s/2]),y:o+this.getOrientVal([l/2,h])}},e.prototype.inferTextStyle=function(n){var r=this.attributes.orientation;return r==="horizontal"?{}:n==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:n==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},e.prototype.calcHandleText=function(n){var r,i=this.attributes,a=i.type,o=i.orientation,s=i.formatter,l=i.autoFitLabel,u=ft(this.attributes,"handle"),c=ft(u,"label"),f=u.spacing,d=this.getHandleSize(),h=this.clampValues(),p=n==="start"?h[0]:h[1],g=s(p),v=new TL({style:we(we(we({},c),this.inferTextStyle(n)),{text:g})}),m=v.getBBox(),y=m.width,b=m.height;if(v.destroy(),!l){if(a==="value")return{text:g,x:0,y:-b-f};var x=f+d+(o==="horizontal"?y/2:0);return r={text:g},r[o==="horizontal"?"x":"y"]=n==="start"?-x:x,r}var w=0,_=0,E=this.availableSpace,S=E.width,O=E.height,A=this.calcSelectionArea()[1],T=A.x,I=A.y,D=A.width,R=A.height,F=f+d;if(o==="horizontal"){var z=F+y/2;if(n==="start"){var N=T-F-y;w=N>0?-z:z}else{var L=S-T-D-F>y;w=L?z:-z}}else{var B=F,$=b+F;n==="start"?_=I-d>b?-$:B:_=O-(I+R)-d>b?$:-B}return{x:w,y:_,text:g}},e.prototype.getHandleLabelStyle=function(n){var r=ft(this.attributes,"handleLabel");return we(we(we({},r),this.calcHandleText(n)),this.inferTextStyle(n))},e.prototype.getHandleIconStyle=function(){var n=this.attributes.handleIconShape,r=ft(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),a=this.getHandleSize();return we({cursor:i,shape:n,size:a},r)},e.prototype.getHandleStyle=function(n){var r=this.attributes,i=r.x,a=r.y,o=r.showLabel,s=r.showLabelOnInteraction,l=r.orientation,u=this.calcHandlePosition(n),c=u.x,f=u.y,d=this.calcHandleText(n),h=o;return!o&&s&&(this.target?h=!0:h=!1),we(we(we({},Us(this.getHandleIconStyle(),"icon")),Us(we(we({},this.getHandleLabelStyle(n)),d),"label")),{transform:"translate(".concat(c+i,", ").concat(f+a,")"),orientation:l,showLabel:h,type:n,zIndex:3})},e.prototype.getHandleSize=function(){var n=this.attributes,r=n.handleIconSize,i=n.width,a=n.height;return r||Math.floor((this.getOrientVal([+a,+i])+4)/2.4)},e.prototype.getOrientVal=function(n){var r=te(n,2),i=r[0],a=r[1],o=this.attributes.orientation;return o==="horizontal"?i:a},e.prototype.setValuesOffset=function(n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var a=this.attributes.type,o=te(this.getValues(),2),s=o[0],l=o[1],u=a==="range"?n:0,c=[s+u,l+r].sort();i?this.setValues(c):this.innerSetValues(c,!0)},e.prototype.getRatio=function(n){var r=this.availableSpace,i=r.width,a=r.height;return n/this.getOrientVal([i,a])},e.prototype.dispatchCustomEvent=function(n,r,i){var a=this;n.on(r,function(o){o.stopPropagation(),a.dispatchEvent(new _n(i,{detail:o}))})},e.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var n=this.brushArea;this.dispatchCustomEvent(n,"click","trackClick"),this.dispatchCustomEvent(n,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(n,"pointerleave","trackMouseleave"),n.on("pointerdown",this.onDragStart("track"))},e.prototype.onScroll=function(n){var r=this.attributes.scrollable;if(r){var i=n.deltaX,a=n.deltaY,o=a||i,s=this.getRatio(o);this.setValuesOffset(s,s,!0)}},e.tag="slider",e}(dr),VLe=function(t){ge(e,t);function e(n){var r=t.call(this,n,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return r.range=[0,1],r.onValueChange=function(i){var a=r.attributes.value;if(i!==a){var o={detail:{oldValue:i,value:a}};r.dispatchEvent(new _n("scroll",o)),r.dispatchEvent(new _n("valuechange",o))}},r.onTrackClick=function(i){var a=r.attributes.slidable;if(a){var o=te(r.getLocalPosition(),2),s=o[0],l=o[1],u=te(r.padding,4),c=u[0],f=u[3],d=r.getOrientVal([s+f,l+c]),h=r.getOrientVal(Zb(i)),p=(h-d)/r.trackLength;r.setValue(p,!0)}},r.onThumbMouseenter=function(i){r.dispatchEvent(new _n("thumbMouseenter",{detail:i.detail}))},r.onTrackMouseenter=function(i){r.dispatchEvent(new _n("trackMouseenter",{detail:i.detail}))},r.onThumbMouseleave=function(i){r.dispatchEvent(new _n("thumbMouseleave",{detail:i.detail}))},r.onTrackMouseleave=function(i){r.dispatchEvent(new _n("trackMouseleave",{detail:i.detail}))},r}return Object.defineProperty(e.prototype,"padding",{get:function(){var n=this.attributes.padding;return $r(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var n=this.attributes.value,r=te(this.range,2),i=r[0],a=r[1];return jn(n,i,a)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackLength",{get:function(){var n=this.attributes,r=n.viewportLength,i=n.trackLength,a=i===void 0?r:i;return a},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var n=this.attributes.trackSize,r=this.trackLength,i=te(this.padding,4),a=i[0],o=i[1],s=i[2],l=i[3],u=te(this.getOrientVal([[r,n],[n,r]]),2),c=u[0],f=u[1];return{x:l,y:a,width:+c-(l+o),height:+f-(a+s)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.trackSize;return r?i/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.thumbRadius;if(!r)return 0;var a=this.availableSpace,o=a.width,s=a.height;return i||this.getOrientVal([s,o])/2},enumerable:!1,configurable:!0}),e.prototype.getValues=function(n){n===void 0&&(n=this.value);var r=this.attributes,i=r.viewportLength,a=r.contentLength,o=i/a,s=te(this.range,2),l=s[0],u=s[1],c=n*(u-l-o);return[c,c+o]},e.prototype.getValue=function(){return this.value},e.prototype.renderSlider=function(n){var r=this.attributes,i=r.x,a=r.y,o=r.orientation,s=r.trackSize,l=r.padding,u=r.slidable,c=ft(this.attributes,"track"),f=ft(this.attributes,"thumb"),d=we(we({x:i,y:a,brushable:!1,orientation:o,padding:l,selectionRadius:this.thumbRadius,showHandle:!1,slidable:u,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:s,values:this.getValues()},Us(c,"track")),Us(f,"selection"));this.slider=Ye(n).maybeAppendByClassName("scrollbar",function(){return new IL({style:d})}).update(d).node()},e.prototype.render=function(n,r){this.renderSlider(r)},e.prototype.setValue=function(n,r){r===void 0&&(r=!1);var i=this.attributes.value,a=te(this.range,2),o=a[0],s=a[1];this.slider.setValues(this.getValues(jn(n,o,s)),r),this.onValueChange(i)},e.prototype.bindEvents=function(){var n=this;this.slider.addEventListener("trackClick",function(r){r.stopPropagation(),n.onTrackClick(r.detail)}),this.onHover()},e.prototype.getOrientVal=function(n){var r=this.attributes.orientation;return r==="horizontal"?n[0]:n[1]},e.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},e.tag="scrollbar",e}(dr),LL={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new yr({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]};me({},LL,{style:{type:"arc"}});me({},LL,{style:{}});var Sn=Xo({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"),ep=Xo({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function xne(t){return t.reduce(function(e,n,r){return e.push(tt([r===0?"M":"L"],te(n),!1)),e},[])}function qLe(t,e,n){var r=e.connect,i=r===void 0?"line":r,a=e.center;if(i==="line")return xne(t);if(!a)return[];var o=W0(t[0],a),s=n?0:1;return t.reduce(function(l,u,c){return c===0?l.push(tt(["M"],te(u),!1)):l.push(tt(["A",o,o,0,0,s],te(u),!1)),l},[])}function sP(t,e,n){return e.type==="surround"?qLe(t,e,n):xne(t)}function WLe(t,e,n){var r=n.type,i=n.connect,a=n.center,o=n.closed,s=o?[["Z"]]:[],l=te([sP(t,n),sP(e.slice().reverse(),n,!0)],2),u=l[0],c=l[1],f=te([t[0],e.slice(-1)[0]],2),d=f[0],h=f[1],p=function(y,b){return[u,y,c,b,s].flat()};if(i==="line"||r==="surround")return p([tt(["L"],te(h),!1)],[tt(["L"],te(d),!1)]);if(!a)throw new Error("Arc grid need to specified center");var g=te([W0(h,a),W0(d,a)],2),v=g[0],m=g[1];return p([tt(["A",v,v,0,0,1],te(h),!1),tt(["L"],te(h),!1)],[tt(["A",m,m,0,0,0],te(d),!1),tt(["L"],te(d),!1)])}function GLe(t,e,n,r){var i=n.animate,a=n.isBillboard,o=e.map(function(s,l){return{id:s.id||"grid-line-".concat(l),d:sP(s.points,n)}});return t.selectAll(ep.line.class).data(o,function(s){return s.id}).join(function(s){return s.append("path").each(function(l,u){var c=ho(g7(we({d:l.d},r)),[l,u,o]);this.attr(we({class:ep.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:a},c))})},function(s){return s.transition(function(l,u){var c=ho(g7(we({d:l.d},r)),[l,u,o]);return xs(this,c,i.update)})},function(s){return s.transition(function(){var l=this,u=q2(this,i.exit);return Sp(u,function(){return l.remove()}),u})}).transitions()}function HLe(t,e,n){var r=n.animate,i=n.connect,a=n.areaFill;if(e.length<2||!a||!i)return[];for(var o=Array.isArray(a)?a:[a,"transparent"],s=function(p){return o[p%o.length]},l=[],u=0;u<e.length-1;u++){var c=te([e[u].points,e[u+1].points],2),f=c[0],d=c[1],h=WLe(f,d,n);l.push({d:h,fill:s(u)})}return t.selectAll(ep.region.class).data(l,function(p,g){return g}).join(function(p){return p.append("path").each(function(g,v){var m=ho(g,[g,v,l]);this.attr(m)}).attr("className",ep.region.name)},function(p){return p.transition(function(g,v){var m=ho(g,[g,v,l]);return xs(this,m,r.update)})},function(p){return p.transition(function(){var g=this,v=q2(this,r.exit);return Sp(v,function(){return g.remove()}),v})}).transitions()}function YLe(t){var e=t.data,n=e===void 0?[]:e,r=t.closed;return r?n.map(function(i){var a=i.points,o=te(a,1),s=o[0];return we(we({},i),{points:tt(tt([],te(a),!1),[s],!1)})}):n}var ULe=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r){n.type,n.center,n.areaFill,n.closed;var i=oi(n,["type","center","areaFill","closed"]),a=YLe(n),o=Ye(r).maybeAppendByClassName(ep.lineGroup,"g"),s=Ye(r).maybeAppendByClassName(ep.regionGroup,"g"),l=GLe(o,a,n,i),u=HLe(s,a,n);return tt(tt([],te(l),!1),te(u),!1)},e}(dr);function wne(t,e){return Object.fromEntries(Object.entries(t).map(function(n){var r=te(n,2),i=r[0],a=r[1];return[i,ho(a,e)]}))}function RL(t,e){return e&&Ue(e)?t.filter(e):t}function _ne(t,e){var n=e.startAngle,r=e.endAngle;return(r-n)*t+n}function W2(t,e){if(e.type==="linear"){var n=te(e.startPos,2),r=n[0],i=n[1],a=te(e.endPos,2),o=a[0],s=a[1],l=te([o-r,s-i],2),u=l[0],c=l[1];return une([u,c])}var f=Qh(_ne(t,e));return[-Math.sin(f),Math.cos(f)]}function NL(t,e,n){var r=W2(t,n);return HIe(r,e!=="positive")}function Yv(t,e){return NL(t,e.labelDirection,e)}function XLe(t,e){var n=te(e.startPos,2),r=n[0],i=n[1],a=te(e.endPos,2),o=a[0],s=a[1],l=te([o-r,s-i],2),u=l[0],c=l[1];return[r+u*t,i+c*t]}function ZLe(t,e){var n=e.radius,r=te(e.center,2),i=r[0],a=r[1],o=Qh(_ne(t,e));return[i+n*Math.cos(o),a+n*Math.sin(o)]}function G2(t,e){return e.type==="linear"?XLe(t,e):ZLe(t,e)}function FL(t){return W2(0,t)[1]===0}function Sne(t){return W2(0,t)[0]===0}function Ene(t,e){return e-t===360}function _7(t,e,n,r,i){var a=e-t,o=te([i,i],2),s=o[0],l=o[1],u=te([Qh(t),Qh(e)],2),c=u[0],f=u[1],d=function(O){return[n+i*Math.cos(O),r+i*Math.sin(O)]},h=te(d(c),2),p=h[0],g=h[1],v=te(d(f),2),m=v[0],y=v[1];if(Ene(t,e)){var b=(f+c)/2,x=te(d(b),2),w=x[0],_=x[1];return[["M",p,g],["A",s,l,0,1,0,w,_],["A",s,l,0,1,0,m,y]]}var E=a>180?1:0,S=t>e?0:1;return"M".concat(p,",").concat(g,",A").concat(s,",").concat(l,",0,").concat(E,",").concat(S,",").concat(m,",").concat(y)}function KLe(t){var e=t.attributes,n=e.startAngle,r=e.endAngle,i=e.center,a=e.radius;return tt(tt([n,r],te(i),!1),[a],!1)}function JLe(t,e,n,r){var i=e.startAngle,a=e.endAngle,o=e.center,s=e.radius;return t.selectAll(Sn.line.class).data([{d:_7.apply(void 0,tt(tt([i,a],te(o),!1),[s],!1))}],function(l,u){return u}).join(function(l){return l.append("path").attr("className",Sn.line.name).styles(e).styles({d:function(u){return u.d}})},function(l){return l.transition(function(){var u=this,c=VIe(this,KLe(this),tt(tt([i,a],te(o),!1),[s],!1),r.update);if(c){var f=function(){var d=qt(u.attributes,"__keyframe_data__");u.style.d=_7.apply(void 0,tt([],te(d),!1))};c.onframe=f,c.onfinish=f}return c}).styles(e)},function(l){return l.remove()}).styles(n).transitions()}function QLe(t,e){e.truncRange,e.truncShape,e.lineExtension}function eRe(t,e,n){n===void 0&&(n=[0,0]);var r=te([t,e,n],3),i=te(r[0],2),a=i[0],o=i[1],s=te(r[1],2),l=s[0],u=s[1],c=te(r[2],2),f=c[0],d=c[1],h=te([l-a,u-o],2),p=h[0],g=h[1],v=Math.sqrt(Math.pow(p,2)+Math.pow(g,2)),m=te([-f/v,d/v],2),y=m[0],b=m[1];return[y*p,y*g,b*p,b*g]}function S7(t){var e=te(t,2),n=te(e[0],2),r=n[0],i=n[1],a=te(e[1],2),o=a[0],s=a[1];return{x1:r,y1:i,x2:o,y2:s}}function tRe(t,e,n,r){var i=e.showTrunc,a=e.startPos,o=e.endPos,s=e.truncRange,l=e.lineExtension,u=te([a,o],2),c=te(u[0],2),f=c[0],d=c[1],h=te(u[1],2),p=h[0],g=h[1],v=te(l?eRe(a,o,l):new Array(4).fill(0),4),m=v[0],y=v[1],b=v[2],x=v[3],w=function(L){return t.selectAll(Sn.line.class).data(L,function(B,$){return $}).join(function(B){return B.append("line").attr("className",function($){return"".concat(Sn.line.name," ").concat($.className)}).styles(n).transition(function($){return xs(this,S7($.line),!1)})},function(B){return B.styles(n).transition(function($){var G=$.line;return xs(this,S7(G),r.update)})},function(B){return B.remove()}).transitions()};if(!i||!s)return w([{line:[[f+m,d+y],[p+b,g+x]],className:Sn.line.name}]);var _=te(s,2),E=_[0],S=_[1],O=p-f,A=g-d,T=te([f+O*E,d+A*E],2),I=T[0],D=T[1],R=te([f+O*S,d+A*S],2),F=R[0],z=R[1],N=w([{line:[[f+m,d+y],[I,D]],className:Sn.lineFirst.name},{line:[[F,z],[p+b,g+x]],className:Sn.lineSecond.name}]);return QLe(t,e),N}function nRe(t,e,n,r){var i=n.showArrow,a=n.showTrunc,o=n.lineArrow,s=n.lineArrowOffset,l=n.lineArrowSize,u;if(e==="arc"?u=t.select(Sn.line.class):a?u=t.select(Sn.lineSecond.class):u=t.select(Sn.line.class),!i||!o||n.type==="arc"&&Ene(n.startAngle,n.endAngle)){var c=u.node();c&&(c.style.markerEnd=void 0);return}var f=lu(o);f.attr(r),CL(f,l),u.style("markerEnd",f).style("markerEndOffset",-s)}function rRe(t,e,n){var r=e.type,i,a=ft(e,"line");return r==="linear"?i=tRe(t,e,p7(a,"arrow"),n):i=JLe(t,e,p7(a,"arrow"),n),nRe(t,r,e,a),i}function iRe(t,e){return NL(t,e.gridDirection,e)}function One(t){var e=t.type,n=t.gridCenter;return e==="linear"?n:n||t.center}function aRe(t,e){var n=e.gridLength;return t.map(function(r,i){var a=r.value,o=te(G2(a,e),2),s=o[0],l=o[1],u=te(Vl(iRe(a,e),n),2),c=u[0],f=u[1];return{id:i,points:[[s,l],[s+c,l+f]]}})}function oRe(t,e){var n=e.gridControlAngles,r=One(e);if(!r)throw new Error("grid center is not provide");if(t.length<2)throw new Error("Invalid grid data");if(!n||n.length===0)throw new Error("Invalid gridControlAngles");var i=te(r,2),a=i[0],o=i[1];return t.map(function(s,l){var u=s.value,c=te(G2(u,e),2),f=c[0],d=c[1],h=te([f-a,d-o],2),p=h[0],g=h[1],v=[];return n.forEach(function(m){var y=Qh(m),b=te([Math.cos(y),Math.sin(y)],2),x=b[0],w=b[1],_=p*x-g*w+a,E=p*w+g*x+o;v.push([_,E])}),{points:v,id:l}})}function sRe(t,e,n,r){var i=ft(n,"grid"),a=i.type,o=i.areaFill,s=One(n),l=RL(e,n.gridFilter),u=a==="segment"?aRe(l,n):oRe(l,n),c=we(we({},i),{center:s,areaFill:Ue(o)?l.map(function(f,d){return ho(o,[f,d,l])}):o,animate:r,data:u});return t.selectAll(Sn.grid.class).data([1]).join(function(f){return f.append(function(){return new ULe({style:c})}).attr("className",Sn.grid.name)},function(f){return f.transition(function(){return this.update(c)})},function(f){return f.remove()}).transitions()}var lP=function(){function t(e,n,r,i){this.set(e,n,r,i)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),t.prototype.rotatedPoints=function(e,n,r){var i=this,a=i.x1,o=i.y1,s=i.x2,l=i.y2,u=Math.cos(e),c=Math.sin(e),f=n-n*u+r*c,d=r-n*c-r*u,h=[[u*a-c*l+f,c*a+u*l+d],[u*s-c*l+f,c*s+u*l+d],[u*a-c*o+f,c*a+u*o+d],[u*s-c*o+f,c*s+u*o+d]];return h},t.prototype.set=function(e,n,r,i){return r<e?(this.x2=e,this.x1=r):(this.x1=e,this.x2=r),i<n?(this.y2=n,this.y1=i):(this.y1=n,this.y2=i),this},t.prototype.defined=function(e){return this[e]!==Number.MAX_VALUE&&this[e]!==-Number.MAX_VALUE},t}();function uP(t,e){var n=t.getEulerAngles()||0;t.setEulerAngles(0);var r=t.getBounds(),i=te(r.min,2),a=i[0],o=i[1],s=te(r.max,2),l=s[0],u=s[1],c=t.getBBox(),f=c.width,d=c.height,h=d,p=0,g=0,v=a,m=o,y=sne(t);if(y){h-=1.5;var b=y.style.textAlign,x=y.style.textBaseline;b==="center"?v=(a+l)/2:(b==="right"||b==="end")&&(v=l),x==="middle"?m=(o+u)/2:x==="bottom"&&(m=u)}var w=te($r(e),4),_=w[0],E=_===void 0?0:_,S=w[1],O=S===void 0?0:S,A=w[2],T=A===void 0?E:A,I=w[3],D=I===void 0?O:I,R=new lP((p+=a)-D,(g+=o)-E,p+f+O,g+h+T);return t.setEulerAngles(n),R.rotatedPoints(Qh(n),v,m)}function Ag(t,e){return e[0]<=Math.max(t[0][0],t[1][0])&&e[0]<=Math.min(t[0][0],t[1][0])&&e[1]<=Math.max(t[0][1],t[1][1])&&e[1]<=Math.min(t[0][1],t[1][1])}function Tg(t,e,n){var r=(e[1]-t[1])*(n[0]-e[0])-(e[0]-t[0])*(n[1]-e[1]);return r===0?0:r<0?2:1}function lRe(t,e){var n=Tg(t[0],t[1],e[0]),r=Tg(t[0],t[1],e[1]),i=Tg(e[0],e[1],t[0]),a=Tg(e[0],e[1],t[1]);return!!(n!==r&&i!==a||n===0&&Ag(t,e[0])||r===0&&Ag(t,e[1])||i===0&&Ag(e,t[0])||a===0&&Ag(e,t[1]))}function uRe(t,e){var n=t.length;if(n<3)return!1;var r=[e,[9999,e[1]]],i=0,a=0;do{var o=[t[a],t[(a+1)%n]];if(lRe(o,r)){if(Tg(o[0],e,o[1])===0)return Ag(o,e);i++}a=(a+1)%n}while(a!==0);return!!(i&1)}function cRe(t,e){return e.every(function(n){return uRe(t,n)})}function fRe(t,e,n){var r=t.x1,i=t.x2,a=t.y1,o=t.y2,s=[[r,a],[i,a],[i,o],[r,o]],l=uP(e,n);return cRe(s,l)}function dRe(t,e){var n=te(t,4),r=n[0],i=n[1],a=n[2],o=n[3],s=te(e,4),l=s[0],u=s[1],c=s[2],f=s[3],d=a-r,h=o-i,p=c-l,g=f-u,v=d*g-p*h;if(v===0)return!1;var m=v>0,y=r-l,b=i-u,x=d*b-h*y;if(x<0===m)return!1;var w=p*b-g*y;return!(w<0===m||x>v===m||w>v===m)}function hRe(t,e){var n=[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]];return n.some(function(r){return dRe(e,r)})}function pRe(t,e,n){var r,i,a=uP(t,n).flat(1),o=uP(e,n).flat(1),s=[[a[0],a[1],a[2],a[3]],[a[0],a[1],a[4],a[5]],[a[4],a[5],a[6],a[7]],[a[2],a[3],a[6],a[7]]];try{for(var l=Ov(s),u=l.next();!u.done;u=l.next()){var c=u.value;if(hRe(o,c))return!0}}catch(f){r={error:f}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return!1}function gRe(t,e){var n=t.type,r=t.labelDirection,i=t.crossSize;if(!i)return!1;if(n==="arc"){var a=t.center,o=t.radius,s=te(a,2),l=s[0],u=s[1],c=r==="negative"?0:i,f=-o-c,d=o+c,h=te($r(e),4),p=h[0],g=h[1],v=h[2],m=h[3];return new lP(l+f-m,u+f-p,l+d+g,u+d+v)}var y=te(t.startPos,2),b=y[0],x=y[1],w=te(t.endPos,2),_=w[0],E=w[1],S=te(Sne(t)?[-e,0,e,0]:[0,e,0,-e],4),O=S[0],A=S[1],T=S[2],I=S[3],D=Yv(0,t),R=Vl(D,i),F=new lP(b,x,_,E);return F.x1+=I,F.y1+=O,F.x2+=A+R[0],F.y2+=T+R[1],F}function H2(t,e,n){var r,i,a=e.crossPadding,o=new Set,s=null,l=gRe(e,a),u=function(p){return l?fRe(l,p):!0},c=function(p,g){return!p||!p.firstChild?!0:!pRe(p.firstChild,g.firstChild,$r(n))};try{for(var f=Ov(t),d=f.next();!d.done;d=f.next()){var h=d.value;u(h)?!s||c(s,h)?s=h:(o.add(s),o.add(h)):o.add(h)}}catch(p){r={error:p}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return Array.from(o)}function kE(t,e){return e===void 0&&(e={}),lt(t)?0:typeof t=="number"?t:Math.floor(NIe(t,e))}function vRe(t,e,n,r){if(!(t.length<=0)){var i=e.suffix,a=i===void 0?"...":i,o=e.minLength,s=e.maxLength,l=s===void 0?1/0:s,u=e.step,c=u===void 0?" ":u,f=e.margin,d=f===void 0?[0,0,0,0]:f,h=one(r.getTextShape(t[0])),p=kE(c,h),g=o?kE(o,h):p,v=kE(l,h);(lt(v)||v===1/0)&&(v=Math.max.apply(null,t.map(function(_){return _.getBBox().width})));var m=t.slice(),y=te(d,4);y[0],y[1],y[2],y[3];for(var b=function(_){if(m.forEach(function(E){r.ellipsis(r.getTextShape(E),_,a)}),m=H2(t,n,d),m.length<1)return{value:void 0}},x=v;x>g+p;x-=p){var w=b(x);if(typeof w=="object")return w.value}}}var mRe={parity:function(t,e){var n=e.seq,r=n===void 0?2:n;return t.filter(function(i,a){return a%r?(Po(i),!1):!0})}},yRe=function(t){return t.filter(RIe)};function bRe(t,e,n,r){var i=t.length,a=e.keepHeader,o=e.keepTail;if(!(i<=1||i===2&&a&&o)){var s=mRe.parity,l=function(b){return b.forEach(r.show),b},u=2,c=t.slice(),f=t.slice(),d=Math.min.apply(Math,tt([1],te(t.map(function(b){return b.getBBox().width})),!1));if(n.type==="linear"&&(FL(n)||Sne(n))){var h=v7(t[0]).left,p=v7(t[i-1]).right,g=Math.abs(p-h)||1;u=Math.max(Math.floor(i*d/g),u)}var v,m;for(a&&(v=c.splice(0,1)[0]),o&&(m=c.splice(-1,1)[0],c.reverse()),l(c);u<t.length&&H2(yRe(m?tt(tt([m],te(f),!1),[v],!1):tt([v],te(f),!1)),n,e==null?void 0:e.margin).length;){if(m&&!v&&u%2===0){var y=c.splice(0,1);y.forEach(r.hide)}else if(m&&v){var y=c.splice(0,1);y.forEach(r.hide)}f=s(l(c),{seq:u}),u++}}}function xRe(t,e,n,r){var i,a,o=e.optionalAngles,s=o===void 0?[0,45,90]:o,l=e.margin,u=e.recoverWhenFailed,c=u===void 0?!0:u,f=t.map(function(m){return m.getLocalEulerAngles()}),d=function(){return H2(t,n,l).length<1},h=function(m){return t.forEach(function(y,b){var x=Array.isArray(m)?m[b]:m;r.rotate(y,+x)})};try{for(var p=Ov(s),g=p.next();!g.done;g=p.next()){var v=g.value;if(h(v),d())return}}catch(m){i={error:m}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}c&&h(f)}function wRe(t){var e=t.type,n=t.labelDirection;return e==="linear"&&FL(t)?n==="negative"?"bottom":"top":"middle"}function _Re(t,e,n,r,i){var a,o=e.maxLines,s=o===void 0?3:o,l=e.recoverWhenFailed,u=l===void 0?!0:l,c=e.margin,f=c===void 0?[0,0,0,0]:c,d=ho((a=e.wordWrapWidth)!==null&&a!==void 0?a:50,[i]),h=t.map(function(b){return b.attr("maxLines")||1}),p=Math.min.apply(Math,tt([],te(h),!1)),g=function(){return H2(t,n,f).length<1},v=wRe(n),m=function(b){return t.forEach(function(x,w){var _=Array.isArray(b)?b[w]:b;r.wrap(x,d,_,v)})};if(!(p>s)){if(n.type==="linear"&&FL(n)){if(m(s),g())return}else for(var y=p;y<=s;y++)if(m(y),g())return;u&&m(h)}}var SRe=new Map([["hide",bRe],["rotate",xRe],["ellipsis",vRe],["wrap",_Re]]);function ERe(t,e,n){return e.labelOverlap.length<1?!1:n==="hide"?!IIe(t[0]):n==="rotate"?!t.some(function(r){var i;return!!(!((i=r.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):n==="ellipsis"||n==="wrap"?t.filter(function(r){return r.querySelector("text")}).length>=1:!0}function ORe(t,e,n,r){var i=e.labelOverlap,a=i===void 0?[]:i;a.length&&a.forEach(function(o){var s=o.type,l=SRe.get(s);ERe(t,e,s)&&(l==null||l(t,o,e,r,n))})}function kRe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(r){return r==="positive"?-1:1};return t.reduce(function(r,i){return r*n(i)},1)}function E7(t){for(var e=t;e<0;)e+=360;return Math.round(e%360)}function cP(t,e){var n=te(t,2),r=n[0],i=n[1],a=te(e,2),o=a[0],s=a[1],l=te([r*o+i*s,r*s-i*o],2),u=l[0],c=l[1];return Math.atan2(c,u)}function ARe(t){var e=(t+360)%180;return zi(e,-90,90)||(e+=180),e}function TRe(t,e,n){var r,i=n.labelAlign,a=(r=e.style.transform)===null||r===void 0?void 0:r.includes("rotate");if(a)return e.getLocalEulerAngles();var o=0,s=Yv(t.value,n),l=W2(t.value,n);return i==="horizontal"?0:(i==="perpendicular"?o=cP([1,0],s):o=cP([l[0]<0?-1:1,0],l),ARe(ine(o)))}function kne(t,e,n){var r=n.type,i=n.labelAlign,a=Yv(t,n),o=E7(e),s=E7(ine(cP([1,0],a))),l="center",u="middle";return r==="linear"?[90,270].includes(s)&&o===0?(l="center",u=a[1]===1?"top":"bottom"):!(s%180)&&[90,270].includes(o)?l="center":s===0?(zi(o,0,90,!1,!0)||zi(o,0,90)||zi(o,270,360))&&(l="start"):s===90?zi(o,0,90,!1,!0)?l="start":(zi(o,90,180)||zi(o,270,360))&&(l="end"):s===270?zi(o,0,90,!1,!0)?l="end":(zi(o,90,180)||zi(o,270,360))&&(l="start"):s===180&&(o===90?l="start":(zi(o,0,90)||zi(o,270,360))&&(l="end")):i==="parallel"?zi(s,0,180,!0)?u="top":u="bottom":i==="horizontal"?zi(s,90,270,!1)?l="end":(zi(s,270,360,!1)||zi(s,0,90))&&(l="start"):i==="perpendicular"&&(zi(s,90,270)?l="end":l="start"),{textAlign:l,textBaseline:u}}function MRe(t,e,n){e.setLocalEulerAngles(t);var r=e.__data__.value,i=kne(r,t,n),a=e.querySelector(Sn.labelItem.class);a&&Ane(a,i)}function O7(t,e,n){var r=n.showTick,i=n.tickLength,a=n.tickDirection,o=n.labelDirection,s=n.labelSpacing,l=e.indexOf(t),u=ho(s,[t,l,e]),c=te([Yv(t.value,n),kRe(o,a)],2),f=c[0],d=c[1],h=d===1?ho(r?i:0,[t,l,e]):0,p=te(kg(Vl(f,u+h),G2(t.value,n)),2),g=p[0],v=p[1];return{x:g,y:v}}function CRe(t,e,n,r){var i=r.labelFormatter,a=Ue(i)?function(){return lu(ho(i,[t,e,n,Yv(t.value,r)]))}:function(){return lu(t.label||"")};return a}function Ane(t,e){t.nodeName==="text"&&t.attr(e)}function PRe(t,e){ORe(this.node().childNodes,t,e,{hide:Po,show:_p,rotate:function(n,r){MRe(+r,n,t)},ellipsis:function(n,r,i){n&&aP(n,r||1/0,i)},wrap:function(n,r,i){n&&FIe(n,r,i)},getTextShape:function(n){return n.querySelector("text")}})}function k7(t,e,n,r,i){var a=n.indexOf(e),o=Ye(t).append(CRe(e,a,n,i)).attr("className",Sn.labelItem.name).node(),s=te(uu(wne(r,[e,a,n])),2),l=s[0],u=s[1],c=u.transform,f=oi(u,["transform"]);cne(o,c);var d=TRe(e,o,i);return o.getLocalEulerAngles()||o.setLocalEulerAngles(d),Ane(o,we(we({},kne(e.value,d,i)),l)),t.attr(f),o}function DRe(t,e,n,r,i){var a=RL(e,n.labelFilter),o=ft(n,"label"),s,l=t.selectAll(Sn.label.class).data(a,function(u,c){return c}).join(function(u){return u.append("g").attr("className",Sn.label.name).transition(function(c){k7(this,c,e,o,n);var f=O7(c,e,n),d=f.x,h=f.y;return this.style.transform="translate(".concat(d,", ").concat(h,")"),null})},function(u){return u.transition(function(c){var f=this.querySelector(Sn.labelItem.class),d=k7(this,c,e,o,n),h=BLe(f,d,r.update),p=O7(c,e,n),g=p.x,v=p.y,m=xs(this,{transform:"translate(".concat(g,", ").concat(v,")")},r.update);return tt(tt([],te(h),!1),[m],!1)})},function(u){return s=u,u.transition(function(){var c=this,f=q2(this.childNodes[0],r.exit);return Sp(f,function(){return Ye(c).remove()}),f}),s}).transitions();return zLe(l,function(){PRe.call(t,n,i)}),l}function Tne(t,e){return NL(t,e.tickDirection,e)}function IRe(t,e){var n=te(t,2),r=n[0],i=n[1];return[[0,0],[r*e,i*e]]}function LRe(t,e,n,r,i){var a=i.tickLength,o=te(IRe(r,ho(a,[t,e,n])),2),s=te(o[0],2),l=s[0],u=s[1],c=te(o[1],2),f=c[0],d=c[1];return{x1:l,x2:f,y1:u,y2:d}}function RRe(t,e,n,r,i){var a=i.tickFormatter,o=Tne(e.value,i),s="line";return Ue(a)&&(s=function(){return ho(a,[e,n,r,o])}),t.append(s).attr("className",Sn.tickItem.name)}function NRe(t,e,n,r,i,a,o){var s=Tne(t.value,a),l=LRe(t,e,n,s,a),u=l.x1,c=l.x2,f=l.y1,d=l.y2,h=te(uu(wne(o,[t,e,n,s])),2),p=h[0],g=h[1];r.node().nodeName==="line"&&r.styles(we({x1:u,x2:c,y1:f,y2:d},p)),i.attr(g),r.styles(p)}function A7(t,e,n,r,i,a){var o=RRe(Ye(this),t,e,n,r);NRe(t,e,n,o,this,r,i);var s=te(G2(t.value,r),2),l=s[0],u=s[1];return xs(this,{transform:"translate(".concat(l,", ").concat(u,")")},a)}function FRe(t,e,n,r){var i=RL(e,n.tickFilter),a=ft(n,"tick");return t.selectAll(Sn.tick.class).data(i,function(o){return o.id||o.label}).join(function(o){return o.append("g").attr("className",Sn.tick.name).transition(function(s,l){return A7.call(this,s,l,i,n,a,!1)})},function(o){return o.transition(function(s,l){return this.removeChildren(),A7.call(this,s,l,i,n,a,r.update)})},function(o){return o.transition(function(){var s=this,l=q2(this.childNodes[0],r.exit);return Sp(l,function(){return s.remove()}),l})}).transitions()}var T7=Xo({text:"text"},"title");function Y2(t){return/\S+-\S+/g.test(t)?t.split("-").map(function(e){return e[0]}):t.length>2?[t[0]]:t.split("")}function zRe(t,e){var n=t.attributes,r=n.position,i=n.spacing,a=n.inset,o=n.text,s=t.getBBox(),l=e.getBBox(),u=Y2(r),c=te($r(o?i:0),4),f=c[0],d=c[1],h=c[2],p=c[3],g=te($r(a),4),v=g[0],m=g[1],y=g[2],b=g[3],x=te([p+d,f+h],2),w=x[0],_=x[1],E=te([b+m,v+y],2),S=E[0],O=E[1];if(u[0]==="l")return new Pn(s.x,s.y,l.width+s.width+w+S,Math.max(l.height+O,s.height));if(u[0]==="t")return new Pn(s.x,s.y,Math.max(l.width+S,s.width),l.height+s.height+_+O);var A=te([e.attributes.width||l.width,e.attributes.height||l.height],2),T=A[0],I=A[1];return new Pn(l.x,l.y,T+s.width+w+S,I+s.height+_+O)}function jRe(t,e){var n=Object.entries(e).reduce(function(r,i){var a=te(i,2),o=a[0],s=a[1],l=t.node().attr(o);return l||(r[o]=s),r},{});t.styles(n)}function BRe(t){var e,n,r,i,a=t,o=a.width,s=a.height,l=a.position,u=te([+o/2,+s/2],2),c=u[0],f=u[1],d=te([+c,+f,"center","middle"],4),h=d[0],p=d[1],g=d[2],v=d[3],m=Y2(l);return m.includes("l")&&(e=te([0,"start"],2),h=e[0],g=e[1]),m.includes("r")&&(n=te([+o,"end"],2),h=n[0],g=n[1]),m.includes("t")&&(r=te([0,"top"],2),p=r[0],v=r[1]),m.includes("b")&&(i=te([+s,"bottom"],2),p=i[0],v=i[1]),{x:h,y:p,textAlign:g,textBaseline:v}}var Mne=function(t){ge(e,t);function e(n){return t.call(this,n,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return e.prototype.getAvailableSpace=function(){var n=this,r=this.attributes,i=r.width,a=r.height,o=r.position,s=r.spacing,l=r.inset,u=n.querySelector(T7.text.class);if(!u)return new Pn(0,0,+i,+a);var c=u.getBBox(),f=c.width,d=c.height,h=te($r(s),4),p=h[0],g=h[1],v=h[2],m=h[3],y=te([0,0,+i,+a],4),b=y[0],x=y[1],w=y[2],_=y[3],E=Y2(o);if(E.includes("i"))return new Pn(b,x,w,_);E.forEach(function(z,N){var L,B,$,G;z==="t"&&(L=te(N===0?[d+v,+a-d-v]:[0,+a],2),x=L[0],_=L[1]),z==="r"&&(B=te([+i-f-m],1),w=B[0]),z==="b"&&($=te([+a-d-p],1),_=$[0]),z==="l"&&(G=te(N===0?[f+g,+i-f-g]:[0,+i],2),b=G[0],w=G[1])});var S=te($r(l),4),O=S[0],A=S[1],T=S[2],I=S[3],D=te([I+A,O+T],2),R=D[0],F=D[1];return new Pn(b+I,x+O,w-R,_-F)},e.prototype.getBBox=function(){return this.title?this.title.getBBox():new Pn(0,0,0,0)},e.prototype.render=function(n,r){var i=this;n.width,n.height,n.position,n.spacing;var a=oi(n,["width","height","position","spacing"]),o=te(uu(a),1),s=o[0],l=BRe(n),u=l.x,c=l.y,f=l.textAlign,d=l.textBaseline;Na(!!a.text,Ye(r),function(h){i.title=h.maybeAppendByClassName(T7.text,"text").styles(s).call(jRe,{x:u,y:c,textAlign:f,textBaseline:d}).node()})},e}(dr);function $Re(t,e,n){var r=n.titlePosition,i=r===void 0?"lb":r,a=n.titleSpacing,o=Y2(i),s=t.node().getLocalBounds(),l=te(s.min,2),u=l[0],c=l[1],f=te(s.halfExtents,2),d=f[0],h=f[1],p=te(e.node().getLocalBounds().halfExtents,2),g=p[0],v=p[1],m=te([u+d,c+h],2),y=m[0],b=m[1],x=te($r(a),4),w=x[0],_=x[1],E=x[2],S=x[3];if(["start","end"].includes(i)&&n.type==="linear"){var O=n.startPos,A=n.endPos,T=te(i==="start"?[O,A]:[A,O],2),I=T[0],D=T[1],R=une([-D[0]+I[0],-D[1]+I[1]]),F=te(Vl(R,w),2),z=F[0],N=F[1];return{x:I[0]+z,y:I[1]+N}}return o.includes("t")&&(b-=h+v+w),o.includes("r")&&(y+=d+g+_),o.includes("l")&&(y-=d+g+S),o.includes("b")&&(b+=h+v+E),{x:y,y:b}}function VRe(t,e,n){var r=t.getGeometryBounds().halfExtents,i=r[1]*2;if(e==="vertical"){if(n==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(n==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function M7(t,e,n,r,i){var a=ft(r,"title"),o=te(uu(a),2),s=o[0],l=o[1],u=l.transform,c=l.transformOrigin,f=oi(l,["transform","transformOrigin"]);e.styles(f);var d=u||VRe(t.node(),s.direction,s.position);t.styles(we(we({},s),{transformOrigin:c})),cne(t.node(),d);var h=$Re(Ye(n._offscreen||n.querySelector(Sn.mainGroup.class)),e,r),p=h.x,g=h.y,v=xs(e.node(),{transform:"translate(".concat(p,", ").concat(g,")")},i);return v}function qRe(t,e,n,r){var i=n.titleText;return t.selectAll(Sn.title.class).data([{title:i}].filter(function(a){return!!a.title}),function(a,o){return a.title}).join(function(a){return a.append(function(){return lu(i)}).attr("className",Sn.title.name).transition(function(){return M7(Ye(this),t,e,n,r.enter)})},function(a){return a.transition(function(){return M7(Ye(this),t,e,n,r.update)})},function(a){return a.remove()}).transitions()}function C7(t,e,n,r){var i=t.showLine,a=t.showTick,o=t.showLabel,s=e.maybeAppendByClassName(Sn.lineGroup,"g"),l=Na(i,s,function(h){return rRe(h,t,r)})||[],u=e.maybeAppendByClassName(Sn.tickGroup,"g"),c=Na(a,u,function(h){return FRe(h,n,t,r)})||[],f=e.maybeAppendByClassName(Sn.labelGroup,"g"),d=Na(o,f,function(h){return DRe(h,n,t,r,e.node())})||[];return tt(tt(tt([],te(l),!1),te(c),!1),te(d),!1).filter(function(h){return!!h})}var U2=function(t){ge(e,t);function e(n){return t.call(this,n,LL)||this}return e.prototype.render=function(n,r,i){var a=this,o=n.titleText,s=n.data,l=n.animate,u=n.showTitle,c=n.showGrid,f=n.dataThreshold,d=n.truncRange,h=KIe(s,f).filter(function(w){var _=w.value;return!(d&&_>d[0]&&_<d[1])}),p=w7(i===void 0?l:i),g=Ye(r).maybeAppendByClassName(Sn.gridGroup,"g"),v=Na(c,g,function(w){return sRe(w,h,n,p)})||[],m=Ye(r).maybeAppendByClassName(Sn.mainGroup,"g");o&&(!this.initialized&&p.enter||this.initialized&&p.update)&&C7(n,Ye(this.offscreenGroup),h,w7(!1));var y=C7(n,Ye(m.node()),h,p),b=Ye(r).maybeAppendByClassName(Sn.titleGroup,"g"),x=Na(u,b,function(w){return qRe(w,a,n,p)})||[];return tt(tt(tt([],te(v),!1),te(y),!1),te(x),!1).flat().filter(function(w){return!!w})},e}(dr),xo=Xo({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),WRe=function(t){ge(e,t);function e(n){var r=t.call(this,n,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:ALe(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,a){return"".concat(i,"/").concat(a)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return r.playState="idle",r.contentGroup=r.appendChild(new fr({class:xo.contentGroup.name})),r.playWindow=r.contentGroup.appendChild(new fr({class:xo.playWindow.name})),r.innerCurrPage=r.defaultPage,r}return Object.defineProperty(e.prototype,"defaultPage",{get:function(){var n=this.attributes.defaultPage;return jn(n,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageShape",{get:function(){var n=this.pageViews,r=te(lLe(n.map(function(f){var d=f.getBBox(),h=d.width,p=d.height;return[h,p]})).map(function(f){return Math.max.apply(Math,tt([],te(f),!1))}),2),i=r[0],a=r[1],o=this.attributes,s=o.pageWidth,l=s===void 0?i:s,u=o.pageHeight,c=u===void 0?a:u;return{pageWidth:l,pageHeight:c}},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(e.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=t.prototype.getBBox.call(this),r=n.x,i=n.y,a=this.controllerShape,o=this.pageShape,s=o.pageWidth,l=o.pageHeight;return new Pn(r,i,s+a.width,l)},e.prototype.goTo=function(n){var r=this,i=this.attributes.animate,a=this,o=a.currPage,s=a.playState,l=a.playWindow,u=a.pageViews;if(s!=="idle"||n<0||u.length<=0||n>=u.length)return null;u[o].setLocalPosition(0,0),this.prepareFollowingPage(n);var c=te(this.getFollowingPageDiff(n),2),f=c[0],d=c[1];this.playState="running";var h=gne(l,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-f,", ").concat(-d,")")}],i);return Sp(h,function(){r.innerCurrPage=n,r.playState="idle",r.setVisiblePages([n]),r.updatePageInfo()}),h},e.prototype.prev=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i<=0)return null;var a=n?(i-1+r)%r:jn(i-1,0,r);return this.goTo(a)},e.prototype.next=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i>=r-1)return null;var a=n?(i+1)%r:jn(i+1,0,r);return this.goTo(a)},e.prototype.renderClipPath=function(n){var r=this.pageShape,i=r.pageWidth,a=r.pageHeight;if(!i||!a){this.contentGroup.style.clipPath=void 0;return}this.clipPath=n.maybeAppendByClassName(xo.clipPath,"rect").styles({width:i,height:a}),this.contentGroup.attr("clipPath",this.clipPath.node())},e.prototype.setVisiblePages=function(n){this.playWindow.children.forEach(function(r,i){n.includes(i)?_p(r):Po(r)})},e.prototype.adjustControllerLayout=function(){var n=this,r=n.prevBtnGroup,i=n.nextBtnGroup,a=n.pageInfoGroup,o=this.attributes,s=o.orientation,l=o.controllerPadding,u=a.getBBox(),c=u.width;u.height;var f=te(s==="horizontal"?[-180,0]:[-90,90],2),d=f[0],h=f[1];r.setLocalEulerAngles(d),i.setLocalEulerAngles(h);var p=r.getBBox(),g=p.width,v=p.height,m=i.getBBox(),y=m.width,b=m.height,x=Math.max(g,c,y),w=s==="horizontal"?{offset:[[0,0],[g/2+l,0],[g+c+l*2,0]],textAlign:"start"}:{offset:[[x/2,-v-l],[x/2,0],[x/2,b+l]],textAlign:"center"},_=te(w.offset,3),E=te(_[0],2),S=E[0],O=E[1],A=te(_[1],2),T=A[0],I=A[1],D=te(_[2],2),R=D[0],F=D[1],z=w.textAlign,N=a.querySelector("text");N&&(N.style.textAlign=z),r.setLocalPosition(S,O),a.setLocalPosition(T,I),i.setLocalPosition(R,F)},e.prototype.updatePageInfo=function(){var n,r=this,i=r.currPage,a=r.pageViews,o=r.attributes.formatter;a.length<2||((n=this.pageInfoGroup.querySelector(xo.pageInfo.class))===null||n===void 0||n.attr("text",o(i+1,a.length)),this.adjustControllerLayout())},e.prototype.getFollowingPageDiff=function(n){var r=this.currPage;if(r===n)return[0,0];var i=this.attributes.orientation,a=this.pageShape,o=a.pageWidth,s=a.pageHeight,l=n<r?-1:1;return i==="horizontal"?[l*o,0]:[0,l*s]},e.prototype.prepareFollowingPage=function(n){var r=this,i=r.currPage,a=r.pageViews;if(this.setVisiblePages([n,i]),n!==i){var o=te(this.getFollowingPageDiff(n),2),s=o[0],l=o[1];a[n].setLocalPosition(s,l)}},e.prototype.renderController=function(n){var r=this,i=this.attributes.controllerSpacing,a=this.pageShape,o=a.pageWidth,s=a.pageHeight,l=this.pageViews.length>=2,u=n.maybeAppendByClassName(xo.controller,"g");if(V2(u.node(),l),!!l){var c=ft(this.attributes,"button"),f=ft(this.attributes,"pageNum"),d=te(uu(c),2),h=d[0],p=d[1],g=h.size,v=oi(h,["size"]),m=!u.select(xo.prevBtnGroup.class).node(),y=u.maybeAppendByClassName(xo.prevBtnGroup,"g").styles(p);this.prevBtnGroup=y.node();var b=y.maybeAppendByClassName(xo.prevBtn,"path"),x=u.maybeAppendByClassName(xo.nextBtnGroup,"g").styles(p);this.nextBtnGroup=x.node();var w=x.maybeAppendByClassName(xo.nextBtn,"path");[b,w].forEach(function(E){E.styles(we(we({},v),{transformOrigin:"center"})),CL(E.node(),g)});var _=u.maybeAppendByClassName(xo.pageInfoGroup,"g");this.pageInfoGroup=_.node(),_.maybeAppendByClassName(xo.pageInfo,"text").styles(f),this.updatePageInfo(),u.node().setLocalPosition(o+i,s/2),m&&(this.prevBtnGroup.addEventListener("click",function(){r.prev()}),this.nextBtnGroup.addEventListener("click",function(){r.next()}))}},e.prototype.render=function(n,r){var i=n.x,a=i===void 0?0:i,o=n.y,s=o===void 0?0:o;this.attr("transform","translate(".concat(a,", ").concat(s,")"));var l=Ye(r);this.renderClipPath(l),this.renderController(l),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},e.prototype.bindEvents=function(){var n=this,r=gp(function(){return n.render(n.attributes,n)},50);this.playWindow.addEventListener(Dt.INSERTED,r),this.playWindow.addEventListener(Dt.REMOVED,r)},e}(dr);function GRe(t,e,n){var r=Math.round((t-n)/e);return n+r*e}function HRe(t,e,n){var r=1.4,i=r*n;return[["M",t-n,e-i],["L",t+n,e-i],["L",t+n,e+i],["L",t-n,e+i],["Z"]]}var Cne=1.4,Pne=.4;function YRe(t,e,n){var r=n,i=r*Cne,a=r/2,o=r/6,s=t+i*Pne;return[["M",t,e],["L",s,e+a],["L",t+i,e+a],["L",t+i,e-a],["L",s,e-a],["Z"],["M",s,e+o],["L",t+i-2,e+o],["M",s,e-o],["L",t+i-2,e-o]]}function URe(t,e,n){var r=n,i=r*Cne,a=r/2,o=r/6,s=e+i*Pne;return[["M",t,e],["L",t-a,s],["L",t-a,e+i],["L",t+a,e+i],["L",t+a,s],["Z"],["M",t-o,s],["L",t-o,e+i-2],["M",t+o,s],["L",t+o,e+i-2]]}hn.registerSymbol("hiddenHandle",HRe);hn.registerSymbol("verticalHandle",YRe);hn.registerSymbol("horizontalHandle",URe);function XRe(t,e,n,r){var i,a=te(t,2),o=a[0],s=a[1],l=te(e,2),u=l[0],c=l[1],f=te(n,2),d=f[0],h=f[1],p=te([u,c],2),g=p[0],v=p[1],m=v-g;return g>v&&(i=te([v,g],2),g=i[0],v=i[1]),m>s-o?[o,s]:g<o?d===o&&h===v?[o,v]:[o,m+o]:v>s?h===s&&d===g?[g,s]:[s-m,s]:[g,v]}function il(t,e,n){return t===void 0&&(t="horizontal"),t==="horizontal"?e:n}var Ha=Xo({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");function ZRe(t){var e=t.querySelector(Ha.marker.class);return e?e.style:{}}var KRe=function(t){ge(e,t);function e(n){return t.call(this,n,{span:[1,1],marker:function(){return new $a({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Object.defineProperty(e.prototype,"showValue",{get:function(){var n=this.attributes.valueText;return n?typeof n=="string"||typeof n=="number"?n!=="":typeof n=="function"?!0:n.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualSpace",{get:function(){var n=this.labelGroup,r=this.valueGroup,i=this.attributes.markerSize,a=n.node().getBBox(),o=a.width,s=a.height,l=r.node().getBBox(),u=l.width,c=l.height;return{markerWidth:i,labelWidth:o,valueWidth:u,height:Math.max(i,s,c)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){var n=this.attributes.span;if(!n)return[1,1];var r=te($r(n),2),i=r[0],a=r[1],o=this.showValue?a:0,s=i+o;return[i/s,o/s]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var n,r=this.attributes,i=r.markerSize,a=r.width,o=this.actualSpace,s=o.markerWidth,l=o.height,u=this.actualSpace,c=u.labelWidth,f=u.valueWidth,d=te(this.spacing,2),h=d[0],p=d[1];if(a){var g=a-i-h-p,v=te(this.span,2),m=v[0],y=v[1];n=te([m*g,y*g],2),c=n[0],f=n[1]}var b=s+c+f+h+p;return{width:b,height:l,markerWidth:s,labelWidth:c,valueWidth:f}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){var n=this.attributes.spacing;if(!n)return[0,0];var r=te($r(n),2),i=r[0],a=r[1];return this.showValue?[i,a]:[i,0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){var n=this.shape,r=n.markerWidth,i=n.labelWidth,a=n.valueWidth,o=n.width,s=n.height,l=te(this.spacing,2),u=l[0],c=l[1];return{height:s,width:o,markerWidth:r,labelWidth:i,valueWidth:a,position:[r/2,r+u,r+i+u+c]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleSize",{get:function(){var n=ZRe(this.markerGroup.node()),r=this.attributes,i=r.markerSize,a=r.markerStrokeWidth,o=a===void 0?n.strokeWidth:a,s=r.markerLineWidth,l=s===void 0?n.lineWidth:s,u=r.markerStroke,c=u===void 0?n.stroke:u,f=+(o||l||(c?1:0))*Math.sqrt(2),d=this.markerGroup.node().getBBox(),h=d.width,p=d.height;return(1-f/Math.max(h,p))*i},enumerable:!1,configurable:!0}),e.prototype.renderMarker=function(n){var r=this,i=this.attributes.marker,a=ft(this.attributes,"marker");this.markerGroup=n.maybeAppendByClassName(Ha.markerGroup,"g").style("zIndex",0),Na(!!i,this.markerGroup,function(){var o,s=r.markerGroup.node(),l=(o=s.childNodes)===null||o===void 0?void 0:o[0],u=typeof i=="string"?new hn({style:{symbol:i},className:Ha.marker.name}):i();l?u.nodeName===l.nodeName?l instanceof hn?l.update(we(we({},a),{symbol:i})):(rLe(l,u),Ye(l).styles(a)):(l.remove(),Ye(u).attr("className",Ha.marker.name).styles(a),s.appendChild(u)):(u instanceof hn||Ye(u).attr("className",Ha.marker.name).styles(a),s.appendChild(u)),r.markerGroup.node().scale(1/r.markerGroup.node().getScale()[0]);var c=CL(r.markerGroup.node(),r.scaleSize);r.markerGroup.node().style._transform="scale(".concat(c,")")})},e.prototype.renderLabel=function(n){var r=ft(this.attributes,"label"),i=r.text,a=oi(r,["text"]);this.labelGroup=n.maybeAppendByClassName(Ha.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(Ha.label,function(){return lu(i)}).styles(a)},e.prototype.renderValue=function(n){var r=this,i=ft(this.attributes,"value"),a=i.text,o=oi(i,["text"]);this.valueGroup=n.maybeAppendByClassName(Ha.valueGroup,"g").style("zIndex",0),Na(this.showValue,this.valueGroup,function(){r.valueGroup.maybeAppendByClassName(Ha.value,function(){return lu(a)}).styles(o)})},e.prototype.renderBackground=function(n){var r=this.shape,i=r.width,a=r.height,o=ft(this.attributes,"background");this.background=n.maybeAppendByClassName(Ha.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(Ha.background,"rect").styles(we({width:i,height:a},o))},e.prototype.adjustLayout=function(){var n=this.layout,r=n.labelWidth,i=n.valueWidth,a=n.height,o=te(n.position,3),s=o[0],l=o[1],u=o[2],c=a/2;this.markerGroup.styles({transform:"translate(".concat(s,", ").concat(c,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(l,", ").concat(c,")")}),aP(this.labelGroup.select(Ha.label.class).node(),Math.ceil(r)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(u,", ").concat(c,")")}),aP(this.valueGroup.select(Ha.value.class).node(),Math.ceil(i)))},e.prototype.render=function(n,r){var i=Ye(r),a=n.x,o=a===void 0?0:a,s=n.y,l=s===void 0?0:s;i.styles({transform:"translate(".concat(o,", ").concat(l,")")}),this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.adjustLayout()},e}(dr),Kc=Xo({page:"item-page",navigator:"navigator",item:"item"},"items"),P7=function(t,e,n){return n===void 0&&(n=!0),t?e(t):n},JRe=function(t){ge(e,t);function e(n){var r=t.call(this,n,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:US,mouseenter:US,mouseleave:US})||this;return r.navigatorShape=[0,0],r}return Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){var n=this.attributes,r=n.gridRow,i=n.gridCol,a=n.data;if(!r&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return r&&i?[r,i]:r?[r,a.length]:[a.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderData",{get:function(){var n=this.attributes,r=n.data,i=n.layout,a=ft(this.attributes,"item"),o=r.map(function(s,l){var u=s.id,c=u===void 0?l:u,f=s.label,d=s.value;return{id:"".concat(c),index:l,style:we({layout:i,labelText:f,valueText:d},Object.fromEntries(Object.entries(a).map(function(h){var p=te(h,2),g=p[0],v=p[1];return[g,ho(v,[s,l,r])]})))}});return o},enumerable:!1,configurable:!0}),e.prototype.getGridLayout=function(){var n=this,r=this.attributes,i=r.orientation,a=r.width,o=r.rowPadding,s=r.colPadding,l=te(this.navigatorShape,1),u=l[0],c=te(this.grid,2),f=c[0],d=c[1],h=d*f,p=0;return this.pageViews.children.map(function(g,v){var m,y,b=Math.floor(v/h),x=v%h,w=n.ifHorizontal(d,f),_=[Math.floor(x/w),x%w];i==="vertical"&&_.reverse();var E=te(_,2),S=E[0],O=E[1],A=(a-u-(d-1)*s)/d,T=g.getBBox().height,I=te([0,0],2),D=I[0],R=I[1];return i==="horizontal"?(m=te([p,S*(T+o)],2),D=m[0],R=m[1],p=O===d-1?0:p+A+s):(y=te([O*(A+s),p],2),D=y[0],R=y[1],p=S===f-1?0:p+T+o),{page:b,index:v,row:S,col:O,pageIndex:x,width:A,height:T,x:D,y:R}})},e.prototype.getFlexLayout=function(){var n=this.attributes,r=n.width,i=n.height,a=n.rowPadding,o=n.colPadding,s=te(this.navigatorShape,1),l=s[0],u=te(this.grid,2),c=u[0],f=u[1],d=te([r-l,i],2),h=d[0],p=d[1],g=te([0,0,0,0,0,0,0,0],8),v=g[0],m=g[1],y=g[2],b=g[3],x=g[4],w=g[5],_=g[6],E=g[7];return this.pageViews.children.map(function(S,O){var A,T,I,D,R=S.getBBox(),F=R.width,z=R.height,N=_===0?0:o,L=_+N+F;if(L<=h&&P7(x,function($){return $<f}))return A=te([_+N,E,L],3),v=A[0],m=A[1],_=A[2],{width:F,height:z,x:v,y:m,page:y,index:O,pageIndex:b++,row:w,col:x++};T=te([w+1,0,0,E+z+a],4),w=T[0],x=T[1],_=T[2],E=T[3];var B=E+z;return B<=p&&P7(w,function($){return $<c})?(I=te([_,E,F],3),v=I[0],m=I[1],_=I[2],{width:F,height:z,x:v,y:m,page:y,index:O,pageIndex:b++,row:w,col:x++}):(D=te([0,0,F,0,y+1,0,0,0],8),v=D[0],m=D[1],_=D[2],E=D[3],y=D[4],b=D[5],w=D[6],x=D[7],{width:F,height:z,x:v,y:m,page:y,index:O,pageIndex:b++,row:w,col:x++})})},Object.defineProperty(e.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var n=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,r=n.call(this);return r.slice(-1)[0].page>0?(this.navigatorShape=[55,0],n.call(this)):r},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(n,r){var i=this.attributes.orientation;return il(i,n,r)},e.prototype.flattenPage=function(n){n.querySelectorAll(Kc.item.class).forEach(function(r){n.appendChild(r)}),n.querySelectorAll(Kc.page.class).forEach(function(r){var i=n.removeChild(r);i.destroy()})},e.prototype.renderItems=function(n){var r=this.attributes,i=r.click,a=r.mouseenter,o=r.mouseleave;this.flattenPage(n);var s=this.dispatchCustomEvent.bind(this);Ye(n).selectAll(Kc.item.class).data(this.renderData,function(l){return l.id}).join(function(l){return l.append(function(u){var c=u.style;return new KRe({style:c})}).attr("className",Kc.item.name).on("click",function(){i==null||i(this),s("itemClick",{item:this})}).on("pointerenter",function(){a==null||a(this),s("itemMouseenter",{item:this})}).on("pointerleave",function(){o==null||o(this),s("itemMouseleave",{item:this})})},function(l){return l.each(function(u){var c=u.style;this.update(c)})},function(l){return l.remove()})},e.prototype.relayoutNavigator=function(){var n,r=this.attributes,i=r.layout,a=r.width,o=((n=this.pageViews.children[0])===null||n===void 0?void 0:n.getBBox().height)||0,s=te(this.navigatorShape,2),l=s[0],u=s[1];this.navigator.update(i==="grid"?{pageWidth:a-l,pageHeight:o-u}:{})},e.prototype.adjustLayout=function(){var n=this,r=Object.entries(zIe(this.itemsLayout,"page")).map(function(a){var o=te(a,2),s=o[0],l=o[1];return{page:s,layouts:l}}),i=tt([],te(this.navigator.getContainer().children),!1);r.forEach(function(a){var o=a.layouts,s=n.pageViews.appendChild(new fr({className:Kc.page.name}));o.forEach(function(l){var u=l.x,c=l.y,f=l.index,d=l.width,h=l.height,p=i[f];s.appendChild(p),C0(p,"__layout__",l),p.update({x:u,y:c,width:d,height:h})})}),this.relayoutNavigator()},e.prototype.renderNavigator=function(n){var r=this.attributes.orientation,i=ft(this.attributes,"nav"),a=li({orientation:r},i),o=this;return n.selectAll(Kc.navigator.class).data(["nav"]).join(function(s){return s.append(function(){return new WRe({style:a})}).attr("className",Kc.navigator.name).each(function(){o.navigator=this})},function(s){return s.each(function(){this.update(a)})},function(s){return s.remove()}),this.navigator},e.prototype.getBBox=function(){return this.navigator.getBBox()},e.prototype.render=function(n,r){var i=this.attributes.data;if(!(!i||i.length===0)){var a=this.renderNavigator(Ye(r));this.renderItems(a.getContainer()),this.adjustLayout()}},e.prototype.dispatchCustomEvent=function(n,r){var i=new _n(n,{detail:r});this.dispatchEvent(i)},e}(dr),ag=Xo({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),Dne={showLabel:!0,formatter:function(t){return t.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},QRe=function(t){ge(e,t);function e(n){return t.call(this,n,Dne)||this}return e.prototype.render=function(n,r){var i=Ye(r).maybeAppendByClassName(ag.markerGroup,"g");this.renderMarker(i);var a=Ye(r).maybeAppendByClassName(ag.labelGroup,"g");this.renderLabel(a)},e.prototype.renderMarker=function(n){var r=this,i=this.attributes,a=i.orientation,o=i.markerSymbol,s=o===void 0?il(a,"horizontalHandle","verticalHandle"):o;Na(!!s,n,function(l){var u=ft(r.attributes,"marker"),c=we({symbol:s},u);r.marker=l.maybeAppendByClassName(ag.marker,function(){return new hn({style:c})}).update(c)})},e.prototype.renderLabel=function(n){var r=this,i=this.attributes,a=i.showLabel,o=i.orientation,s=i.spacing,l=s===void 0?0:s,u=i.formatter;Na(a,n,function(c){var f,d=ft(r.attributes,"label"),h=d.text,p=oi(d,["text"]),g=((f=c.select(ag.marker.class))===null||f===void 0?void 0:f.node().getBBox())||{},v=g.width,m=v===void 0?0:v,y=g.height,b=y===void 0?0:y,x=te(il(o,[0,b+l,"center","top"],[m+l,0,"start","middle"]),4),w=x[0],_=x[1],E=x[2],S=x[3];c.maybeAppendByClassName(ag.label,"text").styles(we(we({},p),{x:w,y:_,text:u(h).toString(),textAlign:E,textBaseline:S}))})},e}(dr),Ine={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},e4e=li({},Ine,{}),t4e=li({},Ine,Us(Dne,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),n4e=.01,ji=Xo({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend"),Lne=function(t){ge(e,t);function e(n){return t.call(this,n,e4e)||this}return e.prototype.renderTitle=function(n,r,i){var a=this.attributes,o=a.showTitle,s=a.titleText,l=ft(this.attributes,"title"),u=te(uu(l),2),c=u[0],f=u[1];this.titleGroup=n.maybeAppendByClassName(ji.titleGroup,"g").styles(f);var d=we(we({width:r,height:i},c),{text:o?s:""});this.title=this.titleGroup.maybeAppendByClassName(ji.title,function(){return new Mne({style:d})}).update(d)},e.prototype.renderItems=function(n,r){var i=r.x,a=r.y,o=r.width,s=r.height,l=ft(this.attributes,"title",!0),u=te(uu(l),2),c=u[0],f=u[1],d=we(we({},c),{width:o,height:s,x:0,y:0});this.itemsGroup=n.maybeAppendByClassName(ji.itemsGroup,"g").styles(we(we({},f),{transform:"translate(".concat(i,", ").concat(a,")")}));var h=this;this.itemsGroup.selectAll(ji.items.class).data(["items"]).join(function(p){return p.append(function(){return new JRe({style:d})}).attr("className",ji.items.name).each(function(){h.items=Ye(this)})},function(p){return p.update(d)},function(p){return p.remove()})},e.prototype.adjustLayout=function(){var n=this.attributes.showTitle;if(n){var r=this.title.node().getAvailableSpace(),i=r.x,a=r.y;this.itemsGroup.node().style.transform="translate(".concat(i,", ").concat(a,")")}},Object.defineProperty(e.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.showTitle,i=n.width,a=n.height;return r?this.title.node().getAvailableSpace():new Pn(0,0,i,a)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n,r,i=(n=this.title)===null||n===void 0?void 0:n.node(),a=(r=this.items)===null||r===void 0?void 0:r.node();return!i||!a?t.prototype.getBBox.call(this):zRe(i,a)},e.prototype.render=function(n,r){var i=this.attributes,a=i.width,o=i.height,s=i.x,l=s===void 0?0:s,u=i.y,c=u===void 0?0:u,f=Ye(r);r.style.transform="translate(".concat(l,", ").concat(c,")"),this.renderTitle(f,a,o),this.renderItems(f,this.availableSpace),this.adjustLayout()},e}(dr),r4e={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(t){return t.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},AE=Xo({background:"background",labelGroup:"label-group",label:"label"},"indicator"),Rne=function(t){ge(e,t);function e(n){var r=t.call(this,n,r4e)||this;return r.point=[0,0],r.group=r.appendChild(new fr({})),r.isMutationObserved=!0,r}return e.prototype.renderBackground=function(){if(this.label){var n=this.attributes,r=n.position,i=n.padding,a=te($r(i),4),o=a[0],s=a[1],l=a[2],u=a[3],c=this.label.node().getLocalBounds(),f=c.min,d=c.max,h=new Pn(f[0]-u,f[1]-o,d[0]+s-f[0]+u,d[1]+l-f[1]+o),p=this.getPath(r,h),g=ft(this.attributes,"background");this.background=Ye(this.group).maybeAppendByClassName(AE.background,"path").styles(we(we({},g),{d:p})),this.group.appendChild(this.label.node())}},e.prototype.renderLabel=function(){var n=this.attributes,r=n.formatter,i=n.labelText,a=ft(this.attributes,"label"),o=te(uu(a),2),s=o[0],l=o[1];s.text;var u=oi(s,["text"]);if(this.label=Ye(this.group).maybeAppendByClassName(AE.labelGroup,"g").styles(l),!!i){var c=this.label.maybeAppendByClassName(AE.label,function(){return lu(r(i))}).style("text",r(i).toString());c.selectAll("text").styles(u)}},e.prototype.adjustLayout=function(){var n=te(this.point,2),r=n[0],i=n[1],a=this.attributes,o=a.x,s=a.y;this.group.attr("transform","translate(".concat(o-r,", ").concat(s-i,")"))},e.prototype.getPath=function(n,r){var i=this.attributes.radius,a=r.x,o=r.y,s=r.width,l=r.height,u=[["M",a+i,o],["L",a+s-i,o],["A",i,i,0,0,1,a+s,o+i],["L",a+s,o+l-i],["A",i,i,0,0,1,a+s-i,o+l],["L",a+i,o+l],["A",i,i,0,0,1,a,o+l-i],["L",a,o+i],["A",i,i,0,0,1,a+i,o],["Z"]],c={top:4,right:6,bottom:0,left:2},f=c[n],d=this.createCorner([u[f].slice(-2),u[f+1].slice(-2)]);return u.splice.apply(u,tt([f+1,1],te(d),!1)),u[0][0]="M",u},e.prototype.createCorner=function(n,r){r===void 0&&(r=10);var i=.8,a=nLe.apply(void 0,tt([],te(n),!1)),o=te(n,2),s=te(o[0],2),l=s[0],u=s[1],c=te(o[1],2),f=c[0],d=c[1],h=te(a?[f-l,[l,f]]:[d-u,[u,d]],2),p=h[0],g=te(h[1],2),v=g[0],m=g[1],y=p/2,b=p/Math.abs(p),x=r*b,w=x/2,_=x*Math.sqrt(3)/2*i,E=te([v,v+y-w,v+y,v+y+w,m],5),S=E[0],O=E[1],A=E[2],T=E[3],I=E[4];return a?(this.point=[A,u-_],[["L",S,u],["L",O,u],["L",A,u-_],["L",T,u],["L",I,u]]):(this.point=[l+_,A],[["L",l,S],["L",l,O],["L",l+_,A],["L",l,T],["L",l,I]])},e.prototype.applyVisibility=function(){var n=this.attributes.visibility;n==="hidden"?Po(this):_p(this)},e.prototype.bindEvents=function(){this.label.on(Dt.BOUNDS_CHANGED,this.renderBackground)},e.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},e}(dr);function i4e(t,e){for(var n=1;n<t.length;n+=1){var r=t[n-1],i=t[n];if(e>=r&&e<=i)return[r,i]}return[e,e]}function a4e(t,e,n){var r=Array.from(e),i=t.length;return new Array(i).fill(0).reduce(function(a,o,s){var l=r[s%r.length];return a+=" ".concat(t[s],":").concat(l).concat(s<i-1?" ".concat(t[s+1],":").concat(l):"")},"l(".concat(n==="horizontal"?"0":"270",")"))}function D7(t,e){var n=te(i4e(t,e),2),r=n[0],i=n[1];return{tick:e>(r+i)/2?i:r,range:[r,i]}}var H0=Xo({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function Nne(t){var e=t.orientation,n=t.size,r=t.length;return il(e,[r,n],[n,r])}function Fne(t){var e=t.type,n=te(Nne(t),2),r=n[0],i=n[1];return e==="size"?[["M",0,i],["L",0+r,0],["L",0+r,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+r,0],["L",0+r,i],["Z"]]}function o4e(t){return Fne(t)}function s4e(t){var e=t.orientation,n=t.color,r=t.block,i=t.partition,a;if(Ue(n)){var o=20;a=new Array(o).fill(0).map(function(u,c,f){return n(c/(f.length-1))})}else a=n;var s=a.length,l=a.map(function(u){return sc(u).toString()});return s?s===1?l[0]:r?a4e(i,l,e):l.reduce(function(u,c,f){return u+=" ".concat(f/(s-1),":").concat(c)},"l(".concat(il(e,"0","270"),")")):""}function l4e(t){var e=t.orientation,n=t.range;if(!n)return[];var r=te(Nne(t),2),i=r[0],a=r[1],o=te(n,2),s=o[0],l=o[1],u=il(e,s*i,0),c=il(e,0,s*a),f=il(e,l*i,i),d=il(e,a,l*a);return[["M",u,c],["L",u,d],["L",f,d],["L",f,c],["Z"]]}function u4e(t,e){var n=ft(e,"track");t.maybeAppendByClassName(H0.track,"path").styles(we({d:Fne(e)},n))}function c4e(t,e){var n=ft(e,"selection"),r=s4e(e),i=t.maybeAppendByClassName(H0.selection,"path").styles(we({d:o4e(e),fill:r},n)),a=i.maybeAppendByClassName(H0.clipPath,"path").styles({d:l4e(e)}).node();i.style("clipPath",a)}var f4e=function(t){ge(e,t);function e(n){return t.call(this,n,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return e.prototype.render=function(n,r){var i=Ye(r).maybeAppendByClassName(H0.trackGroup,"g");u4e(i,n);var a=Ye(r).maybeAppendByClassName(H0.selectionGroup,"g");c4e(a,n)},e}(dr);function d4e(t){return{min:Math.min.apply(Math,tt([],te(t.map(function(e){return e.value})),!1)),max:Math.max.apply(Math,tt([],te(t.map(function(e){return e.value})),!1))}}var h4e=function(t){ge(e,t);function e(n){var r=t.call(this,n,t4e)||this;return r.eventToOffsetScale=new Gn({}),r.innerRibbonScale=new Gn({}),r.cacheLabelBBox=null,r.cacheHandleBBox=null,r.onHovering=function(i){var a=r.attributes,o=a.data,s=a.block;i.stopPropagation();var l=r.getValueByCanvasPoint(i);if(s){var u=D7(o.map(function(d){var h=d.value;return h}),l).range,c=r.getRealSelection(u);r.showIndicator((u[0]+u[1])/2,"".concat(c[0],"-").concat(c[1])),r.dispatchIndicated(l,u)}else{var f=r.getTickValue(l);r.showIndicator(f,"".concat(r.getRealValue(f))),r.dispatchIndicated(f)}},r.onDragStart=function(i){return function(a){a.stopPropagation(),r.attributes.slidable&&(r.target=i,r.prevValue=r.getTickValue(r.getValueByCanvasPoint(a)),document.addEventListener("mousemove",r.onDragging),document.addEventListener("touchmove",r.onDragging),document.addEventListener("mouseleave",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("touchend",r.onDragEnd))}},r.onDragging=function(i){var a=r.target;r.updateMouse();var o=te(r.selection,2),s=o[0],l=o[1],u=r.getTickValue(r.getValueByCanvasPoint(i)),c=u-r.prevValue;a==="start"?s!==u&&r.updateSelection(u,l):a==="end"?l!==u&&r.updateSelection(s,u):a==="ribbon"&&c!==0&&(r.prevValue=u,r.updateSelection(c,c,!0))},r.onDragEnd=function(){r.style.cursor="pointer",document.removeEventListener("mousemove",r.onDragging),document.removeEventListener("touchmove",r.onDragging),document.removeEventListener("mouseup",r.onDragEnd),document.removeEventListener("touchend",r.onDragEnd)},r}return Object.defineProperty(e.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=this.attributes,r=n.width,i=n.height;return new Pn(0,0,r,i)},e.prototype.render=function(n,r){var i=this,a=n.showLabel;this.renderTitle(Ye(r));var o=this.availableSpace,s=o.x,l=o.y,u=Ye(r).maybeAppendByClassName(ji.contentGroup,"g").styles({transform:"translate(".concat(s,", ").concat(l,")")}),c=u.maybeAppendByClassName(ji.labelGroup,"g").styles({zIndex:1});Na(!!a,c,function(d){i.renderLabel(d)});var f=u.maybeAppendByClassName(ji.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=u.maybeAppendByClassName(ji.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(f),this.renderIndicator(u),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(e.prototype,"range",{get:function(){var n=this.attributes,r=n.data,i=n.domain;return i?{min:i[0],max:i[1]}:d4e(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonScale",{get:function(){var n=this.range,r=n.min,i=n.max;return this.innerRibbonScale.update({domain:[r,i],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonRange",{get:function(){var n=te(this.selection,2),r=n[0],i=n[1],a=this.ribbonScale;return[a.map(r),a.map(i)]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){var n=this.range,r=n.min,i=n.max,a=this.attributes.defaultValue,o=a===void 0?[r,i]:a,s=te(o,2),l=s[0],u=s[1];return[l,u]},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(n,r){return il(this.attributes.orientation,typeof n=="function"?n():n,typeof r=="function"?r():r)},e.prototype.renderTitle=function(n){var r=this.attributes,i=r.showTitle,a=r.titleText,o=r.width,s=r.height,l=ft(this.attributes,"title"),u=we(we({},l),{width:o,height:s,text:a}),c=this;n.selectAll(ji.title.class).data(i?[a]:[]).join(function(f){return f.append(function(){return new Mne({style:u})}).attr("className",ji.title.name).each(function(){c.title=this})},function(f){return f.update(u)},function(f){return f.each(function(){c.title=void 0}).remove()})},Object.defineProperty(e.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var n=this.attributes,r=n.width,i=n.height;return new Pn(0,0,r,i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelFixedSpacing",{get:function(){var n=this.attributes.showTick;return n?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelPosition",{get:function(){var n=this.attributes,r=n.orientation,i=n.labelDirection,a={vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}};return a[r][i]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelBBox",{get:function(){var n,r=this.attributes.showLabel;if(!r)return new Pn(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var i=((n=this.label.querySelector(Sn.labelGroup.class))===null||n===void 0?void 0:n.children.slice(-1)[0]).getBBox(),a=i.width,o=i.height;return this.cacheLabelBBox=new Pn(0,0,a,o),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelShape",{get:function(){var n=this.attributes,r=n.showLabel,i=n.labelSpacing,a=i===void 0?0:i;if(!r)return{width:0,height:0,size:0,length:0};var o=this.labelBBox,s=o.width,l=o.height,u=this.ifHorizontal(l,s)+a+this.labelFixedSpacing,c=this.ifHorizontal(s,l);return{width:s,height:l,size:u,length:c}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonBBox",{get:function(){var n=this.attributes,r=n.showHandle,i=n.ribbonSize,a=this.availableSpace,o=a.width,s=a.height,l=this.labelShape,u=l.size,c=l.length,f=te(this.ifHorizontal([s,o],[o,s]),2),d=f[0],h=f[1],p=r?this.handleShape:{size:0,length:0},g=p.size,v=p.length,m=this.handleOffsetRatio,y=0,b=this.labelPosition;i?y=i:["bottom","right"].includes(b)?y=Math.min(d-u,(d-g)/m):d*(1-m)>g?y=Math.max(d-u,0):y=Math.max((d-u-g)/m,0);var x=Math.max(v,c),w=h-x,_=te(this.ifHorizontal([w,y],[y,w]),2),E=_[0],S=_[1],O=["top","left"].includes(b)?u:0,A=te(this.ifHorizontal([x/2,O],[O,x/2]),2),T=A[0],I=A[1];return new Pn(T,I,E,S)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonShape",{get:function(){var n=this.ribbonBBox,r=n.width,i=n.height;return this.ifHorizontal({size:i,length:r},{size:r,length:i})},enumerable:!1,configurable:!0}),e.prototype.renderRibbon=function(n){var r=this.attributes,i=r.data,a=r.type,o=r.orientation,s=r.color,l=r.block,u=ft(this.attributes,"ribbon"),c=this.range,f=c.min,d=c.max,h=this.ribbonBBox,p=h.x,g=h.y,v=this.ribbonShape,m=v.length,y=v.size,b=li({transform:"translate(".concat(p,", ").concat(g,")"),length:m,size:y,type:a,orientation:o,color:s,block:l,partition:i.map(function(x){return(x.value-f)/(d-f)}),range:this.ribbonRange},u);this.ribbon=n.maybeAppendByClassName(ji.ribbon,function(){return new f4e({style:b})}).update(b)},e.prototype.getHandleClassName=function(n){return"".concat(ji.prefix("".concat(n,"-handle")))},e.prototype.renderHandles=function(){var n=this.attributes,r=n.showHandle,i=n.orientation,a=ft(this.attributes,"handle"),o=te(this.selection,2),s=o[0],l=o[1],u=we(we({},a),{orientation:i}),c=a.shape,f=c===void 0?"slider":c,d=f==="basic"?QRe:bne,h=this;this.handlesGroup.selectAll(ji.handle.class).data(r?[{value:s,type:"start"},{value:l,type:"end"}]:[],function(p){return p.type}).join(function(p){return p.append(function(){return new d({style:u})}).attr("className",function(g){var v=g.type;return"".concat(ji.handle," ").concat(h.getHandleClassName(v))}).each(function(g){var v=g.type,m=g.value;this.update({labelText:m});var y="".concat(v,"Handle");h[y]=this,this.addEventListener("pointerdown",h.onDragStart(v))})},function(p){return p.update(u).each(function(g){var v=g.value;this.update({labelText:v})})},function(p){return p.each(function(g){var v=g.type,m="".concat(v,"Handle");h[m]=void 0}).remove()})},e.prototype.adjustHandles=function(){var n=te(this.selection,2),r=n[0],i=n[1];this.setHandlePosition("start",r),this.setHandlePosition("end",i)},Object.defineProperty(e.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new Pn(0,0,0,0);var n=this.startHandle.getBBox(),r=n.width,i=n.height,a=this.endHandle.getBBox(),o=a.width,s=a.height,l=te([Math.max(r,o),Math.max(i,s)],2),u=l[0],c=l[1];return this.cacheHandleBBox=new Pn(0,0,u,c),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handleShape",{get:function(){var n=this.handleBBox,r=n.width,i=n.height,a=te(this.ifHorizontal([i,r],[r,i]),2),o=a[0],s=a[1];return{width:r,height:i,size:o,length:s}},enumerable:!1,configurable:!0}),e.prototype.setHandlePosition=function(n,r){var i=this.attributes.handleFormatter,a=this.ribbonBBox,o=a.x,s=a.y,l=this.ribbonShape.size,u=this.getOffset(r),c=te(this.ifHorizontal([o+u,s+l*this.handleOffsetRatio],[o+l*this.handleOffsetRatio,s+u]),2),f=c[0],d=c[1],h=this.handlesGroup.select(".".concat(this.getHandleClassName(n))).node();h==null||h.update({transform:"translate(".concat(f,", ").concat(d,")"),formatter:i})},e.prototype.renderIndicator=function(n){var r=ft(this.attributes,"indicator");this.indicator=n.maybeAppendByClassName(ji.indicator,function(){return new Rne({})}).update(r)},Object.defineProperty(e.prototype,"labelData",{get:function(){var n=this,r=this.attributes.data;return r.reduce(function(i,a,o,s){var l,u,c=(l=a==null?void 0:a.id)!==null&&l!==void 0?l:o.toString();if(i.push(we(we({},a),{id:c,index:o,type:"value",label:(u=a==null?void 0:a.label)!==null&&u!==void 0?u:a.value.toString(),value:n.ribbonScale.map(a.value)})),o<s.length-1){var f=s[o+1],d=te([a.value,f.value],2),h=d[0],p=d[1],g=(h+p)/2;i.push(we(we({},a),{id:c,index:o,type:"range",range:[h,p],label:[h,p].join("~"),value:n.ribbonScale.map(g)}))}return i},[])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelStyle",{get:function(){var n=te(["center","middle"],2),r=n[0],i=n[1],a=this.labelPosition;return a==="top"?i="bottom":a==="bottom"?i="top":a==="left"?r="end":a==="right"&&(r="start"),{labelTextAlign:r,labelTextBaseline:i}},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(n){var r=this.attributes,i=r.showTick,a=i===void 0?!1:i,o=r.labelFilter,s=r.labelFormatter,l=ft(this.attributes,"tick"),u=ft(this.attributes,"label"),c=u.align,f=li(we({showLine:!1,showGrid:!1,showTick:a,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),Us(l,"tick"),Us(u,"label"),{data:this.labelData}),d={tickFilter:function(p,g,v){return(p==null?void 0:p.type)!=="value"?!1:o?o(p,p.index,v.filter(function(m){return m.type!=="value"})):!0},labelFilter:function(p,g,v){return(p==null?void 0:p.type)!==c?!1:o?o(p,p.index,v.filter(function(m){return m.type===c})):!0},labelFormatter:s},h=we(we(we({},f),d),{labelOverlap:[{type:"hide"}]});this.label=n.maybeAppendByClassName(ji.label,function(){return new U2({style:h})}).node(),this.label.update(h,!1)},Object.defineProperty(e.prototype,"labelAxisStyle",{get:function(){var n=this.attributes,r=n.showTick,i=n.labelDirection,a=n.labelSpacing,o=n.tickLength,s=this.ribbonShape.size,l=this.labelPosition,u=this.labelFixedSpacing,c=te([0,0,0],3),f=c[0],d=c[1],h=c[2],p=o??s;return r?(h=p,d=u,i==="positive"?l==="right"?(f=p,h=p):l==="bottom"&&(f=h):i==="negative"&&(l==="top"||l==="left")&&(f=s)):i==="positive"?l==="right"?d=p:l==="bottom"&&(f=s+u,d=a):i==="negative"&&(l==="left"||l==="top")&&(d=a),{offset:f,spacing:d,tickLength:h}},enumerable:!1,configurable:!0}),e.prototype.adjustLabel=function(){var n=this.attributes.showLabel;if(n){var r=this.ribbonBBox,i=r.x,a=r.y,o=r.width,s=r.height,l=this.labelAxisStyle,u=l.offset,c=l.spacing,f=l.tickLength,d=te(this.ifHorizontal([[i,a+u],[i+o,a+u]],[[i+u,a+s],[i+u,a]]),2),h=d[0],p=d[1];this.label.update({startPos:h,endPos:p,tickLength:f,labelSpacing:c},!1)}},e.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},e.prototype.showIndicator=function(n,r){r===void 0&&(r="".concat(n));var i=this.attributes.showIndicator;if(!i||typeof n!="number"){this.hideIndicator();return}var a=this.range,o=a.min,s=a.max,l=this.ribbonBBox,u=l.x,c=l.y,f=jn(n,o,s),d=this.getOffset(f),h=this.ifHorizontal([d+u,c],[u,d+c]);this.indicator.update({x:h[0],y:h[1],position:this.ifHorizontal("top","left"),labelText:r}),_p(this.indicator.node())},e.prototype.hideIndicator=function(){Po(this.indicator.node())},e.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},e.prototype.setSelection=function(n,r){this.updateSelection(n,r)},e.prototype.updateSelection=function(n,r,i){var a;i===void 0&&(i=!1);var o=te(this.selection,2),s=o[0],l=o[1],u=te([n,r],2),c=u[0],f=u[1];i&&(c+=s,f+=l);var d=this.range,h=d.min,p=d.max;a=te(XRe([h,p],[c,f],this.selection),2),c=a[0],f=a[1],this.update({defaultValue:[c,f]}),this.dispatchSelection()},Object.defineProperty(e.prototype,"step",{get:function(){var n=this.attributes.step,r=n===void 0?1:n,i=this.range,a=i.min,o=i.max;return bt(r)?oP((o-a)*n4e,0):r},enumerable:!1,configurable:!0}),e.prototype.getTickValue=function(n){var r=this.attributes,i=r.data,a=r.block,o=this.range.min;return a?D7(i.map(function(s){var l=s.value;return l}),n).tick:GRe(n,this.step,o)},e.prototype.getValueByCanvasPoint=function(n){var r=this.range,i=r.min,a=r.max,o=te(this.ribbon.node().getPosition(),2),s=o[0],l=o[1],u=this.ifHorizontal(s,l),c=this.ifHorizontal.apply(this,tt([],te(Zb(n)),!1)),f=c-u,d=jn(this.getOffset(f,!0),i,a);return d},e.prototype.getOffset=function(n,r){r===void 0&&(r=!1);var i=this.range,a=i.min,o=i.max,s=this.ribbonShape.length,l=this.eventToOffsetScale;return l.update({domain:[a,o],range:[0,s]}),r?l.invert(n):l.map(n)},e.prototype.getRealSelection=function(n){var r=this.range.max,i=te(n,2),a=i[0],o=i[1];return this.ifHorizontal([a,o],[r-o,r-a])},e.prototype.getRealValue=function(n){var r=this.range.max;return this.ifHorizontal(n,r-n)},e.prototype.dispatchSelection=function(){var n=this.getRealSelection(this.selection),r=new _n("valuechange",{detail:{value:n}});this.dispatchEvent(r)},e.prototype.dispatchIndicated=function(n,r){var i=this,a=this.range.max,o=this.ifHorizontal(function(){return{value:n,range:r}},function(){return{value:a-n,range:r?i.getRealSelection(r):void 0}}),s=new _n("indicate",{detail:o});this.dispatchEvent(s)},e}(dr);function fP(t){return t===void 0&&(t=""),{CONTAINER:"".concat(t,"tooltip"),TITLE:"".concat(t,"tooltip-title"),LIST:"".concat(t,"tooltip-list"),LIST_ITEM:"".concat(t,"tooltip-list-item"),NAME:"".concat(t,"tooltip-list-item-name"),MARKER:"".concat(t,"tooltip-list-item-marker"),NAME_LABEL:"".concat(t,"tooltip-list-item-name-label"),VALUE:"".concat(t,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(t,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(t,"tooltip-crosshair-y")}}var I7={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function p4e(t){var e;t===void 0&&(t="");var n=fP(t);return e={},e[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},e[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},e[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},e[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},e[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},e[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},e[".".concat(n.NAME_LABEL)]=we({flex:1},I7),e[".".concat(n.VALUE)]=we({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},I7),e[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e}var zne=function(t){ge(e,t);function e(n){var r=this,i,a,o=(a=(i=n.style)===null||i===void 0?void 0:i.template)===null||a===void 0?void 0:a.prefixCls,s=fP(o);return r=t.call(this,n,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(s.CONTAINER,'"></div>'),title:'<div class="'.concat(s.TITLE,'"></div>'),item:'<li class="'.concat(s.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(s.NAME,`">
          <span class="`).concat(s.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(s.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(s.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:p4e(o)})||this,r.timestamp=-1,r.prevCustomContentKey=r.attributes.contentKey,r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(e.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.element},Object.defineProperty(e.prototype,"elementSize",{get:function(){var n=this.element.offsetWidth,r=this.element.offsetHeight;return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HTMLTooltipItemsElements",{get:function(){var n=this.attributes,r=n.data,i=n.template;return r.map(function(a,o){var s=a.name,l=s===void 0?"":s,u=a.color,c=u===void 0?"black":u,f=a.index,d=oi(a,["name","color","index"]),h=we({name:l,color:c,index:f??o},d);return M6(jOe(i.item,h))})},enumerable:!1,configurable:!0}),e.prototype.render=function(n,r){this.renderHTMLTooltipElement(),this.updatePosition()},e.prototype.destroy=function(){var n;(n=this.element)===null||n===void 0||n.remove(),t.prototype.destroy.call(this)},e.prototype.show=function(n,r){var i=this;if(n!==void 0&&r!==void 0){var a=this.element.style.visibility==="hidden",o=function(){i.attributes.x=n??i.attributes.x,i.attributes.y=r??i.attributes.y,i.updatePosition()};a?this.closeTransition(o):o()}this.element.style.visibility="visible"},e.prototype.hide=function(n,r){n===void 0&&(n=0),r===void 0&&(r=0);var i=this.attributes.enterable;i&&this.isCursorEntered(n,r)||(this.element.style.visibility="hidden")},e.prototype.initShape=function(){var n=this.attributes.template;this.element=M6(n.container),this.id&&this.element.setAttribute("id",this.id)},e.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var n=this.attributes.content;n&&(typeof n=="string"?this.element.innerHTML=n:y7(this.element,n))}},e.prototype.renderHTMLTooltipElement=function(){var n,r,i=this.attributes,a=i.template,o=i.title,s=i.enterable,l=i.style,u=i.content,c=fP(a.prefixCls),f=this.element;if(this.element.style.pointerEvents=s?"auto":"none",u)this.renderCustomContent();else{o?(f.innerHTML=a.title,f.getElementsByClassName(c.TITLE)[0].innerHTML=o):(r=(n=f.getElementsByClassName(c.TITLE))===null||n===void 0?void 0:n[0])===null||r===void 0||r.remove();var d=this.HTMLTooltipItemsElements,h=document.createElement("ul");h.className=c.LIST,y7(h,d);var p=this.element.querySelector(".".concat(c.LIST));p?p.replaceWith(h):f.appendChild(h)}oLe(f,l)},e.prototype.getRelativeOffsetFromCursor=function(n){var r=this.attributes,i=r.position,a=r.offset,o=n||i,s=o.split("-"),l={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},u=this.elementSize,c=u.width,f=u.height,d=[-c/2,-f/2];return s.forEach(function(h){var p=te(d,2),g=p[0],v=p[1],m=te(l[h],2),y=m[0],b=m[1];d=[g+(c/2+a[0])*y,v+(f/2+a[1])*b]}),d},e.prototype.setOffsetPosition=function(n){var r=te(n,2),i=r[0],a=r[1],o=this.attributes,s=o.x,l=s===void 0?0:s,u=o.y,c=u===void 0?0:u,f=o.container,d=f.x,h=f.y;this.element.style.left="".concat(+l+d+i,"px"),this.element.style.top="".concat(+c+h+a,"px")},e.prototype.updatePosition=function(){var n=this.attributes.showDelay,r=n===void 0?60:n,i=Date.now();this.timestamp>0&&i-this.timestamp<r||(this.timestamp=i,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},e.prototype.autoPosition=function(n){var r=te(n,2),i=r[0],a=r[1],o=this.attributes,s=o.x,l=o.y,u=o.bounding,c=o.position;if(!u)return[i,a];var f=this.element,d=f.offsetWidth,h=f.offsetHeight,p=te([+s+i,+l+a],2),g=p[0],v=p[1],m={left:"right",right:"left",top:"bottom",bottom:"top"},y=u.x,b=u.y,x=u.width,w=u.height,_={left:g<y,right:g+d>y+x,top:v<b,bottom:v+h>b+w},E=[];c.split("-").forEach(function(O){_[O]?E.push(m[O]):E.push(O)});var S=E.join("-");return this.getRelativeOffsetFromCursor(S)},e.prototype.isCursorEntered=function(n,r){if(this.element){var i=this.element.getBoundingClientRect(),a=i.x,o=i.y,s=i.width,l=i.height;return new Pn(a,o,s,l).isPointIn(n,r)}return!1},e.prototype.closeTransition=function(n){var r=this,i=this.element.style.transition;this.element.style.transition="none",n(),setTimeout(function(){r.element.style.transition=i},10)},e.tag="tooltip",e}(dr),g4e=function(t){ge(e,t);function e(n){var r=t.call(this,n)||this;r.layoutEvents=[Dt.BOUNDS_CHANGED,Dt.INSERTED,Dt.REMOVED],r.$margin=$r(0),r.$padding=$r(0);var i=n.style||{},a=i.margin,o=a===void 0?0:a,s=i.padding,l=s===void 0?0:s;return r.margin=o,r.padding=l,r.isMutationObserved=!0,r.bindEvents(),r}return Object.defineProperty(e.prototype,"margin",{get:function(){return this.$margin},set:function(n){this.$margin=$r(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this.$padding},set:function(n){this.$padding=$r(n)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=this.attributes,r=n.x,i=r===void 0?0:r,a=n.y,o=a===void 0?0:a,s=n.width,l=n.height,u=te(this.$margin,4),c=u[0],f=u[1],d=u[2],h=u[3];return new Pn(i-h,o-c,s+h+f,l+c+d)},e.prototype.appendChild=function(n,r){return n.isMutationObserved=!0,t.prototype.appendChild.call(this,n,r),n},e.prototype.getAvailableSpace=function(){var n=this.attributes,r=n.width,i=n.height,a=te(this.$padding,4),o=a[0],s=a[1],l=a[2],u=a[3],c=te(this.$margin,4),f=c[0],d=c[3];return new Pn(u+d,o+f,r-u-s,i-o-l)},e.prototype.layout=function(){if(!(!this.attributes.display||!this.isConnected)&&!this.children.some(function(o){return!o.isConnected}))try{var n=this.attributes,r=n.x,i=n.y;this.style.transform="translate(".concat(r,", ").concat(i,")");var a=GIe(this.getAvailableSpace(),this.children.map(function(o){return o.getBBox()}),this.attributes);this.children.forEach(function(o,s){var l=a[s],u=l.x,c=l.y;o.style.transform="translate(".concat(u,", ").concat(c,")")})}catch{}},e.prototype.bindEvents=function(){var n=this;this.layoutEvents.forEach(function(r){n.addEventListener(r,function(i){i.target&&(i.target.isMutationObserved=!0,n.layout())})})},e.prototype.attributeChangedCallback=function(n,r,i){n==="margin"?this.margin=i:n==="padding"&&(this.padding=i),this.layout()},e}(fr),v4e=function(t){ge(e,t);function e(n){var r=t.call(this,li({},e.defaultOptions,n))||this;return r.hoverColor="#f5f5f5",r.selectedColor="#e6f7ff",r.background=r.appendChild(new Vr({})),r.label=r.background.appendChild(new fr({})),r}return Object.defineProperty(e.prototype,"padding",{get:function(){return $r(this.style.padding)},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(){var n=this.style,r=n.label,i=n.value,a=ft(this.attributes,"label");Ye(this.label).maybeAppend(".label",function(){return lu(r)}).attr("className","label").styles(a),this.label.attr("__data__",i)},e.prototype.renderBackground=function(){var n=this.label.getBBox(),r=te(this.padding,4),i=r[0],a=r[1],o=r[2],s=r[3],l=n.width,u=n.height,c=l+s+a,f=u+i+o,d=ft(this.attributes,"background"),h=this.style,p=h.width,g=p===void 0?0:p,v=h.height,m=v===void 0?0:v,y=h.selected;this.background.attr(we(we({},d),{width:Math.max(c,g),height:Math.max(f,m),fill:y?this.selectedColor:"#fff"})),this.label.attr({transform:"translate(".concat(s,", ").concat((f-u)/2,")")})},e.prototype.render=function(){this.renderLabel(),this.renderBackground()},e.prototype.bindEvents=function(){var n=this;this.addEventListener("pointerenter",function(){n.style.selected||n.background.attr("fill",n.hoverColor)}),this.addEventListener("pointerleave",function(){n.style.selected||n.background.attr("fill",n.style.backgroundFill)});var r=this;this.addEventListener("click",function(){var i=n.style,a=i.label,o=i.value,s=i.onClick;s==null||s(o,{label:a,value:o},r)})},e.defaultOptions={style:{value:"",label:"",cursor:"pointer"}},e}(dr),m4e=function(t){ge(e,t);function e(n){var r,i,a=t.call(this,li({},e.defaultOptions,n))||this;a.currentValue=(r=e.defaultOptions.style)===null||r===void 0?void 0:r.defaultValue,a.isPointerInSelect=!1,a.select=a.appendChild(new Vr({className:"select",style:{cursor:"pointer",width:0,height:0}})),a.dropdown=a.appendChild(new Vr({className:"dropdown"}));var o=a.style.defaultValue;return o&&(!((i=a.style.options)===null||i===void 0)&&i.some(function(s){return s.value===o}))&&(a.currentValue=o),a}return e.prototype.setValue=function(n){this.currentValue=n,this.render()},e.prototype.getValue=function(){return this.currentValue},Object.defineProperty(e.prototype,"dropdownPadding",{get:function(){return $r(this.style.dropdownPadding)},enumerable:!1,configurable:!0}),e.prototype.renderSelect=function(){var n=this,r,i=this.style,a=i.x,o=i.y,s=i.width,l=i.height,u=i.bordered,c=i.showDropdownIcon,f=ft(this.attributes,"select"),d=ft(this.attributes,"placeholder");this.select.attr(we(we({x:a,y:o,width:s,height:l},f),{fill:"#fff",strokeWidth:u?1:0}));var h=this.dropdownPadding,p=10;c&&Ye(this.select).maybeAppend(".dropdown-icon","path").style("d","M-5,-3.5 L0,3.5 L5,-3.5").style("transform","translate(".concat(a+s-p-h[1]-h[3],", ").concat(o+l/2,")")).style("lineWidth",1).style("stroke",this.select.style.stroke);var g=(r=this.style.options)===null||r===void 0?void 0:r.find(function(b){return b.value===n.currentValue}),v=we({x:a+h[3]},d);Ye(this.select).selectAll(".placeholder").data(g?[]:[1]).join(function(b){return b.append("text").attr("className","placeholder").styles(v).style("y",function(){var x=this.getBBox();return o+(l-x.height)/2})},function(b){return b.styles(v)},function(b){return b.remove()});var m=ft(this.attributes,"optionLabel"),y=we({x:a+h[3]},m);Ye(this.select).selectAll(".value").data(g?[g]:[]).join(function(b){return b.append(function(x){return lu(x.label)}).attr("className","value").styles(y).style("y",function(){var x=this.getBBox();return o+(l-x.height)/2})},function(b){return b.styles(y)},function(b){return b.remove()})},e.prototype.renderDropdown=function(){var n=this,r,i,a=this.style,o=a.x,s=a.y,l=a.width,u=a.height,c=a.options,f=a.onSelect,d=a.open,h=ft(this.attributes,"dropdown"),p=ft(this.attributes,"option"),g=this.dropdownPadding;Ye(this.dropdown).maybeAppend(".dropdown-container","g").attr("className","dropdown-container").selectAll(".dropdown-item").data(c,function(y){return y.value}).join(function(y){return y.append(function(b){return new v4e({className:"dropdown-item",style:we(we(we({},b),p),{width:l-g[1]-g[3],selected:b.value===n.currentValue,onClick:function(x,w,_){n.setValue(x),f==null||f(x,w,_),n.dispatchEvent(new _n("change",{detail:{value:x,option:w,item:_}})),Po(n.dropdown)}})})}).each(function(b,x){var w,_=(w=this.parentNode)===null||w===void 0?void 0:w.children,E=_.reduce(function(S,O,A){return A<x&&(S+=O.getBBox().height),S},0);this.attr("transform","translate(".concat(g[3],", ").concat(g[0]+E,")"))})},function(y){return y.update(function(b){return{selected:b.value===n.currentValue}})},function(y){return y.remove()});var v=(i=(r=this.dropdown.getElementsByClassName("dropdown-container"))===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.getBBox(),m=h.spacing;this.dropdown.attr(we({transform:"translate(".concat(o,", ").concat(s+u+m,")"),width:v.width+g[1]+g[3],height:v.height+g[0]+g[2]},h)),!d&&Po(this.dropdown)},e.prototype.render=function(){this.renderSelect(),this.renderDropdown()},e.prototype.bindEvents=function(){var n=this;this.addEventListener("click",function(r){r.stopPropagation()}),this.select.addEventListener("click",function(){n.dropdown.style.visibility==="visible"?Po(n.dropdown):_p(n.dropdown)}),this.addEventListener("pointerenter",function(){n.isPointerInSelect=!0}),this.addEventListener("pointerleave",function(){n.isPointerInSelect=!1}),document==null||document.addEventListener("click",function(){n.isPointerInSelect||Po(n.dropdown)})},e.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:"",selectRadius:8,selectStroke:"#d9d9d9",showDropdownIcon:!0,placeholderText:"",placeholderFontSize:12,placeholderTextBaseline:"top",placeholderFill:"#c2c2c2",dropdownFill:"#fff",dropdownStroke:"#d9d9d9",dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:"rgba(0, 0, 0, 0.08)",dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:"top",optionBackgroundFill:"#fff",optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:"top"}},e}(dr),Ps=function(t){ge(e,t);function e(n){var r=t.call(this,li({},{style:{backgroundOpacity:e.backgroundOpacities.default}},e.defaultOptions,n))||this;return r.showBackground=!0,r.background=r.appendChild(new Vr({})),r.icon=r.appendChild(new fr({})),r}return Object.defineProperty(e.prototype,"label",{get:function(){return"BaseIcon"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return Math.log10(this.attributes.size)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return $r(this.attributes.size/5)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconSize",{get:function(){var n=this.attributes.size,r=te(this.padding,4),i=r[0],a=r[1],o=r[2],s=r[3];return Math.max(n-Math.max(s+a,i+o),this.lineWidth*2+1)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var n=this.attributes,r=n.x,i=n.y,a=n.size,o=a/2,s=ft(this.attributes,"background");this.background.attr(we({x:r-o,y:i-o,width:a,height:a},s))},e.prototype.showIndicator=function(){if(this.label){var n=this.attributes.size,r=this.background.getBBox(),i=r.x,a=r.y;this.indicator.update({x:i+n/2,y:a-5,labelText:this.label,visibility:"visible"})}},e.prototype.hideIndicator=function(){this.indicator.update({visibility:"hidden"})},e.prototype.connectedCallback=function(){var n;t.prototype.connectedCallback.call(this);var r=this.attributes.size,i=this.background.getBBox(),a=i.x,o=i.y,s=(n=this.ownerDocument)===null||n===void 0?void 0:n.defaultView;s&&(this.indicator=s.appendChild(new Rne({style:{x:a+r/2,y:o-r/2,visibility:"hidden",position:"top",radius:3,zIndex:100}})))},e.prototype.disconnectedCallback=function(){this.indicator.destroy()},e.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground()},e.prototype.bindEvents=function(){var n=this,r=this.attributes.onClick;if(this.addEventListener("click",function(){r==null||r(n)}),this.showBackground){var i=function(){return n.background.attr({opacity:e.backgroundOpacities.default})},a=function(){return n.background.attr({opacity:e.backgroundOpacities.hover})},o=function(){return n.background.attr({opacity:e.backgroundOpacities.active})};this.addEventListener("pointerenter",function(){a(),n.showIndicator()}),this.addEventListener("pointerleave",function(){i(),n.hideIndicator()}),this.addEventListener("pointerdown",function(){o()}),this.addEventListener("pointerup",function(){i()})}},e.tag="IconBase",e.defaultOptions={style:{x:0,y:0,size:10,color:"#565758",backgroundRadius:4,backgroundFill:"#e2e2e2"}},e.backgroundOpacities={default:0,hover:.8,active:1},e}(dr),Y0=function(t,e){return e===void 0&&(e="#565758"),new yr({style:{fill:e,d:"M ".concat(t,",").concat(t," L -").concat(t,",0 L ").concat(t,",-").concat(t," Z"),transformOrigin:"center"}})},y4e=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.arcPath=function(n,r,i){var a=te([i,i],2),o=a[0],s=a[1],l=function(g){return[n+i*Math.cos(g),r+i*Math.sin(g)]},u=te(l(-5/4*Math.PI),2),c=u[0],f=u[1],d=te(l(1/4*Math.PI),2),h=d[0],p=d[1];return"M".concat(c,",").concat(f,",A").concat(o,",").concat(s,",0,1,1,").concat(h,",").concat(p)},Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this.iconSize,s=this.lineWidth,l=s+.5;Ye(this.icon).maybeAppend(".reset","path").styles({stroke:a,lineWidth:s,d:this.arcPath(r,i,o/2-s),markerStart:Y0(l,a)})},e}(Ps),b4e=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this.iconSize,s=o/2,l=o/2/Math.pow(3,.5),u=[[r,i],[r,i-l],[r-s,i],[r,i+l],[r,i],[r+s,i-l],[r+s,i+l],[r,i]];Ye(this.icon).maybeAppend(".backward","polygon").styles({points:u,fill:a})},e}(Ps),x4e=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this.iconSize,s=o/2,l=o/2/Math.pow(3,.5),u=[[r,i],[r,i-l],[r+s,i],[r,i+l],[r,i],[r-s,i-l],[r-s,i+l],[r,i]];Ye(this.icon).maybeAppend(".forward","polygon").styles({points:u,fill:a})},e}(Ps),w4e=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this.iconSize,s=o/3*Math.pow(3,.5)*.8,l=[[r+s,i],[r-s/2,i-o/2*.8],[r-s/2,i+o/2*.8],[r+s,i]];Ye(this.icon).maybeAppend(".play","polygon").styles({points:l,fill:a})},e}(Ps),_4e=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this.iconSize,s=o/3,l=[[r-s,i-o/2],[r-s,i+o/2],[r-s/2,i+o/2],[r-s/2,i-o/2],[r-s,i-o/2],[r+s/2,i-o/2],[r+s/2,i+o/2],[r+s,i+o/2],[r+s,i-o/2]];Ye(this.icon).maybeAppend(".pause","polygon").styles({points:l,fill:a})},e}(Ps),S4e=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this,s=o.iconSize,l=o.lineWidth,u=l;Ye(this.icon).maybeAppend(".left-line","line").styles({x1:r-s/2,y1:i-s/2,x2:r-s/2,y2:i+s/2,stroke:a,lineWidth:l}),Ye(this.icon).maybeAppend(".right-line","line").styles({x1:r+s/2,y1:i-s/2,x2:r+s/2,y2:i+s/2,stroke:a,lineWidth:l}),Ye(this.icon).maybeAppend(".left-arrow","line").styles({x1:r,y1:i,x2:r-s/2+u*2,y2:i,stroke:a,lineWidth:l,markerEnd:Y0(l*2,a)}),Ye(this.icon).maybeAppend(".right-arrow","line").styles({x1:r,y1:i,x2:r+s/2-u*2,y2:i,stroke:a,lineWidth:l,markerEnd:Y0(l*2,a)})},e}(Ps),E4e=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this,s=o.iconSize,l=o.lineWidth;Ye(this.icon).maybeAppend(".line","line").styles({x1:r,y1:i-s/2,x2:r,y2:i+s/2,stroke:a,lineWidth:l});var u=l;Ye(this.icon).maybeAppend(".left-arrow","line").styles({x1:r-s/2-u*2,y1:i,x2:r-u*2,y2:i,stroke:a,lineWidth:l,markerEnd:Y0(l*2,a)}),Ye(this.icon).maybeAppend(".right-arrow","line").styles({x1:r+s/2+u*2,y1:i,x2:r+u*2,y2:i,stroke:a,lineWidth:l,markerEnd:Y0(l*2,a)})},e}(Ps),jne=function(t){return[[-t/2,-t/2],[-t/2,t/2],[t/2,t/2]]},O4e=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this,s=o.iconSize,l=o.lineWidth,u=l,c=(s-u*2-l)/4,f=(s-u*2-l)/2,d=te([r-s/2+u,i+s/2-u*2],2),h=d[0],p=d[1];Ye(this.icon).maybeAppend(".coordinate","polyline").styles({points:jne(s).map(function(g){var v=te(g,2),m=v[0],y=v[1];return[m+r,y+i]}),stroke:a,lineWidth:l}),Ye(this.icon).maybeAppend(".line","polyline").styles({points:[[h,p],[h+c,p-f],[h+c*2,p],[h+c*4,p-f*2]],stroke:a,lineWidth:l})},e}(Ps),k4e=function(t){ge(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return[1,4,2,4,3]},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.data,r=this.attributes,i=r.x,a=r.y,o=r.color,s=this,l=s.iconSize,u=s.lineWidth,c=u,f=(l-c)/n.length,d=(l-c*2)/4,h=te([i-l/2+c*2,a+l/2-c],2),p=h[0],g=h[1];Ye(this.icon).maybeAppend(".coordinate","polyline").styles({points:jne(l).map(function(v){var m=te(v,2),y=m[0],b=m[1];return[y+i,b+a]}),stroke:o,lineWidth:u}),Ye(this.icon).maybeAppend(".bars","g").selectAll(".column").data(this.data.map(function(v,m){return{value:v,index:m}})).join(function(v){return v.append("line").attr("className","column").style("x1",function(m){var y=m.index;return p+f*y}).style("y1",g).style("x2",function(m){var y=m.index;return p+f*y}).style("y2",function(m){var y=m.value;return g-d*y}).styles({y1:g,stroke:o,lineWidth:u})})},e}(Ps),A4e=function(t){ge(e,t);function e(n){var r=t.call(this,li({},{style:{color:"#d8d9d9"}},n))||this;return r.showBackground=!1,r}return e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this,s=o.iconSize,l=o.lineWidth;Ye(this.icon).maybeAppend(".split","line").styles({x1:r,y1:i-s/2,x2:r,y2:i+s/2,stroke:a,lineWidth:l})},e}(Ps),dP=function(t){ge(e,t);function e(){var n=t.apply(this,tt([],te(arguments),!1))||this;return n.showBackground=!1,n}return Object.defineProperty(e.prototype,"padding",{get:function(){return $r(0)},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.iconSize,r=this.attributes,i=r.x,a=r.y,o=r.speed,s=o===void 0?1:o,l=vp(this.attributes,["x","y","transform","transformOrigin","width","height","size","color","speed"]),u=jn(n,20,1/0),c=20,f=we(we({},l),{x:i-u/2,y:a-c/2,width:u,height:c,defaultValue:s,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:n/5,placeholderFontSize:n/2,optionPadding:0,optionLabelFontSize:n/2,optionBackgroundRadius:1,options:[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}]});Ye(this.icon).maybeAppend(".speed",function(){return new m4e({style:f})}).attr("className","speed").each(function(){this.update(f)})},e.tag="SpeedSelect",e}(Ps),zL=function(t){ge(e,t);function e(n){var r=t.call(this,n)||this;return r.icon=r.appendChild(new fr({})),r.currentType=r.attributes.type,r}return e.prototype.getType=function(){return this.currentType},e.prototype.render=function(){var n=this,r=this.attributes;r.onChange;var i=oi(r,["onChange"]);Ye(this.icon).selectAll(".icon").data([this.currentType]).join(function(a){return a.append(function(o){var s,l=(s=n.toggles.find(function(u){var c=te(u,1),f=c[0];return f===o}))===null||s===void 0?void 0:s[1];if(!l)throw new Error("Invalid type: ".concat(o));return new l({})}).attr("className","icon").styles(i,!1).update({})},function(a){return a.styles({restStyles:i}).update({})},function(a){return a.remove()})},e.prototype.bindEvents=function(){var n=this,r=this.attributes.onChange;this.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation();var a=(n.toggles.findIndex(function(s){var l=te(s,1),u=l[0];return u===n.currentType})+1)%n.toggles.length,o=n.toggles[a][0];r==null||r(n.currentType),n.currentType=o,n.render()})},e.tag="ToggleIcon",e}(dr),hP=function(t){ge(e,t);function e(n){var r=t.call(this,li({},{style:{type:"play"}},n))||this;return r.toggles=[["play",w4e],["pause",_4e]],r}return e}(zL),pP=function(t){ge(e,t);function e(n){var r=t.call(this,li({},{style:{type:"range"}},n))||this;return r.toggles=[["range",S4e],["value",E4e]],r}return e}(zL),gP=function(t){ge(e,t);function e(n){var r=t.call(this,li({},{style:{type:"column"}},n))||this;return r.toggles=[["line",O4e],["column",k4e]],r}return e}(zL),T4e={reset:y4e,speed:dP,backward:b4e,playPause:hP,forward:x4e,selectionType:pP,chartType:gP,split:A4e},M4e=function(t){ge(e,t);function e(n){var r=t.call(this,li({},e.defaultOptions,n))||this;return r.background=r.appendChild(new Vr({})),r.functions=r.appendChild(new fr({})),r}return Object.defineProperty(e.prototype,"padding",{get:function(){return $r(this.attributes.padding)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var n=this.style,r=n.x,i=n.y,a=n.width,o=n.height,s=ft(this.attributes,"background");this.background.attr(we({x:r,y:i,width:a,height:o},s))},e.prototype.renderFunctions=function(){var n=this,r,i=this.attributes,a=i.functions,o=i.iconSize,s=i.iconSpacing,l=i.x,u=i.y,c=i.width,f=i.height,d=i.align,h=te(this.padding,4),p=h[1],g=h[3],v=a.reduce(function(b,x){return b.length&&x.length?b.concat.apply(b,tt(["split"],te(x),!1)):b.concat.apply(b,tt([],te(x),!1))},[]),m=v.length*(o+s)-s,y={left:g+o/2,center:(c-m)/2+o/2,right:c-m-g-p+o/2}[d]||0;(r=this.speedSelect)===null||r===void 0||r.destroy(),this.functions.removeChildren(),v.forEach(function(b,x){var w,_=T4e[b],E={x:l+x*(o+s)+y,y:u+f/2,size:o};if(_===dP?(E.speed=n.attributes.speed,E.onSelect=function(O){return n.handleFunctionChange(b,{value:O})}):[hP,pP,gP].includes(_)?(E.onChange=function(O){return n.handleFunctionChange(b,{value:O})},_===hP&&(E.type=n.attributes.state==="play"?"pause":"play"),_===pP&&(E.type=n.attributes.selectionType==="range"?"value":"range"),_===gP&&(E.type=n.attributes.chartType==="line"?"column":"line")):E.onClick=function(){return n.handleFunctionChange(b,{value:b})},_===dP){var S=(w=n.ownerDocument)===null||w===void 0?void 0:w.defaultView;S&&(n.speedSelect=new _({style:we(we({},E),{zIndex:100})}),S.appendChild(n.speedSelect))}else n.functions.appendChild(new _({style:E}))})},e.prototype.disconnectedCallback=function(){var n;t.prototype.disconnectedCallback.call(this),(n=this.speedSelect)===null||n===void 0||n.destroy()},e.prototype.render=function(){this.renderBackground(),this.renderFunctions()},e.prototype.handleFunctionChange=function(n,r){var i=this.attributes.onChange;i==null||i(n,r)},e.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:"center",iconSize:25,iconSpacing:0,speed:1,state:"pause",chartType:"line",selectionType:"range",backgroundFill:"#fbfdff",backgroundStroke:"#ebedf0",functions:[["reset","speed"],["backward","playPause","forward"],["selectionType","chartType"]]}},e}(dr),C4e=function(t){ge(e,t);function e(n){var r=t.call(this,li({},e.defaultOptions,n))||this;return r.bindEvents(),r}return e.prototype.bindEvents=function(){var n=this;this.addEventListener("mouseenter",function(){n.attr("lineWidth",Math.ceil(+(n.style.r||0)/2))}),this.addEventListener("mouseleave",function(){n.attr("lineWidth",0)})},e.defaultOptions={style:{r:5,fill:"#3f7cf7",lineWidth:0,stroke:"#3f7cf7",strokeOpacity:.5,cursor:"pointer"}},e}($a),P4e=function(t){ge(e,t);function e(n){return t.call(this,li({},e.defaultOptions,n))||this}return e.prototype.renderBackground=function(){var n=this.attributes,r=n.x,i=n.y,a=n.width,o=n.height,s=ft(this.attributes,"background");Ye(this).maybeAppend("background","rect").attr("className","background").styles(we({x:r-a/2,y:i-o/2,width:a,height:o},s))},e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.iconSize,o=ft(this.attributes,"icon"),s=1,l=a/2;Ye(this).maybeAppend("icon-left-line","line").attr("className","icon-left-line").styles(we({x1:r-s,y1:i-l,x2:r-s,y2:i+l},o)),Ye(this).maybeAppend("icon-right-line","line").attr("className","icon-right-line").styles(we({x1:r+s,y1:i-l,x2:r+s,y2:i+l},o))},e.prototype.renderBorder=function(){var n=this.attributes,r=n.x,i=n.y,a=n.width,o=n.height,s=n.type,l=ft(this.attributes,"border"),u=s==="start"?+a/2:-a/2;Ye(this).maybeAppend("border","line").attr("className","border").styles(we({x1:u+r,y1:i-o/2,x2:u+r,y2:i+o/2},l))},e.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder()},e.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:"start",backgroundFill:"#fff",backgroundFillOpacity:.5,iconStroke:"#9a9a9a",iconLineWidth:1,borderStroke:"#e8e8e8",borderLineWidth:1}},e}(dr);function D4e(t,e){return typeof t=="number"?Bne(t):I4e(t,e)}function I4e(t,e){var n=new Date(t);switch(e){case"half-hour":case"hour":case"four-hour":return[0,6,12,18].includes(n.getHours())&&n.getMinutes()===0?Oa(n,`HH:mm
YYYY-MM-DD`):Oa(n,"HH:mm");case"half-day":return n.getHours()<12?`AM
`.concat(Oa(n,"YYYY-MM-DD")):"PM";case"day":return[1,10,20].includes(n.getDate())?Oa(n,`DD
YYYY-MM`):Oa(n,"DD");case"week":return n.getDate()<=7?Oa(n,`DD
YYYY-MM`):Oa(n,"DD");case"month":return[0,6].includes(n.getMonth())?Oa(n,`MM
YYYY`):Oa(n,"MM");case"season":return[0].includes(n.getMonth())?Oa(n,`MM
YYYY`):Oa(n,"MM");case"year":return Oa(n,"YYYY");default:return Oa(n,"YYYY-MM-DD HH:mm")}}function Bne(t){var e=String(Math.floor(t/3600)).padStart(2,"0"),n=String(Math.floor(t%3600/60)).padStart(2,"0"),r=String(Math.floor(t%60)).padStart(2,"0");return t<3600?"".concat(n,":").concat(r):"".concat(e,":").concat(n,":").concat(r)}var L4e=function(t){ge(e,t);function e(n){var r=t.call(this,li({},e.defaultOptions,n))||this;r.axis=r.appendChild(new U2({style:{type:"linear",startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),r.timeline=r.appendChild(new IL({style:{onChange:function(f){r.handleSliderChange(f)}}})),r.controller=r.appendChild(new M4e({})),r.states={},r.handleSliderChange=function(f){var d=function(){var h=r.states.values;return Array.isArray(h)?tt([],te(h),!1):h}();r.setBySliderValues(f),r.dispatchOnChange(d)};var i=r.attributes,a=i.selectionType,o=i.chartType,s=i.speed,l=i.state,u=i.playMode,c=i.values;return r.states={chartType:o,playMode:u,selectionType:a,speed:s,state:l},r.setByTimebarValues(c),r}return Object.defineProperty(e.prototype,"data",{get:function(){var n=this.attributes.data,r=function(i,a){return i.time<a.time?-1:i.time>a.time?1:0};return n.sort(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"space",{get:function(){var n=this.attributes,r=n.x,i=n.y,a=n.width,o=n.height,s=n.type,l=n.controllerHeight,u=jn(+o-l,0,+o),c=new Pn(r,i+ +o-l,+a,l),f,d=0;s==="chart"?(d=35,f=new Pn(r,i+u-d,+a,d)):f=new Pn;var h=s==="time"?10:u,p=new Pn(r,i+(s==="time"?u:u-h),+a,h-d);return{axisBBox:f,controllerBBox:c,timelineBBox:p}},enumerable:!1,configurable:!0}),e.prototype.setBySliderValues=function(n){var r,i,a=this.data,o=te(Array.isArray(n)?n:[0,n],2),s=o[0],l=o[1],u=a.length,c=a[Math.floor(s*u)],f=a[Math.ceil(l*u)-(Array.isArray(n)?0:1)];this.states.values=[(r=c==null?void 0:c.time)!==null&&r!==void 0?r:a[0].time,(i=f==null?void 0:f.time)!==null&&i!==void 0?i:1/0]},e.prototype.setByTimebarValues=function(n){var r,i,a,o=this.data,s=te(Array.isArray(n)?n:[void 0,n],2),l=s[0],u=s[1],c=o.find(function(d){var h=d.time;return h===l}),f=o.find(function(d){var h=d.time;return h===u});this.states.values=[(r=c==null?void 0:c.time)!==null&&r!==void 0?r:(i=o[0])===null||i===void 0?void 0:i.time,(a=f==null?void 0:f.time)!==null&&a!==void 0?a:1/0]},e.prototype.setByIndex=function(n){var r,i,a,o,s=this.data,l=te(n,2),u=l[0],c=l[1];this.states.values=[(i=(r=s[u])===null||r===void 0?void 0:r.time)!==null&&i!==void 0?i:s[0].time,(o=(a=this.data[c])===null||a===void 0?void 0:a.time)!==null&&o!==void 0?o:1/0]},Object.defineProperty(e.prototype,"sliderValues",{get:function(){var n=this.states,r=n.values,i=n.selectionType,a=te(Array.isArray(r)?r:[void 0,r],2),o=a[0],s=a[1],l=this.data,u=l.length,c=i==="value",f=function(){var h=l.findIndex(function(p){var g=p.time;return g===o});return c?0:h>-1?h/u:0},d=function(){if(s===1/0)return 1;var h=l.findIndex(function(p){var g=p.time;return g===s});return h>-1?h/u:c?.5:1};return[f(),d()]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var n=this.states,r=n.values,i=n.selectionType,a=te(Array.isArray(r)?r:[this.data[0].time,r],2),o=a[0],s=a[1];return i==="value"?s:[o,s]},enumerable:!1,configurable:!0}),e.prototype.getDatumByRatio=function(n){var r=this.data,i=r.length,a=Math.floor(n*(i-1));return r[a]},Object.defineProperty(e.prototype,"chartHandleIconShape",{get:function(){var n=this.states.selectionType,r=this.space.timelineBBox.height;return n==="range"?function(i){return new P4e({style:{type:i,height:r,iconSize:r/6}})}:function(){return new Es({style:{x1:0,y1:-r/2,x2:0,y2:r/2,lineWidth:2,stroke:"#c8c8c8"}})}},enumerable:!1,configurable:!0}),e.prototype.getChartStyle=function(n){var r=this,i=n.x,a=n.y,o=n.width,s=n.height,l=this.states,u=l.selectionType,c=l.chartType,f=this.data,d=this.attributes,h=d.type,p=d.labelFormatter,g=ft(this.attributes,"chart");g.type;var v=oi(g,["type"]),m=u==="range";if(h==="time")return we({handleIconShape:function(){return new C4e({})},selectionFill:"#2e7ff8",selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:m?-15:0,autoFitLabel:m,handleSpacing:m?-15:0,trackFill:"#edeeef",trackLength:o,trackOpacity:.5,trackRadius:s/2,trackSize:s/2,type:u,values:this.sliderValues,formatter:function(x){if(p)return p(x);var w=r.getDatumByRatio(x).time;return typeof w=="number"?Bne(w):Oa(w,"YYYY-MM-DD HH:mm:ss")},transform:"translate(".concat(i,", ").concat(a,")"),zIndex:1},v);var y=u==="range"?5:0,b=f.map(function(x){var w=x.value;return w});return we({handleIconOffset:y,handleIconShape:this.chartHandleIconShape,selectionFill:"#fff",selectionFillOpacity:.5,selectionType:"invert",sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:"#d4e5fd",sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:b,sparklineType:c,sparklineScale:.8,trackLength:o,trackSize:s,type:u,values:this.sliderValues,transform:"translate(".concat(i,", ").concat(a,")"),zIndex:1},v)},e.prototype.renderChart=function(n){n===void 0&&(n=this.space.timelineBBox),this.timeline.update(this.getChartStyle(n))},e.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues)},e.prototype.getAxisStyle=function(n){var r=this.data,i=this.attributes,a=i.interval,o=i.labelFormatter,s=ft(this.attributes,"axis"),l=n.x,u=n.y,c=n.width,f=tt(tt([],te(r),!1),[{time:0}],!1).map(function(h,p,g){var v=h.time;return{label:"".concat(v),value:p/(g.length-1),time:v}}),d=we({startPos:[l,u],endPos:[l+c,u],data:f,labelFilter:function(h,p){return p<f.length-1},labelFormatter:function(h){var p=h.time;return o?o(p):D4e(p,a)}},s);return d},e.prototype.renderAxis=function(n){n===void 0&&(n=this.space.axisBBox);var r=this.attributes.type;r==="chart"&&this.axis.update(this.getAxisStyle(n))},e.prototype.renderController=function(n){n===void 0&&(n=this.space.controllerBBox);var r=this.attributes.type,i=this.states,a=i.state,o=i.speed,s=i.selectionType,l=i.chartType,u=ft(this.attributes,"controller"),c=this,f=we(we(we({},n),{iconSize:20,speed:o,state:a,selectionType:s,chartType:l,onChange:function(d,h){var p=h.value;switch(d){case"reset":c.internalReset();break;case"speed":c.handleSpeedChange(p);break;case"backward":c.internalBackward();break;case"playPause":p==="play"?c.internalPlay():c.internalPause();break;case"forward":c.internalForward();break;case"selectionType":c.handleSelectionTypeChange(p);break;case"chartType":c.handleChartTypeChange(p);break}}}),u);r==="time"&&(f.functions=[["reset","speed"],["backward","playPause","forward"],["selectionType"]]),this.controller.update(f)},e.prototype.dispatchOnChange=function(n){var r=this.data,i=this.attributes.onChange,a=this.states,o=a.values,s=a.selectionType,l=te(o,2),u=l[0],c=l[1],f=c===1/0?r.at(-1).time:c,d=s==="range"?[u,f]:f,h=function(p,g){return Array.isArray(p)?Array.isArray(g)?p[0]===g[0]&&(p[1]===g[1]||p[1]===1/0||g[1]===1/0):!1:Array.isArray(g)?!1:p===g};(!n||!h(n,d))&&(i==null||i(s==="range"?[u,f]:f))},e.prototype.internalReset=function(n){var r,i,a=this.states.selectionType;this.internalPause(),this.setBySliderValues(a==="range"?[0,1]:[0,0]),this.renderController(),this.updateSelection(),n||((i=(r=this.attributes)===null||r===void 0?void 0:r.onReset)===null||i===void 0||i.call(r),this.dispatchOnChange())},e.prototype.reset=function(){this.internalReset()},e.prototype.moveSelection=function(n,r){var i=this.data,a=i.length,o=this.states,s=o.values,l=o.selectionType,u=o.playMode,c=te(s,2),f=c[0],d=c[1],h=i.findIndex(function(b){var x=b.time;return x===f}),p=i.findIndex(function(b){var x=b.time;return x===d});p===-1&&(p=a);var g=n==="backward"?-1:1,v;l==="range"?u==="acc"?(v=[h,p+g],g===-1&&h===p&&(v=[h,a])):v=[h+g,p+g]:v=[h,p+g];var m=function(b){var x=te(b.sort(function(S,O){return S-O}),2),w=x[0],_=x[1],E=function(S){return jn(S,0,a)};return _>a?l==="value"?[0,0]:u==="acc"?[E(w),E(w)]:[0,E(_-w)]:w<0?u==="acc"?[0,E(_)]:[E(w+a-_),a]:[E(w),E(_)]},y=m(v);return this.setByIndex(y),this.updateSelection(),y},e.prototype.internalBackward=function(n){var r,i,a=this.moveSelection("backward",n);return n||((i=(r=this.attributes)===null||r===void 0?void 0:r.onBackward)===null||i===void 0||i.call(r),this.dispatchOnChange()),a},e.prototype.backward=function(){this.internalBackward()},e.prototype.internalPlay=function(n){var r=this,i,a,o=this.data,s=this.attributes.loop,l=this.states.speed,u=l===void 0?1:l;this.playInterval=window.setInterval(function(){var c=r.internalForward();c[1]===o.length&&!s&&(r.internalPause(),r.renderController())},1e3/u),this.states.state="play",!n&&((a=(i=this.attributes)===null||i===void 0?void 0:i.onPlay)===null||a===void 0||a.call(i))},e.prototype.play=function(){this.internalPlay()},e.prototype.internalPause=function(n){var r,i;clearInterval(this.playInterval),this.states.state="pause",!n&&((i=(r=this.attributes)===null||r===void 0?void 0:r.onPause)===null||i===void 0||i.call(r))},e.prototype.pause=function(){this.internalPause()},e.prototype.internalForward=function(n){var r,i,a=this.moveSelection("forward",n);return n||((i=(r=this.attributes)===null||r===void 0?void 0:r.onForward)===null||i===void 0||i.call(r),this.dispatchOnChange()),a},e.prototype.forward=function(){this.internalForward()},e.prototype.handleSpeedChange=function(n){var r,i;this.states.speed=n;var a=this.states.state;a==="play"&&(this.internalPause(!0),this.internalPlay(!0)),(i=(r=this.attributes)===null||r===void 0?void 0:r.onSpeedChange)===null||i===void 0||i.call(r,n)},e.prototype.handleSelectionTypeChange=function(n){var r,i;this.states.selectionType=n,this.renderChart(),(i=(r=this.attributes)===null||r===void 0?void 0:r.onSelectionTypeChange)===null||i===void 0||i.call(r,n)},e.prototype.handleChartTypeChange=function(n){var r,i;this.states.chartType=n,this.renderChart(),(i=(r=this.attributes)===null||r===void 0?void 0:r.onChartTypeChange)===null||i===void 0||i.call(r,n)},e.prototype.render=function(){var n=this.space,r=n.axisBBox,i=n.controllerBBox,a=n.timelineBBox;this.renderController(i),this.renderAxis(r),this.renderChart(a),this.states.state==="play"&&this.internalPlay()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.internalPause(!0)},e.defaultOptions={style:{x:0,y:0,axisLabelFill:"#6e6e6e",axisLabelTextAlign:"left",axisLabelTextBaseline:"top",axisLabelTransform:"translate(5, -12)",axisLineLineWidth:1,axisLineStroke:"#cacdd1",axisTickLength:15,axisTickLineWidth:1,axisTickStroke:"#cacdd1",chartShowLabel:!1,chartType:"line",controllerAlign:"center",controllerHeight:40,data:[],interval:"day",loop:!1,playMode:"acc",selectionType:"range",type:"time"}},e}(dr),TE=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function R4e(t){const{min:[e,n],max:[r,i]}=t.getLocalBounds();let a=0,o=0;return e>0&&(a=e),r<0&&(a=r),n>0&&(o=n),i<0&&(o=i),[a,o]}function N4e(t,e=[]){const[n=0,r=0,i=n,a=r]=e,o=t.parentNode,s=o.getEulerAngles();o.setEulerAngles(0);const{min:l,halfExtents:u}=t.getLocalBounds(),[c,f]=l,[d,h]=u;return o.setEulerAngles(s),{x:c-a,y:f-n,width:d*2+a+r,height:h*2+n+i}}function F4e(t,e,n,r,i=!0,a=!0){const o=f=>od()(f);if(!e[0]&&!e[1])return o([R4e(t),e]);if(!n.length)return o([[0,0],e]);const[s,l]=n,u=[...l],c=[...s];if(l[0]!==s[0]){const f=i?-4:4;u[1]=l[1],a&&!i&&(u[0]=Math.max(s[0],l[0]-f),l[1]<s[1]?c[1]=u[1]:(c[1]=s[1],c[0]=Math.max(c[0],u[0]-f))),!a&&!i&&(u[0]=Math.max(s[0],l[0]-f),l[1]>s[1]?c[1]=u[1]:(c[1]=s[1],c[0]=Math.max(c[0],u[0]-f))),!a&&i&&(u[0]=Math.min(s[0],l[0]-f),l[1]>s[1]?c[1]=u[1]:(c[1]=s[1],c[0]=Math.min(c[0],u[0]-f))),a&&i&&(u[0]=Math.min(s[0],l[0]-f),l[1]<s[1]?c[1]=u[1]:(c[1]=s[1],c[0]=Math.min(c[0],u[0]-f)))}return o([l,u,c,s,e])}const $ne=Jh(t=>{const e=t.attributes,{className:n,class:r,transform:i,rotate:a,labelTransform:o,labelTransformOrigin:s,x:l,y:u,x0:c=l,y0:f=u,text:d,background:h,connector:p,startMarker:g,endMarker:v,coordCenter:m,innerHTML:y}=e,b=TE(e,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if(t.style.transform=`translate(${l}, ${u})`,[l,u,c,f].some(L=>!je(L))){t.children.forEach(L=>L.remove());return}const x=Fe(b,"background"),{padding:w}=x,_=TE(x,["padding"]),E=Fe(b,"connector"),{points:S=[]}=E,O=TE(E,["points"]);let A;y?A=pt(t).maybeAppend("html","html",n).style("zIndex",0).style("innerHTML",y).call(et,Object.assign({transform:o,transformOrigin:s},b)).node():A=pt(t).maybeAppend("text","text").style("zIndex",0).style("text",d).call(et,Object.assign({textBaseline:"middle",transform:o,transformOrigin:s},b)).node();const T=pt(t).maybeAppend("background","rect").style("zIndex",-1).call(et,N4e(A,w)).call(et,h?_:{}).node(),I=+c<m[0],D=+f<m[1],R=[+c-+l,+f-+u],F=F4e(T,R,S,m,I,D),z=g&&new hn({id:"startMarker",style:Object.assign({x:0,y:0},Fe(b,"startMarker"))}),N=v&&new hn({id:"endMarker",style:Object.assign({x:0,y:0},Fe(b,"endMarker"))});pt(t).maybeAppend("connector","path").style("zIndex",0).style("d",F).style("markerStart",z).style("markerEnd",N).call(et,p?O:{})}),Vne=(t,e)=>{const{coordinate:n}=e;return(r,i,a)=>{const{color:o,text:s="",fontSize:l,rotate:u=0,transform:c=""}=i,f={text:String(s),stroke:o,fill:o,fontSize:l},[[d,h]]=r;return pt(new $ne).style("x",d).style("y",h).call(et,a).style("transform",`${c}rotate(${+u})`).style("coordCenter",n.getCenter()).call(et,f).call(et,t).node()}};Vne.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var vP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function z4e(t){const e=t/Math.sqrt(2),n=t*Math.sqrt(2),[r,i]=[-e,e-n],[a,o]=[0,0],[s,l]=[e,e-n];return[["M",r,i],["A",t,t,0,1,1,s,l],["L",a,o],["Z"]]}function j4e(t){const{min:e,max:n}=t.getLocalBounds();return[(e[0]+n[0])*.5,(e[1]+n[1])*.5]}const B4e=Jh(t=>{const e=t.attributes,n=vP(e,["class","x","y","transform"]),r=Fe(n,"marker"),{size:i=24}=r,a=()=>z4e(i/2),o=pt(t).maybeAppend("marker",()=>new hn({})).call(u=>u.node().update(Object.assign({symbol:a},r))).node(),[s,l]=j4e(o);pt(t).maybeAppend("text","text").style("x",s).style("y",l).call(et,n)}),qne=(t,e)=>{const n=vP(t,[]);return(r,i,a)=>{const{color:o}=a,s=vP(a,["color"]),{color:l=o,text:u=""}=i,c={text:String(u),stroke:l,fill:l},[[f,d]]=r;return pt(new B4e).call(et,s).style("transform",`translate(${f},${d})`).call(et,c).call(et,n).node()}};qne.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Wne=(t,e)=>{const{coordinate:n}=e;return(r,i,a)=>{const{color:o,text:s="",fontSize:l,rotate:u=0,transform:c=""}=i,f={text:String(s),stroke:o,fill:o,fontSize:l,textAlign:"center",textBaseline:"middle"},[[d,h]]=r;return pt(new Va).style("x",d).style("y",h).call(et,a).style("transformOrigin","center center").style("transform",`${c}rotate(${u}deg)`).style("coordCenter",n.getCenter()).call(et,f).call(et,t).node()}};Wne.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var $4e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function V4e(t,e){const n=[],r=[],i=[];let a=!1,o=null;const s=t.length/2;for(let l=0;l<s;l++){const u=t[l],c=t[l+s];if([...u,...c].some(f=>!e(f)))a=!0;else{if(n.push(u),r.push(c),a&&o){a=!1;const[f,d]=o;i.push([f,u,d,c])}o=[u,c]}}return[n.concat(r),i]}const L7=Jh(t=>{const{areaPath:e,connectPath:n,areaStyle:r,connectStyle:i}=t.attributes,a=t.ownerDocument;pt(t).maybeAppend("connect-path",()=>a.createElement("path",{})).style("d",n).call(et,i),pt(t).maybeAppend("area-path",()=>a.createElement("path",{})).style("d",e).call(et,r)}),Ds=(t,e)=>{const{curve:n,gradient:r=!1,defined:i=u=>!Number.isNaN(u)&&u!==void 0&&u!==null,connect:a=!1}=t,o=$4e(t,["curve","gradient","defined","connect"]),{coordinate:s,document:l}=e;return(u,c,f)=>{const{color:d}=f,{color:h=d,seriesColor:p,seriesX:g,seriesY:v}=c,m=Hn(s),y=ote(s,c),b=r&&p?ate(p,g,v,r,void 0,m):h,x=Object.assign(Object.assign(Object.assign(Object.assign({},f),{stroke:b,fill:b}),y&&{transform:y}),o),[w,_]=V4e(u,i),E=Fe(x,"connect"),S=!!_.length,O=A=>pt(l.createElement("path",{})).style("d",A||"").call(et,x).node();if(On(s)){const A=T=>{const I=s.getCenter(),D=T.slice(0,T.length/2),R=T.slice(T.length/2);return wMe().angle((F,z)=>Yh(Pr(D[z],I))).outerRadius((F,z)=>mr(D[z],I)).innerRadius((F,z)=>mr(R[z],I)).defined((F,z)=>[...D[z],...R[z]].every(i)).curve(n)(R)};return!S||a&&!Object.keys(E).length?O(A(w)):S&&!a?O(A(u)):pt(new L7).style("areaStyle",x).style("connectStyle",Object.assign(Object.assign({},E),o)).style("areaPath",A(u)).style("connectPath",_.map(A).join("")).node()}else{const A=T=>{const I=T.slice(0,T.length/2),D=T.slice(T.length/2);return m?B6().y((R,F)=>I[F][1]).x1((R,F)=>I[F][0]).x0((R,F)=>D[F][0]).defined((R,F)=>[...I[F],...D[F]].every(i)).curve(n)(I):B6().x((R,F)=>I[F][0]).y1((R,F)=>I[F][1]).y0((R,F)=>D[F][1]).defined((R,F)=>[...I[F],...D[F]].every(i)).curve(n)(I)};return!S||a&&!Object.keys(E).length?O(A(w)):S&&!a?O(A(u)):pt(new L7).style("areaStyle",x).style("connectStyle",Object.assign(Object.assign({},E),o)).style("areaPath",A(u)).style("connectPath",_.map(A).join("")).node()}}};Ds.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Gne=(t,e)=>{const{coordinate:n}=e;return(...r)=>{const i=On(n)?tL:$v;return Ds(Object.assign({curve:i},t),e)(...r)}};Gne.props=Object.assign(Object.assign({},Ds.props),{defaultMarker:"square"});var q4e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Hne=(t,e)=>{const n=q4e(t,[]),{coordinate:r}=e;return(...i)=>{const a=On(r)?JQ:Hn(r)?ree:nee;return Ds(Object.assign({curve:a},n),e)(...i)}};Hne.props=Object.assign(Object.assign({},Ds.props),{defaultMarker:"smooth"});const Yne=(t,e)=>(...n)=>Ds(Object.assign({curve:iee},t),e)(...n);Yne.props=Object.assign(Object.assign({},Ds.props),{defaultMarker:"hvh"});const Une=(t,e)=>(...n)=>Ds(Object.assign({curve:aee},t),e)(...n);Une.props=Object.assign(Object.assign({},Ds.props),{defaultMarker:"vh"});const Xne=(t,e)=>(...n)=>Ds(Object.assign({curve:oee},t),e)(...n);Xne.props=Object.assign(Object.assign({},Ds.props),{defaultMarker:"hv"});const Zne=(t,e)=>{const{arrow:n=!1}=t;return(...r)=>AL(Object.assign(Object.assign({},t),{arrow:n}),e)(...r)};Zne.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var R7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Kne=(t,e)=>{const n=R7(t,[]),{document:r}=e;return(i,a,o)=>{const{color:s}=o,l=R7(o,["color"]),{color:u=s,transform:c}=a,[f,d]=i,h=Ho();return h.moveTo(f[0],f[1]),h.bezierCurveTo(f[0]/2+d[0]/2,f[1],f[0]/2+d[0]/2,d[1],d[0],d[1]),pt(r.createElement("path",{})).call(et,l).style("d",h.toString()).style("stroke",u).style("transform",c).call(et,n).node()}};Kne.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var N7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function W4e(t,e,n,r){const i=Ho();if(On(n)){const a=n.getCenter(),o=mr(t,a),l=(mr(e,a)-o)*r+o;return i.moveTo(t[0],t[1]),q0(i,t,e,a,l),i.lineTo(e[0],e[1]),i}return Hn(n)?(i.moveTo(t[0],t[1]),i.lineTo(t[0]+(e[0]-t[0])*r,t[1]),i.lineTo(t[0]+(e[0]-t[0])*r,e[1]),i.lineTo(e[0],e[1]),i):(i.moveTo(t[0],t[1]),i.lineTo(t[0],t[1]+(e[1]-t[1])*r),i.lineTo(e[0],t[1]+(e[1]-t[1])*r),i.lineTo(e[0],e[1]),i)}const Jne=(t,e)=>{const{cornerRatio:n=1/3}=t,r=N7(t,["cornerRatio"]),{coordinate:i,document:a}=e;return(o,s,l)=>{const{defaultColor:u}=l,c=N7(l,["defaultColor"]),{color:f=u,transform:d}=s,[h,p]=o,g=W4e(h,p,i,n);return pt(a.createElement("path",{})).call(et,c).style("d",g.toString()).style("stroke",f).style("transform",d).call(et,r).node()}};Jne.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var F7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Qne=(t,e)=>{const n=F7(t,[]),{coordinate:r,document:i}=e;return(a,o,s)=>{const{color:l}=s,u=F7(s,["color"]),{color:c=l,transform:f}=o,[d,h]=a,p=Ho();if(p.moveTo(d[0],d[1]),On(r)){const g=r.getCenter();p.quadraticCurveTo(g[0],g[1],h[0],h[1])}else{const g=FQ(d,h),v=mr(d,h)/2;q0(p,d,h,g,v)}return pt(i.createElement("path",{})).call(et,u).style("d",p.toString()).style("stroke",c).style("transform",f).call(et,n).node()}};Qne.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function ere(t={}){const{shapes:e}=t;return[{name:"color"},{name:"opacity"},{name:"shape",range:e},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function wa(t={}){return[...ere(t),{name:"title",scale:"identity"}]}function Lc(){return[{type:E2,channel:"color"},{type:k2,channel:["x","y"]}]}function Ep(){return[{type:E2,channel:"x"},{type:k2,channel:["y"]}]}function G4e(){return[{type:E2,channel:"color"},{type:k2,channel:["position"]}]}function Op(t={}){return ere(t)}function qr(){return[{type:cQ}]}function Kr(){return[]}function ME(t,e){return t.getBandWidth(t.invert(e))}function dd(t,e,n={}){const{x:r,y:i,series:a}=e,{x:o,y:s,series:l}=t,{style:{bandOffset:u=l?0:.5,bandOffsetX:c=u,bandOffsetY:f=u}={}}=n,d=!!(o!=null&&o.getBandWidth),h=!!(s!=null&&s.getBandWidth),p=!!(l!=null&&l.getBandWidth);return!d&&!h?g=>g:(g,v)=>{const m=d?ME(o,r[v]):0,y=h?ME(s,i[v]):0,x=p&&a?(ME(l,a[v])/2+ +a[v])*m:0,[w,_]=g;return[w+c*m+x,_+f*y]}}function Jb(t){return parseFloat(t)/100}function jL(t,e,n,r){const{x:i,y:a}=n,{innerWidth:o,innerHeight:s}=r.getOptions(),l=Array.from(t,u=>{const c=i[u],f=a[u],d=typeof c=="string"?Jb(c)*o:+c,h=typeof f=="string"?Jb(f)*s:+f;return[[d,h]]});return[t,l]}function cl(t){return typeof t=="function"?t:e=>e[t]}function CE(t,e){return Array.from(t,cl(e))}function BL(t,e){const{source:n=c=>c.source,target:r=c=>c.target,value:i=c=>c.value}=e,{links:a,nodes:o}=t,s=CE(a,n),l=CE(a,r),u=CE(a,i);return{links:a.map((c,f)=>({target:l[f],source:s[f],value:u[f]})),nodes:o||Array.from(new Set([...s,...l]),c=>({key:c}))}}var H4e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const tre=(t,e)=>{const{coordinate:n,document:r}=e;return(i,a,o)=>{const{color:s}=o,l=H4e(o,["color"]),{color:u=s,src:c="",size:f=32,transform:d=""}=a;let{width:h=f,height:p=f}=t;const[[g,v]]=i,[m,y]=n.getSize();h=typeof h=="string"?Jb(h)*m:h,p=typeof p=="string"?Jb(p)*y:p;const b=g-Number(h)/2,x=v-Number(p)/2;return pt(r.createElement("image",{})).call(et,l).style("x",b).style("y",x).style("src",c).style("stroke",u).style("transform",d).call(et,t).style("width",h).style("height",p).node()}};tre.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Y4e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function U4e(t,e){const n=Ho();if(On(e)){const r=e.getCenter(),i=[...t,t[0]],a=i.map(o=>mr(o,r));return i.forEach((o,s)=>{if(s===0){n.moveTo(o[0],o[1]);return}const l=a[s],u=t[s-1],c=a[s-1];c!==void 0&&Math.abs(l-c)<1e-10?q0(n,u,o,r,l):n.lineTo(o[0],o[1])}),n.closePath(),n}return yIe(n,t)}const nre=(t,e)=>{const{coordinate:n,document:r}=e;return(i,a,o)=>{const{color:s}=o,l=Y4e(o,["color"]),{color:u=s,transform:c}=a,f=U4e(i,n);return pt(r.createElement("path",{})).call(et,l).style("d",f.toString()).style("stroke",u).style("fill",u).style("transform",c).call(et,t).node()}};nre.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var z7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function X4e(t,e){const[n,r,i,a]=t,o=Ho();if(On(e)){const s=e.getCenter(),l=mr(s,n);return o.moveTo(n[0],n[1]),o.quadraticCurveTo(s[0],s[1],i[0],i[1]),q0(o,i,a,s,l),o.quadraticCurveTo(s[0],s[1],r[0],r[1]),q0(o,r,n,s,l),o.closePath(),o}return o.moveTo(n[0],n[1]),o.bezierCurveTo(n[0]/2+i[0]/2,n[1],n[0]/2+i[0]/2,i[1],i[0],i[1]),o.lineTo(a[0],a[1]),o.bezierCurveTo(a[0]/2+r[0]/2,a[1],a[0]/2+r[0]/2,r[1],r[0],r[1]),o.lineTo(n[0],n[1]),o.closePath(),o}const rre=(t,e)=>{const n=z7(t,[]),{coordinate:r,document:i}=e;return(a,o,s)=>{const{color:l}=s,u=z7(s,["color"]),{color:c=l,transform:f}=o,d=X4e(a,r);return pt(i.createElement("path",{})).call(et,u).style("d",d.toString()).style("fill",c||l).style("stroke",c||l).style("transform",f).call(et,n).node()}};rre.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Z4e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function K4e(t,e){const n=Ho();if(!On(e))n.moveTo(...t[0]),n.lineTo(...t[1]),n.moveTo(...t[2]),n.lineTo(...t[3]),n.moveTo(...t[4]),n.lineTo(...t[5]),n.lineTo(...t[6]),n.lineTo(...t[7]),n.closePath(),n.moveTo(...t[8]),n.lineTo(...t[9]),n.moveTo(...t[10]),n.lineTo(...t[11]),n.moveTo(...t[12]),n.lineTo(...t[13]);else{const r=e.getCenter(),[i,a]=r,o=$o(Pr(t[0],r)),s=$o(Pr(t[1],r)),l=mr(r,t[2]),u=mr(r,t[3]),c=mr(r,t[8]),f=mr(r,t[10]),d=mr(r,t[11]);n.moveTo(...t[0]),n.arc(i,a,l,o,s),n.arc(i,a,l,s,o,!0),n.moveTo(...t[2]),n.lineTo(...t[3]),n.moveTo(...t[4]),n.arc(i,a,u,o,s),n.lineTo(...t[6]),n.arc(i,a,f,s,o,!0),n.closePath(),n.moveTo(...t[8]),n.arc(i,a,c,o,s),n.arc(i,a,c,s,o,!0),n.moveTo(...t[10]),n.lineTo(...t[11]),n.moveTo(...t[12]),n.arc(i,a,d,o,s),n.arc(i,a,d,s,o,!0)}return n}const ire=(t,e)=>{const{coordinate:n,document:r}=e;return(i,a,o)=>{const{color:s,transform:l}=a,{color:u,fill:c=u,stroke:f=u}=o,d=Z4e(o,["color","fill","stroke"]),h=K4e(i,n);return pt(r.createElement("path",{})).call(et,d).style("d",h.toString()).style("stroke",f).style("fill",s||c).style("transform",l).call(et,t).node()}};ire.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var J4e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Q4e(t,e,n=4){const r=Ho();if(!On(e))return r.moveTo(...t[2]),r.lineTo(...t[3]),r.lineTo(t[3][0]-n,t[3][1]),r.lineTo(t[10][0]-n,t[10][1]),r.lineTo(t[10][0]+n,t[10][1]),r.lineTo(t[3][0]+n,t[3][1]),r.lineTo(...t[3]),r.closePath(),r.moveTo(...t[10]),r.lineTo(...t[11]),r.moveTo(t[3][0]+n/2,t[8][1]),r.arc(t[3][0],t[8][1],n/2,0,Math.PI*2),r.closePath(),r;const i=e.getCenter(),[a,o]=i,s=mr(i,t[3]),l=mr(i,t[8]),u=mr(i,t[10]),c=$o(Pr(t[2],i)),f=Math.asin(n/l),d=c-f,h=c+f;r.moveTo(...t[2]),r.lineTo(...t[3]),r.moveTo(Math.cos(d)*s+a,Math.sin(d)*s+o),r.arc(a,o,s,d,h),r.lineTo(Math.cos(h)*u+a,Math.sin(h)*u+o),r.arc(a,o,u,h,d,!0),r.lineTo(Math.cos(d)*s+a,Math.sin(d)*s+o),r.closePath(),r.moveTo(...t[10]),r.lineTo(...t[11]);const p=(d+h)/2;return r.moveTo(Math.cos(p)*(l+n/2)+a,Math.sin(p)*(l+n/2)+o),r.arc(Math.cos(p)*l+a,Math.sin(p)*l+o,n/2,p,Math.PI*2+p),r.closePath(),r}const are=(t,e)=>{const{coordinate:n,document:r}=e;return(i,a,o)=>{const{color:s,transform:l}=a,u=4,{color:c,fill:f=c,stroke:d=c}=o,h=J4e(o,["color","fill","stroke"]),p=Q4e(i,n,u);return pt(r.createElement("path",{})).call(et,h).style("d",p.toString()).style("stroke",d).style("fill",s||f).style("transform",l).call(et,t).node()}};are.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var j7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function e5e(t,e,n){return t.createElement("path",{style:Object.assign({d:`M ${e},${e} L -${e},0 L ${e},-${e} L 0,0 Z`,transformOrigin:"center"},n)})}function t5e(t,e){if(!On(e))return od().x(r=>r[0]).y(r=>r[1])(t);const n=e.getCenter();return KI()({startAngle:0,endAngle:Math.PI*2,outerRadius:mr(t[0],n),innerRadius:mr(t[1],n)})}function n5e(t,e){if(!On(t))return e;const[n,r]=t.getCenter();return`translate(${n}, ${r}) ${e||""}`}const $L=(t,e)=>{const{arrow:n,arrowSize:r=4}=t,i=j7(t,["arrow","arrowSize"]),{coordinate:a,document:o}=e;return(s,l,u)=>{const{color:c,lineWidth:f}=u,d=j7(u,["color","lineWidth"]),{color:h=c,size:p=f}=l,g=n?e5e(o,r,Object.assign({fill:i.stroke||h,stroke:i.stroke||h},Fe(i,"arrow"))):null,v=t5e(s,a),m=n5e(a,l.transform);return pt(o.createElement("path",{})).call(et,d).style("d",v).style("stroke",h).style("lineWidth",p).style("transform",m).style("markerEnd",g).call(et,i).node()}};$L.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var B7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function r5e(t,e,n){return[["M",t,e],["L",t+2*n,e-n],["L",t+2*n,e+n],["Z"]]}function i5e(t){return od().x(e=>e[0]).y(e=>e[1])(t)}function a5e(t,e,n,r,i,a,o=0){const[[s,l],[u,c]]=e;if(Hn(t)){const v=s+n,m=u+r,y=v+o,b=l+i,x=c+a;return[[v,b],[y,b],[y,x],[m,x]]}const f=l-n,d=c-r,h=f-o,p=s-i,g=u-a;return[[p,f],[p,h],[g,h],[g,d]]}const ore=(t,e)=>{const{offsetX:n=0,sourceOffsetX:r=n,targetOffsetX:i=n,offsetY:a=0,sourceOffsetY:o=a,targetOffsetY:s=a,connectLength1:l,endMarker:u=!0}=t,c=B7(t,["offsetX","sourceOffsetX","targetOffsetX","offsetY","sourceOffsetY","targetOffsetY","connectLength1","endMarker"]),{coordinate:f}=e;return(d,h,p)=>{const{color:g,connectLength1:v}=p,m=B7(p,["color","connectLength1"]),{color:y,transform:b}=h,x=a5e(f,d,o,s,r,i,l??v),w=Fe(Object.assign(Object.assign({},c),p),"endMarker");return pt(new yr).call(et,m).style("d",i5e(x)).style("stroke",y||g).style("transform",b).style("markerEnd",u?new hn({className:"marker",style:Object.assign(Object.assign({},w),{symbol:r5e})}):null).call(et,c).node()}};ore.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function o5e(t,e,n,r){const i=e.length/2,a=e.slice(0,i),o=e.slice(i);let s=yp(a,(h,p)=>Math.abs(h[1]-o[p][1]));s=Math.max(Math.min(s,i-2),1);const l=h=>[a[h][0],(a[h][1]+o[h][1])/2],u=l(s),c=l(s-1),f=l(s+1),d=$o(Pr(f,c))/Math.PI*180;return{x:u[0],y:u[1],transform:`rotate(${d})`,textAlign:"center",textBaseline:"middle"}}function sre(t,e,n,r){const{bounds:i}=n,[[a,o],[s,l]]=i,u=s-a,c=l-o,f=d=>{const{x:h,y:p}=d,g=sF(n.x,u),v=sF(n.y,c);return Object.assign(Object.assign({},d),{x:(g||h)+a,y:(v||p)+o})};return f(t==="left"?{x:0,y:c/2,textAlign:"start",textBaseline:"middle"}:t==="right"?{x:u,y:c/2,textAlign:"end",textBaseline:"middle"}:t==="top"?{x:u/2,y:0,textAlign:"center",textBaseline:"top"}:t==="bottom"?{x:u/2,y:c,textAlign:"center",textBaseline:"bottom"}:t==="top-left"?{x:0,y:0,textAlign:"start",textBaseline:"top"}:t==="top-right"?{x:u,y:0,textAlign:"end",textBaseline:"top"}:t==="bottom-left"?{x:0,y:c,textAlign:"start",textBaseline:"bottom"}:t==="bottom-right"?{x:u,y:c,textAlign:"end",textBaseline:"bottom"}:{x:u/2,y:c/2,textAlign:"center",textBaseline:"middle"})}function lre(t,e,n,r){const{y:i,y1:a,autoRotate:o,rotateToAlignArc:s}=n,l=r.getCenter(),u=cd(r,e,[i,a]),{innerRadius:c,outerRadius:f,startAngle:d,endAngle:h}=u,p=t==="inside"?(d+h)/2:h,g=VL(p,o,s),v=(()=>{const[m,y]=e,b=c+(f-c)*.5,[x,w]=t==="inside"?U0(l,p,b):FQ(m,y);return{x,y:w}})();return Object.assign(Object.assign({},v),{textAlign:t==="inside"?"center":"start",textBaseline:"middle",rotate:g})}function U0(t,e,n){return[t[0]+Math.sin(e)*n,t[1]-Math.cos(e)*n]}function VL(t,e,n){if(!e)return 0;const r=n?0:Math.sin(t)<0?90:-90;return t/Math.PI*180+r}function s5e(t,e,n,r){const{y:i,y1:a,autoRotate:o,rotateToAlignArc:s,radius:l=.5,offset:u=0}=n,c=cd(r,e,[i,a]),{startAngle:f,endAngle:d}=c,h=r.getCenter(),p=(f+d)/2,v={textAlign:"center",textBaseline:"middle",rotate:VL(p,o,s)},{innerRadius:m,outerRadius:y}=c,x=m+(y-m)*l+u,[w,_]=U0(h,p,x);return Object.assign({x:w,y:_},v)}function $7(t){return t===void 0?null:t}function ure(t,e,n,r){const{bounds:i}=n,[a]=i;return{x:$7(a[0]),y:$7(a[1])}}function Il(t,e,n,r){const{bounds:i}=n;return i.length===1?ure(t,e,n):(D2(r)?lre:bp(r)?s5e:sre)(t,e,n,r)}function l5e(t,e,n,r,i){const[a,o]=U0(t,e,n),[s,l]=U0(t,e,r),u=Math.sin(e)>0?1:-1;return[[a,o],[s,l],[s+u*i,l]]}function cre(t,e,n){const r=cd(n,t,[e.y,e.y1]),{innerRadius:i,outerRadius:a}=r;return i+(a-i)}function fre(t,e,n){const r=cd(n,t,[e.y,e.y1]),{startAngle:i,endAngle:a}=r;return(i+a)/2}function qL(t,e,n,r){const{autoRotate:i,rotateToAlignArc:a,offset:o=0,connector:s=!0,connectorLength:l=o,connectorLength2:u=0,connectorDistance:c=0}=n,f=r.getCenter(),d=fre(e,n,r),h=Math.sin(d)>0?1:-1,p=VL(d,i,a),g={textAlign:h>0||D2(r)?"start":"end",textBaseline:"middle",rotate:p},v=cre(e,n,r),m=v+(s?l:o),[[y,b],[x,w],[_,E]]=l5e(f,d,v,m,s?u:0),S=s?+c*h:0,O=_+S,A=E,T={connector:s,connectorPoints:[[x-O,w-A],[_-O,E-A]]};return Object.assign(Object.assign({x0:y,y0:b,x:_+S,y:E},g),T)}function u5e(t,e,n,r){const{bounds:i}=n;return i.length===1?ure(t,e,n):(D2(r)?lre:bp(r)?qL:sre)(t,e,n,r)}function V7(t,e={}){const{labelHeight:n=14,height:r}=e,i=bs(t,u=>u.y),a=i.length,o=new Array(a);for(let u=0;u<a;u++){const c=i[u],{y:f}=c;o[u]={y:f,y1:f+n,labels:[f]}}let s=!0;for(;s;){s=!1;for(let u=o.length-1;u>0;u--){const c=o[u],f=o[u-1];if(f.y1>c.y){s=!0,f.labels.push(...c.labels),o.splice(u,1),f.y1+=c.y1-c.y;const d=f.y1-f.y;f.y1=Math.max(Math.min(f.y1,r),d),f.y=f.y1-d}}}let l=0;for(const u of o){const{y:c,labels:f}=u;let d=c-n;for(const h of f){const p=i[l++],v=d+n-h;p.connectorPoints[0][1]-=v,p.y=d+n,d+=n}}}function q7(t,e){const n=bs(t,s=>s.y),{height:r,labelHeight:i=14}=e,a=Math.ceil(r/i);if(n.length<=a)return V7(n,e);const o=[];for(let s=0;s<n.length;s++)s<n.length-a?(n[s].opacity=0,n[s].connector=!1):o.push(n[s]);V7(o,e)}var c5e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Ty=new WeakMap;function f5e(t,e,n){const{connectorLength:r,connectorLength2:i,connectorDistance:a}=e,o=c5e(qL("outside",t,e,n),[]),s=n.getCenter(),l=cre(t,e,n),u=fre(t,e,n),c=l+r+i,f=Math.sin(u)>0?1:-1,d=s[0]+(c+ +a)*f,{x:h}=o,p=d-h;return o.x+=p,o.connectorPoints[0][0]-=p,o}function d5e(t,e,n,r,i,a){if(!bp(r))return{};if(Ty.has(e))return Ty.get(e);const o=a.map(d=>f5e(d,n,r)),{width:s,height:l}=r.getOptions(),u=o.filter(d=>d.x<s/2),c=o.filter(d=>d.x>=s/2),f=Object.assign(Object.assign({},i),{height:l});return q7(u,f),q7(c,f),o.forEach((d,h)=>Ty.set(a[h],d)),Ty.get(e)}var h5e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function p5e(t,e,n,r){if(!bp(r))return{};const{connectorLength:i,connectorLength2:a,connectorDistance:o}=n,s=h5e(qL("outside",e,n,r),[]),{x0:l,y0:u}=s,c=r.getCenter(),d=EMe(r)+i,h=Yh([l-c[0],u-c[1]]),p=Math.sin(h)>0?1:-1,[g,v]=U0(c,h,d);return s.x=g+(a+o)*p,s.y=v,s}const g5e=Object.freeze(Object.defineProperty({__proto__:null,area:o5e,bottom:Il,bottomLeft:Il,bottomRight:Il,inside:Il,left:Il,outside:u5e,right:Il,spider:d5e,surround:p5e,top:Il,topLeft:Il,topRight:Il},Symbol.toStringTag,{value:"Module"}));var W7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function v5e(t,e){return t!==void 0?t:bp(e)?"inside":Hn(e)?"right":"top"}function m5e(t,e,n,r,i,a){const{position:o}=e,{render:s}=i,l=v5e(o,n),c=r[s?"htmlLabel":l==="inside"?"innerLabel":"label"],f=Object.assign({},c,e),d=g5e[OL(l)];if(!d)throw new Error(`Unknown position: ${l}`);return Object.assign(Object.assign({},c),d(l,t,f,n,i,a))}const dre=(t,e)=>{const{coordinate:n,theme:r}=e,{render:i}=t;return(a,o,s,l)=>{const{text:u,x:c,y:f,transform:d="",transformOrigin:h,className:p=""}=o,g=W7(o,["text","x","y","transform","transformOrigin","className"]),v=m5e(a,o,n,r,t,l),{rotate:m=0,transform:y=""}=v,b=W7(v,["rotate","transform"]);return pt(new $ne).call(et,b).style("text",`${u}`).style("className",`${p} g2-label`).style("innerHTML",i?i(u,o.datum,o.index):void 0).style("labelTransform",`${y} rotate(${+m}) ${d}`.trim()).style("labelTransformOrigin",h).style("coordCenter",n.getCenter()).call(et,g).node()}};dre.props={defaultMarker:"point"};var G7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const WL=(t,e)=>{const{arrow:n,colorAttribute:r}=t,i=G7(t,["arrow","colorAttribute"]),{coordinate:a,document:o}=e;return(s,l,u)=>{const{color:c,stroke:f}=u,d=G7(u,["color","stroke"]),{d:h,color:p=c}=l,[g,v]=a.getSize();return pt(o.createElement("path",{})).call(et,d).style("d",typeof h=="function"?h({width:g,height:v}):h).style(r,p).call(et,i).node()}};WL.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const hre=(t,e)=>WL(Object.assign({colorAttribute:"fill"},t),e);hre.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const pre=(t,e)=>WL(Object.assign({fill:"none",colorAttribute:"stroke"},t),e);pre.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var y5e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const gre=(t,e)=>{const{document:n}=e;return(r,i,a)=>{const{transform:o}=i,{color:s}=a,l=y5e(a,["color"]),{color:u=s}=i,[c,...f]=r,d=Ho();return d.moveTo(...c),f.forEach(([h,p])=>{d.lineTo(h,p)}),d.closePath(),pt(n.createElement("path",{})).call(et,l).style("d",d.toString()).style("stroke",u||s).style("fill",u||s).style("fillOpacity",.4).style("transform",o).call(et,t).node()}};gre.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function vre(t){var e,n,r,i=t||1;function a(s,l){++e>i&&(r=n,o(1),++e),n[s]=l}function o(s){e=0,n=Object.create(null),s||(r=Object.create(null))}return o(),{clear:o,has:function(s){return n[s]!==void 0||r[s]!==void 0},get:function(s){var l=n[s];if(l!==void 0)return l;if((l=r[s])!==void 0)return a(s,l),l},set:function(s,l){n[s]!==void 0?n[s]=l:a(s,l)}}}vre(3);function mre(t,e=(...r)=>`${r[0]}`,n=16){const r=vre(n);return(...i)=>{const a=e(...i);let o=r.get(a);return r.has(a)?r.get(a):(o=t(...i),r.set(a,o),o)}}function b5e(t){return typeof t=="string"?t.split(" ").map(e=>{const[n,r]=e.split(":");return[+n,r]}):t}function Qb(t,e,n){const r=t?t():document.createElement("canvas");return r.width=e,r.height=n,r}const x5e=mre((t,e,n)=>{const r=Qb(n,t*2,t*2),i=r.getContext("2d"),a=t,o=t;if(e===1)i.beginPath(),i.arc(a,o,t,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{const s=i.createRadialGradient(a,o,t*e,a,o,t);s.addColorStop(0,"rgba(0,0,0,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=s,i.fillRect(0,0,2*t,2*t)}return r},t=>`${t}`);function w5e(t,e){const r=Qb(e,256,1).getContext("2d"),i=r.createLinearGradient(0,0,256,1);return b5e(t).forEach(([a,o])=>{i.addColorStop(a,o)}),r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data}function _5e(t,e,n,r,i,a){const{blur:o}=i;let s=r.length;for(;s--;){const{x:l,y:u,value:c,radius:f}=r[s],d=Math.min(c,n),h=l-f,p=u-f,g=x5e(f,1-o,a),v=(d-e)/(n-e);t.globalAlpha=Math.max(v,.001),t.drawImage(g,h,p)}return t}function S5e(t,e,n,r,i){const{minOpacity:a,opacity:o,maxOpacity:s,useGradientOpacity:l}=i,u=0,c=0,f=e,d=n,h=t.getImageData(u,c,f,d),p=h.data,g=p.length;for(let v=3;v<g;v+=4){const m=p[v],y=m*4;if(!y)continue;const b=o||Math.max(0,Math.min(s,Math.max(a,m)));p[v-3]=r[y],p[v-2]=r[y+1],p[v-1]=r[y+2],p[v]=l?r[y+3]:b}return h}function E5e(t,e,n,r,i,a,o){const s=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},a);s.minOpacity*=255,s.opacity*=255,s.maxOpacity*=255;const u=Qb(o,t,e).getContext("2d"),c=w5e(s.gradient,o);u.clearRect(0,0,t,e),_5e(u,n,r,i,s,o);const f=S5e(u,t,e,c,s),h=Qb(o,t,e).getContext("2d");return h.putImageData(f,0,0),h}var O5e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function k5e(t,e){return Object.keys(t).reduce((n,r)=>{const i=t[r];return e(i,r)||(n[r]=i),n},{})}const yre=(t,e)=>{const{gradient:n,opacity:r,maxOpacity:i,minOpacity:a,blur:o,useGradientOpacity:s}=t,l=O5e(t,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:u,createCanvas:c,document:f}=e;return(d,h,p)=>{const{transform:g}=h,[v,m]=u.getSize(),y=d.map(E=>({x:E[0],y:E[1],value:E[2],radius:E[3]})),b=fo(d,E=>E[2]),x=yn(d,E=>E[2]),_=v&&m?E5e(v,m,b,x,y,k5e({gradient:n,opacity:r,minOpacity:a,maxOpacity:i,blur:o,useGradientOpacity:s},E=>E===void 0),c):{canvas:null};return pt(f.createElement("image",{})).call(et,p).style("x",0).style("y",0).style("width",v).style("height",m).style("src",_.canvas.toDataURL()).style("transform",g).call(et,l).node()}};yre.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var A5e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const bre=(t,e)=>{const{render:n}=t,r=A5e(t,["render"]);return i=>{const[[a,o]]=i;return n(Object.assign(Object.assign({},r),{x:a,y:o}),e)}};bre.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const H7=5e3;function Y7(t,e,n){return t+(e-t)*n}function T5e(t,e,n,r){return e===0?[[t+1/2*n/Math.PI/2,r/2],[t+1/2*n/Math.PI,r],[t+n/4,r]]:e===1?[[t+1/2*n/Math.PI/2*(Math.PI-2),r],[t+1/2*n/Math.PI/2*(Math.PI-1),r/2],[t+n/4,0]]:e===2?[[t+1/2*n/Math.PI/2,-r/2],[t+1/2*n/Math.PI,-r],[t+n/4,-r]]:[[t+1/2*n/Math.PI/2*(Math.PI-2),-r],[t+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[t+n/4,0]]}function M5e(t,e,n,r,i,a,o){const s=Math.ceil(2*t/n*4)*4,l=[];let u=r;for(;u<-Math.PI*2;)u+=Math.PI*2;for(;u>0;)u-=Math.PI*2;u=u/Math.PI/2*n;const c=a-t+u-t*2;l.push(["M",c,e]);let f=0;for(let d=0;d<s;++d){const h=d%4,p=T5e(d*n/4,h,n,i);l.push(["C",p[0][0]+c,-p[0][1]+e,p[1][0]+c,-p[1][1]+e,p[2][0]+c,-p[2][1]+e]),d===s-1&&(f=p[2][0])}return l.push(["L",f+c,o+t]),l.push(["L",c,o+t]),l.push(["Z"]),l}function C5e(t,e,n,r,i,a,o,s,l,u,c){const{fill:f,fillOpacity:d,opacity:h}=i;for(let p=0;p<r;p++){const g=r<=1?1:p/(r-1),v=M5e(s,o+s*n,l,0,s/40,t,e),m=c.createElement("path",{style:{d:v,fill:f,opacity:Y7(.2,.9,g)*Number(h||d)}});a.appendChild(m);try{const y=[{transform:"translate(0, 0)"},{transform:`translate(${l*2}, 0)`}];m.animate(y,{duration:Y7(.5*H7,H7,g)*2,iterations:1/0})}catch{console.warn("off-screen group animate error!")}}}function P5e(t,e,n){return`
      M ${t} ${e-n} 
      a ${n} ${n} 0 1 0 0 ${n*2}
      a ${n} ${n} 0 1 0 0 ${-n*2}
      Z
    `}function D5e(t,e,n){const i=n*.618;return`
      M ${t-i} ${e-n}
      L ${t+i} ${e-n}
      L ${t+i} ${e+n}
      L ${t-i} ${e+n}
      Z
    `}function I5e(t,e,n){return`
      M ${t} ${e-n}
      L ${t+n} ${e}
      L ${t} ${e+n}
      L ${t-n} ${e}
      Z
    `}function L5e(t,e,n){return`
      M ${t} ${e-n}
      L ${t+n} ${e+n}
      L ${t-n} ${e+n}
      Z
    `}function R5e(t,e,n){const r=n*4/3,i=Math.max(r,n*2),a=r/2,o=t,s=a+e-i/2,l=Math.asin(a/((i-a)*.85)),u=Math.sin(l)*a,c=Math.cos(l)*a,f=o-c,d=s+u,h=t,p=s+a/Math.sin(l);return`
      M ${f} ${d}
      A ${a} ${a} 0 1 1 ${f+c*2} ${d}
      Q ${h} ${p} ${t} ${e+i/2}
      Q ${h} ${p} ${f} ${d}
      Z 
    `}const U7={pin:R5e,rect:D5e,circle:P5e,diamond:I5e,triangle:L5e};var X7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const N5e=(t="circle")=>U7[t]||U7.circle,xre=(t,e)=>{if(!e)return;const{coordinate:n}=e,{liquidOptions:r,styleOptions:i}=t,{liquidShape:a,percent:o}=r,{background:s,outline:l={},wave:u={}}=i,c=X7(i,["background","outline","wave"]),{border:f=2,distance:d=0}=l,h=X7(l,["border","distance"]),{length:p=192,count:g=3}=u;return(v,m,y)=>{const{document:b}=e.canvas,{color:x,fillOpacity:w}=y,_=Object.assign(Object.assign({fill:x},y),c),E=b.createElement("g",{}),[S,O]=n.getCenter(),A=n.getSize(),T=Math.min(...A)/2,D=(Ue(a)?a:N5e(a))(S,O,T,...A);if(Object.keys(s).length){const z=b.createElement("path",{style:Object.assign({d:D,fill:"#fff"},s)});E.appendChild(z)}if(o>0){const z=b.createElement("path",{style:{d:D}});E.appendChild(z),E.style.clipPath=z,C5e(S,O,1-o,g,_,E,z.getBBox().y,T*2,p,!0,b)}const R=b.createElement("path",{style:{d:D,fill:"transparent",lineWidth:f+2*d,stroke:"#fff"}}),F=b.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:D,stroke:x,strokeOpacity:w,lineWidth:f},_),h),{fill:"transparent"})});return E.appendChild(R),E.appendChild(F),E}};xre.props={};const Z7=(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))/2,F5e=(t,e)=>{if(!e)return;const{coordinate:n}=e;if(!(n!=null&&n.getCenter))return;const r=n.getCenter();return(i,a,o)=>{const{document:s}=e.canvas,{color:l,index:u}=a,c=s.createElement("g",{}),f=Z7(i[0],i[1]),d=Z7(i[0],r)*2,h=s.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:[["M",...i[0]],["A",f,f,0,1,0,...i[1]],["A",d+f*2,d+f*2,0,0,0,...i[2]],["A",f,f,0,1,u===0?0:1,...i[3]],["A",d,d,0,0,1,...i[0]],["Z"]]},o),vp(t,["shape","last","first"])),{fill:l||o.color})});return c.appendChild(h),c}};function K7(t,e){return t.getBandWidth(t.invert(e))}const J7={rect:fd,hollow:B2,funnel:mL,pyramid:lte},wre=()=>(t,e,n,r)=>{const{x:i,y:a,y1:o,series:s,size:l}=n,u=e.x,c=e.series,[f]=r.getSize(),d=l?l.map(g=>+g/f):null,h=l?(g,v,m)=>{const y=g+v/2,b=d[m];return[y-b/2,y+b/2]}:(g,v,m)=>[g,g+v],p=Array.from(t,g=>{const v=K7(u,i[g]),m=c?K7(c,s==null?void 0:s[g]):1,y=v*m,b=(+(s==null?void 0:s[g])||0)*v,x=+i[g]+b,[w,_]=h(x,y,g),E=+a[g],S=+o[g];return[[w,E],[_,E],[_,S],[w,S]].map(D=>r.map(D))});return[t,p]};wre.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:J7,channels:[...wa({shapes:Object.keys(J7)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...qr(),{type:Rv},{type:ad}],postInference:[...Kr(),...Ep()],interaction:{shareTooltip:!0}};const Q7={rect:fd,hollow:B2},_re=()=>(t,e,n,r)=>{const{x:i,x1:a,y:o,y1:s}=n,l=Array.from(t,u=>{const c=[+i[u],+o[u]],f=[+a[u],+o[u]],d=[+a[u],+s[u]],h=[+i[u],+s[u]];return[c,f,d,h].map(p=>r.map(p))});return[t,l]};_re.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:Q7,channels:[...wa({shapes:Object.keys(Q7)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...qr(),{type:Rv}],postInference:[...Kr(),...Ep()],interaction:{shareTooltip:!0}};const ez={line:ute,smooth:cte,hv:fte,vh:dte,hvh:hte,trail:pte},z5e=(t,e,n,r)=>{var i,a;const{series:o,x:s,y:l}=n,{x:u,y:c}=e;if(s===void 0||l===void 0)throw new Error("Missing encode for x or y channel.");const f=o?Array.from(Bn(t,v=>o[v]).values()):[t],d=f.map(v=>v[0]).filter(v=>v!==void 0),h=(((i=u==null?void 0:u.getBandWidth)===null||i===void 0?void 0:i.call(u))||0)/2,p=(((a=c==null?void 0:c.getBandWidth)===null||a===void 0?void 0:a.call(c))||0)/2,g=Array.from(f,v=>v.map(m=>r.map([+s[m]+h,+l[m]+p])));return[d,g,f]},j5e=(t,e,n,r)=>{const i=Object.entries(n).filter(([o])=>o.startsWith("position")).map(([,o])=>o);if(i.length===0)throw new Error("Missing encode for position channel.");On(r)&&i.push(i[0]);const a=Array.from(t,o=>{const s=i.map(c=>+c[o]),l=r.map(s),u=[];for(let c=0;c<l.length;c+=2)u.push([l[c],l[c+1]]);return u});return[t,a]},Sre=()=>(t,e,n,r)=>(I2(r)?j5e:z5e)(t,e,n,r);Sre.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:ez,channels:[...wa({shapes:Object.keys(ez)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...qr(),{type:yQ},{type:WI}],postInference:[...Kr(),...Ep(),...G4e()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const tz={hollow:zte,hollowDiamond:Nte,hollowHexagon:Fte,hollowSquare:jte,hollowTriangleDown:$te,hollowTriangle:Bte,hollowBowtie:Rte,hollowCircle:qte,point:Kte,plus:Zte,diamond:Hte,square:Jte,triangle:ene,hexagon:Yte,cross:Gte,bowtie:Wte,hyphen:Ute,line:Xte,tick:Qte,triangleDown:tne,circle:kL},Ere=t=>(e,n,r,i)=>{const{x:a,y:o,x1:s,y1:l,size:u,dx:c,dy:f}=r,[d,h]=i.getSize(),p=dd(n,r,t),g=m=>{const y=+((c==null?void 0:c[m])||0),b=+((f==null?void 0:f[m])||0),x=s?(+a[m]+ +s[m])/2:+a[m],w=l?(+o[m]+ +l[m])/2:+o[m],_=x+y,E=w+b;return[_,E]},v=u?Array.from(e,m=>{const[y,b]=g(m),x=+u[m],w=x/d,_=x/h,E=[y-w,b-_],S=[y+w,b+_];return[i.map(p(E,m)),i.map(p(S,m))]}):Array.from(e,m=>[i.map(p(g(m),m))]);return[e,v]};Ere.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:tz,channels:[...wa({shapes:Object.keys(tz)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...qr(),{type:ad},{type:O2}],postInference:[...Kr(),{type:uQ},...Lc()]};const nz={text:Vne,badge:qne,tag:Wne},Ore=t=>{const{cartesian:e=!1}=t;return e?jL:(n,r,i,a)=>{const{x:o,y:s}=i,l=dd(r,i,t),u=Array.from(n,c=>{const f=[+o[c],+s[c]];return[a.map(l(f,c))]});return[n,u]}};Ore.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:nz,channels:[...wa({shapes:Object.keys(nz)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize",scale:"identity"},{name:"rotate",scale:"identity"}],preInference:[...qr(),{type:T2},{type:A2}],postInference:[...Kr(),...Lc()]};const rz={cell:fd,hollow:B2},kre=()=>(t,e,n,r)=>{const{x:i,y:a}=n,o=e.x,s=e.y,l=Array.from(t,u=>{const c=o.getBandWidth(o.invert(+i[u])),f=s.getBandWidth(s.invert(+a[u])),d=+i[u],h=+a[u],p=[d,h],g=[d+c,h],v=[d+c,h+f],m=[d,h+f];return[p,g,v,m].map(y=>r.map(y))});return[t,l]};kre.props={defaultShape:"cell",defaultLabelShape:"label",shape:rz,composite:!1,channels:[...wa({shapes:Object.keys(rz)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...qr(),{type:ad},{type:O2},{type:GI}],postInference:[...Kr(),...Lc()]};const iz={area:Gne,smooth:Hne,hvh:Yne,vh:Une,hv:Xne},Are=()=>(t,e,n,r)=>{var i,a;const{x:o,y:s,y1:l,series:u}=n,{x:c,y:f}=e,d=u?Array.from(Bn(t,m=>u[m]).values()):[t],h=d.map(m=>m[0]).filter(m=>m!==void 0),p=(((i=c==null?void 0:c.getBandWidth)===null||i===void 0?void 0:i.call(c))||0)/2,g=(((a=f==null?void 0:f.getBandWidth)===null||a===void 0?void 0:a.call(f))||0)/2,v=Array.from(d,m=>{const y=m.length,b=new Array(y*2);for(let x=0;x<m.length;x++){const w=m[x];b[x]=r.map([+o[w]+p,+s[w]+g]),b[y+x]=r.map([+o[w]+p,+l[w]+g])}return b});return[h,v,d]};Are.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:iz,channels:[...wa({shapes:Object.keys(iz)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...qr(),{type:WI},{type:Rv},{type:GI}],postInference:[...Kr(),...Ep()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const az={link:Zne,arc:Qne,smooth:Kne,vhv:Jne},GL=t=>(e,n,r,i)=>{const{x:a,y:o,x1:s=a,y1:l=o}=r,u=dd(n,r,t),c=e.map(f=>[i.map(u([+a[f],+o[f]],f)),i.map(u([+s[f],+l[f]],f))]);return[e,c]};GL.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:az,channels:[...wa({shapes:Object.keys(az)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...qr(),{type:hQ},{type:pQ}],postInference:[...Kr(),...Lc()]};const oz={image:tre},Tre=t=>{const{cartesian:e}=t;return e?jL:(n,r,i,a)=>{const{x:o,y:s}=i,l=dd(r,i,t),u=Array.from(n,c=>{const f=[+o[c],+s[c]];return[a.map(l(f,c))]});return[n,u]}};Tre.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:oz,channels:[...wa({shapes:Object.keys(oz)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...qr(),{type:T2},{type:A2}],postInference:[...Kr(),...Lc()]};const sz={polygon:nre,ribbon:rre},Mre=()=>(t,e,n,r)=>{const i=Object.entries(n).filter(([s])=>s.startsWith("x")).map(([,s])=>s),a=Object.entries(n).filter(([s])=>s.startsWith("y")).map(([,s])=>s),o=t.map(s=>{const l=[];for(let u=0;u<i.length;u++){const c=i[u][s];if(c===void 0)break;const f=a[u][s];l.push(r.map([+c,+f]))}return l});return[t,o]};Mre.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:sz,channels:[...wa({shapes:Object.keys(sz)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...qr()],postInference:[...Kr(),...Lc()]};const lz={box:ire,violin:are},Cre=()=>(t,e,n,r)=>{const{x:i,y:a,y1:o,y2:s,y3:l,y4:u,series:c}=n,f=e.x,d=e.series,h=Array.from(t,p=>{const g=f.getBandWidth(f.invert(+i[p])),v=d?d.getBandWidth(d.invert(+(c==null?void 0:c[p]))):1,m=g*v,y=(+(c==null?void 0:c[p])||0)*g,b=+i[p]+y+m/2,[x,w,_,E,S]=[+a[p],+o[p],+s[p],+l[p],+u[p]];return[[b-m/2,S],[b+m/2,S],[b,S],[b,E],[b-m/2,E],[b+m/2,E],[b+m/2,w],[b-m/2,w],[b-m/2,_],[b+m/2,_],[b,w],[b,x],[b-m/2,x],[b+m/2,x]].map(A=>r.map(A))});return[t,h]};Cre.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:lz,channels:[...wa({shapes:Object.keys(lz)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...qr(),{type:ad}],postInference:[...Kr(),...Ep()],interaction:{shareTooltip:!0}};const uz={vector:AL},Pre=()=>(t,e,n,r)=>{const{x:i,y:a,size:o,rotate:s}=n,[l,u]=r.getSize(),c=t.map(f=>{const d=+s[f]/180*Math.PI,h=+o[f],p=h/l,g=h/u,v=p*Math.cos(d),m=-g*Math.sin(d);return[r.map([+i[f]-v/2,+a[f]-m/2]),r.map([+i[f]+v/2,+a[f]+m/2])]});return[t,c]};Pre.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:uz,channels:[...wa({shapes:Object.keys(uz)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...qr()],postInference:[...Kr(),...Lc()]};const cz={line:$L},Dre=t=>(e,n,r,i)=>{const{y:a}=r,o=dd(n,r,me({style:{bandOffset:0}},t)),s=Array.from(e,l=>{const u=[0,a[l]],c=[1,a[l]];return[u,c].map(f=>i.map(o(f,l)))});return[e,s]};Dre.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:cz,channels:[...Op({shapes:Object.keys(cz)}),{name:"y",required:!0}],preInference:[...qr(),{type:fQ}],postInference:[...Kr()]};const fz={line:$L},Ire=t=>(e,n,r,i)=>{const{x:a}=r,o=dd(n,r,me({style:{bandOffset:0}},t)),s=Array.from(e,l=>{const u=[a[l],1],c=[a[l],0];return[u,c].map(f=>i.map(o(f,l)))});return[e,s]};Ire.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:fz,channels:[...Op({shapes:Object.keys(fz)}),{name:"x",required:!0}],preInference:[...qr(),{type:dQ}],postInference:[...Kr()]};const dz={connector:ore},Lre=(...t)=>GL(...t);Lre.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:dz,channels:[...Op({shapes:Object.keys(dz)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...qr()],postInference:[...Kr()]};function hz(t,e,n,r){if(e)return()=>[0,1];const{[t]:i,[`${t}1`]:a}=n;return o=>{var s;const l=((s=r.getBandWidth)===null||s===void 0?void 0:s.call(r,r.invert(+a[o])))||0;return[i[o],a[o]+l]}}function HL(t={}){const{extendX:e=!1,extendY:n=!1}=t;return(r,i,a,o)=>{const s=hz("x",e,a,i.x),l=hz("y",n,a,i.y),u=Array.from(r,c=>{const[f,d]=s(c),[h,p]=l(c);return[[f,h],[d,h],[d,p],[f,p]].map(b=>o.map(b))});return[r,u]}}const pz={range:fd},Rre=()=>HL();Rre.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:pz,channels:[...Op({shapes:Object.keys(pz)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...qr()],postInference:[...Kr()]};const gz={range:fd},Nre=()=>HL({extendY:!0});Nre.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:gz,channels:[...Op({shapes:Object.keys(gz)}),{name:"x",required:!0}],preInference:[...qr(),{type:gQ}],postInference:[...Kr()]};const vz={range:fd},Fre=()=>HL({extendX:!0});Fre.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:vz,channels:[...Op({shapes:Object.keys(vz)}),{name:"y",required:!0}],preInference:[...qr(),{type:vQ}],postInference:[...Kr()]};function B5e(t){return t.target.depth}function $5e(t){return t.depth}function V5e(t,e){return e-1-t.height}function ex(t,e){return t.sourceLinks.length?t.depth:e-1}function q5e(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?fo(t.sourceLinks,B5e)-1:0}function My(t){return function(){return t}}function mz(t,e){return tx(t.source,e.source)||t.index-e.index}function yz(t,e){return tx(t.target,e.target)||t.index-e.index}function tx(t,e){return t.y0-e.y0}function PE(t){return t.value}function W5e(t){return t.index}function G5e(t){return t.nodes}function H5e(t){return t.links}function bz(t,e){const n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function xz({nodes:t}){for(const e of t){let n=e.y0,r=n;for(const i of e.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(const i of e.targetLinks)i.y1=r+i.width/2,r+=i.width}}function Y5e(){let t=0,e=0,n=1,r=1,i=24,a=8,o,s=W5e,l=ex,u,c,f,d=G5e,h=H5e,p=6;function g(z){const N={nodes:d(z),links:h(z)};return v(N),m(N),y(N),b(N),_(N),xz(N),N}g.update=function(z){return xz(z),z},g.nodeId=function(z){return arguments.length?(s=typeof z=="function"?z:My(z),g):s},g.nodeAlign=function(z){return arguments.length?(l=typeof z=="function"?z:My(z),g):l},g.nodeDepth=function(z){return arguments.length?(u=z,g):u},g.nodeSort=function(z){return arguments.length?(c=z,g):c},g.nodeWidth=function(z){return arguments.length?(i=+z,g):i},g.nodePadding=function(z){return arguments.length?(a=o=+z,g):a},g.nodes=function(z){return arguments.length?(d=typeof z=="function"?z:My(z),g):d},g.links=function(z){return arguments.length?(h=typeof z=="function"?z:My(z),g):h},g.linkSort=function(z){return arguments.length?(f=z,g):f},g.size=function(z){return arguments.length?(t=e=0,n=+z[0],r=+z[1],g):[n-t,r-e]},g.extent=function(z){return arguments.length?(t=+z[0][0],n=+z[1][0],e=+z[0][1],r=+z[1][1],g):[[t,e],[n,r]]},g.iterations=function(z){return arguments.length?(p=+z,g):p};function v({nodes:z,links:N}){z.forEach((B,$)=>{B.index=$,B.sourceLinks=[],B.targetLinks=[]});const L=new Map(z.map(B=>[s(B),B]));if(N.forEach((B,$)=>{B.index=$;let{source:G,target:W}=B;typeof G!="object"&&(G=B.source=bz(L,G)),typeof W!="object"&&(W=B.target=bz(L,W)),G.sourceLinks.push(B),W.targetLinks.push(B)}),f!=null)for(const{sourceLinks:B,targetLinks:$}of z)B.sort(f),$.sort(f)}function m({nodes:z}){for(const N of z)N.value=N.fixedValue===void 0?Math.max(Ro(N.sourceLinks,PE),Ro(N.targetLinks,PE)):N.fixedValue}function y({nodes:z}){const N=z.length;let L=new Set(z),B=new Set,$=0;for(;L.size;){if(L.forEach(G=>{G.depth=$;for(const{target:W}of G.sourceLinks)B.add(W)}),++$>N)throw new Error("circular link");L=B,B=new Set}if(u){const G=Math.max(yn(z,U=>U.depth)+1,0);let W;for(let U=0;U<z.length;U++)W=z[U],W.depth=u.call(null,W,G)}}function b({nodes:z}){const N=z.length;let L=new Set(z),B=new Set,$=0;for(;L.size;){if(L.forEach(G=>{G.height=$;for(const{source:W}of G.targetLinks)B.add(W)}),++$>N)throw new Error("circular link");L=B,B=new Set}}function x({nodes:z}){const N=Math.max(yn(z,$=>$.depth)+1,0),L=(n-t-i)/(N-1),B=new Array(N).fill(0).map(()=>[]);for(const $ of z){const G=Math.max(0,Math.min(N-1,Math.floor(l.call(null,$,N))));$.layer=G,$.x0=t+G*L,$.x1=$.x0+i,B[G]?B[G].push($):B[G]=[$]}if(c)for(const $ of B)$.sort(c);return B}function w(z){const N=fo(z,L=>(r-e-(L.length-1)*o)/Ro(L,PE));for(const L of z){let B=e;for(const $ of L){$.y0=B,$.y1=B+$.value*N,B=$.y1+o;for(const G of $.sourceLinks)G.width=G.value*N}B=(r-B+o)/(L.length+1);for(let $=0;$<L.length;++$){const G=L[$];G.y0+=B*($+1),G.y1+=B*($+1)}D(L)}}function _(z){const N=x(z);o=Math.min(a,(r-e)/(yn(N,L=>L.length)-1)),w(N);for(let L=0;L<p;++L){const B=Math.pow(.99,L),$=Math.max(1-B,(L+1)/p);S(N,B,$),E(N,B,$)}}function E(z,N,L){for(let B=1,$=z.length;B<$;++B){const G=z[B];for(const W of G){let U=0,Y=0;for(const{source:K,value:J}of W.targetLinks){const Q=J*(W.layer-K.layer);U+=R(K,W)*Q,Y+=Q}if(!(Y>0))continue;const q=(U/Y-W.y0)*N;W.y0+=q,W.y1+=q,I(W)}c===void 0&&G.sort(tx),G.length&&O(G,L)}}function S(z,N,L){for(let B=z.length,$=B-2;$>=0;--$){const G=z[$];for(const W of G){let U=0,Y=0;for(const{target:K,value:J}of W.sourceLinks){const Q=J*(K.layer-W.layer);U+=F(W,K)*Q,Y+=Q}if(!(Y>0))continue;const q=(U/Y-W.y0)*N;W.y0+=q,W.y1+=q,I(W)}c===void 0&&G.sort(tx),G.length&&O(G,L)}}function O(z,N){const L=z.length>>1,B=z[L];T(z,B.y0-o,L-1,N),A(z,B.y1+o,L+1,N),T(z,r,z.length-1,N),A(z,e,0,N)}function A(z,N,L,B){for(;L<z.length;++L){const $=z[L],G=(N-$.y0)*B;G>1e-6&&($.y0+=G,$.y1+=G),N=$.y1+o}}function T(z,N,L,B){for(;L>=0;--L){const $=z[L],G=($.y1-N)*B;G>1e-6&&($.y0-=G,$.y1-=G),N=$.y0-o}}function I({sourceLinks:z,targetLinks:N}){if(f===void 0){for(const{source:{sourceLinks:L}}of N)L.sort(yz);for(const{target:{targetLinks:L}}of z)L.sort(mz)}}function D(z){if(f===void 0)for(const{sourceLinks:N,targetLinks:L}of z)N.sort(yz),L.sort(mz)}function R(z,N){let L=z.y0-(z.sourceLinks.length-1)*o/2;for(const{target:B,width:$}of z.sourceLinks){if(B===N)break;L+=$+o}for(const{source:B,width:$}of N.targetLinks){if(B===z)break;L-=$}return L}function F(z,N){let L=N.y0-(N.targetLinks.length-1)*o/2;for(const{source:B,width:$}of N.targetLinks){if(B===z)break;L+=$+o}for(const{target:B,width:$}of z.sourceLinks){if(B===N)break;L-=$}return L}return g}const U5e={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:t=>t.nodes,links:t=>t.links,nodeSort:void 0,linkSort:void 0,iterations:6},X5e={left:$5e,right:V5e,center:q5e,justify:ex};function Z5e(t){const e=typeof t;return e==="string"?X5e[t]||ex:e==="function"?t:ex}const zre=t=>e=>{const{nodeId:n,nodeSort:r,nodeAlign:i,nodeWidth:a,nodePadding:o,nodeDepth:s,nodes:l,links:u,linkSort:c,iterations:f}=Object.assign({},U5e,t),d=Y5e().nodeSort(r).linkSort(c).links(u).nodes(l).nodeWidth(a).nodePadding(o).nodeDepth(s).nodeAlign(Z5e(i)).iterations(f).extent([[0,0],[1,1]]);typeof n=="function"&&d.nodeId(n);const h=d(e),{nodes:p,links:g}=h,v=p.map(y=>{const{x0:b,x1:x,y0:w,y1:_}=y;return Object.assign(Object.assign({},y),{x:[b,x,x,b],y:[w,w,_,_]})}),m=g.map(y=>{const{source:b,target:x}=y,w=b.x1,_=x.x0,E=y.width/2;return Object.assign(Object.assign({},y),{x:[w,w,_,_],y:[y.y0+E,y.y0-E,y.y1+E,y.y1-E]})});return{nodes:v,links:m}};zre.props={};function vl(t,e,n={},r=!1){if(su(t)||Array.isArray(t)&&r)return t;const i=Fe(t,e);return me(n,i)}function nx(t,e={}){return su(t)||Array.isArray(t)||!jre(t)?t:me(e,t)}function jre(t){if(Object.keys(t).length===0)return!0;const{title:e,items:n}=t;return e!==void 0||n!==void 0}function ml(t,e){return typeof t=="object"?Fe(t,e):t}var K5e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const J5e={nodeId:t=>t.key,nodeWidth:.02,nodePadding:.02},Q5e={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},eNe={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},tNe={textAlign:t=>t.x[0]<.5?"start":"end",position:t=>t.x[0]<.5?"right":"left",fontSize:10},Bre=t=>{const{data:e,encode:n={},scale:r,style:i={},layout:a={},nodeLabels:o=[],linkLabels:s=[],animate:l={},tooltip:u={},interaction:c}=t,{links:f,nodes:d}=BL(e,n),h=Fe(n,"node"),p=Fe(n,"link"),{key:g=A=>A.key,color:v=g}=h,{links:m,nodes:y}=zre(Object.assign(Object.assign(Object.assign({},J5e),{nodeId:cl(g)}),a))({links:f,nodes:d}),b=Fe(i,"label"),{text:x=g,spacing:w=5}=b,_=K5e(b,["text","spacing"]),E=cl(g),S=vl(u,"node",{title:E,items:[{field:"value"}]},!0),O=vl(u,"link",{title:"",items:[A=>({name:"source",value:E(A.source)}),A=>({name:"target",value:E(A.target)})]});return[me({},Q5e,{data:y,encode:Object.assign(Object.assign({},h),{color:v}),scale:r,style:Fe(i,"node"),labels:[Object.assign(Object.assign(Object.assign({},tNe),{text:x,dx:A=>A.x[0]<.5?w:-w}),_),...o],tooltip:S,animate:ml(l,"node"),axis:!1,interaction:c}),me({},eNe,{data:m,encode:p,labels:s,style:Object.assign({fill:p.color?void 0:"#aaa",lineWidth:0},Fe(i,"link")),tooltip:O,animate:ml(l,"link"),interaction:c})]};Bre.props={};function nNe(t,e){return e.value-t.value}function rNe(t,e){return e.frequency-t.frequency}function iNe(t,e){return`${t.id}`.localeCompare(`${e.id}`)}function aNe(t,e){return`${t.name}`.localeCompare(`${e.name}`)}const oNe=Object.freeze(Object.defineProperty({__proto__:null,frequency:rNe,id:iNe,name:aNe,weight:nNe},Symbol.toStringTag,{value:"Module"})),sNe={y:0,thickness:.05,weight:!1,marginRatio:.1,id:t=>t.id,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null};function lNe(t){const{y:e,thickness:n,weight:r,marginRatio:i,id:a,source:o,target:s,sourceWeight:l,targetWeight:u,sortBy:c}=Object.assign(Object.assign({},sNe),t);function f(v){const m=v.nodes.map(b=>Object.assign({},b)),y=v.edges.map(b=>Object.assign({},b));return d(m,y),h(m),p(m,y),g(m,y),{nodes:m,edges:y}}function d(v,m){m.forEach(x=>{x.source=o(x),x.target=s(x),x.sourceWeight=l(x),x.targetWeight=u(x)});const y=Bn(m,x=>x.source),b=Bn(m,x=>x.target);return v.forEach(x=>{x.id=a(x);const w=y.has(x.id)?y.get(x.id):[],_=b.has(x.id)?b.get(x.id):[];x.frequency=w.length+_.length,x.value=Ro(w,E=>E.sourceWeight)+Ro(_,E=>E.targetWeight)}),{nodes:v,edges:m}}function h(v,m){const y=typeof c=="function"?c:oNe[c];y&&v.sort(y)}function p(v,m){const y=v.length;if(!y)throw Gh("Invalid nodes: it's empty!");if(!r){const w=1/y;return v.forEach((_,E)=>{_.x=(E+.5)*w,_.y=e}),{nodes:v,edges:m}}const b=i/(2*y),x=v.reduce((w,_)=>w+=_.value,0);return v.reduce((w,_)=>{_.weight=_.value/x,_.width=_.weight*(1-i),_.height=n;const E=b+w,S=E+_.width,O=e-n/2,A=O+n;return _.x=[E,S,S,E],_.y=[O,O,A,A],w+_.width+2*b},0),{nodes:v,edges:m}}function g(v,m){const y=new Map(v.map(w=>[w.id,w]));if(!r)return m.forEach(w=>{const _=o(w),E=s(w),S=y.get(_),O=y.get(E);S&&O&&(w.x=[S.x,O.x],w.y=[S.y,O.y])}),{nodes:v,edges:m};m.forEach(w=>{w.x=[0,0,0,0],w.y=[e,e,e,e]});const b=Bn(m,w=>w.source),x=Bn(m,w=>w.target);v.forEach(w=>{const{edges:_,width:E,x:S,y:O,value:A,id:T}=w,I=b.get(T)||[],D=x.get(T)||[];let R=0;I.map(F=>{const z=F.sourceWeight/A*E;F.x[0]=S[0]+R,F.x[1]=S[0]+R+z,R+=z}),D.forEach(F=>{const z=F.targetWeight/A*E;F.x[3]=S[0]+R,F.x[2]=S[0]+R+z,R+=z})})}return f}const YL=t=>e=>lNe(t)(e);YL.props={};var wz=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const DE={y:0,thickness:.05,marginRatio:.1,id:t=>t.key,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null},uNe={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},cNe={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1}},fNe={position:"outside",fontSize:10},$re=(t,e)=>{const{data:n,encode:r={},scale:i,style:a={},layout:o={},nodeLabels:s=[],linkLabels:l=[],animate:u={},tooltip:c={}}=t,{nodes:f,links:d}=BL(n,r),h=Fe(r,"node"),p=Fe(r,"link"),{key:g=F=>F.key,color:v=g}=h,{linkEncodeColor:m=F=>F.source}=p,{nodeWidthRatio:y=DE.thickness,nodePaddingRatio:b=DE.marginRatio}=o,x=wz(o,["nodeWidthRatio","nodePaddingRatio"]),{nodes:w,edges:_}=YL(Object.assign(Object.assign(Object.assign(Object.assign({},DE),{id:cl(g),thickness:y,marginRatio:b}),x),{weight:!0}))({nodes:f,edges:d}),E=Fe(a,"label"),{text:S=g}=E,O=wz(E,["text"]),A=vl(c,"node",{title:"",items:[F=>({name:F.key,value:F.value})]},!0),T=vl(c,"link",{title:"",items:[F=>({name:`${F.source} -> ${F.target}`,value:F.value})]}),{height:I,width:D}=e,R=Math.min(I,D);return[me({},cNe,{data:_,encode:Object.assign(Object.assign({},p),{color:m}),labels:l,style:Object.assign({fill:m?void 0:"#aaa"},Fe(a,"link")),tooltip:T,animate:ml(u,"link")}),me({},uNe,{data:w,encode:Object.assign(Object.assign({},h),{color:v}),scale:i,style:Fe(a,"node"),coordinate:{type:"polar",outerRadius:(R-20)/R,startAngle:-Math.PI*2,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},fNe),{text:S}),O),...s],tooltip:A,animate:ml(u,"node"),axis:!1})]};$re.props={};const _z={path:hre,hollow:pre},Vre=t=>(e,n,r,i)=>[e,e.map(()=>[[0,0]])];Vre.props={defaultShape:"path",defaultLabelShape:"label",shape:_z,composite:!1,channels:[...wa({shapes:Object.keys(_z)}),{name:"d",scale:"identity"}],preInference:[...qr()],postInference:[...Kr()]};function dNe(t,e){return t.parent===e.parent?1:2}function hNe(t){return t.reduce(pNe,0)/t.length}function pNe(t,e){return t+e.x}function gNe(t){return 1+t.reduce(vNe,0)}function vNe(t,e){return Math.max(t,e.y)}function mNe(t){for(var e;e=t.children;)t=e[0];return t}function yNe(t){for(var e;e=t.children;)t=e[e.length-1];return t}function bNe(){var t=dNe,e=1,n=1,r=!1;function i(a){var o,s=0;a.eachAfter(function(d){var h=d.children;h?(d.x=hNe(h),d.y=gNe(h)):(d.x=o?s+=t(d,o):0,d.y=0,o=d)});var l=mNe(a),u=yNe(a),c=l.x-t(l,u)/2,f=u.x+t(u,l)/2;return a.eachAfter(r?function(d){d.x=(d.x-a.x)*e,d.y=(a.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*e,d.y=(1-(a.y?d.y/a.y:1))*n})}return i.separation=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(r=!1,e=+a[0],n=+a[1],i):r?null:[e,n]},i.nodeSize=function(a){return arguments.length?(r=!0,e=+a[0],n=+a[1],i):r?[e,n]:null},i}function xNe(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function wNe(){return this.eachAfter(xNe)}function _Ne(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function SNe(t,e){for(var n=this,r=[n],i,a,o=-1;n=r.pop();)if(t.call(e,n,++o,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function ENe(t,e){for(var n=this,r=[n],i=[],a,o,s,l=-1;n=r.pop();)if(i.push(n),a=n.children)for(o=0,s=a.length;o<s;++o)r.push(a[o]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function ONe(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function kNe(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function ANe(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function TNe(t){for(var e=this,n=MNe(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function MNe(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function CNe(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function PNe(){return Array.from(this)}function DNe(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function INe(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*LNe(){var t=this,e,n=[t],r,i,a;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function Uv(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=FNe)):e===void 0&&(e=NNe);for(var n=new tp(t),r,i=[n],a,o,s,l;r=i.pop();)if((o=e(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,s=l-1;s>=0;--s)i.push(a=o[s]=new tp(o[s])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(qre)}function RNe(){return Uv(this).eachBefore(zNe)}function NNe(t){return t.children}function FNe(t){return Array.isArray(t)?t[1]:null}function zNe(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function qre(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function tp(t){this.data=t,this.depth=this.height=0,this.parent=null}tp.prototype=Uv.prototype={constructor:tp,count:wNe,each:_Ne,eachAfter:ENe,eachBefore:SNe,find:ONe,sum:kNe,sort:ANe,path:TNe,ancestors:CNe,descendants:PNe,leaves:DNe,links:INe,copy:RNe,[Symbol.iterator]:LNe};function P1(t){return t==null?null:Wre(t)}function Wre(t){if(typeof t!="function")throw new Error;return t}function of(){return 0}function Jd(t){return function(){return t}}const jNe=1664525,BNe=1013904223,Sz=4294967296;function $Ne(){let t=1;return()=>(t=(jNe*t+BNe)%Sz)/Sz}function VNe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function qNe(t,e){let n=t.length,r,i;for(;n;)i=e()*n--|0,r=t[n],t[n]=t[i],t[i]=r;return t}function WNe(t,e){for(var n=0,r=(t=qNe(Array.from(t),e)).length,i=[],a,o;n<r;)a=t[n],o&&Gre(o,a)?++n:(o=HNe(i=GNe(i,a)),n=0);return o}function GNe(t,e){var n,r;if(IE(e,t))return[e];for(n=0;n<t.length;++n)if(Cy(e,t[n])&&IE(Mg(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Cy(Mg(t[n],t[r]),e)&&Cy(Mg(t[n],e),t[r])&&Cy(Mg(t[r],e),t[n])&&IE(Hre(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Cy(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Gre(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function IE(t,e){for(var n=0;n<e.length;++n)if(!Gre(t,e[n]))return!1;return!0}function HNe(t){switch(t.length){case 1:return YNe(t[0]);case 2:return Mg(t[0],t[1]);case 3:return Hre(t[0],t[1],t[2])}}function YNe(t){return{x:t.x,y:t.y,r:t.r}}function Mg(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,l=a-n,u=o-r,c=s-i,f=Math.sqrt(l*l+u*u);return{x:(n+a+l/f*c)/2,y:(r+o+u/f*c)/2,r:(f+i+s)/2}}function Hre(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,l=e.r,u=n.x,c=n.y,f=n.r,d=r-o,h=r-u,p=i-s,g=i-c,v=l-a,m=f-a,y=r*r+i*i-a*a,b=y-o*o-s*s+l*l,x=y-u*u-c*c+f*f,w=h*p-d*g,_=(p*x-g*b)/(w*2)-r,E=(g*v-p*m)/w,S=(h*b-d*x)/(w*2)-i,O=(d*m-h*v)/w,A=E*E+O*O-1,T=2*(a+_*E+S*O),I=_*_+S*S-a*a,D=-(Math.abs(A)>1e-6?(T+Math.sqrt(T*T-4*A*I))/(2*A):I/T);return{x:r+_+E*D,y:i+S+O*D,r:D}}function Ez(t,e,n){var r=t.x-e.x,i,a,o=t.y-e.y,s,l,u=r*r+o*o;u?(a=e.r+n.r,a*=a,l=t.r+n.r,l*=l,a>l?(i=(u+l-a)/(2*u),s=Math.sqrt(Math.max(0,l/u-i*i)),n.x=t.x-i*r-s*o,n.y=t.y-i*o+s*r):(i=(u+a-l)/(2*u),s=Math.sqrt(Math.max(0,a/u-i*i)),n.x=e.x+i*r-s*o,n.y=e.y+i*o+s*r)):(n.x=e.x+n.r,n.y=e.y)}function Oz(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function kz(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function Py(t){this._=t,this.next=null,this.previous=null}function UNe(t,e){if(!(a=(t=VNe(t)).length))return 0;var n,r,i,a,o,s,l,u,c,f,d;if(n=t[0],n.x=0,n.y=0,!(a>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(a>2))return n.r+r.r;Ez(r,n,i=t[2]),n=new Py(n),r=new Py(r),i=new Py(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<a;++l){Ez(n._,r._,i=t[l]),i=new Py(i),u=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Oz(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}f+=u._.r,u=u.next}else{if(Oz(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue e}d+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=kz(n);(i=i.next)!==r;)(s=kz(i))<o&&(n=i,o=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=WNe(n,e),l=0;l<a;++l)n=t[l],n.x-=i.x,n.y-=i.y;return i.r}function XNe(t){return Math.sqrt(t.value)}function ZNe(){var t=null,e=1,n=1,r=of;function i(a){const o=$Ne();return a.x=e/2,a.y=n/2,t?a.eachBefore(Az(t)).eachAfter(LE(r,.5,o)).eachBefore(Tz(1)):a.eachBefore(Az(XNe)).eachAfter(LE(of,1,o)).eachAfter(LE(r,a.r/Math.min(e,n),o)).eachBefore(Tz(Math.min(e,n)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(t=P1(a),i):t},i.size=function(a){return arguments.length?(e=+a[0],n=+a[1],i):[e,n]},i.padding=function(a){return arguments.length?(r=typeof a=="function"?a:Jd(+a),i):r},i}function Az(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function LE(t,e,n){return function(r){if(i=r.children){var i,a,o=i.length,s=t(r)*e||0,l;if(s)for(a=0;a<o;++a)i[a].r+=s;if(l=UNe(i,n),s)for(a=0;a<o;++a)i[a].r-=s;r.r=l+s}}}function Tz(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function KNe(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function X2(t,e,n,r,i){for(var a=t.children,o,s=-1,l=a.length,u=t.value&&(r-e)/t.value;++s<l;)o=a[s],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*u}var JNe={depth:-1},Mz={},RE={};function QNe(t){return t.id}function e8e(t){return t.parentId}function mP(){var t=QNe,e=e8e,n;function r(i){var a=Array.from(i),o=t,s=e,l,u,c,f,d,h,p,g,v=new Map;if(n!=null){const m=a.map((x,w)=>t8e(n(x,w,i))),y=m.map(Cz),b=new Set(m).add("");for(const x of y)b.has(x)||(b.add(x),m.push(x),y.push(Cz(x)),a.push(RE));o=(x,w)=>m[w],s=(x,w)=>y[w]}for(c=0,l=a.length;c<l;++c)u=a[c],h=a[c]=new tp(u),(p=o(u,c,i))!=null&&(p+="")&&(g=h.id=p,v.set(g,v.has(g)?Mz:h)),(p=s(u,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<l;++c)if(h=a[c],p=h.parent){if(d=v.get(p),!d)throw new Error("missing: "+p);if(d===Mz)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===RE&&f.children.length===1;)f=f.children[0],--l;for(let m=a.length-1;m>=0&&(h=a[m],h.data===RE);--m)h.data=null}if(f.parent=JNe,f.eachBefore(function(m){m.depth=m.parent.depth+1,--l}).eachBefore(qre),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(t=P1(i),r):t},r.parentId=function(i){return arguments.length?(e=P1(i),r):e},r.path=function(i){return arguments.length?(n=P1(i),r):n},r}function t8e(t){t=`${t}`;let e=t.length;return yP(t,e-1)&&!yP(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function Cz(t){let e=t.length;if(e<2)return"";for(;--e>1&&!yP(t,e););return t.slice(0,e)}function yP(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if(!(n&1))return!0}return!1}function n8e(t,e){return t.parent===e.parent?1:2}function NE(t){var e=t.children;return e?e[0]:t.t}function FE(t){var e=t.children;return e?e[e.length-1]:t.t}function r8e(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function i8e(t){for(var e=0,n=0,r=t.children,i=r.length,a;--i>=0;)a=r[i],a.z+=e,a.m+=e,e+=a.s+(n+=a.c)}function a8e(t,e,n){return t.a.parent===e.parent?t.a:n}function D1(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}D1.prototype=Object.create(tp.prototype);function o8e(t){for(var e=new D1(t,0),n,r=[e],i,a,o,s;n=r.pop();)if(a=n._.children)for(n.children=new Array(s=a.length),o=s-1;o>=0;--o)r.push(i=n.children[o]=new D1(a[o],o)),i.parent=n;return(e.parent=new D1(null,0)).children=[e],e}function s8e(){var t=n8e,e=1,n=1,r=null;function i(u){var c=o8e(u);if(c.eachAfter(a),c.parent.m=-c.z,c.eachBefore(o),r)u.eachBefore(l);else{var f=u,d=u,h=u;u.eachBefore(function(y){y.x<f.x&&(f=y),y.x>d.x&&(d=y),y.depth>h.depth&&(h=y)});var p=f===d?1:t(f,d)/2,g=p-f.x,v=e/(d.x+p+g),m=n/(h.depth||1);u.eachBefore(function(y){y.x=(y.x+g)*v,y.y=y.depth*m})}return u}function a(u){var c=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(c){i8e(u);var h=(c[0].z+c[c.length-1].z)/2;d?(u.z=d.z+t(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+t(u._,d._));u.parent.A=s(u,d,u.parent.A||f[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,c,f){if(c){for(var d=u,h=u,p=c,g=d.parent.children[0],v=d.m,m=h.m,y=p.m,b=g.m,x;p=FE(p),d=NE(d),p&&d;)g=NE(g),h=FE(h),h.a=u,x=p.z+y-d.z-v+t(p._,d._),x>0&&(r8e(a8e(p,u,f),u,x),v+=x,m+=x),y+=p.m,v+=d.m,b+=g.m,m+=h.m;p&&!FE(h)&&(h.t=p,h.m+=y-m),d&&!NE(g)&&(g.t=d,g.m+=v-b,f=u)}return f}function l(u){u.x*=e,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(t=u,i):t},i.size=function(u){return arguments.length?(r=!1,e=+u[0],n=+u[1],i):r?null:[e,n]},i.nodeSize=function(u){return arguments.length?(r=!0,e=+u[0],n=+u[1],i):r?[e,n]:null},i}function Z2(t,e,n,r,i){for(var a=t.children,o,s=-1,l=a.length,u=t.value&&(i-n)/t.value;++s<l;)o=a[s],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*u}var Yre=(1+Math.sqrt(5))/2;function Ure(t,e,n,r,i,a){for(var o=[],s=e.children,l,u,c=0,f=0,d=s.length,h,p,g=e.value,v,m,y,b,x,w,_;c<d;){h=i-n,p=a-r;do v=s[f++].value;while(!v&&f<d);for(m=y=v,w=Math.max(p/h,h/p)/(g*t),_=v*v*w,x=Math.max(y/_,_/m);f<d;++f){if(v+=u=s[f].value,u<m&&(m=u),u>y&&(y=u),_=v*v*w,b=Math.max(y/_,_/m),b>x){v-=u;break}x=b}o.push(l={value:v,dice:h<p,children:s.slice(c,f)}),l.dice?X2(l,n,r,i,g?r+=p*v/g:a):Z2(l,n,r,g?n+=h*v/g:i,a),g-=v,c=f}return o}const Xre=function t(e){function n(r,i,a,o,s){Ure(e,r,i,a,o,s)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(Yre);function l8e(){var t=Xre,e=!1,n=1,r=1,i=[0],a=of,o=of,s=of,l=of,u=of;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],e&&d.eachBefore(KNe),d}function f(d){var h=i[d.depth],p=d.x0+h,g=d.y0+h,v=d.x1-h,m=d.y1-h;v<p&&(p=v=(p+v)/2),m<g&&(g=m=(g+m)/2),d.x0=p,d.y0=g,d.x1=v,d.y1=m,d.children&&(h=i[d.depth+1]=a(d)/2,p+=u(d)-h,g+=o(d)-h,v-=s(d)-h,m-=l(d)-h,v<p&&(p=v=(p+v)/2),m<g&&(g=m=(g+m)/2),t(d,p,g,v,m))}return c.round=function(d){return arguments.length?(e=!!d,c):e},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(t=Wre(d),c):t},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(a=typeof d=="function"?d:Jd(+d),c):a},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:Jd(+d),c):o},c.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:Jd(+d),c):s},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:Jd(+d),c):l},c.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:Jd(+d),c):u},c}function u8e(t,e,n,r,i){var a=t.children,o,s=a.length,l,u=new Array(s+1);for(u[0]=l=o=0;o<s;++o)u[o+1]=l+=a[o].value;c(0,s,t.value,e,n,r,i);function c(f,d,h,p,g,v,m){if(f>=d-1){var y=a[f];y.x0=p,y.y0=g,y.x1=v,y.y1=m;return}for(var b=u[f],x=h/2+b,w=f+1,_=d-1;w<_;){var E=w+_>>>1;u[E]<x?w=E+1:_=E}x-u[w-1]<u[w]-x&&f+1<w&&--w;var S=u[w]-b,O=h-S;if(v-p>m-g){var A=h?(p*O+v*S)/h:v;c(f,w,S,p,g,A,m),c(w,d,O,A,g,v,m)}else{var T=h?(g*O+m*S)/h:m;c(f,w,S,p,g,v,T),c(w,d,O,p,T,v,m)}}}function c8e(t,e,n,r,i){(t.depth&1?Z2:X2)(t,e,n,r,i)}const f8e=function t(e){function n(r,i,a,o,s){if((l=r._squarify)&&l.ratio===e)for(var l,u,c,f,d=-1,h,p=l.length,g=r.value;++d<p;){for(u=l[d],c=u.children,f=u.value=0,h=c.length;f<h;++f)u.value+=c[f].value;u.dice?X2(u,i,a,o,g?a+=(s-a)*u.value/g:s):Z2(u,i,a,g?i+=(o-i)*u.value/g:o,s),g-=u.value}else r._squarify=l=Ure(e,r,i,a,o,s),l.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(Yre);function d8e(t,e){return Array.isArray(t)?typeof e=="function"?mP().path(e)(t):mP()(t):Uv(t)}function Zre(t,e=[t.data.name]){t.id=t.id||t.data.name,t.path=e,t.children&&t.children.forEach(n=>{n.id=`${t.id}/${n.data.name}`,n.path=[...e,n.data.name],Zre(n,n.path)})}function Kre(t){const e=qt(t,["data","name"]);e.replaceAll&&(t.path=e.replaceAll(".","/").split("/")),t.children&&t.children.forEach(n=>{Kre(n)})}function h8e(t,e){const n={treemapBinary:u8e,treemapDice:X2,treemapSlice:Z2,treemapSliceDice:c8e,treemapSquarify:Xre,treemapResquarify:f8e},r=t==="treemapSquarify"?n[t].ratio(e):n[t];if(!r)throw new TypeError("Invalid tile method!");return r}function Jre(t,e,n){const{value:r}=n,i=h8e(e.tile,e.ratio),a=d8e(t,e.path);wi(t)?Kre(a):Zre(a),r?a.sum(l=>e.ignoreParentValue&&l.children?0:cl(r)(l)).sort(e.sort):a.count(),l8e().tile(i).size(e.size).round(e.round).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(a);const o=a.descendants().map(l=>Object.assign(l,{id:l.id.replace(/^\//,""),x:[l.x0,l.x1],y:[l.y0,l.y1]}));return[o.filter(typeof e.layer=="function"?e.layer:l=>l.height===e.layer),o]}var p8e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const g8e=(t,e)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[t,e],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(n,r)=>r.value-n.value,layer:0}),v8e=(t,e)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:n=>n.path[1]},scale:{x:{domain:[0,t],range:[0,1]},y:{domain:[0,e],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}),m8e={fontSize:10,text:t=>Iv(t.path),position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.x1-t.x0,isTreemapLabel:!0},y8e={title:t=>{var e,n;return(n=(e=t.path)===null||e===void 0?void 0:e.join)===null||n===void 0?void 0:n.call(e,".")},items:[{field:"value"}]},b8e={title:t=>Iv(t.path),items:[{field:"value"}]},Qre=(t,e)=>{const{width:n,height:r,options:i}=e,{data:a,encode:o={},scale:s,style:l={},layout:u={},labels:c=[],tooltip:f={}}=t,d=p8e(t,["data","encode","scale","style","layout","labels","tooltip"]),h=qt(i,["interaction","treemapDrillDown"]),p=me({},g8e(n,r),u,{layer:h?y=>y.depth===1:u.layer}),[g,v]=Jre(a,p,o),m=Fe(l,"label");return me({},v8e(n,r),Object.assign(Object.assign({data:g,scale:s,style:l,labels:[Object.assign(Object.assign(Object.assign({},m8e),m),h&&{cursor:"pointer"}),...c]},d),{encode:o,tooltip:nx(f,y8e),axis:!1}),h?{interaction:Object.assign(Object.assign({},d.interaction),{treemapDrillDown:h?Object.assign(Object.assign({},h),{originData:v,layout:p}):void 0}),encode:Object.assign({color:y=>Iv(y.path)},o),tooltip:nx(f,b8e)}:{})};Qre.props={};var x8e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const w8e=(t,e)=>({size:[t,e],padding:0,sort:(n,r)=>r.value-n.value}),_8e=(t,e,n)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,t]},y:{domain:[0,e]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:n.color?void 0:r=>r.height===0?"#ddd":"#fff",stroke:n.color?void 0:r=>r.height===0?"":"#000"}}),S8e={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.r*2},E8e={title:t=>t.data.name,items:[{field:"value"}]},O8e=(t,e,n)=>{const{value:r}=n,i=wi(t)?mP().path(e.path)(t):Uv(t);return r?i.sum(a=>cl(r)(a)).sort(e.sort):i.count(),ZNe().size(e.size).padding(e.padding)(i),i.descendants()},eie=(t,e)=>{const{width:n,height:r}=e,{data:i,encode:a={},scale:o={},style:s={},layout:l={},labels:u=[],tooltip:c={}}=t,f=x8e(t,["data","encode","scale","style","layout","labels","tooltip"]),d=_8e(n,r,a),h=O8e(i,me({},w8e(n,r),l),me({},d.encode,a)),p=Fe(s,"label");return me({},d,Object.assign(Object.assign({data:h,encode:a,scale:o,style:s,labels:[Object.assign(Object.assign({},S8e),p),...u]},f),{tooltip:nx(c,E8e),axis:!1}))};eie.props={};var Pz=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function k8e(t,e){return fo(t,n=>e[n])}function A8e(t,e){return yn(t,n=>e[n])}function tie(t,e){const n=UL(t,e)*2.5-XL(t,e)*1.5;return fo(t,r=>e[r]>=n?e[r]:NaN)}function UL(t,e){return x2(t,.25,n=>e[n])}function T8e(t,e){return x2(t,.5,n=>e[n])}function XL(t,e){return x2(t,.75,n=>e[n])}function nie(t,e){const n=XL(t,e)*2.5-UL(t,e)*1.5;return yn(t,r=>e[r]<=n?e[r]:NaN)}function M8e(){return(t,e)=>{const{encode:n}=e,{y:r,x:i}=n,{value:a}=r,{value:o}=i;return[Array.from(Bn(t,u=>o[+u]).values()).flatMap(u=>{const c=tie(u,a),f=nie(u,a);return u.filter(d=>a[d]<c||a[d]>f)}),e]}}const rie=t=>{const{data:e,encode:n,style:r={},tooltip:i={},transform:a,animate:o}=t,s=Pz(t,["data","encode","style","tooltip","transform","animate"]),{point:l=!0}=r,u=Pz(r,["point"]),{y:c}=n,f={y:c,y1:c,y2:c,y3:c,y4:c},d={y1:UL,y2:T8e,y3:XL},h=vl(i,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),p=vl(i,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!l)return Object.assign({type:"box",data:e,transform:[Object.assign(Object.assign({type:"groupX",y:k8e},d),{y4:A8e})],encode:Object.assign(Object.assign({},n),f),style:u,tooltip:h},s);const g=Fe(u,"box"),v=Fe(u,"point");return[Object.assign({type:"box",data:e,transform:[Object.assign(Object.assign({type:"groupX",y:tie},d),{y4:nie})],encode:Object.assign(Object.assign({},n),f),style:g,tooltip:h,animate:ml(o,"box")},s),{type:"point",data:e,transform:[{type:M8e}],encode:n,style:Object.assign({},v),tooltip:p,animate:ml(o,"point")}]};rie.props={};const C8e={shape:bre},iie=t=>{const{cartesian:e}=t;return e?jL:(n,r,i,a)=>{const{x:o,y:s}=i,l=dd(r,i,t),u=Array.from(n,c=>{const f=[+o[c],+s[c]];return[a.map(l(f,c))]});return[n,u]}};iie.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:C8e,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...qr(),{type:T2},{type:A2},{type:mQ}]};function aie(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var a,o=n.length,s,l=0,u=0;for(a=0;a<o;++a)s=n[a],l+=s.x,u+=s.y;for(l=(l/o-t)*r,u=(u/o-e)*r,a=0;a<o;++a)s=n[a],s.x-=l,s.y-=u}return i.initialize=function(a){n=a},i.x=function(a){return arguments.length?(t=+a,i):t},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(r=+a,i):r},i}function P8e(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return oie(this.cover(e,n),e,n,t)}function oie(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a=t._root,o={data:r},s=t._x0,l=t._y0,u=t._x1,c=t._y1,f,d,h,p,g,v,m,y;if(!a)return t._root=o,t;for(;a.length;)if((g=e>=(f=(s+u)/2))?s=f:u=f,(v=n>=(d=(l+c)/2))?l=d:c=d,i=a,!(a=a[m=v<<1|g]))return i[m]=o,t;if(h=+t._x.call(null,a.data),p=+t._y.call(null,a.data),e===h&&n===p)return o.next=a,i?i[m]=o:t._root=o,t;do i=i?i[m]=new Array(4):t._root=new Array(4),(g=e>=(f=(s+u)/2))?s=f:u=f,(v=n>=(d=(l+c)/2))?l=d:c=d;while((m=v<<1|g)===(y=(p>=d)<<1|h>=f));return i[y]=a,i[m]=o,t}function D8e(t){var e,n,r=t.length,i,a,o=new Array(r),s=new Array(r),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||(o[n]=i,s[n]=a,i<l&&(l=i),i>c&&(c=i),a<u&&(u=a),a>f&&(f=a));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),n=0;n<r;++n)oie(this,o[n],s[n],t[n]);return this}function I8e(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o=i-n||1,s=this._root,l,u;n>t||t>=i||r>e||e>=a;)switch(u=(e<r)<<1|t<n,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:i=n+o,a=r+o;break;case 1:n=i-o,a=r+o;break;case 2:i=n+o,r=a-o;break;case 3:n=i-o,r=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function L8e(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function R8e(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ya(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function N8e(t,e,n){var r,i=this._x0,a=this._y0,o,s,l,u,c=this._x1,f=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new ya(h,i,a,c,f)),n==null?n=1/0:(i=t-n,a=e-n,c=t+n,f=e+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(s=p.y0)>f||(l=p.x1)<i||(u=p.y1)<a))if(h.length){var v=(o+l)/2,m=(s+u)/2;d.push(new ya(h[3],v,m,l,u),new ya(h[2],o,m,v,u),new ya(h[1],v,s,l,m),new ya(h[0],o,s,v,m)),(g=(e>=m)<<1|t>=v)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var y=t-+this._x.call(null,h.data),b=e-+this._y.call(null,h.data),x=y*y+b*b;if(x<n){var w=Math.sqrt(n=x);i=t-w,a=e-w,c=t+w,f=e+w,r=h.data}}return r}function F8e(t){if(isNaN(c=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,a,o=this._x0,s=this._y0,l=this._x1,u=this._y1,c,f,d,h,p,g,v,m;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+l)/2))?o=d:l=d,(g=f>=(h=(s+u)/2))?s=h:u=h,e=n,!(n=n[v=g<<1|p]))return this;if(!n.length)break;(e[v+1&3]||e[v+2&3]||e[v+3&3])&&(r=e,m=v)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):e?(a?e[v]=a:delete e[v],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[m]=n:this._root=n),this):(this._root=a,this)}function z8e(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function j8e(){return this._root}function B8e(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function $8e(t){var e=[],n,r=this._root,i,a,o,s,l;for(r&&e.push(new ya(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,a=n.x0,o=n.y0,s=n.x1,l=n.y1)&&r.length){var u=(a+s)/2,c=(o+l)/2;(i=r[3])&&e.push(new ya(i,u,c,s,l)),(i=r[2])&&e.push(new ya(i,a,c,u,l)),(i=r[1])&&e.push(new ya(i,u,o,s,c)),(i=r[0])&&e.push(new ya(i,a,o,u,c))}return this}function V8e(t){var e=[],n=[],r;for(this._root&&e.push(new ya(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var a,o=r.x0,s=r.y0,l=r.x1,u=r.y1,c=(o+l)/2,f=(s+u)/2;(a=i[0])&&e.push(new ya(a,o,s,c,f)),(a=i[1])&&e.push(new ya(a,c,s,l,f)),(a=i[2])&&e.push(new ya(a,o,f,c,u)),(a=i[3])&&e.push(new ya(a,c,f,l,u))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function q8e(t){return t[0]}function W8e(t){return arguments.length?(this._x=t,this):this._x}function G8e(t){return t[1]}function H8e(t){return arguments.length?(this._y=t,this):this._y}function K2(t,e,n){var r=new ZL(e??q8e,n??G8e,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function ZL(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function Dz(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var _a=K2.prototype=ZL.prototype;_a.copy=function(){var t=new ZL(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Dz(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Dz(r));return t};_a.add=P8e;_a.addAll=D8e;_a.cover=I8e;_a.data=L8e;_a.extent=R8e;_a.find=N8e;_a.remove=F8e;_a.removeAll=z8e;_a.root=j8e;_a.size=B8e;_a.visit=$8e;_a.visitAfter=V8e;_a.x=W8e;_a.y=H8e;function yi(t){return function(){return t}}function Xu(t){return(t()-.5)*1e-6}function Y8e(t){return t.x+t.vx}function U8e(t){return t.y+t.vy}function X8e(t){var e,n,r,i=1,a=1;typeof t!="function"&&(t=yi(t==null?1:+t));function o(){for(var u,c=e.length,f,d,h,p,g,v,m=0;m<a;++m)for(f=K2(e,Y8e,U8e).visitAfter(s),u=0;u<c;++u)d=e[u],g=n[d.index],v=g*g,h=d.x+d.vx,p=d.y+d.vy,f.visit(y);function y(b,x,w,_,E){var S=b.data,O=b.r,A=g+O;if(S){if(S.index>d.index){var T=h-S.x-S.vx,I=p-S.y-S.vy,D=T*T+I*I;D<A*A&&(T===0&&(T=Xu(r),D+=T*T),I===0&&(I=Xu(r),D+=I*I),D=(A-(D=Math.sqrt(D)))/D*i,d.vx+=(T*=D)*(A=(O*=O)/(v+O)),d.vy+=(I*=D)*A,S.vx-=T*(A=1-A),S.vy-=I*A)}return}return x>h+A||_<h-A||w>p+A||E<p-A}}function s(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(e){var u,c=e.length,f;for(n=new Array(c),u=0;u<c;++u)f=e[u],n[f.index]=+t(f,u,e)}}return o.initialize=function(u,c){e=u,r=c,l()},o.iterations=function(u){return arguments.length?(a=+u,o):a},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(t=typeof u=="function"?u:yi(+u),l(),o):t},o}function Z8e(t){return t.index}function Iz(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function sie(t){var e=Z8e,n=f,r,i=yi(30),a,o,s,l,u,c=1;t==null&&(t=[]);function f(v){return 1/Math.min(s[v.source.index],s[v.target.index])}function d(v){for(var m=0,y=t.length;m<c;++m)for(var b=0,x,w,_,E,S,O,A;b<y;++b)x=t[b],w=x.source,_=x.target,E=_.x+_.vx-w.x-w.vx||Xu(u),S=_.y+_.vy-w.y-w.vy||Xu(u),O=Math.sqrt(E*E+S*S),O=(O-a[b])/O*v*r[b],E*=O,S*=O,_.vx-=E*(A=l[b]),_.vy-=S*A,w.vx+=E*(A=1-A),w.vy+=S*A}function h(){if(o){var v,m=o.length,y=t.length,b=new Map(o.map((w,_)=>[e(w,_,o),w])),x;for(v=0,s=new Array(m);v<y;++v)x=t[v],x.index=v,typeof x.source!="object"&&(x.source=Iz(b,x.source)),typeof x.target!="object"&&(x.target=Iz(b,x.target)),s[x.source.index]=(s[x.source.index]||0)+1,s[x.target.index]=(s[x.target.index]||0)+1;for(v=0,l=new Array(y);v<y;++v)x=t[v],l[v]=s[x.source.index]/(s[x.source.index]+s[x.target.index]);r=new Array(y),p(),a=new Array(y),g()}}function p(){if(o)for(var v=0,m=t.length;v<m;++v)r[v]=+n(t[v],v,t)}function g(){if(o)for(var v=0,m=t.length;v<m;++v)a[v]=+i(t[v],v,t)}return d.initialize=function(v,m){o=v,u=m,h()},d.links=function(v){return arguments.length?(t=v,h(),d):t},d.id=function(v){return arguments.length?(e=v,d):e},d.iterations=function(v){return arguments.length?(c=+v,d):c},d.strength=function(v){return arguments.length?(n=typeof v=="function"?v:yi(+v),p(),d):n},d.distance=function(v){return arguments.length?(i=typeof v=="function"?v:yi(+v),g(),d):i},d}var K8e={value:()=>{}};function lie(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new I1(n)}function I1(t){this._=t}function J8e(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}I1.prototype=lie.prototype={constructor:I1,on:function(t,e){var n=this._,r=J8e(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=Q8e(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=Lz(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Lz(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new I1(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function Q8e(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Lz(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=K8e,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var np=0,Cg=0,og=0,uie=1e3,rx,Pg,ix=0,Gf=0,J2=0,X0=typeof performance=="object"&&performance.now?performance:Date,cie=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function fie(){return Gf||(cie(e9e),Gf=X0.now()+J2)}function e9e(){Gf=0}function bP(){this._call=this._time=this._next=null}bP.prototype=die.prototype={constructor:bP,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?fie():+n)+(e==null?0:+e),!this._next&&Pg!==this&&(Pg?Pg._next=this:rx=this,Pg=this),this._call=t,this._time=n,xP()},stop:function(){this._call&&(this._call=null,this._time=1/0,xP())}};function die(t,e,n){var r=new bP;return r.restart(t,e,n),r}function t9e(){fie(),++np;for(var t=rx,e;t;)(e=Gf-t._time)>=0&&t._call.call(void 0,e),t=t._next;--np}function Rz(){Gf=(ix=X0.now())+J2,np=Cg=0;try{t9e()}finally{np=0,r9e(),Gf=0}}function n9e(){var t=X0.now(),e=t-ix;e>uie&&(J2-=e,ix=t)}function r9e(){for(var t,e=rx,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:rx=n);Pg=t,xP(r)}function xP(t){if(!np){Cg&&(Cg=clearTimeout(Cg));var e=t-Gf;e>24?(t<1/0&&(Cg=setTimeout(Rz,t-X0.now()-J2)),og&&(og=clearInterval(og))):(og||(ix=X0.now(),og=setInterval(n9e,uie)),np=1,cie(Rz))}}const i9e=1664525,a9e=1013904223,Nz=4294967296;function o9e(){let t=1;return()=>(t=(i9e*t+a9e)%Nz)/Nz}function s9e(t){return t.x}function l9e(t){return t.y}var u9e=10,c9e=Math.PI*(3-Math.sqrt(5));function hie(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,l=die(f),u=lie("tick","end"),c=o9e();t==null&&(t=[]);function f(){d(),u.call("tick",e),n<r&&(l.stop(),u.call("end",e))}function d(g){var v,m=t.length,y;g===void 0&&(g=1);for(var b=0;b<g;++b)for(n+=(a-n)*i,s.forEach(function(x){x(n)}),v=0;v<m;++v)y=t[v],y.fx==null?y.x+=y.vx*=o:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=o:(y.y=y.fy,y.vy=0);return e}function h(){for(var g=0,v=t.length,m;g<v;++g){if(m=t[g],m.index=g,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var y=u9e*Math.sqrt(.5+g),b=g*c9e;m.x=y*Math.cos(b),m.y=y*Math.sin(b)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function p(g){return g.initialize&&g.initialize(t,c),g}return h(),e={tick:d,restart:function(){return l.restart(f),e},stop:function(){return l.stop(),e},nodes:function(g){return arguments.length?(t=g,h(),s.forEach(p),e):t},alpha:function(g){return arguments.length?(n=+g,e):n},alphaMin:function(g){return arguments.length?(r=+g,e):r},alphaDecay:function(g){return arguments.length?(i=+g,e):+i},alphaTarget:function(g){return arguments.length?(a=+g,e):a},velocityDecay:function(g){return arguments.length?(o=1-g,e):1-o},randomSource:function(g){return arguments.length?(c=g,s.forEach(p),e):c},force:function(g,v){return arguments.length>1?(v==null?s.delete(g):s.set(g,p(v)),e):s.get(g)},find:function(g,v,m){var y=0,b=t.length,x,w,_,E,S;for(m==null?m=1/0:m*=m,y=0;y<b;++y)E=t[y],x=g-E.x,w=v-E.y,_=x*x+w*w,_<m&&(S=E,m=_);return S},on:function(g,v){return arguments.length>1?(u.on(g,v),e):u.on(g)}}}function pie(){var t,e,n,r,i=yi(-30),a,o=1,s=1/0,l=.81;function u(h){var p,g=t.length,v=K2(t,s9e,l9e).visitAfter(f);for(r=h,p=0;p<g;++p)e=t[p],v.visit(d)}function c(){if(t){var h,p=t.length,g;for(a=new Array(p),h=0;h<p;++h)g=t[h],a[g.index]=+i(g,h,t)}}function f(h){var p=0,g,v,m=0,y,b,x;if(h.length){for(y=b=x=0;x<4;++x)(g=h[x])&&(v=Math.abs(g.value))&&(p+=g.value,m+=v,y+=v*g.x,b+=v*g.y);h.x=y/m,h.y=b/m}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=a[g.data.index];while(g=g.next)}h.value=p}function d(h,p,g,v){if(!h.value)return!0;var m=h.x-e.x,y=h.y-e.y,b=v-p,x=m*m+y*y;if(b*b/l<x)return x<s&&(m===0&&(m=Xu(n),x+=m*m),y===0&&(y=Xu(n),x+=y*y),x<o&&(x=Math.sqrt(o*x)),e.vx+=m*h.value*r/x,e.vy+=y*h.value*r/x),!0;if(h.length||x>=s)return;(h.data!==e||h.next)&&(m===0&&(m=Xu(n),x+=m*m),y===0&&(y=Xu(n),x+=y*y),x<o&&(x=Math.sqrt(o*x)));do h.data!==e&&(b=a[h.data.index]*r/x,e.vx+=m*b,e.vy+=y*b);while(h=h.next)}return u.initialize=function(h,p){t=h,n=p,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:yi(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.distanceMax=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function f9e(t,e,n){var r,i=yi(.1),a,o;typeof t!="function"&&(t=yi(+t)),e==null&&(e=0),n==null&&(n=0);function s(u){for(var c=0,f=r.length;c<f;++c){var d=r[c],h=d.x-e||1e-6,p=d.y-n||1e-6,g=Math.sqrt(h*h+p*p),v=(o[c]-g)*a[c]*u/g;d.vx+=h*v,d.vy+=p*v}}function l(){if(r){var u,c=r.length;for(a=new Array(c),o=new Array(c),u=0;u<c;++u)o[u]=+t(r[u],u,r),a[u]=isNaN(o[u])?0:+i(r[u],u,r)}}return s.initialize=function(u){r=u,l()},s.strength=function(u){return arguments.length?(i=typeof u=="function"?u:yi(+u),l(),s):i},s.radius=function(u){return arguments.length?(t=typeof u=="function"?u:yi(+u),l(),s):t},s.x=function(u){return arguments.length?(e=+u,s):e},s.y=function(u){return arguments.length?(n=+u,s):n},s}function gie(t){var e=yi(.1),n,r,i;typeof t!="function"&&(t=yi(t==null?0:+t));function a(s){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*s}function o(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return a.initialize=function(s){n=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:yi(+s),o(),a):e},a.x=function(s){return arguments.length?(t=typeof s=="function"?s:yi(+s),o(),a):t},a}function vie(t){var e=yi(.1),n,r,i;typeof t!="function"&&(t=yi(t==null?0:+t));function a(s){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*s}function o(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return a.initialize=function(s){n=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:yi(+s),o(),a):e},a.y=function(s){return arguments.length?(t=typeof s=="function"?s:yi(+s),o(),a):t},a}var d9e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const h9e={joint:!0},p9e={type:"link",axis:!1,legend:!1,encode:{x:[t=>t.source.x,t=>t.target.x],y:[t=>t.source.y,t=>t.target.y]},style:{stroke:"#999",strokeOpacity:.6}},g9e={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},v9e={text:""};function m9e(t,e,n){const{nodes:r,links:i}=t,{joint:a,nodeStrength:o,linkStrength:s}=e,{nodeKey:l=p=>p.id,linkKey:u=p=>p.id}=n,c=pie(),f=sie(i).id(cl(u));typeof o=="function"&&c.strength(o),typeof s=="function"&&f.strength(s);const d=hie(r).force("link",f).force("charge",c);a?d.force("center",aie()):d.force("x",gie()).force("y",vie()),d.stop();const h=Math.ceil(Math.log(d.alphaMin())/Math.log(1-d.alphaDecay()));for(let p=0;p<h;p++)d.tick();return{nodesData:r,linksData:i}}const mie=t=>{const{data:e,encode:n={},scale:r,style:i={},layout:a={},nodeLabels:o=[],linkLabels:s=[],animate:l={},tooltip:u={}}=t,{nodeKey:c=_=>_.id,linkKey:f=_=>_.id}=n,d=d9e(n,["nodeKey","linkKey"]),h=Object.assign({nodeKey:c,linkKey:f},d),p=Fe(h,"node"),g=Fe(h,"link"),{links:v,nodes:m}=BL(e,h),{nodesData:y,linksData:b}=m9e({links:v,nodes:m},me({},h9e,a),h),x=vl(u,"link",{items:[_=>({name:"source",value:cl(f)(_.source)}),_=>({name:"target",value:cl(f)(_.target)})]}),w=vl(u,"node",{items:[_=>({name:"key",value:cl(c)(_)})]},!0);return[me({},p9e,{data:b,encode:g,labels:s,style:Fe(i,"link"),tooltip:x,animate:ml(l,"link")}),me({},g9e,{data:y,encode:Object.assign({},p),scale:r,style:Fe(i,"node"),tooltip:w,labels:[Object.assign(Object.assign({},v9e),Fe(i,"label")),...o],animate:ml(l,"link")})]};mie.props={};const yie=t=>e=>n=>{const{field:r="value",nodeSize:i,separation:a,sortBy:o,as:s=["x","y"]}=e,[l,u]=s,c=Uv(n,p=>p.children).sum(p=>p[r]).sort(o),f=t();f.size([1,1]),i&&f.nodeSize(i),a&&f.separation(a),f(c);const d=[];c.each(p=>{p[l]=p.x,p[u]=p.y,p.name=p.data.name,d.push(p)});const h=c.links();return h.forEach(p=>{p[l]=[p.source[l],p.target[l]],p[u]=[p.source[u],p.target[u]]}),{nodes:d,edges:h}},bie=t=>yie(bNe)(t);bie.props={};const xie=t=>yie(s8e)(t);xie.props={};const y9e={sortBy:(t,e)=>e.value-t.value},b9e={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},x9e={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},w9e={text:"",fontSize:10},wie=t=>{const{data:e,encode:n={},scale:r={},style:i={},layout:a={},nodeLabels:o=[],linkLabels:s=[],animate:l={},tooltip:u={}}=t,c=n==null?void 0:n.value,{nodes:f,edges:d}=xie(Object.assign(Object.assign(Object.assign({},y9e),a),{field:c}))(e),h=vl(u,"node",{title:"name",items:["value"]},!0),p=vl(u,"link",{title:"",items:[g=>({name:"source",value:g.source.name}),g=>({name:"target",value:g.target.name})]});return[me({},x9e,{data:d,encode:Fe(n,"link"),scale:Fe(r,"link"),labels:s,style:Object.assign({stroke:"#999"},Fe(i,"link")),tooltip:p,animate:ml(l,"link")}),me({},b9e,{data:f,scale:Fe(r,"node"),encode:Fe(n,"node"),labels:[Object.assign(Object.assign({},w9e),Fe(i,"label")),...o],style:Object.assign({},Fe(i,"node")),tooltip:h,animate:ml(l,"node")})]};wie.props={};var _9e=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},S9e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function E9e(t,e){const{text:n="text",value:r="value"}=e;return t.map(i=>Object.assign(Object.assign({},i),{text:i[n],value:i[r]}))}const O9e=()=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size",shape:"tag"},scale:{x:{range:[0,1]},y:{range:[0,1]}},style:{fontFamily:t=>t.fontFamily},tooltip:{items:[t=>({name:t.text,value:t.value})]}}),KL=(t,e)=>_9e(void 0,void 0,void 0,function*(){const{width:n,height:r}=e,{data:i,encode:a={},scale:o,style:s={},layout:l={}}=t,u=S9e(t,["data","encode","scale","style","layout"]),c=E9e(i,a);return me({},O9e(),Object.assign(Object.assign({data:{value:c,transform:[Object.assign({type:"wordCloud",size:[n,r]},l)]},encode:a,scale:o,style:s},u),{axis:!1}))});KL.props={};var Zg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const k9e=(t,e)=>{const{shape:n,radius:r}=t,i=Zg(t,["shape","radius"]),a=Fe(i,"pointer"),o=Fe(i,"pin"),{shape:s}=a,l=Zg(a,["shape"]),{shape:u}=o,c=Zg(o,["shape"]),{coordinate:f,theme:d}=e;return(h,p)=>{const g=h.map(R=>f.invert(R)),[v,m,y]=OMe(f,"polar"),b=f.clone(),{color:x}=p,w=_I({startAngle:v,endAngle:m,innerRadius:y,outerRadius:r});w.push(["cartesian"]),b.update({transformations:w});const _=g.map(R=>b.map(R)),[E,S]=vL(_),[O,A]=f.getCenter(),T=Object.assign(Object.assign({x1:E,y1:S,x2:O,y2:A,stroke:x},l),i),I=Object.assign(Object.assign({cx:O,cy:A,stroke:x},c),i),D=pt(new fr);return su(s)||(typeof s=="function"?D.append(()=>s(_,p,b,d)):D.append("line").call(et,T).node()),su(u)||(typeof u=="function"?D.append(()=>u(_,p,b,d)):D.append("circle").call(et,I).node()),D.node()}},Fz={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-11/10*Math.PI,endAngle:1/10*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},A9e={style:{shape:k9e,lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},T9e={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},tooltip:!1};function M9e(t){if(je(t)){const e=Math.max(0,Math.min(t,1));return{percent:e,target:e,total:1}}return t}function C9e(t,e){const{name:n="score",target:r,total:i,percent:a,thresholds:o=[]}=M9e(t),s=a||r,l=a?1:i,u=Object.assign({y:{domain:[0,l]}},e);return o.length?{targetData:[{x:n,y:s,color:"target"}],totalData:o.map((c,f)=>({x:n,y:f>=1?c-o[f-1]:c,color:f})),target:s,total:l,scale:u}:{targetData:[{x:n,y:s,color:"target"}],totalData:[{x:n,y:s,color:"target"},{x:n,y:l-s,color:"total"}],target:s,total:l,scale:u}}function P9e(t,{target:e,total:n}){const{content:r}=t;return r?r(e,n):e.toString()}const _ie=t=>{const{data:e={},scale:n={},style:r={},animate:i={},transform:a=[]}=t,o=Zg(t,["data","scale","style","animate","transform"]),{targetData:s,totalData:l,target:u,total:c,scale:f}=C9e(e,n),d=Fe(r,"text"),{tooltip:h}=d,p=Zg(d,["tooltip"]),g=mTe(r,["pointer","pin"]),v=Fe(r,"arc"),m=v.shape;return[me({},Fz,Object.assign({type:"interval",transform:[{type:"stackY"}],data:l,scale:f,style:m==="round"?Object.assign(Object.assign({},v),{shape:F5e}):v,animate:typeof i=="object"?Fe(i,"arc"):i},o)),me({},Fz,A9e,Object.assign({type:"point",data:s,scale:f,style:g,animate:typeof i=="object"?Fe(i,"indicator"):i},o)),me({},T9e,{style:Object.assign({text:P9e(p,{target:u,total:c})},p),tooltip:h,animate:typeof i=="object"?Fe(i,"text"):i})]};_ie.props={};const zz={density:gre},Sie=()=>(t,e,n,r)=>{const{x:i,series:a}=n,o=Object.entries(n).filter(([f])=>f.startsWith("y")).map(([,f])=>f),s=Object.entries(n).filter(([f])=>f.startsWith("size")).map(([,f])=>f);if(i===void 0||o===void 0||s===void 0)throw new Error("Missing encode for x or y or size channel.");const l=e.x,u=e.series,c=Array.from(t,f=>{const d=l.getBandWidth(l.invert(+i[f])),h=u?u.getBandWidth(u.invert(+(a==null?void 0:a[f]))):1,p=d*h,g=(+(a==null?void 0:a[f])||0)*d,v=+i[f]+g+p/2;return[...o.map((y,b)=>[v+ +s[b][f]/t.length,+o[b][f]]),...o.map((y,b)=>[v-+s[b][f]/t.length,+o[b][f]]).reverse()].map(y=>r.map(y))});return[t,c]};Sie.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:zz,channels:[...wa({shapes:Object.keys(zz)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...qr(),{type:Rv},{type:ad}],postInference:[...Kr(),...Ep()],interaction:{shareTooltip:!0}};const jz={heatmap:yre},Eie=t=>(e,n,r,i)=>{const{x:a,y:o,size:s,color:l}=r,u=Array.from(e,c=>{const f=s?+s[c]:40;return[...i.map([+a[c],+o[c]]),l[c],f]});return[[0],[u]]};Eie.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:jz,channels:[...wa({shapes:Object.keys(jz)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...qr(),{type:ad},{type:O2}],postInference:[...Kr(),...Lc()]};var D9e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const I9e={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:xre},animate:{enter:{type:"fadeIn"}}},L9e={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},Oie=t=>{const{data:e={},style:n={},animate:r}=t,i=D9e(t,["data","style","animate"]),a=Math.max(0,je(e)?e:e==null?void 0:e.percent),o=[{percent:a,type:"liquid"}],s=Object.assign(Object.assign({},Fe(n,"text")),Fe(n,"content")),l=Fe(n,"outline"),u=Fe(n,"wave"),c=Fe(n,"background");return[me({},I9e,Object.assign({type:"interval",data:o,style:{liquidOptions:{percent:a,liquidShape:n==null?void 0:n.shape},styleOptions:Object.assign(Object.assign({},n),{outline:l,wave:u,background:c})},animate:r},i)),me({},L9e,{style:Object.assign({text:`${Ub(a*100)} %`},s),animate:r})]};Oie.props={};const kie=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];kie.props={};const Aie=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];Aie.props={};const Tie=t=>new Wh(t);Tie.props={};const Mie=t=>new Gn(t);Mie.props={};const Cie=t=>new PJ(t);Cie.props={};const Pie=t=>new RJ(t);Pie.props={};const Die=t=>new zJ(t);Die.props={};const Iie=t=>new sTe(t);Iie.props={};const Lie=t=>new U3e(t);Lie.props={};const Rie=t=>new BJ(t);Rie.props={};const Nie=t=>new S2(t);Nie.props={};const Fie=t=>new YJ(t);Fie.props={};const zie=t=>new GJ(t);zie.props={};const jie=t=>new H3e(t);jie.props={};const Bie=t=>new F6(t);Bie.props={};const $ie=t=>new jI(t);$ie.props={};function JL({colorDefault:t,colorBlack:e,colorWhite:n,colorStroke:r,colorBackground:i,padding1:a,padding2:o,padding3:s,alpha90:l,alpha65:u,alpha45:c,alpha25:f,alpha10:d,category10:h,category20:p,sizeDefault:g=1,padding:v="auto",margin:m=16}){return{padding:v,margin:m,size:g,color:t,category10:h,category20:p,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:i,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:e,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,lineWidth:0,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:r,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,lineWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:r,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:r,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:r,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:r,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:r,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:e,gridStrokeOpacity:d,labelAlign:"horizontal",labelFill:e,labelOpacity:c,labelFontSize:12,labelFontWeight:"normal",labelSpacing:a,line:!1,lineLineWidth:.5,lineStroke:e,lineStrokeOpacity:c,tickLength:4,tickLineWidth:1,tickStroke:e,tickOpacity:c,titleFill:e,titleOpacity:l,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom",titleTransform:"translate(0, 8)"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransform:"rotate(-90) translate(0, -8)",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:e,itemLabelFillOpacity:l,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,itemSpacing:[a,a],itemValueFill:e,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:e,navButtonFillOpacity:.65,navPageNumFill:e,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:e,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:e,tickStrokeOpacity:.25,rowPadding:a,colPadding:o,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:e,handleLabelFillOpacity:c,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:e,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:e,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:e,labelFillOpacity:c,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:l,tickStroke:e,tickStrokeOpacity:c},label:{fill:e,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:e,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:n,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:e,fontWeight:"normal"},slider:{trackSize:16,trackFill:r,trackFillOpacity:1,selectionFill:t,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:e,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:e,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:e,titleFillOpacity:l,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:e,subtitleFillOpacity:u,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"},tooltip:{css:{".g2-tooltip":{"font-family":"sans-serif"}}}}}const R9e={colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1},N9e=JL(R9e),QL=t=>me({},N9e,t);QL.props={};const Vie=t=>me({},QL(),{category10:"category10",category20:"category20"},t);Vie.props={};const F9e={colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25},z9e=JL(F9e),qie=t=>me({},z9e,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{".g2-tooltip":{background:"#1f1f1f",opacity:.95},".g2-tooltip-title":{color:"#A6A6A6"},".g2-tooltip-list-item-name-label":{color:"#A6A6A6"},".g2-tooltip-list-item-value":{color:"#A6A6A6"}}}},t),Wie=t=>Object.assign({},qie(),{category10:"category10",category20:"category20"},t);Wie.props={};const j9e={colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1},B9e=JL(j9e),Gie=t=>me({},B9e,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(e,n)=>n!==0},axisRight:{gridFilter:(e,n)=>n!==0},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},t);Gie.props={};function $9e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ax(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function V9e(t){return t=ax(Math.abs(t)),t?t[1]:NaN}function q9e(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function W9e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var G9e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function wP(t){if(!(e=G9e.exec(t)))throw new Error("invalid format: "+t);var e;return new eR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}wP.prototype=eR.prototype;function eR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}eR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function H9e(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Hie;function Y9e(t,e){var n=ax(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Hie=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ax(t,Math.max(0,e+a-1))[0]}function Bz(t,e){var n=ax(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const $z={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:$9e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Bz(t*100,e),r:Bz,s:Y9e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Vz(t){return t}var qz=Array.prototype.map,Wz=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function U9e(t){var e=t.grouping===void 0||t.thousands===void 0?Vz:q9e(qz.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Vz:W9e(qz.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=wP(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,v=f.zero,m=f.width,y=f.comma,b=f.precision,x=f.trim,w=f.type;w==="n"?(y=!0,w="g"):$z[w]||(b===void 0&&(b=12),x=!0,w="g"),(v||d==="0"&&h==="=")&&(v=!0,d="0",h="=");var _=g==="$"?n:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",E=g==="$"?r:/[%p]/.test(w)?o:"",S=$z[w],O=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function A(T){var I=_,D=E,R,F,z;if(w==="c")D=S(T)+D,T="";else{T=+T;var N=T<0||1/T<0;if(T=isNaN(T)?l:S(Math.abs(T),b),x&&(T=H9e(T)),N&&+T==0&&p!=="+"&&(N=!1),I=(N?p==="("?p:s:p==="-"||p==="("?"":p)+I,D=(w==="s"?Wz[8+Hie/3]:"")+D+(N&&p==="("?")":""),O){for(R=-1,F=T.length;++R<F;)if(z=T.charCodeAt(R),48>z||z>57){D=(z===46?i+T.slice(R+1):T.slice(R))+D,T=T.slice(0,R);break}}}y&&!v&&(T=e(T,1/0));var L=I.length+T.length+D.length,B=L<m?new Array(m-L+1).join(d):"";switch(y&&v&&(T=e(B+T,B.length?m-D.length:1/0),B=""),h){case"<":T=I+T+D+B;break;case"=":T=I+B+T+D;break;case"^":T=B.slice(0,L=B.length>>1)+I+T+D+B.slice(L);break;default:T=B+I+T+D;break}return a(T)}return A.toString=function(){return f+""},A}function c(f,d){var h=u((f=wP(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(V9e(d)/3)))*3,g=Math.pow(10,-p),v=Wz[8+p/3];return function(m){return h(g*m)+v}}return{format:u,formatPrefix:c}}var Dy,Rc;X9e({thousands:",",grouping:[3],currency:["$",""]});function X9e(t){return Dy=U9e(t),Rc=Dy.format,Dy.formatPrefix,Dy}var Z9e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function K9e(t){return class extends Wv{constructor(e){super(e),this.descriptor=t}connectedCallback(){var e,n;(n=(e=this.descriptor).render)===null||n===void 0||n.call(e,this.attributes,this)}update(e={}){var n,r;this.attr(me({},this.attributes,e)),(r=(n=this.descriptor).render)===null||r===void 0||r.call(n,this.attributes,this)}}}function Gz(t,e,n){return t.querySelector(e)?pt(t).select(e):pt(t).append(n)}function Q2(t){return Array.isArray(t)?t.join(", "):`${t||""}`}function Yie(t,e){const n={display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"};let{flexDirection:r,justifyContent:i,alignItems:a}=n;const o={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};return t in o&&([r,i,a]=o[t]),Object.assign({display:"flex",flexDirection:r,justifyContent:i,alignItems:a},e)}class Uie extends g4e{get child(){var e;return(e=this.children)===null||e===void 0?void 0:e[0]}update(e){var n;this.attr(e);const{subOptions:r}=e;(n=this.child)===null||n===void 0||n.update(r)}}class J9e extends Uie{update(e){var n;const{subOptions:r}=e;this.attr(e),(n=this.child)===null||n===void 0||n.update(r)}}function fl(t,e){var n;return(n=t.filter(r=>r.getOptions().name===e))===null||n===void 0?void 0:n[0]}function Q9e(t){return t==="horizontal"||t===0}function eFe(t){return t==="vertical"||t===-Math.PI/2}function Xie(t,e,n){const{bbox:r}=t,{position:i="top",size:a,length:o}=e,s=["top","bottom","center"].includes(i),[l,u]=s?[r.height,r.width]:[r.width,r.height],{defaultSize:c,defaultLength:f}=n.props,d=a||c||l,h=o||f||u,p=s?"horizontal":"vertical",[g,v]=s?[h,d]:[d,h];return{orientation:p,width:g,height:v,size:d,length:h}}function tFe(t){return t.find(e=>e.getOptions().domain.length>0).getOptions().domain}function ew(t){const e=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:n}=t,r=Z9e(t,["style"]),i={};return Object.entries(r).forEach(([a,o])=>{e.includes(a)?i[`show${Bo(a)}`]=o:i[a]=o}),Object.assign(Object.assign({},i),n)}var Zie=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Kie(t,e){const{eulerAngles:n,origin:r}=e;r&&t.setOrigin(r),n&&t.rotate(n[0],n[1],n[2])}function Jie(t){const{innerWidth:e,innerHeight:n,depth:r}=t.getOptions();return[e,n,r]}function nFe(t,e){const{width:n,height:r}=e.getOptions();return i=>{if(!lee(e))return i;const a=t==="bottom"?[i,1]:[0,i],o=e.map(a);if(t==="bottom"){const s=o[0];return new Gn({domain:[0,n],range:[0,1]}).map(s)}else if(t==="left"){const s=o[1];return new Gn({domain:[0,r],range:[0,1]}).map(s)}return i}}function rFe(t,e,n){if(t.getTicks)return t.getTicks();if(!n)return e;const[r,i]=Kl(e,o=>+o),{tickCount:a}=t.getOptions();return n(r,i,a)}function iFe(t,e){if(On(e))return h=>h;const n=e.getOptions(),{innerWidth:r,innerHeight:i,insetTop:a,insetBottom:o,insetLeft:s,insetRight:l}=n,[u,c,f]=t==="left"||t==="right"?[a,o,i]:[s,l,r],d=new Gn({domain:[0,1],range:[u/f,1-c/f]});return h=>d.map(h)}function Qie(t,e,n,r,i,a,o,s){var l;(n!==void 0||a!==void 0)&&t.update(Object.assign(Object.assign({},n&&{tickCount:n}),a&&{tickMethod:a}));const u=rFe(t,e,a),c=i?u.filter(i):u,f=m=>m instanceof Date?String(m):typeof m=="object"&&m?m:String(m),d=r||((l=t.getFormatter)===null||l===void 0?void 0:l.call(t))||f,h=iFe(o,s),p=nFe(o,s),g=m=>["top","bottom","center","outer"].includes(m),v=m=>["left","right"].includes(m);return On(s)||Hn(s)?c.map((m,y,b)=>{var x,w;const _=((x=t.getBandWidth)===null||x===void 0?void 0:x.call(t,m))/2||0,E=h(t.map(m)+_);return{value:D2(s)&&o==="center"||Hn(s)&&((w=t.getTicks)===null||w===void 0?void 0:w.call(t))&&g(o)||Hn(s)&&v(o)?1-E:E,label:f(d(Ub(m),y,b)),id:String(y)}}):c.map((m,y,b)=>{var x;const w=((x=t.getBandWidth)===null||x===void 0?void 0:x.call(t,m))/2||0,_=p(h(t.map(m)+w));return{value:v(o)?1-_:_,label:f(d(Ub(m),y,b)),id:String(y)}})}function aFe(t,e,n="xy"){const[r,i,a]=Jie(e);return n==="xy"?t.includes("bottom")||t.includes("top")?i:r:n==="xz"?t.includes("bottom")||t.includes("top")?a:r:t.includes("bottom")||t.includes("top")?i:a}function oFe(t=[],e){if(t.length>0)return t;const{labelAutoRotate:n,labelAutoHide:r,labelAutoEllipsis:i,labelAutoWrap:a}=e,o=[],s=(l,u)=>{u&&o.push(Object.assign(Object.assign({},l),u))};return s({type:"rotate",optionalAngles:[0,15,30,45,60,90]},n),s({type:"ellipsis",minLength:20},i),s({type:"hide"},r),s({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},a),o}function sFe(t,e,n,r,i){const{x:a,y:o,width:s,height:l}=e,u=[a+s/2,o+l/2],c=Math.min(s,l)/2,[f,d]=nL(i),[h,p]=Jie(i),g=Math.min(h,p)/2,v={center:u,radius:c,startAngle:f,endAngle:d,gridLength:(r-n)*g};if(t==="inner"){const{insetLeft:m,insetTop:y}=i.getOptions();return Object.assign(Object.assign({},v),{center:[u[0]-m,u[1]-y],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},v),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}function lFe(t,e,n){return SMe(e)||I2(e)?!1:t===void 0?!!n.getTicks:t}function uFe(t){const{depth:e}=t.getOptions();return e?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}function cFe(t,e,n,r,i){const{x:a,y:o,width:s,height:l}=n;if(t==="bottom")return{startPos:[a,o],endPos:[a+s,o]};if(t==="left")return{startPos:[a+s,o+l],endPos:[a+s,o]};if(t==="right")return{startPos:[a,o+l],endPos:[a,o]};if(t==="top")return{startPos:[a,o+l],endPos:[a+s,o+l]};if(t==="center"){if(e==="vertical")return{startPos:[a,o],endPos:[a,o+l]};if(e==="horizontal")return{startPos:[a,o],endPos:[a+s,o]};if(typeof e=="number"){const[u,c]=r.getCenter(),[f,d]=L2(r),[h,p]=nL(r),g=Math.min(s,l)/2,{insetLeft:v,insetTop:m}=r.getOptions(),y=f*g,b=d*g,[x,w]=[u+a-v,c+o-m],[_,E]=[Math.cos(e),Math.sin(e)],S=[x+b*_,w+b*E],O=[x+y*_,w+y*E],A=()=>{const{domain:I}=i.getOptions();return I.length},T=On(r)&&i?A():3;return{startPos:S,endPos:O,gridClosed:Math.abs(p-h-360)<1e-6,gridCenter:[x,w],gridControlAngles:new Array(T).fill(0).map((I,D,R)=>(p-h)/T*D)}}}return{}}const fFe=t=>{const{order:e,size:n,position:r,orientation:i,labelFormatter:a,tickFilter:o,tickCount:s,tickMethod:l,important:u={},style:c={},indexBBox:f,title:d,grid:h=!1}=t,p=Zie(t,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","important","style","indexBBox","title","grid"]);return({scales:[g],value:v,coordinate:m,theme:y})=>{const{bbox:b}=v,{domain:x}=g.getOptions(),w=Qie(g,x,s,a,o,l,r,m),_=f?w.map((D,R)=>{const F=f.get(R);return!F||F[0]!==D.label?D:Object.assign(Object.assign({},D),{bbox:F[1]})}):w,[E,S]=L2(m),O=sFe(r,b,E,S,m),{axis:A,axisArc:T={}}=y,I=ew(me({},A,T,O,Object.assign(Object.assign({type:"arc",data:_,titleText:Q2(d),grid:h},p),u)));return new U2({style:vp(I,["transform"])})}};function dFe(t,e,n,r,i,a){const o=n.axis,s=["top","right","bottom","left"].includes(i)?n[`axis${VI(i)}`]:n.axisLinear,l=t.getOptions().name,u=n[`axis${Bo(l)}`]||{};return Object.assign({},o,s,u)}function hFe(t,e,n,r,i,a){const o=dFe(t,e,n,r,i);return i==="center"?Object.assign(Object.assign(Object.assign(Object.assign({},o),{labelDirection:r==="right"?"negative":"positive"}),r==="center"?{labelTransform:"translate(50%,0)"}:null),{tickDirection:r==="right"?"negative":"positive",labelSpacing:r==="center"?0:4,titleSpacing:eFe(a)?10:0,tick:r==="center"?!1:void 0}):o}const pFe=t=>{const{direction:e="left",important:n={},labelFormatter:r,order:i,orientation:a,actualPosition:o,position:s,size:l,style:u={},title:c,tickCount:f,tickFilter:d,tickMethod:h,transform:p,indexBBox:g}=t,v=Zie(t,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","transform","indexBBox"]);return({scales:m,value:y,coordinate:b,theme:x})=>{const{bbox:w}=y,[_]=m,{domain:E,xScale:S}=_.getOptions(),O=hFe(_,b,x,e,s,a),A=Object.assign(Object.assign(Object.assign({},O),u),v),T=aFe(o||s,b,t.plane),I=cFe(s,a,w,b,S),D=uFe(b),R=Qie(_,E,f,r,d,h,s,b),F=g?R.map((L,B)=>{const $=g.get(B);return!$||$[0]!==L.label?L:Object.assign(Object.assign({},L),{bbox:$[1]})}):R,z=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},A),{type:"linear",data:F,crossSize:l,titleText:Q2(c),labelOverlap:oFe(p,A),grid:lFe(A.grid,b,_),gridLength:T,line:!0,indexBBox:g}),A.line?null:{lineOpacity:0}),I),D),n);return z.labelOverlap.find(L=>L.type==="hide")&&(z.crossSize=!1),new U2({className:"axis",style:ew(z)})}},eae=t=>e=>{const{labelFormatter:n,labelFilter:r=()=>!0}=e;return i=>{var a;const{scales:[o]}=i,s=((a=o.getTicks)===null||a===void 0?void 0:a.call(o))||o.getOptions().domain,l=typeof n=="string"?Rc(n):n,u=(f,d,h)=>r(s[d],d,s),c=Object.assign(Object.assign({},e),{labelFormatter:l,labelFilter:u,scale:o});return t(c)(i)}},Nc=eae(pFe),tae=eae(fFe);Nc.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};tae.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const nae=t=>(...e)=>{const n=Nc(Object.assign({},{crossPadding:50},t))(...e);return Kie(n,t),n};nae.props=Object.assign(Object.assign({},Nc.props),{defaultPosition:"bottom"});const rae=t=>(...e)=>{const n=Nc(Object.assign({},{crossPadding:10},t))(...e);return Kie(n,t),n};rae.props=Object.assign(Object.assign({},Nc.props),{defaultPosition:"left"});var gFe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function vFe(t){const e=t%(Math.PI*2);return e===Math.PI/2?{titleTransform:"translate(0, 50%)"}:e>-Math.PI/2&&e<Math.PI/2?{titleTransform:"translate(50%, 0)"}:e>Math.PI/2&&e<Math.PI*3/2?{titleTransform:"translate(-50%, 0)"}:{}}function mFe(t,e,n,r){const{radar:i}=t,[a]=r,o=a.getOptions().name,[s,l]=nL(n),{axisRadar:u={}}=e;return Object.assign(Object.assign({},u),{grid:o==="position",gridConnect:"line",gridControlAngles:new Array(i.count).fill(0).map((c,f)=>(l-s)/i.count*f)})}const iae=t=>{const{important:e={}}=t,n=gFe(t,["important"]);return r=>{const{theme:i,coordinate:a,scales:o}=r;return Nc(Object.assign(Object.assign(Object.assign({},n),vFe(t.orientation)),{important:Object.assign(Object.assign({},mFe(t,i,a,o)),e)}))(r)}};iae.props=Object.assign(Object.assign({},Nc.props),{defaultPosition:"center"});var yFe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function bFe(t,e){const n=fl(t,"shape"),r=fl(t,"color"),i=n?n.clone():null,a=[];for(const[s,l]of e){const u=s.type,f=((r==null?void 0:r.getOptions().domain.length)>0?r==null?void 0:r.getOptions().domain:l.data).map((d,h)=>{var p;return i?i.map(d||"point"):((p=s==null?void 0:s.style)===null||p===void 0?void 0:p.shape)||l.defaultShape||"point"});typeof u=="string"&&a.push([u,f])}if(a.length===0)return["point",["point"]];if(a.length===1||!n)return a[0];const{range:o}=n.getOptions();return a.map(([s,l])=>{let u=0;for(let c=0;c<a.length;c++){const f=o[c%o.length];l[c]===f&&u++}return[u/l.length,[s,l]]}).sort((s,l)=>l[0]-s[0])[0][1]}function xFe(t,e){const{scales:n,library:r,markState:i}=e,[a,o]=bFe(n,i),{itemMarker:s,itemMarkerSize:l}=t,u=(d,h)=>{var p,g,v;const m=((v=(g=(p=r[`mark.${a}`])===null||p===void 0?void 0:p.props)===null||g===void 0?void 0:g.shape[d])===null||v===void 0?void 0:v.props.defaultMarker)||Iv(d.split(".")),y=typeof l=="function"?l(h):l;return()=>TIe(m,{color:h.color})(0,0,y)},c=d=>`${o[d]}`;return fl(n,"shape")&&!s?(d,h)=>u(c(h),d):typeof s=="function"?(d,h)=>{const p=s(d.id,h);return typeof p=="string"?u(p,d):p}:(d,h)=>u(s||c(h),d)}function wFe(t){const e=fl(t,"opacity");if(e){const{range:n}=e.getOptions();return(r,i)=>n[i]}}function _Fe(t,e){const n=fl(t,"size");return n instanceof RJ?n.map(NaN)*2:e}function SFe(t,e){const{labelFormatter:n=d=>`${d}`}=t,{scales:r,theme:i}=e,a=i.legendCategory.itemMarkerSize,o=_Fe(r,a),s={itemMarker:xFe(Object.assign(Object.assign({},t),{itemMarkerSize:o}),e),itemMarkerSize:o,itemMarkerOpacity:wFe(r)},l=typeof n=="string"?Rc(n):n,u=fl(r,"color"),c=tFe(r),f=u?d=>u.map(d):()=>e.theme.color;return Object.assign(Object.assign({},s),{data:c.map(d=>({id:d,label:l(d),color:f(d)}))})}function EFe(t,e,n){const{position:r}=e;if(r==="center"){const{bbox:o}=t,{width:s,height:l}=o;return{width:s,height:l}}const{width:i,height:a}=Xie(t,e,n);return{width:i,height:a}}function OFe(t){return Object.assign(Object.assign({},t),{data:(t==null?void 0:t.data.filter(e=>e.id!==""))||[]})}const tR=t=>{const{labelFormatter:e,layout:n,order:r,orientation:i,position:a,size:o,title:s,cols:l,itemMarker:u}=t,c=yFe(t,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker"]),{gridRow:f}=c;return d=>{const{value:h,theme:p}=d,{bbox:g}=h,{width:v,height:m}=EFe(h,t,tR),y=Yie(a,n),b=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(a)?"vertical":"horizontal",width:v,height:m,layout:l!==void 0?"grid":"flex"},l!==void 0&&{gridCol:l}),f!==void 0&&{gridRow:f}),{titleText:Q2(s)}),SFe(t,d)),{legendCategory:x={}}=p,w=ew(Object.assign({},x,OFe(b),c)),_=new J9e({style:Object.assign(Object.assign({x:g.x,y:g.y,width:g.width,height:g.height},y),{subOptions:w})});return _.appendChild(new Lne({className:"legend-category",style:w})),_}};tR.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var kFe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function AFe(t,e,n){return t.size=e,Q9e(n)?t.height=e:t.width=e,t}function TFe(t,e,n){const{size:r}=e,i=Xie(t,e,n);return AFe(i,r,i.orientation)}function MFe(t){return e=>({value:e/t,label:String(e)})}function CFe(t,e,n,r,i){const a=e.thresholds,o=MFe(r);return Object.assign(Object.assign({},t),{color:i,data:[n,...a,r].map(o)})}function PFe(t,e,n){const i=[-1/0,...e.thresholds,1/0].map((a,o)=>({value:o,label:a}));return Object.assign(Object.assign({},t),{data:i,color:n,labelFilter:(a,o)=>o>0&&o<i.length-1})}function _P(t){const{domain:e}=t.getOptions(),[n,r]=[e[0],nQ(e)];return[n,r]}function DFe(t,e){const n=t.getOptions(),r=t.clone();return r.update(Object.assign(Object.assign({},n),{range:[sc(e).toString()]})),r}function IFe(t,e,n,r,i,a){const{length:o}=t,s=n||r,l=i.color?a.legendContinuous.ribbonFill||"black":a.color,u=e||DFe(s,l),[c,f]=_P(u),[d,h]=_P([e,n,r].filter(p=>p!==void 0).find(p=>!(p instanceof jI)));return Object.assign(Object.assign({},t),{domain:[d,h],data:u.getTicks().map(p=>({value:p})),color:new Array(Math.floor(o)).fill(0).map((p,g)=>{const v=(f-c)/(o-1)*g+c,m=u.map(v)||l,y=r?r.map(v):1;return m.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(b,x,w,_)=>`rgba(${x}, ${w}, ${_}, ${y})`)})})}function LFe(t,e,n,r,i,a){const o=fl(t,"color"),s=TFe(n,r,i);if(o instanceof S2){const{range:c}=o.getOptions(),[f,d]=_P(o);return o instanceof GJ||o instanceof YJ?CFe(s,o,f,d,c):PFe(s,o,c)}const l=fl(t,"size"),u=fl(t,"opacity");return IFe(s,o,l,u,e,a)}const Fc=t=>{const{labelFormatter:e,layout:n,order:r,orientation:i,position:a,size:o,title:s,style:l,crossPadding:u,padding:c}=t,f=kFe(t,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:d,value:h,theme:p,scale:g})=>{const{bbox:v}=h,{x:m,y,width:b,height:x}=v,w=Yie(a,n),{legendContinuous:_={}}=p,E=ew(Object.assign({},_,Object.assign(Object.assign({titleText:Q2(s),labelAlign:"value",labelFormatter:typeof e=="string"?O=>Rc(e)(O.label):e},LFe(d,g,h,t,Fc,p)),l),f)),S=new Uie({style:Object.assign(Object.assign({x:m,y,width:b,height:x},w),{subOptions:E})});return S.appendChild(new h4e({className:"legend-continuous",style:E})),S}};Fc.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};const aae=t=>(...e)=>Fc(Object.assign({},{block:!0},t))(...e);aae.props=Object.assign(Object.assign({},Fc.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const nR=t=>e=>{const{scales:n}=e,r=fl(n,"size");return Fc(Object.assign({},{type:"size",data:r.getTicks().map((i,a)=>({value:i,label:String(i)}))},t))(e)};nR.props=Object.assign(Object.assign({},Fc.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const oae=t=>nR(Object.assign({},{block:!0},t));oae.props=Object.assign(Object.assign({},Fc.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var RFe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Hz(t,e,n,r){switch(r){case"center":return{x:t+n/2,y:e,textAlign:"middle"};case"right":return{x:t+n,y:e,textAlign:"right"};default:return{x:t,y:e,textAlign:"left"}}}const NFe=K9e({render(t,e){const{width:n,title:r,subtitle:i,spacing:a=2,align:o="left",x:s,y:l}=t,u=RFe(t,["width","title","subtitle","spacing","align","x","y"]);e.style.transform=`translate(${s}, ${l})`;const c=Fe(u,"title"),f=Fe(u,"subtitle"),h=Gz(e,".title","text").attr("className","title").call(et,Object.assign(Object.assign(Object.assign({},Hz(0,0,n,o)),{fontSize:14,textBaseline:"top",text:r}),c)).node().getLocalBounds();Gz(e,".sub-title","text").attr("className","sub-title").call(p=>{if(!i)return p.node().remove();p.node().attr(Object.assign(Object.assign(Object.assign({},Hz(0,h.max[1]+a,n,o)),{fontSize:12,textBaseline:"top",text:i}),f))})}}),sae=t=>({value:e,theme:n})=>{const{x:r,y:i,width:a,height:o}=e.bbox;return new NFe({style:me({},n.title,Object.assign({x:r,y:i,width:a,height:o},t))})};sae.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};function FFe(t,e,n){return Math.min(n,Math.max(e,t))}function Kg(t){return!!t.getBandWidth}function rp(t,e,n){if(!Kg(t))return t.invert(e);const{adjustedRange:r}=t,{domain:i}=t.getOptions(),a=n?-1:0,o=t.getStep(),s=n?r:r.map(c=>c+o),l=EAe(s,e),u=FFe(l+a,0,i.length-1);return i[u]}function Zu(t,e,n){if(!e)return t.getOptions().domain;if(!Kg(t)){const l=bs(e);if(!n)return l;const[u]=l,{range:c}=t.getOptions(),[f,d]=c,h=f>d?-1:1,p=t.invert(t.map(u)+h*n);return[u,p]}const{domain:r}=t.getOptions(),i=e[0],a=r.indexOf(i);if(n){const l=a+Math.round(r.length*n);return r.slice(a,l)}const o=e[e.length-1],s=r.indexOf(o);return r.slice(a,s+1)}function L1(t,e,n,r,i,a){const{x:o,y:s}=i,l=(h,p)=>{const[g,v]=a.invert(h);return[rp(o,g,p),rp(s,v,p)]},u=l([t,e],!0),c=l([n,r],!1),f=Zu(o,[u[0],c[0]]),d=Zu(s,[u[1],c[1]]);return[f,d]}function ox(t,e){const[n,r]=t,i=a=>a.getStep?a.getStep():0;return[e.map(n),e.map(r)+i(e)]}function zFe(t,e,n){const{x:r,y:i}=e,[a,o]=t,s=ox(a,r),l=ox(o,i),u=[s[0],l[0]],c=[s[1],l[1]],[f,d]=n.map(u),[h,p]=n.map(c);return[f,d,h,p]}var jFe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function BFe(t,e,n){const{x:r,y:i,width:a,height:o}=t;if(e==="left")return[r+a-n,i];if(e==="right")return[r,i];if(e==="bottom")return[r,i];if(e==="top")return[r,i+o-n]}const Xv=t=>{const{orientation:e,labelFormatter:n,size:r,style:i={},position:a}=t,o=jFe(t,["orientation","labelFormatter","size","style","position"]);return s=>{var l;const{scales:[u],value:c,theme:f,coordinate:d}=s,{bbox:h}=c,{width:p,height:g}=h,{slider:v={}}=f,m=((l=u.getFormatter)===null||l===void 0?void 0:l.call(u))||(S=>S+""),y=typeof n=="string"?Rc(n):n,b=e==="horizontal",x=Hn(d)&&b,{trackSize:w=v.trackSize}=i,[_,E]=BFe(h,a,w);return new IL({className:"slider",style:Object.assign({},v,Object.assign(Object.assign({x:_,y:E,trackLength:b?p:g,orientation:e,formatter:S=>{const O=y||m,A=x?1-S:S,T=rp(u,A,!0);return O(T)},sparklineData:VFe(t,s)},i),o))})}};function $Fe(t,e){const[n]=Array.from(t.entries()).filter(([i])=>i.type==="line"||i.type==="area").filter(([i])=>i.slider).map(([i])=>{const{encode:a,slider:o}=i;if(o!=null&&o.x){const s=l=>{const u=a[l];return[l,u?u.value:void 0]};return Object.fromEntries(e.map(s))}});if(!(n!=null&&n.series))return n==null?void 0:n.y;const r=n.series.reduce((i,a,o)=>(i[a]=i[a]||[],i[a].push(n.y[o]),i),{});return Object.values(r)}function VFe(t,e){const{markState:n}=e;return wi(t.sparklineData)?t.sparklineData:$Fe(n,["y","series"])}Xv.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const lae=t=>Xv(Object.assign(Object.assign({},t),{orientation:"horizontal"}));lae.props=Object.assign(Object.assign({},Xv.props),{defaultPosition:"bottom"});const uae=t=>Xv(Object.assign(Object.assign({},t),{orientation:"vertical"}));uae.props=Object.assign(Object.assign({},Xv.props),{defaultPosition:"left"});var qFe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Zv=t=>{const{orientation:e,labelFormatter:n,style:r}=t,i=qFe(t,["orientation","labelFormatter","style"]);return({scales:[a],value:o,theme:s})=>{const{bbox:l}=o,{x:u,y:c,width:f,height:d}=l,{scrollbar:h={}}=s,{ratio:p,range:g}=a.getOptions(),v=e==="horizontal"?f:d,m=v/p,[y,b]=g,x=b>y?0:1;return new VLe({className:"g2-scrollbar",style:Object.assign({},h,Object.assign(Object.assign(Object.assign(Object.assign({},r),{x:u,y:c,trackLength:v,value:x}),i),{orientation:e,contentLength:m,viewportLength:v}))})}};Zv.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const cae=t=>Zv(Object.assign(Object.assign({},t),{orientation:"horizontal"}));cae.props=Object.assign(Object.assign({},Zv.props),{defaultPosition:"bottom"});const fae=t=>Zv(Object.assign(Object.assign({},t),{orientation:"vertical"}));fae.props=Object.assign(Object.assign({},Zv.props),{defaultPosition:"left"});const dae=t=>()=>new fr;dae.props={};const rR=(t,e)=>{const{coordinate:r}=e;return(i,a,o)=>{const[s]=i,{transform:l="",fillOpacity:u=1,strokeOpacity:c=1,opacity:f=1}=s.style,[d,h]=Hn(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],p=[{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:u,strokeOpacity:c,opacity:f,offset:.01},{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:d,fillOpacity:u,strokeOpacity:c,opacity:f}];return s.animate(p,Object.assign(Object.assign({},o),t))}},WFe=(t,e)=>{const{coordinate:r}=e;return(i,a,o)=>{const[s]=i,{transform:l="",fillOpacity:u=1,strokeOpacity:c=1,opacity:f=1}=s.style,[d,h]=Hn(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],p=[{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:d},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:u,strokeOpacity:c,opacity:f,offset:.99},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(p,Object.assign(Object.assign({},o),t))}},hae=(t,e)=>{const{coordinate:r}=e;return Hee.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:Ne.NUMBER}),(i,a,o)=>{const[s]=i,l=c=>{const{__data__:f,style:d}=c,{fillOpacity:h=1,strokeOpacity:p=1,opacity:g=1}=d,{points:v,y:m,y1:y}=f,b=cd(r,v,[m,y]),{innerRadius:x,outerRadius:w}=b,_=[{scaleInYRadius:x+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:x+1e-4,fillOpacity:h,strokeOpacity:p,opacity:g,offset:.01},{scaleInYRadius:w,fillOpacity:h,strokeOpacity:p,opacity:g}];return c.animate(_,Object.assign(Object.assign({},o),t))},u=c=>{const{style:f}=c,{transform:d="",fillOpacity:h=1,strokeOpacity:p=1,opacity:g=1}=f,[v,m]=Hn(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],y=[{transform:`${d} ${m}`.trimStart(),transformOrigin:v,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${d} ${m}`.trimStart(),transformOrigin:v,fillOpacity:h,strokeOpacity:p,opacity:g,offset:.01},{transform:`${d} scale(1, 1)`.trimStart(),transformOrigin:v,fillOpacity:h,strokeOpacity:p,opacity:g}];return c.animate(y,Object.assign(Object.assign({},o),t))};return On(r)?l(s):u(s)}},GFe=(t,e)=>{const{coordinate:r}=e;return(i,a,o)=>{const[s]=i,{transform:l="",fillOpacity:u=1,strokeOpacity:c=1,opacity:f=1}=s.style,[d,h]=Hn(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],p=[{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:d},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:u,strokeOpacity:c,opacity:f,offset:.99},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(p,Object.assign(Object.assign({},o),t))}},pae=t=>(e,n,r)=>{const[i]=e,{fillOpacity:a=1,strokeOpacity:o=1,opacity:s=1}=i.style,l=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:a,strokeOpacity:o,opacity:s}];return i.animate(l,Object.assign(Object.assign({},r),t))};pae.props={};const gae=t=>(e,n,r)=>{const[i]=e,{fillOpacity:a=1,strokeOpacity:o=1,opacity:s=1}=i.style,l=[{fillOpacity:a,strokeOpacity:o,opacity:s},{fillOpacity:0,strokeOpacity:0,opacity:0}];return i.animate(l,Object.assign(Object.assign({},r),t))};gae.props={};const HFe={opacity:1,strokeOpacity:1,fillOpacity:1,lineWidth:0,x:0,y:0,cx:0,cy:0,r:0,rx:0,ry:0,width:0,height:0},YFe={[pe.CIRCLE]:["cx","cy","r"],[pe.ELLIPSE]:["cx","cy","rx","ry"],[pe.RECT]:["x","y","width","height"],[pe.IMAGE]:["x","y","width","height"],[pe.LINE]:["x1","y1","x2","y2"],[pe.POLYLINE]:["points"],[pe.POLYGON]:["points"]};function ip(t,e,n=!1){const r={};for(const i of e){const a=t.style[i];a?r[i]=a:n&&(r[i]=HFe[i])}return r}const Z0=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function SP(t){const{min:e,max:n}=t.getLocalBounds(),[r,i]=e,[a,o]=n,s=o-i,l=a-r;return[r,i,l,s]}function UFe(t){const[e,n,r,i]=t;return`
    M ${e} ${n}
    L ${e+r} ${n}
    L ${e+r} ${n+i}
    L ${e} ${n+i}
    Z
  `}function XFe(t,e){const[n,r,i,a]=SP(t),o=a/i,s=Math.ceil(Math.sqrt(e/o)),l=Math.ceil(e/s),u=[],c=a/l;let f=0,d=e;for(;d>0;){const h=Math.min(d,s),p=i/h;for(let g=0;g<h;g++){const v=n+g*p,m=r+f*c;u.push(UFe([v,m,p,c]))}d-=h,f+=1}return u}function ZFe(t="pack"){return typeof t=="function"?t:XFe}function KFe(t,e,n){let{transform:r}=t.style;const{transform:i}=e.style;vae(e,t);let a=Z0;if(t.nodeName===pe.GROUP){const[l,u,c,f]=SP(t),[d,h,p,g]=SP(e),v=l-d,m=u-h,y=c/p,b=f/g;r=`translate(${v}, ${m}) scale(${y}, ${b})`}else a=a.concat(YFe[t.nodeName]||[]);const o=[Object.assign({transform:r??"none"},ip(t,a,!0)),Object.assign({transform:i??"none"},ip(e,a,!0))];return e.animate(o,n)}function vae(t,e){t.__data__=e.__data__,t.className=e.className,t.markType=e.markType,e.parentNode.replaceChild(t,e)}function JFe(t,e){const{nodeName:n}=t;if(n==="path")return t;const r=new yr({style:Object.assign(Object.assign({},ip(t,Z0)),{d:e})});return vae(r,t),r}function Yz(t,e){const n=t.indexOf(e),r=t.lastIndexOf(e);return n===r}function QFe(t){return!Yz(t,"m")||!Yz(t,"M")}function Uz(t){const e=_6e(t);if(e&&!QFe(e))return e}function Xz(t){const{nodeName:e}=t;if(e==="path"){const n=qt(t,"attributes");return n.markerEnd||n.markerStart}return!1}function iR(t,e,n,r){const{nodeName:i}=e,{nodeName:a}=n,o=Uz(e),s=Uz(n),l=i===a&&i!=="path",u=o===void 0||s===void 0,c=Xz(e)||Xz(n);if(l||u||c)return KFe(e,n,r);const f=JFe(t,o),d=[Object.assign({},ip(e,Z0)),Object.assign({},ip(n,Z0))];if(o!==s){d[0].d=o,d[1].d=s;const h=f.animate(d,r);return h.onfinish=()=>{qI(f,n),f.style.d=s,f.style.transform="none"},f.style.transform="none",h}return null}function e7e(t,e,n,r){t.style.visibility="hidden";const i=r(t,e.length);return e.map((a,o)=>{const s=new yr({style:Object.assign({d:i[o]},ip(t,Z0))});return iR(a,s,a,n)})}function t7e(t,e,n,r){const i=r(e,t.length),{fillOpacity:a=1,strokeOpacity:o=1,opacity:s=1}=e.style,l=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:a,strokeOpacity:o,opacity:s}],u=e.animate(l,n);return[...t.map((f,d)=>{const h=new yr({style:{d:i[d],fill:e.style.fill}});return iR(f,f,h,n)}),u]}const mae=t=>(e,n,r)=>{const i=ZFe(t.split),a=Object.assign(Object.assign({},r),t),{length:o}=e,{length:s}=n;if(o===1&&s===1||o>1&&s>1){const[l]=e,[u]=n;return iR(l,l,u,a)}if(o===1&&s>1){const[l]=e;return e7e(l,n,a,i)}if(o>1&&s===1){const[l]=n;return t7e(e,l,a,i)}return null};mae.props={};const yae=(t,e)=>{Hee.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:Ne.NUMBER});const{coordinate:r}=e;return(i,a,o)=>{const[s]=i;if(!On(r))return rR(t,e)(i,a,o);const{__data__:l,style:u}=s,{radius:c=0,inset:f=0,fillOpacity:d=1,strokeOpacity:h=1,opacity:p=1}=u,{points:g,y:v,y1:m}=l,y=KI().cornerRadius(c).padAngle(f*Math.PI/180),b=cd(r,g,[v,m]),{startAngle:x,endAngle:w}=b,_=[{waveInArcAngle:x+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:x+1e-4,fillOpacity:d,strokeOpacity:h,opacity:p,offset:.01},{waveInArcAngle:w,fillOpacity:d,strokeOpacity:h,opacity:p}],E=s.animate(_,Object.assign(Object.assign({},o),t));return E.onframe=function(){s.style.d=y(Object.assign(Object.assign({},b),{endAngle:Number(s.style.waveInArcAngle)}))},E.onfinish=function(){s.style.d=y(Object.assign(Object.assign({},b),{endAngle:w}))},E}};yae.props={};const n7e=t=>(n,r,i)=>{const[a]=n,{transform:o="",fillOpacity:s=1,strokeOpacity:l=1,opacity:u=1}=a.style,c="center center",f=[{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:c,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:c,fillOpacity:s,strokeOpacity:l,opacity:u,offset:.01},{transform:`${o} scale(1)`.trimStart(),transformOrigin:c,fillOpacity:s,strokeOpacity:l,opacity:u}];return a.animate(f,Object.assign(Object.assign({},i),t))},r7e=t=>(n,r,i)=>{const[a]=n,{transform:o="",fillOpacity:s=1,strokeOpacity:l=1,opacity:u=1}=a.style,c="center center",f=[{transform:`${o} scale(1)`.trimStart(),transformOrigin:c},{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:c,fillOpacity:s,strokeOpacity:l,opacity:u,offset:.99},{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:c,fillOpacity:0,strokeOpacity:0,opacity:0}];return a.animate(f,Object.assign(Object.assign({},i),t))},bae=t=>(e,n,r)=>{var i,a;const[o]=e,s=((a=(i=o).getTotalLength)===null||a===void 0?void 0:a.call(i))||0,l=[{lineDash:[0,s]},{lineDash:[s,0]}];return o.animate(l,Object.assign(Object.assign({},r),t))};bae.props={};const xae=(t,e)=>(n,r,i)=>{const[a]=n,{min:[o,s],halfExtents:l}=a.getLocalBounds(),u=l[0]*2,c=l[1]*2,f=new yr({style:{d:`M${o},${s}L${o+u},${s}L${o+u},${s+c}L${o},${s+c}Z`}});return a.appendChild(f),a.style.clipPath=f,rR(t,e)([f],r,i)};xae.props={};const wae=(t,e)=>(n,r,i)=>{const[a]=n,{min:[o,s],halfExtents:l}=a.getLocalBounds(),u=l[0]*2,c=l[1]*2,f=new yr({style:{d:`M${o},${s}L${o+u},${s}L${o+u},${s+c}L${o},${s+c}Z`}});return a.appendChild(f),a.style.clipPath=f,hae(t,e)([f],r,i)};wae.props={};const Zz="main-layer",EP="label-layer",Gs="element",sx="view",lx="plot",Kz="component",OP="label",Jz="area";/*!
 * @antv/g-plugin-canvas-path-generator
 * @description A G plugin of path generator with Canvas2D API
 * @version 2.1.19
 * @date 5/9/2025, 8:19:59 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */function i7e(t,e){var n=e.cx,r=n===void 0?0:n,i=e.cy,a=i===void 0?0:i,o=e.r;t.arc(r,a,o,0,Math.PI*2,!1)}function a7e(t,e){var n=e.cx,r=n===void 0?0:n,i=e.cy,a=i===void 0?0:i,o=e.rx,s=e.ry;if(t.ellipse)t.ellipse(r,a,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,u=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.scale(u,c),t.arc(r,a,l,0,Math.PI*2)}}function o7e(t,e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2,o=e.markerStart,s=e.markerEnd,l=e.markerStartOffset,u=e.markerEndOffset,c=0,f=0,d=0,h=0,p=0,g,v;o&&rn(o)&&l&&(g=i-n,v=a-r,p=Math.atan2(v,g),c=Math.cos(p)*(l||0),f=Math.sin(p)*(l||0)),s&&rn(s)&&u&&(g=n-i,v=r-a,p=Math.atan2(v,g),d=Math.cos(p)*(u||0),h=Math.sin(p)*(u||0)),t.moveTo(n+c,r+f),t.lineTo(i+d,a+h)}function s7e(t,e){var n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,o=e.d,s=o.absolutePath,l=o.segments,u=0,c=0,f=0,d=0,h=0,p,g;if(n&&rn(n)&&i){var v=n.parentNode.getStartTangent(),m=Ot(v,2),y=m[0],b=m[1];p=y[0]-b[0],g=y[1]-b[1],h=Math.atan2(g,p),u=Math.cos(h)*(i||0),c=Math.sin(h)*(i||0)}if(r&&rn(r)&&a){var x=r.parentNode.getEndTangent(),w=Ot(x,2),_=w[0],E=w[1];p=_[0]-E[0],g=_[1]-E[1],h=Math.atan2(g,p),f=Math.cos(h)*(a||0),d=Math.sin(h)*(a||0)}for(var S=0;S<s.length;S++){var O=s[S],A=O[0],T=s[S+1],I=S===0&&(u!==0||c!==0),D=(S===s.length-1||T&&(T[0]==="M"||T[0]==="Z"))&&f!==0&&d!==0,R=I?[u,c]:[0,0],F=Ot(R,2),z=F[0],N=F[1],L=D?[f,d]:[0,0],B=Ot(L,2),$=B[0],G=B[1];switch(A){case"M":t.moveTo(O[1]+z,O[2]+N);break;case"L":t.lineTo(O[1]+$,O[2]+G);break;case"Q":t.quadraticCurveTo(O[1],O[2],O[3]+$,O[4]+G);break;case"C":t.bezierCurveTo(O[1],O[2],O[3],O[4],O[5]+$,O[6]+G);break;case"A":{var W=l[S].arcParams,U=W.cx,Y=W.cy,q=W.rx,K=W.ry,J=W.startAngle,Q=W.endAngle,se=W.xRotation,de=W.sweepFlag;if(t.ellipse)t.ellipse(U,Y,q,K,se,J,Q,!!(1-de));else{var ye=q>K?q:K,_e=q>K?1:q/K,Ee=q>K?K/q:1;t.translate(U,Y),t.rotate(se),t.scale(_e,Ee),t.arc(0,0,ye,J,Q,!!(1-de)),t.scale(1/_e,1/Ee),t.rotate(-se),t.translate(-U,-Y)}D&&t.lineTo(O[6]+f,O[7]+d);break}case"Z":t.closePath();break}}}function l7e(t,e){var n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,o=e.points.points,s=o.length,l=o[0][0],u=o[0][1],c=o[s-1][0],f=o[s-1][1],d=0,h=0,p=0,g=0,v=0,m,y;n&&rn(n)&&i&&(m=o[1][0]-o[0][0],y=o[1][1]-o[0][1],v=Math.atan2(y,m),d=Math.cos(v)*(i||0),h=Math.sin(v)*(i||0)),r&&rn(r)&&a&&(m=o[s-1][0]-o[0][0],y=o[s-1][1]-o[0][1],v=Math.atan2(y,m),p=Math.cos(v)*(a||0),g=Math.sin(v)*(a||0)),t.moveTo(l+(d||p),u+(h||g));for(var b=1;b<s-1;b++){var x=o[b];t.lineTo(x[0],x[1])}t.lineTo(c,f)}function u7e(t,e){var n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,o=e.points.points,s=o.length,l=o[0][0],u=o[0][1],c=o[s-1][0],f=o[s-1][1],d=0,h=0,p=0,g=0,v=0,m,y;n&&rn(n)&&i&&(m=o[1][0]-o[0][0],y=o[1][1]-o[0][1],v=Math.atan2(y,m),d=Math.cos(v)*(i||0),h=Math.sin(v)*(i||0)),r&&rn(r)&&a&&(m=o[s-2][0]-o[s-1][0],y=o[s-2][1]-o[s-1][1],v=Math.atan2(y,m),p=Math.cos(v)*(a||0),g=Math.sin(v)*(a||0)),t.moveTo(l+d,u+h);for(var b=1;b<s-1;b++){var x=o[b];t.lineTo(x[0],x[1])}t.lineTo(c+p,f+g)}function c7e(t,e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.radius,s=e.width,l=e.height,u=s,c=l,f=o&&o.some(function(w){return w!==0});if(!f)t.rect(r,a,u,c);else{var d=s>0?1:-1,h=l>0?1:-1,p=d+h===0,g=o.map(function(w){return jn(w,0,Math.min(Math.abs(u)/2,Math.abs(c)/2))}),v=Ot(g,4),m=v[0],y=v[1],b=v[2],x=v[3];t.moveTo(d*m+r,a),t.lineTo(u-d*y+r,a),y!==0&&t.arc(u-d*y+r,h*y+a,y,-h*Math.PI/2,d>0?0:Math.PI,p),t.lineTo(u+r,c-h*b+a),b!==0&&t.arc(u-d*b+r,c-h*b+a,b,d>0?0:Math.PI,h>0?Math.PI/2:1.5*Math.PI,p),t.lineTo(d*x+r,c+a),x!==0&&t.arc(d*x+r,c-h*x+a,x,h>0?Math.PI/2:-Math.PI/2,d>0?Math.PI:0,p),t.lineTo(r,h*m+a),m!==0&&t.arc(d*m+r,h*m+a,m,d>0?Math.PI:0,h>0?Math.PI*1.5:Math.PI/2,p)}}var f7e=function(t){function e(){var n;Ae(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Nt(this,e,[].concat(i)),n.name="canvas-path-generator",n}return Ft(e,t),Te(e,[{key:"init",value:function(){var r,i=(r={},He(He(He(He(He(He(He(He(He(He(r,pe.CIRCLE,i7e),pe.ELLIPSE,a7e),pe.RECT,c7e),pe.LINE,o7e),pe.POLYLINE,u7e),pe.POLYGON,l7e),pe.PATH,s7e),pe.TEXT,void 0),pe.GROUP,void 0),pe.IMAGE,void 0),He(He(He(r,pe.HTML,void 0),pe.MESH,void 0),pe.FRAGMENT,void 0));this.context.pathGeneratorFactory=i}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])}(Dc);/*!
 * @antv/g-plugin-canvas-picker
 * @description A G plugin for picking in canvas
 * @version 2.1.23
 * @date 5/30/2025, 2:56:22 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var d7e=Wt(),h7e=Wt(),p7e=Wt(),g7e=wn(),_ae=function(){function t(){var e=this;Ae(this,t),this.isHit=function(n,r,i,a){var o=e.context.pointInPathPickerFactory[n.nodeName];if(o){var s=ms(g7e,i),l=Cr(h7e,aa(p7e,r[0],r[1],0),s);if(o(n,new $i(l[0],l[1]),a,e.isPointInPath,e.context,e.runtime))return!0}return!1},this.isPointInPath=function(n,r){var i=e.runtime.offscreenCanvasCreator.getOrCreateContext(e.context.config.offscreenCanvas),a=e.context.pathGeneratorFactory[n.nodeName];return a&&(i.beginPath(),a(i,n.parsedStyle),i.closePath()),i.isPointInPath(r.x,r.y)}}return Te(t,[{key:"apply",value:function(n,r){var i,a=this,o=n.renderingService,s=n.renderingContext;this.context=n,this.runtime=r;var l=(i=s.root)===null||i===void 0?void 0:i.ownerDocument;o.hooks.pick.tapPromise(t.tag,function(){var u=xc(qi().mark(function c(f){return qi().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",a.pick(l,f));case 1:case"end":return h.stop()}},c)}));return function(c){return u.apply(this,arguments)}}()),o.hooks.pickSync.tap(t.tag,function(u){return a.pick(l,u)})}},{key:"pick",value:function(n,r){var i=r.topmost,a=r.position,o=a.x,s=a.y,l=aa(d7e,o,s,0),u=n.elementsFromBBox(l[0],l[1],l[0],l[1]),c=[],f=af(u),d;try{for(f.s();!(d=f.n()).done;){var h=d.value,p=h.getWorldTransform(),g=this.isHit(h,l,p,!1);if(g){var v=Fee(h);if(v){var m=v.parsedStyle.clipPath,y=this.isHit(m,l,m.getWorldTransform(),!0);if(y){if(i)return r.picked=[h],r;c.push(h)}}else{if(i)return r.picked=[h],r;c.push(h)}}}}catch(b){f.e(b)}finally{f.f()}return r.picked=c,r}}])}();_ae.tag="CanvasPicker";function v7e(t,e,n){var r=t.parsedStyle,i=r.cx,a=i===void 0?0:i,o=r.cy,s=o===void 0?0:o,l=r.r,u=r.fill,c=r.stroke,f=r.lineWidth,d=f===void 0?1:f,h=r.increasedLineWidthForHitTesting,p=h===void 0?0:h,g=r.pointerEvents,v=g===void 0?"auto":g,m=(d+p)/2,y=Jl(a,s,e.x,e.y),b=ld(v,u,c),x=Ot(b,2),w=x[0],_=x[1];return w&&_||n?y<=l+m:w?y<=l:_?y>=l-m&&y<=l+m:!1}function Iy(t,e,n,r){return t/(n*n)+e/(r*r)}function m7e(t,e,n){var r=t.parsedStyle,i=r.cx,a=i===void 0?0:i,o=r.cy,s=o===void 0?0:o,l=r.rx,u=r.ry,c=r.fill,f=r.stroke,d=r.lineWidth,h=d===void 0?1:d,p=r.increasedLineWidthForHitTesting,g=p===void 0?0:p,v=r.pointerEvents,m=v===void 0?"auto":v,y=e.x,b=e.y,x=ld(m,c,f),w=Ot(x,2),_=w[0],E=w[1],S=(h+g)/2,O=(y-a)*(y-a),A=(b-s)*(b-s);return _&&E||n?Iy(O,A,l+S,u+S)<=1:_?Iy(O,A,l,u)<=1:E?Iy(O,A,l-S,u-S)>=1&&Iy(O,A,l+S,u+S)<=1:!1}function df(t,e,n,r,i,a){return i>=t&&i<=t+n&&a>=e&&a<=e+r}function y7e(t,e,n,r,i,a,o){var s=i/2;return df(t-s,e-s,n,i,a,o)||df(t+n-s,e-s,i,r,a,o)||df(t+s,e+r-s,n,i,a,o)||df(t-s,e+s,i,r,a,o)}function Ly(t,e,n,r,i,a,o,s){var l=(Math.atan2(s-e,o-t)+Math.PI*2)%(Math.PI*2),u={x:t+n*Math.cos(l),y:e+n*Math.sin(l)};return Jl(u.x,u.y,o,s)<=a/2}function Ku(t,e,n,r,i,a,o){var s=Math.min(t,n),l=Math.max(t,n),u=Math.min(e,r),c=Math.max(e,r),f=i/2;return a>=s-f&&a<=l+f&&o>=u-f&&o<=c+f?qMe(t,e,n,r,a,o)<=i/2:!1}function Sae(t,e,n,r,i){var a=t.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=t[o][0],l=t[o][1],u=t[o+1][0],c=t[o+1][1];if(Ku(s,l,u,c,e,n,r))return!0}if(i){var f=t[0],d=t[a-1];if(Ku(f[0],f[1],d[0],d[1],e,n,r))return!0}return!1}var b7e=1e-6;function zE(t){return Math.abs(t)<b7e?0:t<0?-1:1}function x7e(t,e,n){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function Eae(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],s=t[(a+1)%i];if(x7e(o,s,[e,n]))return!0;zE(o[1]-n)>0!=zE(s[1]-n)>0&&zE(e-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Qz(t,e,n){for(var r=!1,i=0;i<t.length;i++){var a=t[i];if(r=Eae(a,e,n),r)break}return r}function w7e(t,e,n){var r=t.parsedStyle,i=r.x1,a=r.y1,o=r.x2,s=r.y2,l=r.lineWidth,u=l===void 0?1:l,c=r.increasedLineWidthForHitTesting,f=c===void 0?0:c,d=r.pointerEvents,h=d===void 0?"auto":d,p=r.fill,g=r.stroke,v=ld(h,p,g),m=Ot(v,2),y=m[1];return!y&&!n||!u?!1:Ku(i,a,o,s,u+f,e.x,e.y)}function _7e(t,e,n,r,i){for(var a=!1,o=e/2,s=0;s<t.length;s++){var l=t[s],u=l.currentPoint,c=l.params,f=l.prePoint,d=l.box;if(!(d&&!df(d.x-o,d.y-o,d.width+e,d.height+e,n,r)))switch(l.command){case"L":case"Z":if(a=Ku(f[0],f[1],u[0],u[1],e,n,r),a)return!0;break;case"Q":var h=ZMe(f[0],f[1],c[1],c[2],c[3],c[4],n,r);if(a=h<=e/2,a)return!0;break;case"C":var p=xF(f[0],f[1],c[1],c[2],c[3],c[4],c[5],c[6],n,r,i);if(a=p<=e/2,a)return!0;break;case"A":l.cubicParams||(l.cubicParams=CI(f[0],f[1],c[1],c[2],c[3],c[4],c[5],c[6],c[7],void 0));for(var g=l.cubicParams,v=f,m=0;m<g.length;m+=6){var y=xF(v[0],v[1],g[m],g[m+1],g[m+2],g[m+3],g[m+4],g[m+5],n,r,i);if(v=[g[m+4],g[m+5]],a=y<=e/2,a)return!0}break}}return a}function S7e(t,e,n,r,i,a){var o=t.parsedStyle,s=o.lineWidth,l=s===void 0?1:s,u=o.increasedLineWidthForHitTesting,c=u===void 0?0:u,f=o.stroke,d=o.fill,h=o.d,p=o.pointerEvents,g=p===void 0?"auto":p,v=h.segments,m=h.hasArc,y=h.polylines,b=h.polygons,x=ld(g,(b==null?void 0:b.length)&&d,f),w=Ot(x,2),_=w[0],E=w[1],S=J6(t),O=!1;return _||n?(m?O=r(t,e):O=Qz(b,e.x,e.y)||Qz(y,e.x,e.y),O):((E||n)&&(O=_7e(v,l+c,e.x,e.y,S)),O)}function E7e(t,e,n){var r=t.parsedStyle,i=r.stroke,a=r.fill,o=r.lineWidth,s=o===void 0?1:o,l=r.increasedLineWidthForHitTesting,u=l===void 0?0:l,c=r.points,f=r.pointerEvents,d=f===void 0?"auto":f,h=ld(d,a,i),p=Ot(h,2),g=p[0],v=p[1],m=!1;return(v||n)&&(m=Sae(c.points,s+u,e.x,e.y,!0)),!m&&(g||n)&&(m=Eae(c.points,e.x,e.y)),m}function O7e(t,e,n){var r=t.parsedStyle,i=r.lineWidth,a=i===void 0?1:i,o=r.increasedLineWidthForHitTesting,s=o===void 0?0:o,l=r.points,u=r.pointerEvents,c=u===void 0?"auto":u,f=r.fill,d=r.stroke,h=ld(c,f,d),p=Ot(h,2),g=p[1];return!g&&!n||!a?!1:Sae(l.points,a+s,e.x,e.y,!1)}function k7e(t,e,n,r,i){var a=t.parsedStyle,o=a.radius,s=a.fill,l=a.stroke,u=a.lineWidth,c=u===void 0?1:u,f=a.increasedLineWidthForHitTesting,d=f===void 0?0:f,h=a.x,p=h===void 0?0:h,g=a.y,v=g===void 0?0:g,m=a.width,y=a.height,b=a.pointerEvents,x=b===void 0?"auto":b,w=ld(x,s,l),_=Ot(w,2),E=_[0],S=_[1],O=o&&o.some(function(D){return D!==0}),A=c+d;if(O){var I=!1;return(S||n)&&(I=A7e(p,v,m,y,o.map(function(D){return jn(D,0,Math.min(Math.abs(m)/2,Math.abs(y)/2))}),A,e.x,e.y)),!I&&(E||n)&&(I=r(t,e)),I}else{var T=A/2;if(E&&S||n)return df(p-T,v-T,m+T,y+T,e.x,e.y);if(E)return df(p,v,m,y,e.x,e.y);if(S)return y7e(p,v,m,y,A,e.x,e.y)}return!1}function A7e(t,e,n,r,i,a,o,s){var l=Ot(i,4),u=l[0],c=l[1],f=l[2],d=l[3];return Ku(t+u,e,t+n-c,e,a,o,s)||Ku(t+n,e+c,t+n,e+r-f,a,o,s)||Ku(t+n-f,e+r,t+d,e+r,a,o,s)||Ku(t,e+r-d,t,e+u,a,o,s)||Ly(t+n-c,e+c,c,1.5*Math.PI,2*Math.PI,a,o,s)||Ly(t+n-f,e+r-f,f,0,.5*Math.PI,a,o,s)||Ly(t+d,e+r-d,d,.5*Math.PI,Math.PI,a,o,s)||Ly(t+u,e+u,u,Math.PI,1.5*Math.PI,a,o,s)}function T7e(t,e,n,r,i,a){var o=t.parsedStyle,s=o.pointerEvents,l=s===void 0?"auto":s,u=o.x,c=u===void 0?0:u,f=o.y,d=f===void 0?0:f,h=o.width,p=o.height;if(l==="non-transparent-pixel"){var g=i.config.offscreenCanvas,v=a.offscreenCanvasCreator.getOrCreateCanvas(g),m=a.offscreenCanvasCreator.getOrCreateContext(g,{willReadFrequently:!0});v.width=h,v.height=p,i.defaultStyleRendererFactory[pe.IMAGE].render(m,It(It({},t.parsedStyle),{},{x:0,y:0}),t,void 0,void 0,void 0);var y=m.getImageData(e.x-c,e.y-d,1,1).data;return y.every(function(b){return b!==0})}return!0}function M7e(t,e,n,r){var i=t.getGeometryBounds();return e.x>=i.min[0]&&e.y>=i.min[1]&&e.x<=i.max[0]&&e.y<=i.max[1]}var C7e=function(t){function e(){var n;Ae(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Nt(this,e,[].concat(i)),n.name="canvas-picker",n}return Ft(e,t),Te(e,[{key:"init",value:function(){var r,i=(r={},He(He(He(He(He(He(He(He(He(He(r,pe.CIRCLE,v7e),pe.ELLIPSE,m7e),pe.RECT,k7e),pe.LINE,w7e),pe.POLYLINE,O7e),pe.POLYGON,E7e),pe.PATH,S7e),pe.TEXT,M7e),pe.GROUP,null),pe.IMAGE,T7e),He(He(r,pe.HTML,null),pe.MESH,null));this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new _ae)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(Dc);function Bs(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var P7e=0;function D7e(t){return"__private_"+P7e+++"_"+t}/*!
 * @antv/g-plugin-image-loader
 * @description A G plugin for loading image
 * @version 2.1.23
 * @date 5/30/2025, 2:54:46 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var I7e=function(){function t(){Ae(this,t),this.cacheStore=new Map}return Te(t,[{key:"onRefAdded",value:function(n){}},{key:"has",value:function(n){return this.cacheStore.has(n)}},{key:"put",value:function(n,r,i){return this.cacheStore.has(n)?!1:(this.cacheStore.set(n,{value:r,counter:new Set([i.entity])}),this.onRefAdded(i),!0)}},{key:"get",value:function(n,r){var i=this.cacheStore.get(n);return i?(i.counter.has(r.entity)||(i.counter.add(r.entity),this.onRefAdded(r)),i.value):null}},{key:"update",value:function(n,r,i){var a=this.cacheStore.get(n);return a?(a.value=It(It({},a.value),r),a.counter.has(i.entity)||(a.counter.add(i.entity),this.onRefAdded(i)),!0):!1}},{key:"release",value:function(n,r){var i=this.cacheStore.get(n);return i?(i.counter.delete(r.entity),i.counter.size<=0&&this.cacheStore.delete(n),!0):!1}},{key:"releaseRef",value:function(n){var r=this;Array.from(this.cacheStore.keys()).forEach(function(i){r.release(i,n)})}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])}(),jE=[],BE=[],kP=function(){function t(){Ae(this,t)}return Te(t,null,[{key:"stop",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.api;t.rafId&&(n.cancelAnimationFrame(t.rafId),t.rafId=null)}},{key:"executeTask",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.api;jE.length<=0&&BE.length<=0||(BE.forEach(function(r){return r()}),BE=jE.splice(0,t.TASK_NUM_PER_FRAME),t.rafId=n.requestAnimationFrame(function(){t.executeTask(n)}))}},{key:"sliceImage",value:function(n,r,i,a){for(var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:t.api,l=n.naturalWidth||n.width,u=n.naturalHeight||n.height,c=r-o,f=i-o,d=Math.ceil(l/c),h=Math.ceil(u/f),p={tileSize:[r,i],gridSize:[h,d],tiles:Array(h).fill(null).map(function(){return Array(d).fill(null)})},g=function(y){for(var b=function(_){jE.push(function(){var E=_*c,S=y*f,O=[Math.min(r,l-E),Math.min(i,u-S)],A=O[0],T=O[1],I=s.createCanvas();I.width=r,I.height=i;var D=I.getContext("2d");D.drawImage(n,E,S,A,T,0,0,A,T),p.tiles[y][_]={x:E,y:S,tileX:_,tileY:y,data:I},a()})},x=0;x<d;x++)b(x)},v=0;v<h;v++)g(v);return t.stop(),t.executeTask(),p}}])}();kP.TASK_NUM_PER_FRAME=10;var Ya=new I7e;Ya.onRefAdded=function(e){var n=this;e.addEventListener(Dt.DESTROY,function(){n.releaseRef(e)},{once:!0})};var aR=function(){function t(e,n){Ae(this,t),this.gradientCache={},this.patternCache={},this.context=e,this.runtime=n}return Te(t,[{key:"getImageSync",value:function(n,r,i){var a=an(n)?n:n.src;if(Ya.has(a)){var o=Ya.get(a,r);if(o.img.complete)return i==null||i(o),o}return this.getOrCreateImage(n,r).then(function(s){i==null||i(s)}).catch(function(s){console.error(s)}),null}},{key:"getOrCreateImage",value:function(n,r){var i=this,a=an(n)?n:n.src;if(!an(n)&&!Ya.has(a)){var o={img:n,size:[n.naturalWidth||n.width,n.naturalHeight||n.height],tileSize:Ry(n)};Ya.put(a,o,r)}if(Ya.has(a)){var s=Ya.get(a,r);return s.img.complete?Promise.resolve(s):new Promise(function(l,u){s.img.addEventListener("load",function(){s.size=[s.img.naturalWidth||s.img.width,s.img.naturalHeight||s.img.height],s.tileSize=Ry(s.img),l(s)}),s.img.addEventListener("error",function(c){u(c)})})}return new Promise(function(l,u){var c=i.context.config.createImage();if(c){var f={img:c,size:[0,0],tileSize:Ry(c)};Ya.put(a,f,r),c.onload=function(){f.size=[c.naturalWidth||c.width,c.naturalHeight||c.height],f.tileSize=Ry(f.img),l(f)},c.onerror=function(d){u(d)},c.crossOrigin="Anonymous",c.src=a}})}},{key:"createDownSampledImage",value:function(){var e=xc(qi().mark(function r(i,a){var o,s,l,u,c,f,d,h,p,g,v,m,y,b;return qi().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,this.getOrCreateImage(i,a);case 2:if(o=w.sent,!(typeof o.downSamplingRate<"u")){w.next=5;break}return w.abrupt("return",o);case 5:if(s=this.context.config.enableLargeImageOptimization,l=typeof s=="boolean"?{}:s,u=l.maxDownSampledImageSize,c=u===void 0?2048:u,f=l.downSamplingRateThreshold,d=f===void 0?.5:f,h=this.runtime.globalThis.createImageBitmap,p=Ot(o.size,2),g=p[0],v=p[1],m=o.img,y=Math.min((c+c)/(g+v),Math.max(.01,Math.min(d,.5))),b=It(It({},o),{},{downSamplingRate:y}),Ya.update(o.img.src,b,a),!h){w.next=25;break}return w.prev=14,w.next=17,h(o.img,{resizeWidth:g*y,resizeHeight:v*y});case 17:m=w.sent,w.next=23;break;case 20:w.prev=20,w.t0=w.catch(14),y=1;case 23:w.next=26;break;case 25:y=1;case 26:return b=It(It({},this.getImageSync(i,a)),{},{downSampled:m,downSamplingRate:y}),Ya.update(o.img.src,b,a),w.abrupt("return",b);case 29:case"end":return w.stop()}},r,this,[[14,20]])}));function n(r,i){return e.apply(this,arguments)}return n}()},{key:"createImageTiles",value:function(){var e=xc(qi().mark(function r(i,a,o,s){var l,u,c,f,d;return qi().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.getOrCreateImage(i,s);case 2:return l=p.sent,u=s.ownerDocument.defaultView,c=u.requestAnimationFrame,f=u.cancelAnimationFrame,kP.api={requestAnimationFrame:c,cancelAnimationFrame:f,createCanvas:function(){return fL.createCanvas()}},d=It(It({},l),kP.sliceImage(l.img,l.tileSize[0],l.tileSize[0],o)),Ya.update(l.img.src,d,s),p.abrupt("return",d);case 8:case"end":return p.stop()}},r,this)}));function n(r,i,a,o){return e.apply(this,arguments)}return n}()},{key:"releaseImage",value:function(n,r){Ya.release(an(n)?n:n.src,r)}},{key:"releaseImageRef",value:function(n){Ya.releaseRef(n)}},{key:"getOrCreatePatternSync",value:function(n,r,i,a,o,s,l){var u=this.generatePatternKey(r);if(u&&this.patternCache[u])return this.patternCache[u];var c=r.image,f=r.repetition,d=r.transform,h,p=!1;if(an(c)){var g=this.getImageSync(c,n,l);h=g==null?void 0:g.img}else a?(h=a,p=!0):h=c;var v=h&&i.createPattern(h,f);if(v){var m;d?m=Vee(Iee(d),new Un({})):m=yc(wn()),p&&UK(m,m,[1/o,1/o,1]),v.setTransform({a:m[0],b:m[1],c:m[4],d:m[5],e:m[12]+s[0],f:m[13]+s[1]})}return u&&v&&(this.patternCache[u]=v),v}},{key:"getOrCreateGradient",value:function(n,r){var i=this.generateGradientKey(n),a=n.type,o=n.steps,s=n.min,l=n.width,u=n.height,c=n.angle,f=n.cx,d=n.cy,h=n.size;if(this.gradientCache[i])return this.gradientCache[i];var p=null;if(a===Uu.LinearGradient){var g=GCe(s,l,u,c),v=g.x1,m=g.y1,y=g.x2,b=g.y2;p=r.createLinearGradient(v,m,y,b)}else if(a===Uu.RadialGradient){var x=HCe(s,l,u,f,d,h),w=x.x,_=x.y,E=x.r;p=r.createRadialGradient(w,_,0,w,_,E)}return p&&(o.forEach(function(S){var O=S.offset,A=S.color;if(O.unit===Ve.kPercentage){var T;(T=p)===null||T===void 0||T.addColorStop(O.value/100,A.toString())}}),this.gradientCache[i]=p),this.gradientCache[i]}},{key:"generateGradientKey",value:function(n){var r=n.type,i=n.min,a=n.width,o=n.height,s=n.steps,l=n.angle,u=n.cx,c=n.cy,f=n.size;return"gradient-".concat(r,"-").concat((l==null?void 0:l.toString())||0,"-").concat((u==null?void 0:u.toString())||0,"-").concat((c==null?void 0:c.toString())||0,"-").concat((f==null?void 0:f.toString())||0,"-").concat(i[0],"-").concat(i[1],"-").concat(a,"-").concat(o,"-").concat(s.map(function(d){var h=d.offset,p=d.color;return"".concat(h).concat(p)}).join("-"))}},{key:"generatePatternKey",value:function(n){var r=n.image,i=n.repetition;if(an(r))return"pattern-".concat(r,"-").concat(i);if(r.nodeName==="rect")return"pattern-".concat(r.entity,"-").concat(i)}}])}();aR.isSupportTile=!!fL.createCanvas();function Ry(t){if(!t.complete)return[0,0];var e=t.naturalWidth||t.width,n=t.naturalHeight||t.height,r=256;return[256,512].forEach(function(i){var a=Math.ceil(n/i),o=Math.ceil(e/i);a*o<1e3&&(r=i)}),[r,r]}var Oae=function(){function t(){Ae(this,t)}return Te(t,[{key:"apply",value:function(n){var r=n.renderingService,i=n.renderingContext,a=n.imagePool,o=i.root.ownerDocument.defaultView,s=function(f,d,h){var p=f.parsedStyle,g=p.width,v=p.height;g&&!v?f.setAttribute("height",h/d*g):!g&&v&&f.setAttribute("width",d/h*v)},l=function(f){var d=f.target,h=d.nodeName,p=d.attributes;if(h===pe.IMAGE){var g=p.src,v=p.keepAspectRatio;a.getImageSync(g,d,function(m){var y=m.img,b=y.width,x=y.height;v&&s(d,b,x),d.renderable.dirty=!0,r.dirtify()})}},u=function(f){var d=f.target,h=f.attrName,p=f.prevValue,g=f.newValue;d.nodeName!==pe.IMAGE||h!=="src"||(p!==g&&a.releaseImage(p,d),an(g)&&a.getOrCreateImage(g,d).then(function(v){var m=v.img,y=m.width,b=m.height;d.attributes.keepAspectRatio&&s(d,y,b),d.renderable.dirty=!0,r.dirtify()}).catch(function(){}))};r.hooks.init.tap(t.tag,function(){o.addEventListener(Dt.MOUNTED,l),o.addEventListener(Dt.ATTR_MODIFIED,u)}),r.hooks.destroy.tap(t.tag,function(){o.removeEventListener(Dt.MOUNTED,l),o.removeEventListener(Dt.ATTR_MODIFIED,u)})}}])}();Oae.tag="LoadImage";var L7e=function(t){function e(){var n;Ae(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Nt(this,e,[].concat(i)),n.name="image-loader",n}return Ft(e,t),Te(e,[{key:"init",value:function(r){this.context.imagePool=new aR(this.context,r),this.addRenderingPlugin(new Oae)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Dc);/*!
 * @antv/g-plugin-canvas-renderer
 * @description A G plugin of renderer implementation with Canvas2D API
 * @version 2.2.23
 * @date 5/30/2025, 2:55:32 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Wr=D7e("renderState"),kae=function(){function t(e){Ae(this,t),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,Wr,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=wn(),this.dprMatrix=wn(),this.tmpMat4=wn(),this.vec3a=Wt(),this.vec3b=Wt(),this.vec3c=Wt(),this.vec3d=Wt(),this.canvasRendererPluginOptions=e}return Te(t,[{key:"apply",value:function(n,r){var i=this;this.context=n;var a=this.context,o=a.config,s=a.camera,l=a.renderingService,u=a.renderingContext,c=a.rBushRoot,f=a.pathGeneratorFactory,d=o.renderer.getConfig().enableRenderingOptimization;o.renderer.getConfig().enableDirtyCheck=!1,o.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=c,this.pathGeneratorFactory=f;var h=n.contextService,p=u.root.ownerDocument.defaultView,g=function(b){var x=b.target,w=x.rBushNode;w.aabb&&i.removedRBushNodeAABBs.push(w.aabb)},v=function(b){var x=b.target,w=x.rBushNode;w.aabb&&i.removedRBushNodeAABBs.push(w.aabb)};l.hooks.init.tap(t.tag,function(){p.addEventListener(Dt.UNMOUNTED,g),p.addEventListener(Dt.CULLED,v);var y=h.getDPR(),b=o.width,x=o.height,w=h.getContext();i.clearRect(w,0,0,b*y,x*y,o.background)}),l.hooks.destroy.tap(t.tag,function(){p.removeEventListener(Dt.UNMOUNTED,g),p.removeEventListener(Dt.CULLED,v),i.renderQueue=[],i.removedRBushNodeAABBs=[],Bs(i,Wr)[Wr]={restoreStack:[],prevObject:null,currentContext:null}}),l.hooks.beginFrame.tap(t.tag,function(){var y,b=h.getContext(),x=h.getDPR(),w=o.width,_=o.height,E=i.canvasRendererPluginOptions,S=E.dirtyObjectNumThreshold,O=E.dirtyObjectRatioThreshold,A=l.getStats(),T=A.total,I=A.rendered,D=I/T;i.clearFullScreen=i.clearFullScreenLastFrame||!((y=p.context.renderingPlugins[1])!==null&&y!==void 0&&y.isFirstTimeRenderingFinished)||l.disableDirtyRectangleRendering()||I>S&&D>O,b&&(typeof b.resetTransform=="function"?b.resetTransform():b.setTransform(1,0,0,1,0,0),i.clearFullScreen&&i.clearRect(b,0,0,w*x,_*x,o.background))});var m=function(b,x){for(var w=[b];w.length>0;){var _,E=w.pop();E.isVisible()&&!E.isCulled()&&(d?i.renderDisplayObjectOptimized(E,x,i.context,Bs(i,Wr)[Wr],r):i.renderDisplayObject(E,x,i.context,Bs(i,Wr)[Wr],r));for(var S=((_=E.sortable)===null||_===void 0||(_=_.sorted)===null||_===void 0?void 0:_.length)>0?E.sortable.sorted:E.childNodes,O=S.length-1;O>=0;O--)w.push(S[O])}};l.hooks.endFrame.tap(t.tag,function(){if(u.root.childNodes.length===0){i.clearFullScreenLastFrame=!0;return}d=o.renderer.getConfig().enableRenderingOptimization,Bs(i,Wr)[Wr]={restoreStack:[],prevObject:null,currentContext:Bs(i,Wr)[Wr].currentContext},Bs(i,Wr)[Wr].currentContext.clear(),i.clearFullScreenLastFrame=!1;var y=h.getContext(),b=h.getDPR();if(zu(i.dprMatrix,[b,b,1]),oa(i.vpMatrix,i.dprMatrix,s.getOrthoMatrix()),i.clearFullScreen)d?(y.save(),m(u.root,y),y.restore()):m(u.root,y),i.removedRBushNodeAABBs=[];else{var x=i.safeMergeAABB.apply(i,[i.mergeDirtyAABBs(i.renderQueue)].concat(Bt(i.removedRBushNodeAABBs.map(function(q){var K=q.minX,J=q.minY,Q=q.maxX,se=q.maxY,de=new zn;return de.setMinMax([K,J,0],[Q,se,0]),de}))));if(i.removedRBushNodeAABBs=[],zn.isEmpty(x)){i.renderQueue=[];return}var w=i.convertAABB2Rect(x),_=w.x,E=w.y,S=w.width,O=w.height,A=Cr(i.vec3a,[_,E,0],i.vpMatrix),T=Cr(i.vec3b,[_+S,E,0],i.vpMatrix),I=Cr(i.vec3c,[_,E+O,0],i.vpMatrix),D=Cr(i.vec3d,[_+S,E+O,0],i.vpMatrix),R=Math.min(A[0],T[0],D[0],I[0]),F=Math.min(A[1],T[1],D[1],I[1]),z=Math.max(A[0],T[0],D[0],I[0]),N=Math.max(A[1],T[1],D[1],I[1]),L=Math.floor(R),B=Math.floor(F),$=Math.ceil(z-R),G=Math.ceil(N-F);y.save(),i.clearRect(y,L,B,$,G,o.background),y.beginPath(),y.rect(L,B,$,G),y.clip(),y.setTransform(i.vpMatrix[0],i.vpMatrix[1],i.vpMatrix[4],i.vpMatrix[5],i.vpMatrix[12],i.vpMatrix[13]);var W=o.renderer.getConfig(),U=W.enableDirtyRectangleRenderingDebug;U&&p.dispatchEvent(new _n(Qa.DIRTY_RECTANGLE,{dirtyRect:{x:L,y:B,width:$,height:G}}));var Y=i.searchDirtyObjects(x);Y.sort(function(q,K){return q.sortable.renderOrder-K.sortable.renderOrder}).forEach(function(q){q&&q.isVisible()&&!q.isCulled()&&i.renderDisplayObject(q,y,i.context,Bs(i,Wr)[Wr],r)}),y.restore(),i.renderQueue.forEach(function(q){i.saveDirtyAABB(q)}),i.renderQueue=[]}Bs(i,Wr)[Wr].restoreStack.forEach(function(){y.restore()}),Bs(i,Wr)[Wr].restoreStack=[]}),l.hooks.render.tap(t.tag,function(y){i.clearFullScreen||i.renderQueue.push(y)})}},{key:"clearRect",value:function(n,r,i,a,o,s){n.clearRect(r,i,a,o),s&&(n.fillStyle=s,n.fillRect(r,i,a,o))}},{key:"renderDisplayObjectOptimized",value:function(n,r,i,a,o){var s=n.nodeName,l=!1,u=!1,c=this.context.styleRendererFactory[s],f=this.pathGeneratorFactory[s],d=n.parsedStyle.clipPath;if(d){l=!a.prevObject||!E6(d.getWorldTransform(),a.prevObject.getWorldTransform()),l&&(this.applyWorldTransform(r,d),a.prevObject=null);var h=this.pathGeneratorFactory[d.nodeName];h&&(r.save(),u=!0,r.beginPath(),h(r,d.parsedStyle),r.closePath(),r.clip())}if(c){l=!a.prevObject||!E6(n.getWorldTransform(),a.prevObject.getWorldTransform()),l&&this.applyWorldTransform(r,n);var p=!a.prevObject;if(!p){var g=a.prevObject.nodeName;s===pe.TEXT?p=g!==pe.TEXT:s===pe.IMAGE?p=g!==pe.IMAGE:p=g===pe.TEXT||g===pe.IMAGE}c.applyStyleToContext(r,n,p,a),a.prevObject=n}f&&(r.beginPath(),f(r,n.parsedStyle),s!==pe.LINE&&s!==pe.PATH&&s!==pe.POLYLINE&&r.closePath()),c&&c.drawToContext(r,n,Bs(this,Wr)[Wr],this,o),u&&r.restore(),n.renderable.dirty=!1}},{key:"renderDisplayObject",value:function(n,r,i,a,o){var s=n.nodeName,l=a.restoreStack[a.restoreStack.length-1];l&&!(n.compareDocumentPosition(l)&vr.DOCUMENT_POSITION_CONTAINS)&&(r.restore(),a.restoreStack.pop());var u=this.context.styleRendererFactory[s],c=this.pathGeneratorFactory[s],f=n.parsedStyle.clipPath;if(f){this.applyWorldTransform(r,f);var d=this.pathGeneratorFactory[f.nodeName];d&&(r.save(),a.restoreStack.push(n),r.beginPath(),d(r,f.parsedStyle),r.closePath(),r.clip())}u&&(this.applyWorldTransform(r,n),r.save(),this.applyAttributesToContext(r,n)),c&&(r.beginPath(),c(r,n.parsedStyle),s!==pe.LINE&&s!==pe.PATH&&s!==pe.POLYLINE&&r.closePath()),u&&(u.render(r,n.parsedStyle,n,i,this,o),r.restore()),n.renderable.dirty=!1}},{key:"applyAttributesToContext",value:function(n,r){var i=r.parsedStyle,a=i.stroke,o=i.fill,s=i.opacity,l=i.lineDash,u=i.lineDashOffset;l&&n.setLineDash(l),lt(u)||(n.lineDashOffset=u),lt(s)||(n.globalAlpha*=s),!lt(a)&&!Array.isArray(a)&&!a.isNone&&(n.strokeStyle=r.attributes.stroke),!lt(o)&&!Array.isArray(o)&&!o.isNone&&(n.fillStyle=r.attributes.fill)}},{key:"convertAABB2Rect",value:function(n){var r=n.getMin(),i=n.getMax(),a=Math.floor(r[0]),o=Math.floor(r[1]),s=Math.ceil(i[0]),l=Math.ceil(i[1]),u=s-a,c=l-o;return{x:a,y:o,width:u,height:c}}},{key:"mergeDirtyAABBs",value:function(n){var r=new zn;return n.forEach(function(i){var a=i.getRenderBounds();r.add(a);var o=i.renderable.dirtyRenderBounds;o&&r.add(o)}),r}},{key:"searchDirtyObjects",value:function(n){var r=n.getMin(),i=Ot(r,2),a=i[0],o=i[1],s=n.getMax(),l=Ot(s,2),u=l[0],c=l[1],f=this.rBush.search({minX:a,minY:o,maxX:u,maxY:c});return f.map(function(d){var h=d.displayObject;return h})}},{key:"saveDirtyAABB",value:function(n){var r=n.renderable;r.dirtyRenderBounds||(r.dirtyRenderBounds=new zn);var i=n.getRenderBounds();i&&r.dirtyRenderBounds.update(i.center,i.halfExtents)}},{key:"applyWorldTransform",value:function(n,r,i){i?(Bh(this.tmpMat4,r.getLocalTransform()),oa(this.tmpMat4,i,this.tmpMat4),oa(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(Bh(this.tmpMat4,r.getWorldTransform()),oa(this.tmpMat4,this.vpMatrix,this.tmpMat4)),n.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var n=new zn,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return i.forEach(function(o){n.add(o)}),n}}])}();kae.tag="CanvasRenderer";function ux(t,e,n,r,i,a,o){var s,l;if(t.image.nodeName==="rect"){var u=t.image.parsedStyle,c=u.width,f=u.height;l=r.contextService.getDPR();var d=r.config.offscreenCanvas;s=a.offscreenCanvasCreator.getOrCreateCanvas(d),s.width=c*l,s.height=f*l;var h=a.offscreenCanvasCreator.getOrCreateContext(d),p={restoreStack:[],prevObject:null,currentContext:new Map};t.image.forEach(function(v){i.renderDisplayObject(v,h,r,p,a)}),p.restoreStack.forEach(function(){h.restore()})}var g=o.getOrCreatePatternSync(e,t,n,s,l,e.getGeometryBounds().min,function(){e.renderable.dirty=!0,r.renderingService.dirtify()});return g}function cx(t,e,n,r){var i;if(t.type===Uu.LinearGradient||t.type===Uu.RadialGradient){var a=e.getGeometryBounds(),o=a&&a.halfExtents[0]*2||1,s=a&&a.halfExtents[1]*2||1,l=a&&a.min||[0,0];i=r.getOrCreateGradient(It(It({type:t.type},t.value),{},{min:l,width:o,height:s}),n)}return i}var Ny=["shadowBlur","shadowOffsetX","shadowOffsetY"],ej=["lineCap","lineJoin","miterLimit"],Qr={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},tj={};function Sr(t,e,n,r){var i=r.has(e)?r.get(e):Qr[e];return i!==n&&(e==="lineDash"?t.setLineDash(n):t[e]=n,r.set(e,n)),i}var R7e=function(){function t(e){Ae(this,t),this.imagePool=e}return Te(t,[{key:"applyAttributesToContext",value:function(n,r){}},{key:"render",value:function(n,r,i,a,o,s){}},{key:"applyCommonStyleToContext",value:function(n,r,i,a){var o=i?tj:a.prevObject.parsedStyle,s=r.parsedStyle;(i||s.opacity!==o.opacity)&&Sr(n,"globalAlpha",lt(s.opacity)?Qr.globalAlpha:s.opacity,a.currentContext),(i||s.blend!==o.blend)&&Sr(n,"globalCompositeOperation",lt(s.blend)?Qr.globalCompositeOperation:s.blend,a.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(n,r,i,a){var o=i?tj:a.prevObject.parsedStyle,s=r.parsedStyle,l=s.lineWidth,u=l===void 0?Qr.lineWidth:l,c=s.fill&&!s.fill.isNone,f=s.stroke&&!s.stroke.isNone&&u>0;if(f){if(i||r.attributes.stroke!==a.prevObject.attributes.stroke){var d=!lt(s.stroke)&&!Array.isArray(s.stroke)&&!s.stroke.isNone?r.attributes.stroke:Qr.strokeStyle;Sr(n,"strokeStyle",d,a.currentContext)}(i||s.lineWidth!==o.lineWidth)&&Sr(n,"lineWidth",lt(s.lineWidth)?Qr.lineWidth:s.lineWidth,a.currentContext),(i||s.lineDash!==o.lineDash)&&Sr(n,"lineDash",s.lineDash||Qr.lineDash,a.currentContext),(i||s.lineDashOffset!==o.lineDashOffset)&&Sr(n,"lineDashOffset",lt(s.lineDashOffset)?Qr.lineDashOffset:s.lineDashOffset,a.currentContext);for(var h=0;h<ej.length;h++){var p=ej[h];(i||s[p]!==o[p])&&Sr(n,p,lt(s[p])?Qr[p]:s[p],a.currentContext)}}if(c&&(i||r.attributes.fill!==a.prevObject.attributes.fill)){var g=!lt(s.fill)&&!Array.isArray(s.fill)&&!s.fill.isNone?r.attributes.fill:Qr.fillStyle;Sr(n,"fillStyle",g,a.currentContext)}}},{key:"applyStyleToContext",value:function(n,r,i,a){var o=r.nodeName;this.applyCommonStyleToContext(n,r,i,a),o===pe.IMAGE||this.applyStrokeFillStyleToContext(n,r,i,a)}},{key:"applyShadowAndFilterStyleToContext",value:function(n,r,i,a){var o=r.parsedStyle;if(i){Sr(n,"shadowColor",o.shadowColor.toString(),a.currentContext);for(var s=0;s<Ny.length;s++){var l=Ny[s];Sr(n,l,o[l]||Qr[l],a.currentContext)}}o.filter&&o.filter.length&&Sr(n,"filter",r.attributes.filter,a.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(n,r,i,a){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(r){Sr(n,"shadowColor",Qr.shadowColor,a.currentContext);for(var s=0;s<Ny.length;s++){var l=Ny[s];Sr(n,l,Qr[l],a.currentContext)}}if(i)if(r&&o){var u=n.filter;!lt(u)&&u.indexOf("drop-shadow")>-1&&Sr(n,"filter",u.replace(/drop-shadow\([^)]*\)/,"").trim()||Qr.filter,a.currentContext)}else Sr(n,"filter",Qr.filter,a.currentContext)}},{key:"fillToContext",value:function(n,r,i,a,o){var s=this,l=r.parsedStyle,u=l.fill,c=l.fillRule,f=null;if(Array.isArray(u)&&u.length>0)u.forEach(function(h){var p=Sr(n,"fillStyle",cx(h,r,n,s.imagePool),i.currentContext);f=f??p,c?n.fill(c):n.fill()});else{if(Wf(u)){var d=ux(u,r,n,r.ownerDocument.defaultView.context,a,o,this.imagePool);d&&(n.fillStyle=d,f=!0)}c?n.fill(c):n.fill()}f!==null&&Sr(n,"fillStyle",f,i.currentContext)}},{key:"strokeToContext",value:function(n,r,i,a,o){var s=this,l=r.parsedStyle.stroke,u=null;if(Array.isArray(l)&&l.length>0)l.forEach(function(d){var h=Sr(n,"strokeStyle",cx(d,r,n,s.imagePool),i.currentContext);u=u??h,n.stroke()});else{if(Wf(l)){var c=ux(l,r,n,r.ownerDocument.defaultView.context,a,o,this.imagePool);if(c){var f=Sr(n,"strokeStyle",c,i.currentContext);u=u??f}}n.stroke()}u!==null&&Sr(n,"strokeStyle",u,i.currentContext)}},{key:"drawToContext",value:function(n,r,i,a,o){var s,l=r.nodeName,u=r.parsedStyle,c=u.opacity,f=c===void 0?Qr.globalAlpha:c,d=u.fillOpacity,h=d===void 0?Qr.fillOpacity:d,p=u.strokeOpacity,g=p===void 0?Qr.strokeOpacity:p,v=u.lineWidth,m=v===void 0?Qr.lineWidth:v,y=u.fill&&!u.fill.isNone,b=u.stroke&&!u.stroke.isNone&&m>0;if(!(!y&&!b)){var x=!lt(u.shadowColor)&&u.shadowBlur>0,w=u.shadowType==="inner",_=((s=u.fill)===null||s===void 0?void 0:s.alpha)===0,E=!!(u.filter&&u.filter.length),S=x&&b&&(l===pe.PATH||l===pe.LINE||l===pe.POLYLINE||_||w),O=null;if(y){S||this.applyShadowAndFilterStyleToContext(n,r,x,i);var A=f*h;O=Sr(n,"globalAlpha",A,i.currentContext),this.fillToContext(n,r,i,a,o),S||this.clearShadowAndFilterStyleForContext(n,x,E,i)}if(b){var T=!1,I=f*g,D=Sr(n,"globalAlpha",I,i.currentContext);if(O=y?O:D,S&&(this.applyShadowAndFilterStyleToContext(n,r,x,i),T=!0,w)){var R=n.globalCompositeOperation;n.globalCompositeOperation="source-atop",this.strokeToContext(n,r,i,a,o),n.globalCompositeOperation=R,this.clearShadowAndFilterStyleForContext(n,x,E,i,!0)}this.strokeToContext(n,r,i,a,o),T&&this.clearShadowAndFilterStyleForContext(n,x,E,i)}O!==null&&Sr(n,"globalAlpha",O,i.currentContext)}}}])}(),oR=function(t){function e(){return Ae(this,e),Nt(this,e,arguments)}return Ft(e,t),Te(e,[{key:"render",value:function(r,i,a,o,s,l){var u=i.fill,c=i.fillRule,f=i.opacity,d=f===void 0?1:f,h=i.fillOpacity,p=h===void 0?1:h,g=i.stroke,v=i.strokeOpacity,m=v===void 0?1:v,y=i.lineWidth,b=y===void 0?1:y,x=i.lineCap,w=i.lineJoin,_=i.shadowType,E=i.shadowColor,S=i.shadowBlur,O=i.filter,A=i.miterLimit,T=u&&!u.isNone,I=g&&!g.isNone&&b>0,D=(u==null?void 0:u.alpha)===0,R=!!(O&&O.length),F=!lt(E)&&S>0,z=a.nodeName,N=_==="inner",L=I&&F&&(z===pe.PATH||z===pe.LINE||z===pe.POLYLINE||D||N);T&&(r.globalAlpha=d*p,L||fx(a,r,F),Aae(r,a,u,c,o,s,l,this.imagePool),L||this.clearShadowAndFilter(r,R,F)),I&&(r.globalAlpha=d*m,r.lineWidth=b,lt(A)||(r.miterLimit=A),lt(x)||(r.lineCap=x),lt(w)||(r.lineJoin=w),L&&(N&&(r.globalCompositeOperation="source-atop"),fx(a,r,!0),N&&(AP(r,a,g,o,s,l,this.imagePool),r.globalCompositeOperation=Qr.globalCompositeOperation,this.clearShadowAndFilter(r,R,!0))),AP(r,a,g,o,s,l,this.imagePool))}},{key:"clearShadowAndFilter",value:function(r,i,a){if(a&&(r.shadowColor="transparent",r.shadowBlur=0),i){var o=r.filter;!lt(o)&&o.indexOf("drop-shadow")>-1&&(r.filter=o.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])}(R7e);function fx(t,e,n){var r=t.parsedStyle,i=r.filter,a=r.shadowColor,o=r.shadowBlur,s=r.shadowOffsetX,l=r.shadowOffsetY;i&&i.length&&(e.filter=t.style.filter),n&&(e.shadowColor=a.toString(),e.shadowBlur=o||0,e.shadowOffsetX=s||0,e.shadowOffsetY=l||0)}function Aae(t,e,n,r,i,a,o,s){var l=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1;Array.isArray(n)?n.forEach(function(u){t.fillStyle=cx(u,e,t,s),l||(r?t.fill(r):t.fill())}):(Wf(n)&&(t.fillStyle=ux(n,e,t,i,a,o,s)),l||(r?t.fill(r):t.fill()))}function AP(t,e,n,r,i,a,o){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;Array.isArray(n)?n.forEach(function(l){t.strokeStyle=cx(l,e,t,o),s||t.stroke()}):(Wf(n)&&(t.strokeStyle=ux(n,e,t,r,i,a,o)),s||t.stroke())}function N7e(t,e){var n=Ot(t,4),r=n[0],i=n[1],a=n[2],o=n[3],s=Ot(e,4),l=s[0],u=s[1],c=s[2],f=s[3],d=Math.max(r,l),h=Math.max(i,u),p=Math.min(r+a,l+c),g=Math.min(i+o,u+f);return p<=d||g<=h?null:[d,h,p-d,g-h]}function F7e(t,e){var n=Cr(Wt(),[t[0],t[1],0],e),r=Cr(Wt(),[t[0]+t[2],t[1],0],e),i=Cr(Wt(),[t[0],t[1]+t[3],0],e),a=Cr(Wt(),[t[0]+t[2],t[1]+t[3],0],e);return[Math.min(n[0],r[0],i[0],a[0]),Math.min(n[1],r[1],i[1],a[1]),Math.max(n[0],r[0],i[0],a[0])-Math.min(n[0],r[0],i[0],a[0]),Math.max(n[1],r[1],i[1],a[1])-Math.min(n[1],r[1],i[1],a[1])]}var z7e=function(t){function e(){return Ae(this,e),Nt(this,e,arguments)}return Ft(e,t),Te(e,[{key:"renderDownSampled",value:function(r,i,a,o){var s=o.src,l=o.imageCache;if(!l.downSampled){this.imagePool.createDownSampledImage(s,a).then(function(){a.ownerDocument&&(a.renderable.dirty=!0,a.ownerDocument.defaultView.context.renderingService.dirtify())}).catch(function(u){console.error(u)});return}r.drawImage(l.downSampled,Math.floor(o.drawRect[0]),Math.floor(o.drawRect[1]),Math.ceil(o.drawRect[2]),Math.ceil(o.drawRect[3]))}},{key:"renderTile",value:function(r,i,a,o){var s=o.src,l=o.imageCache,u=o.imageRect,c=o.drawRect,f=l.size,d=r.getTransform(),h=d.a,p=d.b,g=d.c,v=d.d,m=d.e,y=d.f;if(r.resetTransform(),!(l!=null&&l.gridSize)){this.imagePool.createImageTiles(s,[],function(){a.ownerDocument&&(a.renderable.dirty=!0,a.ownerDocument.defaultView.context.renderingService.dirtify())},a).catch(function(F){console.error(F)});return}for(var b=[f[0]/u[2],f[1]/u[3]],x=[l.tileSize[0]/b[0],l.tileSize[1]/b[1]],w=[Math.floor((c[0]-u[0])/x[0]),Math.ceil((c[0]+c[2]-u[0])/x[0])],_=w[0],E=w[1],S=[Math.floor((c[1]-u[1])/x[1]),Math.ceil((c[1]+c[3]-u[1])/x[1])],O=S[0],A=S[1],T=O;T<=A;T++)for(var I=_;I<=E;I++){var D=l.tiles[T][I];if(D){var R=[Math.floor(u[0]+D.tileX*x[0]),Math.floor(u[1]+D.tileY*x[1]),Math.ceil(x[0]),Math.ceil(x[1])];r.drawImage(D.data,R[0],R[1],R[2],R[3])}}r.setTransform(h,p,g,v,m,y)}},{key:"render",value:function(r,i,a){var o=i.x,s=o===void 0?0:o,l=i.y,u=l===void 0?0:l,c=i.width,f=i.height,d=i.src,h=i.shadowColor,p=i.shadowBlur,g=this.imagePool.getImageSync(d,a),v=g==null?void 0:g.img,m=c,y=f;if(v){m||(m=v.width),y||(y=v.height);var b=!lt(h)&&p>0;fx(a,r,b);try{var x=a.ownerDocument.defaultView.getContextService().getDomElement(),w=x.width,_=x.height,E=r.getTransform(),S=E.a,O=E.b,A=E.c,T=E.d,I=E.e,D=E.f,R=GK(S,A,0,0,O,T,0,0,0,0,1,0,I,D,0,1),F=F7e([s,u,m,y],R),z=N7e([0,0,w,_],F);if(!z)return;if(!a.ownerDocument.defaultView.getConfig().enableLargeImageOptimization){e.renderFull(r,i,a,{image:v,drawRect:[s,u,m,y]});return}var N=F[2]/g.size[0];if(N<(g.downSamplingRate||.5)){this.renderDownSampled(r,i,a,{src:d,imageCache:g,drawRect:[s,u,m,y]});return}if(!aR.isSupportTile){e.renderFull(r,i,a,{image:v,drawRect:[s,u,m,y]});return}this.renderTile(r,i,a,{src:d,imageCache:g,imageRect:F,drawRect:z})}catch{}}}},{key:"drawToContext",value:function(r,i,a,o,s){this.render(r,i.parsedStyle,i)}}],[{key:"renderFull",value:function(r,i,a,o){r.drawImage(o.image,Math.floor(o.drawRect[0]),Math.floor(o.drawRect[1]),Math.ceil(o.drawRect[2]),Math.ceil(o.drawRect[3]))}}])}(oR),j7e=function(t){function e(){return Ae(this,e),Nt(this,e,arguments)}return Ft(e,t),Te(e,[{key:"render",value:function(r,i,a,o,s,l){a.getBounds();var u=i.lineWidth,c=u===void 0?1:u,f=i.textAlign,d=f===void 0?"start":f,h=i.textBaseline,p=h===void 0?"alphabetic":h,g=i.lineJoin,v=g===void 0?"miter":g,m=i.miterLimit,y=m===void 0?10:m,b=i.letterSpacing,x=b===void 0?0:b,w=i.stroke,_=i.fill,E=i.fillRule,S=i.fillOpacity,O=S===void 0?1:S,A=i.strokeOpacity,T=A===void 0?1:A,I=i.opacity,D=I===void 0?1:I,R=i.metrics,F=i.x,z=F===void 0?0:F,N=i.y,L=N===void 0?0:N,B=i.dx,$=i.dy,G=i.shadowColor,W=i.shadowBlur,U=R.font,Y=R.lines,q=R.height,K=R.lineHeight,J=R.lineMetrics;r.font=U,r.lineWidth=c,r.textAlign=d==="middle"?"center":d;var Q=p;Q==="alphabetic"&&(Q="bottom"),r.lineJoin=v,lt(y)||(r.miterLimit=y);var se=L;p==="middle"?se+=-q/2-K/2:p==="bottom"||p==="alphabetic"||p==="ideographic"?se+=-q:(p==="top"||p==="hanging")&&(se+=-K);var de=z+(B||0);se+=$||0,Y.length===1&&(Q==="bottom"?(Q="middle",se-=.5*q):Q==="top"&&(Q="middle",se+=.5*q)),r.textBaseline=Q;var ye=!lt(G)&&W>0;fx(a,r,ye);for(var _e=0;_e<Y.length;_e++){var Ee=c/2+de;se+=K,!lt(w)&&!w.isNone&&c&&this.drawLetterSpacing(r,a,Y[_e],J[_e],d,Ee,se,x,_,E,O,w,T,D,!0,o,s,l),lt(_)||this.drawLetterSpacing(r,a,Y[_e],J[_e],d,Ee,se,x,_,E,O,w,T,D,!1,o,s,l)}}},{key:"drawLetterSpacing",value:function(r,i,a,o,s,l,u,c,f,d,h,p,g,v,m,y,b,x){if(c===0){m?this.strokeText(r,i,a,l,u,p,g,y,b,x):this.fillText(r,i,a,l,u,f,d,h,v,y,b,x);return}var w=r.textAlign;r.textAlign="left";var _=l;s==="center"||s==="middle"?_=l-o.width/2:(s==="right"||s==="end")&&(_=l-o.width);for(var E=Array.from(a),S=r.measureText(a).width,O=0,A=0;A<E.length;++A){var T=E[A];m?this.strokeText(r,i,T,_,u,p,g,y,b,x):this.fillText(r,i,T,_,u,f,d,h,v,y,b,x),O=r.measureText(a.substring(A+1)).width,_+=S-O+c,S=O}r.textAlign=w}},{key:"fillText",value:function(r,i,a,o,s,l,u,c,f,d,h,p){Aae(r,i,l,u,d,h,p,this.imagePool,!0);var g,v=!lt(c)&&c!==1;v&&(g=r.globalAlpha,r.globalAlpha=c*f),r.fillText(a,o,s),v&&(r.globalAlpha=g)}},{key:"strokeText",value:function(r,i,a,o,s,l,u,c,f,d){AP(r,i,l,c,f,d,this.imagePool,!0);var h,p=!lt(u)&&u!==1;p&&(h=r.globalAlpha,r.globalAlpha=u),r.strokeText(a,o,s),p&&(r.globalAlpha=h)}},{key:"drawToContext",value:function(r,i,a,o,s){this.render(r,i.parsedStyle,i,i.ownerDocument.defaultView.context,o,s)}}])}(oR),B7e=function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ae(this,e),n=Nt(this,e),n.name="canvas-renderer",n.options=r,n}return Ft(e,t),Te(e,[{key:"init",value:function(){var r,i=It({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),a=this.context.imagePool,o=new oR(a),s=(r={},He(He(He(He(He(He(He(He(He(He(r,pe.CIRCLE,o),pe.ELLIPSE,o),pe.RECT,o),pe.IMAGE,new z7e(a)),pe.TEXT,new j7e(a)),pe.LINE,o),pe.POLYLINE,o),pe.POLYGON,o),pe.PATH,o),pe.GROUP,void 0),He(He(He(r,pe.HTML,void 0),pe.MESH,void 0),pe.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=s,this.context.styleRendererFactory=s,this.addRenderingPlugin(new kae(i))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(Dc);/*!
 * @antv/g-plugin-dom-interaction
 * @description A G plugin
 * @version 2.1.24
 * @date 5/9/2025, 8:20:12 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Tae=function(){function t(){Ae(this,t)}return Te(t,[{key:"apply",value:function(n,r){var i=this,a=n.renderingService,o=n.renderingContext,s=n.config;this.context=n;var l=o.root.ownerDocument.defaultView,u=function(S){a.hooks.pointerMove.call(S)},c=function(S){a.hooks.pointerUp.call(S)},f=function(S){a.hooks.pointerDown.call(S)},d=function(S){a.hooks.pointerOver.call(S)},h=function(S){a.hooks.pointerOut.call(S)},p=function(S){a.hooks.pointerCancel.call(S)},g=function(S){a.hooks.pointerWheel.call(S)},v=function(S){a.hooks.click.call(S)},m=function(S){r.globalThis.document.addEventListener("pointermove",u,!0),S.addEventListener("pointerdown",f,!0),S.addEventListener("pointerleave",h,!0),S.addEventListener("pointerover",d,!0),r.globalThis.addEventListener("pointerup",c,!0),r.globalThis.addEventListener("pointercancel",p,!0)},y=function(S){S.addEventListener("touchstart",f,!0),S.addEventListener("touchend",c,!0),S.addEventListener("touchmove",u,!0),S.addEventListener("touchcancel",p,!0)},b=function(S){r.globalThis.document.addEventListener("mousemove",u,!0),S.addEventListener("mousedown",f,!0),S.addEventListener("mouseout",h,!0),S.addEventListener("mouseover",d,!0),r.globalThis.addEventListener("mouseup",c,!0)},x=function(S){r.globalThis.document.removeEventListener("pointermove",u,!0),S.removeEventListener("pointerdown",f,!0),S.removeEventListener("pointerleave",h,!0),S.removeEventListener("pointerover",d,!0),r.globalThis.removeEventListener("pointerup",c,!0),r.globalThis.removeEventListener("pointercancel",p,!0)},w=function(S){S.removeEventListener("touchstart",f,!0),S.removeEventListener("touchend",c,!0),S.removeEventListener("touchmove",u,!0),S.removeEventListener("touchcancel",p,!0)},_=function(S){r.globalThis.document.removeEventListener("mousemove",u,!0),S.removeEventListener("mousedown",f,!0),S.removeEventListener("mouseout",h,!0),S.removeEventListener("mouseover",d,!0),r.globalThis.removeEventListener("mouseup",c,!0)};a.hooks.init.tap(t.tag,function(){var E=i.context.contextService.getDomElement();r.globalThis.navigator.msPointerEnabled?(E.style.msContentZooming="none",E.style.msTouchAction="none"):l.supportsPointerEvents&&(E.style.touchAction="none"),l.supportsPointerEvents?m(E):b(E),l.supportsTouchEvents&&y(E),s.useNativeClickEvent&&E.addEventListener("click",v,!0),E.addEventListener("wheel",g,{passive:!0,capture:!0})}),a.hooks.destroy.tap(t.tag,function(){var E=i.context.contextService.getDomElement();r.globalThis.navigator.msPointerEnabled?(E.style.msContentZooming="",E.style.msTouchAction=""):l.supportsPointerEvents&&(E.style.touchAction=""),l.supportsPointerEvents?x(E):_(E),l.supportsTouchEvents&&w(E),s.useNativeClickEvent&&E.removeEventListener("click",v,!0),E.removeEventListener("wheel",g,!0)})}}])}();Tae.tag="DOMInteraction";var $7e=function(t){function e(){var n;Ae(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Nt(this,e,[].concat(i)),n.name="dom-interaction",n}return Ft(e,t),Te(e,[{key:"init",value:function(){this.addRenderingPlugin(new Tae)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Dc);/*!
 * @antv/g-plugin-html-renderer
 * @description A G plugin for rendering HTML
 * @version 2.1.24
 * @date 5/9/2025, 8:20:22 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var V7e="g-canvas-camera",Mae=function(){function t(){Ae(this,t),this.displayObjectHTMLElementMap=new WeakMap}return Te(t,[{key:"joinTransformMatrix",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return"matrix(".concat([n[0],n[1],n[4],n[5],n[12]+r[0],n[13]+r[1]].join(","),")")}},{key:"apply",value:function(n,r){var i=this,a=n.camera,o=n.renderingContext,s=n.renderingService;this.context=n;var l=o.root.ownerDocument.defaultView,u=l.context.eventService.nativeHTMLMap,c=function(m,y){y.style.transform=i.joinTransformMatrix(m.getWorldTransform(),m.getOrigin())},f=function(m){var y=m.target;if(y.nodeName===pe.HTML){i.$camera||(i.$camera=i.createCamera(a));var b=i.getOrCreateEl(y);i.$camera.appendChild(b),Object.keys(y.attributes).forEach(function(x){i.updateAttribute(x,y)}),c(y,b),u.set(b,y)}},d=function(m){var y=m.target;if(y.nodeName===pe.HTML&&i.$camera){var b=i.getOrCreateEl(y);b&&(b.remove(),u.delete(b))}},h=function(m){var y=m.target;if(y.nodeName===pe.HTML){var b=m.attrName;i.updateAttribute(b,y)}},p=function(m){var y=m.target,b=y.nodeName===pe.FRAGMENT?y.childNodes:[y];b.forEach(function(x){if(x.nodeName===pe.HTML){var w=i.getOrCreateEl(x);c(x,w)}})},g=function(){if(i.$camera){var m=i.context.config,y=m.width,b=m.height;i.$camera.parentElement.style.width="".concat(y||0,"px"),i.$camera.parentElement.style.height="".concat(b||0,"px")}};s.hooks.init.tap(t.tag,function(){l.addEventListener(Qa.RESIZE,g),l.addEventListener(Dt.MOUNTED,f),l.addEventListener(Dt.UNMOUNTED,d),l.addEventListener(Dt.ATTR_MODIFIED,h),l.addEventListener(Dt.BOUNDS_CHANGED,p)}),s.hooks.endFrame.tap(t.tag,function(){i.$camera&&o.renderReasons.has(mh.CAMERA_CHANGED)&&(i.$camera.style.transform=i.joinTransformMatrix(a.getOrthoMatrix()))}),s.hooks.destroy.tap(t.tag,function(){i.$camera&&i.$camera.remove(),l.removeEventListener(Qa.RESIZE,g),l.removeEventListener(Dt.MOUNTED,f),l.removeEventListener(Dt.UNMOUNTED,d),l.removeEventListener(Dt.ATTR_MODIFIED,h),l.removeEventListener(Dt.BOUNDS_CHANGED,p)})}},{key:"createCamera",value:function(n){var r=this.context.config,i=r.document,a=r.width,o=r.height,s=this.context.contextService.getDomElement(),l=s.parentNode;if(l){var u=V7e,c=l.querySelector("#".concat(u));if(!c){var f=(i||document).createElement("div");f.style.overflow="hidden",f.style.pointerEvents="none",f.style.position="absolute",f.style.left="0px",f.style.top="0px",f.style.width="".concat(a||0,"px"),f.style.height="".concat(o||0,"px");var d=(i||document).createElement("div");c=d,d.id=u,d.style.position="absolute",d.style.left="".concat(s.offsetLeft||0,"px"),d.style.top="".concat(s.offsetTop||0,"px"),d.style.transformOrigin="left top",d.style.transform=this.joinTransformMatrix(n.getOrthoMatrix()),d.style.pointerEvents="none",d.style.width="100%",d.style.height="100%",f.appendChild(d),l.appendChild(f)}return c}return null}},{key:"getOrCreateEl",value:function(n){var r=this.context.config.document,i=this.displayObjectHTMLElementMap.get(n);return i||(i=(r||document).createElement("div"),n.parsedStyle.$el=i,this.displayObjectHTMLElementMap.set(n,i),n.id&&(i.id=n.id),n.name&&i.setAttribute("name",n.name),n.className&&(i.className=n.className),i.style.position="absolute",i.style["will-change"]="transform",i.style.transform=this.joinTransformMatrix(n.getWorldTransform(),n.getOrigin())),i}},{key:"updateAttribute",value:function(n,r){var i=this.getOrCreateEl(r);switch(n){case"innerHTML":var a=r.parsedStyle.innerHTML;an(a)?i.innerHTML=a:(i.innerHTML="",i.appendChild(a));break;case"x":i.style.left="".concat(r.parsedStyle.x,"px");break;case"y":i.style.top="".concat(r.parsedStyle.y,"px");break;case"transformOrigin":var o=r.parsedStyle.transformOrigin;i.style["transform-origin"]="".concat(o[0].buildCSSText(null,null,"")," ").concat(o[1].buildCSSText(null,null,""));break;case"width":var s=r.parsedStyle.width;i.style.width=je(s)?"".concat(s,"px"):s.toString();break;case"height":var l=r.parsedStyle.height;i.style.height=je(l)?"".concat(l,"px"):l.toString();break;case"zIndex":var u=r.parsedStyle.zIndex;i.style["z-index"]="".concat(u);break;case"visibility":var c=r.parsedStyle.visibility;i.style.visibility=c;break;case"pointerEvents":var f=r.parsedStyle.pointerEvents,d=f===void 0?"auto":f;i.style.pointerEvents=d;break;case"opacity":var h=r.parsedStyle.opacity;i.style.opacity="".concat(h);break;case"fill":var p=r.parsedStyle.fill,g="";Vb(p)?p.isNone?g="transparent":g=r.getAttribute("fill"):Array.isArray(p)?g=r.getAttribute("fill"):Wf(p),i.style.background=g;break;case"stroke":var v=r.parsedStyle.stroke,m="";Vb(v)?v.isNone?m="transparent":m=r.getAttribute("stroke"):Array.isArray(v)?m=r.getAttribute("stroke"):Wf(v),i.style["border-color"]=m,i.style["border-style"]="solid";break;case"lineWidth":var y=r.parsedStyle.lineWidth;i.style["border-width"]="".concat(y||0,"px");break;case"lineDash":i.style["border-style"]="dashed";break;case"filter":var b=r.style.filter;i.style.filter=b;break;default:!lt(r.style[n])&&r.style[n]!==""&&(i.style[n]=r.style[n])}}}])}();Mae.tag="HTMLRendering";var q7e=function(t){function e(){var n;Ae(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Nt(this,e,[].concat(i)),n.name="html-renderer",n}return Ft(e,t),Te(e,[{key:"init",value:function(){this.addRenderingPlugin(new Mae)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Dc);/*!
 * @antv/g-canvas
 * @description A renderer implemented by Canvas 2D API
 * @version 2.0.44
 * @date 5/30/2025, 2:57:07 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var W7e=function(){function t(e){Ae(this,t),this.renderingContext=e.renderingContext,this.canvasConfig=e.config}return Te(t,[{key:"init",value:function(){var n=this.canvasConfig,r=n.container,i=n.canvas;if(i)this.$canvas=i,r&&i.parentElement!==r&&r.appendChild(i),this.$container=i.parentElement,this.canvasConfig.container=this.$container;else if(r&&(this.$container=an(r)?document.getElementById(r):r,this.$container)){var a=document.createElement("canvas");this.$container.appendChild(a),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=a}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(n,r){var i=this.canvasConfig.devicePixelRatio;this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*n,this.$canvas.height=this.dpr*r,aPe(this.$canvas,n,r)),this.renderingContext.renderReasons.add(mh.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(n){this.$container&&this.$container.style&&(this.$container.style.cursor=n)}},{key:"toDataURL",value:function(){var e=xc(qi().mark(function r(){var i,a,o,s=arguments;return qi().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=s.length>0&&s[0]!==void 0?s[0]:{},a=i.type,o=i.encoderOptions,u.abrupt("return",this.context.canvas.toDataURL(a,o));case 3:case"end":return u.stop()}},r,this)}));function n(){return e.apply(this,arguments)}return n}()}])}(),G7e=function(t){function e(){var n;Ae(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Nt(this,e,[].concat(i)),n.name="canvas-context-register",n}return Ft(e,t),Te(e,[{key:"init",value:function(){this.context.ContextService=W7e}},{key:"destroy",value:function(){delete this.context.ContextService}}])}(Dc),Hf=function(t){function e(n){var r;return Ae(this,e),r=Nt(this,e,[n]),r.registerPlugin(new G7e),r.registerPlugin(new L7e),r.registerPlugin(new f7e),r.registerPlugin(new B7e),r.registerPlugin(new $7e),r.registerPlugin(new C7e),r.registerPlugin(new q7e),r}return Ft(e,t),Te(e)}(eCe);/*!
 * @antv/g-plugin-dragndrop
 * @description A G plugin for Drag n Drop implemented with PointerEvents
 * @version 2.0.35
 * @date 5/9/2025, 8:20:14 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Cae=function(){function t(e){Ae(this,t),this.dragndropPluginOptions=e}return Te(t,[{key:"apply",value:function(n){var r=this,i=n.renderingService,a=n.renderingContext,o=a.root.ownerDocument,s=o.defaultView,l=function(c){var f=c.target,d=f===o,h=d&&r.dragndropPluginOptions.isDocumentDraggable?o:f.closest&&f.closest("[draggable=true]");if(h){var p=!1,g=c.timeStamp,v=[c.clientX,c.clientY],m=null,y=[c.clientX,c.clientY],b=function(){var w=xc(qi().mark(function _(E){var S,O,A,T,I,D;return qi().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(p){F.next=8;break}if(S=E.timeStamp-g,O=Ca([E.clientX,E.clientY],v),!(S<=r.dragndropPluginOptions.dragstartTimeThreshold||O<=r.dragndropPluginOptions.dragstartDistanceThreshold)){F.next=5;break}return F.abrupt("return");case 5:E.type="dragstart",h.dispatchEvent(E),p=!0;case 8:if(E.type="drag",E.dx=E.clientX-y[0],E.dy=E.clientY-y[1],h.dispatchEvent(E),y=[E.clientX,E.clientY],d){F.next=21;break}return A=r.dragndropPluginOptions.overlap==="pointer"?[E.canvasX,E.canvasY]:f.getBounds().center,F.next=17,o.elementsFromPoint(A[0],A[1]);case 17:T=F.sent,I=T[T.indexOf(f)+1],D=(I==null?void 0:I.closest("[droppable=true]"))||(r.dragndropPluginOptions.isDocumentDroppable?o:null),m!==D&&(m&&(E.type="dragleave",E.target=m,m.dispatchEvent(E)),D&&(E.type="dragenter",E.target=D,D.dispatchEvent(E)),m=D,m&&(E.type="dragover",E.target=m,m.dispatchEvent(E)));case 21:case"end":return F.stop()}},_)}));return function(E){return w.apply(this,arguments)}}();s.addEventListener("pointermove",b);var x=function(_){if(p){_.detail={preventClick:!0};var E=_.clone();m&&(E.type="drop",E.target=m,m.dispatchEvent(E)),E.type="dragend",h.dispatchEvent(E),p=!1}s.removeEventListener("pointermove",b)};f.addEventListener("pointerup",x,{once:!0}),f.addEventListener("pointerupoutside",x,{once:!0})}};i.hooks.init.tap(t.tag,function(){s.addEventListener("pointerdown",l)}),i.hooks.destroy.tap(t.tag,function(){s.removeEventListener("pointerdown",l)})}}])}();Cae.tag="Dragndrop";var sR=function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ae(this,e),n=Nt(this,e),n.name="dragndrop",n.options=r,n}return Ft(e,t),Te(e,[{key:"init",value:function(){this.addRenderingPlugin(new Cae(It({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(r){Object.assign(this.plugins[0].dragndropPluginOptions,r)}}])}(Dc),H7e="*",kp=function(){function t(){this._events={}}return t.prototype.on=function(e,n,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:n,once:!!r}),this},t.prototype.once=function(e,n){return this.on(e,n,!0)},t.prototype.emit=function(e){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=this._events[e]||[],o=this._events[H7e]||[],s=function(l){for(var u=l.length,c=0;c<u;c++)if(l[c]){var f=l[c],d=f.callback,h=f.once;h&&(l.splice(c,1),l.length===0&&delete n._events[e],u--,c--),d.apply(n,r)}};s(a),s(o)},t.prototype.off=function(e,n){if(!e)this._events={};else if(!n)delete this._events[e];else{for(var r=this._events[e]||[],i=r.length,a=0;a<i;a++)r[a].callback===n&&(r.splice(a,1),i--,a--);r.length===0&&delete this._events[e]}return this},t.prototype.getEvents=function(){return this._events},t}();const xn={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CHANGE_DATA:"beforechangedata",AFTER_CHANGE_DATA:"afterchangedata",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"},Y7e={abs:Math.abs,ceil:Math.ceil,floor:Math.floor,max:Math.max,min:Math.min,round:Math.round,sqrt:Math.sqrt,pow:Math.pow};class ti extends Error{constructor(e,n,r){super(e),this.position=n,this.token=r,this.name="ExpressionError"}}var Mt;(function(t){t[t.STRING=0]="STRING",t[t.NUMBER=1]="NUMBER",t[t.BOOLEAN=2]="BOOLEAN",t[t.NULL=3]="NULL",t[t.IDENTIFIER=4]="IDENTIFIER",t[t.OPERATOR=5]="OPERATOR",t[t.FUNCTION=6]="FUNCTION",t[t.DOT=7]="DOT",t[t.BRACKET_LEFT=8]="BRACKET_LEFT",t[t.BRACKET_RIGHT=9]="BRACKET_RIGHT",t[t.PAREN_LEFT=10]="PAREN_LEFT",t[t.PAREN_RIGHT=11]="PAREN_RIGHT",t[t.COMMA=12]="COMMA",t[t.QUESTION=13]="QUESTION",t[t.COLON=14]="COLON",t[t.DOLLAR=15]="DOLLAR"})(Mt||(Mt={}));const U7e=new Set([32,9,10,13]),X7e=new Set([43,45,42,47,37,33,38,124,61,60,62]),Z7e=new Map([["true",Mt.BOOLEAN],["false",Mt.BOOLEAN],["null",Mt.NULL]]),$E=new Map([["===",!0],["!==",!0],["<=",!0],[">=",!0],["&&",!0],["||",!0],["+",!0],["-",!0],["*",!0],["/",!0],["%",!0],["!",!0],["<",!0],[">",!0]]),K7e=new Map([[46,Mt.DOT],[91,Mt.BRACKET_LEFT],[93,Mt.BRACKET_RIGHT],[40,Mt.PAREN_LEFT],[41,Mt.PAREN_RIGHT],[44,Mt.COMMA],[63,Mt.QUESTION],[58,Mt.COLON],[36,Mt.DOLLAR]]),Pae=new Map;for(const[t,e]of K7e.entries())Pae.set(t,{type:e,value:String.fromCharCode(t)});function Dg(t){return t>=48&&t<=57}function TP(t){return t>=97&&t<=122||t>=65&&t<=90||t===95}function nj(t){return TP(t)||Dg(t)}function J7e(t){return X7e.has(t)}var kr;(function(t){t[t.Program=0]="Program",t[t.Literal=1]="Literal",t[t.Identifier=2]="Identifier",t[t.MemberExpression=3]="MemberExpression",t[t.CallExpression=4]="CallExpression",t[t.BinaryExpression=5]="BinaryExpression",t[t.UnaryExpression=6]="UnaryExpression",t[t.ConditionalExpression=7]="ConditionalExpression"})(kr||(kr={}));const Q7e=new Map([["||",2],["&&",3],["===",4],["!==",4],[">",5],[">=",5],["<",5],["<=",5],["+",6],["-",6],["*",7],["/",7],["%",7],["!",8]]),eze={type:kr.Literal,value:null},tze={type:kr.Literal,value:!0},nze={type:kr.Literal,value:!1},rze=t=>{let e=0;const n=t.length,r=()=>e>=n?null:t[e],i=()=>t[e++],a=f=>{const d=r();return d!==null&&d.type===f},o=f=>f.type===Mt.OPERATOR?Q7e.get(f.value)||-1:f.type===Mt.DOT||f.type===Mt.BRACKET_LEFT?9:f.type===Mt.QUESTION?1:-1,s=f=>{let d,h;if(i().type===Mt.DOT){if(!a(Mt.IDENTIFIER)){const g=r();throw new ti("Expected property name",e,g?g.value:"<end of input>")}const p=i();d={type:kr.Identifier,name:p.value},h=!1}else{if(d=u(0),!a(Mt.BRACKET_RIGHT)){const p=r();throw new ti("Expected closing bracket",e,p?p.value:"<end of input>")}i(),h=!0}return{type:kr.MemberExpression,object:f,property:d,computed:h}},l=()=>{const f=r();if(!f)throw new ti("Unexpected end of input",e,"<end of input>");if(f.type===Mt.OPERATOR&&(f.value==="!"||f.value==="-")){i();const d=l();return{type:kr.UnaryExpression,operator:f.value,argument:d,prefix:!0}}switch(f.type){case Mt.NUMBER:return i(),{type:kr.Literal,value:Number(f.value)};case Mt.STRING:return i(),{type:kr.Literal,value:f.value};case Mt.BOOLEAN:return i(),f.value==="true"?tze:nze;case Mt.NULL:return i(),eze;case Mt.IDENTIFIER:return i(),{type:kr.Identifier,name:f.value};case Mt.FUNCTION:return(()=>{const d=i(),h=[];if(!a(Mt.PAREN_LEFT)){const p=r();throw new ti("Expected opening parenthesis after function name",e,p?p.value:"<end of input>")}for(i();;){if(a(Mt.PAREN_RIGHT)){i();break}if(!r()){const g=r();throw new ti("Expected closing parenthesis",e,g?g.value:"<end of input>")}if(h.length>0){if(!a(Mt.COMMA)){const g=r();throw new ti("Expected comma between function arguments",e,g?g.value:"<end of input>")}i()}const p=u(0);h.push(p)}return{type:kr.CallExpression,callee:{type:kr.Identifier,name:d.value},arguments:h}})();case Mt.PAREN_LEFT:{i();const d=u(0);if(!a(Mt.PAREN_RIGHT)){const h=r();throw new ti("Expected closing parenthesis",e,h?h.value:"<end of input>")}return i(),d}default:throw new ti(`Unexpected token: ${f.type}`,e,f.value)}},u=(f=0)=>{let d=l();for(;e<n;){const h=t[e],p=o(h);if(p<=f)break;if(h.type!==Mt.QUESTION)if(h.type!==Mt.OPERATOR){if(h.type!==Mt.DOT&&h.type!==Mt.BRACKET_LEFT)break;d=s(d)}else{i();const g=u(p);d={type:kr.BinaryExpression,operator:h.value,left:d,right:g}}else{i();const g=u(0);if(!a(Mt.COLON)){const m=r();throw new ti("Expected : in conditional expression",e,m?m.value:"<end of input>")}i();const v=u(0);d={type:kr.ConditionalExpression,test:d,consequent:g,alternate:v}}}return d},c=u();return{type:kr.Program,body:c}},ize=(t,e,n)=>{let r=e;n&&(r={...e,context:{...e.context,...n}});const i=a=>{switch(a.type){case kr.Literal:return(o=>o.value)(a);case kr.Identifier:return(o=>{if(!(o.name in r.context))throw new ti(`Undefined variable: ${o.name}`);return r.context[o.name]})(a);case kr.MemberExpression:return(o=>{const s=i(o.object);if(s==null)throw new ti("Cannot access property of null or undefined");return s[o.computed?i(o.property):o.property.name]})(a);case kr.CallExpression:return(o=>{const s=r.functions[o.callee.name];if(!s)throw new ti(`Undefined function: ${o.callee.name}`);return s(...o.arguments.map(l=>i(l)))})(a);case kr.BinaryExpression:return(o=>{if(o.operator==="&&"){const u=i(o.left);return u&&i(o.right)}if(o.operator==="||")return i(o.left)||i(o.right);const s=i(o.left),l=i(o.right);switch(o.operator){case"+":return s+l;case"-":return s-l;case"*":return s*l;case"/":return s/l;case"%":return s%l;case"===":return s===l;case"!==":return s!==l;case">":return s>l;case">=":return s>=l;case"<":return s<l;case"<=":return s<=l;default:throw new ti(`Unknown operator: ${o.operator}`)}})(a);case kr.UnaryExpression:return(o=>{const s=i(o.argument);if(o.prefix)switch(o.operator){case"!":return!s;case"-":if(typeof s!="number")throw new ti(`Cannot apply unary - to non-number: ${s}`);return-s;default:throw new ti(`Unknown operator: ${o.operator}`)}throw new ti(`Postfix operators are not supported: ${o.operator}`)})(a);case kr.ConditionalExpression:return(o=>{const s=i(o.test);return i(s?o.consequent:o.alternate)})(a);default:throw new ti(`Evaluation error: Unsupported node type: ${a.type}`)}};return i(t.body)};function aze(t){const e=(i=>{const a=i,o=a.length,s=new Array(Math.ceil(o/3));let l=0,u=0;function c(v){const m=u+1;u++;let y="",b=!1;for(;u<o;){const x=a.charCodeAt(u);if(x===v)return b||(y=a.substring(m,u)),u++,{type:Mt.STRING,value:y};x===92?(b||(y=a.substring(m,u),b=!0),u++,y+=a[u]):b&&(y+=a[u]),u++}throw new ti(`Unterminated string starting with ${String.fromCharCode(v)}`,u,a.substring(Math.max(0,u-10),u))}function f(){const v=u;for(a.charCodeAt(u)===45&&u++;u<o&&Dg(a.charCodeAt(u));)u++;if(u<o&&a.charCodeAt(u)===46)for(u++;u<o&&Dg(a.charCodeAt(u));)u++;const m=a.slice(v,u);return{type:Mt.NUMBER,value:m}}function d(){u++;const v=u;if(u<o&&TP(a.charCodeAt(u)))for(u++;u<o&&nj(a.charCodeAt(u));)u++;const m=a.slice(v,u);return{type:Mt.FUNCTION,value:m}}function h(){const v=u++;for(;u<o&&nj(a.charCodeAt(u));)u++;const m=a.slice(v,u),y=Z7e.get(m);return y?{type:y,value:m}:{type:Mt.IDENTIFIER,value:m}}function p(){if(u+2<o){const m=a.substring(u,u+3);if($E.has(m))return u+=3,{type:Mt.OPERATOR,value:m}}if(u+1<o){const m=a.substring(u,u+2);if($E.has(m))return u+=2,{type:Mt.OPERATOR,value:m}}const v=a[u];if($E.has(v))return u++,{type:Mt.OPERATOR,value:v};throw new ti(`Unknown operator at position ${u}: ${a.substring(u,u+1)}`,u,a.substring(Math.max(0,u-10),u))}for(;u<o;){const v=a.charCodeAt(u);if(g=v,U7e.has(g)){u++;continue}const m=Pae.get(v);if(m)s[l++]=m,u++;else if(v!==34&&v!==39)if(Dg(v)||v===45&&u+1<o&&Dg(a.charCodeAt(u+1)))s[l++]=f();else if(v!==64)if(TP(v))s[l++]=h();else{if(!J7e(v))throw new ti(`Unexpected character: ${a[u]}`,u,a.substring(Math.max(0,u-10),u));s[l++]=p()}else s[l++]=d();else s[l++]=c(v)}var g;return l===s.length?s:s.slice(0,l)})(t),n=rze(e),r=((i={},a={})=>({context:i,functions:a}))({},Y7e);return(i={})=>ize(n,r,i)}const oze=["style","encode","labels","children"],sze=mre(t=>{const e=aze(t);return(...n)=>{const r=Array.from({length:n.length},(a,o)=>String.fromCharCode(97+o)),i=Object.fromEntries(n.map((a,o)=>[r[o],a]));return e(Object.assign(Object.assign({},i),{global:Object.assign({},i)}))}},t=>t,128);function R1(t,e=!0){if(Array.isArray(t))return t.map((n,r)=>R1(t[r],e));if(typeof t=="object"&&t)return KOe(t,(n,r)=>e&&oze.includes(r)?R1(n,r==="children"):e?n:R1(n,!1));if(typeof t=="string"){const n=t.trim();if(n.startsWith("{")&&n.endsWith("}"))return sze(n.slice(1,-1))}return t}const lze=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]];var uze={}.toString,tw=function(t,e){return uze.call(t)==="[object "+e+"]"};const Dae=function(t){return tw(t,"Function")},lR=function(t){return Array.isArray?Array.isArray(t):tw(t,"Array")},cze=function(t){var e=typeof t;return t!==null&&e==="object"||e==="function"};function fze(t,e){if(t){var n;if(lR(t))for(var r=0,i=t.length;r<i&&(n=e(t[r],r),n!==!1);r++);else if(cze(t)){for(var a in t)if(t.hasOwnProperty(a)&&(n=e(t[a],a),n===!1))break}}}var dze=function(t){return typeof t=="object"&&t!==null},rj=function(t){if(!dze(t)||!tw(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};const hze=function(t){return tw(t,"String")};var pze=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return fze(t,function(n,r){Dae(t)&&r==="prototype"||e.push(n)}),e};const gze=function(t,e){if(!Dae(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=e.apply(this,r),o=n.cache;if(o.has(a))return o.get(a);var s=t.apply(this,r);return o.set(a,s),s};return n.cache=new Map,n};var vze=5;function Iae(t,e,n,r){n=n||0,r=r||vze;for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];a!==null&&rj(a)?(rj(t[i])||(t[i]={}),n<r?Iae(t[i],a,n+1,r):t[i]=e[i]):lR(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var Lae=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)Iae(t,e[r]);return t};const uR=function(t){return t};var Fy;gze(function(t,e){e===void 0&&(e={});var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,a=e.fontStyle,o=e.fontVariant;return Fy||(Fy=document.createElement("canvas").getContext("2d")),Fy.font=[a,o,i,n+"px",r].join(" "),Fy.measureText(hze(t)?t:"").width},function(t,e){return e===void 0&&(e={}),qke([t],pze(e)).join("")});function Rae(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t?e.reduce(function(r,i){return function(a){return i(r(a))}},t):uR}function Nae(t){return t instanceof Float32Array||t instanceof Array}var Fae=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},zae=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))};function mze(t){return function(e){for(var n=[],r=0;r<e.length-1;r+=2){var i=[e[r],e[r+1]],a=t(i);n.push.apply(n,zae([],Fae(a),!1))}return n}}function yze(t){return function(e){for(var n=[],r=0;r<e.length-1;r+=3){var i=[e[r],e[r+1],e[r+2]],a=t(i);n.push.apply(n,zae([],Fae(a),!1))}return n}}function jae(t,e,n){for(;t<e;)t+=Math.PI*2;for(;t>n;)t-=Math.PI*2;return t}var bze=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},xze=function(t,e,n,r,i){var a=bze(t,2),o=a[0],s=a[1],l=mp();return ake(l,[o,s])},ij=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},wze=function(t,e,n,r,i){var a=new Gn({range:[e,e+r]}),o=new Gn({range:[n,n+i]});return{transform:function(s){var l=ij(s,2),u=l[0],c=l[1];return[a.map(u),o.map(c)]},untransform:function(s){var l=ij(s,2),u=l[0],c=l[1];return[a.invert(u),o.invert(c)]}}},_ze=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Sze=function(t,e,n,r,i){var a=_ze(t,1),o=a[0];return o(e,n,r,i)},Eze=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Oze=function(t,e,n,r,i){var a=Eze(t,1),o=a[0];return o},VE=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},kze=function(t,e,n,r,i){var a=VE(t,4),o=a[0],s=a[1],l=a[2],u=a[3],c=new Gn({range:[l,u]}),f=new Gn({range:[o,s]}),d=i/r,h=d>1?1:d,p=d>1?1/d:1;return{transform:function(g){var v=VE(g,2),m=v[0],y=v[1],b=f.map(m),x=c.map(y),w=x*Math.cos(b)*h,_=x*Math.sin(b)*p,E=w*.5+.5,S=_*.5+.5;return[E,S]},untransform:function(g){var v=VE(g,2),m=v[0],y=v[1],b=(m-.5)*2/h,x=(y-.5)*2/p,w=Math.sqrt(Math.pow(b,2)+Math.pow(x,2)),_=Math.atan2(x,b),E=jae(_,o,s),S=f.invert(E),O=c.invert(w);return[S,O]}}},aj=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Aze=function(t,e,n,r,i){return{transform:function(a){var o=aj(a,2),s=o[0],l=o[1];return[l,s]},untransform:function(a){var o=aj(a,2),s=o[0],l=o[1];return[l,s]}}},Tze=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},nw=function(t,e,n,r,i){var a=Tze(t,2),o=a[0],s=a[1],l=mp();return ske(l,[o,s])},cR=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},fR=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))},Mze=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return nw.apply(void 0,fR([[-1,-1]],cR(e),!1))},Cze=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return nw.apply(void 0,fR([[-1,1]],cR(e),!1))},Pze=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return nw.apply(void 0,fR([[1,-1]],cR(e),!1))},Dze=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Ize=function(t,e,n,r,i){var a=Dze(t,1),o=a[0],s=mp();return oke(s,o)},qE=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Lze=function(t,e,n,r,i){var a=qE(t,4),o=a[0],s=a[1],l=a[2],u=a[3],c=(s-0)/(2*Math.PI)+1,f=(u-l)/c,d=f/(Math.PI*2),h=new Gn({range:[l,l+f*.99]}),p=new Gn({range:[o,s]}),g=i/r,v=g>1?1:g,m=g>1?1/g:1;return{transform:function(y){var b=qE(y,2),x=b[0],w=b[1],_=p.map(x),E=h.map(w),S=Math.cos(_)*(d*_+E)*v,O=Math.sin(_)*(d*_+E)*m,A=S*.5+.5,T=O*.5+.5;return[A,T]},untransform:function(y){var b=qE(y,2),x=b[0],w=b[1],_=(x-.5)*2/v,E=(w-.5)*2/m,S=Math.sqrt(Math.pow(_,2)+Math.pow(E,2)),O=Math.atan2(E,_)+Math.floor(S/f)*Math.PI*2,A=jae(O,o,s),T=S-d*A,I=p.invert(A),D=h.invert(T);return[I,D]}}},Rze=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Nze=function(t,e,n,r,i){var a=Rze(t,4),o=a[0],s=a[1],l=a[2],u=a[3],c=new Gn({range:[l,u]});return{transform:function(f){for(var d=[],h=f.length,p=new zJ({domain:new Array(h).fill(0).map(function(b,x){return x}),range:[o,s]}),g=0;g<h;g++){var v=f[g],m=p.map(g),y=c.map(v);d.push(m,y)}return d},untransform:function(f){for(var d=[],h=0;h<f.length;h+=2){var p=f[h+1];d.push(c.invert(p))}return d}}},yh=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function Bae(t){return 1/Math.tan(t)}var Fze=function(t,e,n,r,i){var a=yh(t,1),o=a[0],s=Bae(o);return{transform:function(l){var u=yh(l,2),c=u[0],f=u[1],d=c+f*s;return[d,f]},untransform:function(l){var u=yh(l,2),c=u[0],f=u[1],d=c-f*s;return[d,f]}}},zze=function(t,e,n,r,i){var a=yh(t,1),o=a[0],s=Bae(o);return{transform:function(l){var u=yh(l,2),c=u[0],f=u[1],d=f+c*s;return[c,d]},untransform:function(l){var u=yh(l,2),c=u[0],f=u[1],d=f-c*s;return[c,d]}}},No=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function K0(t,e,n,r,i){var a=t<e,o=(a?e-r:i-e)||i-r,s=a?-1:1;return s*o*(n+1)/(n+o/((t-e)*s))+e}function J0(t,e,n,r,i){var a=t<e,o=(a?e-r:i-e)||i-r,s=a?-1:1;return o/(o*(n+1)/(t-e)-n*s)+e}function dx(t,e,n){if(!n)return t;var r=new Gn({range:[0,1],domain:[0,e]});return r.map(t)}var jze=function(t,e,n,r,i){var a=No(t,3),o=a[0],s=a[1],l=a[2],u=l===void 0?!1:l,c=dx(o,r,u);return{transform:function(f){var d=No(f,2),h=d[0],p=d[1],g=K0(h,c,s,0,1);return[g,p]},untransform:function(f){var d=No(f,2),h=d[0],p=d[1],g=J0(h,c,s,0,1);return[g,p]}}},Bze=function(t,e,n,r,i){var a=No(t,3),o=a[0],s=a[1],l=a[2],u=l===void 0?!1:l,c=dx(o,i,u);return{transform:function(f){var d=No(f,2),h=d[0],p=d[1],g=K0(p,c,s,0,1);return[h,g]},untransform:function(f){var d=No(f,2),h=d[0],p=d[1],g=J0(p,c,s,0,1);return[h,g]}}},$ze=function(t,e,n,r,i){var a=No(t,5),o=a[0],s=a[1],l=a[2],u=a[3],c=a[4],f=c===void 0?!1:c,d=dx(o,r,f),h=dx(s,i,f);return{transform:function(p){var g=No(p,2),v=g[0],m=g[1],y=K0(v,d,l,0,1),b=K0(m,h,u,0,1);return[y,b]},untransform:function(p){var g=No(p,2),v=g[0],m=g[1],y=J0(v,d,l,0,1),b=J0(m,h,u,0,1);return[y,b]}}},Vze=function(t,e,n,r,i){var a=No(t,5),o=a[0],s=a[1],l=a[2],u=a[3],c=a[4],f=c===void 0?!1:c,d=new Gn({range:[0,r]}),h=new Gn({range:[0,i]}),p=f?o:d.map(o),g=f?s:h.map(s);return{transform:function(v){var m=No(v,2),y=m[0],b=m[1],x=d.map(y)-p,w=h.map(b)-g,_=Math.sqrt(x*x+w*w);if(_>l)return[y,b];var E=K0(_,0,u,0,l),S=Math.atan2(w,x),O=p+E*Math.cos(S),A=g+E*Math.sin(S);return[d.invert(O),h.invert(A)]},untransform:function(v){var m=No(v,2),y=m[0],b=m[1],x=d.map(y)-p,w=h.map(b)-g,_=Math.sqrt(x*x+w*w);if(_>l)return[y,b];var E=J0(_,0,u,0,l),S=Math.atan2(w,x),O=p+E*Math.cos(S),A=g+E*Math.sin(S);return[d.invert(O),h.invert(A)]}}},oj=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},qze=function(t,e,n,r,i,a,o){var s=new Gn({range:[e,e+i]}),l=new Gn({range:[n,n+a]}),u=new Gn({range:[r,r+o]});return{transform:function(c){var f=oj(c,3),d=f[0],h=f[1],p=f[2];return[s.map(d),l.map(h),u.map(p)]},untransform:function(c){var f=oj(c,3),d=f[0],h=f[1],p=f[2];return[s.invert(d),l.invert(h),u.invert(p)]}}},Wze=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Gze=function(t,e,n,r,i,a,o){var s=Wze(t,3),l=s[0],u=s[1],c=s[2];return Bl(wn(),[l,u,c])},sj=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Hze=function(t,e,n,r,i,a,o){return{transform:function(s){var l=sj(s,3),u=l[0],c=l[1],f=l[2];return[c,u,f]},untransform:function(s){var l=sj(s,3),u=l[0],c=l[1],f=l[2];return[c,u,f]}}},Yze=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Uze=function(t,e,n,r,i,a,o){var s=Yze(t,3),l=s[0],u=s[1],c=s[2];return zu(wn(),[l,u,c])},zd=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},jd=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))},Xze=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zze=function(){function t(e){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:wze,translate:xze,custom:Sze,matrix:Oze,polar:kze,transpose:Aze,scale:nw,"shear.x":Fze,"shear.y":zze,reflect:Mze,"reflect.x":Cze,"reflect.y":Pze,rotate:Ize,helix:Lze,parallel:Nze,fisheye:$ze,"fisheye.x":jze,"fisheye.y":Bze,"fisheye.circular":Vze},this.update(e)}return t.prototype.update=function(e){this.options=Lae({},this.options,e),this.recoordinate()},t.prototype.clone=function(){return new t(this.options)},t.prototype.getOptions=function(){return this.options},t.prototype.clear=function(){this.update({transformations:[]})},t.prototype.getSize=function(){var e=this.options,n=e.width,r=e.height;return[n,r]},t.prototype.getCenter=function(){var e=this.options,n=e.x,r=e.y,i=e.width,a=e.height;return[(n*2+i)/2,(r*2+a)/2]},t.prototype.transform=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.options.transformations;return this.update({transformations:jd(jd([],zd(r),!1),[jd([],zd(e),!1)],!1)}),this},t.prototype.map=function(e){return this.output(e)},t.prototype.invert=function(e){return this.input(e)},t.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},t.prototype.compose=function(e){var n,r;e===void 0&&(e=!1);var i=e?jd([],zd(this.options.transformations),!1).reverse():this.options.transformations,a=e?function(E){return E.untransform}:function(E){return E.transform},o=[],s=[],l=function(E,S){return S===void 0&&(S=!0),s.push(S?mze(E):E)};try{for(var u=Xze(i),c=u.next();!c.done;c=u.next()){var f=zd(c.value),d=f[0],h=f.slice(1),p=this.transformers[d];if(p){var g=this.options,v=g.x,m=g.y,y=g.width,b=g.height,x=p(jd([],zd(h),!1),v,m,y,b);if(Nae(x))o.push(x);else{if(o.length){var w=this.createMatrixTransform(o,e);l(w),o.splice(0,o.length)}var _=a(x)||uR;l(_,d!=="parallel")}}}}catch(E){n={error:E}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}if(o.length){var _=this.createMatrixTransform(o,e);l(_)}return Rae.apply(void 0,jd([],zd(s),!1))},t.prototype.createMatrixTransform=function(e,n){var r=mp();return n&&e.reverse(),e.forEach(function(i){return lke(r,r,i)}),n&&rke(r,tke(r)),function(i){var a=[i[0],i[1],1];return sJ(a,a,r),[a[0],a[1]]}},t}(),Bd=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},$d=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))},Kze=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jze=function(){function t(e){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:qze,translate3D:Gze,scale3D:Uze,transpose3D:Hze},this.update(e)}return t.prototype.update=function(e){this.options=Lae({},this.options,e),this.recoordinate()},t.prototype.clone=function(){return new t(this.options)},t.prototype.getOptions=function(){return this.options},t.prototype.clear=function(){this.update({transformations:[]})},t.prototype.getSize=function(){var e=this.options,n=e.width,r=e.height,i=e.depth;return[n,r,i]},t.prototype.getCenter=function(){var e=this.options,n=e.x,r=e.y,i=e.z,a=e.width,o=e.height,s=e.depth;return[(n*2+a)/2,(r*2+o)/2,(i*2+s)/2]},t.prototype.transform=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.options.transformations;return this.update({transformations:$d($d([],Bd(r),!1),[$d([],Bd(e),!1)],!1)}),this},t.prototype.map=function(e){return this.output(e)},t.prototype.invert=function(e){return this.input(e)},t.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},t.prototype.compose=function(e){var n,r;e===void 0&&(e=!1);var i=e?$d([],Bd(this.options.transformations),!1).reverse():this.options.transformations,a=e?function(O){return O.untransform}:function(O){return O.transform},o=[],s=[],l=function(O,A){return A===void 0&&(A=!0),s.push(A?yze(O):O)};try{for(var u=Kze(i),c=u.next();!c.done;c=u.next()){var f=Bd(c.value),d=f[0],h=f.slice(1),p=this.transformers[d];if(p){var g=this.options,v=g.x,m=g.y,y=g.z,b=g.width,x=g.height,w=g.depth,_=p($d([],Bd(h),!1),v,m,y,b,x,w);if(Nae(_))o.push(_);else{if(o.length){var E=this.createMatrixTransform(o,e);l(E),o.splice(0,o.length)}var S=a(_)||uR;l(S,!0)}}}}catch(O){n={error:O}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}if(o.length){var S=this.createMatrixTransform(o,e);l(S)}return Rae.apply(void 0,$d([],Bd(s),!1))},t.prototype.createMatrixTransform=function(e,n){var r=wn();return n&&e.reverse(),e.forEach(function(i){return TI(r,r,i)}),n&&ms(r,kI(r)),function(i){var a=[i[0],i[1],i[2],1];return rl(a,a,r),[a[0],a[1],a[2]]}},t}(),Qze=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Kv(t){return(e,...n)=>me({},t(e,...n),e)}function hd(t){return(e,...n)=>me({},e,t(e,...n))}function eje(t){return t instanceof Date?!1:typeof t=="object"}function dR(t,e){if(!t)return e;if(Array.isArray(t))return t;if(eje(t)){const{value:n=e}=t,r=Qze(t,["value"]);return Object.assign(Object.assign({},r),{value:n})}return t}var tje=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const $ae=()=>t=>{const{children:e}=t;if(!Array.isArray(e))return[];const{x:n=0,y:r=0,width:i,height:a,data:o}=t;return e.map(s=>{var{data:l,x:u,y:c,width:f,height:d}=s,h=tje(s,["data","x","y","width","height"]);return Object.assign(Object.assign({},h),{data:dR(l,o),x:u??n,y:c??r,width:f??i,height:d??a})})};$ae.props={};var nje=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Vae=()=>t=>{const{children:e}=t;if(!Array.isArray(e))return[];const{direction:n="row",ratio:r=e.map(()=>1),padding:i=0,data:a}=t,[o,s,l,u]=n==="col"?["y","height","width","x"]:["x","width","height","y"],c=r.reduce((g,v)=>g+v),f=t[s]-i*(e.length-1),d=r.map(g=>f*(g/c)),h=[];let p=t[o]||0;for(let g=0;g<d.length;g+=1){const v=e[g],{data:m}=v,y=nje(v,["data"]),b=dR(m,a);h.push(Object.assign({[o]:p,[s]:d[g],[u]:t[u]||0,[l]:t[l],data:b},y)),p+=d[g]+i}return h};Vae.props={};var WE=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const qae=()=>t=>{const{children:e}=t,n=WE(t,["children"]);if(!Array.isArray(e))return[];const{data:r,scale:i={},axis:a={},legend:o={},encode:s={},transform:l=[]}=n,u=WE(n,["data","scale","axis","legend","encode","transform"]),c=e.map(f=>{var{data:d,scale:h={},axis:p={},legend:g={},encode:v={},transform:m=[]}=f,y=WE(f,["data","scale","axis","legend","encode","transform"]);return Object.assign({data:dR(d,r),scale:me({},i,h),encode:me({},s,v),transform:[...l,...m],axis:p&&a?me({},a,p):!1,legend:g&&o?me({},o,g):!1},y)});return[Object.assign(Object.assign({},u),{marks:c,type:"standardView"})]};qae.props={};var rje=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Wae=({static:t=!1}={})=>e=>{const{width:n,height:r,depth:i,paddingLeft:a,paddingRight:o,paddingTop:s,paddingBottom:l,padding:u,inset:c,insetLeft:f,insetTop:d,insetRight:h,insetBottom:p,margin:g,marginLeft:v,marginBottom:m,marginTop:y,marginRight:b,data:x,coordinate:w,theme:_,component:E,interaction:S,x:O,y:A,z:T,key:I,frame:D,labelTransform:R,parentKey:F,clip:z,viewStyle:N,title:L}=e,B=rje(e,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:O,y:A,z:T,key:I,width:n,height:r,depth:i,padding:u,paddingLeft:a,paddingRight:o,paddingTop:s,inset:c,insetLeft:f,insetTop:d,insetRight:h,insetBottom:p,paddingBottom:l,theme:_,coordinate:w,component:E,interaction:S,frame:D,labelTransform:R,margin:g,marginLeft:v,marginBottom:m,marginTop:y,marginRight:b,parentKey:F,clip:z,style:N},!t&&{title:L}),{marks:[Object.assign(Object.assign(Object.assign({},B),{key:`${I}-0`,data:x}),t&&{title:L})]})]};Wae.props={};class Jv{constructor(e){this.$value=e}static of(e){return new Jv(e)}call(e,...n){return this.$value=e(this.$value,...n),this}value(){return this.$value}}var ije=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const aje=Kv(t=>{const{encode:e,data:n,scale:r,shareSize:i=!1}=t,{x:a,y:o}=e,s=(l,u)=>{var c;if(l===void 0||!i)return{};const f=Bn(n,p=>p[l]),d=((c=r==null?void 0:r[u])===null||c===void 0?void 0:c.domain)||Array.from(f.keys()),h=d.map(p=>f.has(p)?f.get(p).length:1);return{domain:d,flex:h}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:a===void 0?null:{position:"top"}},a===void 0&&{paddingInner:0}),s(a,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:o===void 0?null:{position:"right"}},o===void 0&&{paddingInner:0}),s(o,"y"))}}}),hR=hd(t=>{const{data:e,scale:n,legend:r}=t,i=[t];let a,o,s;for(;i.length;){const d=i.shift(),{children:h,encode:p={},scale:g={},legend:v={}}=d,{color:m}=p,{color:y}=g,{color:b}=v;m!==void 0&&(a=m),y!==void 0&&(o=y),b!==void 0&&(s=b),Array.isArray(h)&&i.push(...h)}const l=()=>{var d;const h=(d=n==null?void 0:n.color)===null||d===void 0?void 0:d.domain;if(h!==void 0)return[h];if(a===void 0)return[void 0];const p=typeof a=="function"?a:v=>v[a],g=e.map(p);return g.some(v=>typeof v=="number")?[Kl(g)]:[Array.from(new Set(g)),"ordinal"]},u=typeof a=="string"?a:"",[c,f]=l();return Object.assign({encode:{color:{type:"column",value:c??[]}},scale:{color:me({},o,{domain:c,type:f})}},r===void 0&&{legend:{color:me({title:u},s)}})}),pR=Kv(()=>({animate:{enterType:"fadeIn"}})),gR=hd(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),vR=hd(()=>({type:"cell"})),Gae=hd(t=>{const{data:e}=t;return{data:{type:"inline",value:e,transform:[{type:"custom",callback:()=>{const{data:r,encode:i}=t,{x:a,y:o}=i,s=a?Array.from(new Set(r.map(c=>c[a]))):[],l=o?Array.from(new Set(r.map(c=>c[o]))):[];return(()=>{if(s.length&&l.length){const c=[];for(const f of s)for(const d of l)c.push({[a]:f,[o]:d});return c}if(s.length)return s.map(c=>({[a]:c}));if(l.length)return l.map(c=>({[o]:c}))})()}}]}}}),Hae=hd((t,e=oje,n=sje,r=lje,i={})=>{const{data:a,encode:o,children:s,scale:l,x:u=0,y:c=0,shareData:f=!1,key:d}=t,{value:h}=a,{x:p,y:g}=o,{color:v}=l,{domain:m}=v;return{children:(b,x,w)=>{const{x:_,y:E}=x,{paddingLeft:S,paddingTop:O,marginLeft:A,marginTop:T}=w,{domain:I}=_.getOptions(),{domain:D}=E.getOptions(),R=id(b),F=b.map(e),z=b.map(({x:W,y:U})=>[_.invert(W),E.invert(U)]),L=z.map(([W,U])=>Y=>{const{[p]:q,[g]:K}=Y;return(p!==void 0?q===W:!0)&&(g!==void 0?K===U:!0)}).map(W=>h.filter(W)),B=f?yn(L,W=>W.length):void 0,$=z.map(([W,U])=>({columnField:p,columnIndex:I.indexOf(W),columnValue:W,columnValuesLength:I.length,rowField:g,rowIndex:D.indexOf(U),rowValue:U,rowValuesLength:D.length})),G=$.map(W=>Array.isArray(s)?s:[s(W)].flat(1));return R.flatMap(W=>{const[U,Y,q,K]=F[W],J=$[W],Q=L[W];return G[W].map(de=>{var ye,_e,{scale:Ee,key:ue,facet:he=!0,axis:ke={},legend:Se={}}=de,Me=ije(de,["scale","key","facet","axis","legend"]);const Be=((ye=Ee==null?void 0:Ee.y)===null||ye===void 0?void 0:ye.guide)||ke.y,en=((_e=Ee==null?void 0:Ee.x)===null||_e===void 0?void 0:_e.guide)||ke.x,Ht={x:{tickCount:p?5:void 0},y:{tickCount:g?5:void 0}},wt=he?Q:Q.length===0?[]:h,At={color:{domain:m}},nn={x:lj(en,n)(J,wt),y:lj(Be,r)(J,wt)};return Object.assign(Object.assign({key:`${ue}-${W}`,data:wt,margin:0,x:U+S+u+A,y:Y+O+c+T,parentKey:d,width:q,height:K,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!wt.length,dataDomain:B,scale:me(Ht,Ee,At),axis:me({},ke,nn),legend:!1},Me),i)})})}}});function oje(t){const{points:e}=t;return YI(e)}function rw(t,e){return e.length?me({title:!1,tick:null,label:null},t):me({title:!1,tick:null,label:null,grid:null},t)}function sje(t){return(e,n)=>{const{rowIndex:r,rowValuesLength:i,columnIndex:a,columnValuesLength:o}=e;if(r!==i-1)return rw(t,n);const s=a!==o-1?!1:void 0,l=n.length?void 0:null;return me({title:s,grid:l},t)}}function lje(t){return(e,n)=>{const{rowIndex:r,columnIndex:i}=e;if(i!==0)return rw(t,n);const a=r!==0?!1:void 0,o=n.length?void 0:null;return me({title:a,grid:o},t)}}function lj(t,e){return typeof t=="function"?t:t===null||t===!1?()=>null:e(t)}const Yae=()=>t=>[Jv.of(t).call(vR).call(hR).call(pR).call(aje).call(gR).call(Gae).call(Hae).value()];Yae.props={};var MP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const uje=Kv(t=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),cje=hd(t=>{const{data:e,children:n,x:r=0,y:i=0,key:a}=t;return{children:(s,l,u)=>{const{x:c,y:f}=l,{paddingLeft:d,paddingTop:h,marginLeft:p,marginTop:g}=u,{domain:v}=c.getOptions(),{domain:m}=f.getOptions(),y=id(s),b=s.map(({points:E})=>YI(E)),x=s.map(({x:E,y:S})=>[c.invert(E),f.invert(S)]),w=x.map(([E,S])=>({columnField:E,columnIndex:v.indexOf(E),columnValue:E,columnValuesLength:v.length,rowField:S,rowIndex:m.indexOf(S),rowValue:S,rowValuesLength:m.length})),_=w.map(E=>Array.isArray(n)?n:[n(E)].flat(1));return y.flatMap(E=>{const[S,O,A,T]=b[E],[I,D]=x[E],R=w[E];return _[E].map(z=>{var N,L;const{scale:B,key:$,encode:G,axis:W,interaction:U}=z,Y=MP(z,["scale","key","encode","axis","interaction"]),q=(N=B==null?void 0:B.y)===null||N===void 0?void 0:N.guide,K=(L=B==null?void 0:B.x)===null||L===void 0?void 0:L.guide,J={x:{facet:!1},y:{facet:!1}},Q={x:dje(K)(R,e),y:hje(q)(R,e)},se={x:{tickCount:5},y:{tickCount:5}};return Object.assign({data:e,parentKey:a,key:`${$}-${E}`,x:S+d+r+p,y:O+h+i+g,width:A,height:T,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:me(J,B),axis:me(se,W,Q),legend:!1,encode:me({},G,{x:I,y:D}),interaction:me({},U,{legendFilter:!1})},Y)})})}}}),fje=hd(t=>{const{encode:e}=t,n=MP(t,["encode"]),{position:r=[],x:i=r,y:a=[...r].reverse()}=e,o=MP(e,["position","x","y"]),s=[];for(const l of[i].flat(1))for(const u of[a].flat(1))s.push({$x:l,$y:u});return Object.assign(Object.assign({},n),{data:s,encode:Object.assign(Object.assign({},o),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},[i].flat(1).length===1&&{x:{paddingInner:0}}),[a].flat(1).length===1&&{y:{paddingInner:0}})})});function dje(t){return typeof t=="function"?t:t===null?()=>null:(e,n)=>{const{rowIndex:r,rowValuesLength:i}=e;if(r!==i-1)return rw(t,n)}}function hje(t){return typeof t=="function"?t:t===null?()=>null:(e,n)=>{const{columnIndex:r}=e;if(r!==0)return rw(t,n)}}const pje=()=>t=>[Jv.of(t).call(vR).call(hR).call(cje).call(fje).call(pR).call(gR).call(uje).value()];var gje=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const vje=Kv(t=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),mje=Kv(t=>({coordinate:{type:"polar"}})),yje=t=>{const{encode:e}=t,n=gje(t,["encode"]),{position:r}=e;return Object.assign(Object.assign({},n),{encode:{x:r}})};function uj(t){return e=>null}function bje(t){const{points:e}=t,[n,r,i,a]=e,o=mr(n,a),s=Pr(n,a),l=Pr(r,i),u=NQ(s,l),c=1/Math.sin(u/2),f=o/(1+c),d=f*Math.sqrt(2),[h,p]=i,v=Yh(s)+u/2,m=f*c,y=h+m*Math.sin(v),b=p-m*Math.cos(v);return[y-d/2,b-d/2,d,d]}const xje=()=>t=>[Jv.of(t).call(vR).call(yje).call(hR).call(mje).call(Gae).call(Hae,bje,uj,uj,{frame:!1}).call(pR).call(gR).call(vje).value()];function wje(t,e,n){const i=n,a=[0,i],o=[-i+1,1];if(t==="normal")return a;if(t==="reverse")return o;if(t==="alternate")return e%2===0?a:o;if(t==="reverse-alternate")return e%2===0?o:a}function _je(t,e,n){const r=[t];for(;r.length;){const i=r.pop();i.animate=me({enter:{duration:e},update:{duration:e,easing:n,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:e}},i.animate||{});const{children:a}=i;Array.isArray(a)&&r.push(...a)}return t}const Uae=()=>t=>{const{children:e=[],duration:n=1e3,iterationCount:r=1,direction:i="normal",easing:a="ease-in-out-sine"}=t,o=e.length;if(!Array.isArray(e)||o===0)return[];const{key:s}=e[0],l=e.map(u=>Object.assign(Object.assign({},u),{key:s})).map(u=>_je(u,n,a));return function*(){let u=0,c;for(;r==="infinite"||u<r;){const[f,d]=wje(i,u,o);for(let h=f;h<d;h+=1){const p=Math.abs(h);c!==p&&(yield l[p]),c=p}u++}}};Uae.props={};var Sje=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Xae=()=>t=>{const{type:e,data:n,scale:r,encode:i,style:a,animate:o,key:s,state:l}=t,u=Sje(t,["type","data","scale","encode","style","animate","key","state"]);return[Object.assign(Object.assign({type:"geoView"},u),{children:[{type:"geoPath",key:`${s}-0`,data:{value:n},scale:r,encode:i,style:a,animate:o,state:l}]})]};Xae.props={};var xt=1e-6,Zae=1e-12,Yt=Math.PI,Br=Yt/2,cj=Yt/4,po=Yt*2,ra=180/Yt,Ar=Yt/180,dn=Math.abs,Ap=Math.atan,cu=Math.atan2,$t=Math.cos,zy=Math.ceil,Kae=Math.exp,hx=Math.log,GE=Math.pow,Lt=Math.sin,Do=Math.sign||function(t){return t>0?1:t<0?-1:0},qa=Math.sqrt,mR=Math.tan;function Jae(t){return t>1?0:t<-1?Yt:Math.acos(t)}function Vo(t){return t>1?Br:t<-1?-Br:Math.asin(t)}function Io(){}function px(t,e){t&&dj.hasOwnProperty(t.type)&&dj[t.type](t,e)}var fj={Feature:function(t,e){px(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)px(n[r].geometry,e)}},dj={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){CP(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)CP(n[r],e,0)},Polygon:function(t,e){hj(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)hj(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)px(n[r],e)}};function CP(t,e,n){var r=-1,i=t.length-n,a;for(e.lineStart();++r<i;)a=t[r],e.point(a[0],a[1],a[2]);e.lineEnd()}function hj(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)CP(t[n],e,1);e.polygonEnd()}function Qd(t,e){t&&fj.hasOwnProperty(t.type)?fj[t.type](t,e):px(t,e)}function PP(t){return[cu(t[1],t[0]),Vo(t[2])]}function ap(t){var e=t[0],n=t[1],r=$t(n);return[r*$t(e),r*Lt(e),Lt(n)]}function jy(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function gx(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function HE(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function By(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function DP(t){var e=qa(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function IP(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function LP(t,e){return dn(t)>Yt&&(t-=Math.round(t/po)*po),[t,e]}LP.invert=LP;function Qae(t,e,n){return(t%=po)?e||n?IP(gj(t),vj(e,n)):gj(t):e||n?vj(e,n):LP}function pj(t){return function(e,n){return e+=t,dn(e)>Yt&&(e-=Math.round(e/po)*po),[e,n]}}function gj(t){var e=pj(t);return e.invert=pj(-t),e}function vj(t,e){var n=$t(t),r=Lt(t),i=$t(e),a=Lt(e);function o(s,l){var u=$t(l),c=$t(s)*u,f=Lt(s)*u,d=Lt(l),h=d*n+c*r;return[cu(f*i-h*a,c*n-d*r),Vo(h*i+f*a)]}return o.invert=function(s,l){var u=$t(l),c=$t(s)*u,f=Lt(s)*u,d=Lt(l),h=d*i-f*a;return[cu(f*i+d*a,c*n+h*r),Vo(h*n-c*r)]},o}function Eje(t){t=Qae(t[0]*Ar,t[1]*Ar,t.length>2?t[2]*Ar:0);function e(n){return n=t(n[0]*Ar,n[1]*Ar),n[0]*=ra,n[1]*=ra,n}return e.invert=function(n){return n=t.invert(n[0]*Ar,n[1]*Ar),n[0]*=ra,n[1]*=ra,n},e}function Oje(t,e,n,r,i,a){if(n){var o=$t(e),s=Lt(e),l=r*n;i==null?(i=e+r*po,a=e-l/2):(i=mj(o,i),a=mj(o,a),(r>0?i<a:i>a)&&(i+=r*po));for(var u,c=i;r>0?c>a:c<a;c-=l)u=PP([o,-s*$t(c),-s*Lt(c)]),t.point(u[0],u[1])}}function mj(t,e){e=ap(e),e[0]-=t,DP(e);var n=Jae(-e[1]);return((-e[2]<0?-n:n)+po-xt)%po}function eoe(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:Io,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function N1(t,e){return dn(t[0]-e[0])<xt&&dn(t[1]-e[1])<xt}function $y(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function toe(t,e,n,r,i){var a=[],o=[],s,l;if(t.forEach(function(p){if(!((g=p.length-1)<=0)){var g,v=p[0],m=p[g],y;if(N1(v,m)){if(!v[2]&&!m[2]){for(i.lineStart(),s=0;s<g;++s)i.point((v=p[s])[0],v[1]);i.lineEnd();return}m[0]+=2*xt}a.push(y=new $y(v,p,null,!0)),o.push(y.o=new $y(v,null,y,!1)),a.push(y=new $y(m,p,null,!1)),o.push(y.o=new $y(m,null,y,!0))}}),!!a.length){for(o.sort(e),yj(a),yj(o),s=0,l=o.length;s<l;++s)o[s].e=n=!n;for(var u=a[0],c,f;;){for(var d=u,h=!0;d.v;)if((d=d.n)===u)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(s=0,l=c.length;s<l;++s)i.point((f=c[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,s=c.length-1;s>=0;--s)i.point((f=c[s])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function yj(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function YE(t){return dn(t[0])<=Yt?t[0]:Do(t[0])*((dn(t[0])+Yt)%po-Yt)}function kje(t,e){var n=YE(e),r=e[1],i=Lt(r),a=[Lt(n),-$t(n),0],o=0,s=0,l=new jf;i===1?r=Br+xt:i===-1&&(r=-Br-xt);for(var u=0,c=t.length;u<c;++u)if(d=(f=t[u]).length)for(var f,d,h=f[d-1],p=YE(h),g=h[1]/2+cj,v=Lt(g),m=$t(g),y=0;y<d;++y,p=x,v=_,m=E,h=b){var b=f[y],x=YE(b),w=b[1]/2+cj,_=Lt(w),E=$t(w),S=x-p,O=S>=0?1:-1,A=O*S,T=A>Yt,I=v*_;if(l.add(cu(I*O*Lt(A),m*E+I*$t(A))),o+=T?S+O*po:S,T^p>=n^x>=n){var D=gx(ap(h),ap(b));DP(D);var R=gx(a,D);DP(R);var F=(T^S>=0?-1:1)*Vo(R[2]);(r>F||r===F&&(D[0]||D[1]))&&(s+=T^S>=0?1:-1)}}return(o<-xt||o<xt&&l<-Zae)^s&1}function noe(t,e,n,r){return function(i){var a=e(i),o=eoe(),s=e(o),l=!1,u,c,f,d={point:h,lineStart:g,lineEnd:v,polygonStart:function(){d.point=m,d.lineStart=y,d.lineEnd=b,c=[],u=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=v,c=wJ(c);var x=kje(u,r);c.length?(l||(i.polygonStart(),l=!0),toe(c,Tje,x,n,i)):x&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(x,w){t(x,w)&&i.point(x,w)}function p(x,w){a.point(x,w)}function g(){d.point=p,a.lineStart()}function v(){d.point=h,a.lineEnd()}function m(x,w){f.push([x,w]),s.point(x,w)}function y(){s.lineStart(),f=[]}function b(){m(f[0][0],f[0][1]),s.lineEnd();var x=s.clean(),w=o.result(),_,E=w.length,S,O,A;if(f.pop(),u.push(f),f=null,!!E){if(x&1){if(O=w[0],(S=O.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),_=0;_<S;++_)i.point((A=O[_])[0],A[1]);i.lineEnd()}return}E>1&&x&2&&w.push(w.pop().concat(w.shift())),c.push(w.filter(Aje))}}return d}}function Aje(t){return t.length>1}function Tje(t,e){return((t=t.x)[0]<0?t[1]-Br-xt:Br-t[1])-((e=e.x)[0]<0?e[1]-Br-xt:Br-e[1])}const bj=noe(function(){return!0},Mje,Pje,[-Yt,-Br]);function Mje(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(a,o){var s=a>0?Yt:-Yt,l=dn(a-e);dn(l-Yt)<xt?(t.point(e,n=(n+o)/2>0?Br:-Br),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(a,n),i=0):r!==s&&l>=Yt&&(dn(e-r)<xt&&(e-=r*xt),dn(a-s)<xt&&(a-=s*xt),n=Cje(e,n,a,o),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),i=0),t.point(e=a,n=o),r=s},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function Cje(t,e,n,r){var i,a,o=Lt(t-n);return dn(o)>xt?Ap((Lt(e)*(a=$t(r))*Lt(n)-Lt(r)*(i=$t(e))*Lt(t))/(i*a*o)):(e+r)/2}function Pje(t,e,n,r){var i;if(t==null)i=n*Br,r.point(-Yt,i),r.point(0,i),r.point(Yt,i),r.point(Yt,0),r.point(Yt,-i),r.point(0,-i),r.point(-Yt,-i),r.point(-Yt,0),r.point(-Yt,i);else if(dn(t[0]-e[0])>xt){var a=t[0]<e[0]?Yt:-Yt;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}function Dje(t){var e=$t(t),n=2*Ar,r=e>0,i=dn(e)>xt;function a(c,f,d,h){Oje(h,t,n,d,c,f)}function o(c,f){return $t(c)*$t(f)>e}function s(c){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(v,m){var y=[v,m],b,x=o(v,m),w=r?x?0:u(v,m):x?u(v+(v<0?Yt:-Yt),m):0;if(!f&&(p=h=x)&&c.lineStart(),x!==h&&(b=l(f,y),(!b||N1(f,b)||N1(y,b))&&(y[2]=1)),x!==h)g=0,x?(c.lineStart(),b=l(y,f),c.point(b[0],b[1])):(b=l(f,y),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^x){var _;!(w&d)&&(_=l(y,f,!0))&&(g=0,r?(c.lineStart(),c.point(_[0][0],_[0][1]),c.point(_[1][0],_[1][1]),c.lineEnd()):(c.point(_[1][0],_[1][1]),c.lineEnd(),c.lineStart(),c.point(_[0][0],_[0][1],3)))}x&&(!f||!N1(f,y))&&c.point(y[0],y[1]),f=y,h=x,d=w},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function l(c,f,d){var h=ap(c),p=ap(f),g=[1,0,0],v=gx(h,p),m=jy(v,v),y=v[0],b=m-y*y;if(!b)return!d&&c;var x=e*m/b,w=-e*y/b,_=gx(g,v),E=By(g,x),S=By(v,w);HE(E,S);var O=_,A=jy(E,O),T=jy(O,O),I=A*A-T*(jy(E,E)-1);if(!(I<0)){var D=qa(I),R=By(O,(-A-D)/T);if(HE(R,E),R=PP(R),!d)return R;var F=c[0],z=f[0],N=c[1],L=f[1],B;z<F&&(B=F,F=z,z=B);var $=z-F,G=dn($-Yt)<xt,W=G||$<xt;if(!G&&L<N&&(B=N,N=L,L=B),W?G?N+L>0^R[1]<(dn(R[0]-F)<xt?N:L):N<=R[1]&&R[1]<=L:$>Yt^(F<=R[0]&&R[0]<=z)){var U=By(O,(-A+D)/T);return HE(U,E),[R,PP(U)]}}}function u(c,f){var d=r?t:Yt-t,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return noe(o,s,a,r?[0,-t]:[-Yt,t-Yt])}function Ije(t,e,n,r,i,a){var o=t[0],s=t[1],l=e[0],u=e[1],c=0,f=1,d=l-o,h=u-s,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-s,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=a-s,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(t[0]=o+c*d,t[1]=s+c*h),f<1&&(e[0]=o+f*d,e[1]=s+f*h),!0}}}}}var Ig=1e9,Vy=-Ig;function roe(t,e,n,r){function i(u,c){return t<=u&&u<=n&&e<=c&&c<=r}function a(u,c,f,d){var h=0,p=0;if(u==null||(h=o(u,f))!==(p=o(c,f))||l(u,c)<0^f>0)do d.point(h===0||h===3?t:n,h>1?r:e);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(u,c){return dn(u[0]-t)<xt?c>0?0:3:dn(u[0]-n)<xt?c>0?2:1:dn(u[1]-e)<xt?c>0?1:0:c>0?3:2}function s(u,c){return l(u.x,c.x)}function l(u,c){var f=o(u,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-u[1]:f===1?u[0]-c[0]:f===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,f=eoe(),d,h,p,g,v,m,y,b,x,w,_,E={point:S,lineStart:I,lineEnd:D,polygonStart:A,polygonEnd:T};function S(F,z){i(F,z)&&c.point(F,z)}function O(){for(var F=0,z=0,N=h.length;z<N;++z)for(var L=h[z],B=1,$=L.length,G=L[0],W,U,Y=G[0],q=G[1];B<$;++B)W=Y,U=q,G=L[B],Y=G[0],q=G[1],U<=r?q>r&&(Y-W)*(r-U)>(q-U)*(t-W)&&++F:q<=r&&(Y-W)*(r-U)<(q-U)*(t-W)&&--F;return F}function A(){c=f,d=[],h=[],_=!0}function T(){var F=O(),z=_&&F,N=(d=wJ(d)).length;(z||N)&&(u.polygonStart(),z&&(u.lineStart(),a(null,null,1,u),u.lineEnd()),N&&toe(d,s,F,a,u),u.polygonEnd()),c=u,d=h=p=null}function I(){E.point=R,h&&h.push(p=[]),w=!0,x=!1,y=b=NaN}function D(){d&&(R(g,v),m&&x&&f.rejoin(),d.push(f.result())),E.point=S,x&&c.lineEnd()}function R(F,z){var N=i(F,z);if(h&&p.push([F,z]),w)g=F,v=z,m=N,w=!1,N&&(c.lineStart(),c.point(F,z));else if(N&&x)c.point(F,z);else{var L=[y=Math.max(Vy,Math.min(Ig,y)),b=Math.max(Vy,Math.min(Ig,b))],B=[F=Math.max(Vy,Math.min(Ig,F)),z=Math.max(Vy,Math.min(Ig,z))];Ije(L,B,t,e,n,r)?(x||(c.lineStart(),c.point(L[0],L[1])),c.point(B[0],B[1]),N||c.lineEnd(),_=!1):N&&(c.lineStart(),c.point(F,z),_=!1)}y=F,b=z,x=N}return E}}function xj(t,e,n){var r=rh(t,e-xt,n).concat(e);return function(i){return r.map(function(a){return[i,a]})}}function wj(t,e,n){var r=rh(t,e-xt,n).concat(e);return function(i){return r.map(function(a){return[a,i]})}}function Lje(){var t,e,n,r,i,a,o,s,l=10,u=l,c=90,f=360,d,h,p,g,v=2.5;function m(){return{type:"MultiLineString",coordinates:y()}}function y(){return rh(zy(r/c)*c,n,c).map(p).concat(rh(zy(s/f)*f,o,f).map(g)).concat(rh(zy(e/l)*l,t,l).filter(function(b){return dn(b%c)>xt}).map(d)).concat(rh(zy(a/u)*u,i,u).filter(function(b){return dn(b%f)>xt}).map(h))}return m.lines=function(){return y().map(function(b){return{type:"LineString",coordinates:b}})},m.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(o).slice(1),p(n).reverse().slice(1),g(s).reverse().slice(1))]}},m.extent=function(b){return arguments.length?m.extentMajor(b).extentMinor(b):m.extentMinor()},m.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],s=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),s>o&&(b=s,s=o,o=b),m.precision(v)):[[r,s],[n,o]]},m.extentMinor=function(b){return arguments.length?(e=+b[0][0],t=+b[1][0],a=+b[0][1],i=+b[1][1],e>t&&(b=e,e=t,t=b),a>i&&(b=a,a=i,i=b),m.precision(v)):[[e,a],[t,i]]},m.step=function(b){return arguments.length?m.stepMajor(b).stepMinor(b):m.stepMinor()},m.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],m):[c,f]},m.stepMinor=function(b){return arguments.length?(l=+b[0],u=+b[1],m):[l,u]},m.precision=function(b){return arguments.length?(v=+b,d=xj(a,i,90),h=wj(e,t,v),p=xj(s,o,90),g=wj(r,n,v),m):v},m.extentMajor([[-180,-90+xt],[180,90-xt]]).extentMinor([[-180,-80-xt],[180,80+xt]])}function Rje(){return Lje()()}const Q0=t=>t;var UE=new jf,RP=new jf,ioe,aoe,NP,FP,ql={point:Io,lineStart:Io,lineEnd:Io,polygonStart:function(){ql.lineStart=Nje,ql.lineEnd=zje},polygonEnd:function(){ql.lineStart=ql.lineEnd=ql.point=Io,UE.add(dn(RP)),RP=new jf},result:function(){var t=UE/2;return UE=new jf,t}};function Nje(){ql.point=Fje}function Fje(t,e){ql.point=ooe,ioe=NP=t,aoe=FP=e}function ooe(t,e){RP.add(FP*t-NP*e),NP=t,FP=e}function zje(){ooe(ioe,aoe)}var op=1/0,vx=op,ev=-op,mx=ev,yx={point:jje,lineStart:Io,lineEnd:Io,polygonStart:Io,polygonEnd:Io,result:function(){var t=[[op,vx],[ev,mx]];return ev=mx=-(vx=op=1/0),t}};function jje(t,e){t<op&&(op=t),t>ev&&(ev=t),e<vx&&(vx=e),e>mx&&(mx=e)}var zP=0,jP=0,Lg=0,bx=0,xx=0,ah=0,BP=0,$P=0,Rg=0,soe,loe,Xs,Zs,To={point:Yf,lineStart:_j,lineEnd:Sj,polygonStart:function(){To.lineStart=Vje,To.lineEnd=qje},polygonEnd:function(){To.point=Yf,To.lineStart=_j,To.lineEnd=Sj},result:function(){var t=Rg?[BP/Rg,$P/Rg]:ah?[bx/ah,xx/ah]:Lg?[zP/Lg,jP/Lg]:[NaN,NaN];return zP=jP=Lg=bx=xx=ah=BP=$P=Rg=0,t}};function Yf(t,e){zP+=t,jP+=e,++Lg}function _j(){To.point=Bje}function Bje(t,e){To.point=$je,Yf(Xs=t,Zs=e)}function $je(t,e){var n=t-Xs,r=e-Zs,i=qa(n*n+r*r);bx+=i*(Xs+t)/2,xx+=i*(Zs+e)/2,ah+=i,Yf(Xs=t,Zs=e)}function Sj(){To.point=Yf}function Vje(){To.point=Wje}function qje(){uoe(soe,loe)}function Wje(t,e){To.point=uoe,Yf(soe=Xs=t,loe=Zs=e)}function uoe(t,e){var n=t-Xs,r=e-Zs,i=qa(n*n+r*r);bx+=i*(Xs+t)/2,xx+=i*(Zs+e)/2,ah+=i,i=Zs*t-Xs*e,BP+=i*(Xs+t),$P+=i*(Zs+e),Rg+=i*3,Yf(Xs=t,Zs=e)}function coe(t){this._context=t}coe.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,po);break}}},result:Io};var VP=new jf,XE,foe,doe,Ng,Fg,tv={point:Io,lineStart:function(){tv.point=Gje},lineEnd:function(){XE&&hoe(foe,doe),tv.point=Io},polygonStart:function(){XE=!0},polygonEnd:function(){XE=null},result:function(){var t=+VP;return VP=new jf,t}};function Gje(t,e){tv.point=hoe,foe=Ng=t,doe=Fg=e}function hoe(t,e){Ng-=t,Fg-=e,VP.add(qa(Ng*Ng+Fg*Fg)),Ng=t,Fg=e}let Ej,wx,Oj,kj;class Aj{constructor(e){this._append=e==null?poe:Hje(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==Oj||this._append!==wx){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Oj=r,wx=this._append,kj=this._,this._=i}this._+=kj;break}}}result(){const e=this._;return this._="",e.length?e:null}}function poe(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Hje(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return poe;if(e!==Ej){const n=10**e;Ej=e,wx=function(i){let a=1;this._+=i[0];for(const o=i.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return wx}function goe(t,e){let n=3,r=4.5,i,a;function o(s){return s&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),Qd(s,i(a))),a.result()}return o.area=function(s){return Qd(s,i(ql)),ql.result()},o.measure=function(s){return Qd(s,i(tv)),tv.result()},o.bounds=function(s){return Qd(s,i(yx)),yx.result()},o.centroid=function(s){return Qd(s,i(To)),To.result()},o.projection=function(s){return arguments.length?(i=s==null?(t=null,Q0):(t=s).stream,o):t},o.context=function(s){return arguments.length?(a=s==null?(e=null,new Aj(n)):new coe(e=s),typeof r!="function"&&a.pointRadius(r),o):e},o.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(a.pointRadius(+s),+s),o):r},o.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);n=l}return e===null&&(a=new Aj(n)),o},o.projection(t).digits(n).context(e)}function iw(t){return function(e){var n=new qP;for(var r in t)n[r]=t[r];return n.stream=e,n}}function qP(){}qP.prototype={constructor:qP,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function yR(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Qd(n,t.stream(yx)),e(yx.result()),r!=null&&t.clipExtent(r),t}function aw(t,e,n){return yR(t,function(r){var i=e[1][0]-e[0][0],a=e[1][1]-e[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),s=+e[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+e[0][1]+(a-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([s,l])},n)}function bR(t,e,n){return aw(t,[[0,0],e],n)}function xR(t,e,n){return yR(t,function(r){var i=+e,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,s=-a*r[0][1];t.scale(150*a).translate([o,s])},n)}function wR(t,e,n){return yR(t,function(r){var i=+e,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],s=(i-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([o,s])},n)}var Tj=16,Yje=$t(30*Ar);function Mj(t,e){return+e?Xje(t,e):Uje(t)}function Uje(t){return iw({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Xje(t,e){function n(r,i,a,o,s,l,u,c,f,d,h,p,g,v){var m=u-r,y=c-i,b=m*m+y*y;if(b>4*e&&g--){var x=o+d,w=s+h,_=l+p,E=qa(x*x+w*w+_*_),S=Vo(_/=E),O=dn(dn(_)-1)<xt||dn(a-f)<xt?(a+f)/2:cu(w,x),A=t(O,S),T=A[0],I=A[1],D=T-r,R=I-i,F=y*D-m*R;(F*F/b>e||dn((m*D+y*R)/b-.5)>.3||o*d+s*h+l*p<Yje)&&(n(r,i,a,o,s,l,T,I,O,x/=E,w/=E,_,g,v),v.point(T,I),n(T,I,O,x,w,_,u,c,f,d,h,p,g,v))}}return function(r){var i,a,o,s,l,u,c,f,d,h,p,g,v={point:m,lineStart:y,lineEnd:x,polygonStart:function(){r.polygonStart(),v.lineStart=w},polygonEnd:function(){r.polygonEnd(),v.lineStart=y}};function m(S,O){S=t(S,O),r.point(S[0],S[1])}function y(){f=NaN,v.point=b,r.lineStart()}function b(S,O){var A=ap([S,O]),T=t(S,O);n(f,d,c,h,p,g,f=T[0],d=T[1],c=S,h=A[0],p=A[1],g=A[2],Tj,r),r.point(f,d)}function x(){v.point=m,r.lineEnd()}function w(){y(),v.point=_,v.lineEnd=E}function _(S,O){b(i=S,O),a=f,o=d,s=h,l=p,u=g,v.point=b}function E(){n(f,d,c,h,p,g,a,o,i,s,l,u,Tj,r),v.lineEnd=x,x()}return v}}var Zje=iw({point:function(t,e){this.stream.point(t*Ar,e*Ar)}});function Kje(t){return iw({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function Jje(t,e,n,r,i){function a(o,s){return o*=r,s*=i,[e+t*o,n-t*s]}return a.invert=function(o,s){return[(o-e)/t*r,(n-s)/t*i]},a}function Cj(t,e,n,r,i,a){if(!a)return Jje(t,e,n,r,i);var o=$t(a),s=Lt(a),l=o*t,u=s*t,c=o/t,f=s/t,d=(s*n-o*e)/t,h=(s*e+o*n)/t;function p(g,v){return g*=r,v*=i,[l*g-u*v+e,n-u*g-l*v]}return p.invert=function(g,v){return[r*(c*g-f*v+d),i*(h-f*g-c*v)]},p}function Sl(t){return _R(function(){return t})()}function _R(t){var e,n=150,r=480,i=250,a=0,o=0,s=0,l=0,u=0,c,f=0,d=1,h=1,p=null,g=bj,v=null,m,y,b,x=Q0,w=.5,_,E,S,O,A;function T(F){return S(F[0]*Ar,F[1]*Ar)}function I(F){return F=S.invert(F[0],F[1]),F&&[F[0]*ra,F[1]*ra]}T.stream=function(F){return O&&A===F?O:O=Zje(Kje(c)(g(_(x(A=F)))))},T.preclip=function(F){return arguments.length?(g=F,p=void 0,R()):g},T.postclip=function(F){return arguments.length?(x=F,v=m=y=b=null,R()):x},T.clipAngle=function(F){return arguments.length?(g=+F?Dje(p=F*Ar):(p=null,bj),R()):p*ra},T.clipExtent=function(F){return arguments.length?(x=F==null?(v=m=y=b=null,Q0):roe(v=+F[0][0],m=+F[0][1],y=+F[1][0],b=+F[1][1]),R()):v==null?null:[[v,m],[y,b]]},T.scale=function(F){return arguments.length?(n=+F,D()):n},T.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],D()):[r,i]},T.center=function(F){return arguments.length?(a=F[0]%360*Ar,o=F[1]%360*Ar,D()):[a*ra,o*ra]},T.rotate=function(F){return arguments.length?(s=F[0]%360*Ar,l=F[1]%360*Ar,u=F.length>2?F[2]%360*Ar:0,D()):[s*ra,l*ra,u*ra]},T.angle=function(F){return arguments.length?(f=F%360*Ar,D()):f*ra},T.reflectX=function(F){return arguments.length?(d=F?-1:1,D()):d<0},T.reflectY=function(F){return arguments.length?(h=F?-1:1,D()):h<0},T.precision=function(F){return arguments.length?(_=Mj(E,w=F*F),R()):qa(w)},T.fitExtent=function(F,z){return aw(T,F,z)},T.fitSize=function(F,z){return bR(T,F,z)},T.fitWidth=function(F,z){return xR(T,F,z)},T.fitHeight=function(F,z){return wR(T,F,z)};function D(){var F=Cj(n,0,0,d,h,f).apply(null,e(a,o)),z=Cj(n,r-F[0],i-F[1],d,h,f);return c=Qae(s,l,u),E=IP(e,z),S=IP(c,E),_=Mj(E,w),R()}function R(){return O=A=null,T}return function(){return e=t.apply(this,arguments),T.invert=e.invert&&I,D()}}function SR(t){var e=0,n=Yt/3,r=_R(t),i=r(e,n);return i.parallels=function(a){return arguments.length?r(e=a[0]*Ar,n=a[1]*Ar):[e*ra,n*ra]},i}function Qje(t){var e=$t(t);function n(r,i){return[r*e,Lt(i)/e]}return n.invert=function(r,i){return[r/e,Vo(i*e)]},n}function voe(t,e){var n=Lt(t),r=(n+Lt(e))/2;if(dn(r)<xt)return Qje(t);var i=1+n*(2*r-n),a=qa(i)/r;function o(s,l){var u=qa(i-2*r*Lt(l))/r;return[u*Lt(s*=r),a-u*$t(s)]}return o.invert=function(s,l){var u=a-l,c=cu(s,dn(u))*Do(u);return u*r<0&&(c-=Yt*Do(s)*Do(u)),[c/r,Vo((i-(s*s+u*u)*r*r)/(2*r))]},o}function _x(){return SR(voe).scale(155.424).center([0,33.6442])}function moe(){return _x().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function eBe(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function tBe(){var t,e,n=moe(),r,i=_x().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=_x().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,u={point:function(d,h){l=[d,h]}};function c(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(a.point(h,p),l)||(s.point(h,p),l)}c.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,v=(d[1]-p[1])/h;return(v>=.12&&v<.234&&g>=-.425&&g<-.214?i:v>=.166&&v<.234&&g>=-.214&&g<-.115?o:n).invert(d)},c.stream=function(d){return t&&e===d?t:t=eBe([n.stream(e=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(u),a=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+xt,g+.12*h+xt],[p-.214*h-xt,g+.234*h-xt]]).stream(u),s=o.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+xt,g+.166*h+xt],[p-.115*h-xt,g+.234*h-xt]]).stream(u),f()},c.fitExtent=function(d,h){return aw(c,d,h)},c.fitSize=function(d,h){return bR(c,d,h)},c.fitWidth=function(d,h){return xR(c,d,h)},c.fitHeight=function(d,h){return wR(c,d,h)};function f(){return t=e=null,c}return c.scale(1070)}function yoe(t){return function(e,n){var r=$t(e),i=$t(n),a=t(r*i);return a===1/0?[2,0]:[a*i*Lt(e),a*Lt(n)]}}function Qv(t){return function(e,n){var r=qa(e*e+n*n),i=t(r),a=Lt(i),o=$t(i);return[cu(e*a,r*o),Vo(r&&n*a/r)]}}var ER=yoe(function(t){return qa(2/(1+t))});ER.invert=Qv(function(t){return 2*Vo(t/2)});function nBe(){return Sl(ER).scale(124.75).clipAngle(180-.001)}var OR=yoe(function(t){return(t=Jae(t))&&t/Lt(t)});OR.invert=Qv(function(t){return t});function rBe(){return Sl(OR).scale(79.4188).clipAngle(180-.001)}function em(t,e){return[t,hx(mR((Br+e)/2))]}em.invert=function(t,e){return[t,2*Ap(Kae(e))-Br]};function iBe(){return boe(em).scale(961/po)}function boe(t){var e=Sl(t),n=e.center,r=e.scale,i=e.translate,a=e.clipExtent,o=null,s,l,u;e.scale=function(f){return arguments.length?(r(f),c()):r()},e.translate=function(f){return arguments.length?(i(f),c()):i()},e.center=function(f){return arguments.length?(n(f),c()):n()},e.clipExtent=function(f){return arguments.length?(f==null?o=s=l=u=null:(o=+f[0][0],s=+f[0][1],l=+f[1][0],u=+f[1][1]),c()):o==null?null:[[o,s],[l,u]]};function c(){var f=Yt*r(),d=e(Eje(e.rotate()).invert([0,0]));return a(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:t===em?[[Math.max(d[0]-f,o),s],[Math.min(d[0]+f,l),u]]:[[o,Math.max(d[1]-f,s)],[l,Math.min(d[1]+f,u)]])}return c()}function qy(t){return mR((Br+t)/2)}function xoe(t,e){var n=$t(t),r=t===e?Lt(t):hx(n/$t(e))/hx(qy(e)/qy(t)),i=n*GE(qy(t),r)/r;if(!r)return em;function a(o,s){i>0?s<-Br+xt&&(s=-Br+xt):s>Br-xt&&(s=Br-xt);var l=i/GE(qy(s),r);return[l*Lt(r*o),i-l*$t(r*o)]}return a.invert=function(o,s){var l=i-s,u=Do(r)*qa(o*o+l*l),c=cu(o,dn(l))*Do(l);return l*r<0&&(c-=Yt*Do(o)*Do(l)),[c/r,2*Ap(GE(i/u,1/r))-Br]},a}function aBe(){return SR(xoe).scale(109.5).parallels([30,30])}function nv(t,e){return[t,e]}nv.invert=nv;function oBe(){return Sl(nv).scale(152.63)}function woe(t,e){var n=$t(t),r=t===e?Lt(t):(n-$t(e))/(e-t),i=n/r+t;if(dn(r)<xt)return nv;function a(o,s){var l=i-s,u=r*o;return[l*Lt(u),i-l*$t(u)]}return a.invert=function(o,s){var l=i-s,u=cu(o,dn(l))*Do(l);return l*r<0&&(u-=Yt*Do(o)*Do(l)),[u/r,i-Do(r)*qa(o*o+l*l)]},a}function sBe(){return SR(woe).scale(131.154).center([0,13.9389])}var Jg=1.340264,Qg=-.081106,e0=893e-6,t0=.003796,Sx=qa(3)/2,lBe=12;function kR(t,e){var n=Vo(Sx*Lt(e)),r=n*n,i=r*r*r;return[t*$t(n)/(Sx*(Jg+3*Qg*r+i*(7*e0+9*t0*r))),n*(Jg+Qg*r+i*(e0+t0*r))]}kR.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,a=0,o,s,l;a<lBe&&(s=n*(Jg+Qg*r+i*(e0+t0*r))-e,l=Jg+3*Qg*r+i*(7*e0+9*t0*r),n-=o=s/l,r=n*n,i=r*r*r,!(dn(o)<Zae));++a);return[Sx*t*(Jg+3*Qg*r+i*(7*e0+9*t0*r))/$t(n),Vo(Lt(n)/Sx)]};function uBe(){return Sl(kR).scale(177.158)}function AR(t,e){var n=$t(e),r=$t(t)*n;return[n*Lt(t)/r,Lt(e)/r]}AR.invert=Qv(Ap);function cBe(){return Sl(AR).scale(144.049).clipAngle(60)}function fBe(){var t=1,e=0,n=0,r=1,i=1,a=0,o,s,l=null,u,c,f,d=1,h=1,p=iw({point:function(x,w){var _=b([x,w]);this.stream.point(_[0],_[1])}}),g=Q0,v,m;function y(){return d=t*r,h=t*i,v=m=null,b}function b(x){var w=x[0]*d,_=x[1]*h;if(a){var E=_*o-w*s;w=w*o+_*s,_=E}return[w+e,_+n]}return b.invert=function(x){var w=x[0]-e,_=x[1]-n;if(a){var E=_*o+w*s;w=w*o-_*s,_=E}return[w/d,_/h]},b.stream=function(x){return v&&m===x?v:v=p(g(m=x))},b.postclip=function(x){return arguments.length?(g=x,l=u=c=f=null,y()):g},b.clipExtent=function(x){return arguments.length?(g=x==null?(l=u=c=f=null,Q0):roe(l=+x[0][0],u=+x[0][1],c=+x[1][0],f=+x[1][1]),y()):l==null?null:[[l,u],[c,f]]},b.scale=function(x){return arguments.length?(t=+x,y()):t},b.translate=function(x){return arguments.length?(e=+x[0],n=+x[1],y()):[e,n]},b.angle=function(x){return arguments.length?(a=x%360*Ar,s=Lt(a),o=$t(a),y()):a*ra},b.reflectX=function(x){return arguments.length?(r=x?-1:1,y()):r<0},b.reflectY=function(x){return arguments.length?(i=x?-1:1,y()):i<0},b.fitExtent=function(x,w){return aw(b,x,w)},b.fitSize=function(x,w){return bR(b,x,w)},b.fitWidth=function(x,w){return xR(b,x,w)},b.fitHeight=function(x,w){return wR(b,x,w)},b}function TR(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}TR.invert=function(t,e){var n=e,r=25,i;do{var a=n*n,o=a*a;n-=i=(n*(1.007226+a*(.015085+o*(-.044475+.028874*a-.005916*o)))-e)/(1.007226+a*(.015085*3+o*(-.044475*7+.028874*9*a-.005916*11*o)))}while(dn(i)>xt&&--r>0);return[t/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function dBe(){return Sl(TR).scale(175.295)}function MR(t,e){return[$t(e)*Lt(t),Lt(e)]}MR.invert=Qv(Vo);function hBe(){return Sl(MR).scale(249.5).clipAngle(90+xt)}function CR(t,e){var n=$t(e),r=1+$t(t)*n;return[n*Lt(t)/r,Lt(e)/r]}CR.invert=Qv(function(t){return 2*Ap(t)});function pBe(){return Sl(CR).scale(250).clipAngle(142)}function PR(t,e){return[hx(mR((Br+e)/2)),-t]}PR.invert=function(t,e){return[-e,2*Ap(Kae(t))-Br]};function gBe(){var t=boe(PR),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}const vBe=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:moe,geoAlbersUsa:tBe,geoAzimuthalEqualArea:nBe,geoAzimuthalEqualAreaRaw:ER,geoAzimuthalEquidistant:rBe,geoAzimuthalEquidistantRaw:OR,geoConicConformal:aBe,geoConicConformalRaw:xoe,geoConicEqualArea:_x,geoConicEqualAreaRaw:voe,geoConicEquidistant:sBe,geoConicEquidistantRaw:woe,geoEqualEarth:uBe,geoEqualEarthRaw:kR,geoEquirectangular:oBe,geoEquirectangularRaw:nv,geoGnomonic:cBe,geoGnomonicRaw:AR,geoIdentity:fBe,geoMercator:iBe,geoMercatorRaw:em,geoNaturalEarth1:dBe,geoNaturalEarth1Raw:TR,geoOrthographic:hBe,geoOrthographicRaw:MR,geoProjection:Sl,geoProjectionMutator:_R,geoStereographic:pBe,geoStereographicRaw:CR,geoTransverseMercator:gBe,geoTransverseMercatorRaw:PR},Symbol.toStringTag,{value:"Module"}));var mBe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function yBe(t){if(typeof t=="function")return t;const e=`geo${Bo(t)}`,n=vBe[e];if(!n)throw new Error(`Unknown coordinate: ${t}`);return n}function bBe(t){return{type:"FeatureCollection",features:t.flatMap(e=>xBe(e).features)}}function xBe(t){const e={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"};if(!t||!t.type)return null;const n=e[t.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if(n==="feature")return{type:"FeatureCollection",features:[t]};if(n==="featureCollection")return t}function wBe(t,e){var n;for(const[r,i]of Object.entries(e))(n=t[r])===null||n===void 0||n.call(t,i)}function _Be(t,e,n,r){const i=()=>{const s=e.filter(_oe);return s.find(u=>u.sphere)?{type:"Sphere"}:bBe(s.filter(u=>!u.sphere).flatMap(u=>u.data.value))},{outline:a=i()}=r,{size:o="fitExtent"}=r;if(o==="fitExtent")return SBe(t,a,n);if(o==="fitWidth")return EBe(t,a,n)}function SBe(t,e,n){const{x:r,y:i,width:a,height:o}=n;t.fitExtent([[r,i],[a,o]],e)}function EBe(t,e,n){const{width:r,height:i}=n,[[a,o],[s,l]]=goe(t.fitWidth(r,e)).bounds(e),u=Math.ceil(l-o),c=Math.min(Math.ceil(s-a),u),f=t.scale()*(c-1)/c,[d,h]=t.translate(),p=h+(i-u)/2;t.scale(f).translate([d,p]).precision(.2)}function OBe(t){const{data:e}=t;if(Array.isArray(e))return Object.assign(Object.assign({},t),{data:{value:e}});const{type:n}=e;return n==="graticule10"?Object.assign(Object.assign({},t),{data:{value:[Rje()]}}):n==="sphere"?Object.assign(Object.assign({},t),{sphere:!0,data:{value:[{type:"Sphere"}]}}):t}function _oe(t){return t.type==="geoPath"}const Soe=()=>t=>{const{children:e,coordinate:n={}}=t;if(!Array.isArray(e))return[];const{type:r="equalEarth"}=n,i=mBe(n,["type"]),a=yBe(r),o=e.map(OBe);let s;function l(){return[["custom",(f,d,h,p)=>{const g=a();_Be(g,o,{x:f,y:d,width:h,height:p},i),wBe(g,i),s=goe(g);const m=new Gn({domain:[f,f+h]}),y=new Gn({domain:[d,d+p]}),b=w=>{const _=g(w);if(!_)return[null,null];const[E,S]=_;return[m.map(E),y.map(S)]},x=w=>{if(!w)return null;const[_,E]=w,S=[m.invert(_),y.invert(E)];return g.invert(S)};return{transform:w=>b(w),untransform:w=>x(w)}}]]}function u(f){const{style:d,tooltip:h={}}=f;return Object.assign(Object.assign({},f),{type:"path",tooltip:nx(h,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},d),{d:p=>s(p)||[]})})}const c=f=>_oe(f)?u(f):f;return[Object.assign(Object.assign({},t),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:l},children:o.flatMap(c)})]};Soe.props={};function kBe(t){return rm(t,e=>e.className==="component")}function ABe(t){return rm(t,e=>e.className==="element")}function TBe(t){return rm(t,e=>e.className==="label")}function Si(t,e,n,r=i=>!0){return i=>{if(!r(i))return;n.emit(`plot:${t}`,i);const{target:a}=i;if(!a)return;const{className:o}=a;if(o==="plot")return;const s=ABe(a),l=kBe(a),u=TBe(a),c=s||l||u;if(!c)return;const{className:f,markType:d}=c,h=Object.assign(Object.assign({},i),{nativeEvent:!0});f==="element"?(h.data={data:QJ(c,e)},n.emit(`element:${t}`,h),n.emit(`${d}:${t}`,h)):f==="label"?(h.data={data:c.attributes.datum},n.emit(`label:${t}`,h),n.emit(`${o}:${t}`,h)):(n.emit(`component:${t}`,h),n.emit(`${o}:${t}`,h))}}function Eoe(){return(t,e,n)=>{const{container:r,view:i}=t,a=Si(xn.CLICK,i,n,E=>E.detail===1),o=Si(xn.DBLCLICK,i,n,E=>E.detail===2),s=Si(xn.POINTER_TAP,i,n),l=Si(xn.POINTER_DOWN,i,n),u=Si(xn.POINTER_UP,i,n),c=Si(xn.POINTER_OVER,i,n),f=Si(xn.POINTER_OUT,i,n),d=Si(xn.POINTER_MOVE,i,n),h=Si(xn.POINTER_ENTER,i,n),p=Si(xn.POINTER_LEAVE,i,n),g=Si(xn.POINTER_UPOUTSIDE,i,n),v=Si(xn.DRAG_START,i,n),m=Si(xn.DRAG,i,n),y=Si(xn.DRAG_END,i,n),b=Si(xn.DRAG_ENTER,i,n),x=Si(xn.DRAG_LEAVE,i,n),w=Si(xn.DRAG_OVER,i,n),_=Si(xn.DROP,i,n);return r.addEventListener("click",a),r.addEventListener("click",o),r.addEventListener("pointertap",s),r.addEventListener("pointerdown",l),r.addEventListener("pointerup",u),r.addEventListener("pointerover",c),r.addEventListener("pointerout",f),r.addEventListener("pointermove",d),r.addEventListener("pointerenter",h),r.addEventListener("pointerleave",p),r.addEventListener("pointerupoutside",g),r.addEventListener("dragstart",v),r.addEventListener("drag",m),r.addEventListener("dragend",y),r.addEventListener("dragenter",b),r.addEventListener("dragleave",x),r.addEventListener("dragover",w),r.addEventListener("drop",_),()=>{r.removeEventListener("click",a),r.removeEventListener("click",o),r.removeEventListener("pointertap",s),r.removeEventListener("pointerdown",l),r.removeEventListener("pointerup",u),r.removeEventListener("pointerover",c),r.removeEventListener("pointerout",f),r.removeEventListener("pointermove",d),r.removeEventListener("pointerenter",h),r.removeEventListener("pointerleave",p),r.removeEventListener("pointerupoutside",g),r.removeEventListener("dragstart",v),r.removeEventListener("drag",m),r.removeEventListener("dragend",y),r.removeEventListener("dragenter",b),r.removeEventListener("dragleave",x),r.removeEventListener("dragover",w),r.removeEventListener("drop",_)}}}Eoe.props={reapplyWhenUpdate:!0};function MBe(){return{"component.axisRadar":iae,"component.axisLinear":Nc,"component.axisArc":tae,"component.legendContinuousBlock":aae,"component.legendContinuousBlockSize":oae,"component.legendContinuousSize":nR,"interaction.event":Eoe,"composition.mark":Wae,"composition.view":qae,"shape.label.label":dre}}var CBe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function er(t,e){const n=Object.assign(Object.assign({},MBe()),e),r=a=>{if(typeof a!="string")return a;const o=`${t}.${a}`;return n[o]||Gh(`Unknown Component: ${o}`)};return[(a,o)=>{const{type:s}=a,l=CBe(a,["type"]);s||Gh("Plot type is required!");const u=r(s);return u==null?void 0:u(l,o)},r]}function Ooe(t){const{canvas:e,group:n}=t;return(e==null?void 0:e.document)||(n==null?void 0:n.ownerDocument)||Gh("Cannot find library document")}var Pj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function PBe(t,e,n){const[r]=er("coordinate",n),{innerHeight:i,innerWidth:a,insetLeft:o,insetTop:s,insetRight:l,insetBottom:u}=t,{coordinates:c=[]}=e,f=NBe(c),d=f[0].type==="cartesian3D",h=Object.assign(Object.assign({},t),{x:o,y:s,width:a-o-l,height:i-u-s,transformations:f.flatMap(r)});return d?new Jze(h):new Zze(h)}function koe(t,e){const{coordinate:n={},coordinates:r}=t,i=Pj(t,["coordinate","coordinates"]);if(r)return t;const{type:a,transform:o=[]}=n,s=Pj(n,["type","transform"]);if(!a)return Object.assign(Object.assign({},i),{coordinates:o});const[,l]=er("coordinate",e),{transform:u=!1}=l(a).props||{};if(u)throw new Error(`Unknown coordinate: ${a}.`);return Object.assign(Object.assign({},i),{coordinates:[Object.assign({type:a},s),...o]})}function Os(t,e){return t.filter(n=>n.type===e)}function hf(t){return Os(t,"polar").length>0}function DBe(t){return Os(t,"helix").length>0}function bh(t){return Os(t,"transpose").length%2===1}function IBe(t){return Os(t,"parallel").length>0}function Aoe(t){return Os(t,"theta").length>0}function LBe(t){return Os(t,"reflect").length>0}function n0(t){return Os(t,"radial").length>0}function Toe(t){return Os(t,"radar").length>0}function RBe(t){return Os(t,"reflectY").length>0}function NBe(t){return t.find(e=>e.type==="cartesian"||e.type==="cartesian3D")?t:[...t,{type:"cartesian"}]}function jt(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const FBe=jt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),zBe=jt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),jBe=jt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),BBe=jt("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),$Be=jt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),VBe=jt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),qBe=jt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),WBe=jt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),GBe=jt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),HBe=jt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),YBe=jt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function ow(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function DR(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Tp(){}var Uf=.7,sp=1/Uf,xh="\\s*([+-]?\\d+)\\s*",rv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",UBe=/^#([0-9a-f]{3,8})$/,XBe=new RegExp(`^rgb\\(${xh},${xh},${xh}\\)$`),ZBe=new RegExp(`^rgb\\(${dl},${dl},${dl}\\)$`),KBe=new RegExp(`^rgba\\(${xh},${xh},${xh},${rv}\\)$`),JBe=new RegExp(`^rgba\\(${dl},${dl},${dl},${rv}\\)$`),QBe=new RegExp(`^hsl\\(${rv},${dl},${dl}\\)$`),e$e=new RegExp(`^hsla\\(${rv},${dl},${dl},${rv}\\)$`),Dj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ow(Tp,IR,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ij,formatHex:Ij,formatHex8:t$e,formatHsl:n$e,formatRgb:Lj,toString:Lj});function Ij(){return this.rgb().formatHex()}function t$e(){return this.rgb().formatHex8()}function n$e(){return Coe(this).formatHsl()}function Lj(){return this.rgb().formatRgb()}function IR(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=UBe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Rj(e):n===3?new sa(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Wy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Wy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=XBe.exec(t))?new sa(e[1],e[2],e[3],1):(e=ZBe.exec(t))?new sa(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=KBe.exec(t))?Wy(e[1],e[2],e[3],e[4]):(e=JBe.exec(t))?Wy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=QBe.exec(t))?zj(e[1],e[2]/100,e[3]/100,1):(e=e$e.exec(t))?zj(e[1],e[2]/100,e[3]/100,e[4]):Dj.hasOwnProperty(t)?Rj(Dj[t]):t==="transparent"?new sa(NaN,NaN,NaN,0):null}function Rj(t){return new sa(t>>16&255,t>>8&255,t&255,1)}function Wy(t,e,n,r){return r<=0&&(t=e=n=NaN),new sa(t,e,n,r)}function Moe(t){return t instanceof Tp||(t=IR(t)),t?(t=t.rgb(),new sa(t.r,t.g,t.b,t.opacity)):new sa}function iv(t,e,n,r){return arguments.length===1?Moe(t):new sa(t,e,n,r??1)}function sa(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ow(sa,iv,DR(Tp,{brighter(t){return t=t==null?sp:Math.pow(sp,t),new sa(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Uf:Math.pow(Uf,t),new sa(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new sa(kf(this.r),kf(this.g),kf(this.b),Ex(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Nj,formatHex:Nj,formatHex8:r$e,formatRgb:Fj,toString:Fj}));function Nj(){return`#${pf(this.r)}${pf(this.g)}${pf(this.b)}`}function r$e(){return`#${pf(this.r)}${pf(this.g)}${pf(this.b)}${pf((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fj(){const t=Ex(this.opacity);return`${t===1?"rgb(":"rgba("}${kf(this.r)}, ${kf(this.g)}, ${kf(this.b)}${t===1?")":`, ${t})`}`}function Ex(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function kf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function pf(t){return t=kf(t),(t<16?"0":"")+t.toString(16)}function zj(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ps(t,e,n,r)}function Coe(t){if(t instanceof ps)return new ps(t.h,t.s,t.l,t.opacity);if(t instanceof Tp||(t=IR(t)),!t)return new ps;if(t instanceof ps)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new ps(o,s,l,t.opacity)}function i$e(t,e,n,r){return arguments.length===1?Coe(t):new ps(t,e,n,r??1)}function ps(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ow(ps,i$e,DR(Tp,{brighter(t){return t=t==null?sp:Math.pow(sp,t),new ps(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Uf:Math.pow(Uf,t),new ps(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new sa(ZE(t>=240?t-240:t+120,i,r),ZE(t,i,r),ZE(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ps(jj(this.h),Gy(this.s),Gy(this.l),Ex(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ex(this.opacity);return`${t===1?"hsl(":"hsla("}${jj(this.h)}, ${Gy(this.s)*100}%, ${Gy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function jj(t){return t=(t||0)%360,t<0?t+360:t}function Gy(t){return Math.max(0,Math.min(1,t||0))}function ZE(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const a$e=Math.PI/180,o$e=180/Math.PI;var Poe=-.14861,LR=1.78277,RR=-.29227,sw=-.90649,av=1.97294,Bj=av*sw,$j=av*LR,Vj=LR*RR-sw*Poe;function s$e(t){if(t instanceof Af)return new Af(t.h,t.s,t.l,t.opacity);t instanceof sa||(t=Moe(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Vj*r+Bj*e-$j*n)/(Vj+Bj-$j),a=r-i,o=(av*(n-i)-RR*a)/sw,s=Math.sqrt(o*o+a*a)/(av*i*(1-i)),l=s?Math.atan2(o,a)*o$e-120:NaN;return new Af(l<0?l+360:l,s,i,t.opacity)}function yl(t,e,n,r){return arguments.length===1?s$e(t):new Af(t,e,n,r??1)}function Af(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ow(Af,yl,DR(Tp,{brighter(t){return t=t==null?sp:Math.pow(sp,t),new Af(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Uf:Math.pow(Uf,t),new Af(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*a$e,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new sa(255*(e+n*(Poe*r+LR*i)),255*(e+n*(RR*r+sw*i)),255*(e+n*(av*r)),this.opacity)}}));function l$e(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function u$e(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return l$e((n-r/e)*e,o,i,a,s)}}const NR=t=>()=>t;function Doe(t,e){return function(n){return t+n*e}}function c$e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function f$e(t,e){var n=e-t;return n?Doe(t,n>180||n<-180?n-360*Math.round(n/360):n):NR(isNaN(t)?e:t)}function d$e(t){return(t=+t)==1?wh:function(e,n){return n-e?c$e(e,n,t):NR(isNaN(e)?n:e)}}function wh(t,e){var n=e-t;return n?Doe(t,n):NR(isNaN(t)?e:t)}(function t(e){var n=d$e(e);function r(i,a){var o=n((i=iv(i)).r,(a=iv(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=wh(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r})(1);function h$e(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),o,s;for(o=0;o<n;++o)s=iv(e[o]),r[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return r=t(r),i=t(i),a=t(a),s.opacity=1,function(l){return s.r=r(l),s.g=i(l),s.b=a(l),s+""}}}var p$e=h$e(u$e);function Ioe(t){return function e(n){n=+n;function r(i,a){var o=t((i=yl(i)).h,(a=yl(a)).h),s=wh(i.s,a.s),l=wh(i.l,a.l),u=wh(i.opacity,a.opacity);return function(c){return i.h=o(c),i.s=s(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=e,r}(1)}Ioe(f$e);var FR=Ioe(wh);const Xn=t=>p$e(t[t.length-1]);var Loe=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(jt);const g$e=Xn(Loe);var Roe=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(jt);const v$e=Xn(Roe);var Noe=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(jt);const m$e=Xn(Noe);var Foe=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(jt);const y$e=Xn(Foe);var zoe=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(jt);const b$e=Xn(zoe);var joe=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(jt);const x$e=Xn(joe);var Boe=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(jt);const w$e=Xn(Boe);var $oe=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(jt);const _$e=Xn($oe);var Voe=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(jt);const S$e=Xn(Voe);var qoe=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(jt);const E$e=Xn(qoe);var Woe=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(jt);const O$e=Xn(Woe);var Goe=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(jt);const k$e=Xn(Goe);var Hoe=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(jt);const A$e=Xn(Hoe);var Yoe=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(jt);const T$e=Xn(Yoe);var Uoe=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(jt);const M$e=Xn(Uoe);var Xoe=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(jt);const C$e=Xn(Xoe);var Zoe=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(jt);const P$e=Xn(Zoe);var Koe=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(jt);const D$e=Xn(Koe);var Joe=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(jt);const I$e=Xn(Joe);var Qoe=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(jt);const L$e=Xn(Qoe);var ese=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(jt);const R$e=Xn(ese);var tse=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(jt);const N$e=Xn(tse);var nse=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(jt);const F$e=Xn(nse);var rse=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(jt);const z$e=Xn(rse);var ise=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(jt);const j$e=Xn(ise);var ase=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(jt);const B$e=Xn(ase);var ose=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(jt);const $$e=Xn(ose);function V$e(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const q$e=FR(yl(300,.5,0),yl(-240,.5,1));var W$e=FR(yl(-100,.75,.35),yl(80,1.5,.8)),G$e=FR(yl(260,.75,.35),yl(80,1.5,.8)),Hy=yl();function H$e(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Hy.h=360*t-100,Hy.s=1.5-1.5*e,Hy.l=.8-.9*e,Hy+""}var Yy=iv(),Y$e=Math.PI/3,U$e=Math.PI*2/3;function X$e(t){var e;return t=(.5-t)*Math.PI,Yy.r=255*(e=Math.sin(t))*e,Yy.g=255*(e=Math.sin(t+Y$e))*e,Yy.b=255*(e=Math.sin(t+U$e))*e,Yy+""}function Z$e(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function lw(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const K$e=lw(jt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var J$e=lw(jt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Q$e=lw(jt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),eVe=lw(jt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const WP=Object.freeze(Object.defineProperty({__proto__:null,interpolateBlues:N$e,interpolateBrBG:g$e,interpolateBuGn:E$e,interpolateBuPu:O$e,interpolateCividis:V$e,interpolateCool:G$e,interpolateCubehelixDefault:q$e,interpolateGnBu:k$e,interpolateGreens:F$e,interpolateGreys:z$e,interpolateInferno:Q$e,interpolateMagma:J$e,interpolateOrRd:A$e,interpolateOranges:$$e,interpolatePRGn:v$e,interpolatePiYG:m$e,interpolatePlasma:eVe,interpolatePuBu:M$e,interpolatePuBuGn:T$e,interpolatePuOr:y$e,interpolatePuRd:C$e,interpolatePurples:j$e,interpolateRainbow:H$e,interpolateRdBu:b$e,interpolateRdGy:x$e,interpolateRdPu:P$e,interpolateRdYlBu:w$e,interpolateRdYlGn:_$e,interpolateReds:B$e,interpolateSinebow:X$e,interpolateSpectral:S$e,interpolateTurbo:Z$e,interpolateViridis:K$e,interpolateWarm:W$e,interpolateYlGn:I$e,interpolateYlGnBu:D$e,interpolateYlOrBr:L$e,interpolateYlOrRd:R$e,schemeAccent:zBe,schemeBlues:tse,schemeBrBG:Loe,schemeBuGn:qoe,schemeBuPu:Woe,schemeCategory10:FBe,schemeDark2:jBe,schemeGnBu:Goe,schemeGreens:nse,schemeGreys:rse,schemeObservable10:BBe,schemeOrRd:Hoe,schemeOranges:ose,schemePRGn:Roe,schemePaired:$Be,schemePastel1:VBe,schemePastel2:qBe,schemePiYG:Noe,schemePuBu:Uoe,schemePuBuGn:Yoe,schemePuOr:Foe,schemePuRd:Xoe,schemePurples:ise,schemeRdBu:zoe,schemeRdGy:joe,schemeRdPu:Zoe,schemeRdYlBu:Boe,schemeRdYlGn:$oe,schemeReds:ase,schemeSet1:WBe,schemeSet2:GBe,schemeSet3:HBe,schemeSpectral:Voe,schemeTableau10:YBe,schemeYlGn:Joe,schemeYlGnBu:Koe,schemeYlOrBr:Qoe,schemeYlOrRd:ese},Symbol.toStringTag,{value:"Module"}));function tVe(t,e,n,r,i,a){const{guide:o={}}=n,s=fVe(t,e,n);if(typeof s!="string")return n;const l=dVe(s,t,e,n),u=lVe(s,l,n);return Object.assign(Object.assign(Object.assign({},n),pVe(s,t,e,n,r)),{domain:u,range:hVe(s,t,e,n,u,i,a),expectedDomain:l,guide:o,name:t,type:s})}function nVe(t,e){const n={};for(const r of t){const{values:i,name:a}=r,o=e[a];for(const s of i){const{name:l,value:u}=s;n[l]=u.map(c=>o.map(c))}}return n}function rVe(t,e){const n=Array.from(t.values()).flatMap(i=>i.channels);II(n,i=>i.map(a=>e.get(a.scale.uid)),i=>i.name).filter(([,i])=>i.some(a=>typeof a.getOptions().groupTransform=="function")&&i.every(a=>a.getTicks)).map(i=>i[1]).forEach(i=>{const a=i.map(o=>o.getOptions().groupTransform)[0];a(i)})}function iVe(t,e){var n;const{components:r=[]}=e,i=["scale","encode","axis","legend","data","transform"],a=Array.from(new Set(t.flatMap(s=>s.channels.map(l=>l.scale)))),o=new Map(a.map(s=>[s.name,s]));for(const s of r){const l=sVe(s);for(const u of l){const c=o.get(u),f=((n=s.scale)===null||n===void 0?void 0:n[u])||{},{independent:d=!1}=f;if(c&&!d){const{guide:h}=c,p=typeof h=="boolean"?{}:h;c.guide=me({},p,s),Object.assign(c,f)}else{const h=Object.assign(Object.assign({},f),{expectedDomain:f.domain,name:u,guide:vp(s,i)});a.push(h)}}}return a}function aVe(t){if(!t||!Array.isArray(t))return[Vf,Vf];let e,n;return[a=>{var o;e=a.map.bind(a),n=(o=a.invert)===null||o===void 0?void 0:o.bind(a);const s=t.filter(([d])=>typeof d=="function"),l=t.filter(([d])=>typeof d!="function"),u=new Map(l);if(a.map=d=>{for(const[h,p]of s)if(h(d))return p;return u.has(d)?u.get(d):e(d)},!n)return a;const c=new Map(l.map(([d,h])=>[h,d])),f=new Map(s.map(([d,h])=>[h,d]));return a.invert=d=>f.has(d)?d:c.has(d)?c.get(d):n(d),a},a=>(e!==null&&(a.map=e),n!==null&&(a.invert=n),a)]}function qj(t,e){const n=Object.keys(t);for(const r of Object.values(e)){const{name:i}=r.getOptions();if(!(i in t))t[i]=r;else{const a=n.filter(l=>l.startsWith(i)).map(l=>+(l.replace(i,"")||0)),o=yn(a)+1,s=`${i}${o}`;t[s]=r,r.getOptions().key=s}}return t}function Wj(t,e){const[n]=er("scale",e),{relations:r}=t,[i]=aVe(r),a=n(t);return i(a)}function oVe(t){const e=t.flatMap(n=>Array.from(n.values())).flatMap(n=>n.channels.map(r=>r.scale));Gj(e,"x"),Gj(e,"y")}function sVe(t){const{channels:e=[],type:n,scale:r={}}=t,i=["shape","color","opacity","size"];return e.length!==0?e:n==="axisX"?["x"]:n==="axisY"?["y"]:n==="legends"?Object.keys(r).filter(a=>i.includes(a)):[]}function Gj(t,e){const n=t.filter(({name:a,facet:o=!0})=>o&&a===e),r=n.flatMap(a=>a.domain),i=n.every(sse)?Kl(r):n.every(lse)?Array.from(new Set(r)):null;if(i!==null)for(const a of n)a.domain=i}function lVe(t,e,n){const{ratio:r}=n;return r==null?e:sse({type:t})?uVe(e,r,t):lse({type:t})?cVe(e,r):e}function uVe(t,e,n){const r=t.map(Number),i=new Gn({domain:r,range:[r[0],r[0]+(r[r.length-1]-r[0])*e]});return n==="time"?t.map(a=>new Date(i.map(a))):t.map(a=>i.map(a))}function cVe(t,e){const n=Math.round(t.length*e);return t.slice(0,n)}function sse(t){const{type:e}=t;return typeof e!="string"?!1:["linear","log","pow","time"].includes(e)}function lse(t){const{type:e}=t;return typeof e!="string"?!1:["band","point","ordinal"].includes(e)}function fVe(t,e,n){const{type:r,domain:i,range:a,quantitative:o,ordinal:s}=n;return r!==void 0?r:kVe(e)?"identity":typeof a=="string"?"linear":(i||a||[]).length>2?KE(t,s):i!==void 0?Xj([i])?KE(t,s):Zj(e)?"time":Yj(t,a,o):Xj(e)?KE(t,s):Zj(e)?"time":Yj(t,a,o)}function dVe(t,e,n,r){const{domain:i}=r;if(i!==void 0)return i;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return Uj(wVe(n,r),r);case"band":case"ordinal":case"point":return _Ve(n);case"quantile":return SVe(n);case"sequential":return Uj(EVe(n),r);default:return[]}}function hVe(t,e,n,r,i,a,o){const{range:s}=r;if(typeof s=="string")return gVe(s);if(s!==void 0)return s;const{rangeMin:l,rangeMax:u}=r;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":{const c=Hj(n,r,i,a,o),[f,d]=OVe(e,c);return[l??f,u??d]}case"band":case"point":return[l??(e==="size"?5:0),u??(e==="size"?10:1)];case"ordinal":return Hj(n,r,i,a,o);case"sequential":return;case"constant":return[n[0][0]];default:return[]}}function pVe(t,e,n,r,i){switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":return yVe(i,r);case"band":case"point":return bVe(t,e,i,r);case"sequential":return mVe(r);default:return r}}function Hj(t,e,n,r,i){const[a]=er("palette",i),{category10:o,category20:s}=r,l=bTe(n).length<=o.length?o:s,{palette:u=l,offset:c}=e;if(Array.isArray(u))return u;try{return a({type:u})}catch{const d=vVe(u,n,c);if(d)return d;throw new Error(`Unknown Component: ${u} `)}}function gVe(t){return t.split("-")}function vVe(t,e,n=r=>r){if(!t)return null;const r=Bo(t),i=WP[`scheme${r}`],a=WP[`interpolate${r}`];if(!i&&!a)return null;if(i){if(!i.some(Array.isArray))return i;const o=i[e.length];if(o)return o}return e.map((o,s)=>a(n(s/e.length)))}function mVe(t){const{palette:e="ylGnBu",offset:n}=t,r=Bo(e),i=WP[`interpolate${r}`];if(!i)throw new Error(`Unknown palette: ${r}`);return{interpolator:n?a=>i(n(a)):i}}function yVe(t,e){const{interpolate:n=Fv,nice:r=!1,tickCount:i=5}=e;return Object.assign(Object.assign({},e),{interpolate:n,nice:r,tickCount:i})}function bVe(t,e,n,r){if(r.padding!==void 0||r.paddingInner!==void 0||r.paddingOuter!==void 0)return Object.assign(Object.assign({},r),{unknown:NaN});const i=xVe(t,e,n),{paddingInner:a=i,paddingOuter:o=i}=r;return Object.assign(Object.assign({},r),{paddingInner:a,paddingOuter:o,padding:i,unknown:NaN})}function xVe(t,e,n){return e==="enterDelay"||e==="enterDuration"||e==="size"?0:t==="band"?Aoe(n)?0:.1:t==="point"?.5:0}function KE(t,e){return e||(AVe(t)?"point":"ordinal")}function Yj(t,e,n){return n||(t!=="color"||e?"linear":"sequential")}function Uj(t,e){if(t.length===0)return t;const{domainMin:n,domainMax:r}=e,[i,a]=t;return[n??i,r??a]}function wVe(t,e){const{zero:n=!1}=e;let r=1/0,i=-1/0;for(const a of t)for(const o of a)$n(o)&&(r=Math.min(r,+o),i=Math.max(i,+o));return r===1/0?[]:n?[Math.min(0,r),i]:[r,i]}function _Ve(t){return Array.from(new Set(t.flat()))}function SVe(t){return t.flat().sort()}function EVe(t){let e=1/0,n=-1/0;for(const r of t)for(const i of r)$n(i)&&(e=Math.min(e,+i),n=Math.max(n,+i));return e===1/0?[]:[e<0?-n:e,n]}function OVe(t,e){return t==="enterDelay"?[0,1e3]:t=="enterDuration"?[300,1e3]:t.startsWith("y")||t.startsWith("position")?[1,0]:t==="color"?[yTe(e),nQ(e)]:t==="opacity"?[0,1]:t==="size"?[1,10]:[0,1]}function Xj(t){return zR(t,e=>{const n=typeof e;return n==="string"||n==="boolean"})}function Zj(t){return zR(t,e=>e instanceof Date)}function kVe(t){return zR(t,Hh)}function zR(t,e){for(const n of t)if(n.some(e))return!0;return!1}function AVe(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t.startsWith("size")}function TVe(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t==="enterDelay"||t==="enterDuration"||t==="updateDelay"||t==="updateDuration"||t==="exitDelay"||t==="exitDuration"}function MVe(t){if(!t||!t.type)return!1;if(typeof t.type=="function")return!0;const{type:e,domain:n,range:r,interpolator:i}=t,a=n&&n.length>0,o=r&&r.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(e)&&a&&o||["sequential"].includes(e)&&a&&(o||i)||["constant","identity"].includes(e)&&o)}const CVe={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},PVe={threshold:"threshold",quantize:"quantize",quantile:"quantile"},DVe={ordinal:"ordinal",band:"band",point:"point"},IVe={constant:"constant"};var zc=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function LVe(t,e,n){const{coordinates:r=[],title:i}=e,[,a]=er("component",n),o=t.filter(({guide:c})=>c!==null),s=[],l=WVe(e,t,n);if(s.push(...l),i){const{props:c}=a("title"),{defaultPosition:f,defaultOrientation:d,defaultOrder:h,defaultSize:p,defaultCrossPadding:g}=c,v=typeof i=="string"?{title:i}:i;s.push(Object.assign({type:"title",position:f,orientation:d,order:h,crossPadding:g[0],defaultSize:p},v))}return jVe(o,r).forEach(([c,f])=>{const{props:d}=a(c),{defaultPosition:h,defaultPlane:p="xy",defaultOrientation:g,defaultSize:v,defaultOrder:m,defaultLength:y,defaultPadding:b=[0,0],defaultCrossPadding:x=[0,0]}=d,w=me({},...f),{guide:_,field:E}=w,S=Array.isArray(_)?_:[_];for(const O of S){const[A,T]=VVe(c,h,g,O,f,o,r);if(!A&&!T)continue;const I=A==="left"||A==="right",D=I?b[1]:b[0],R=I?x[1]:x[0],{size:F,order:z=m,length:N=y,padding:L=D,crossPadding:B=R}=O;s.push(Object.assign(Object.assign({title:E},O),{defaultSize:v,length:N,position:A,plane:p,orientation:T,padding:L,order:z,crossPadding:B,size:F,type:c,scales:f}))}}),s}function Kj(t,e,n,r,i){const[a]=er("component",r),{scaleInstances:o,scale:s,bbox:l}=t,u=zc(t,["scaleInstances","scale","bbox"]),c={bbox:l,library:r};return a(u)({coordinate:e,library:r,markState:i,scales:o,theme:n,value:c,scale:s})}function RVe(t){return t.map(e=>{const n=me(e,e.style);return delete n.style,n})}function use(t,e){const n=["left","right","bottom","top"];return PI(t,({type:a,position:o,group:s})=>n.includes(o)?s===void 0?a.startsWith("legend")?`legend-${o}`:Symbol("independent"):s==="independent"?Symbol("independent"):s:Symbol("independent")).flatMap(([,a])=>{if(a.length===1)return a[0];if(e!==void 0){const c=a.filter(g=>g.length!==void 0).map(g=>g.length),f=Ro(c);if(f>e)return a.forEach(g=>g.group=Symbol("independent")),a;const d=e-f,h=a.length-c.length,p=d/h;a.forEach(g=>{g.length===void 0&&(g.length=p)})}const o=yn(a,c=>c.size),s=yn(a,c=>c.order),l=yn(a,c=>c.crossPadding),u=a[0].position;return{type:"group",size:o,order:s,position:u,children:a,crossPadding:l}})}function NVe(t,e){const n=["shape","size","color","opacity"],r=(d,h)=>d==="constant"&&h==="size",i=t.filter(({type:d,name:h})=>typeof d=="string"&&n.includes(h)&&!r(d,h)),a=i.filter(({type:d})=>d==="constant"),o=i.filter(({type:d})=>d!=="constant"),l=PI(o,d=>d.field?d.field:Symbol("independent")).map(([d,h])=>[d,[...h,...a]]).filter(([,d])=>d.some(h=>h.type!=="constant")),u=new Map(l);if(u.size===0)return[];const c=d=>d.sort(([h],[p])=>h.localeCompare(p));return Array.from(u).map(([,d])=>{const p=xTe(d).sort((g,v)=>v.length-g.length).map(g=>({combination:g,option:g.map(v=>[v.name,FVe(v)])}));for(const{option:g,combination:v}of p)if(!g.every(m=>m[1]==="constant")&&g.every(m=>m[1]==="discrete"||m[1]==="constant"))return["legendCategory",v];for(const[g,v]of lze)for(const{option:m,combination:y}of p)if(v.some(b=>br(c(b),c(m))))return[g,y];return null}).filter($n)}function FVe(t){const{type:e}=t;return typeof e!="string"?null:e in CVe?"continuous":e in DVe?"discrete":e in PVe?"distribution":e in IVe?"constant":null}function zVe(t,e){return t.map(n=>{const{name:r}=n;if(DBe(e)||Aoe(e)||bh(e)&&(hf(e)||n0(e)))return null;if(r.startsWith("x"))return hf(e)?["axisArc",[n]]:n0(e)?["axisLinear",[n]]:[bh(e)?"axisY":"axisX",[n]];if(r.startsWith("y"))return hf(e)?["axisLinear",[n]]:n0(e)?["axisArc",[n]]:[bh(e)?"axisX":"axisY",[n]];if(r.startsWith("z"))return["axisZ",[n]];if(r.startsWith("position")){if(Toe(e))return["axisRadar",[n]];if(!hf(e))return["axisY",[n]]}return null}).filter($n)}function jVe(t,e){const n=t.filter(r=>MVe(r));return[...NVe(n),...zVe(n,e)]}function GP(t){const e=Os(t,"polar");if(e.length){const r=e[e.length-1],{startAngle:i,endAngle:a}=TK(r);return[i,a]}const n=Os(t,"radial");if(n.length){const r=n[n.length-1],{startAngle:i,endAngle:a}=PK(r);return[i,a]}return[-Math.PI/2,Math.PI/2*3]}function BVe(t){const e=/position(\d*)/g.exec(t);return e?+e[1]:null}function $Ve(t,e,n,r,i){const{name:a}=n[0];if(t==="axisRadar"){const o=r.filter(d=>d.name.startsWith("position")),s=BVe(a);if(s===null)return[null,null];const[l,u]=GP(i),c=Toe(i)?o.length:o.length-1;return["center",(u-l)/c*s+l]}if(t==="axisY"&&IBe(i))return bh(i)?["center","horizontal"]:["center","vertical"];if(t==="axisLinear"){const[o]=GP(i);return["center",o]}return t==="axisArc"?e[0]==="inner"?["inner",null]:["outer",null]:hf(i)?["center",null]:n0(i)?["center",null]:t==="axisX"&&LBe(i)||t==="axisX"&&RBe(i)?["top",null]:e}function VVe(t,e,n,r,i,a,o){const[s]=GP(o),l=[r.position||e,s??n];return typeof t=="string"&&t.startsWith("axis")?$Ve(t,l,i,a,o):typeof t=="string"&&t.startsWith("legend")&&hf(o)&&r.position==="center"?["center","vertical"]:l}function qVe(t,e,n=[]){return t==="x"?bh(n)?`${e}Y`:`${e}X`:t==="y"?bh(n)?`${e}X`:`${e}Y`:null}function WVe(t,e,n){const[,r]=er("component",n),{coordinates:i}=t;function a(o,s,l,u){const c=qVe(s,o,i);if(!u||!c)return;const{props:f}=r(c),{defaultPosition:d,defaultSize:h,defaultOrder:p,defaultCrossPadding:[g]}=f;return Object.assign(Object.assign({position:d,defaultSize:h,order:p,type:c,crossPadding:g},u),{scales:[l]})}return e.filter(o=>o.slider||o.scrollbar).flatMap(o=>{const{slider:s,scrollbar:l,name:u}=o;return[a("slider",u,o,s),a("scrollbar",u,o,l)]}).filter(o=>!!o)}function cse(t,e,n,r,i,a){const{type:o}=t;if(!["left","right","bottom","top"].includes(r)||typeof o!="string")return;const l=o;return(l.startsWith("axis")?XVe:l.startsWith("group")?GVe:l.startsWith("legendContinuous")?ZVe:l==="legendCategory"?KVe:l.startsWith("slider")?UVe:l==="title"?YVe:l.startsWith("scrollbar")?HVe:()=>{})(t,e,n,r,i,a)}function GVe(t,e,n,r,i,a){const{children:o}=t,s=yn(o,u=>u.crossPadding);o.forEach(u=>u.crossPadding=s),o.forEach(u=>cse(u,e,n,r,i,a));const l=yn(o,u=>u.size);t.size=l,o.forEach(u=>u.size=l)}function HVe(t,e,n,r,i,a){const{trackSize:o=6}=me({},i.scrollbar,t);t.size=o}function YVe(t,e,n,r,i,a){const o=me({},i.title,t),{title:s,subtitle:l,spacing:u=0}=o,c=zc(o,["title","subtitle","spacing"]);if(s){const f=Fe(c,"title"),d=Ox(s,f);t.size=d.height}if(l){const f=Fe(c,"subtitle"),d=Ox(l,f);t.size+=u+d.height}}function UVe(t,e,n,r,i,a){const o=()=>{const{slider:c}=i;return me({},c,t)},{trackSize:s,handleIconSize:l}=o(),u=Math.max(s,l*2.4);t.size=u}function XVe(t,e,n,r,i,a){var o;t.transform=t.transform||[{type:"hide"}];const s=r==="left"||r==="right",l=fse(t,r,i),{tickLength:u=0,labelSpacing:c=0,titleSpacing:f=0,labelAutoRotate:d}=l,h=zc(l,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),p=uw(t,a),g=cw(h,p),v=u+c;if(g&&g.length){const y=yn(g,x=>x.width),b=yn(g,x=>x.height);if(s)t.size=y+v;else{const{tickFilter:x,labelTransform:w}=t;eqe(p,g,e,n,x)&&!w&&d!==!1&&d!==null?(t.labelTransform="rotate(90)",t.size=y+v):(t.labelTransform=(o=t.labelTransform)!==null&&o!==void 0?o:"rotate(0)",t.size=b+v)}}else t.size=u;const m=fw(h);m&&(s?t.size+=f+m.width:t.size+=f+m.height)}function ZVe(t,e,n,r,i,a){const s=(()=>{const{legendContinuous:x}=i;return me({},x,t)})(),{labelSpacing:l=0,titleSpacing:u=0}=s,c=zc(s,["labelSpacing","titleSpacing"]),f=r==="left"||r==="right",d=Fe(c,"ribbon"),{size:h}=d,p=Fe(c,"handleIcon"),{size:g}=p,v=Math.max(h,g*2.4);t.size=v;const m=uw(t,a),y=cw(c,m);if(y){const x=f?"width":"height",w=yn(y,_=>_[x]);t.size+=w+l}const b=fw(c);b&&(f?t.size=Math.max(t.size,b.width):t.size+=u+b.height)}function KVe(t,e,n,r,i,a){const s=(()=>{const{legendCategory:R}=i,{title:F}=t,[z,N]=Array.isArray(F)?[F,void 0]:[void 0,F];return me({title:z},R,Object.assign(Object.assign({},t),{title:N}))})(),{itemSpacing:l,itemMarkerSize:u,titleSpacing:c,rowPadding:f,colPadding:d,maxCols:h=1/0,maxRows:p=1/0}=s,g=zc(s,["itemSpacing","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:v,length:m}=t,y=R=>Math.min(R,p),b=R=>Math.min(R,h),x=r==="left"||r==="right",w=m===void 0?e+(x?0:n[0]+n[1]):m,_=fw(g),E=uw(t,a),S=cw(g,E,"itemLabel"),O=Math.max(S[0].height,u)+f,A=(R,F=0)=>u+R+l[0]+F;x?(()=>{let R=-1/0,F=0,z=1,N=0,L=-1/0,B=-1/0;const $=_?_.height:0,G=w-$;for(const{width:W}of S){const U=A(W,d);R=Math.max(R,U),F+O>G?(z++,L=Math.max(L,N),B=Math.max(B,F),N=1,F=O):(F+=O,N++)}z<=1&&(L=N,B=F),t.size=R*b(z),t.length=B+$,me(t,{cols:b(z),gridRow:L})})():typeof v=="number"?(()=>{const R=Math.ceil(S.length/v),F=yn(S,z=>A(z.width))*v;t.size=O*y(R)-f,t.length=Math.min(F,w)})():(()=>{let R=1,F=0,z=-1/0;for(const{width:N}of S){const L=A(N,d);F+L>w?(z=Math.max(z,F),F=L,R++):F+=L}R===1&&(z=F),t.size=O*y(R)-f,t.length=z})(),_&&(x?t.size=Math.max(t.size,_.width):t.size+=c+_.height)}function uw(t,e){const[n]=er("scale",e),{scales:r,tickCount:i,tickMethod:a}=t,o=r.find(s=>s.type!=="constant"&&s.type!=="identity");return i!==void 0&&(o.tickCount=i),a!==void 0&&(o.tickMethod=a),n(o)}function cw(t,e,n="label"){const{labelFormatter:r,tickFilter:i,label:a=!0}=t,o=zc(t,["labelFormatter","tickFilter","label"]);if(!a)return null;const s=JVe(e,r,i),l=Fe(o,n),u=s.map((d,h)=>Object.fromEntries(Object.entries(l).map(([p,g])=>[p,typeof g=="function"?g(d,h):g]))),c=s.map((d,h)=>{const p=u[h];return Ox(d,p)});if(!u.some(d=>d.transform)){const d=s.map((h,p)=>p);t.indexBBox=new Map(d.map(h=>[h,[s[h],c[h]]]))}return c}function fw(t){const e=u=>u===!1||u===null,{title:n}=t,r=zc(t,["title"]);if(e(n)||n===void 0)return null;const i=Fe(r,"title"),{direction:a,transform:o}=i,s=Array.isArray(n)?n.join(","):n;return typeof s!="string"?null:Ox(s,Object.assign(Object.assign({},i),{transform:o||(a==="vertical"?"rotate(-90)":"")}))}function fse(t,e,n){const{title:r}=t,[i,a]=Array.isArray(r)?[r,void 0]:[void 0,r],{axis:o,[`axis${VI(e)}`]:s}=n;return me({title:i},o,s,Object.assign(Object.assign({},t),{title:a}))}function dse(t,e){const n=t.getTicks?t.getTicks():t.getOptions().domain;return e?n.filter(e):n}function JVe(t,e,n){const i=dse(t,n).map(o=>typeof o=="number"?Ub(o):o),a=e?typeof e=="string"?Rc(e):e:t.getFormatter?t.getFormatter():o=>`${o}`;return i.map(a)}function QVe(t,e){return t.getBandWidth?t.getBandWidth(e)/2:0}function eqe(t,e,n,r,i){if(Ro(e,h=>h.width)>n)return!0;const o=t.clone();o.update({range:[0,n]});const s=dse(t,i),l=s.map(h=>o.map(h)+QVe(o,h)),u=s.map((h,p)=>p),c=-r[0],f=n+r[1],d=(h,p)=>{const{width:g}=p;return[h-g/2,h+g/2]};for(let h=0;h<u.length;h++){const p=l[h],[g,v]=d(p,e[h]);if(g<c||v>f)return!0;const m=l[h+1];if(m){const[y]=d(m,e[h+1]);if(v>y)return!0}}return!1}function Ox(t,e){const n=tqe(t),r=zc(e,["filter"]);return n.attr(Object.assign(Object.assign({},r),{visibility:"none"})),n.getBBox()}function tqe(t){return t instanceof Un?t:new Va({style:{text:`${t}`}})}function nqe(t){const e=t.find(({type:i})=>i==="axisX"),n=t.find(({type:i})=>i==="axisY"),r=t.find(({type:i})=>i==="axisZ");e&&n&&r&&(e.plane="xy",n.plane="xy",r.plane="yz",r.origin=[e.bbox.x,e.bbox.y,0],r.eulerAngles=[0,-90,0],r.bbox.x=e.bbox.x,r.bbox.y=e.bbox.y,t.push(Object.assign(Object.assign({},e),{plane:"xz",showLabel:!1,showTitle:!1,origin:[e.bbox.x,e.bbox.y,0],eulerAngles:[-90,0,0]})),t.push(Object.assign(Object.assign({},n),{plane:"yz",showLabel:!1,showTitle:!1,origin:[n.bbox.x+n.bbox.width,n.bbox.y,0],eulerAngles:[0,-90,0]})),t.push(Object.assign(Object.assign({},r),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]})))}function rqe(t,e,n,r){var i,a;const{width:o,height:s,depth:l,x:u=0,y:c=0,z:f=0,inset:d=(i=n.inset)!==null&&i!==void 0?i:0,insetLeft:h=d,insetTop:p=d,insetBottom:g=d,insetRight:v=d,margin:m=(a=n.margin)!==null&&a!==void 0?a:0,marginLeft:y=m,marginBottom:b=m,marginTop:x=m,marginRight:w=m,padding:_=n.padding,paddingBottom:E=_,paddingLeft:S=_,paddingRight:O=_,paddingTop:A=_}=aqe(t,e,n,r),T=1/4,I=(de,ye,_e,Ee,ue)=>{const{marks:he}=e;if(he.length===0)return[Ee,ue];if(de-Ee-ue-de*T>0)return[Ee,ue];const Me=de*(1-T);return[ye==="auto"?Me*Ee/(Ee+ue):Ee,_e==="auto"?Me*ue/(Ee+ue):ue]},D=de=>de==="auto"?20:de??20,R=D(A),F=D(E),z=Jj(t,s-R-F,[R+x,F+b],["left","right"],e,n,r),{paddingLeft:N,paddingRight:L}=z,B=o-y-w,[$,G]=I(B,S,O,N,L),W=B-$-G,U=Jj(t,W,[$+y,G+w],["bottom","top"],e,n,r),{paddingTop:Y,paddingBottom:q}=U,K=s-b-x,[J,Q]=I(K,E,A,q,Y),se=K-J-Q;return{width:o,height:s,depth:l,insetLeft:h,insetTop:p,insetBottom:g,insetRight:v,innerWidth:W,innerHeight:se,paddingLeft:$,paddingRight:G,paddingTop:Q,paddingBottom:J,marginLeft:y,marginBottom:b,marginTop:x,marginRight:w,x:u,y:c,z:f}}function iqe(t){const{height:e,width:n,padding:r=0,paddingLeft:i=r,paddingRight:a=r,paddingTop:o=r,paddingBottom:s=r,margin:l=16,marginLeft:u=l,marginRight:c=l,marginTop:f=l,marginBottom:d=l,inset:h=0,insetLeft:p=h,insetRight:g=h,insetTop:v=h,insetBottom:m=h}=t,y=w=>w==="auto"?20:w,b=n-y(i)-y(a)-u-c-p-g,x=e-y(o)-y(s)-f-d-v-m;return{width:b,height:x}}function aqe(t,e,n,r){const{coordinates:i}=e;if(!hf(i)&&!n0(i))return e;const a=t.filter(m=>typeof m.type=="string"&&m.type.startsWith("axis"));if(a.length===0)return e;const o=a.map(m=>{const y=m.type==="axisArc"?"arc":"linear";return fse(m,y,n)}),s=yn(o,m=>{var y;return(y=m.labelSpacing)!==null&&y!==void 0?y:0}),l=a.flatMap((m,y)=>{const b=o[y],x=uw(m,r);return cw(b,x)}).filter($n),u=yn(l,m=>m.height)+s,c=a.flatMap((m,y)=>{const b=o[y];return fw(b)}).filter(m=>m!==null),f=c.length===0?0:yn(c,m=>m.height),{inset:d=u,insetLeft:h=d,insetBottom:p=d,insetTop:g=d+f,insetRight:v=d}=e;return Object.assign(Object.assign({},e),{insetLeft:h,insetBottom:p,insetTop:g,insetRight:v})}function Jj(t,e,n,r,i,a,o){const s=Bn(t,p=>p.position),{padding:l=a.padding,paddingLeft:u=l,paddingRight:c=l,paddingBottom:f=l,paddingTop:d=l}=i,h={paddingBottom:f,paddingLeft:u,paddingTop:d,paddingRight:c};for(const p of r){const g=`padding${VI(OL(p))}`,v=s.get(p)||[],m=h[g],y=O=>{O.size===void 0&&(O.size=O.defaultSize)},b=O=>{O.type==="group"?(O.children.forEach(y),O.size=yn(O.children,A=>A.size)):O.size=O.defaultSize},x=O=>{O.size||(m!=="auto"?b(O):(cse(O,e,n,p,a,o),y(O)))},w=O=>{O.type.startsWith("axis")&&O.labelAutoHide===void 0&&(O.labelAutoHide=!0)},_=p==="bottom"||p==="top",E=fo(v,O=>O.order),S=v.filter(O=>O.type.startsWith("axis")&&O.order==E);if(S.length&&(S[0].crossPadding=0),typeof m=="number")v.forEach(y),v.forEach(w);else if(v.length===0)h[g]=0;else{const O=_?e+n[0]+n[1]:e,A=use(v,O);A.forEach(x);const T=A.reduce((I,{size:D,crossPadding:R=12})=>I+D+R,0);h[g]=T}}return h}function oqe(t,e,n){const r=Bn(t,_=>`${_.plane||"xy"}-${_.position}`),{paddingLeft:i,paddingRight:a,paddingTop:o,paddingBottom:s,marginLeft:l,marginTop:u,marginBottom:c,marginRight:f,innerHeight:d,innerWidth:h,insetBottom:p,insetLeft:g,insetRight:v,insetTop:m,height:y,width:b,depth:x}=n,w={xy:JE({width:b,height:y,paddingLeft:i,paddingRight:a,paddingTop:o,paddingBottom:s,marginLeft:l,marginTop:u,marginBottom:c,marginRight:f,innerHeight:d,innerWidth:h,insetBottom:p,insetLeft:g,insetRight:v,insetTop:m}),yz:JE({width:x,height:y,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:x,innerHeight:y,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:JE({width:b,height:x,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:b,innerHeight:x,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(const[_,E]of r.entries()){const[S,O]=_.split("-"),A=w[S][O],[T,I]=rQ(E,D=>typeof D.type!="string"?!1:!!(O==="center"||D.type.startsWith("axis")&&["inner","outer"].includes(O)));T.length&&sqe(T,e,A,O),I.length&&vqe(E,e,A)}}function JE({width:t,height:e,paddingLeft:n,paddingRight:r,paddingTop:i,paddingBottom:a,marginLeft:o,marginTop:s,marginBottom:l,marginRight:u,innerHeight:c,innerWidth:f,insetBottom:d,insetLeft:h,insetRight:p,insetTop:g}){const v=n+o,m=i+s,y=r+u,b=a+l,x=t-o-u,w=[v+h,m+g,f-h-p,c-g-d,"center",null,null];return{top:[v,0,f,m,"vertical",!0,Mr,o,x],right:[t-y,m,y,c,"horizontal",!1,Mr],bottom:[v,e-b,f,b,"vertical",!1,Mr,o,x],left:[0,m,v,c,"horizontal",!0,Mr],"top-left":[v,0,f,m,"vertical",!0,Mr],"top-right":[v,0,f,m,"vertical",!0,Mr],"bottom-left":[v,e-b,f,b,"vertical",!1,Mr],"bottom-right":[v,e-b,f,b,"vertical",!1,Mr],center:w,inner:w,outer:w}}function sqe(t,e,n,r){const[i,a]=rQ(t,o=>!!(typeof o.type=="string"&&o.type.startsWith("axis")));lqe(i,e,n,r),mqe(a,e,n)}function lqe(t,e,n,r){r==="center"?_Me(e)?gqe(t,e,n):On(e)?fqe(t,e,n):I2(e)&&dqe(t,e,n,t[0].orientation):r==="inner"?uqe(t,e,n):r==="outer"&&cqe(t,e,n)}function uqe(t,e,n){const[r,i,,a]=n,[o,s]=e.getCenter(),[l]=L2(e),u=a/2,c=l*u,f=o-c,d=s-c;for(let h=0;h<t.length;h++){const p=t[h];p.bbox={x:r+f,y:i+d,width:c*2,height:c*2}}}function cqe(t,e,n){const[r,i,a,o]=n;for(const s of t)s.bbox={x:r,y:i,width:a,height:o}}function fqe(t,e,n){const[r,i,a,o]=n;for(const s of t)s.bbox={x:r,y:i,width:a,height:o}}function dqe(t,e,n,r){r==="horizontal"?pqe(t,e,n):r==="vertical"&&hqe(t,e,n)}function hqe(t,e,n){const[r,i,,a]=n,o=new Array(t.length).fill(0),l=e.map(o).filter((u,c)=>c%2===0).map(u=>u+r);for(let u=0;u<t.length;u++){const c=t[u],f=l[u],d=l[u+1]-f;c.bbox={x:f,y:i,width:d,height:a}}}function pqe(t,e,n){const[r,i,a]=n,o=new Array(t.length).fill(0),l=e.map(o).filter((u,c)=>c%2===1).map(u=>u+i);for(let u=0;u<t.length;u++){const c=t[u],f=l[u],d=l[u+1]-f;c.bbox={x:r,y:f,width:a,height:d}}}function gqe(t,e,n,r){const[i,a,o,s]=n;for(const l of t)l.bbox={x:i,y:a,width:o,height:s},l.radar={index:t.indexOf(l),count:t.length}}function vqe(t,e,n){const[r,i,a,o,s,l,u,c,f]=n,[d,h,p,g,v,m,y,b]=s==="vertical"?["y",i,"x",r,"height",o,"width",a]:["x",r,"y",i,"width",a,"height",o];t.sort((O,A)=>u==null?void 0:u(O.order,A.order));const x=O=>O==="title"||O==="group"||O.startsWith("legend"),w=(O,A,T)=>T===void 0?A:x(O)?T:A,_=(O,A,T)=>T===void 0?A:x(O)?T:A,E=l?h+m:h;for(let O=0,A=E;O<t.length;O++){const T=t[O],{crossPadding:I=0,type:D}=T,{size:R}=T;T.bbox={[d]:l?A-R-I:A+I,[p]:_(D,g,c),[v]:R,[y]:w(D,b,f)},A+=(R+I)*(l?-1:1)}const S=t.filter(O=>O.type==="group");for(const O of S){const{bbox:A,children:T}=O,I=A[y],D=I/T.length,R=T.reduce((B,$)=>{var G;const W=(G=$.layout)===null||G===void 0?void 0:G.justifyContent;return W||B},"flex-start"),F=T.map((B,$)=>{const{length:G=D,padding:W=0}=B;return G+($===T.length-1?0:W)}),z=Ro(F),N=I-z,L=R==="flex-start"?0:R==="center"?N/2:N;for(let B=0,$=A[p]+L;B<T.length;B++){const G=T[B],{padding:W=0}=G,U=B===T.length-1?0:W;G.bbox={[v]:A[v],[d]:A[d],[p]:$,[y]:F[B]-U},me(G,{layout:{justifyContent:R}}),$+=F[B]}}}function mqe(t,e,n){if(t.length===0)return;const[r,i,a,o]=n,[s]=L2(e),l=o/2*s/Math.sqrt(2),u=r+a/2,c=i+o/2;for(let f=0;f<t.length;f++){const d=t[f];d.bbox={x:u-l,y:c-l,width:l*2,height:l*2}}}var yqe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},lp=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const hse=Symbol("CALLBACK_ITEM");function bqe(t,e,n){const{encode:r={},scale:i={},transform:a=[]}=e,o=lp(e,["encode","scale","transform"]);return[t,Object.assign(Object.assign({},o),{encode:r,scale:i,transform:a})]}function pse(t,e,n){return yqe(this,void 0,void 0,function*(){const{library:r}=n,{data:i}=e,[a]=er("data",r),o=Dqe(i),{transform:s=[]}=o,c=[lp(o,["transform"]),...s].map(h=>a(h,n)),f=yield pTe(c)(i),d=i&&!Array.isArray(i)&&!Array.isArray(f)?{value:f}:f;return[Array.isArray(f)?id(f):[],Object.assign(Object.assign({},e),{data:d})]})}function xqe(t,e,n){const{encode:r}=e;if(!r)return[t,e];const i={};for(const[a,o]of Object.entries(r))if(Array.isArray(o))for(let s=0;s<o.length;s++){const l=`${a}${s===0?"":s}`;i[l]=o[s]}else i[a]=o;return[t,Object.assign(Object.assign({},e),{encode:i})]}function wqe(t,e,n){const{encode:r,data:i}=e;if(!r)return[t,e];const a=pl(r,o=>Mqe(o)?o:{type:Cqe(i,o),value:o});return[t,Object.assign(Object.assign({},e),{encode:a})]}function _qe(t,e,n){const{encode:r}=e;if(!r)return[t,e];const i=pl(r,(a,o)=>{const{type:s}=a;return s!=="constant"||TVe(o)?a:Object.assign(Object.assign({},a),{constant:!0})});return[t,Object.assign(Object.assign({},e),{encode:i})]}function Sqe(t,e,n){const{encode:r,data:i}=e;if(!r)return[t,e];const{library:a}=n,o=Rqe(a),s=pl(r,l=>o(i,l));return[t,Object.assign(Object.assign({},e),{encode:s})]}function Eqe(t,e,n){const{tooltip:r={}}=e;return su(r)?[t,e]:Array.isArray(r)?[t,Object.assign(Object.assign({},e),{tooltip:{items:r}})]:Hh(r)&&jre(r)?[t,Object.assign(Object.assign({},e),{tooltip:r})]:[t,Object.assign(Object.assign({},e),{tooltip:{items:[r]}})]}function Oqe(t,e,n){const{data:r,encode:i,tooltip:a={}}=e;if(su(a))return[t,e];const o=f=>{if(!f)return f;if(typeof f=="string")return t.map(d=>({name:f,value:r[d][f]}));if(Hh(f)){const{field:d,channel:h,color:p,name:g=d,valueFormatter:v=_=>_}=f,m=typeof v=="string"?Rc(v):v,y=h&&i[h],b=y&&i[h].field,x=g||b||h,w=[];for(const _ of t){const E=d?r[_][d]:y?i[h].value[_]:null;w[_]={name:x,color:p,value:m(E)}}return w}if(typeof f=="function"){const d=[];for(const h of t){const p=f(r[h],h,r,i);Hh(p)?d[h]=Object.assign(Object.assign({},p),{[hse]:!0}):d[h]={value:p}}return d}return f},{title:s,items:l=[]}=a,u=lp(a,["title","items"]),c=Object.assign({title:o(s),items:Array.isArray(l)?l.map(o):[]},u);return[t,Object.assign(Object.assign({},e),{tooltip:c})]}function kqe(t,e,n){const{encode:r}=e,i=lp(e,["encode"]);if(!r)return[t,e];const a=Object.entries(r),o=a.filter(([,l])=>{const{value:u}=l;return Array.isArray(u[0])}).flatMap(([l,u])=>{const c=[[l,new Array(t.length).fill(void 0)]],{value:f}=u,d=lp(u,["value"]);for(let h=0;h<f.length;h++){const p=f[h];if(Array.isArray(p))for(let g=0;g<p.length;g++){const v=c[g]||[`${l}${g}`,new Array(t).fill(void 0)];v[1][h]=p[g],c[g]=v}}return c.map(([h,p])=>[h,Object.assign({type:"column",value:p},d)])}),s=Object.fromEntries([...a,...o]);return[t,Object.assign(Object.assign({},i),{encode:s})]}function Aqe(t,e,n){const{axis:r={},legend:i={},slider:a={},scrollbar:o={}}=e,s=(u,c)=>{if(typeof u=="boolean")return u?{}:null;const f=u[c];return f===void 0||f?f:null},l=typeof r=="object"?Array.from(new Set(["x","y","z",...Object.keys(r)])):["x","y","z"];return me(e,{scale:Object.assign(Object.assign({},Object.fromEntries(l.map(u=>{const c=s(o,u);return[u,Object.assign({guide:s(r,u),slider:s(a,u),scrollbar:c},c&&{ratio:c.ratio===void 0?.5:c.ratio})]}))),{color:{guide:s(i,"color")},size:{guide:s(i,"size")},shape:{guide:s(i,"shape")},opacity:{guide:s(i,"opacity")}})}),[t,e]}function Tqe(t,e,n){const{animate:r}=e;return r||r===void 0?[t,e]:(me(e,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[t,e])}function Mqe(t){if(typeof t!="object"||t instanceof Date||t===null)return!1;const{type:e}=t;return $n(e)}function Cqe(t,e){return typeof e=="function"?"transform":typeof e=="string"&&Pqe(t,e)?"field":"constant"}function Pqe(t,e){return Array.isArray(t)?t.some(n=>n[e]!==void 0):!1}function Dqe(t){if(je(t))return{type:"inline",value:t};if(!t)return{type:"inline",value:null};if(Array.isArray(t))return{type:"inline",value:t};const{type:e="inline"}=t,n=lp(t,["type"]);return Object.assign(Object.assign({},n),{type:e})}var gse=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},Iqe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Lqe(t,e,n){return gse(this,void 0,void 0,function*(){const[r,i]=yield Nqe(t,e,n),{encode:a,scale:o,data:s,tooltip:l}=i;if(Array.isArray(s)===!1)return null;const{channels:u}=e,c=II(Object.entries(a).filter(([,d])=>$n(d)),d=>d.map(([h,p])=>Object.assign({name:h},p)),([d])=>{var h;const p=(h=/([^\d]+)\d*$/.exec(d))===null||h===void 0?void 0:h[1],g=u.find(v=>v.name===p);return g!=null&&g.independent?d:p}),f=u.filter(d=>{const{name:h,required:p}=d;if(c.find(([g])=>g===h))return!0;if(p)throw new Error(`Missing encoding for channel: ${h}.`);return!1}).flatMap(d=>{const{name:h,scale:p,scaleKey:g,range:v,quantitative:m,ordinal:y}=d;return c.filter(([x])=>x.startsWith(h)).map(([x,w],_)=>{const E=w.some(z=>z.visual),S=w.some(z=>z.constant),O=o[x]||{},{independent:A=!1,key:T=g||x,type:I=S?"constant":E?"identity":p}=O,D=Iqe(O,["independent","key","type"]),R=I==="constant",F=R?void 0:v;return{name:x,values:w,scaleKey:A||R?Symbol("independent"):T,scale:Object.assign(Object.assign({type:I,range:F},D),{quantitative:m,ordinal:y})}})});return[i,Object.assign(Object.assign({},e),{index:r,channels:f,tooltip:l})]})}function Rqe(t){const[e]=er("encode",t);return(n,r)=>r===void 0||n===void 0?null:Object.assign(Object.assign({},r),{type:"column",value:e(r)(n),field:Fqe(r)})}function Nqe(t,e,n){return gse(this,void 0,void 0,function*(){const{library:r}=n,[i]=er("transform",r),{preInference:a=[],postInference:o=[]}=e,{transform:s=[]}=t,l=[bqe,pse,xqe,wqe,_qe,Sqe,kqe,Tqe,Aqe,Eqe,...a.map(i),...s.map(i),...o.map(i),Oqe];let u=[],c=t;for(const f of l)[u,c]=yield f(u,c,n);return[u,c]})}function Fqe(t){const{type:e,value:n}=t;return e==="field"&&typeof n=="string"?n:null}var Ql=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},wc=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function jR(t,e,n){var r;return Ql(this,void 0,void 0,function*(){const{library:i}=n,[a]=er("composition",i),[o]=er("interaction",i),s=new Set(Object.keys(i).map(D=>{var R;return(R=/mark\.(.*)/.exec(D))===null||R===void 0?void 0:R[1]}).filter($n)),l=new Set(Object.keys(i).map(D=>{var R;return(R=/component\.(.*)/.exec(D))===null||R===void 0?void 0:R[1]}).filter($n)),u=D=>{const{type:R}=D;if(typeof R=="function"){const{props:F={}}=R,{composite:z=!0}=F;if(z)return"mark"}return typeof R!="string"?R:s.has(R)||l.has(R)?"mark":R},c=D=>u(D)==="mark",f=D=>u(D)==="standardView",d=D=>{const{type:R}=D;return typeof R!="string"?!1:!!l.has(R)},h=D=>{if(f(D))return[D];const R=u(D);return a({type:R,static:d(D)})(D)},p=[],g=new Map,v=new Map,m=[t],y=[];for(;m.length;){const D=m.shift();if(f(D)){const R=v.get(D),[F,z]=R?yse(R,D,i):yield vse(D,n);g.set(F,D),p.push(F);const N=z.flatMap(h).map(L=>koe(L,i));if(m.push(...N),N.every(f)){const L=yield Promise.all(N.map(B=>mse(B,n)));oVe(L);for(let B=0;B<N.length;B++){const $=N[B],G=L[B];v.set($,G)}}}else{const R=c(D)?D:yield _se(D,n),F=h(R);Array.isArray(F)?m.push(...F):typeof F=="function"&&y.push(F())}}n.emitter.emit(xn.BEFORE_PAINT);const b=new Map,x=new Map,w=[];e.selectAll(al(sx)).data(p,D=>D.key).join(D=>D.append("g").attr("className",sx).attr("id",R=>R.key).call(Qj).each(function(R,F,z){YP(R,pt(z),w,n),b.set(R,z)}),D=>D.call(Qj).each(function(R,F,z){YP(R,pt(z),w,n),x.set(R,z)}),D=>D.each(function(R,F,z){const N=z.nameInteraction.values();for(const L of N)L.destroy()}).remove());const _=(D,R,F)=>Array.from(D.entries()).map(([z,N])=>{const L=F||new Map,B=(W,U=Y=>Y)=>L.set(W,U),$=g.get(z),G=jqe(pt(N),$,n);return{view:z,container:N,options:$,setState:B,update:(W,U)=>Ql(this,void 0,void 0,function*(){const q=$I(Array.from(L.values()))($);return yield G(q,W,()=>{wi(U)&&R(D,U,L)})})}}),E=(D=x,R,F)=>{var z;const N=_(D,E,F);for(const L of N){const{options:B,container:$}=L,G=$.nameInteraction;let W=kx(B);R&&(W=W.filter(U=>R.includes(U[0])));for(const U of W){const[Y,q]=U,K=G.get(Y);if(K&&((z=K.destroy)===null||z===void 0||z.call(K)),q){const Q=HP(L.view,Y,q,o)(L,N,n.emitter);G.set(Y,{destroy:Q})}}}},S=_(b,E);for(const D of S){const{options:R}=D,F=new Map;D.container.nameInteraction=F;for(const z of kx(R)){const[N,L]=z;if(L){const $=HP(D.view,N,L,o)(D,S,n.emitter);F.set(N,{destroy:$})}}}E();const{width:O,height:A}=t,T=[];for(const D of y){const R=new Promise(F=>Ql(this,void 0,void 0,function*(){for(const z of D){const N=Object.assign({width:O,height:A},z);yield jR(N,e,n)}F()}));T.push(R)}n.views=p,(r=n.animations)===null||r===void 0||r.forEach(D=>D==null?void 0:D.cancel()),n.animations=w,n.emitter.emit(xn.AFTER_PAINT);const I=w.filter($n).map(eWe).map(D=>D.finished);return Promise.all([...I,...T])})}function Qj(t){t.style("transform",e=>`translate(${e.layout.x}, ${e.layout.y})`)}function zqe(t){const[,e]=er("interaction",t);return n=>{const[r,i]=n;try{return[r,e(r)]}catch{return[r,i.type]}}}function jqe(t,e,n){const{library:r}=n,i=zqe(r),a=l=>l[1]&&l[1].props&&l[1].props.reapplyWhenUpdate,s=kx(e).map(i).filter(a).map(l=>l[0]);return(l,u,c)=>Ql(this,void 0,void 0,function*(){const f=[],[d,h]=yield vse(l,n);YP(d,t,f,n);for(const p of s.filter(g=>g!==u))Bqe(p,t,l,d,n);for(const p of h)jR(p,t,n);return c(),{options:l,view:d}})}function Bqe(t,e,n,r,i){var a;const{library:o}=i,[s]=er("interaction",o),u=e.node().nameInteraction,c=kx(n).find(([g])=>g===t),f=u.get(t);if(!f||((a=f.destroy)===null||a===void 0||a.call(f),!c[1]))return;const d=HP(r,t,c[1],s),h={options:n,view:r,container:e.node(),update:g=>Promise.resolve(g)},p=d(h,[],i.emitter);u.set(t,{destroy:p})}function vse(t,e){return Ql(this,void 0,void 0,function*(){const{library:n}=e,r=yield Vqe(t,e),i=$qe(r);t.interaction=i.interaction,t.coordinate=i.coordinate,t.marks=[...i.marks,...i.components];const a=koe(i,n),o=yield mse(a,e);return yse(o,a,n)})}function $qe(t){const{coordinate:e={},interaction:n={},style:r={},marks:i}=t,a=wc(t,["coordinate","interaction","style","marks"]),o=i.map(d=>d.coordinate||{}),s=i.map(d=>d.interaction||{}),l=i.map(d=>d.viewStyle||{}),u=[...o,e].reduceRight((d,h)=>me(d,h),{}),c=[n,...s].reduce((d,h)=>me(d,h),{}),f=[...l,r].reduce((d,h)=>me(d,h),{});return Object.assign(Object.assign({},a),{marks:i,coordinate:u,interaction:c,style:f})}function Vqe(t,e){return Ql(this,void 0,void 0,function*(){const{library:n}=e,[r,i]=er("mark",n),a=new Set(Object.keys(n).map(h=>{var p;return(p=/component\.(.*)/.exec(h))===null||p===void 0?void 0:p[1]}).filter($n)),{marks:o}=t,s=[],l=[],u=[...o],{width:c,height:f}=iqe(t),d={options:t,width:c,height:f};for(;u.length;){const[h]=u.splice(0,1),p=yield _se(h,e),{type:g=Gh("G2Mark type is required."),key:v}=p;if(a.has(g))l.push(p);else{const{props:m={}}=i(g),{composite:y=!0}=m;if(!y)s.push(p);else{const{data:b}=p,x=Object.assign(Object.assign({},p),{data:b&&(Array.isArray(b)?b:b.value)}),w=yield r(x,d),_=Array.isArray(w)?w:[w];u.unshift(..._.map((E,S)=>Object.assign(Object.assign({},E),{key:`${v}-${S}`})))}}}return Object.assign(Object.assign({},t),{marks:s,components:l})})}function mse(t,e){return Ql(this,void 0,void 0,function*(){const{library:n}=e,[r]=er("theme",n),[,i]=er("mark",n),{theme:a,marks:o,coordinates:s=[]}=t,l=r(wse(a)),u=new Map;for(const f of o){const{type:d}=f,{props:h={}}=i(d),p=yield Lqe(f,h,e);if(p){const[g,v]=p;u.set(g,v)}}const c=Bn(Array.from(u.values()).flatMap(f=>f.channels),({scaleKey:f})=>f);for(const f of c.values()){const d=f.reduce((x,{scale:w})=>me(x,w),{}),{scaleKey:h}=f[0],{values:p}=f[0],g=Array.from(new Set(p.map(x=>x.field).filter($n))),v=me({guide:{title:g.length===0?void 0:g},field:g[0]},d),{name:m}=f[0],y=f.flatMap(({values:x})=>x.map(w=>w.value)),b=Object.assign(Object.assign({},tVe(m,y,v,s,l,n)),{uid:Symbol("scale"),key:h});f.forEach(x=>x.scale=b)}return u})}function HP(t,e,n,r){const i=t.theme,a=typeof e=="string"?i[e]||{}:{};return r(me(a,Object.assign({type:e},n)))}function yse(t,e,n){var r;const[i]=er("mark",n),[a]=er("theme",n),[o]=er("labelTransform",n),{key:s,frame:l=!1,theme:u,clip:c,style:f={},labelTransform:d=[]}=e,h=a(wse(u)),p=Array.from(t.values()),g=iVe(p,e),v=RVe(LVe(iWe(Array.from(g),p,t),e,n)),m=rqe(v,e,h,n),y=PBe(m,e,n),b=l?me({mainLineWidth:1,mainStroke:"#000"},f):f;oqe(use(v),y,m),nqe(v);const x=new Map(Array.from(t.values()).flatMap(O=>{const{channels:A}=O;return A.map(({scale:T})=>[T.uid,Wj(T,n)])}));rVe(t,x);const w={};for(const O of v){const{scales:A=[]}=O,T=[];for(const I of A){const{name:D,uid:R}=I,F=(r=x.get(R))!==null&&r!==void 0?r:Wj(I,n);T.push(F),D==="y"&&F.update(Object.assign(Object.assign({},F.getOptions()),{xScale:w.x})),qj(w,{[D]:F})}O.scaleInstances=T}const _=[],E=new Map;for(const[O,A]of t.entries()){const{children:T,dataDomain:I,modifier:D,key:R,data:F}=O;E.set(R,F);const{index:z,channels:N,tooltip:L}=A,B=Object.fromEntries(N.map(({name:_e,scale:Ee})=>[_e,Ee])),$=pl(B,({uid:_e})=>x.get(_e));qj(w,$);const G=nVe(N,$),W=i(O),[U,Y,q]=Gqe(W(z,$,G,y)),K=I||U.length,J=D?D(Y,K,m):[],Q=_e=>{var Ee,ue;return(ue=(Ee=L.title)===null||Ee===void 0?void 0:Ee[_e])===null||ue===void 0?void 0:ue.value},se=_e=>L.items.map(Ee=>Ee[_e]),de=U.map((_e,Ee)=>{const ue=Object.assign({points:Y[Ee],transform:J[Ee],index:_e,markKey:R,viewKey:s,data:F[_e]},L&&{title:Q(_e),items:se(_e)});for(const[he,ke]of Object.entries(G))ue[he]=ke[_e],q&&(ue[`series${Bo(he)}`]=q[Ee].map(Se=>ke[Se]));return q&&(ue.seriesIndex=q[Ee]),q&&L&&(ue.seriesItems=q[Ee].map(he=>se(he)),ue.seriesTitle=q[Ee].map(he=>Q(he))),ue});A.data=de,A.index=U;const ye=T==null?void 0:T(de,$,m);_.push(...ye||[])}return[{layout:m,theme:h,coordinate:y,markState:t,key:s,clip:c,scale:w,style:b,components:v,data:E,labelTransform:$I(d.map(o))},_]}function YP(t,e,n,r){return Ql(this,void 0,void 0,function*(){const{library:i}=r,{components:a,theme:o,layout:s,markState:l,coordinate:u,key:c,style:f,clip:d,scale:h}=t,{x:p,y:g,width:v,height:m}=s,y=wc(s,["x","y","width","height"]),b=["view","plot","main","content"],x=b.map((L,B)=>B),w=["a","margin","padding","inset"],_=b.map(L=>eQ(Object.assign({},o.view,f),L)),E=w.map(L=>Fe(y,L)),S=L=>L.style("x",B=>D[B].x).style("y",B=>D[B].y).style("width",B=>D[B].width).style("height",B=>D[B].height).each(function(B,$,G){aWe(pt(G),_[B])});let O=0,A=0,T=v,I=m;const D=x.map(L=>{const B=E[L],{left:$=0,top:G=0,bottom:W=0,right:U=0}=B;return O+=$,A+=G,T-=$+U,I-=G+W,{x:O,y:A,width:T,height:I}});e.selectAll(al(Jz)).data(x.filter(L=>$n(_[L])),L=>b[L]).join(L=>L.append("rect").attr("className",Jz).style("zIndex",-2).call(S),L=>L.call(S),L=>L.remove());const R=Xqe(l),F=R?{duration:R[1]}:!1;for(const[,L]of PI(a,B=>`${B.type}-${B.position}`))L.forEach((B,$)=>B.index=$);const z=e.selectAll(al(Kz)).data(a,L=>`${L.type}-${L.position}-${L.index}`).join(L=>L.append("g").style("zIndex",({zIndex:B})=>B||-1).attr("className",Kz).append(B=>Kj(me({animate:F,scale:h},B),u,o,i,l)),L=>L.transition(function(B,$,G){const{preserve:W=!1}=B;if(W)return;const U=Kj(me({animate:F,scale:h},B),u,o,i,l),{attributes:Y}=U,[q]=G.childNodes;return q.update(Y,!1)})).transitions();n.push(...z.flat().filter($n));const N=e.selectAll(al(lx)).data([s],()=>c).join(L=>L.append("rect").style("zIndex",0).style("fill","transparent").attr("className",lx).call(eB).call(tB,Array.from(l.keys())).call(nB,d),L=>L.call(tB,Array.from(l.keys())).call(B=>R?rWe(B,R):eB(B)).call(nB,d)).transitions();n.push(...N.flat());for(const[L,B]of l.entries()){const{data:$}=B,{key:G,class:W,type:U}=L,Y=e.select(`#${G}`),q=Jqe(L,B,t,r),K=Qqe(L,B,t,i),J=tWe(L,B,t,i),Q=nWe(L,B,t,i),se=Zqe(e,Y,W,"element"),de=Y.selectAll(al(Gs)).selectFacetAll(se).data($,ye=>ye.key,ye=>ye.groupKey).join(ye=>ye.append(q).attr("className",Gs).attr("markType",U).transition(function(_e,Ee,ue){return K(_e,[ue])}),ye=>ye.call(_e=>{const Ee=_e.parent(),ue=gTe(he=>{const[ke,Se]=he.getBounds().min;return[ke,Se]});_e.transition(function(he,ke,Se){Kqe(Se,Ee,ue);const Me=q(he,ke),Be=J(he,[Se],[Me]);return Be!=null&&Be.length||(Se.nodeName===Me.nodeName&&Me.nodeName!=="g"?qI(Se,Me):(Se.parentNode.replaceChild(Me,Se),Me.className=Gs,Me.markType=U,Me.__data__=Se.__data__)),Be}).attr("markType",U).attr("className",Gs)}),ye=>ye.each(function(_e,Ee,ue){ue.__removed__=!0}).transition(function(_e,Ee,ue){return Q(_e,[ue])}).remove(),ye=>ye.append(q).attr("className",Gs).attr("markType",U).transition(function(_e,Ee,ue){const{__fromElements__:he}=ue,ke=J(_e,he,[ue]);return new Yb(he,null,ue.parentNode).transition(ke).remove(),ke}),ye=>ye.transition(function(_e,Ee,ue){const ke=new Yb([],ue.__toData__,ue.parentNode).append(q).attr("className",Gs).attr("markType",U).nodes();return J(_e,[ue],ke)}).remove()).transitions();n.push(...de.flat())}qqe(t,e,n,i,r)})}function qqe(t,e,n,r,i){const[a]=er("labelTransform",r),{markState:o,labelTransform:s}=t,l=e.select(al(EP)).node(),u=new Map,c=new Map,f=Array.from(o.entries()).flatMap(([m,y])=>{const{labels:b=[],key:x}=m,w=Uqe(m,y,t,r,i),_=e.select(`#${x}`).selectAll(al(Gs)).nodes().filter(E=>!E.__removed__);return b.flatMap((E,S)=>{const O=wc(E,["transform"]);return _.flatMap(A=>{const T=Wqe(O,S,A);return T.forEach(I=>{u.set(I,D=>w(Object.assign(Object.assign({},D),{element:A}))),c.set(I,E)}),T})})}),d=pt(l).selectAll(al(OP)).data(f,m=>m.key).join(m=>m.append(y=>u.get(y)(y)).attr("className",OP),m=>m.each(function(y,b,x){const _=u.get(y)(y);qI(x,_)}),m=>m.remove()).nodes(),h=Bn(d,m=>c.get(m.__data__)),{coordinate:p,layout:g}=t,v={canvas:i.canvas,coordinate:p,layout:g};for(const[m,y]of h){const{transform:b=[]}=m;$I(b.map(a))(y,v)}s&&s(d,v)}function Wqe(t,e,n){const{seriesIndex:r,seriesKey:i,points:a,key:o,index:s}=n.__data__,l=Yqe(n);if(!r)return[Object.assign(Object.assign({},t),{key:`${o}-${e}`,bounds:l,index:s,points:a,dependentElement:n})];const u=Hqe(t),c=r.map((f,d)=>Object.assign(Object.assign({},t),{key:`${i[d]}-${e}`,bounds:[a[d]],index:f,points:a,dependentElement:n}));return u?u(c):c}function Gqe([t,e,n]){if(n)return[t,e,n];const r=[],i=[];for(let a=0;a<t.length;a++){const o=t[a],s=e[a];s.every(([l,u])=>$n(l)&&$n(u))&&(r.push(o),i.push(s))}return[r,i]}function Hqe(t){const{selector:e}=t;if(!e)return null;if(typeof e=="function")return e;if(e==="first")return n=>[n[0]];if(e==="last")return n=>[n[n.length-1]];throw new Error(`Unknown selector: ${e}`)}function Yqe(t){const e=t.cloneNode(!0),n=t.getAnimations();e.style.visibility="hidden",n.forEach(o=>{const s=o.effect.getKeyframes();e.attr(s[s.length-1])}),t.parentNode.appendChild(e);const r=e.getLocalBounds();e.destroy();const{min:i,max:a}=r;return[i,a]}function Uqe(t,e,n,r,i){const[a]=er("shape",r),{data:o,encode:s}=t,{data:l,defaultLabelShape:u}=e,c=l.map(g=>g.points),f=pl(s,g=>g.value),{theme:d,coordinate:h}=n,p=Object.assign(Object.assign({},i),{document:Ooe(i),theme:d,coordinate:h});return g=>{const{index:v,points:m}=g,y=o[v],{formatter:b=B=>`${B}`,transform:x,style:w,render:_,selector:E,element:S}=g,O=wc(g,["formatter","transform","style","render","selector","element"]),A=pl(Object.assign(Object.assign({},O),w),B=>bse(B,y,v,o,{channel:f,element:S})),{shape:T=u,text:I}=A,D=wc(A,["shape","text"]),R=typeof b=="string"?Rc(b):b,F=Object.assign(Object.assign({},D),{text:R(I,y,v,o),datum:y}),z=Object.assign({type:`label.${T}`,render:_},D),N=a(z,p),L=xse(d,"label",T,"label");return N(m,F,L,c)}}function bse(t,e,n,r,i){return typeof t=="function"?t(e,n,r,i):typeof t!="string"?t:Hh(e)&&e[t]!==void 0?e[t]:t}function Xqe(t){let e=-1/0,n=1/0;for(const[r,i]of t){const{animate:a={}}=r,{data:o}=i,{enter:s={},update:l={},exit:u={}}=a,{type:c,duration:f=300,delay:d=0}=l,{type:h,duration:p=300,delay:g=0}=s,{type:v,duration:m=300,delay:y=0}=u;for(const b of o){const{updateType:x=c,updateDuration:w=f,updateDelay:_=d,enterType:E=h,enterDuration:S=p,enterDelay:O=g,exitDuration:A=m,exitDelay:T=y,exitType:I=v}=b;(x===void 0||x)&&(e=Math.max(e,w+_),n=Math.min(n,_)),(I===void 0||I)&&(e=Math.max(e,A+T),n=Math.min(n,T)),(E===void 0||E)&&(e=Math.max(e,S+O),n=Math.min(n,O))}}return e===-1/0?null:[n,e-n]}function Zqe(t,e,n,r){return t.node().parentElement.findAll(a=>a.style.facet!==void 0&&a.style.facet===n&&a!==e.node()).flatMap(a=>a.getElementsByClassName(r))}function Kqe(t,e,n){if(!t.__facet__)return;const r=t.parentNode.parentNode,i=e.parentNode,[a,o]=n(r),[s,l]=n(i),u=`translate(${a-s}, ${o-l})`;vTe(t,u),e.append(t)}function Jqe(t,e,n,r){const{library:i}=r,[a]=er("shape",i),{data:o,encode:s}=t,{defaultShape:l,data:u,shape:c}=e,f=pl(s,y=>y.value),d=u.map(y=>y.points),{theme:h,coordinate:p}=n,{type:g,style:v={}}=t,m=Object.assign(Object.assign({},r),{document:Ooe(r),coordinate:p,theme:h});return y=>{const{shape:b=l}=v,{shape:x=b,points:w,seriesIndex:_,index:E}=y,S=wc(y,["shape","points","seriesIndex","index"]),O=Object.assign(Object.assign({},S),{index:E}),A=_?_.map(F=>o[F]):o[E],T=_||E,I=pl(v,F=>bse(F,A,T,o,{channel:f})),D=c[x]?c[x](I,m):a(Object.assign(Object.assign({},I),{type:Sse(t,x)}),m),R=xse(h,g,x,l);return D(w,O,R,d)}}function xse(t,e,n,r){if(typeof e!="string")return;const{color:i}=t,a=t[e]||{},o=a[n]||a[r];return Object.assign({color:i},o)}function BR(t,e,n,r,i){var a,o;const[,s]=er("shape",i),[l]=er("animation",i),{defaultShape:u,shape:c}=n,{theme:f,coordinate:d}=r,p=`default${Bo(t)}Animation`,{[p]:g}=((a=c[u])===null||a===void 0?void 0:a.props)||s(Sse(e,u)).props,{[t]:v={}}=f,m=((o=e.animate)===null||o===void 0?void 0:o[t])||{},y={coordinate:d};return(b,x,w)=>{const{[`${t}Type`]:_,[`${t}Delay`]:E,[`${t}Duration`]:S,[`${t}Easing`]:O}=b,A=Object.assign({type:_||g},m);if(!A.type)return null;const D=l(A,y)(x,w,me(v,{delay:E,duration:S,easing:O}));let R=[];return Array.isArray(D)?R=D:R=[D],R.filter(Boolean)}}function Qqe(t,e,n,r){return BR("enter",t,e,n,r)}function eWe(t){return t.finished.then(()=>{t.cancel()}),t}function tWe(t,e,n,r){return BR("update",t,e,n,r)}function nWe(t,e,n,r){return BR("exit",t,e,n,r)}function wse(t={}){if(typeof t=="string")return{type:t};const{type:e="light"}=t,n=wc(t,["type"]);return Object.assign(Object.assign({},n),{type:e})}function kx(t){const e={event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},{interaction:n={}}=t;return Object.entries(me(e,n)).reverse()}function _se(t,e){return Ql(this,void 0,void 0,function*(){const{data:n}=t,r=wc(t,["data"]);if(n==null)return t;const[,{data:i}]=yield pse([],{data:n},e);return Object.assign({data:i},r)})}function eB(t){t.style("transform",e=>`translate(${e.paddingLeft+e.marginLeft}, ${e.paddingTop+e.marginTop})`).style("width",e=>e.innerWidth).style("height",e=>e.innerHeight)}function rWe(t,e){const[n,r]=e;t.transition(function(i,a,o){const{transform:s,width:l,height:u}=o.style,{paddingLeft:c,paddingTop:f,innerWidth:d,innerHeight:h,marginLeft:p,marginTop:g}=i,v=[{transform:s,width:l,height:u},{transform:`translate(${c+p}, ${f+g})`,width:d,height:h}];return o.animate(v,{delay:n,duration:r,fill:"both"})})}function Sse(t,e){const{type:n}=t;return typeof e=="string"?`${n}.${e}`:e}function tB(t,e){const n=a=>a.class!==void 0?`${a.class}`:"";t.nodes().length===0||(t.selectAll(al(Zz)).data(e,a=>a.key).join(a=>a.append("g").attr("className",Zz).attr("id",o=>o.key).style("facet",n).style("fill","transparent").style("zIndex",o=>{var s;return(s=o.zIndex)!==null&&s!==void 0?s:0}),a=>a.style("facet",n).style("fill","transparent").style("zIndex",o=>{var s;return(s=o.zIndex)!==null&&s!==void 0?s:0}),a=>a.remove()),t.select(al(EP)).node())||t.append("g").attr("className",EP).style("zIndex",0)}function al(...t){return t.map(e=>`.${e}`).join("")}function nB(t,e){t.node()&&t.style("clipPath",n=>{if(!e)return null;const{paddingTop:r,paddingLeft:i,marginLeft:a,marginTop:o,innerWidth:s,innerHeight:l}=n;return new Vr({style:{x:i+a,y:r+o,width:s,height:l}})})}function iWe(t,e,n){var r;for(const[u]of n.entries())if(u.type==="cell")return t.filter(c=>c.name!=="shape");if(e.length!==1||t.some(u=>u.name==="shape"))return t;const{defaultShape:i}=e[0];if(!["point","line","rect","hollow"].includes(i))return t;const o={point:"point",line:"hyphen",rect:"square",hollow:"hollow"},l={field:((r=t.find(u=>u.name==="color"))===null||r===void 0?void 0:r.field)||null,name:"shape",type:"constant",domain:[],range:[o[i]]};return[...t,l]}function aWe(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}function oWe(...t){return e=>t.reduce((n,r)=>r(n),e)}function sWe(t){const{style:e,scale:n,type:r}=t,i={},a=qt(e,"columnWidthRatio");return a&&r==="interval"&&(i.x=Object.assign(Object.assign({},n==null?void 0:n.x),{padding:1-a})),Object.assign(Object.assign({},t),{scale:Object.assign(Object.assign({},n),i)})}function Ese(t){const e=lWe(t);return e.children&&Array.isArray(e.children)&&(e.children=e.children.map(n=>Ese(n))),e}function lWe(t){return oWe(sWe)(t)}function uWe(t){const e=me({},t),n=new Map([[e,null]]),r=new Map([[null,-1]]),i=[e];for(;i.length;){const a=i.shift();if(a.key===void 0){const s=n.get(a),l=r.get(a),u=s===null?"0":`${s.key}-${l}`;a.key=u}const{children:o=[]}=a;if(Array.isArray(o))for(let s=0;s<o.length;s++){const l=me({},o[s]);o[s]=l,n.set(l,a),r.set(l,s),i.push(l)}}return e}function cWe(t,e){const n=new Hf;return n.registerPlugin(new sR),new V0({width:t,height:e,container:document.createElement("div"),renderer:n})}function fWe(t,e={},n=()=>{},r=i=>{throw i}){const i=R1(t),{width:a=640,height:o=480,depth:s=0}=i,l=Ese(i),u=uWe(l),{canvas:c=cWe(a,o),emitter:f=new kp,library:d}=e;e.canvas=c,e.emitter=f;const{width:h,height:p}=c.getConfig();(h!==a||p!==o)&&c.resize(a,o),f.emit(xn.BEFORE_RENDER);const g=pt(c.document.documentElement);return c.ready.then(()=>jR(Object.assign(Object.assign({},u),{width:a,height:o,depth:s}),g,e)).then(()=>{if(s){const[v,m]=c.document.documentElement.getPosition();c.document.documentElement.setPosition(v,m,-s/2)}c.requestAnimationFrame(()=>{c.requestAnimationFrame(()=>{f.emit(xn.AFTER_RENDER),n==null||n()})})}).catch(v=>{r==null||r(v)}),hWe(c.getConfig().container)}function rB(t,e={},n=!1){const{canvas:r,emitter:i}=e;r&&(dWe(r),n?r.destroy():r.destroyChildren()),i.off()}function dWe(t){const e=t.getRoot().querySelectorAll(`.${sx}`);e==null||e.forEach(n=>{const{nameInteraction:r=new Map}=n;(r==null?void 0:r.size)>0&&Array.from(r==null?void 0:r.values()).forEach(i=>{i==null||i.destroy()})})}function hWe(t){return typeof t=="string"?document.getElementById(t):t}function ov(t,e){if(e(t))return!0;if(t.tagName==="g"){const{childNodes:n=[]}=t;for(const r of n)if(ov(r,e))return!0}return!1}const pWe={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function gWe(t,e){let n;return ov(t,r=>{var i;return r.tagName!=="g"&&((i=r.style)===null||i===void 0?void 0:i[e])!==void 0?(n=r.style[e],!0):!1}),n??pWe[e]}function $R(t,e,n,r){t.style[e]=n,t.children.forEach(i=>$R(i,e,n))}function VR(t){$R(t,"visibility","hidden")}function dw(t){$R(t,"visibility","visible")}var r0=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function _c(t){return pt(t).selectAll(`.${Gs}`).nodes().filter(e=>!e.__removed__)}function Ose(t,e){return UP(t,e).flatMap(({container:n})=>_c(n))}function UP(t,e){return e.filter(n=>n!==t&&n.options.parentKey===t.options.key)}function Is(t){return pt(t).select(`.${lx}`).node()}function kse(t){if(t.tagName==="g")return t.getRenderBounds();const e=t.getGeometryBounds(),n=new zn;return n.setFromTransformedAABB(e,t.getWorldTransform()),n}function Xf(t,e){const{offsetX:n,offsetY:r}=e,i=kse(t),{min:[a,o],max:[s,l]}=i,u=n<a||n>s,c=r<o||r>l;return u||c?null:[n-a,r-o]}function QE(t,e){const{offsetX:n,offsetY:r}=e,[i,a,o,s]=vWe(t);return[Math.min(o,Math.max(i,n))-i,Math.min(s,Math.max(a,r))-a]}function vWe(t){const e=t.getRenderBounds(),{min:[n,r],max:[i,a]}=e;return[n,r,i,a]}function Ase(t){return e=>e.__data__.color}function tm(t){return e=>e.__data__.x}function Zf(t){const e=Array.isArray(t)?t:[t],n=new Map(e.flatMap(r=>Array.from(r.markState.keys()).map(a=>[Ax(r.key,a.key),a.data])));return r=>{const{index:i,markKey:a,viewKey:o}=r.__data__;return n.get(Ax(o,a))[i]}}const iB={selected:3,unselected:3,active:2,inactive:2,default:1},mWe={selection:["selected","unselected"],highlight:["active","inactive"]},Tse=(t,e,n)=>{ov(t,r=>{"setAttribute"in r&&typeof r.setAttribute=="function"&&r.setAttribute(e,n)})};function Mse(t,e){return e.forEach(n=>{const r=n.__interactionStyle__;r?n.__interactionStyle__=Object.assign(Object.assign({},r),t):n.__interactionStyle__=t}),(n=(i,a)=>i,r=Tse)=>lc(void 0,n,r)}function lc(t,e=(r,i)=>r,n=Tse){const r="__states__",i="__ordinal__",a=h=>iB[h]||iB.default,o=h=>{var p;return(p=Object.entries(mWe).find(([g,v])=>v.includes(h)))===null||p===void 0?void 0:p[0]},s=h=>{var p;const{[r]:g=[],[i]:v={}}=h,m=[...g].sort((x,w)=>a(w)-a(x)),y=new Map;for(const x of m){const w=((p=t??h.__interactionStyle__)===null||p===void 0?void 0:p[x])||{};for(const[_,E]of Object.entries(w))y.has(_)||y.set(_,E)}const b=Object.assign({},v);for(const[x,w]of y.entries())b[x]=w;if(Object.keys(b).length!==0){for(const[x,w]of Object.entries(b)){const _=gWe(h,x),E=e(w,h);n(h,x,E),x in v||(v[x]=_)}h[i]=v}},l=h=>{h[r]||(h[r]=[])};return{setState:(h,...p)=>{l(h),h[r]=[...p],s(h)},updateState:(h,...p)=>{l(h);const g=h[r],v=new Set(p.map(y=>o(y)).filter(y=>y!==void 0)),m=g.filter(y=>!v.has(o(y)));h[r]=[...m,...p],s(h)},removeState:(h,...p)=>{l(h);for(const g of p){const v=h[r].indexOf(g);v!==-1&&h[r].splice(v,1)}s(h)},hasState:(h,p)=>(l(h),h[r].indexOf(p)!==-1)}}function yWe(t){return t===void 0?!0:typeof t!="object"?!1:Object.keys(t).length===0}function Ax(t,e){return`${t},${e}`}function up(t,e){const r=(Array.isArray(t)?t:[t]).flatMap(a=>a.marks.map(o=>[Ax(a.key,o.key),o.state])),i={};for(const a of e){const[o,s]=Array.isArray(a)?a:[a,{}];i[o]=r.reduce((l,u)=>{const[c,f={}]=u,d=yWe(f[o])?s:f[o];for(const[h,p]of Object.entries(d)){const g=l[h],v=(m,y,b,x)=>{const w=Ax(x.__data__.viewKey,x.__data__.markKey);return c!==w?g==null?void 0:g(m,y,b,x):typeof p!="function"?p:p(m,y,b,x)};l[h]=v}return l},{})}return i}function nm(t,e){const n=new Map(t.map((i,a)=>[i,a])),r=e?t.map(e):t;return(i,a)=>{if(typeof i!="function")return i;const o=n.get(a),s=e?e(a):a;return i(s,o,r,a)}}function Cse(t){var{link:e=!1,valueof:n=(c,f)=>c,coordinate:r}=t,i=r0(t,["link","valueof","coordinate"]);const a="element-link";if(!e)return[()=>{},()=>{}];const o=c=>c.__data__.points,s=(c,f)=>{const[,d,h]=c,[p,,,g]=f;return[d,p,g,h]};return[c=>{var f;if(c.length<=1)return;const d=bs(c,(h,p)=>{const{x:g}=h.__data__,{x:v}=p.__data__;return g-v});for(let h=1;h<d.length;h++){const p=Ho(),g=d[h-1],v=d[h],[m,y,b,x]=s(o(g),o(v));p.moveTo(...m),p.lineTo(...y),p.lineTo(...b),p.lineTo(...x),p.closePath();const w=pl(i,O=>n(O,g)),{fill:_=g.getAttribute("fill")}=w,E=r0(w,["fill"]),S=new yr({className:a,style:Object.assign({d:p.toString(),fill:_,zIndex:-2},E)});(f=g.link)===null||f===void 0||f.remove(),g.parentNode.appendChild(S),g.link=S}},c=>{var f;(f=c.link)===null||f===void 0||f.remove(),c.link=null}]}function Pse(t,e,n){const r=i=>{const{transform:a}=t.style;return a?`${a} ${i}`:i};if(On(n)){const{points:i}=t.__data__,[a,o]=Hn(n)?j2(i):i,s=n.getCenter(),l=Pr(a,s),u=Pr(o,s),c=$o(l),f=NQ(l,u),d=c+f/2,h=e*Math.cos(d),p=e*Math.sin(d);return r(`translate(${h}, ${p})`)}return Hn(n)?r(`translate(${e}, 0)`):r(`translate(0, ${-e})`)}function Dse(t){var{document:e,background:n,scale:r,coordinate:i,valueof:a}=t,o=r0(t,["document","background","scale","coordinate","valueof"]);const s="element-background";if(!n)return[()=>{},()=>{}];const l=(m,y,b)=>{const x=m.invert(y),w=y+m.getBandWidth(x)/2,_=m.getStep(x)/2,E=_*b;return[w-_+E,w+_-E]},u=(m,y)=>{const{x:b}=r;if(!Kg(b))return[0,1];const{__data__:x}=m,{x:w}=x,[_,E]=l(b,w,y);return[_,E]},c=(m,y)=>{const{y:b}=r;if(!Kg(b))return[0,1];const{__data__:x}=m,{y:w}=x,[_,E]=l(b,w,y);return[_,E]},f=(m,y)=>{const{padding:b}=y,[x,w]=u(m,b),[_,E]=c(m,b),S=[[x,_],[w,_],[w,E],[x,E]].map(I=>i.map(I)),{__data__:O}=m,{y:A,y1:T}=O;return ste(e,S,{y:A,y1:T},i,y)},d=(m,y)=>{const{transform:b="scale(1.2, 1.2)",transformOrigin:x="center center",stroke:w=""}=y,_=r0(y,["transform","transformOrigin","stroke"]),E=Object.assign({transform:b,transformOrigin:x,stroke:w},_),S=m.cloneNode(!0);for(const[O,A]of Object.entries(E))S.style[O]=A;return S},h=()=>{const{x:m,y}=r;return[m,y].some(Kg)};return[m=>{m.background&&m.background.remove();const y=pl(o,I=>a(I,m)),{fill:b="#CCD6EC",fillOpacity:x=.3,zIndex:w=-2,padding:_=.001,lineWidth:E=0}=y,S=r0(y,["fill","fillOpacity","zIndex","padding","lineWidth"]),O=Object.assign(Object.assign({},S),{fill:b,fillOpacity:x,zIndex:w,padding:_,lineWidth:E}),T=(h()?f:d)(m,O);T.className=s,m.parentNode.parentNode.appendChild(T),m.background=T},m=>{var y;(y=m.background)===null||y===void 0||y.remove(),m.background=null},m=>m.className===s]}function Ru(t,e){const r=t.getRootNode().defaultView.getContextService().getDomElement();r!=null&&r.style&&(t.cursor=r.style.cursor,r.style.cursor=e)}function bWe(t){Ru(t,t.cursor)}function qR(t,e,n){return t.find(r=>Object.entries(e).every(([i,a])=>n(r)[i]===a))}function Tx(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function sg(t,e=!1){const n=zK(t,r=>!!r).map((r,i)=>[i===0?"M":"L",...r]);return e&&n.push(["Z"]),n}function Ise(t){return t.querySelectorAll(".element")}function xWe(t,e,n=0){const r=[["M",...e[1]]],i=Tx(t,e[1]),a=Tx(t,e[0]);return i===0?r.push(["L",...e[3]],["A",a,a,0,n,1,...e[0]],["Z"]):r.push(["A",i,i,0,n,0,...e[2]],["L",...e[3]],["A",a,a,0,n,1,...e[0]],["Z"]),r}function rm(t,e){if(e(t))return t;let n=t.parent;for(;n&&!e(n);)n=n.parent;return n}const WR=["interval","point","density"];function Lse({elementsof:t,root:e,coordinate:n,scale:r,validFindByXMarks:i=WR}){var a,o;let s=t(e);const l=c=>i.includes(c.markType);if(s.find(l)){s=s.filter(l);const c=r.x,f=r.series,d=(o=(a=c==null?void 0:c.getBandWidth)===null||a===void 0?void 0:a.call(c))!==null&&o!==void 0?o:0,h=f?p=>{const g=Math.round(1/f.valueBandWidth);return p.__data__.x+p.__data__.series*d+d/(g*2)}:p=>p.__data__.x+d/2;return s.sort((p,g)=>h(p)-h(g)),p=>{const g=Xf(e,p);if(!g)return;const[v]=n.invert(g),m=Zl(h).center,y=m(s,v);return s[y]}}return c=>{const{target:f}=c;return rm(f,d=>d.classList?d.classList.includes("element"):!1)}}var wWe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function _We(t,{elements:e,datum:n,groupKey:r=p=>p,regionGroupKey:i=p=>p,link:a=!1,background:o=!1,delay:s=60,scale:l,coordinate:u,emitter:c,state:f={},region:d=!1,regionEleFilter:h=p=>WR.includes(p.markType)}){var p,g;const v=(p=e(t))!==null&&p!==void 0?p:[],m=d?v.filter(h):v,y=new Set(m),b=d?i:r,x=Bn(m,b),w=Lse({elementsof:e,root:t,coordinate:u,scale:l}),_=nm(m,n),[E,S]=Cse(Object.assign({elements:m,valueof:_,link:a,coordinate:u},Fe(f.active,"link"))),[O,A,T]=Dse(Object.assign({document:t.ownerDocument,scale:l,coordinate:u,background:o,valueof:_},Fe(f.active,"background"))),I=me(f,{active:Object.assign({},((g=f.active)===null||g===void 0?void 0:g.offset)&&{transform:(...q)=>{const K=f.active.offset(...q),[,J]=q;return Pse(m[J],K,u)}})}),D=Mse(I,m),{updateState:R,removeState:F,hasState:z}=D(_);let N;const L=q=>{const{nativeEvent:K=!0}=q;let J=q.target;if(d&&(J=w(q)),!y.has(J))return;N&&clearTimeout(N);const Q=b(J),se=x.get(Q),de=new Set(se);for(const ye of m)de.has(ye)?z(ye,"active")||R(ye,"active"):(R(ye,"inactive"),S(ye)),ye!==J&&A(ye);O(J),E(se),K&&c.emit("element:highlight",{nativeEvent:K,data:{data:n(J),group:se.map(n)}})},B=()=>{N&&clearTimeout(N),N=setTimeout(()=>{$(),N=null},s)},$=(q=!0)=>{for(const K of m)F(K,"active","inactive"),A(K),S(K);q&&c.emit("element:unhighlight",{nativeEvent:q})},G=q=>{let K=q.target;if(d&&(K=w(q)),!K){s>0?B():$();return}o&&!T(K)||!o&&!y.has(K)||(s>0?B():$())},W=()=>{$()};t.addEventListener("pointerover",L),t.addEventListener("pointermove",L),t.addEventListener("pointerout",G),t.addEventListener("pointerleave",W);const U=q=>{const{nativeEvent:K}=q;K||$(!1)},Y=q=>{const{nativeEvent:K}=q;if(K)return;const{data:J}=q.data,Q=qR(m,J,n);Q&&L({target:Q,nativeEvent:!1})};return c.on("element:highlight",Y),c.on("element:unhighlight",U),()=>{t.removeEventListener("pointerover",L),t.removeEventListener("pointermove",L),t.removeEventListener("pointerout",G),t.removeEventListener("pointerleave",W),c.off("element:highlight",Y),c.off("element:unhighlight",U);for(const q of m)A(q),S(q)}}function hw(t){var{delay:e,createGroup:n,createRegionGroup:r,background:i=!1,link:a=!1}=t,o=wWe(t,["delay","createGroup","createRegionGroup","background","link"]);return(s,l,u)=>{const{container:c,view:f,options:d}=s,{scale:h,coordinate:p}=f,g=Is(c);return _We(g,Object.assign({elements:_c,datum:Zf(f),groupKey:n?n(f):void 0,regionGroupKey:r?r(f):tm(),coordinate:p,scale:h,state:up(d,[["active",i?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:i,link:a,delay:e,emitter:u},o))}}hw.props={reapplyWhenUpdate:!0};function Rse(t){return hw(Object.assign(Object.assign({},t),{createGroup:tm}))}Rse.props={reapplyWhenUpdate:!0};function Nse(t){return hw(Object.assign(Object.assign({},t),{createGroup:Ase}))}Nse.props={reapplyWhenUpdate:!0};var SWe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function EWe(t,{elements:e,datum:n,groupKey:r=g=>g,regionGroupKey:i=g=>g,link:a=!1,single:o=!1,multipleSelectHotkey:s,coordinate:l,background:u=!1,scale:c,emitter:f,state:d={},region:h=!1,regionEleFilter:p=g=>WR.includes(g.markType)}){var g;const v=e(t),m=new Set(v),y=Lse({elementsof:e,root:t,coordinate:l,scale:c}),b=Bn(v,r),x=Bn(v,i),w=nm(v,n),[_,E]=Cse(Object.assign({link:a,elements:v,valueof:w,coordinate:l},Fe(d.selected,"link"))),[S,O]=Dse(Object.assign({document:t.ownerDocument,background:u,coordinate:l,scale:c,valueof:w},Fe(d.selected,"background"))),A=me(d,{selected:Object.assign({},((g=d.selected)===null||g===void 0?void 0:g.offset)&&{transform:(...Q)=>{const se=d.selected.offset(...Q),[,de]=Q;return Pse(v[de],se,l)}})}),T=Mse(A,v),{updateState:I,removeState:D,hasState:R}=T(w);let F=!o,z=null;const N=(Q=!0)=>{for(const se of v)D(se,"selected","unselected"),E(se),O(se);Q&&f.emit("element:unselect",{nativeEvent:!0})},L=({event:Q,element:se,nativeEvent:de=!0,filter:ye=ue=>!0,groupBy:_e=r,groupMap:Ee=b})=>{const ue=v.filter(ye);if(R(se,"selected"))N();else{const he=_e(se),ke=Ee.get(he),Se=new Set(ke);for(const Me of ue)Se.has(Me)?I(Me,"selected"):(I(Me,"unselected"),E(Me)),Me!==se&&O(Me);if(_(ke),S(se),!de)return;f.emit("element:select",Object.assign(Object.assign({},Q),{nativeEvent:de,data:{data:[n(se),...ke.map(n)]}}))}},B=({event:Q,element:se,nativeEvent:de=!0,filter:ye=ue=>!0,groupBy:_e=r,groupMap:Ee=b})=>{const ue=_e(se),he=Ee.get(ue),ke=new Set(he),Se=v.filter(ye);if(R(se,"selected")){if(!v.some(Be=>!ke.has(Be)&&R(Be,"selected")))return N();for(const Be of he)I(Be,"unselected"),E(Be),O(Be)}else{const Me=he.some(Be=>R(Be,"selected"));for(const Be of Se)ke.has(Be)?I(Be,"selected"):R(Be,"selected")||I(Be,"unselected");!Me&&a&&_(he),S(se)}de&&f.emit("element:select",Object.assign(Object.assign({},Q),{nativeEvent:de,data:{data:v.filter(Me=>R(Me,"selected")).map(n)}}))},$=Q=>{if(m.has(Q))return!0;for(const se of m)if(ov(se,ye=>ye===Q))return!0;return!1},G=Q=>{if(m.has(Q))return Q;for(const se of m){let de=null;if(ov(se,ye=>{ye===Q&&(de=se)}),de)return de}return Q},W=Q=>{const{target:se,nativeEvent:de=!0}=Q,ye=F?B:L;let _e=se;const Ee=$(se);return!h||Ee?Ee?ye({event:Q,element:G(_e),nativeEvent:de,groupBy:r}):N():(_e=y(Q),m.has(_e)?ye({event:Q,element:_e,nativeEvent:de,filter:p,groupBy:i,groupMap:x}):N())},U=Array.isArray(s)?s:[s],Y=Q=>{U.includes(Q.code)&&!z&&(z=Q.code,F=!0)},q=Q=>{Q.code===z&&(z=null,F=!1)};t.addEventListener("click",W),s&&(F=!1,document.addEventListener("keydown",Y),document.addEventListener("keyup",q));const K=Q=>{const{nativeEvent:se,data:de}=Q;if(se)return;const ye=F?de.data:de.data.slice(0,1);for(const _e of ye){const Ee=qR(v,_e,n);W({target:Ee,nativeEvent:!1})}},J=()=>{N(!1)};return f.on("element:select",K),f.on("element:unselect",J),()=>{for(const Q of v)E(Q);t.removeEventListener("click",W),s&&(document.removeEventListener("keydown",Y),document.removeEventListener("keyup",q)),f.off("element:select",K),f.off("element:unselect",J)}}function pw(t){var{createGroup:e,createRegionGroup:n,background:r=!1,link:i=!1}=t,a=SWe(t,["createGroup","createRegionGroup","background","link"]);return(o,s,l)=>{const{container:u,view:c,options:f}=o,{coordinate:d,scale:h}=c,p=Is(u);return EWe(p,Object.assign({elements:_c,datum:Zf(c),groupKey:e?e(c):void 0,regionGroupKey:n?n(c):tm(),coordinate:d,scale:h,state:up(f,[["selected",r?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:r,link:i,emitter:l},a))}}pw.props={reapplyWhenUpdate:!0};function Fse(t){return pw(Object.assign(Object.assign({},t),{createGroup:tm}))}Fse.props={reapplyWhenUpdate:!0};function zse(t){return pw(Object.assign(Object.assign({},t),{createGroup:Ase}))}zse.props={reapplyWhenUpdate:!0};var OWe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},kWe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function AWe(t){const{transform:e=[]}=t,n=e.find(i=>i.type==="normalizeY");if(n)return n;const r={type:"normalizeY"};return e.push(r),t.transform=e,r}function TWe(t,e,n){const[r]=Array.from(t.entries()).filter(([i])=>i.type===e).map(([i])=>{const{encode:a}=i,o=s=>{const l=a[s];return[s,l?l.value:void 0]};return Object.fromEntries(n.map(o))});return r}function jse(t){var{wait:e=20,leading:n,trailing:r=!1,labelFormatter:i=o=>`${o}`}=t,a=kWe(t,["wait","leading","trailing","labelFormatter"]);return o=>{const{view:s,container:l,update:u,setState:c}=o,{markState:f,scale:d,coordinate:h}=s,p=TWe(f,"line",["x","y","series"]);if(!p)return;const{y:g,x:v,series:m=[]}=p,y=g.map((N,L)=>L),b=bs(y.map(N=>v[N])),x=Is(l),w=l.getElementsByClassName(Gs),_=l.getElementsByClassName(OP),S=Bn(_,N=>N.__data__.key.split("-")[0]),O=new Es({style:Object.assign({x1:0,y1:0,x2:0,y2:x.getAttribute("height"),stroke:"black",lineWidth:1},Fe(a,"rule"))}),A=new Va({style:Object.assign({x:0,y:x.getAttribute("height"),text:"",fontSize:10},Fe(a,"label"))});O.append(A),x.appendChild(O);const T=(N,L,B)=>{const[$]=N.invert(B),G=L.invert($);return b[OAe(b,G)]},I=(N,L)=>{O.setAttribute("x1",N[0]),O.setAttribute("x2",N[0]),A.setAttribute("text",i(L))};let D;const R=N=>OWe(this,void 0,void 0,function*(){const{x:L}=d,B=T(h,L,N);I(N,B),c("chartIndex",G=>{const W=me({},G),U=W.marks.find(Q=>Q.type==="line"),q=yn(DI(y,Q=>yn(Q,se=>+g[se])/fo(Q,se=>+g[se]),Q=>m[Q]).values()),K=[1/q,q];me(U,{scale:{y:{domain:K}}});const J=AWe(U);J.groupBy="color",J.basis=(Q,se)=>{const de=Q[Zl(ye=>v[+ye]).center(Q,B)];return se[de]};for(const Q of W.marks)Q.animate=!1;return W}),D=(yield u("chartIndex")).view}),F=N=>{const{scale:L,coordinate:B}=D,{x:$,y:G}=L,W=T(B,$,N);I(N,W);for(const U of w){const{seriesIndex:Y,key:q}=U.__data__,K=Y[Zl(Ee=>v[+Ee]).center(Y,W)],J=[0,G.map(1)],Q=[0,G.map(g[K]/g[Y[0]])],[,se]=B.map(J),[,de]=B.map(Q),ye=se-de;U.setAttribute("transform",`translate(0, ${ye})`);const _e=S.get(q)||[];for(const Ee of _e)Ee.setAttribute("dy",ye)}},z=ou(N=>{const L=Xf(x,N);L&&F(L)},e,{leading:n,trailing:r});return R([0,0]),x.addEventListener("pointerenter",z),x.addEventListener("pointermove",z),x.addEventListener("pointerleave",z),()=>{O.remove(),x.removeEventListener("pointerenter",z),x.removeEventListener("pointermove",z),x.removeEventListener("pointerleave",z)}}}jse.props={reapplyWhenUpdate:!0};function MWe(t){const{coordinate:e={}}=t,{transform:n=[]}=e,r=n.find(a=>a.type==="fisheye");if(r)return r;const i={type:"fisheye"};return n.push(i),e.transform=n,t.coordinate=e,i}function CWe({wait:t=30,leading:e,trailing:n=!1}){return r=>{const{options:i,update:a,setState:o,container:s}=r,l=Is(s),u=ou(c=>{const f=Xf(l,c);if(!f){o("fisheye"),a();return}o("fisheye",d=>{const h=me({},d,{interaction:{tooltip:{preserve:!0}}});for(const m of h.marks)m.animate=!1;const[p,g]=f,v=MWe(h);return v.focusX=p,v.focusY=g,v.visual=!0,h}),a()},t,{leading:e,trailing:n});return l.addEventListener("pointerenter",u),l.addEventListener("pointermove",u),l.addEventListener("pointerleave",u),()=>{l.removeEventListener("pointerenter",u),l.removeEventListener("pointermove",u),l.removeEventListener("pointerleave",u)}}}var Kf=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Mx(t,e){return e?typeof e=="string"?document.querySelector(e):e:t.ownerDocument.defaultView.getContextService().getDomElement().parentElement}function PWe(t){const e=t.getRenderBounds(),{min:[n,r],max:[i,a]}=e;return{x:n,y:r,width:i-n,height:a-r}}function DWe(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:n.x-r.x,y:n.y-r.y}}function IWe(t,e,n,r,i,a,o,s={},l=[10,10]){const u={".g2-tooltip":{},".g2-tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},c=new zne({className:"tooltip",style:{x:e,y:n,container:o,data:[],bounding:a,position:r,enterable:i,title:"",offset:l,template:{prefixCls:"g2-"},style:me(u,s)}});return t.appendChild(c.HTMLTooltipElement),c}function Bse({root:t,data:e,x:n,y:r,render:i,event:a,single:o,position:s="right-bottom",enterable:l=!1,css:u,mount:c,bounding:f,offset:d}){const h=Mx(t,c),p=Mx(t),g=o?p:t,v=f||PWe(t),m=DWe(p,h),{tooltipElement:y=IWe(h,n,r,s,l,v,m,u,d)}=g,{items:b,title:x=""}=e;y.update(Object.assign({x:n,y:r,data:b,title:x,position:s,enterable:l,container:m},i!==void 0&&{content:i(a,{items:b,title:x})})),g.tooltipElement=y}function Bu({root:t,single:e,emitter:n,nativeEvent:r=!0,event:i=null}){r&&n.emit("tooltip:hide",{nativeEvent:r});const a=Mx(t),o=e?a:t,{tooltipElement:s}=o;s&&s.hide(i==null?void 0:i.clientX,i==null?void 0:i.clientY),Wse(t),Gse(t),Hse(t)}function XP({root:t,single:e}){const n=Mx(t),r=e?n:t;if(!r)return;const{tooltipElement:i}=r;i&&(i.destroy(),r.tooltipElement=void 0),Wse(t),Gse(t),Hse(t)}function $se(t){const{value:e}=t;return Object.assign(Object.assign({},t),{value:e===void 0?"undefined":e})}function LWe(t){const{__data__:e}=t,{title:n,items:r=[]}=e,i=r.filter($n).map(a=>{var{color:o=Vse(t)}=a,s=Kf(a,["color"]);return Object.assign(Object.assign({},s),{color:o})}).map($se);return Object.assign(Object.assign({},n&&{title:n}),{items:i})}function Vse(t){const e=t.getAttribute("fill"),n=t.getAttribute("stroke"),{__data__:r}=t,{color:i=e&&e!=="transparent"?e:n}=r;return i}function aB(t,e=n=>n){const n=new Map(t.map(r=>[e(r),r]));return Array.from(n.values())}function qse(t,e,n,r=t.map(a=>a.__data__),i={}){const a=l=>l instanceof Date?+l:l,o=aB(r.map(l=>l.title),a).filter($n),s=r.flatMap((l,u)=>{const c=t[u],{items:f=[],title:d}=l,h=f.filter($n),p=n!==void 0?n:f.length<=1;return h.map(g=>{var{color:v=Vse(c)||i.color,name:m}=g,y=Kf(g,["color","name"]);const b=hTe(e,l),x=p&&!(hse in y)?b||m:m||b;return Object.assign(Object.assign({},y),{color:v,name:x||d})})}).map($se);return Object.assign(Object.assign({},o.length>0&&{title:o.join(",")}),{items:aB(s,l=>`(${a(l.name)}, ${a(l.value)}, ${a(l.color)})`)})}function RWe(t,e,n,r){var{plotWidth:i,plotHeight:a,mainWidth:o,mainHeight:s,startX:l,startY:u,transposed:c,polar:f,insetLeft:d,insetTop:h}=r,p=Kf(r,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const g=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},p),v=(_,E,S)=>{const O=new $a({style:Object.assign({cx:_,cy:E,r:S},g)});return t.appendChild(O),O},m=(_,E,S,O)=>{const A=new Es({style:Object.assign({x1:_,x2:E,y1:S,y2:O},g)});return t.appendChild(A),A},b=((_,E)=>{if(E.length===1)return E[0];const S=E.map(A=>mr(A,_)),O=Nv(S,A=>A);return E[O]})(n,e),x=()=>c?[l+b[0],l+b[0],u,u+a]:[l,l+i,b[1]+u,b[1]+u],w=()=>{const _=l+d+o/2,E=u+h+s/2,S=mr([_,E],b);return[_,E,S]};if(f){const[_,E,S]=w(),O=t.ruleX||v(_,E,S);O.style.cx=_,O.style.cy=E,O.style.r=S,t.ruleX=O}else{const[_,E,S,O]=x(),A=t.ruleX||m(_,E,S,O);A.style.x1=_,A.style.x2=E,A.style.y1=S,A.style.y2=O,t.ruleX=A}}function NWe(t,e,n){var{plotWidth:r,plotHeight:i,mainWidth:a,mainHeight:o,startX:s,startY:l,transposed:u,polar:c,insetLeft:f,insetTop:d}=n,h=Kf(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const p=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},h),g=e.map(O=>O[1]),v=e.map(O=>O[0]),m=L0(g),y=L0(v),b=()=>{if(c){const O=Math.min(a,o)/2,A=s+f+a/2,T=l+d+o/2,I=$o(Pr([y,m],[A,T])),D=A+O*Math.cos(I),R=T+O*Math.sin(I);return[A,D,T,R]}return u?[s,s+r,m+l,m+l]:[y+s,y+s,l,l+i]},[x,w,_,E]=b(),S=()=>{const O=new Es({style:Object.assign({x1:x,x2:w,y1:_,y2:E},p)});return t.appendChild(O),O};if(v.length>0){const O=t.ruleY||S();O.style.x1=x,O.style.x2=w,O.style.y1=_,O.style.y2=E,t.ruleY=O}}function Wse(t){t.ruleY&&(t.ruleY.remove(),t.ruleY=void 0)}function Gse(t){t.ruleX&&(t.ruleX.remove(),t.ruleX=void 0)}function FWe(t,{data:e,style:n,theme:r}){t.markers&&t.markers.forEach(o=>o.remove());const{type:i=""}=n,a=e.filter(o=>{const[{x:s,y:l}]=o;return $n(s)&&$n(l)}).map(o=>{const[{color:s,element:l},u]=o,c=s||l.style.fill||l.style.stroke||r.color,f=i==="hollow"?"transparent":c,d=i==="hollow"?c:"#fff";return new $a({className:"g2-tooltip-marker",style:Object.assign({cx:u[0],cy:u[1],fill:f,r:4,stroke:d,lineWidth:2,pointerEvents:"none"},n)})});for(const o of a)t.appendChild(o);t.markers=a}function Hse(t){t.markers&&(t.markers.forEach(e=>e.remove()),t.markers=[])}function oB(t,e){return Array.from(t.values()).some(n=>{var r;return(r=n.interaction)===null||r===void 0?void 0:r[e]})}function Ws(t,e){return t===void 0?e:t}function Yse(t){const{title:e,items:n}=t;return n.length===0&&e===void 0}function zWe(t){return Array.from(t.values()).some(e=>{var n;return((n=e.interaction)===null||n===void 0?void 0:n.seriesTooltip)&&e.tooltip})}function Use({root:t,event:e,elements:n,coordinate:r,scale:i,shared:a}){var o,s;const l=v=>v.markType==="interval",u=n.every(l)&&!On(r),c=i.x,f=i.series,d=(s=(o=c==null?void 0:c.getBandWidth)===null||o===void 0?void 0:o.call(c))!==null&&s!==void 0?s:0,h=f?v=>{const m=Math.round(1/f.valueBandWidth);return v.__data__.x+v.__data__.series*d+d/(m*2)}:v=>v.__data__.x+d/2;u&&n.sort((v,m)=>h(v)-h(m));const p=v=>{const{target:m}=v;return rm(m,y=>y.classList?y.classList.includes("element"):!1)};return(u?v=>{const m=Xf(t,v);if(!m)return;const[y]=r.invert(m),b=Zl(h).center,x=b(n,y),w=n[x];return!a&&n.find(E=>E!==w&&h(E)===h(w))?p(v):w}:p)(e)}function Xse({root:t,event:e,elements:n,coordinate:r,scale:i,startX:a,startY:o}){const s=Hn(r),l=[],u=[];for(const N of n){const{__data__:L}=N,{seriesX:B,title:$,items:G}=L;B?l.push(N):($||G)&&u.push(N)}const c=N=>N.markType==="interval",f=u.length&&u.every(c)&&!On(r),d=N=>N.__data__.x,p=!!i.x.getBandWidth&&u.length>0;l.sort((N,L)=>{const B=s?0:1,$=G=>G.getBounds().min[B];return s?$(L)-$(N):$(N)-$(L)});const g=N=>{const L=s?1:0,{min:B,max:$}=N.getLocalBounds();return bs([B[L],$[L]])};f?n.sort((N,L)=>d(N)-d(L)):u.sort((N,L)=>{const[B,$]=g(N),[G,W]=g(L),U=(B+$)/2,Y=(G+W)/2;return s?Y-U:U-Y});const v=new Map(l.map(N=>{const{__data__:L}=N,{seriesX:B}=L,$=B.map((W,U)=>U),G=bs($,W=>B[+W]);return[N,[G,B]]})),{x:m}=i,y=m!=null&&m.getBandWidth?m.getBandWidth()/2:0,b=N=>{const[L]=r.invert(N);return L-y},x=(N,L,B,$)=>{const{_x:G}=N,W=G!==void 0?m.map(G):b(L),U=$.filter($n),[Y,q]=bs([U[0],U[U.length-1]]),K=Y===q;if(!p&&(W<Y||W>q)&&!K)return null;const J=Zl(se=>$[+se]).center,Q=J(B,W);return B[Q]},w=f?(N,L)=>{const B=Zl(d).center,$=B(L,b(N)),G=L[$];return Bn(L,d).get(d(G))}:(N,L)=>{const $=N[s?1:0],G=L.filter(Y=>{const[q,K]=g(Y);return $>=q&&$<=K});if(!p||G.length>0)return G;const W=Zl(Y=>{const[q,K]=g(Y);return(q+K)/2}).center,U=W(L,$);return[L[U]].filter($n)},_=(N,L)=>{const{__data__:B}=N;return Object.fromEntries(Object.entries(B).filter(([$])=>$.startsWith("series")&&$!=="series").map(([$,G])=>{const W=G[L];return[OI($.replace("series","")),W]}))},E=Xf(t,e);if(!E)return;const S=[E[0]-a,E[1]-o];if(!S)return;const O=w(S,u),A=[],T=[];for(const N of l){const[L,B]=v.get(N),$=x(e,S,L,B);if($!==null){A.push(N);const G=_(N,$),{x:W,y:U}=G,Y=r.map([(W||0)+y,U||0]);T.push([Object.assign(Object.assign({},G),{element:N}),Y])}}const I=Array.from(new Set(T.map(N=>N[0].x))),D=I[Nv(I,N=>Math.abs(N-b(S)))],R=T.filter(N=>N[0].x===D),F=[...R.map(N=>N[0]),...O.map(N=>N.__data__)];return{selectedElements:[...A,...O],selectedData:F,filteredSeriesData:R,abstractX:b}}function sB(t,e){var{elements:n,sort:r,filter:i,scale:a,coordinate:o,crosshairs:s,crosshairsX:l,crosshairsY:u,render:c,groupName:f,emitter:d,wait:h=50,leading:p=!0,trailing:g=!1,startX:v=0,startY:m=0,body:y=!0,single:b=!0,position:x,enterable:w,mount:_,bounding:E,theme:S,offset:O,disableNative:A=!1,marker:T=!0,preserve:I=!1,style:D={},css:R={}}=e,F=Kf(e,["elements","sort","filter","scale","coordinate","crosshairs","crosshairsX","crosshairsY","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","offset","disableNative","marker","preserve","style","css"]);const z=n(t),N=me(D,F),L=On(o),B=Hn(o),{innerWidth:$,innerHeight:G,width:W,height:U,insetLeft:Y,insetTop:q}=o.getOptions(),K=ou(he=>{var ke;const Se=Xf(t,he);if(!Se)return;const Me=kse(t),Be=Me.min[0],en=Me.min[1],{selectedElements:Ht,selectedData:wt,filteredSeriesData:At,abstractX:nn}=Xse({root:t,event:he,elements:z,coordinate:o,scale:a,startX:v,startY:m}),sn=qse(Ht,a,f,wt,S);if(r&&sn.items.sort((cn,Nn)=>r(cn)-r(Nn)),i&&(sn.items=sn.items.filter(i)),Ht.length===0||Yse(sn)){J(he);return}if(y&&Bse({root:t,data:sn,x:Se[0]+Be,y:Se[1]+en,render:c,event:he,single:b,position:x,enterable:w,mount:_,bounding:E,css:R,offset:O}),s||l||u){const cn=Fe(N,"crosshairs"),Nn=Object.assign(Object.assign({},cn),Fe(N,"crosshairsX")),vn=Object.assign(Object.assign({},cn),Fe(N,"crosshairsY")),ci=At.map(Jr=>Jr[1]);l&&RWe(t,ci,Se,Object.assign(Object.assign({},Nn),{plotWidth:$,plotHeight:G,mainWidth:W,mainHeight:U,insetLeft:Y,insetTop:q,startX:v,startY:m,transposed:B,polar:L})),u&&NWe(t,ci,Object.assign(Object.assign({},vn),{plotWidth:$,plotHeight:G,mainWidth:W,mainHeight:U,insetLeft:Y,insetTop:q,startX:v,startY:m,transposed:B,polar:L}))}if(T){const cn=Fe(N,"marker");FWe(t,{data:At,style:cn,theme:S})}const Zt=(ke=At[0])===null||ke===void 0?void 0:ke[0].x,gn=Zt??nn(focus);d.emit("tooltip:show",Object.assign(Object.assign({},he),{nativeEvent:!0,data:Object.assign(Object.assign({},sn),{data:{x:rp(a.x,gn,!0)}})}))},h,{leading:p,trailing:g}),J=he=>{Bu({root:t,single:b,emitter:d,event:he})},Q=()=>{XP({root:t,single:b})},se=he=>{var ke,{nativeEvent:Se,data:Me,offsetX:Be,offsetY:en}=he,Ht=Kf(he,["nativeEvent","data","offsetX","offsetY"]);if(Se)return;const wt=(ke=Me==null?void 0:Me.data)===null||ke===void 0?void 0:ke.x,nn=a.x.map(wt),[sn,Zt]=o.map([nn,.5]),gn=t.getRenderBounds(),cn=gn.min[0],Nn=gn.min[1];K(Object.assign(Object.assign({},Ht),{offsetX:Be!==void 0?Be:cn+sn,offsetY:en!==void 0?en:Nn+Zt,_x:wt}))},de=()=>{Bu({root:t,single:b,emitter:d,nativeEvent:!1})},ye=()=>{ue(),Q()},_e=()=>{Ee()},Ee=()=>{A||(t.addEventListener("pointerdown",K),t.addEventListener("pointerenter",K),t.addEventListener("pointermove",K),t.addEventListener("pointerleave",he=>{Xf(t,he)||J(he)}),t.addEventListener("pointerup",J))},ue=()=>{A||(t.removeEventListener("pointerdown",K),t.removeEventListener("pointerenter",K),t.removeEventListener("pointermove",K),t.removeEventListener("pointerleave",J),t.removeEventListener("pointerup",J))};return Ee(),d.on("tooltip:show",se),d.on("tooltip:hide",de),d.on("tooltip:disable",ye),d.on("tooltip:enable",_e),()=>{ue(),d.off("tooltip:show",se),d.off("tooltip:hide",de),d.off("tooltip:disable",ye),d.off("tooltip:enable",_e),I?Bu({root:t,single:b,emitter:d,nativeEvent:!1}):Q()}}function jWe(t,{elements:e,coordinate:n,scale:r,render:i,groupName:a,sort:o,filter:s,emitter:l,wait:u=50,leading:c=!0,trailing:f=!1,groupKey:d=T=>T,single:h=!0,position:p,enterable:g,datum:v,view:m,mount:y,bounding:b,theme:x,offset:w,shared:_=!1,body:E=!0,disableNative:S=!1,preserve:O=!1,css:A={}}){const T=e(t),I=Bn(T,d),D=ou(G=>{const W=Use({root:t,event:G,elements:T,coordinate:n,scale:r,shared:_});if(!W){Bu({root:t,single:h,emitter:l,event:G});return}const U=d(W),Y=I.get(U);if(!Y)return;const q=Y.length===1&&!_?LWe(Y[0]):qse(Y,r,a,void 0,x);if(o&&q.items.sort((Q,se)=>o(Q)-o(se)),s&&(q.items=q.items.filter(s)),Yse(q)){Bu({root:t,single:h,emitter:l,event:G});return}const{offsetX:K,offsetY:J}=G;E&&Bse({root:t,data:q,x:K,y:J,render:i,event:G,single:h,position:p,enterable:g,mount:y,bounding:b,css:A,offset:w}),l.emit("tooltip:show",Object.assign(Object.assign({},G),{nativeEvent:!0,data:Object.assign(Object.assign({},q),{data:QJ(W,m)})}))},u,{leading:c,trailing:f}),R=G=>{Bu({root:t,single:h,emitter:l,event:G})},F=()=>{S||(t.addEventListener("pointerdown",D),t.addEventListener("pointermove",D),t.addEventListener("pointerleave",R),t.addEventListener("pointerup",R))},z=()=>{S||(t.removeEventListener("pointerdown",D),t.removeEventListener("pointermove",D),t.removeEventListener("pointerleave",R),t.removeEventListener("pointerup",R))},N=({nativeEvent:G,offsetX:W,offsetY:U,data:Y})=>{if(G)return;const{data:q}=Y,K=qR(T,q,v);if(!K)return;const J=K.getBBox(),{x:Q,y:se,width:de,height:ye}=J,_e=t.getBBox();D({target:K,offsetX:W!==void 0?W+_e.x:Q+de/2,offsetY:U!==void 0?U+_e.y:se+ye/2})},L=({nativeEvent:G}={})=>{G||Bu({root:t,single:h,emitter:l,nativeEvent:!1})},B=()=>{z(),XP({root:t,single:h})},$=()=>{F()};return l.on("tooltip:show",N),l.on("tooltip:hide",L),l.on("tooltip:enable",$),l.on("tooltip:disable",B),F(),()=>{z(),l.off("tooltip:show",N),l.off("tooltip:hide",L),O?Bu({root:t,single:h,emitter:l,nativeEvent:!1}):XP({root:t,single:h})}}function Zse(t){const{shared:e,crosshairs:n,crosshairsX:r,crosshairsY:i,series:a,name:o,item:s=()=>({}),facet:l=!1}=t,u=Kf(t,["shared","crosshairs","crosshairsX","crosshairsY","series","name","item","facet"]);return(c,f,d)=>{const{container:h,view:p}=c,{scale:g,markState:v,coordinate:m,theme:y}=p,b=oB(v,"seriesTooltip"),x=oB(v,"crosshairs"),w=Is(h),_=Ws(a,b),E=Ws(n,x);if(_&&zWe(v)&&!l)return sB(w,Object.assign(Object.assign({},u),{theme:y,elements:_c,scale:g,coordinate:m,crosshairs:E,crosshairsX:Ws(Ws(r,n),!1),crosshairsY:Ws(i,E),item:s,emitter:d}));if(_&&l){const S=f.filter(R=>R!==c&&R.options.parentKey===c.options.key),O=Ose(c,f),A=S[0].view.scale,T=w.getBounds(),I=T.min[0],D=T.min[1];return Object.assign(A,{facet:!0}),sB(w.parentNode.parentNode,Object.assign(Object.assign({},u),{theme:y,elements:()=>O,scale:A,coordinate:m,crosshairs:Ws(n,x),crosshairsX:Ws(Ws(r,n),!1),crosshairsY:Ws(i,E),item:s,startX:I,startY:D,emitter:d}))}return jWe(w,Object.assign(Object.assign({},u),{datum:Zf(p),elements:_c,scale:g,coordinate:m,groupKey:e?tm():void 0,item:s,emitter:d,view:p,theme:y,shared:e}))}}Zse.props={reapplyWhenUpdate:!0};var F1=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};const Kse="legend-category",BWe="legend-continuous",$We="items-item",VWe="legend-category-item-marker",qWe="legend-category-item-label";function Jse(t){return t.getElementsByClassName(VWe)[0]}function Qse(t){return t.getElementsByClassName(qWe)[0]}function ele(t){return t.getElementsByClassName($We)}function GR(t){return t.getElementsByClassName(Kse)}function tle(t){return t.getElementsByClassName(BWe)}function WWe(t,e){[...GR(t),...tle(t)].forEach(r=>{e(r,i=>i)})}function ZP(t){let e=t.parentNode;for(;e&&!e.__data__;)e=e.parentNode;return e.__data__}function GWe(t,{legends:e,marker:n,label:r,datum:i,filter:a,emitter:o,channel:s,state:l={}}){const u=new Map,c=new Map,f=new Map,{unselected:d={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=l,h={unselected:Fe(d,"marker")},p={unselected:Fe(d,"label")},{setState:g,removeState:v}=lc(h,void 0),{setState:m,removeState:y}=lc(p,void 0),b=Array.from(e(t));let x=b.map(i);const w=()=>{for(const S of b){const O=i(S),A=n(S),T=r(S);x.includes(O)?(v(A,"unselected"),y(T,"unselected")):(g(A,"unselected"),m(T,"unselected"))}};for(const S of b){const O=()=>{Ru(t,"pointer")},A=()=>{bWe(t)},T=I=>F1(this,void 0,void 0,function*(){const D=i(S),R=x.indexOf(D);R===-1?x.push(D):x.splice(R,1),yield a(x),w();const{nativeEvent:F=!0}=I;F&&(x.length===b.length?o.emit("legend:reset",{nativeEvent:F}):o.emit("legend:filter",Object.assign(Object.assign({},I),{nativeEvent:F,data:{channel:s,values:x}})))});S.addEventListener("click",T),S.addEventListener("pointerenter",O),S.addEventListener("pointerout",A),u.set(S,T),c.set(S,O),f.set(S,A)}const _=S=>F1(this,void 0,void 0,function*(){const{nativeEvent:O}=S;if(O)return;const{data:A}=S,{channel:T,values:I}=A;T===s&&(x=I,yield a(x),w())}),E=S=>F1(this,void 0,void 0,function*(){const{nativeEvent:O}=S;O||(x=b.map(i),yield a(x),w())});return o.on("legend:filter",_),o.on("legend:reset",E),()=>{for(const S of b)S.removeEventListener("click",u.get(S)),S.removeEventListener("pointerenter",c.get(S)),S.removeEventListener("pointerout",f.get(S)),o.off("legend:filter",_),o.off("legend:reset",E)}}function HWe(t,{legend:e,filter:n,emitter:r,channel:i}){const a=({detail:{value:o}})=>{n(o),r.emit({nativeEvent:!0,data:{channel:i,values:o}})};return e.addEventListener("valuechange",a),()=>{e.removeEventListener("valuechange",a)}}function nle(t,{legend:e,channel:n,value:r,ordinal:i,channels:a,allChannels:o,facet:s=!1}){return F1(this,void 0,void 0,function*(){const{view:l,update:u,setState:c}=t;c(e,f=>{const{marks:d}=f,h=d.map(p=>{if(p.type==="legends")return p;const{transform:g=[],data:v=[]}=p,m=g.findIndex(({type:x})=>x.startsWith("group")||x.startsWith("bin")),y=[...g];v.length&&y.splice(m+1,0,{type:"filter",[n]:{value:r,ordinal:i}});const b=Object.fromEntries(a.map(x=>[x,{domain:l.scale[x].getOptions().domain}]));return me({},p,Object.assign(Object.assign({transform:y,scale:b},!i&&{animate:!1}),{legend:s?!1:Object.fromEntries(o.map(x=>[x,{preserve:!0}]))}))});return Object.assign(Object.assign({},f),{marks:h})}),yield u()})}function YWe(t,e){for(const n of t)nle(n,Object.assign(Object.assign({},e),{facet:!0}))}function UWe(){return(t,e,n)=>{const{container:r}=t,i=e.filter(f=>f!==t),a=i.length>0,o=f=>ZP(f).scales.map(d=>d.name),s=[...GR(r),...tle(r)],l=s.flatMap(o),u=a?ou(YWe,50,{trailing:!0}):ou(nle,50,{trailing:!0}),c=s.map(f=>{const{name:d,domain:h}=ZP(f).scales[0],p=o(f),g={legend:f,channel:d,channels:p,allChannels:l};return f.className===Kse?GWe(r,{legends:ele,marker:Jse,label:Qse,datum:v=>{const{__data__:m}=v,{index:y}=m;return h[y]},filter:v=>{const m=Object.assign(Object.assign({},g),{value:v,ordinal:!0});u(a?i:t,m)},state:f.attributes.state,channel:d,emitter:n}):HWe(r,{legend:f,filter:v=>{const m=Object.assign(Object.assign({},g),{value:v,ordinal:!1});u(a?i:t,m)},emitter:n,channel:d})});return()=>{c.forEach(f=>f())}}}function XWe(){return(t,e,n)=>{const{container:r,view:i,options:a}=t,o=GR(r),s=_c(r),l=h=>ZP(h).scales[0].name,u=h=>{const{scale:{[h]:p}}=i;return p},c=up(a,["active","inactive"]),f=nm(s,Zf(i)),d=[];for(const h of o){const p=$=>{const{data:G}=h.attributes,{__data__:W}=$,{index:U}=W;return G[U].label},g=l(h),v=ele(h),m=u(g),y=Bn(s,$=>m.invert($.__data__[g])),{state:b={}}=h.attributes,{inactive:x={}}=b,{setState:w,removeState:_}=lc(c,f),E={inactive:Fe(x,"marker")},S={inactive:Fe(x,"label")},{setState:O,removeState:A}=lc(E),{setState:T,removeState:I}=lc(S),D=$=>{for(const G of v){const W=Jse(G),U=Qse(G);G===$||$===null?(A(W,"inactive"),I(U,"inactive")):(O(W,"inactive"),T(U,"inactive"))}},R=($,G)=>{const W=p(G),U=new Set(y.get(W));for(const q of s)U.has(q)?w(q,"active"):w(q,"inactive");D(G);const{nativeEvent:Y=!0}=$;Y&&n.emit("legend:highlight",Object.assign(Object.assign({},$),{nativeEvent:Y,data:{channel:g,value:W}}))},F=new Map;for(const $ of v){const G=W=>{R(W,$)};$.addEventListener("pointerover",G),F.set($,G)}const z=$=>{for(const W of s)_(W,"inactive","active");D(null);const{nativeEvent:G=!0}=$;G&&n.emit("legend:unhighlight",{nativeEvent:G})},N=$=>{const{nativeEvent:G,data:W}=$;if(G)return;const{channel:U,value:Y}=W;if(U!==g)return;const q=v.find(K=>p(K)===Y);q&&R({nativeEvent:!1},q)},L=$=>{const{nativeEvent:G}=$;G||z({nativeEvent:!1})};h.addEventListener("pointerleave",z),n.on("legend:highlight",N),n.on("legend:unhighlight",L);const B=()=>{h.removeEventListener(z),n.off("legend:highlight",N),n.off("legend:unhighlight",L);for(const[$,G]of F)$.removeEventListener(G)};d.push(B)}return()=>d.forEach(h=>h())}}var Eo=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function ZWe(t,e){const[n,r,i,a]=t,[o,s,l,u]=e;return!(o>i||l<n||s>a||u<r)}function KWe(t,e,n,r,i){const[a,o,s,l]=i;return[Math.max(a,Math.min(t,n)),Math.max(o,Math.min(e,r)),Math.min(s,Math.max(t,n)),Math.min(l,Math.max(e,r))]}function JWe(t){const{width:e,height:n}=t.getBBox();return[0,0,e,n]}function Ll(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}const lB=Jh(t=>{const e=t.attributes,{x:n,y:r,width:i,height:a,class:o,renders:s={},handleSize:l=10,document:u}=e,c=Eo(e,["x","y","width","height","class","renders","handleSize","document"]);if(!u||i===void 0||a===void 0||n===void 0||r===void 0)return;const f=l/2,d=(Y,q,K)=>{Y.handle||(Y.handle=K.createElement("rect"),Y.append(Y.handle));const{handle:J}=Y;return J.attr(q),J},h=Fe(rE(c,"handleNW","handleNE"),"handleN"),{render:p=d}=h,g=Eo(h,["render"]),v=Fe(c,"handleE"),{render:m=d}=v,y=Eo(v,["render"]),b=Fe(rE(c,"handleSE","handleSW"),"handleS"),{render:x=d}=b,w=Eo(b,["render"]),_=Fe(c,"handleW"),{render:E=d}=_,S=Eo(_,["render"]),O=Fe(c,"handleNW"),{render:A=d}=O,T=Eo(O,["render"]),I=Fe(c,"handleNE"),{render:D=d}=I,R=Eo(I,["render"]),F=Fe(c,"handleSE"),{render:z=d}=F,N=Eo(F,["render"]),L=Fe(c,"handleSW"),{render:B=d}=L,$=Eo(L,["render"]),G=(Y,q)=>{const{id:K}=Y,J=q(Y,Y.attributes,u);J.id=K,J.style.draggable=!0},W=Y=>()=>{const q=Jh(K=>G(K,Y));return new q({})},U=pt(t).attr("className",o).style("transform",`translate(${n}, ${r})`).style("draggable",!0);U.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(Ll,Object.assign(Object.assign({width:i,height:a},rE(c,"handle")),{transform:void 0})),U.maybeAppend("handle-n",W(p)).style("x",f).style("y",-f).style("width",i-l).style("height",l).style("fill","transparent").call(Ll,g),U.maybeAppend("handle-e",W(m)).style("x",i-f).style("y",f).style("width",l).style("height",a-l).style("fill","transparent").call(Ll,y),U.maybeAppend("handle-s",W(x)).style("x",f).style("y",a-f).style("width",i-l).style("height",l).style("fill","transparent").call(Ll,w),U.maybeAppend("handle-w",W(E)).style("x",-f).style("y",f).style("width",l).style("height",a-l).style("fill","transparent").call(Ll,S),U.maybeAppend("handle-nw",W(A)).style("x",-f).style("y",-f).style("width",l).style("height",l).style("fill","transparent").call(Ll,T),U.maybeAppend("handle-ne",W(D)).style("x",i-f).style("y",-f).style("width",l).style("height",l).style("fill","transparent").call(Ll,R),U.maybeAppend("handle-se",W(z)).style("x",i-f).style("y",a-f).style("width",l).style("height",l).style("fill","transparent").call(Ll,N),U.maybeAppend("handle-sw",W(B)).style("x",-f).style("y",a-f).style("width",l).style("height",l).style("fill","transparent").call(Ll,$)});function HR(t,e){var{brushed:n=()=>{},brushended:r=()=>{},brushcreated:i=()=>{},brushstarted:a=()=>{},brushupdated:o=()=>{},extent:s=JWe(t),brushRegion:l=(J,Q,se,de,ye)=>[J,Q,se,de],reverse:u=!1,fill:c="#777",fillOpacity:f="0.3",stroke:d="#fff",selectedHandles:h=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=e,p=Eo(e,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let g=null,v=null,m=null,y=null,b=null,x=!1;const[w,_,E,S]=s;Ru(t,"crosshair"),t.style.draggable=!0;const O=(J,Q,se)=>{if(a(se),y&&y.remove(),b&&b.remove(),g=[J,Q],u)return A();T()},A=()=>{b=new yr({style:Object.assign(Object.assign({},p),{fill:c,fillOpacity:f,stroke:d,pointerEvents:"none"})}),y=new lB({style:{x:0,y:0,width:0,height:0,draggable:!0,document:t.ownerDocument},className:"mask"}),t.appendChild(b),t.appendChild(y)},T=()=>{y=new lB({style:Object.assign(Object.assign({document:t.ownerDocument,x:0,y:0},p),{fill:c,fillOpacity:f,stroke:d,draggable:!0}),className:"mask"}),t.appendChild(y)},I=(J=!0)=>{y&&y.remove(),b&&b.remove(),g=null,v=null,m=null,x=!1,y=null,b=null,r(J)},D=(J,Q,se=!0)=>{const[de,ye,_e,Ee]=KWe(J[0],J[1],Q[0],Q[1],s),[ue,he,ke,Se]=l(de,ye,_e,Ee,s);return u?F(ue,he,ke,Se):R(ue,he,ke,Se),n(ue,he,ke,Se,se),[ue,he,ke,Se]},R=(J,Q,se,de)=>{y.style.x=J,y.style.y=Q,y.style.width=se-J,y.style.height=de-Q},F=(J,Q,se,de)=>{b.style.d=`
      M${w},${_}L${E},${_}L${E},${S}L${w},${S}Z
      M${J},${Q}L${J},${de}L${se},${de}L${se},${Q}Z
    `,y.style.x=J,y.style.y=Q,y.style.width=se-J,y.style.height=de-Q},z=J=>{const Q=(he,ke,Se,Me,Be)=>he+ke<Me?Me-ke:he+Se>Be?Be-Se:he,se=J[0]-m[0],de=J[1]-m[1],ye=Q(se,g[0],v[0],w,E),_e=Q(de,g[1],v[1],_,S),Ee=[g[0]+ye,g[1]+_e],ue=[v[0]+ye,v[1]+_e];D(Ee,ue)},N={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},L=J=>$(J)||B(J),B=J=>{const{id:Q}=J;return h.indexOf(Q)===-1?!1:new Set(Object.keys(N)).has(Q)},$=J=>J===y.getElementById("selection"),G=J=>{const{target:Q}=J,[se,de]=QE(t,J);if(!y||!L(Q)){O(se,de,J),x=!0;return}L(Q)&&(m=[se,de])},W=J=>{const{target:Q}=J,se=QE(t,J);if(!g)return;if(!m)return D(g,se);if($(Q))return z(se);const[de,ye]=[se[0]-m[0],se[1]-m[1]],{id:_e}=Q;if(N[_e]){const[Ee,ue,he,ke]=N[_e].vector;return D([g[0]+de*Ee,g[1]+ye*ue],[v[0]+de*he,v[1]+ye*ke])}},U=J=>{if(m){m=null;const{x:_e,y:Ee,width:ue,height:he}=y.style;g=[_e,Ee],v=[_e+ue,Ee+he],o(_e,Ee,_e+ue,Ee+he,J);return}v=QE(t,J);const[Q,se,de,ye]=D(g,v);x=!1,i(Q,se,de,ye,J)},Y=J=>{const{target:Q}=J;y&&!L(Q)&&I()},q=J=>{const{target:Q}=J;!y||!L(Q)||x?Ru(t,"crosshair"):$(Q)?Ru(t,"move"):B(Q)&&Ru(t,N[Q.id].cursor)},K=()=>{Ru(t,"default")};return t.addEventListener("dragstart",G),t.addEventListener("drag",W),t.addEventListener("dragend",U),t.addEventListener("click",Y),t.addEventListener("pointermove",q),t.addEventListener("pointerleave",K),{mask:y,move(J,Q,se,de,ye=!0){y||O(J,Q,{}),g=[J,Q],v=[se,de],D([J,Q],[se,de],ye)},remove(J=!0){y&&I(J)},destroy(){y&&I(!1),Ru(t,"default"),t.removeEventListener("dragstart",G),t.removeEventListener("drag",W),t.removeEventListener("dragend",U),t.removeEventListener("click",Y),t.removeEventListener("pointermove",q),t.removeEventListener("pointerleave",K)}}}function YR(t,e,n){return e.filter(r=>{if(r===t)return!1;const{interaction:i={}}=r.options;return Object.values(i).find(a=>a.brushKey===n)})}function QWe(t,e,n){return YR(t,e,n).map(r=>Is(r.container))}function eGe(t,e,n){return YR(t,e,n).map(r=>r.options)}function uB(t,e){var{elements:n,selectedHandles:r,siblings:i=W=>[],datum:a,brushRegion:o,extent:s,reverse:l,scale:u,coordinate:c,series:f=!1,key:d=W=>W,bboxOf:h=W=>{const{x:U,y:Y,width:q,height:K}=W.style;return{x:U,y:Y,width:q,height:K}},state:p={},emitter:g}=e,v=Eo(e,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);const m=n(t),y=i(t),b=y.flatMap(n),x=nm(m,a),w=Fe(v,"mask"),{setState:_,removeState:E}=lc(p,x),S=new Map,{width:O,height:A,x:T=0,y:I=0}=h(t),D=s||[0,0,O,A],R=()=>{for(const W of[...m,...b])E(W,"active","inactive")},F=(W,U,Y,q)=>{var K;for(const Q of y)(K=Q.brush)===null||K===void 0||K.remove();const J=new Set;for(const Q of m){const{min:se,max:de}=Q.getLocalBounds(),[ye,_e]=se,[Ee,ue]=de;ZWe([ye,_e,Ee,ue],[W,U,Y,q])?(_(Q,"active"),J.add(d(Q))):_(Q,"inactive")}for(const Q of b)J.has(d(Q))?_(Q,"active"):_(Q,"inactive")},z=()=>{for(const W of m)E(W,"inactive");for(const W of S.values())W.remove();S.clear()},N=(W,U,Y,q)=>{const K=Q=>{const se=Q.cloneNode();return se.__data__=Q.__data__,Q.parentNode.appendChild(se),S.set(Q,se),se},J=new Vr({style:{x:W+T,y:U+I,width:Y-W,height:q-U}});t.appendChild(J);for(const Q of m){const se=S.get(Q)||K(Q);se.style.clipPath=J,_(Q,"inactive"),_(se,"active")}},L=HR(t,Object.assign(Object.assign({},w),{extent:D,brushRegion:o,reverse:l,selectedHandles:r,brushended:W=>{const U=f?z:R;W&&g.emit("brush:remove",{nativeEvent:!0}),U()},brushed:(W,U,Y,q,K)=>{const J=L1(W,U,Y,q,u,c);K&&g.emit("brush:highlight",{nativeEvent:!0,data:{selection:J}}),(f?N:F)(W,U,Y,q)},brushcreated:(W,U,Y,q,K)=>{const J=L1(W,U,Y,q,u,c);g.emit("brush:end",Object.assign(Object.assign({},K),{nativeEvent:!0,data:{selection:J}}))},brushupdated:(W,U,Y,q,K)=>{const J=L1(W,U,Y,q,u,c);g.emit("brush:end",Object.assign(Object.assign({},K),{nativeEvent:!0,data:{selection:J}}))},brushstarted:W=>{g.emit("brush:start",W)}})),B=({nativeEvent:W,data:U})=>{if(W)return;const{selection:Y}=U,[q,K,J,Q]=zFe(Y,u,c);L.move(q,K,J,Q,!1)};g.on("brush:highlight",B);const $=({nativeEvent:W}={})=>{W||L.remove(!1)};g.on("brush:remove",$);const G=L.destroy.bind(L);return L.destroy=()=>{g.off("brush:highlight",B),g.off("brush:remove",$),G()},L}function UR(t){var{facet:e,brushKey:n}=t,r=Eo(t,["facet","brushKey"]);return(i,a,o)=>{const{container:s,view:l,options:u}=i,c=Is(s),f={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},d=["active",["inactive",{opacity:.5}]],{scale:h,coordinate:p}=l;if(e){const v=c.getBounds(),m=v.min[0],y=v.min[1],b=v.max[0],x=v.max[1];return uB(c.parentNode.parentNode,Object.assign(Object.assign({elements:()=>Ose(i,a),datum:Zf(UP(i,a).map(w=>w.view)),brushRegion:(w,_,E,S)=>[w,_,E,S],extent:[m,y,b,x],state:up(UP(i,a).map(w=>w.options),d),emitter:o,scale:h,coordinate:p,selectedHandles:void 0},f),r))}const g=uB(c,Object.assign(Object.assign({elements:_c,key:v=>v.__data__.key,siblings:()=>QWe(i,a,n),datum:Zf([l,...YR(i,a,n).map(v=>v.view)]),brushRegion:(v,m,y,b)=>[v,m,y,b],extent:void 0,state:up([u,...eGe(i,a,n)],d),emitter:o,scale:h,coordinate:p,selectedHandles:void 0},f),r));return c.brush=g,()=>g.destroy()}}function XR(t,e,n,r,i){const[,a,,o]=i;return[t,a,n,o]}function tGe(t){return UR(Object.assign(Object.assign({},t),{brushRegion:XR,selectedHandles:["handle-e","handle-w"]}))}function ZR(t,e,n,r,i){const[a,,o]=i;return[a,e,o,r]}function nGe(t){return UR(Object.assign(Object.assign({},t),{brushRegion:ZR,selectedHandles:["handle-n","handle-s"]}))}var KR=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const rGe="axis",iGe="axis-line",aGe="axis-main-group",rle="axis-hot-area";function oGe(t){return t.getElementsByClassName(rGe)}function ile(t){return t.getElementsByClassName(iGe)[0]}function sGe(t){return t.getElementsByClassName(aGe)[0]}function ale(t){return sGe(t).getLocalBounds()}function lGe(t,e){var{cross:n,offsetX:r,offsetY:i}=e,a=KR(e,["cross","offsetX","offsetY"]);const o=ale(t),s=ile(t),[l]=s.getLocalBounds().min,[u,c]=o.min,[f,d]=o.max,h=(f-u)*2;return{brushRegion:ZR,hotZone:new Vr({className:rle,style:Object.assign({width:n?h/2:h,transform:`translate(${(n?u:l-h/2).toFixed(2)}, ${c})`,height:d-c},a)}),extent:n?(p,g,v,m)=>[-1/0,g,1/0,m]:(p,g,v,m)=>[Math.floor(u-r),g,Math.ceil(f-r),m]}}function uGe(t,e){var{offsetY:n,offsetX:r,cross:i=!1}=e,a=KR(e,["offsetY","offsetX","cross"]);const o=ale(t),s=ile(t),[,l]=s.getLocalBounds().min,[u,c]=o.min,[f,d]=o.max,h=d-c;return{brushRegion:XR,hotZone:new Vr({className:rle,style:Object.assign({width:f-u,height:i?h:h*2,transform:`translate(${u}, ${i?c:l-h})`},a)}),extent:i?(p,g,v,m)=>[p,-1/0,v,1/0]:(p,g,v,m)=>[p,Math.floor(c-n),v,Math.ceil(d-n)]}}function cGe(t,e){var{axes:n,elements:r,points:i,horizontal:a,datum:o,offsetY:s,offsetX:l,reverse:u=!1,state:c={},emitter:f,coordinate:d}=e,h=KR(e,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);const p=r(t),g=n(t),v=nm(p,o),{setState:m,removeState:y}=lc(c,v),b=new Map,x=Fe(h,"mask"),w=B=>Array.from(b.values()).every(([$,G,W,U])=>B.some(([Y,q])=>Y>=$&&Y<=W&&q>=G&&q<=U)),_=g.map(B=>B.attributes.scale),E=B=>B.length>2?[B[0],B[B.length-1]]:B,S=new Map,O=()=>{S.clear();for(let B=0;B<g.length;B++){const $=_[B],{domain:G}=$.getOptions();S.set(B,E(G))}};O();const A=(B,$)=>{const G=[];for(const U of p){const Y=i(U);w(Y)?(m(U,"active"),G.push(U)):m(U,"inactive")}if(S.set(B,I(G,B)),!$)return;const W=()=>{if(!D)return Array.from(S.values());const U=[];for(const[Y,q]of S){const K=_[Y],{name:J}=K.getOptions();J==="x"?U[0]=q:U[1]=q}return U};f.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:W()}})},T=B=>{for(const $ of p)y($,"active","inactive");O(),B&&f.emit("brushAxis:remove",{nativeEvent:!0})},I=(B,$)=>{const G=_[$],{name:W}=G.getOptions(),U=B.map(Y=>{const q=Y.__data__;return G.invert(q[W])});return E(Zu(G,U))},D=g.some(a)&&g.some(B=>!a(B)),R=[];for(let B=0;B<g.length;B++){const $=g[B],G=a($)?uGe:lGe,{hotZone:W,brushRegion:U,extent:Y}=G($,{offsetY:s,offsetX:l,cross:D,zIndex:999,fill:"transparent"});$.parentNode.appendChild(W);const q=HR(W,Object.assign(Object.assign({},x),{reverse:u,brushRegion:U,brushended(K){b.delete($),Array.from(b.entries()).length===0?T(K):A(B,K)},brushed(K,J,Q,se,de){b.set($,Y(K,J,Q,se)),A(B,de)}}));R.push(q)}const F=(B={})=>{const{nativeEvent:$}=B;$||R.forEach(G=>G.remove(!1))},z=(B,$,G)=>{const[W,U]=B,Y=J=>J.getStep?J.getStep():0,q=N(W,$,G),K=N(U,$,G)+Y($);return a(G)?[q,-1/0,K,1/0]:[-1/0,q,1/0,K]},N=(B,$,G)=>{const{height:W,width:U}=d.getOptions(),Y=$.clone();return a(G)?Y.update({range:[0,U]}):Y.update({range:[W,0]}),Y.map(B)},L=B=>{const{nativeEvent:$}=B;if($)return;const{selection:G}=B.data;for(let W=0;W<R.length;W++){const U=G[W],Y=R[W],q=g[W];if(U){const K=_[W];Y.move(...z(U,K,q),!1)}else Y.remove(!1)}};return f.on("brushAxis:remove",F),f.on("brushAxis:highlight",L),()=>{R.forEach(B=>B.destroy()),f.off("brushAxis:remove",F),f.off("brushAxis:highlight",L)}}function fGe(t){return(e,n,r)=>{const{container:i,view:a,options:o}=e,s=Is(i),{x:l,y:u}=s.getBBox(),{coordinate:c}=a;return cGe(i,Object.assign({elements:_c,axes:oGe,offsetY:u,offsetX:l,points:f=>f.__data__.points,horizontal:f=>{const{startPos:[d,h],endPos:[p,g]}=f.attributes;return d!==p&&h===g},datum:Zf(a),state:up(o,["active",["inactive",{opacity:.5}]]),coordinate:c,emitter:r},t))}}var dGe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},ole=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function hGe(t=300){let e=null;return n=>{const{timeStamp:r}=n;return e!==null&&r-e<t?(e=r,!0):(e=r,!1)}}function pGe(t,e){var{filter:n,reset:r,brushRegion:i,extent:a,reverse:o,emitter:s,scale:l,coordinate:u,selection:c,series:f=!1}=e,d=ole(e,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);const h=Fe(d,"mask"),{width:p,height:g}=t.getBBox(),v=a||[0,0,p,g],m=hGe(),y=HR(t,Object.assign(Object.assign({},h),{extent:v,brushRegion:i,reverse:o,brushcreated:b}));t.addEventListener("click",x);function b(_,E,S,O,A){_===S&&E===O||(A.nativeEvent=!0,n(c(_,E,S,O),A),y.remove())}function x(_){m(_)&&(_.nativeEvent=!0,r(_))}const w=({nativeEvent:_,data:E})=>{if(_)return;const{selection:S}=E;n(S,{nativeEvent:!1})};return s.on("brush:filter",w),()=>{y.destroy(),s.off("brush:filter",w),t.removeEventListener("click",x)}}function JR(t){var{hideX:e=!0,hideY:n=!0}=t,r=ole(t,["hideX","hideY"]);return(i,a,o)=>{const{container:s,view:l,options:u,update:c,setState:f}=i,d=Is(s),h={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1};let p=!1,g=!1,v=l;const{scale:m,coordinate:y}=l;return pGe(d,Object.assign(Object.assign({brushRegion:(b,x,w,_)=>[b,x,w,_],selection:(b,x,w,_)=>{const{scale:E,coordinate:S}=v;return L1(b,x,w,_,E,S)},filter:(b,x)=>dGe(this,void 0,void 0,function*(){if(g)return;g=!0;const[w,_]=b;f("brushFilter",S=>{const{marks:O}=S,A=O.map(T=>me({axis:Object.assign(Object.assign({},e&&{x:{transform:[{type:"hide"}]}}),n&&{y:{transform:[{type:"hide"}]}})},T,{scale:{x:{domain:w,nice:!1},y:{domain:_,nice:!1}}}));return Object.assign(Object.assign({},u),{marks:A,clip:!0})}),o.emit("brush:filter",Object.assign(Object.assign({},x),{data:{selection:[w,_]}})),v=(yield c()).view,g=!1,p=!0}),reset:b=>{if(g||!p)return;const{scale:x}=l,{x:w,y:_}=x,E=w.getOptions().domain,S=_.getOptions().domain;o.emit("brush:filter",Object.assign(Object.assign({},b),{data:{selection:[E,S]}})),p=!1,v=l,f("brushFilter"),c()},extent:void 0,emitter:o,scale:m,coordinate:y},h),r))}}function gGe(t){return JR(Object.assign(Object.assign({hideX:!0},t),{brushRegion:XR}))}function vGe(t){return JR(Object.assign(Object.assign({hideY:!0},t),{brushRegion:ZR}))}var mGe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};const yGe="slider";function bGe(t,e,n,r=!1,i="x",a="y"){const{marks:o}=t,s=o.map(l=>{var u,c;return me({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},l,{scale:e,[n]:Object.assign(Object.assign({},((u=l[n])===null||u===void 0?void 0:u[i])&&{[i]:Object.assign({preserve:!0},r&&{ratio:null})}),((c=l[n])===null||c===void 0?void 0:c[a])&&{[a]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},t),{marks:s,clip:!0,animate:!1})}function xGe(t,e,n){const[r,i]=t,a=n?l=>1-l:l=>l,o=rp(e,a(r),!0),s=rp(e,a(i),!1);return Zu(e,[o,s])}function Uy(t){return[t[0],t[t.length-1]]}function sle({initDomain:t={},className:e=yGe,prefix:n="slider",setValue:r=(u,c)=>u.setValues(c),hasState:i=!1,wait:a=50,leading:o=!0,trailing:s=!1,getInitValues:l=u=>{var c;const f=(c=u==null?void 0:u.attributes)===null||c===void 0?void 0:c.values;if(f[0]!==0||f[1]!==1)return f}}){return(u,c,f)=>{const{container:d,view:h,update:p,setState:g}=u,v=d.getElementsByClassName(e);if(!v.length)return()=>{};let m=!1;const{scale:y,coordinate:b,layout:x}=h,{paddingLeft:w,paddingTop:_,paddingBottom:E,paddingRight:S}=x,{x:O,y:A}=y,T=Hn(b),I=z=>{const N=z==="vertical"?"y":"x",L=z==="vertical"?"x":"y";return T?[L,N]:[N,L]},D=new Map,R=new Set,F={x:t.x||O.getOptions().domain,y:t.y||A.getOptions().domain};for(const z of v){const{orientation:N}=z.attributes,[L,B]=I(N),$=`${n}${Bo(L)}:filter`,G=L==="x",{ratio:W}=O.getOptions(),{ratio:U}=A.getOptions(),Y=Q=>{if(Q.data){const{selection:Ee}=Q.data,[ue=Uy(F.x),he=Uy(F.y)]=Ee;return G?[Zu(O,ue,W),Zu(A,he,U)]:[Zu(A,he,U),Zu(O,ue,W)]}const{value:se}=Q.detail,de=y[L],ye=xGe(se,de,T&&N==="horizontal"),_e=F[B];return[ye,_e]},q=ou(Q=>mGe(this,void 0,void 0,function*(){const{initValue:se=!1}=Q;if(m&&!se)return;m=!0;const{nativeEvent:de=!0}=Q,[ye,_e]=Y(Q);if(F[L]=ye,F[B]=_e,de){const Ee=G?ye:_e,ue=G?_e:ye;f.emit($,Object.assign(Object.assign({},Q),{nativeEvent:de,data:{selection:[Uy(Ee),Uy(ue)]}}))}g(z,Ee=>Object.assign(Object.assign({},bGe(Ee,{[L]:{domain:ye,nice:!1}},n,i,L,B)),{paddingLeft:w,paddingTop:_,paddingBottom:E,paddingRight:S})),yield p(),m=!1}),a,{leading:o,trailing:s}),K=Q=>{const{nativeEvent:se}=Q;if(se)return;const{data:de}=Q,{selection:ye}=de,[_e,Ee]=ye;z.dispatchEvent(new _n("valuechange",{data:de,nativeEvent:!1}));const ue=G?ox(_e,O):ox(Ee,A);r(z,ue)};f.on($,K),z.addEventListener("valuechange",q),D.set(z,q),R.add([$,K]);const J=l(z);J&&z.dispatchEvent(new _n("valuechange",{detail:{value:J},nativeEvent:!1,initValue:!0}))}return()=>{for(const[z,N]of D)z.removeEventListener("valuechange",N);for(const[z,N]of R)f.off(z,N)}}}const cB="g2-scrollbar";function wGe(t={}){return(e,n,r)=>{const{view:i,container:a}=e;if(!a.getElementsByClassName(cB).length)return()=>{};const{scale:s}=i,{x:l,y:u}=s,c={x:[...l.getOptions().domain],y:[...u.getOptions().domain]};return l.update({domain:l.getOptions().expectedDomain}),u.update({domain:u.getOptions().expectedDomain}),sle(Object.assign(Object.assign({},t),{initDomain:c,className:cB,prefix:"scrollbar",hasState:!0,setValue:(d,h)=>d.setValue(h[0]),getInitValues:d=>{const h=d.slider.attributes.values;if(h[0]!==0)return h}}))(e,n,r)}}var _Ge=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function SGe(t,e,n){return`<${t} style="${Object.entries(n).map(([r,i])=>`${MIe(r)}:${i}`).join(";")}">${e}</${t}>`}const EGe={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function fB(t){return t.nodeName!=="text"?!1:!!t.isOverflowing()}function lle(t){var{offsetX:e=8,offsetY:n=8}=t,r=_Ge(t,["offsetX","offsetY"]);return i=>{const{container:a}=i,[o,s]=a.getBounds().min,l=Fe(r,"tip"),u=new Set,c=d=>{const{target:h}=d;if(!fB(h)){d.stopPropagation();return}const{offsetX:p,offsetY:g}=d,v=p+e-o,m=g+n-s;if(h.tip){h.tip.style.x=v,h.tip.style.y=m;return}const{text:y}=h.style,b=new ud({className:"poptip",style:{innerHTML:SGe("div",y,Object.assign(Object.assign({},EGe),l)),x:v,y:m}});a.appendChild(b),h.tip=b,u.add(b)},f=d=>{const{target:h}=d;if(!fB(h)){d.stopPropagation();return}h.tip&&(h.tip.remove(),h.tip=null,u.delete(h.tip))};return a.addEventListener("pointerover",c),a.addEventListener("pointerout",f),()=>{a.removeEventListener("pointerover",c),a.removeEventListener("pointerout",f),u.forEach(d=>d.remove())}}}lle.props={reapplyWhenUpdate:!0};var OGe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},kGe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function AGe(t){return pt(t).select(`.${lx}`).node()}const TGe={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function MGe(t={}){const{originData:e=[],layout:n}=t,r=kGe(t,["originData","layout"]),i=me({},TGe,r),a=Fe(i,"breadCrumb"),o=Fe(i,"active");return s=>{const{update:l,setState:u,container:c,options:f}=s,d=AGe(c),h=f.marks[0],{state:p}=h,g=new fr;d.appendChild(g);const v=(_,E)=>OGe(this,void 0,void 0,function*(){if(g.removeChildren(),E){let S="",O=a.y,A=0;const T=[],I=d.getBBox().width,D=_.map((R,F)=>{S=`${S}${R}/`,T.push(R);const z=new Va({name:S.replace(/\/$/,""),style:Object.assign(Object.assign({text:R,x:A,path:[...T],depth:F},a),{y:O})});g.appendChild(z),A+=z.getBBox().width;const N=new Va({style:Object.assign(Object.assign({x:A,text:" / "},a),{y:O})});return g.appendChild(N),A+=N.getBBox().width,A>I&&(O=g.getBBox().height+a.y,A=0,z.attr({x:A,y:O}),A+=z.getBBox().width,N.attr({x:A,y:O}),A+=N.getBBox().width),F===_b(_)-1&&N.remove(),z});D.forEach((R,F)=>{if(F===_b(D)-1)return;const z=Object.assign({},R.attributes);R.attr("cursor","pointer"),R.addEventListener("mouseenter",()=>{R.attr(o)}),R.addEventListener("mouseleave",()=>{R.attr(z)}),R.addEventListener("click",()=>{v(qt(R,["style","path"]),qt(R,["style","depth"]))})})}WWe(c,u),u("treemapDrillDown",S=>{const{marks:O}=S,A=_.join("/"),T=O.map(I=>{if(I.type!=="rect")return I;let D=e;if(E){const F=e.filter($=>{const G=qt($,["id"]);return G&&(G.match(`${A}/`)||A.match(G))}).map($=>({value:$.height===0?qt($,["value"]):void 0,name:qt($,["id"])})),{paddingLeft:z,paddingBottom:N,paddingRight:L}=n,B=Object.assign(Object.assign({},n),{paddingTop:(n.paddingTop||g.getBBox().height+10)/(E+1),paddingLeft:z/(E+1),paddingBottom:N/(E+1),paddingRight:L/(E+1),path:$=>$.name,layer:$=>$.depth===E+1});D=Jre(F,B,{value:"value"})[0]}else D=e.filter(F=>F.depth===1);const R=[];return D.forEach(({path:F})=>{R.push(Iv(F))}),me({},I,{data:D,scale:{color:{domain:R}}})});return Object.assign(Object.assign({},S),{marks:T})}),yield l(void 0,["legendFilter"])}),m=_=>_.attributes.key.split("-")[0],y=_=>qt(_,["__data__","key"]),b=_=>{const E=_.target,{markType:S,nodeName:O,attributes:A}=E||{};if(S!=="rect"&&O!==pe.TEXT)return;const T=O===pe.TEXT&&qt(A,"isTreemapLabel")===!0?m(E):y(E),I=jh(e,D=>D.id===T);qt(I,"height")&&v(qt(I,"path"),qt(I,"depth"))};d.addEventListener("click",b);const x=jK(Object.assign(Object.assign({},p.active),p.inactive)),w=()=>{Ise(d).forEach(E=>{const S=qt(E,["style","cursor"]),O=jh(e,A=>A.id===qt(E,["__data__","key"]));if(S!=="pointer"&&(O!=null&&O.height)){E.style.cursor="pointer";const A=mc(E.attributes,x);E.addEventListener("mouseenter",()=>{E.attr(p.active)}),E.addEventListener("mouseleave",()=>{E.attr(me(A,p.inactive))})}})};return w(),d.addEventListener("mousemove",w),()=>{g.remove(),d.removeEventListener("click",b),d.removeEventListener("mousemove",w)}}}var eO=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},CGe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const PGe={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},tO="movePoint",dB=t=>{const e=t.target,{markType:n}=e;n==="line"&&(e.attr("_lineWidth",e.attr("lineWidth")||1),e.attr("lineWidth",e.attr("_lineWidth")+3)),n==="interval"&&(e.attr("_opacity",e.attr("opacity")||1),e.attr("opacity",.7*e.attr("_opacity")))},hB=t=>{const e=t.target,{markType:n}=e;n==="line"&&e.attr("lineWidth",e.attr("_lineWidth")),n==="interval"&&e.attr("opacity",e.attr("_opacity"))},DGe=(t,e,n)=>e.map(r=>["x","color"].reduce((a,o)=>{const s=n[o];return s&&r[s]!==t[s]?!1:a},!0)?Object.assign(Object.assign({},r),t):r),IGe=t=>{const e=qt(t,["__data__","y"]),r=qt(t,["__data__","y1"])-e,{__data__:{data:i,encode:a,transform:o},childNodes:s}=t.parentNode,l=jh(o,({type:f})=>f==="normalizeY"),u=qt(a,["y","field"]),c=i[s.indexOf(t)][u];return(f,d=!1)=>l||d?f/(1-f)/(r/(1-r))*c:f},LGe=(t,e)=>{const n=qt(t,["__data__","seriesItems",e,"0","value"]),r=qt(t,["__data__","seriesIndex",e]),{__data__:{data:i,encode:a,transform:o}}=t.parentNode,s=jh(o,({type:c})=>c==="normalizeY"),l=qt(a,["y","field"]),u=i[r][l];return c=>s?n===1?c:c/(1-c)/(n/(1-n))*u:c},pB=(t,e,n)=>{t.forEach((r,i)=>{r.attr("stroke",e[1]===i?n.activeStroke:n.stroke)})},gB=(t,e,n,r)=>{const i=new yr({style:n}),a=new Va({style:r});return e.appendChild(a),t.appendChild(i),[i,a]},vB=(t,e)=>{if(!qt(t,["options","range","indexOf"]))return;const r=t.options.range.indexOf(e);return t.sortedDomain[r]},nO=(t,e,n)=>{const r=Tx(t,e),a=Tx(t,n)/r,o=t[0]+(e[0]-t[0])*a,s=t[1]+(e[1]-t[1])*a;return[o,s]};function RGe(t={}){const{selection:e=[],precision:n=2}=t,r=CGe(t,["selection","precision"]),i=Object.assign(Object.assign({},PGe),r||{}),a=Fe(i,"path"),o=Fe(i,"label"),s=Fe(i,"point");return(l,u,c)=>{const{update:f,setState:d,container:h,view:p,options:{marks:g,coordinate:v}}=l,m=Is(h);let y=Ise(m),b,x=e;const{transform:w=[],type:_}=v,E=!!jh(w,({type:L})=>L==="transpose"),S=_==="polar",O=_==="theta",A=!!jh(y,({markType:L})=>L==="area");A&&(y=y.filter(({markType:L})=>L==="area"));const T=new fr({style:{zIndex:2}});m.appendChild(T);const I=()=>{c.emit("element-point:select",{nativeEvent:!0,data:{selection:x}})},D=(L,B)=>{c.emit("element-point:moved",{nativeEvent:!0,data:{changeData:L,data:B}})},R=L=>{const B=L.target;x=[B.parentNode.childNodes.indexOf(B)],I(),z(B)},F=L=>{const{data:{selection:B},nativeEvent:$}=L;if($)return;x=B;const G=qt(y,[x==null?void 0:x[0]]);G&&z(G)},z=L=>{const{attributes:B,markType:$,__data__:G}=L,{stroke:W}=B,{points:U,seriesTitle:Y,color:q,title:K,seriesX:J,y1:Q}=G;if(E&&$!=="interval")return;const{scale:se,coordinate:de}=(b==null?void 0:b.view)||p,{color:ye,y:_e,x:Ee}=se,ue=de.getCenter();T.removeChildren();let he;const ke=(Se,Me,Be,en)=>eO(this,void 0,void 0,function*(){return d("elementPointMove",Ht=>{var wt;const At=(((wt=b==null?void 0:b.options)===null||wt===void 0?void 0:wt.marks)||g).map(nn=>{if(!en.includes(nn.type))return nn;const{data:sn,encode:Zt}=nn,cn=Object.keys(Zt).reduce((vn,ci)=>{const Jr=Zt[ci];return ci==="x"&&(vn[Jr]=Se),ci==="y"&&(vn[Jr]=Me),ci==="color"&&(vn[Jr]=Be),vn},{}),Nn=DGe(cn,sn,Zt);return D(cn,Nn),me({},nn,{data:Nn,animate:!1})});return Object.assign(Object.assign({},Ht),{marks:At})}),yield f("elementPointMove")});if(["line","area"].includes($))U.forEach((Se,Me)=>{const Be=Ee.invert(J[Me]);if(!Be)return;const en=new $a({name:tO,style:Object.assign({cx:Se[0],cy:Se[1],fill:W},s)}),Ht=LGe(L,Me);en.addEventListener("mousedown",wt=>{const At=de.output([J[Me],0]),nn=Y==null?void 0:Y.length;h.attr("cursor","move"),x[1]!==Me&&(x[1]=Me,I()),pB(T.childNodes,x,s);const[sn,Zt]=gB(T,en,a,o),gn=Nn=>{const vn=Se[1]+Nn.clientY-he[1];if(A)if(S){const ci=Se[0]+Nn.clientX-he[0],[Jr,_i]=nO(ue,At,[ci,vn]),[,Zi]=de.output([1,_e.output(0)]),[,jp]=de.invert([Jr,Zi-(U[Me+nn][1]-_i)]),ym=(Me+1)%nn,D_=(Me-1+nn)%nn,I_=sg([U[D_],[Jr,_i],Y[ym]&&U[ym]]);Zt.attr("text",Ht(_e.invert(jp)).toFixed(n)),sn.attr("d",I_),en.attr("cx",Jr),en.attr("cy",_i)}else{const[,ci]=de.output([1,_e.output(0)]),[,Jr]=de.invert([Se[0],ci-(U[Me+nn][1]-vn)]),_i=sg([U[Me-1],[Se[0],vn],Y[Me+1]&&U[Me+1]]);Zt.attr("text",Ht(_e.invert(Jr)).toFixed(n)),sn.attr("d",_i),en.attr("cy",vn)}else{const[,ci]=de.invert([Se[0],vn]),Jr=sg([U[Me-1],[Se[0],vn],U[Me+1]]);Zt.attr("text",_e.invert(ci).toFixed(n)),sn.attr("d",Jr),en.attr("cy",vn)}};he=[wt.clientX,wt.clientY],window.addEventListener("mousemove",gn);const cn=()=>eO(this,void 0,void 0,function*(){if(h.attr("cursor","default"),window.removeEventListener("mousemove",gn),h.removeEventListener("mouseup",cn),bt(Zt.attr("text")))return;const Nn=Number(Zt.attr("text")),vn=vB(ye,q);b=yield ke(Be,Nn,vn,["line","area"]),Zt.remove(),sn.remove(),z(L)});h.addEventListener("mouseup",cn)}),T.appendChild(en)}),pB(T.childNodes,x,s);else if($==="interval"){let Se=[(U[0][0]+U[1][0])/2,U[0][1]];E?Se=[U[0][0],(U[0][1]+U[1][1])/2]:O&&(Se=U[0]);const Me=IGe(L),Be=new $a({name:tO,style:Object.assign(Object.assign({cx:Se[0],cy:Se[1],fill:W},s),{stroke:s.activeStroke})});Be.addEventListener("mousedown",en=>{h.attr("cursor","move");const Ht=vB(ye,q),[wt,At]=gB(T,Be,a,o),nn=Zt=>{if(E){const gn=Se[0]+Zt.clientX-he[0],[cn]=de.output([_e.output(0),_e.output(0)]),[,Nn]=de.invert([cn+(gn-U[2][0]),Se[1]]),vn=sg([[gn,U[0][1]],[gn,U[1][1]],U[2],U[3]],!0);At.attr("text",Me(_e.invert(Nn)).toFixed(n)),wt.attr("d",vn),Be.attr("cx",gn)}else if(O){const gn=Se[1]+Zt.clientY-he[1],cn=Se[0]+Zt.clientX-he[0],[Nn,vn]=nO(ue,[cn,gn],Se),[ci,Jr]=nO(ue,[cn,gn],U[1]),_i=de.invert([Nn,vn])[1],Zi=Q-_i;if(Zi<0)return;const jp=xWe(ue,[[Nn,vn],[ci,Jr],U[2],U[3]],Zi>.5?1:0);At.attr("text",Me(Zi,!0).toFixed(n)),wt.attr("d",jp),Be.attr("cx",Nn),Be.attr("cy",vn)}else{const gn=Se[1]+Zt.clientY-he[1],[,cn]=de.output([1,_e.output(0)]),[,Nn]=de.invert([Se[0],cn-(U[2][1]-gn)]),vn=sg([[U[0][0],gn],[U[1][0],gn],U[2],U[3]],!0);At.attr("text",Me(_e.invert(Nn)).toFixed(n)),wt.attr("d",vn),Be.attr("cy",gn)}};he=[en.clientX,en.clientY],window.addEventListener("mousemove",nn);const sn=()=>eO(this,void 0,void 0,function*(){if(h.attr("cursor","default"),h.removeEventListener("mouseup",sn),window.removeEventListener("mousemove",nn),bt(At.attr("text")))return;const Zt=Number(At.attr("text"));b=yield ke(K,Zt,Ht,[$]),At.remove(),wt.remove(),z(L)});h.addEventListener("mouseup",sn)}),T.appendChild(Be)}};y.forEach((L,B)=>{x[0]===B&&z(L),L.addEventListener("click",R),L.addEventListener("mouseenter",dB),L.addEventListener("mouseleave",hB)});const N=L=>{const B=L==null?void 0:L.target;(!B||B.name!==tO&&!y.includes(B))&&(x=[],I(),T.removeChildren())};return c.on("element-point:select",F),c.on("element-point:unselect",N),h.addEventListener("mousedown",N),()=>{T.remove(),c.off("element-point:select",F),c.off("element-point:unselect",N),h.removeEventListener("mousedown",N),y.forEach(L=>{L.removeEventListener("click",R),L.removeEventListener("mouseenter",dB),L.removeEventListener("mouseleave",hB)})}}}var mB={},rO={},iO=34,lg=10,aO=13;function ule(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function NGe(t,e){var n=ule(t);return function(r,i){return e(n(r),i,t)}}function yB(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function Ta(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function FGe(t){return t<0?"-"+Ta(-t,6):t>9999?"+"+Ta(t,6):Ta(t,4)}function zGe(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":FGe(t.getUTCFullYear())+"-"+Ta(t.getUTCMonth()+1,2)+"-"+Ta(t.getUTCDate(),2)+(i?"T"+Ta(e,2)+":"+Ta(n,2)+":"+Ta(r,2)+"."+Ta(i,3)+"Z":r?"T"+Ta(e,2)+":"+Ta(n,2)+":"+Ta(r,2)+"Z":n||e?"T"+Ta(e,2)+":"+Ta(n,2)+"Z":"")}function jGe(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,d){var h,p,g=i(f,function(v,m){if(h)return h(v,m-1);p=v,h=d?NGe(v,d):ule(v)});return g.columns=p||[],g}function i(f,d){var h=[],p=f.length,g=0,v=0,m,y=p<=0,b=!1;f.charCodeAt(p-1)===lg&&--p,f.charCodeAt(p-1)===aO&&--p;function x(){if(y)return rO;if(b)return b=!1,mB;var _,E=g,S;if(f.charCodeAt(E)===iO){for(;g++<p&&f.charCodeAt(g)!==iO||f.charCodeAt(++g)===iO;);return(_=g)>=p?y=!0:(S=f.charCodeAt(g++))===lg?b=!0:S===aO&&(b=!0,f.charCodeAt(g)===lg&&++g),f.slice(E+1,_-1).replace(/""/g,'"')}for(;g<p;){if((S=f.charCodeAt(_=g++))===lg)b=!0;else if(S===aO)b=!0,f.charCodeAt(g)===lg&&++g;else if(S!==n)continue;return f.slice(E,_)}return y=!0,f.slice(E,p)}for(;(m=x())!==rO;){for(var w=[];m!==mB&&m!==rO;)w.push(m),m=x();d&&(w=d(w,v++))==null||h.push(w)}return h}function a(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(t)})}function o(f,d){return d==null&&(d=yB(f)),[d.map(c).join(t)].concat(a(f,d)).join(`
`)}function s(f,d){return d==null&&(d=yB(f)),a(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(t)}function c(f){return f==null?"":f instanceof Date?zGe(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:l,formatRow:u,formatValue:c}}function BGe(t){for(var e in t){var n=t[e].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))$Ge&&i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;t[e]=n}return t}const $Ge=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var VGe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};const cle=t=>{const{value:e,format:n=e.split(".").pop(),delimiter:r=",",autoType:i=!0}=t;return()=>VGe(void 0,void 0,void 0,function*(){const a=yield fetch(e);if(n==="csv"){const o=yield a.text();return jGe(r).parse(o,i?BGe:Vf)}else if(n==="json")return yield a.json();throw new Error(`Unknown format: ${n}.`)})};cle.props={};function qGe(t){return!t||Object.keys(t).length===0}const fle=t=>{const{fields:e,key:n="key",value:r="value"}=t;return i=>qGe(e)?i:i.flatMap(a=>e.map(o=>Object.assign(Object.assign({},a),{[n]:o,[r]:a[o]})))};fle.props={};function WGe(t){return t!=null&&!Number.isNaN(t)}const dle=t=>{const{callback:e=WGe}=t;return n=>n.filter(e)};dle.props={};const hle=t=>{const{callback:e}=t;return n=>Array.isArray(n)?[...n].sort(e):n};hle.props={};function GGe(t,e=[]){return e.reduce((n,r)=>(r in t&&(n[r]=t[r]),n),{})}const ple=t=>{const{fields:e}=t;return n=>n.map(r=>GGe(r,e))};ple.props={};function HGe(t){return Object.keys(t).length===0}const gle=t=>e=>{if(!t||HGe(t))return e;const n=r=>Object.entries(r).reduce((i,[a,o])=>(i[t[a]||a]=o,i),{});return e.map(n)};gle.props={};function YGe(t,e){return t.map(n=>{if(Array.isArray(n)){const[r,i=e]=n;return[r,i]}return[n,e]})}const vle=t=>{const{fields:e=[]}=t,n=YGe(e,!0);return r=>{const i=(a,o)=>n.reduce((s,[l,u=!0])=>s!==0?s:u?a[l]<o[l]?-1:+(a[l]!==o[l]):a[l]>o[l]?-1:+(a[l]!==o[l]),0);return[...r].sort(i)}};vle.props={};const mle=t=>{const{value:e}=t;return()=>e};mle.props={};const yle=t=>{const{callback:e=Vf}=t;return n=>e(n)};yle.props={};const ble=t=>{const{callback:e=Vf}=t;return n=>Array.isArray(n)?n.map(e):n};ble.props={};var UGe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};function XGe(t,e){return{set(n,r,i){if(e[n]===void 0)return this;const a=r?r.call(null,e[n]):e[n];return i?i.call(null,a):typeof t[n]=="function"?t[n](a):t[n]=a,this},setAsync(n,r,i){return UGe(this,void 0,void 0,function*(){if(e[n]===void 0)return this;const a=r?yield r.call(null,e[n]):e[n];return i?i.call(null,a):typeof t[n]=="function"?t[n](a):t[n]=a,this})}}}const oO=Math.PI/180,zg=64,z1=2048;function ZGe(t){return t.text}function KGe(){return"serif"}function bB(){return"normal"}function JGe(t){return t.value}function QGe(){return~~(Math.random()*2)*90}function eHe(){return 1}function tHe(){}function nHe(t,e,n,r){if(e.sprite)return;const i=t.context,a=t.ratio;i.clearRect(0,0,(zg<<5)/a,z1/a);let o=0,s=0,l=0;const u=n.length;for(--r;++r<u;){e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font;let d=i.measureText(e.text+"m").width*a,h=e.size<<1;if(e.rotate){const p=Math.sin(e.rotate*oO),g=Math.cos(e.rotate*oO),v=d*g,m=d*p,y=h*g,b=h*p;d=Math.max(Math.abs(v+b),Math.abs(v-b))+31>>5<<5,h=~~Math.max(Math.abs(m+y),Math.abs(m-y))}else d=d+31>>5<<5;if(h>l&&(l=h),o+d>=zg<<5&&(o=0,s+=l,l=0),s+h>=z1)break;i.translate((o+(d>>1))/a,(s+(h>>1))/a),e.rotate&&i.rotate(e.rotate*oO),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=d,e.height=h,e.xoff=o,e.yoff=s,e.x1=d>>1,e.y1=h>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=d}const c=i.getImageData(0,0,(zg<<5)/a,z1/a).data,f=[];for(;--r>=0;){if(e=n[r],!e.hasText)continue;const d=e.width,h=d>>5;let p=e.y1-e.y0;for(let m=0;m<p*h;m++)f[m]=0;if(o=e.xoff,o==null)return;s=e.yoff;let g=0,v=-1;for(let m=0;m<p;m++){for(let y=0;y<d;y++){const b=h*m+(y>>5),x=c[(s+m)*(zg<<5)+(o+y)<<2]?1<<31-y%32:0;f[b]|=x,g|=x}g?v=m:(e.y0++,p--,m--,s++)}e.y1=e.y0+v,e.sprite=f.slice(0,(e.y1-e.y0)*h)}}function rHe(t,e,n){n>>=5;const r=t.sprite,i=t.width>>5,a=t.x-(i<<4),o=a&127,s=32-o,l=t.y1-t.y0;let u=(t.y+t.y0)*n+(a>>5),c;for(let f=0;f<l;f++){c=0;for(let d=0;d<=i;d++)if((c<<s|(d<i?(c=r[f*i+d])>>>o:0))&e[u+d])return!0;u+=n}return!1}function iHe(t,e){const n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function aHe(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function xle(t){const e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function oHe(t){const n=4*t[0]/t[1];let r=0,i=0;return function(a){const o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:r+=n;break;case 1:i+=4;break;case 2:r-=n;break;default:i-=4;break}return[r,i]}}function xB(t){const e=[];let n=-1;for(;++n<t;)e[n]=0;return e}function sHe(){return document.createElement("canvas")}function Rl(t){return typeof t=="function"?t:function(){return t}}const lHe={archimedean:xle,rectangular:oHe};function uHe(){let t=[256,256],e=ZGe,n=KGe,r=JGe,i=bB,a=QGe,o=eHe,s=xle,l=Math.random,u=tHe,c=[],f=null,d=1/0,h=sHe;const p=bB,g={};g.start=function(){const[y,b]=t,x=v(h()),w=g.board?g.board:xB((t[0]>>5)*t[1]),_=c.length,E=[],S=c.map(function(I,D,R){return I.text=e.call(this,I,D,R),I.font=n.call(this,I,D,R),I.style=p.call(this,I,D,R),I.weight=i.call(this,I,D,R),I.rotate=a.call(this,I,D,R),I.size=~~r.call(this,I,D,R),I.padding=o.call(this,I,D,R),I}).sort(function(I,D){return D.size-I.size});let O=-1,A=g.board?[{x:0,y:0},{x:y,y:b}]:void 0;f&&clearInterval(f),f=setInterval(T,0),T();function T(){const I=Date.now();for(;Date.now()-I<d&&++O<_;){const D=S[O];D.x=y*(l()+.5)>>1,D.y=b*(l()+.5)>>1,nHe(x,D,S,O),D.hasText&&m(w,D,A)&&(u.call(null,"word",{cloud:g,word:D}),E.push(D),A?g.hasImage||iHe(A,D):A=[{x:D.x+D.x0,y:D.y+D.y0},{x:D.x+D.x1,y:D.y+D.y1}],D.x-=t[0]>>1,D.y-=t[1]>>1)}g._tags=E,g._bounds=A,O>=_&&(g.stop(),u.call(null,"end",{cloud:g,words:E,bounds:A}))}return g},g.stop=function(){return f&&(clearInterval(f),f=null),g};function v(y){y.width=y.height=1;const b=Math.sqrt(y.getContext("2d").getImageData(0,0,1,1).data.length>>2);y.width=(zg<<5)/b,y.height=z1/b;const x=y.getContext("2d");return x.fillStyle=x.strokeStyle="red",x.textAlign="center",x.textBaseline="middle",{context:x,ratio:b}}function m(y,b,x){const w=b.x,_=b.y,E=Math.sqrt(t[0]*t[0]+t[1]*t[1]),S=s(t),O=l()<.5?1:-1;let A,T=-O,I,D;for(;(A=S(T+=O))&&(I=~~A[0],D=~~A[1],!(Math.min(Math.abs(I),Math.abs(D))>=E));)if(b.x=w+I,b.y=_+D,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>t[0]||b.y+b.y1>t[1])&&(!x||!rHe(b,y,t[0]))&&(!x||aHe(b,x))){const R=b.sprite,F=b.width>>5,z=t[0]>>5,N=b.x-(F<<4),L=N&127,B=32-L,$=b.y1-b.y0;let G,W=(b.y+b.y0)*z+(N>>5);for(let U=0;U<$;U++){G=0;for(let Y=0;Y<=F;Y++)y[W+Y]|=G<<B|(Y<F?(G=R[U*F+Y])>>>L:0);W+=z}return delete b.sprite,!0}return!1}return g.createMask=y=>{const b=document.createElement("canvas"),[x,w]=t;if(!x||!w)return;const _=x>>5,E=xB((x>>5)*w);b.width=x,b.height=w;const S=b.getContext("2d");S.drawImage(y,0,0,y.width,y.height,0,0,x,w);const O=S.getImageData(0,0,x,w).data;for(let A=0;A<w;A++)for(let T=0;T<x;T++){const I=_*A+(T>>5),D=A*x+T<<2,F=O[D]>=250&&O[D+1]>=250&&O[D+2]>=250?1<<31-T%32:0;E[I]|=F}g.board=E,g.hasImage=!0},g.timeInterval=function(y){d=y??1/0},g.words=function(y){c=y},g.size=function(y=[]){t=[+y[0],+y[1]]},g.text=function(y){e=Rl(y)},g.font=function(y){n=Rl(y)},g.fontWeight=function(y){i=Rl(y)},g.rotate=function(y){a=Rl(y)},g.canvas=function(y){h=Rl(y)},g.spiral=function(y){s=lHe[y]||y},g.fontSize=function(y){r=Rl(y)},g.padding=function(y){o=Rl(y)},g.random=function(y){l=Rl(y)},g.on=function(y){u=Rl(y)},g}var cHe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},fHe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const dHe={fontSize:[20,60],font:"Impact",padding:2,rotate:function(){return(~~(Math.random()*6)-3)*30}};function hHe(t){return new Promise((e,n)=>{if(t instanceof HTMLImageElement){e(t);return}if(typeof t=="string"){const r=new Image;r.crossOrigin="anonymous",r.src=t,r.onload=()=>e(r),r.onerror=()=>{console.error(`'image ${t} load failed !!!'`),n()};return}n()})}function pHe(t,e){if(typeof t=="function")return t;if(Array.isArray(t)){const[n,r]=t;if(!e)return()=>(r+n)/2;const[i,a]=e;return a===i?()=>(r+n)/2:({value:o})=>(r-n)/(a-i)*(o-i)+n}return()=>t}const wle=(t,e)=>n=>cHe(void 0,void 0,void 0,function*(){const r=Object.assign({},dHe,t,{canvas:e.createCanvas}),i=uHe();yield XGe(i,r).set("fontSize",y=>{const b=n.map(x=>x.value);return pHe(y,[fo(b),yn(b)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").set("canvas").setAsync("imageMask",hHe,i.createMask),i.words([...n]);const a=i.start(),[o,s]=r.size,l=[{x:0,y:0},{x:o,y:s}],{_bounds:u=l,_tags:c,hasImage:f}=a,d=c.map(y=>{var{x:b,y:x,font:w}=y,_=fHe(y,["x","y","font"]);return Object.assign(Object.assign({},_),{x:b+o/2,y:x+s/2,fontFamily:w})}),[{x:h,y:p},{x:g,y:v}]=u,m={text:"",value:0,opacity:0,fontSize:0};return d.push(Object.assign(Object.assign({},m),{x:f?0:h,y:f?0:p}),Object.assign(Object.assign({},m),{x:f?o:g,y:f?s:v})),d});wle.props={};function wB(t){return typeof t=="string"?e=>e[t]:t}const _le=t=>{const{join:e,on:n,select:r=[],as:i=r,unknown:a=NaN}=t,[o,s]=n,l=wB(s),u=wB(o),c=DI(e,([f])=>f,f=>l(f));return f=>f.map(d=>{const h=c.get(u(d));return Object.assign(Object.assign({},d),r.reduce((p,g,v)=>(p[i[v]]=h?h[g]:a,p),{}))})};_le.props={};const Sle=t=>{const{start:e,end:n}=t;return r=>r.slice(e,n)};Sle.props={};var sO={exports:{}},lO={exports:{}},_B;function gHe(){return _B||(_B=1,function(t){var e=t.exports;t.exports.isNumber=function(n){return typeof n=="number"},t.exports.findMin=function(n){if(n.length===0)return 1/0;for(var r=n[0],i=1;i<n.length;i++)r=Math.min(r,n[i]);return r},t.exports.findMax=function(n){if(n.length===0)return-1/0;for(var r=n[0],i=1;i<n.length;i++)r=Math.max(r,n[i]);return r},t.exports.findMinMulti=function(n){for(var r=e.findMin(n[0]),i=1;i<n.length;i++)r=Math.min(r,e.findMin(n[i]));return r},t.exports.findMaxMulti=function(n){for(var r=e.findMax(n[0]),i=1;i<n.length;i++)r=Math.max(r,e.findMax(n[i]));return r},t.exports.inside=function(n,r,i){return n<=i&&i<=r}}(lO)),lO.exports}var SB;function vHe(){return SB||(SB=1,function(t){var e=50,n=2,r=Math.log(2),i=t.exports,a=gHe();function o(l){return 1-Math.abs(l)}t.exports.getUnifiedMinMax=function(l,u){return i.getUnifiedMinMaxMulti([l],u)},t.exports.getUnifiedMinMaxMulti=function(l,u){u=u||{};var c=!1,f=!1,d=a.isNumber(u.width)?u.width:n,h=a.isNumber(u.size)?u.size:e,p=a.isNumber(u.min)?u.min:(c=!0,a.findMinMulti(l)),g=a.isNumber(u.max)?u.max:(f=!0,a.findMaxMulti(l)),v=g-p,m=v/(h-1);return c&&(p=p-2*d*m),f&&(g=g+2*d*m),{min:p,max:g}},t.exports.create=function(l,u){if(u=u||{},!l||l.length===0)return[];var c=a.isNumber(u.size)?u.size:e,f=a.isNumber(u.width)?u.width:n,d=i.getUnifiedMinMax(l,{size:c,width:f,min:u.min,max:u.max}),h=d.min,p=d.max,g=p-h,v=g/(c-1);if(g===0)return[{x:h,y:1}];for(var m=[],y=0;y<c;y++)m.push({x:h+y*v,y:0});var b=function(T){return Math.floor((T-h)/v)},x=s(o,f),w=x[f],_=x[f-1]-x[f-2],E=0;l.forEach(function(T){var I=b(T);if(!(I+f<0||I-f>=m.length)){var D=Math.max(I-f,0),R=I,F=Math.min(I+f,m.length-1),z=D-(I-f),N=I+f-F,L=x[-f-1+z]||0,B=x[-f-1+N]||0,$=w/(w-L-B);z>0&&(E+=$*(z-1)*_);var G=Math.max(0,I-f+1);a.inside(0,m.length-1,G)&&(m[G].y+=$*1*_),a.inside(0,m.length-1,R+1)&&(m[R+1].y-=$*2*_),a.inside(0,m.length-1,F+1)&&(m[F+1].y+=$*1*_)}});var S=E,O=0,A=0;return m.forEach(function(T){O+=T.y,S+=O,T.y=S,A+=S}),A>0&&m.forEach(function(T){T.y/=A}),m};function s(l,u){for(var c={},f=0,d=-u;d<=u;d++)f+=l(d/u),c[d]=f;return c}t.exports.getExpectedValueFromPdf=function(l){if(!(!l||l.length===0)){var u=0;return l.forEach(function(c){u+=c.x*c.y}),u}},t.exports.getXWithLeftTailArea=function(l,u){if(!(!l||l.length===0)){for(var c=0,f=0,d=0;d<l.length&&(f=d,c+=l[d].y,!(c>=u));d++);return l[f].x}},t.exports.getPerplexity=function(l){if(!(!l||l.length===0)){var u=0;return l.forEach(function(c){var f=Math.log(c.y);isFinite(f)&&(u+=c.y*f)}),u=-u/r,Math.pow(2,u)}}}(sO)),sO.exports}var mHe=vHe();const yHe=dp(mHe),Ele=t=>{const{field:e,groupBy:n,as:r=["y","size"],min:i,max:a,size:o=10,width:s}=t,[l,u]=r;return c=>Array.from(Bn(c,d=>n.map(h=>d[h]).join("-")).values()).map(d=>{const h=yHe.create(d.map(v=>v[e]),{min:i,max:a,size:o,width:s}),p=h.map(v=>v.x),g=h.map(v=>v.y);return Object.assign(Object.assign({},d[0]),{[l]:p,[u]:g})})};Ele.props={};function bHe(t,e,n,r){r=r||{};const i=r.maxIterations||100,a=r.tolerance||1e-10,o=t(e),s=t(n);let l=n-e;if(o*s>0)throw"Initial bisect points must have opposite signs";if(o===0)return e;if(s===0)return n;for(let u=0;u<i;++u){l/=2;const c=e+l,f=t(c);if(f*o>=0&&(e=c),Math.abs(l)<a||f===0)return c}return e+l}function KP(t){const e=new Array(t);for(let n=0;n<t;++n)e[n]=0;return e}function EB(t,e){return KP(t).map(()=>KP(e))}function _h(t,e){let n=0;for(let r=0;r<t.length;++r)n+=t[r]*e[r];return n}function JP(t){return Math.sqrt(_h(t,t))}function QP(t,e,n){for(let r=0;r<e.length;++r)t[r]=e[r]*n}function Wl(t,e,n,r,i){for(let a=0;a<t.length;++a)t[a]=e*n[a]+r*i[a]}function xHe(t,e,n){n=n||{};const r=n.maxIterations||e.length*200,i=n.nonZeroDelta||1.05,a=n.zeroDelta||.001,o=n.minErrorDelta||1e-6,s=n.minErrorDelta||1e-5,l=n.rho!==void 0?n.rho:1,u=n.chi!==void 0?n.chi:2,c=n.psi!==void 0?n.psi:-.5,f=n.sigma!==void 0?n.sigma:.5;let d;const h=e.length,p=new Array(h+1);p[0]=e,p[0].fx=t(e),p[0].id=0;for(let w=0;w<h;++w){const _=e.slice();_[w]=_[w]?_[w]*i:a,p[w+1]=_,p[w+1].fx=t(_),p[w+1].id=w+1}function g(w){for(let _=0;_<w.length;_++)p[h][_]=w[_];p[h].fx=w.fx}const v=(w,_)=>w.fx-_.fx,m=e.slice(),y=e.slice(),b=e.slice(),x=e.slice();for(let w=0;w<r;++w){if(p.sort(v),n.history){const E=p.map(S=>{const O=S.slice();return O.fx=S.fx,O.id=S.id,O});E.sort((S,O)=>S.id-O.id),n.history.push({x:p[0].slice(),fx:p[0].fx,simplex:E})}d=0;for(let E=0;E<h;++E)d=Math.max(d,Math.abs(p[0][E]-p[1][E]));if(Math.abs(p[0].fx-p[h].fx)<o&&d<s)break;for(let E=0;E<h;++E){m[E]=0;for(let S=0;S<h;++S)m[E]+=p[S][E];m[E]/=h}const _=p[h];if(Wl(y,1+l,m,-l,_),y.fx=t(y),y.fx<p[0].fx)Wl(x,1+u,m,-u,_),x.fx=t(x),x.fx<y.fx?g(x):g(y);else if(y.fx>=p[h-1].fx){let E=!1;if(y.fx>_.fx?(Wl(b,1+c,m,-c,_),b.fx=t(b),b.fx<_.fx?g(b):E=!0):(Wl(b,1-c*l,m,c*l,_),b.fx=t(b),b.fx<y.fx?g(b):E=!0),E){if(f>=1)break;for(let S=1;S<p.length;++S)Wl(p[S],1-f,p[0],f,p[S]),p[S].fx=t(p[S])}}else g(y)}return p.sort(v),{fx:p[0].fx,x:p[0]}}function wHe(t,e,n,r,i,a,o){const s=n.fx,l=_h(n.fxprime,e);let u=s,c=s,f=l,d=0;i=i||1,a=a||1e-6,o=o||.1;function h(p,g,v){for(let m=0;m<16;++m)if(i=(p+g)/2,Wl(r.x,1,n.x,i,e),u=r.fx=t(r.x,r.fxprime),f=_h(r.fxprime,e),u>s+a*i*l||u>=v)g=i;else{if(Math.abs(f)<=-o*l)return i;f*(g-p)>=0&&(g=p),p=i,v=u}return 0}for(let p=0;p<10;++p){if(Wl(r.x,1,n.x,i,e),u=r.fx=t(r.x,r.fxprime),f=_h(r.fxprime,e),u>s+a*i*l||p&&u>=c)return h(d,i,c);if(Math.abs(f)<=-o*l)return i;if(f>=0)return h(i,d,u);c=u,d=i,i*=2}return i}function _He(t,e,n){let r={x:e.slice(),fx:0,fxprime:e.slice()},i={x:e.slice(),fx:0,fxprime:e.slice()};const a=e.slice();let o,s=1;n=n||{};const l=n.maxIterations||e.length*20;r.fx=t(r.x,r.fxprime);const u=r.fxprime.slice();QP(u,r.fxprime,-1);for(let c=0;c<l;++c){if(s=wHe(t,u,r,i,s),n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:s}),!s)QP(u,r.fxprime,-1);else{Wl(a,1,i.fxprime,-1,r.fxprime);const f=_h(r.fxprime,r.fxprime),d=Math.max(0,_h(a,i.fxprime)/f);Wl(u,d,u,-1,i.fxprime),o=r,r=i,i=o}if(JP(r.fxprime)<=1e-5)break}return n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:s}),r}const Ole=1e-10;function kle(t,e){const n=EHe(t),r=n.filter(function(l){return SHe(l,t)});let i=0,a=0,o;const s=[];if(r.length>1){const l=OHe(r);for(o=0;o<r.length;++o){const c=r[o];c.angle=Math.atan2(c.x-l.x,c.y-l.y)}r.sort(function(c,f){return f.angle-c.angle});let u=r[r.length-1];for(o=0;o<r.length;++o){const c=r[o];a+=(u.x+c.x)*(c.y-u.y);const f={x:(c.x+u.x)/2,y:(c.y+u.y)/2};let d=null;for(let h=0;h<c.parentIndex.length;++h)if(u.parentIndex.indexOf(c.parentIndex[h])>-1){const p=t[c.parentIndex[h]],g=Math.atan2(c.x-p.x,c.y-p.y),v=Math.atan2(u.x-p.x,u.y-p.y);let m=v-g;m<0&&(m+=2*Math.PI);const y=v-m/2;let b=sv(f,{x:p.x+p.radius*Math.sin(y),y:p.y+p.radius*Math.cos(y)});b>p.radius*2&&(b=p.radius*2),(d===null||d.width>b)&&(d={circle:p,width:b,p1:c,p2:u})}d!==null&&(s.push(d),i+=eD(d.circle.radius,d.width),u=c)}}else{let l=t[0];for(o=1;o<t.length;++o)t[o].radius<l.radius&&(l=t[o]);let u=!1;for(o=0;o<t.length;++o)if(sv(t[o],l)>Math.abs(l.radius-t[o].radius)){u=!0;break}u?i=a=0:(i=l.radius*l.radius*Math.PI,s.push({circle:l,p1:{x:l.x,y:l.y+l.radius},p2:{x:l.x-Ole,y:l.y+l.radius},width:l.radius*2}))}return a/=2,e&&(e.area=i+a,e.arcArea=i,e.polygonArea=a,e.arcs=s,e.innerPoints=r,e.intersectionPoints=n),i+a}function SHe(t,e){for(let n=0;n<e.length;++n)if(sv(t,e[n])>e[n].radius+Ole)return!1;return!0}function EHe(t){const e=[];for(let n=0;n<t.length;++n)for(let r=n+1;r<t.length;++r){const i=Tle(t[n],t[r]);for(let a=0;a<i.length;++a){const o=i[a];o.parentIndex=[n,r],e.push(o)}}return e}function eD(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function sv(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function Ale(t,e,n){if(n>=t+e)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);const r=t-(n*n-e*e+t*t)/(2*n),i=e-(n*n-t*t+e*e)/(2*n);return eD(t,r)+eD(e,i)}function Tle(t,e){const n=sv(t,e),r=t.radius,i=e.radius;if(n>=r+i||n<=Math.abs(r-i))return[];const a=(r*r-i*i+n*n)/(2*n),o=Math.sqrt(r*r-a*a),s=t.x+a*(e.x-t.x)/n,l=t.y+a*(e.y-t.y)/n,u=-(e.y-t.y)*(o/n),c=-(e.x-t.x)*(o/n);return[{x:s+u,y:l-c},{x:s-u,y:l+c}]}function OHe(t){const e={x:0,y:0};for(let n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}function kHe(t,e){e=e||{},e.maxIterations=e.maxIterations||500;const n=e.initialLayout||CHe,r=e.lossFunction||QR;t=AHe(t);const i=n(t,e),a=[],o=[];let s;for(s in i)i.hasOwnProperty(s)&&(a.push(i[s].x),a.push(i[s].y),o.push(s));const u=xHe(function(c){const f={};for(let d=0;d<o.length;++d){const h=o[d];f[h]={x:c[2*d],y:c[2*d+1],radius:i[h].radius}}return r(f,t)},a,e).x;for(let c=0;c<o.length;++c)s=o[c],i[s].x=u[2*c],i[s].y=u[2*c+1];return i}const Mle=1e-10;function tD(t,e,n){return Math.min(t,e)*Math.min(t,e)*Math.PI<=n+Mle?Math.abs(t-e):bHe(function(r){return Ale(t,e,r)-n},0,t+e)}function AHe(t){t=t.slice();const e=[],n={};let r,i,a,o;for(r=0;r<t.length;++r){const s=t[r];s.sets.length==1?e.push(s.sets[0]):s.sets.length==2&&(a=s.sets[0],o=s.sets[1],n[[a,o]]=!0,n[[o,a]]=!0)}for(e.sort((s,l)=>s>l?1:-1),r=0;r<e.length;++r)for(a=e[r],i=r+1;i<e.length;++i)o=e[i],[a,o]in n||t.push({sets:[a,o],size:0});return t}function THe(t,e,n){const r=EB(e.length,e.length),i=EB(e.length,e.length);return t.filter(function(a){return a.sets.length==2}).map(function(a){const o=n[a.sets[0]],s=n[a.sets[1]],l=Math.sqrt(e[o].size/Math.PI),u=Math.sqrt(e[s].size/Math.PI),c=tD(l,u,a.size);r[o][s]=r[s][o]=c;let f=0;a.size+1e-10>=Math.min(e[o].size,e[s].size)?f=1:a.size<=1e-10&&(f=-1),i[o][s]=i[s][o]=f}),{distances:r,constraints:i}}function MHe(t,e,n,r){let i=0,a;for(a=0;a<e.length;++a)e[a]=0;for(a=0;a<n.length;++a){const o=t[2*a],s=t[2*a+1];for(let l=a+1;l<n.length;++l){const u=t[2*l],c=t[2*l+1],f=n[a][l],d=r[a][l],h=(u-o)*(u-o)+(c-s)*(c-s),p=Math.sqrt(h),g=h-f*f;d>0&&p<=f||d<0&&p>=f||(i+=2*g*g,e[2*a]+=4*g*(o-u),e[2*a+1]+=4*g*(s-c),e[2*l]+=4*g*(u-o),e[2*l+1]+=4*g*(c-s))}}return i}function CHe(t,e){let n=DHe(t,e);const r=e.lossFunction||QR;if(t.length>=8){const i=PHe(t,e),a=r(i,t),o=r(n,t);a+1e-8<o&&(n=i)}return n}function PHe(t,e){e=e||{};const n=e.restarts||10,r=[],i={};let a;for(a=0;a<t.length;++a){const g=t[a];g.sets.length==1&&(i[g.sets[0]]=r.length,r.push(g))}const o=THe(t,r,i);let s=o.distances;const l=o.constraints,u=JP(s.map(JP))/s.length;s=s.map(function(g){return g.map(function(v){return v/u})});const c=function(g,v){return MHe(g,v,s,l)};let f,d;for(a=0;a<n;++a){const g=KP(s.length*2).map(Math.random);d=_He(c,g,e),(!f||d.fx<f.fx)&&(f=d)}const h=f.x,p={};for(a=0;a<r.length;++a){const g=r[a];p[g.sets[0]]={x:h[2*a]*u,y:h[2*a+1]*u,radius:Math.sqrt(g.size/Math.PI)}}if(e.history)for(a=0;a<e.history.length;++a)QP(e.history[a].x,u);return p}function DHe(t,e){const n=e&&e.lossFunction?e.lossFunction:QR,r={},i={};let a;for(let f=0;f<t.length;++f){const d=t[f];d.sets.length==1&&(a=d.sets[0],r[a]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:d.size,radius:Math.sqrt(d.size/Math.PI)},i[a]=[])}t=t.filter(function(f){return f.sets.length==2});for(let f=0;f<t.length;++f){const d=t[f];let h=d.hasOwnProperty("weight")?d.weight:1;const p=d.sets[0],g=d.sets[1];d.size+Mle>=Math.min(r[p].size,r[g].size)&&(h=0),i[p].push({set:g,size:d.size,weight:h}),i[g].push({set:p,size:d.size,weight:h})}const o=[];for(a in i)if(i.hasOwnProperty(a)){let f=0;for(let d=0;d<i[a].length;++d)f+=i[a][d].size*i[a][d].weight;o.push({set:a,size:f})}function s(f,d){return d.size-f.size}o.sort(s);const l={};function u(f){return f.set in l}function c(f,d){r[d].x=f.x,r[d].y=f.y,l[d]=!0}c({x:0,y:0},o[0].set);for(let f=1;f<o.length;++f){const d=o[f].set,h=i[d].filter(u);if(a=r[d],h.sort(s),h.length===0)throw"ERROR: missing pairwise overlap information";const p=[];for(let m=0;m<h.length;++m){const y=r[h[m].set],b=tD(a.radius,y.radius,h[m].size);p.push({x:y.x+b,y:y.y}),p.push({x:y.x-b,y:y.y}),p.push({y:y.y+b,x:y.x}),p.push({y:y.y-b,x:y.x});for(let x=m+1;x<h.length;++x){const w=r[h[x].set],_=tD(a.radius,w.radius,h[x].size),E=Tle({x:y.x,y:y.y,radius:b},{x:w.x,y:w.y,radius:_});for(let S=0;S<E.length;++S)p.push(E[S])}}let g=1e50,v=p[0];for(let m=0;m<p.length;++m){r[d].x=p[m].x,r[d].y=p[m].y;const y=n(r,t);y<g&&(g=y,v=p[m])}c(v,d)}return r}function QR(t,e){let n=0;function r(i){return i.map(function(a){return t[a]})}for(let i=0;i<e.length;++i){const a=e[i];let o;if(a.sets.length==1)continue;if(a.sets.length==2){const l=t[a.sets[0]],u=t[a.sets[1]];o=Ale(l.radius,u.radius,sv(l,u))}else o=kle(r(a.sets));const s=a.hasOwnProperty("weight")?a.weight:1;n+=s*(o-a.size)*(o-a.size)}return n}function IHe(t){const e=function(n){const r=Math.max.apply(null,t.map(function(a){return a[n]+a.radius})),i=Math.min.apply(null,t.map(function(a){return a[n]-a.radius}));return{max:r,min:i}};return{xRange:e("x"),yRange:e("y")}}function LHe(t,e,n,r){const i=[],a=[];for(const g in t)t.hasOwnProperty(g)&&(a.push(g),i.push(t[g]));e-=2*r,n-=2*r;const o=IHe(i),s=o.xRange,l=o.yRange;if(s.max==s.min||l.max==l.min)return t;const u=e/(s.max-s.min),c=n/(l.max-l.min),f=Math.min(c,u),d=(e-(s.max-s.min)*f)/2,h=(n-(l.max-l.min)*f)/2,p={};for(let g=0;g<i.length;++g){const v=i[g];p[a[g]]={radius:f*v.radius,x:r+d+(v.x-s.min)*f,y:r+h+(v.y-l.min)*f}}return p}function RHe(t,e,n){const r=[],i=t-n,a=e;return r.push("M",i,a),r.push("A",n,n,0,1,0,i+2*n,a),r.push("A",n,n,0,1,0,i,a),r.join(" ")}function NHe(t){const e={};kle(t,e);const n=e.arcs;if(n.length===0)return"M 0 0";if(n.length==1){const r=n[0].circle;return RHe(r.x,r.y,r.radius)}else{const r=[`
M`,n[0].p2.x,n[0].p2.y];for(let i=0;i<n.length;++i){const a=n[i],o=a.circle.radius,s=a.width>o;r.push(`
A`,o,o,0,s?1:0,1,a.p1.x,a.p1.y)}return r.join(" ")}}const Cle=t=>{const{sets:e="sets",size:n="size",as:r=["key","path"],padding:i=0}=t,[a,o]=r;return s=>{const l=s.map(f=>Object.assign(Object.assign({},f),{sets:f[e],size:f[n],[a]:f.sets.join("&")}));l.sort((f,d)=>f.sets.length-d.sets.length);const u=kHe(l);let c;return l.map(f=>{const d=f[e],h=({width:p,height:g})=>{c=c||LHe(u,p,g,i);const v=d.map(y=>c[y]);let m=NHe(v);return/[zZ]$/.test(m)||(m+=" Z"),m};return Object.assign(Object.assign({},f),{[o]:h})})}};Cle.props={};const Ple=()=>t=>t;Ple.props={};function FHe(t,e){if(e<0||e>1)throw new Error("alpha must be between 0 and 1.");if(t.length===0)return[];let n=t[0];const r=[];for(const i of t){if(i==null){r.push(i),console.warn("EMAThe value is null or undefined",t);continue}n==null&&(n=i);const a=n*e+(1-e)*i;r.push(a),n=a}return r}const Dle=t=>{const{field:e="y",alpha:n=.6,as:r=e}=t;return i=>{const a=i.map(s=>s[e]),o=FHe(a,n);return i.map((s,l)=>Object.assign(Object.assign({},s),{[r]:o[l]}))}};Dle.props={};const Ile=.01;function nD(t){const{min:e,max:n}=t;return[[e[0],e[1]],[n[0],n[1]]]}function OB(t,e,n=Ile){const[r,i]=t,[a,o]=e;return r>=a[0]-n&&r<=o[0]+n&&i>=a[1]-n&&i<=o[1]+n}function zHe(t,e,n=Ile){const[r,i]=t;return!(OB(r,e,n)&&OB(i,e,n))}function jHe(t,e){const[n,r]=t,[i,a]=e;return n[0]<a[0]&&r[0]>i[0]&&n[1]<a[1]&&r[1]>i[1]}const BHe=t=>{const{priority:e}=t;return n=>{const r=[];return e&&n.sort(e),n.forEach(i=>{dw(i);const a=i.getLocalBounds();r.some(s=>jHe(nD(a),nD(s.getLocalBounds())))?VR(i):r.push(i)}),n}};function $He([t,e],[n,r]){return r>t&&e>n}function Xy(){const t=new Map;return[r=>t.get(r),(r,i)=>t.set(r,i)]}function VHe(t){const e=t.cloneNode(!0),n=e.getElementById("connector");n&&e.removeChild(n);const{min:r,max:i}=e.getRenderBounds();return e.destroy(),{min:r,max:i}}const qHe=t=>{const{maxIterations:e=10,maxError:n=.1,padding:r=1}=t;return i=>{const a=i.length;if(a<=1)return i;const[o,s]=Xy(),[l,u]=Xy(),[c,f]=Xy(),[d,h]=Xy();for(const p of i){const{min:g,max:v}=VHe(p),[m,y]=g,[b,x]=v;s(p,y),u(p,y),f(p,x-y),h(p,[m,b])}for(let p=0;p<e;p++){i.sort((v,m)=>Mr(l(v),l(m)));let g=0;for(let v=0;v<a-1;v++){const m=i[v];let y=v+1,b;for(;(b=i[y])&&!$He(d(m),d(b));)y+=1;if(b){const x=l(m),w=c(m),_=l(b),E=_-(x+w);if(E<r){const S=(r-E)/2;g=Math.max(g,S),u(m,x-S),u(b,_+S)}}}if(g<n)break}for(const p of i)p.style.y+=l(p)-o(p);return i}};function WHe(t){return typeof t=="object"?t:sc(t)}function uO(t){let e=t/255;return e=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),e}function kB(t,e,n){return .2126*uO(t)+.7152*uO(e)+.0722*uO(n)}function Lle(t,e){if(!t||!e||t===e)return 1;const{r:n,g:r,b:i}=t,{r:a,g:o,b:s}=e,l=kB(n,r,i),u=kB(a,o,s);return(Math.max(l,u)+.05)/(Math.min(l,u)+.05)}function GHe(t,e){const n=yp(e,r=>Lle(t,WHe(r)));return e[n]}const HHe=t=>{const{threshold:e=4.5,palette:n=["#000","#fff"]}=t;return r=>(r.forEach(i=>{const a=i.attr("dependentElement").parsedStyle.fill,o=i.parsedStyle.fill;Lle(o,a)<e&&i.attr("fill",GHe(a,n))}),r)},YHe=()=>t=>(t.forEach(e=>{dw(e);const n=e.attr("bounds"),r=e.getLocalBounds();zHe(nD(r),n)&&VR(e)}),t),UHe=(t,e)=>{const[[n,r],[i,a]]=e,[[o,s],[l,u]]=t;let c=0,f=0;return o<n?c=n-o:l>i&&(c=i-l),s<r?f=r-s:u>a&&(f=a-u),[c,f]},XHe=()=>(t,{canvas:e,layout:n})=>(t.forEach(r=>{dw(r);const{max:i,min:a}=r.getRenderBounds(),[o,s]=i,[l,u]=a,c=UHe([[l,u],[o,s]],[[n.x,n.y],[n.x+n.width,n.y+n.height]]);r.style.connector&&r.style.connectorPoints&&(r.style.connectorPoints[0][0]-=c[0],r.style.connectorPoints[0][1]-=c[1]),r.style.x+=c[0],r.style.y+=c[1]}),t);function ZHe(){return{"data.fetch":cle,"data.inline":mle,"data.sortBy":vle,"data.sort":hle,"data.filter":dle,"data.pick":ple,"data.rename":gle,"data.fold":fle,"data.slice":Sle,"data.custom":yle,"data.map":ble,"data.join":_le,"data.kde":Ele,"data.log":Ple,"data.wordCloud":wle,"data.ema":Dle,"transform.stackY":lQ,"transform.binX":jQ,"transform.bin":UI,"transform.dodgeX":bQ,"transform.jitter":_Q,"transform.jitterX":SQ,"transform.jitterY":EQ,"transform.symmetryY":OQ,"transform.diffY":kQ,"transform.stackEnter":xQ,"transform.normalizeY":wQ,"transform.select":M2,"transform.selectX":AQ,"transform.selectY":TQ,"transform.groupX":MQ,"transform.groupY":CQ,"transform.groupColor":PQ,"transform.group":Bv,"transform.sortX":DQ,"transform.sortY":LQ,"transform.sortColor":IQ,"transform.flexX":RQ,"transform.pack":zQ,"transform.sample":BQ,"transform.filter":$Q,"coordinate.cartesian":AK,"coordinate.polar":Dv,"coordinate.transpose":wI,"coordinate.theta":CK,"coordinate.parallel":SI,"coordinate.fisheye":DK,"coordinate.radial":_I,"coordinate.radar":IK,"coordinate.helix":MK,"encode.constant":LK,"encode.field":NK,"encode.transform":RK,"encode.column":FK,"mark.interval":wre,"mark.rect":_re,"mark.line":Sre,"mark.point":Ere,"mark.text":Ore,"mark.cell":kre,"mark.area":Are,"mark.link":GL,"mark.image":Tre,"mark.polygon":Mre,"mark.box":Cre,"mark.vector":Pre,"mark.lineX":Ire,"mark.lineY":Dre,"mark.connector":Lre,"mark.range":Rre,"mark.rangeX":Nre,"mark.rangeY":Fre,"mark.path":Vre,"mark.shape":iie,"mark.density":Sie,"mark.heatmap":Eie,"mark.wordCloud":KL,"palette.category10":kie,"palette.category20":Aie,"scale.linear":Mie,"scale.ordinal":Cie,"scale.band":Tie,"scale.identity":Pie,"scale.point":Die,"scale.time":Iie,"scale.log":Lie,"scale.pow":Rie,"scale.sqrt":jie,"scale.threshold":Nie,"scale.quantile":Fie,"scale.quantize":zie,"scale.sequential":Bie,"scale.constant":$ie,"theme.classic":Vie,"theme.classicDark":Wie,"theme.academy":Gie,"theme.light":QL,"theme.dark":qie,"component.axisX":nae,"component.axisY":rae,"component.legendCategory":tR,"component.legendContinuous":Fc,"component.legends":dae,"component.title":sae,"component.sliderX":lae,"component.sliderY":uae,"component.scrollbarX":cae,"component.scrollbarY":fae,"animation.scaleInX":rR,"animation.scaleOutX":WFe,"animation.scaleInY":hae,"animation.scaleOutY":GFe,"animation.waveIn":yae,"animation.fadeIn":pae,"animation.fadeOut":gae,"animation.zoomIn":n7e,"animation.zoomOut":r7e,"animation.pathIn":bae,"animation.morphing":mae,"animation.growInX":xae,"animation.growInY":wae,"interaction.elementHighlight":hw,"interaction.elementHighlightByX":Rse,"interaction.elementHighlightByColor":Nse,"interaction.elementSelect":pw,"interaction.elementSelectByX":Fse,"interaction.elementSelectByColor":zse,"interaction.fisheye":CWe,"interaction.chartIndex":jse,"interaction.tooltip":Zse,"interaction.legendFilter":UWe,"interaction.legendHighlight":XWe,"interaction.brushHighlight":UR,"interaction.brushXHighlight":tGe,"interaction.brushYHighlight":nGe,"interaction.brushAxisHighlight":fGe,"interaction.brushFilter":JR,"interaction.brushXFilter":gGe,"interaction.brushYFilter":vGe,"interaction.sliderFilter":sle,"interaction.scrollbarFilter":wGe,"interaction.poptip":lle,"interaction.treemapDrillDown":MGe,"interaction.elementPointMove":RGe,"composition.spaceLayer":$ae,"composition.spaceFlex":Vae,"composition.facetRect":Yae,"composition.repeatMatrix":pje,"composition.facetCircle":xje,"composition.timingKeyframe":Uae,"labelTransform.overlapHide":BHe,"labelTransform.overlapDodgeY":qHe,"labelTransform.overflowHide":YHe,"labelTransform.contrastReverse":HHe,"labelTransform.exceedAdjust":XHe}}function KHe(){return{"composition.geoView":Soe,"composition.geoPath":Xae}}function JHe(){return{"data.arc":YL,"data.cluster":bie,"mark.forceGraph":mie,"mark.tree":wie,"mark.pack":eie,"mark.sankey":Bre,"mark.chord":$re,"mark.treemap":Qre}}function QHe(){return{"data.venn":Cle,"mark.boxplot":rie,"mark.gauge":_ie,"mark.wordCloud":KL,"mark.liquid":Oie}}function eYe(){return Object.assign(Object.assign(Object.assign(Object.assign({},KHe()),JHe()),QHe()),ZHe())}function tYe(t,e){class n extends t{constructor(i){super(Object.assign(Object.assign({},i),{lib:e}))}}return n}const nYe={},Vd=t=>t?parseInt(t):0;function rYe(t){const e=getComputedStyle(t),n=t.clientWidth||Vd(e.width),r=t.clientHeight||Vd(e.height),i=Vd(e.paddingLeft)+Vd(e.paddingRight),a=Vd(e.paddingTop)+Vd(e.paddingBottom);return{width:n-i,height:r-a}}function cO(t,e){const n=[t];for(;n.length;){const r=n.shift();e&&e(r);const i=r.children||[];for(const a of i)n.push(a)}}class e4{constructor(e={},n){this.parentNode=null,this.children=[],this.index=0,this.type=n,this.value=e}map(e=n=>n){const n=e(this.value);return this.value=n,this}attr(e,n){return arguments.length===1?this.value[e]:this.map(r=>(r[e]=n,r))}append(e){const n=new e({});return n.children=[],this.push(n),n}push(e){return e.parentNode=this,e.index=this.children.length,this.children.push(e),this}remove(){const e=this.parentNode;if(e){const{children:n}=e,r=n.findIndex(i=>i===this);n.splice(r,1)}return this}getNodeByKey(e){let n=null;return cO(this,i=>{e===i.attr("key")&&(n=i)}),n}getNodesByType(e){const n=[];return cO(this,i=>{e===i.type&&n.push(i)}),n}getNodeByType(e){let n=null;return cO(this,r=>{n||e===r.type&&(n=r)}),n}call(e,...n){return e(this.map(),...n),this}getRoot(){let e=this;for(;e&&e.parentNode;)e=e.parentNode;return e}}var Rle=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const rD=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title","interaction"],Nle="__remove__",Fle="__callback__",AB=1,TB=1;function iYe(t){if(t===void 0){const e=document.createElement("div");return e[Nle]=!0,e}return typeof t=="string"?document.getElementById(t):t}function aYe(t){const e=t.parentNode;e&&e.removeChild(t)}function oYe(t){if(t.type!==null)return t;const e=t.children[t.children.length-1];for(const n of rD)e.attr(n,t.attr(n));return e}function MB(t){return Object.assign(Object.assign({},t.value),{type:t.type})}function fO(t,e){const{width:n,height:r,autoFit:i,depth:a=0}=t;let o=640,s=480;if(i){const{width:l,height:u}=rYe(e);o=l||o,s=u||s}return o=n||o,s=r||s,{width:Math.max(je(o)?o:AB,AB),height:Math.max(je(s)?s:TB,TB),depth:a}}function sYe(t){const e=oYe(t),n=[e],r=new Map;for(r.set(e,MB(e));n.length;){const i=n.pop(),a=r.get(i),{children:o=[]}=i;for(const s of o)if(s.type===Fle)a.children=s.value;else{const l=MB(s),{children:u=[]}=a;u.push(l),n.push(s),r.set(s,l),a.children=u}}return r.get(e)}function lYe(t,e){return typeof t=="function"?!0:new Set(Object.keys(e)).has(t)}function uYe(t,e){return typeof t!="function"&&new Set(Object.keys(e)).has(t)}function cYe(t,e,n,r,i){const{type:a}=t,{type:o=n||a}=e;if(uYe(o,i)){for(const s of rD)t.attr(s)!==void 0&&e[s]===void 0&&(e[s]=t.attr(s));return e}if(lYe(o,r)){const s={type:"view"},l=Object.assign({},e);for(const u of rD)l[u]!==void 0&&(s[u]=l[u],delete l[u]);return Object.assign(Object.assign({},s),{children:[l]})}return e}function fYe(t,e,n){if(typeof t=="function")return e.mark;const i=Object.assign(Object.assign({},e),n)[t];if(!i)throw new Error(`Unknown mark: ${t}.`);return i}function dYe(t,e,n){if(typeof t=="function"){const l=new e4;return l.value=t,l.type=Fle,l}const{type:r,children:i}=t,a=Rle(t,["type","children"]),o=fYe(r,e,n),s=new o;return s.value=a,s.type=r,s}function hYe(t,e){const{type:n,children:r}=e,i=Rle(e,["type","children"]);t.type===n||n===void 0?tQ(t.value,i):typeof n=="string"&&(t.type=n,t.value=i)}function pYe(t,e,n,r){if(!t)return;const i=[[t,e]];for(;i.length;){const[a,o]=i.shift(),s=dYe(o,n,r);Array.isArray(a.children)&&a.push(s);const{children:l}=o;if(Array.isArray(l))for(const u of l)i.push([s,u]);else typeof l=="function"&&i.push([s,l])}}function gYe(t,e,n,r,i){const a=cYe(t,e,n,r,i),o=[[null,t,a]];for(;o.length;){const[s,l,u]=o.shift();if(!l)pYe(s,u,r,i);else if(!u)l.remove();else{hYe(l,u);const{children:c}=u,{children:f}=l;if(Array.isArray(c)&&Array.isArray(f)){const d=Math.max(c.length,f.length);for(let h=0;h<d;h++){const p=c[h],g=f[h];o.push([l,g,p])}}else typeof c=="function"&&o.push([l,null,c])}}}function vYe(){let t,e;return[new Promise((r,i)=>{e=r,t=i}),e,t]}function mYe(t,e,{key:n=e}){t.prototype[e]=function(r){return arguments.length===0?this.attr(n):this.attr(n,r)}}function yYe(t,e,{key:n=e}){t.prototype[e]=function(r){if(arguments.length===0)return this.attr(n);if(Array.isArray(r))return this.attr(n,r);const i=[...this.attr(n)||[],r];return this.attr(n,i)}}function bYe(t,e,{key:n=e}){t.prototype[e]=function(r,i){if(arguments.length===0)return this.attr(n);if(arguments.length===1&&typeof r!="string")return this.attr(n,r);const a=this.attr(n)||{};return a[r]=arguments.length===1?!0:i,this.attr(n,a)}}function xYe(t,e,n){t.prototype[e]=function(r){if(arguments.length===0)return this.attr(e);if(Array.isArray(r))return this.attr(e,{items:r});if(Hh(r)&&(r.title!==void 0||r.items!==void 0))return this.attr(e,r);if(r===null||r===!1)return this.attr(e,r);const i=this.attr(e)||{},{items:a=[]}=i;return a.push(r),i.items=a,this.attr(e,i)}}function wYe(t,e,{ctor:n}){t.prototype[e]=function(r){const i=this.append(n);return e==="mark"&&(i.type=r),i}}function _Ye(t,e,{ctor:n}){t.prototype[e]=function(){return this.type=null,this.append(n)}}function Cx(t){return e=>{for(const[n,r]of Object.entries(t)){const{type:i}=r;i==="value"?mYe(e,n,r):i==="array"?yYe(e,n,r):i==="object"?bYe(e,n,r):i==="node"?wYe(e,n,r):i==="container"?_Ye(e,n,r):i==="mix"&&xYe(e,n)}return e}}function CB(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,{type:"node",ctor:n}]))}const zle={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},SYe=Object.assign(Object.assign({},zle),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),EYe=Object.assign(Object.assign({},zle),{labelTransform:{type:"array"}});var OYe=function(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};let Px=class extends e4{changeData(e){var n;const r=this.getRoot();if(r)return this.attr("data",e),!((n=this.children)===null||n===void 0)&&n.length&&this.children.forEach(i=>{i.attr("data",e)}),r==null?void 0:r.render()}getView(){const e=this.getRoot(),{views:n}=e.getContext();if(n!=null&&n.length)return n.find(r=>r.key===this._key)}getScale(){var e;return(e=this.getView())===null||e===void 0?void 0:e.scale}getScaleByChannel(e){const n=this.getScale();if(n)return n[e]}getCoordinate(){var e;return(e=this.getView())===null||e===void 0?void 0:e.coordinate}getTheme(){var e;return(e=this.getView())===null||e===void 0?void 0:e.theme}getGroup(){const e=this._key;return e?this.getRoot().getContext().canvas.getRoot().getElementById(e):void 0}show(){const e=this.getGroup();e&&!e.isVisible()&&dw(e)}hide(){const e=this.getGroup();e&&e.isVisible()&&VR(e)}};Px=OYe([Cx(EYe)],Px);var kYe=function(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};let iD=class extends e4{changeData(e){const n=this.getRoot();if(n)return this.attr("data",e),n==null?void 0:n.render()}getMark(){var e;const n=(e=this.getRoot())===null||e===void 0?void 0:e.getView();if(!n)return;const{markState:r}=n,i=Array.from(r.keys()).find(a=>a.key===this.attr("key"));return r.get(i)}getScale(){var e;const n=(e=this.getRoot())===null||e===void 0?void 0:e.getView();if(n)return n==null?void 0:n.scale}getScaleByChannel(e){var n,r;const i=(n=this.getRoot())===null||n===void 0?void 0:n.getView();if(i)return(r=i==null?void 0:i.scale)===null||r===void 0?void 0:r[e]}getGroup(){const e=this.attr("key");return e?this.getRoot().getContext().canvas.getRoot().getElementById(e):void 0}};iD=kYe([Cx(SYe)],iD);var AYe=function(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},TYe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const MYe="G2_CHART_KEY";class CYe extends Px{constructor(e){const{container:n,canvas:r,renderer:i,plugins:a,lib:o,createCanvas:s}=e,l=TYe(e,["container","canvas","renderer","plugins","lib","createCanvas"]);super(l,"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=gp(()=>{this.forceFit()},300),this._renderer=i||new Hf,this._plugins=a||[],this._container=iYe(n),this._emitter=new kp,this._context={library:Object.assign(Object.assign({},o),nYe),emitter:this._emitter,canvas:r,createCanvas:s},this._create()}render(){if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._bindAutoFit(),this._rendering=!0;const e=new Promise((a,o)=>fWe(this._computedOptions(),this._context,this._createResolve(a),this._createReject(o))),[n,r,i]=vYe();return e.then(r).catch(i).then(()=>this._renderTrailing()),n}options(e){if(arguments.length===0)return sYe(this);const{type:n}=e;return n&&(this._previousDefinedType=n),gYe(this,e,this._previousDefinedType,this._marks,this._compositions),this}getContainer(){return this._container}getContext(){return this._context}on(e,n,r){return this._emitter.on(e,n,r),this}once(e,n){return this._emitter.once(e,n),this}emit(e,...n){return this._emitter.emit(e,...n),this}off(e,n){return this._emitter.off(e,n),this}clear(){const e=this.options();this.emit(xn.BEFORE_CLEAR),this._reset(),rB(e,this._context,!1),this.emit(xn.AFTER_CLEAR)}destroy(){const e=this.options();this.emit(xn.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),rB(e,this._context,!0),this._container[Nle]&&aYe(this._container),this.emit(xn.AFTER_DESTROY)}forceFit(){this.options.autoFit=!0;const{width:e,height:n}=fO(this.options(),this._container);if(e===this._width&&n===this._height)return Promise.resolve(this);this.emit(xn.BEFORE_CHANGE_SIZE);const r=this.render();return r.then(()=>{this.emit(xn.AFTER_CHANGE_SIZE)}),r}changeSize(e,n){if(e===this._width&&n===this._height)return Promise.resolve(this);this.emit(xn.BEFORE_CHANGE_SIZE),this.attr("width",e),this.attr("height",n);const r=this.render();return r.then(()=>{this.emit(xn.AFTER_CHANGE_SIZE)}),r}getDataByXY(e,n={}){const{shared:r=!1,series:i,facet:a=!1,startX:o=0,startY:s=0}=n,{canvas:l,views:u}=this._context,{document:c}=l,{x:f,y:d}=e,{coordinate:h,scale:p,markState:g,data:v,key:m}=u[0],y=c.getElementsByClassName(Gs),b=r?T=>T.__data__.x:T=>T,x=Bn(y,b),w=c.getElementsByClassName(sx)[0],_=Is(w),E=T=>Array.from(T.values()).some(I=>{var D,R;return((D=I.interaction)===null||D===void 0?void 0:D.seriesTooltip)||((R=I.channels)===null||R===void 0?void 0:R.some(F=>F.name==="series"&&F.values!==void 0))}),S=Ws(i,E(g)),O=T=>qt(T,"__data__.data",null),A=T=>T.map(O);try{if(S&&E(g)&&!a){const{selectedData:R}=Xse({root:_,event:{offsetX:f,offsetY:d},elements:y,coordinate:h,scale:p,startX:o,startY:s}),F=v.get(`${m}-0`);return R.map(({index:z})=>F[z])}const T=Use({root:_,event:{offsetX:f,offsetY:d},elements:y,coordinate:h,scale:p,shared:r}),I=b(T),D=x.get(I);return D?A(D):[]}catch{const I=l.document.elementFromPointSync(f,d);return I?O(I):[]}}_create(){const{library:e}=this._context,n=a=>a.startsWith("mark.")||a==="component.axisX"||a==="component.axisY"||a==="component.legends",r=["mark.mark",...Object.keys(e).filter(n)];this._marks={};for(const a of r){const o=a.split(".").pop();class s extends iD{constructor(){super({},o)}}this._marks[o]=s,this[o]=function(l){const u=this.append(s);return o==="mark"&&(u.type=l),u}}const i=["composition.view",...Object.keys(e).filter(a=>a.startsWith("composition.")&&a!=="composition.mark")];this._compositions=Object.fromEntries(i.map(a=>{const o=a.split(".").pop();let s=class extends Px{constructor(){super({},o)}};return s=AYe([Cx(CB(this._marks))],s),[o,s]}));for(const a of Object.values(this._compositions))Cx(CB(this._compositions))(a);for(const a of i){const o=a.split(".").pop();this[o]=function(){const s=this._compositions[o];return this.type=null,this.append(s)}}}_reset(){const e=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([n])=>n.startsWith("margin")||n.startsWith("padding")||n.startsWith("inset")||e.includes(n))),this.children=[]}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{const e=this._trailingResolve.bind(this);this._trailingResolve=null,e(this)}).catch(e=>{const n=this._trailingReject.bind(this);this._trailingReject=null,n(e)}))}_createResolve(e){return()=>{this._rendering=!1,e(this)}}_createReject(e){return n=>{this._rendering=!1,e(n)}}_computedOptions(){const e=this.options(),{key:n=MYe}=e,{width:r,height:i,depth:a}=fO(e,this._container);return this._width=r,this._height=i,this._key=n,Object.assign(Object.assign({key:this._key},e),{width:r,height:i,depth:a})}_createCanvas(){const{width:e,height:n}=fO(this.options(),this._container);this._plugins.push(new sR),this._plugins.forEach(r=>this._renderer.registerPlugin(r)),this._context.canvas=new V0({container:this._container,width:e,height:n,renderer:this._renderer})}_addToTrailing(){var e;return(e=this._trailingResolve)===null||e===void 0||e.call(this,this),this._trailing=!0,new Promise((r,i)=>{this._trailingResolve=r,this._trailingReject=i})}_bindAutoFit(){const e=this.options(),{autoFit:n}=e;if(this._hasBindAutoFit){n||this._unbindAutoFit();return}n&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}const PYe=Object.assign({},eYe()),Pi=tYe(CYe,PYe),Ir=Pv(["default","academy"]).optional().default("default").describe("Set the theme for the chart, optional, default is 'default'.");cr().optional().default(600).describe("Set the width of chart, default is 600.");cr().optional().default(400).describe("Set the height of chart, default is 400.");const Di=dt().optional().default("").describe("Set the title of chart."),El=dt().optional().default("").describe("Set the x-axis title of chart."),gu=dt().optional().default("").describe("Set the y-axis title of chart."),jle=St({name:dt()}),Ble=St({source:dt(),target:dt(),name:dt().default("").optional()});dt().describe("The map title should not exceed 16 characters. The content should be consistent with the information the map wants to convey and should be accurate, rich, creative, and attractive.");cr().optional().default(1600).describe("Set the width of map, default is 1600.");cr().optional().default(1600).describe("Set the height of map, default is 1600.");Rn(dt()).nonempty("At least one POI name is required.").describe('A list of keywords for the names of points of interest (POIs) in Chinese. These POIs usually contain a group of places with similar locations, so the names should be more descriptive, adding attributives to indicate that they are different places in the same area, such as "" is better than "", "" is better than "". The tool will use these keywords to search for specific POIs and query their detailed data, such as latitude and longitude, location photos, etc. For example, ["", "", ""].');const DYe=Symbol("Let zodToJsonSchema decide on which parser to use"),PB={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},IYe=t=>typeof t=="string"?{...PB,name:t}:{...PB,...t},LYe=t=>{const e=IYe(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function $le(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function Dn(t,e,n,r,i){t[e]=n,$le(t,e,r,i)}function RYe(){return{}}function NYe(t,e){var r,i,a;const n={type:"array"};return(r=t.type)!=null&&r._def&&((a=(i=t.type)==null?void 0:i._def)==null?void 0:a.typeName)!==qe.ZodAny&&(n.items=mn(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Dn(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Dn(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Dn(n,"minItems",t.exactLength.value,t.exactLength.message,e),Dn(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function FYe(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Dn(n,"minimum",r.value,r.message,e):Dn(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Dn(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Dn(n,"maximum",r.value,r.message,e):Dn(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Dn(n,"maximum",r.value,r.message,e));break;case"multipleOf":Dn(n,"multipleOf",r.value,r.message,e);break}return n}function zYe(){return{type:"boolean"}}function Vle(t,e){return mn(t.type._def,e)}const jYe=(t,e)=>mn(t.innerType._def,e);function qle(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,a)=>qle(t,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return BYe(t,e)}}const BYe=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":Dn(n,"minimum",r.value,r.message,e);break;case"max":Dn(n,"maximum",r.value,r.message,e);break}return n};function $Ye(t,e){return{...mn(t.innerType._def,e),default:t.defaultValue()}}function VYe(t,e){return e.effectStrategy==="input"?mn(t.schema._def,e):{}}function qYe(t){return{type:"string",enum:Array.from(t.values)}}const WYe=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function GYe(t,e){const n=[mn(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),mn(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach(a=>{if(WYe(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(r=void 0);else{let o=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:s,...l}=a;o=l}else r=void 0;i.push(o)}}),i.length?{allOf:i,...r}:void 0}function HYe(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let dO;const es={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(dO===void 0&&(dO=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),dO),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Wle(t,e){const n={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":Dn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":Dn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":ts(n,"email",r.message,e);break;case"format:idn-email":ts(n,"idn-email",r.message,e);break;case"pattern:zod":da(n,es.email,r.message,e);break}break;case"url":ts(n,"uri",r.message,e);break;case"uuid":ts(n,"uuid",r.message,e);break;case"regex":da(n,r.regex,r.message,e);break;case"cuid":da(n,es.cuid,r.message,e);break;case"cuid2":da(n,es.cuid2,r.message,e);break;case"startsWith":da(n,RegExp(`^${hO(r.value,e)}`),r.message,e);break;case"endsWith":da(n,RegExp(`${hO(r.value,e)}$`),r.message,e);break;case"datetime":ts(n,"date-time",r.message,e);break;case"date":ts(n,"date",r.message,e);break;case"time":ts(n,"time",r.message,e);break;case"duration":ts(n,"duration",r.message,e);break;case"length":Dn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),Dn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":{da(n,RegExp(hO(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&ts(n,"ipv4",r.message,e),r.version!=="v4"&&ts(n,"ipv6",r.message,e);break}case"base64url":da(n,es.base64url,r.message,e);break;case"jwt":da(n,es.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&da(n,es.ipv4Cidr,r.message,e),r.version!=="v4"&&da(n,es.ipv6Cidr,r.message,e);break}case"emoji":da(n,es.emoji(),r.message,e);break;case"ulid":{da(n,es.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{ts(n,"binary",r.message,e);break}case"contentEncoding:base64":{Dn(n,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{da(n,es.base64,r.message,e);break}}break}case"nanoid":da(n,es.nanoid,r.message,e)}return n}function hO(t,e){return e.patternStrategy==="escape"?UYe(t):t}const YYe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function UYe(t){let e="";for(let n=0;n<t.length;n++)YYe.has(t[n])||(e+="\\"),e+=t[n];return e}function ts(t,e,n,r){var i;t.format||(i=t.anyOf)!=null&&i.some(a=>a.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Dn(t,"format",e,n,r)}function da(t,e,n,r){var i;t.pattern||(i=t.allOf)!=null&&i.some(a=>a.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:DB(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Dn(t,"pattern",DB(e,r),n,r)}function DB(t,e){var l;if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source;let i="",a=!1,o=!1,s=!1;for(let u=0;u<r.length;u++){if(a){i+=r[u],a=!1;continue}if(n.i){if(o){if(r[u].match(/[a-z]/)){s?(i+=r[u],i+=`${r[u-2]}-${r[u]}`.toUpperCase(),s=!1):r[u+1]==="-"&&((l=r[u+2])!=null&&l.match(/[a-z]/))?(i+=r[u],s=!0):i+=`${r[u]}${r[u].toUpperCase()}`;continue}}else if(r[u].match(/[a-z]/)){i+=`[${r[u]}${r[u].toUpperCase()}]`;continue}}if(n.m){if(r[u]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(r[u]==="$"){i+=`($|(?=[\r
]))`;continue}}if(n.s&&r[u]==="."){i+=o?`${r[u]}\r
`:`[${r[u]}\r
]`;continue}i+=r[u],r[u]==="\\"?a=!0:o&&r[u]==="]"?o=!1:!o&&r[u]==="["&&(o=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}function Gle(t,e){var r,i,a,o,s,l;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===qe.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((u,c)=>({...u,[c]:mn(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",c]})??{}}),{}),additionalProperties:e.rejectedAdditionalProperties};const n={type:"object",additionalProperties:mn(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return n;if(((i=t.keyType)==null?void 0:i._def.typeName)===qe.ZodString&&((a=t.keyType._def.checks)!=null&&a.length)){const{type:u,...c}=Wle(t.keyType._def,e);return{...n,propertyNames:c}}else{if(((o=t.keyType)==null?void 0:o._def.typeName)===qe.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(((s=t.keyType)==null?void 0:s._def.typeName)===qe.ZodBranded&&t.keyType._def.type._def.typeName===qe.ZodString&&((l=t.keyType._def.type._def.checks)!=null&&l.length)){const{type:u,...c}=Vle(t.keyType._def,e);return{...n,propertyNames:c}}}return n}function XYe(t,e){if(e.mapStrategy==="record")return Gle(t,e);const n=mn(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=mn(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function ZYe(t){const e=t.values,r=Object.keys(t.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),i=Array.from(new Set(r.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function KYe(){return{not:{}}}function JYe(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Dx={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function QYe(t,e){if(e.target==="openApi3")return IB(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in Dx&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((i,a)=>{const o=Dx[a._def.typeName];return o&&!i.includes(o)?[...i,o]:i},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((i,a)=>{const o=typeof a._def.value;switch(o){case"string":case"number":case"boolean":return[...i,o];case"bigint":return[...i,"integer"];case"object":if(a._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===n.length){const i=r.filter((a,o,s)=>s.indexOf(a)===o);return{type:i.length>1?i:i[0],enum:n.reduce((a,o)=>a.includes(o._def.value)?a:[...a,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,i)=>[...r,...i._def.values.filter(a=>!r.includes(a))],[])};return IB(t,e)}const IB=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,i)=>mn(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function eUe(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Dx[t.innerType._def.typeName],nullable:!0}:{type:[Dx[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=mn(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=mn(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function tUe(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",$le(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Dn(n,"minimum",r.value,r.message,e):Dn(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Dn(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Dn(n,"maximum",r.value,r.message,e):Dn(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Dn(n,"maximum",r.value,r.message,e));break;case"multipleOf":Dn(n,"multipleOf",r.value,r.message,e);break}return n}function nUe(t,e){const n=e.target==="openAi",r={type:"object",properties:{}},i=[],a=t.shape();for(const s in a){let l=a[s];if(l===void 0||l._def===void 0)continue;let u=iUe(l);u&&n&&(l instanceof Xl&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),u=!1);const c=mn(l._def,{...e,currentPath:[...e.currentPath,"properties",s],propertyPath:[...e.currentPath,"properties",s]});c!==void 0&&(r.properties[s]=c,u||i.push(s))}i.length&&(r.required=i);const o=rUe(t,e);return o!==void 0&&(r.additionalProperties=o),r}function rUe(t,e){if(t.catchall._def.typeName!=="ZodNever")return mn(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function iUe(t){try{return t.isOptional()}catch{return!0}}const aUe=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return mn(t.innerType._def,e);const n=mn(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},oUe=(t,e)=>{if(e.pipeStrategy==="input")return mn(t.in._def,e);if(e.pipeStrategy==="output")return mn(t.out._def,e);const n=mn(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=mn(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(i=>i!==void 0)}};function sUe(t,e){return mn(t.type._def,e)}function lUe(t,e){const r={type:"array",uniqueItems:!0,items:mn(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Dn(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Dn(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function uUe(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>mn(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:mn(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>mn(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function cUe(){return{not:{}}}function fUe(){return{}}const dUe=(t,e)=>mn(t.innerType._def,e),hUe=(t,e,n)=>{switch(e){case qe.ZodString:return Wle(t,n);case qe.ZodNumber:return tUe(t,n);case qe.ZodObject:return nUe(t,n);case qe.ZodBigInt:return FYe(t,n);case qe.ZodBoolean:return zYe();case qe.ZodDate:return qle(t,n);case qe.ZodUndefined:return cUe();case qe.ZodNull:return JYe(n);case qe.ZodArray:return NYe(t,n);case qe.ZodUnion:case qe.ZodDiscriminatedUnion:return QYe(t,n);case qe.ZodIntersection:return GYe(t,n);case qe.ZodTuple:return uUe(t,n);case qe.ZodRecord:return Gle(t,n);case qe.ZodLiteral:return HYe(t,n);case qe.ZodEnum:return qYe(t);case qe.ZodNativeEnum:return ZYe(t);case qe.ZodNullable:return eUe(t,n);case qe.ZodOptional:return aUe(t,n);case qe.ZodMap:return XYe(t,n);case qe.ZodSet:return lUe(t,n);case qe.ZodLazy:return()=>t.getter()._def;case qe.ZodPromise:return sUe(t,n);case qe.ZodNaN:case qe.ZodNever:return KYe();case qe.ZodEffects:return VYe(t,n);case qe.ZodAny:return RYe();case qe.ZodUnknown:return fUe();case qe.ZodDefault:return $Ye(t,n);case qe.ZodBranded:return Vle(t,n);case qe.ZodReadonly:return dUe(t,n);case qe.ZodCatch:return jYe(t,n);case qe.ZodPipeline:return oUe(t,n);case qe.ZodFunction:case qe.ZodVoid:case qe.ZodSymbol:return;default:return(r=>{})()}};function mn(t,e,n=!1){var s;const r=e.seen.get(t);if(e.override){const l=(s=e.override)==null?void 0:s.call(e,t,e,r,n);if(l!==DYe)return l}if(r&&!n){const l=pUe(r,e);if(l!==void 0)return l}const i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);const a=hUe(t,t.typeName,e),o=typeof a=="function"?mn(a(),e):a;if(o&&vUe(t,e,o),e.postProcess){const l=e.postProcess(o,t,e);return i.jsonSchema=o,l}return i.jsonSchema=o,o}const pUe=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:gUe(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},gUe=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")},vUe=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),mUe=(t,e)=>{const n=LYe(e),r=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[u,c])=>({...l,[u]:mn(c._def,{...n,currentPath:[...n.basePath,n.definitionPath,u]},!0)??{}}),{}):void 0,i=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,a=mn(t._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1)??{},o=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;o!==void 0&&(a.title=o);const s=i===void 0?r?{...a,[n.definitionPath]:r}:a:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...r,[i]:a}};return n.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};function Lr(t){return mUe(St(t),{rejectedAdditionalProperties:void 0})}const yUe={duration:500},bUe={duration:1e3,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",iterations:1,fill:"both"};var ir;(function(t){t.NodeAdded="NodeAdded",t.NodeUpdated="NodeUpdated",t.NodeRemoved="NodeRemoved",t.EdgeAdded="EdgeAdded",t.EdgeUpdated="EdgeUpdated",t.EdgeRemoved="EdgeRemoved",t.ComboAdded="ComboAdded",t.ComboUpdated="ComboUpdated",t.ComboRemoved="ComboRemoved"})(ir||(ir={}));var Ma;(function(t){t.DRAW="draw",t.COLLAPSE="collapse",t.EXPAND="expand",t.TRANSFORM="transform"})(Ma||(Ma={}));var fu;(function(t){t.CLICK="canvas:click",t.DBLCLICK="canvas:dblclick",t.POINTER_OVER="canvas:pointerover",t.POINTER_LEAVE="canvas:pointerleave",t.POINTER_ENTER="canvas:pointerenter",t.POINTER_MOVE="canvas:pointermove",t.POINTER_OUT="canvas:pointerout",t.POINTER_DOWN="canvas:pointerdown",t.POINTER_UP="canvas:pointerup",t.CONTEXT_MENU="canvas:contextmenu",t.DRAG_START="canvas:dragstart",t.DRAG="canvas:drag",t.DRAG_END="canvas:dragend",t.DRAG_ENTER="canvas:dragenter",t.DRAG_OVER="canvas:dragover",t.DRAG_LEAVE="canvas:dragleave",t.DROP="canvas:drop",t.WHEEL="canvas:wheel"})(fu||(fu={}));var gf;(function(t){t.CLICK="combo:click",t.DBLCLICK="combo:dblclick",t.POINTER_OVER="combo:pointerover",t.POINTER_LEAVE="combo:pointerleave",t.POINTER_ENTER="combo:pointerenter",t.POINTER_MOVE="combo:pointermove",t.POINTER_OUT="combo:pointerout",t.POINTER_DOWN="combo:pointerdown",t.POINTER_UP="combo:pointerup",t.CONTEXT_MENU="combo:contextmenu",t.DRAG_START="combo:dragstart",t.DRAG="combo:drag",t.DRAG_END="combo:dragend",t.DRAG_ENTER="combo:dragenter",t.DRAG_OVER="combo:dragover",t.DRAG_LEAVE="combo:dragleave",t.DROP="combo:drop"})(gf||(gf={}));var be;(function(t){t.CLICK="click",t.DBLCLICK="dblclick",t.POINTER_OVER="pointerover",t.POINTER_LEAVE="pointerleave",t.POINTER_ENTER="pointerenter",t.POINTER_MOVE="pointermove",t.POINTER_OUT="pointerout",t.POINTER_DOWN="pointerdown",t.POINTER_UP="pointerup",t.CONTEXT_MENU="contextmenu",t.DRAG_START="dragstart",t.DRAG="drag",t.DRAG_END="dragend",t.DRAG_ENTER="dragenter",t.DRAG_OVER="dragover",t.DRAG_LEAVE="dragleave",t.DROP="drop",t.KEY_DOWN="keydown",t.KEY_UP="keyup",t.WHEEL="wheel",t.PINCH="pinch"})(be||(be={}));var oh;(function(t){t.KEY_DOWN="keydown",t.KEY_UP="keyup"})(oh||(oh={}));var Ix;(function(t){t.CLICK="edge:click",t.DBLCLICK="edge:dblclick",t.POINTER_OVER="edge:pointerover",t.POINTER_LEAVE="edge:pointerleave",t.POINTER_ENTER="edge:pointerenter",t.POINTER_MOVE="edge:pointermove",t.POINTER_OUT="edge:pointerout",t.POINTER_DOWN="edge:pointerdown",t.POINTER_UP="edge:pointerup",t.CONTEXT_MENU="edge:contextmenu",t.DRAG_ENTER="edge:dragenter",t.DRAG_OVER="edge:dragover",t.DRAG_LEAVE="edge:dragleave",t.DROP="edge:drop"})(Ix||(Ix={}));var Le;(function(t){t.BEFORE_CANVAS_INIT="beforecanvasinit",t.AFTER_CANVAS_INIT="aftercanvasinit",t.BEFORE_SIZE_CHANGE="beforesizechange",t.AFTER_SIZE_CHANGE="aftersizechange",t.BEFORE_ELEMENT_CREATE="beforeelementcreate",t.AFTER_ELEMENT_CREATE="afterelementcreate",t.BEFORE_ELEMENT_UPDATE="beforeelementupdate",t.AFTER_ELEMENT_UPDATE="afterelementupdate",t.BEFORE_ELEMENT_DESTROY="beforeelementdestroy",t.AFTER_ELEMENT_DESTROY="afterelementdestroy",t.BEFORE_ELEMENT_TRANSLATE="beforeelementtranslate",t.AFTER_ELEMENT_TRANSLATE="afterelementtranslate",t.BEFORE_DRAW="beforedraw",t.AFTER_DRAW="afterdraw",t.BEFORE_RENDER="beforerender",t.AFTER_RENDER="afterrender",t.BEFORE_ANIMATE="beforeanimate",t.AFTER_ANIMATE="afteranimate",t.BEFORE_LAYOUT="beforelayout",t.AFTER_LAYOUT="afterlayout",t.BEFORE_STAGE_LAYOUT="beforestagelayout",t.AFTER_STAGE_LAYOUT="afterstagelayout",t.BEFORE_TRANSFORM="beforetransform",t.AFTER_TRANSFORM="aftertransform",t.BATCH_START="batchstart",t.BATCH_END="batchend",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.BEFORE_RENDERER_CHANGE="beforerendererchange",t.AFTER_RENDERER_CHANGE="afterrendererchange"})(Le||(Le={}));var Nu;(function(t){t.UNDO="undo",t.REDO="redo",t.CANCEL="cancel",t.ADD="add",t.CLEAR="clear",t.CHANGE="change"})(Nu||(Nu={}));var Ao;(function(t){t.CLICK="node:click",t.DBLCLICK="node:dblclick",t.POINTER_OVER="node:pointerover",t.POINTER_LEAVE="node:pointerleave",t.POINTER_ENTER="node:pointerenter",t.POINTER_MOVE="node:pointermove",t.POINTER_OUT="node:pointerout",t.POINTER_DOWN="node:pointerdown",t.POINTER_UP="node:pointerup",t.CONTEXT_MENU="node:contextmenu",t.DRAG_START="node:dragstart",t.DRAG="node:drag",t.DRAG_END="node:dragend",t.DRAG_ENTER="node:dragenter",t.DRAG_OVER="node:dragover",t.DRAG_LEAVE="node:dragleave",t.DROP="node:drop"})(Ao||(Ao={}));const Fn="combo",eo="tree";var Sc;(function(t){t.NODE="node",t.EDGE="edge",t.COMBO="combo",t.THEME="theme",t.PALETTE="palette",t.LAYOUT="layout",t.BEHAVIOR="behavior",t.PLUGIN="plugin",t.ANIMATION="animation",t.TRANSFORM="transform",t.SHAPE="shape"})(Sc||(Sc={}));const aD={animation:{},behavior:{},combo:{},edge:{},layout:{},node:{},palette:{},theme:{},plugin:{},transform:{},shape:{}};function du(t,e){var n;const r=(n=aD[t])===null||n===void 0?void 0:n[e];if(r)return r}const xUe="5.0.48",wUe="G6";function Ul(t){return`[${wUe} v${xUe}] ${t}`}const Ol={mute:!1,debug:t=>{console.debug(Ul(t))},info:t=>{console.info(Ul(t))},warn:t=>{console.warn(Ul(t))},error:t=>{console.error(Ul(t))}};function Hle(t){const{theme:e}=t;if(!e)return{};const n=du(Sc.THEME,e);return n||(Ol.warn(`The theme of ${e} is not registered.`),{})}function t4(t,e){if(Array.isArray(t)&&t.length===0)return null;const n=Array.isArray(t)?t[0]:t,r=Array.isArray(t)?t.slice(1):e||[];return new Proxy(n,{get(i,a){return typeof i[a]=="function"&&!["onframe","onfinish"].includes(a)?(...o)=>{i[a](...o),r.forEach(s=>{var l;return(l=s[a])===null||l===void 0?void 0:l.call(s,...o)})}:a==="finished"?Promise.all([n.finished,...r.map(o=>o.finished)]):Reflect.get(i,a)},set(i,a,o){return["onframe","onfinish"].includes(a)||r.forEach(s=>{s[a]=o}),Reflect.set(i,a,o)}})}function oD(t){const e=t.reduce((r,i)=>(Object.entries(i).forEach(([a,o])=>{r[a]===void 0?r[a]=[o]:r[a].push(o)}),r),{});Object.entries(e).forEach(([r,i])=>{(i.length!==t.length||i.some(a=>lt(a))||i.every(a=>!["sourceNode","targetNode","childrenNode"].includes(r)&&br(a,i[0])))&&delete e[r]});const n=Object.entries(e).reduce((r,[i,a])=>(a.forEach((o,s)=>{r[s]?r[s][i]=o:r[s]={[i]:o}}),r),[]);return t.length!==0&&n.length===0&&n.push({_:0},{_:0}),n}function lv(t){switch(t){case"opacity":return 1;case"x":case"y":case"z":case"zIndex":return 0;case"visibility":return"visible";case"collapsed":return!1;case"states":return[];default:return}}function Yle(t,e){const{animation:n}=t;if(n===!1||e===!1)return!1;const r=Object.assign({},yUe);return jr(n)&&Object.assign(r,n),jr(e)&&Object.assign(r,e),r}function _Ue(t){if(typeof t=="string"){const e=du(Sc.ANIMATION,t);return e||(Ol.warn(`The animation of ${t} is not registered.`),[])}return t}function SUe(t,e,n,r){var i,a;const{animation:o}=t;if(o===!1||r===!1)return[];const s=(i=t==null?void 0:t[e])===null||i===void 0?void 0:i.animation;if(s===!1)return[];const l=s==null?void 0:s[n];if(l===!1)return[];const u=(a=Hle(t)[e])===null||a===void 0?void 0:a.animation,c=(d=[])=>_Ue(d).map(h=>Object.assign(Object.assign(Object.assign(Object.assign({},bUe),jr(o)&&o),h),jr(r)&&r));if(l)return c(l);if(!u)return[];const f=u[n];return f===!1?[]:c(f)}function Ule(t,e,n,r=[]){if(!r&&t===0&&e===0&&n===0)return null;if(Array.isArray(r)){let a=-1;const o=[];for(let s=0;s<r.length;s++){const l=r[s];if(l[0]==="translate"){if(l[1]===t&&l[2]===e)return null;a=s,o.push(["translate",t,e])}else if(l[0]==="translate3d"){if(l[1]===t&&l[2]===e&&l[3]===n)return null;a=s,o.push(["translate3d",t,e,n??0])}else o.push(l)}return a===-1&&o.splice(0,0,je(n)?["translate3d",t,e,n??0]:["translate",t,e]),o.length===0?null:o}const i=r?r.replace(/translate(3d)?\([^)]*\)/g,""):"";return n===0?`translate(${t}, ${e})${i}`:`translate3d(${t}, ${e}, ${n})${i}`}var EUe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const OUe=(t,e,n)=>{if(!n.length)return null;const[r,i]=e,a=u=>{var c;if(u){const f=t.getShape(u);if(!f)return null;const d=`get${Bo(u)}Style`,h=((c=t==null?void 0:t[d])===null||c===void 0?void 0:c.bind(t))||(v=>v),p=(h==null?void 0:h(r))||{},g=(h==null?void 0:h(i))||{};return{shape:f,fromStyle:p,toStyle:g}}else return{shape:t,fromStyle:r,toStyle:i}};let o;const s=n.map(u=>{var{fields:c,shape:f,states:d}=u,h=EUe(u,["fields","shape","states"]);const p=a(f);if(!p)return null;const{shape:g,fromStyle:v,toStyle:m}=p,y=[{},{}];if(c.forEach(x=>{var w,_;Object.assign(y[0],{[x]:(w=v[x])!==null&&w!==void 0?w:lv(x)}),Object.assign(y[1],{[x]:(_=m[x])!==null&&_!==void 0?_:lv(x)})}),y.some(x=>Object.keys(x).some(w=>["x","y","z"].includes(w)))){const{x=0,y:w=0,z:_,transform:E=""}=g.attributes||{};y.forEach(S=>{var O,A,T;S.transform=Ule((O=S.x)!==null&&O!==void 0?O:x,(A=S.y)!==null&&A!==void 0?A:w,(T=S.z)!==null&&T!==void 0?T:_,E)})}const b=g.animate(oD(y),h);return f===void 0&&(o=b),b}).filter(Boolean),l=o||(s==null?void 0:s[0]);return l?t4(l,s.filter(u=>u!==u)):null},kUe=[{fields:["opacity"]}],AUe=[{fields:["x","y"]}],Xle=[{fields:["x","y"]}],TUe=Xle,Zle=[{fields:["sourceNode","targetNode"]}],MUe=Zle,Kle=[{fields:["childrenNode","x","y"]}],CUe=Kle;function PUe(t){return"source"in t&&"target"in t}function DUe(t){return t.length===2}function cp(t){return t instanceof Float32Array?!0:Array.isArray(t)&&(t.length===2||t.length===3)?t.every(e=>typeof e=="number"):!1}function bl(t,e,n){return t>=e&&t<=n}function kl(t=0){if(Array.isArray(t)){const[e=0,n=e,r=e,i=n]=t;return[e,n,r,i]}return[t,t,t,t]}function IUe(t=0){const e=kl(t);return e[0]+e[2]}function Al(t){return t.max[0]-t.min[0]}function Tl(t){return t.max[1]-t.min[1]}function jc(t){return[Al(t),Tl(t)]}function Ju(t,e){const n=cp(t)?n4(t):t.getShape("key").getBounds();return e?Bc(n,e):n}function n4(t){const[e,n,r=0]=t,i=new zn;return i.setMinMax([e,n,r],[e,n,r]),i}function Bc(t,e){const[n,r,i,a]=kl(e),[o,s,l]=t.min,[u,c,f]=t.max,d=new zn;return d.setMinMax([o-a,s-n,l],[u+r,c+i,f]),d}function im(t){if(t.length===0)return new zn;if(t.length===1)return t[0];const e=new zn;e.setMinMax(t[0].min,t[0].max);for(let n=1;n<t.length;n++){const r=t[n];e.setMinMax([Math.min(e.min[0],r.min[0]),Math.min(e.min[1],r.min[1]),Math.min(e.min[2],r.min[2])],[Math.max(e.max[0],r.max[0]),Math.max(e.max[1],r.max[1]),Math.max(e.max[2],r.max[2])])}return e}function LUe(t,e){const[n,r]=t.min,[i,a]=t.max,[o,s]=e.min,[l,u]=e.max;return n>=o&&i<=l&&r>=s&&a<=u}function ks(t,e){return bl(t[0],e.min[0],e.max[0])&&bl(t[1],e.min[1],e.max[1])}function Jle(t,e,n=!1){const{min:[r,i],max:[a,o]}=e,s=(t[1]===i||t[1]===o)&&(n||bl(t[0],r,a)),l=(t[0]===r||t[0]===a)&&(n||bl(t[1],i,o));return s||l}function RUe(t,e){return!ks(t,e)}function Lx(t,e){const{center:n}=e;return t[0]===n[0]&&t[1]===n[1]}function i0(t,e){const[n,r]=t,[i,a]=e.min,[o,s]=e.max,l=n-i,u=o-n,c=r-a,f=s-r,d=Math.min(l,u,c,f);return d===l?"left":d===u?"right":d===c?"top":d===f?"bottom":"left"}function Tf(t,e){const n=vc(t);if(ks(t,e))switch(i0(t,e)){case"left":n[0]=e.min[0];break;case"right":n[0]=e.max[0];break;case"top":n[1]=e.min[1];break;case"bottom":n[1]=e.max[1];break}else{const[r,i]=t,[a,o]=e.min,[s,l]=e.max;n[0]=bl(r,a,s)?r:r<a?a:s,n[1]=bl(i,o,l)?i:i<o?o:l}return n}function NUe(t,e){const{center:n}=t,[r,i]=jc(t),a=e==="up"||e==="down"?n[0]:e==="right"?n[0]-r/6:n[0]+r/6,o=e==="left"||e==="right"?n[1]:e==="down"?n[1]-i/6:n[1]+i/6;return[a,o]}function FUe(t,e){let[n,r]=jc(t);return[n,r]=e==="up"||e==="down"?[n,r]:[r,n],(Math.pow(r,2)-Math.pow(Math.sqrt(Math.pow(n/2,2)+Math.pow(r,2))-n/2,2))/(2*r)}function zUe(t){const{min:[e,n],max:[r,i]}=t,a=[e,i],o=[r,i],s=[r,n],l=[e,n];return[[a,o],[o,s],[s,l],[l,a]]}var jUe=function(e,n){return e===n},LB=function(){function t(e,n){n===void 0&&(n=null),this.value=e,this.next=n}return t.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},t}(),BUe=function(){function t(e){e===void 0&&(e=jUe),this.head=null,this.tail=null,this.compare=e}return t.prototype.prepend=function(e){var n=new LB(e,this.head);return this.head=n,this.tail||(this.tail=n),this},t.prototype.append=function(e){var n=new LB(e);return this.head?(this.tail.next=n,this.tail=n,this):(this.head=n,this.tail=n,this)},t.prototype.delete=function(e){if(!this.head)return null;for(var n=null;this.head&&this.compare(this.head.value,e);)n=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(n=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),n},t.prototype.find=function(e){var n=e.value,r=n===void 0?void 0:n,i=e.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},t.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var n=this.head;n.next;)n.next.next?n=n.next:n.next=null;return this.tail=n,e},t.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},t.prototype.fromArray=function(e){var n=this;return e.forEach(function(r){return n.append(r)}),this},t.prototype.toArray=function(){for(var e=[],n=this.head;n;)e.push(n),n=n.next;return e},t.prototype.reverse=function(){for(var e=this.head,n=null,r=null;e;)r=e.next,e.next=n,n=e,e=r;this.tail=this.head,this.head=n},t.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(n){return n.toString(e)}).toString()},t}(),$Ue=function(e,n,r){n===void 0&&(n=[]);var i=n.filter(function(l){return l.source===e||l.target===e});if(r==="target"){var a=function(u){return u.source===e};return i.filter(a).map(function(l){return l.target})}if(r==="source"){var o=function(u){return u.target===e};return i.filter(o).map(function(l){return l.source})}var s=function(u){return u.source===e?u.target:u.source};return i.map(s)},VUe=function(e,n){return n.filter(function(r){return r.source===e})},qUe=function(e,n){return n.filter(function(r){return r.source===e||r.target===e})},WUe=function(e){var n={},r=e.nodes,i=r===void 0?[]:r,a=e.edges,o=a===void 0?[]:a;return i.forEach(function(s){n[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){n[s.source].degree++,n[s.source].outDegree++,n[s.target].degree++,n[s.target].inDegree++}),n},GUe=function(e,n,r){for(var i=1/0,a,o=0;o<n.length;o++){var s=n[o].id;!r[s]&&e[s]<=i&&(i=e[s],a=n[o])}return a},HUe=function(e,n,r,i){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,u={},c={},f={};o.forEach(function(y,b){var x=y.id;c[x]=1/0,x===n&&(c[x]=0)});for(var d=o.length,h=function(b){var x=GUe(c,o,u),w=x.id;if(u[w]=!0,c[w]===1/0)return"continue";var _=[];r?_=VUe(w,l):_=qUe(w,l),_.forEach(function(E){var S=E.target,O=E.source,A=S===w?O:S,T=i&&E[i]?E[i]:1;c[A]>c[x.id]+T?(c[A]=c[x.id]+T,f[A]=[x.id]):c[A]===c[x.id]+T&&f[A].push(x.id)})},p=0;p<d;p++)h();f[n]=[n];var g={};for(var v in c)c[v]!==1/0&&Qle(n,v,f,g);var m={};for(var v in g)m[v]=g[v][0];return{length:c,path:m,allPath:g}};function Qle(t,e,n,r){if(t===e)return[t];if(r[e])return r[e];for(var i=[],a=0,o=n[e];a<o.length;a++){var s=o[a],l=Qle(t,s,n,r);if(!l)return;for(var u=0,c=l;u<c.length;u++){var f=c[u];lR(f)?i.push(Ab(Ab([],f,!0),[e],!1)):i.push([f,e])}}return r[e]=i,r[e]}var eue=function(e,n,r,i,a){var o=HUe(e,n,i,a),s=o.length,l=o.path,u=o.allPath;return{length:s[r],path:l[r],allPath:u[r]}},RB;(function(t){t.EuclideanDistance="euclideanDistance"})(RB||(RB={}));var YUe=function(e,n,r){typeof n!="number"&&(n=1e-6),typeof r!="number"&&(r=.85);for(var i=1,a=0,o=1e3,s=e.nodes,l=s===void 0?[]:s,u=e.edges,c=u===void 0?[]:u,f=l.length,d,h={},p={},g=0;g<f;++g){var v=l[g],m=v.id;h[m]=1/f,p[m]=1/f}for(var y=WUe(e);o>0&&i>n;){a=0;for(var g=0;g<f;++g){var v=l[g],m=v.id;if(d=0,y[v.id].inDegree===0)h[m]=0;else{for(var b=$Ue(m,c,"source"),x=0;x<b.length;++x){var w=b[x],_=y[w].outDegree;_>0&&(d+=p[w]/_)}h[m]=r*d,a+=h[m]}}a=(1-a)/f,i=0;for(var g=0;g<f;++g){var v=l[g],m=v.id;d=h[m]+a,i+=Math.abs(d-p[m]),p[m]=d}o-=1}return p};(function(){function t(e){e===void 0&&(e=10),this.linkedList=new BUe,this.maxStep=e}return Object.defineProperty(t.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},t.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},t.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},t.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},t.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},t.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},t})();function ce(t){if(t.id!==void 0)return t.id;if(t.source!==void 0&&t.target!==void 0)return`${t.source}-${t.target}`;throw new Error(Ul("The datum does not have available id."))}function Zy(t){return t.combo}function tue(t,e){const n={nodes:(t.nodes||[]).map(ce),edges:(t.edges||[]).map(ce),combos:(t.combos||[]).map(ce)};return e?Object.values(n).flat():n}const nue=(t,e,n)=>{var r;switch(n.type){case"degree":{const i=new Map;return(r=t.nodes)===null||r===void 0||r.forEach(a=>{const o=e(ce(a),n.direction).length;i.set(ce(a),o)}),i}case"betweenness":return UUe(t,n.directed,n.weightPropertyName);case"closeness":return XUe(t,n.directed,n.weightPropertyName);case"eigenvector":return KUe(t,n.directed);case"pagerank":return ZUe(t,n.epsilon,n.linkProb);default:return rue(t)}},rue=t=>{var e;const n=new Map;return(e=t.nodes)===null||e===void 0||e.forEach(r=>{n.set(ce(r),0)}),n},UUe=(t,e,n)=>{const r=rue(t),{nodes:i=[]}=t;return i.forEach(a=>{i.forEach(o=>{if(a!==o){const{allPath:s}=eue(t,ce(a),ce(o),e,n),l=s.length;s.flat().forEach(u=>{u!==ce(a)&&u!==ce(o)&&r.set(u,r.get(u)+1/l)})}})}),r},XUe=(t,e,n)=>{const r=new Map,{nodes:i=[]}=t;return i.forEach(a=>{const o=i.reduce((s,l)=>{if(a!==l){const{length:u}=eue(t,ce(a),ce(l),e,n);s+=u}return s},0);r.set(ce(a),1/o)}),r},ZUe=(t,e,n)=>{var r;const i=new Map,a=YUe(t,e,n);return(r=t.nodes)===null||r===void 0||r.forEach(o=>{i.set(ce(o),a[ce(o)])}),i},KUe=(t,e)=>{const{nodes:n=[]}=t,r=JUe(t,e),i=QUe(r,n.length),a=new Map;return n.forEach((o,s)=>{a.set(ce(o),i[s])}),a},JUe=(t,e)=>{const{nodes:n=[],edges:r=[]}=t,i=Array(n.length).fill(null).map(()=>Array(n.length).fill(0));return r.forEach(({source:a,target:o})=>{const s=n.findIndex(u=>ce(u)===a),l=n.findIndex(u=>ce(u)===o);e?i[s][l]=1:(i[s][l]=1,i[l][s]=1)}),i},QUe=(t,e,n=100,r=1e-6)=>{let i=Array(e).fill(1),a=1/0;for(let o=0;o<n&&a>r;o++){const s=Array(e).fill(0);for(let u=0;u<e;u++)for(let c=0;c<e;c++)s[u]+=t[u][c]*i[c];const l=Math.sqrt(s.reduce((u,c)=>u+c*c,0));for(let u=0;u<e;u++)s[u]/=l;a=Math.sqrt(s.reduce((u,c,f)=>u+(c-i[f])*c,0)),i=s}return i};function uc(t,e,n,r=br){const i=new Map(t.map(d=>[n(d),d])),a=new Map(e.map(d=>[n(d),d])),o=new Set(i.keys()),s=new Set(a.keys()),l=[],u=[],c=[],f=[];return s.forEach(d=>{o.has(d)?r(i.get(d),a.get(d))?f.push(a.get(d)):u.push(a.get(d)):l.push(a.get(d))}),o.forEach(d=>{s.has(d)||c.push(i.get(d))}),{enter:l,exit:c,keep:f,update:u}}function Jf(t,e,n){const r=i=>{n&&!n(i)||(i.style.visibility=e)};t.forEach(i=>{r(i)})}function eXe(t,e,n){const r={},i=a=>(a in r||(r[a]=0),`${e}-${a}-${r[a]++}`);return n.map(a=>typeof a=="string"?{type:a,key:i(a)}:typeof a=="function"?a.call(t):a.key?a:Object.assign(Object.assign({},a),{key:i(a.type)}))}class r4{constructor(e){this.extensions=[],this.extensionMap={},this.context=e}setExtensions(e){const n=eXe(this.context.graph,this.category,e),{enter:r,update:i,exit:a,keep:o}=uc(this.extensions,n,s=>s.key);this.createExtensions(r),this.updateExtensions([...i,...o]),this.destroyExtensions(a),this.extensions=n}createExtension(e){const{category:n}=this,{key:r,type:i}=e,a=du(n,i);if(!a)return Ol.warn(`The extension ${i} of ${n} is not registered.`);const o=new a(this.context,e);this.extensionMap[r]=o}createExtensions(e){e.forEach(n=>this.createExtension(n))}updateExtension(e){const{key:n}=e,r=this.extensionMap[n];r&&r.update(e)}updateExtensions(e){e.forEach(n=>this.updateExtension(n))}destroyExtension(e){const n=this.extensionMap[e];n&&(n.destroy(),delete this.extensionMap[e])}destroyExtensions(e){e.forEach(({key:n})=>this.destroyExtension(n))}destroy(){Object.values(this.extensionMap).forEach(e=>e.destroy()),this.context={},this.extensions=[],this.extensionMap={}}}class i4{constructor(e,n){this.events=[],this.destroyed=!1,this.context=e,this.options=n}update(e){this.options=Object.assign(this.options,e)}destroy(){this.context={},this.options={},this.destroyed=!0}}class vo extends i4{}class gw extends vo{constructor(e,n){super(e,Object.assign({},gw.defaultOptions,n)),this.isOverlapping=(r,i)=>i.some(a=>r.intersects(a)),this.occupiedBounds=[],this.detectLabelCollision=r=>{const i=this.context.viewport,a={show:[],hide:[]};return this.occupiedBounds=[],r.forEach(o=>{const s=o.getShape("label").getRenderBounds();i.isInViewport(s,!0)&&!this.isOverlapping(s,this.occupiedBounds)?(a.show.push(o),this.occupiedBounds.push(Bc(s,this.options.padding))):a.hide.push(o)}),a},this.hideLabelIfExceedViewport=(r,i)=>{const{exit:a}=uc(r,i,o=>o.id);a==null||a.forEach(this.hideLabel)},this.nodeCentralities=new Map,this.sortNodesByCentrality=(r,i)=>{const{model:a}=this.context,o=a.getData(),s=a.getRelatedEdgesData.bind(a);return r.map(u=>(this.nodeCentralities.has(u.id)||(this.nodeCentralities=nue(o,s,i)),{node:u,centrality:this.nodeCentralities.get(u.id)})).sort((u,c)=>c.centrality-u.centrality).map(u=>u.node)},this.sortLabelElementsInView=r=>{const{sort:i,sortNode:a,sortCombo:o,sortEdge:s}=this.options,{model:l}=this.context;if(Ue(i))return r.sort((g,v)=>i(l.getElementDataById(g.id),l.getElementDataById(v.id)));const{node:u=[],edge:c=[],combo:f=[]}=y2(r,g=>g.type),d=Ue(o)?f.sort((g,v)=>o(...l.getComboData([g.id,v.id]))):f,h=Ue(a)?u.sort((g,v)=>a(...l.getNodeData([g.id,v.id]))):this.sortNodesByCentrality(u,a),p=Ue(s)?c.sort((g,v)=>s(...l.getEdgeData([g.id,v.id]))):c;return[...d,...h,...p]},this.labelElementsInView=[],this.isFirstRender=!0,this.onToggleVisibility=r=>{var i;if(((i=r.data)===null||i===void 0?void 0:i.stage)==="zIndex")return;if(!this.validate(r)){this.hiddenElements.size>0&&(this.hiddenElements.forEach(this.showLabel),this.hiddenElements.clear());return}const a=this.isFirstRender?this.getLabelElements():this.getLabelElementsInView();this.hideLabelIfExceedViewport(this.labelElementsInView,a),this.labelElementsInView=a;const o=this.sortLabelElementsInView(this.labelElementsInView),{show:s,hide:l}=this.detectLabelCollision(o);for(let u=s.length-1;u>=0;u--)this.showLabel(s[u]);l.forEach(this.hideLabel)},this.hiddenElements=new Map,this.hideLabel=r=>{const i=r.getShape("label");i&&Jf(i,"hidden"),this.hiddenElements.set(r.id,r)},this.showLabel=r=>{const i=r.getShape("label");i&&Jf(i,"visible"),r.toFront(),this.hiddenElements.delete(r.id)},this.onTransform=ou(this.onToggleVisibility,this.options.throttle,{leading:!0}),this.enableToggle=!0,this.toggle=r=>{this.enableToggle&&this.onToggleVisibility(r)},this.onBeforeRender=()=>{this.enableToggle=!1},this.onAfterRender=r=>{this.onToggleVisibility(r),this.enableToggle=!0},this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents(),this.onToggleVisibility({})}getLabelElements(){const{elementMap:e}=this.context.element,n=[];for(const r in e){const i=e[r];i.isVisible()&&i.getShape("label")&&n.push(i)}return n}getLabelElementsInView(){const e=this.context.viewport;return this.getLabelElements().filter(n=>e.isInViewport(n.getShape("key").getRenderBounds()))}bindEvents(){const{graph:e}=this.context;e.on(Le.BEFORE_RENDER,this.onBeforeRender),e.on(Le.AFTER_RENDER,this.onAfterRender),e.on(Le.AFTER_DRAW,this.toggle),e.on(Le.AFTER_LAYOUT,this.toggle),e.on(Le.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:e}=this.context;e.off(Le.BEFORE_RENDER,this.onBeforeRender),e.off(Le.AFTER_RENDER,this.onAfterRender),e.off(Le.AFTER_DRAW,this.toggle),e.off(Le.AFTER_LAYOUT,this.toggle),e.off(Le.AFTER_TRANSFORM,this.onTransform)}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return Ue(n)?n(e):!!n}destroy(){this.unbindEvents(),super.destroy()}}gw.defaultOptions={enable:!0,throttle:100,padding:0,sortNode:{type:"degree"}};const NB=[0,0,0];function kt(t,e){return t.map((n,r)=>n+e[r])}function In(t,e){return t.map((n,r)=>n-e[r])}function gs(t,e){return typeof e=="number"?t.map(n=>n*e):t.map((n,r)=>n*e[r])}function As(t,e){return typeof e=="number"?t.map(n=>n/e):t.map((n,r)=>n/e[r])}function tXe(t,e){return t.reduce((n,r,i)=>n+r*e[i],0)}function nXe(t,e){const n=uv(t),r=uv(e);return[n[1]*r[2]-n[2]*r[1],n[2]*r[0]-n[0]*r[2],n[0]*r[1]-n[1]*r[0]]}function Qu(t,e){return t.map(n=>n*e)}function Jn(t,e){return Math.sqrt(t.reduce((n,r,i)=>n+Math.pow(r-e[i]||0,2),0))}function Rx(t,e){return t.reduce((n,r,i)=>n+Math.abs(r-e[i]),0)}function eu(t){const e=t.reduce((n,r)=>n+Math.pow(r,2),0);return t.map(n=>n/Math.sqrt(e))}function a4(t,e,n=!1){const r=t[0]*e[1]-t[1]*e[0];let i=Math.acos(gs(t,e).reduce((a,o)=>a+o,0)/(Jn(t,NB)*Jn(e,NB)));return n&&r<0&&(i=2*Math.PI-i),i}function vw(t,e=!0){return e?[-t[1],t[0]]:[t[1],-t[0]]}function pO(t,e){return t.map(n=>n%e)}function Qf(t){return[t[0],t[1]]}function uv(t){return DUe(t)?[t[0],t[1],0]:t}function iue(t){const[e,n]=t;return!e&&!n?0:Math.atan2(n,e)}function aue(t,e){const[n,r]=t,[i,a]=e,o=In(n,r),s=In(i,a);return nXe(o,s).every(l=>l===0)}function o4(t,e,n=!1){if(aue(t,e))return;const[r,i]=t,[a,o]=e,s=((r[0]-a[0])*(a[1]-o[1])-(r[1]-a[1])*(a[0]-o[0]))/((r[0]-i[0])*(a[1]-o[1])-(r[1]-i[1])*(a[0]-o[0])),l=o[0]-a[0]?(r[0]-a[0]+s*(i[0]-r[0]))/(o[0]-a[0]):(r[1]-a[1]+s*(i[1]-r[1]))/(o[1]-a[1]);if(!(!n&&(!bl(s,0,1)||!bl(l,0,1))))return[r[0]+s*(i[0]-r[0]),r[1]+s*(i[1]-r[1])]}function oue(t){if(Array.isArray(t))return bl(t[0],0,1)&&bl(t[1],0,1)?t:[.5,.5];const e=t.split("-"),n=e.includes("left")?0:e.includes("right")?1:.5,r=e.includes("top")?0:e.includes("bottom")?1:.5;return[n,r]}function Yr(t){const{x:e=0,y:n=0,z:r=0}=t.style||{};return[+e,+n,+r]}function rXe(t){const{x:e,y:n,z:r}=t.style||{};return e!==void 0||n!==void 0||r!==void 0}function iXe(t,e){const[n,r]=e,{min:i,max:a}=t;return[i[0]+n*(a[0]-i[0]),i[1]+r*(a[1]-i[1])]}function Gl(t,e="center"){const n=oue(e);return iXe(t,n)}function Vi(t){var e;return[t.x,t.y,(e=t.z)!==null&&e!==void 0?e:0]}function vs(t){var e;return{x:t[0],y:t[1],z:(e=t[2])!==null&&e!==void 0?e:0}}function ug(t,e=0){return t.map(n=>parseFloat(n.toFixed(e)))}function cc(t,e,n,r=!1){if(br(t,e))return t;const i=r?In(t,e):In(e,t),a=eu(i),o=[a[0]*n,a[1]*n];return kt(Qf(t),o)}function sue(t,e){return t[1]===e[1]}function aXe(t,e){return t[0]===e[0]}function oXe(t,e){return sue(t,e)||aXe(t,e)}function lue(t,e,n){return aue([t,e],[e,n])}function uue(t,e){return[2*e[0]-t[0],2*e[1]-t[1]]}function cue(t,e,n,r=!0,i=!1){for(let a=0;a<n.length;a++){let o=n[a],s=n[(a+1)%n.length];r&&(o=kt(e,o),s=kt(e,s));const l=i?uue(t,e):t,u=o4([e,l],[o,s]);if(u)return{point:u,line:[o,s]}}return{point:e,line:void 0}}function sXe(t,e,n,r){const i=t[0],a=t[1];let o=!1;n===void 0&&(n=0),r===void 0&&(r=e.length);const s=r-n;for(let l=0,u=s-1;l<s;u=l++){const c=e[l+n][0],f=e[l+n][1],d=e[u+n][0],h=e[u+n][1];f>a!=h>a&&i<(d-c)*(a-f)/(h-f)+c&&(o=!o)}return o}function lXe(t,e,n=!1){const r=Gl(e,"center"),i=[Gl(e,"left-top"),Gl(e,"right-top"),Gl(e,"right-bottom"),Gl(e,"left-bottom")];return cue(t,r,i,!1,n).point}function mw(t,e,n=!1){const r=e.center,i=n?uue(t,r):t,a=In(i,e.center),o=Math.atan2(a[1],a[0]);if(isNaN(o))return r;const s=Al(e)/2,l=Tl(e)/2,u=r[0]+s*Math.cos(o),c=r[1]+l*Math.sin(o);return[u,c]}function uXe(t,e){let n=1/0,r=[t[0],e[0]];return t.forEach(i=>{e.forEach(a=>{const o=Jn(i,a);o<n&&(n=o,r=[i,a])})}),r}function cXe(t,e){let n=1/0,r=[[0,0],[0,0]];return e.forEach(i=>{const a=fXe(t,i);a<n&&(n=a,r=i)}),r}function fXe(t,e){const n=fue(t,e);return Jn(t,n)}function fue(t,e){const[n,r]=e[0],[i,a]=e[1],[o,s]=t,l=i-n,u=a-r;if(l===0&&u===0)return[n,r];let c=((o-n)*l+(s-r)*u)/(l*l+u*u);c>1?c=1:c<0&&(c=0);const f=n+c*l,d=r+c*u;return[f,d]}function dXe(t){const e=t.reduce((n,r)=>kt(n,r),[0,0]);return As(e,t.length)}function s4(t,e=!0){const n=dXe(t);return t.sort(([r,i],[a,o])=>{const s=Math.atan2(i-n[1],r-n[0]),l=Math.atan2(o-n[1],a-n[0]);return e?l-s:s-l})}function FB(t,e){return[t,[t[0],e[1]],e,[e[0],t[1]]]}class Hr{constructor(e,n,r){if(this.phase=n,this.pointerByTouch=[],this.initialDistance=null,this.emitter=e,Hr.instance)return Hr.callbacks[this.phase].push(r),Hr.instance;this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.bindEvents(),Hr.instance=this,Hr.callbacks[this.phase].push(r)}bindEvents(){const{emitter:e}=this;e.on(be.POINTER_DOWN,this.onPointerDown),e.on(be.POINTER_MOVE,this.onPointerMove),e.on(be.POINTER_UP,this.onPointerUp)}updatePointerPosition(e,n,r){const i=this.pointerByTouch.findIndex(a=>a.pointerId===e);i>=0&&(this.pointerByTouch[i]={x:n,y:r,pointerId:e})}onPointerDown(e){const{x:n,y:r}=e.client||{};if(!(n===void 0||r===void 0)&&(this.pointerByTouch.push({x:n,y:r,pointerId:e.pointerId}),e.pointerType==="touch"&&this.pointerByTouch.length===2)){Hr.isPinching=!0;const i=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y;this.initialDistance=Math.sqrt(i*i+a*a),Hr.callbacks.pinchstart.forEach(o=>o(e,{scale:0}))}}onPointerMove(e){if(this.pointerByTouch.length!==2||this.initialDistance===null)return;const{x:n,y:r}=e.client||{};if(n===void 0||r===void 0)return;this.updatePointerPosition(e.pointerId,n,r);const i=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y,s=Math.sqrt(i*i+a*a)/this.initialDistance;Hr.callbacks.pinchmove.forEach(l=>l(e,{scale:(s-1)*5}))}onPointerUp(e){var n;Hr.callbacks.pinchend.forEach(r=>r(e,{scale:0})),Hr.isPinching=!1,this.initialDistance=null,this.pointerByTouch=[],(n=Hr.instance)===null||n===void 0||n.tryDestroy()}destroy(){this.emitter.off(be.POINTER_DOWN,this.onPointerDown),this.emitter.off(be.POINTER_MOVE,this.onPointerMove),this.emitter.off(be.POINTER_UP,this.onPointerUp),Hr.instance=null}off(e,n){const r=Hr.callbacks[e].indexOf(n);r>-1&&Hr.callbacks[e].splice(r,1),this.tryDestroy()}tryDestroy(){Object.values(Hr.callbacks).every(e=>e.length===0)&&this.destroy()}}Hr.isPinching=!1;Hr.instance=null;Hr.callbacks={pinchstart:[],pinchmove:[],pinchend:[]};const zB=t=>t.map(e=>an(e)?e.toLocaleLowerCase():e);class Mp{constructor(e){this.map=new Map,this.boundHandlePinch=()=>{},this.recordKey=new Set,this.onKeyDown=n=>{n!=null&&n.key&&(this.recordKey.add(n.key),this.trigger(n))},this.onKeyUp=n=>{n!=null&&n.key&&this.recordKey.delete(n.key)},this.onWheel=n=>{this.triggerExtendKey(be.WHEEL,n)},this.onDrag=n=>{this.triggerExtendKey(be.DRAG,n)},this.handlePinch=(n,r)=>{this.triggerExtendKey(be.PINCH,Object.assign(Object.assign({},n),r))},this.onFocus=()=>{this.recordKey.clear()},this.emitter=e,this.bindEvents()}bind(e,n){e.length!==0&&(e.includes(be.PINCH)&&!this.pinchHandler&&(this.boundHandlePinch=this.handlePinch.bind(this),this.pinchHandler=new Hr(this.emitter,"pinchmove",this.boundHandlePinch)),this.map.set(e,n))}unbind(e,n){this.map.forEach((r,i)=>{br(i,e)&&(!n||n===r)&&this.map.delete(i)})}unbindAll(){this.map.clear()}match(e){const n=zB(Array.from(this.recordKey)).sort(),r=zB(e).sort();return br(n,r)}bindEvents(){var e;const{emitter:n}=this;n.on(be.KEY_DOWN,this.onKeyDown),n.on(be.KEY_UP,this.onKeyUp),n.on(be.WHEEL,this.onWheel),n.on(be.DRAG,this.onDrag),(e=globalThis.addEventListener)===null||e===void 0||e.call(globalThis,"focus",this.onFocus)}trigger(e){this.map.forEach((n,r)=>{this.match(r)&&n(e)})}triggerExtendKey(e,n){this.map.forEach((r,i)=>{i.includes(e)&&br(Array.from(this.recordKey),i.filter(a=>a!==e))&&r(n)})}destroy(){var e,n;this.unbindAll(),this.emitter.off(be.KEY_DOWN,this.onKeyDown),this.emitter.off(be.KEY_UP,this.onKeyUp),this.emitter.off(be.WHEEL,this.onWheel),this.emitter.off(be.DRAG,this.onDrag),(e=this.pinchHandler)===null||e===void 0||e.off("pinchmove",this.boundHandlePinch),(n=globalThis.removeEventListener)===null||n===void 0||n.call(globalThis,"blur",this.onFocus)}}class am extends vo{constructor(e,n){super(e,me({},am.defaultOptions,n)),this.shortcut=new Mp(e.graph),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.clearStates=this.clearStates.bind(this),this.bindEvents()}onPointerDown(e){if(!this.validate(e)||!this.isKeydown()||this.startPoint)return;const{canvas:n,graph:r}=this.context,i=Object.assign({},this.options.style);this.options.style.lineWidth&&(i.lineWidth=+this.options.style.lineWidth/r.getZoom()),this.rectShape=new Vr({id:"g6-brush-select",style:i}),n.appendChild(this.rectShape),this.startPoint=[e.canvas.x,e.canvas.y]}onPointerMove(e){var n;if(!this.startPoint)return;const{immediately:r,mode:i}=this.options;this.endPoint=Nx(e),(n=this.rectShape)===null||n===void 0||n.attr({x:Math.min(this.endPoint[0],this.startPoint[0]),y:Math.min(this.endPoint[1],this.startPoint[1]),width:Math.abs(this.endPoint[0]-this.startPoint[0]),height:Math.abs(this.endPoint[1]-this.startPoint[1])}),r&&i==="default"&&this.updateElementsStates(FB(this.startPoint,this.endPoint))}onPointerUp(e){if(this.startPoint){if(!this.endPoint){this.clearBrush();return}this.endPoint=Nx(e),this.updateElementsStates(FB(this.startPoint,this.endPoint)),this.clearBrush()}}clearStates(){this.endPoint||this.clearElementsStates()}clearElementsStates(){const{graph:e}=this.context,n=Object.values(e.getData()).reduce((r,i)=>Object.assign({},r,i.reduce((a,o)=>{var s;const l=(s=o.states||[])===null||s===void 0?void 0:s.filter(u=>u!==this.options.state);return a[ce(o)]=l,a},{})),{});e.setElementState(n,this.options.animation)}updateElementsStates(e){const{graph:n}=this.context,{enableElements:r,state:i,mode:a,onSelect:o}=this.options,s=this.selector(n,e,r);let l={};switch(a){case"union":s.forEach(u=>{l[u]=[...n.getElementState(u),i]});break;case"diff":s.forEach(u=>{const c=n.getElementState(u);l[u]=c.includes(i)?c.filter(f=>f!==i):[...c,i]});break;case"intersect":s.forEach(u=>{const c=n.getElementState(u);l[u]=c.includes(i)?[i]:[]});break;case"default":default:s.forEach(u=>{l[u]=[i]});break}Ue(o)&&(l=o(l)),n.setElementState(l,this.options.animation)}selector(e,n,r){if(!r||r.length===0)return[];const i=[],a=e.getData();if(r.forEach(o=>{a[`${o}s`].forEach(s=>{const l=ce(s);e.getElementVisibility(l)!=="hidden"&&sXe(e.getElementPosition(l),n)&&i.push(l)})}),r.includes("edge")){const o=a.edges;o==null||o.forEach(s=>{const{source:l,target:u}=s;i.includes(l)&&i.includes(u)&&i.push(ce(s))})}return i}clearBrush(){var e;(e=this.rectShape)===null||e===void 0||e.remove(),this.rectShape=void 0,this.startPoint=void 0,this.endPoint=void 0}isKeydown(){const{trigger:e}=this.options,n=Array.isArray(e)?e:[e];return this.shortcut.match(n.filter(r=>r!=="drag"))}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return Ue(n)?n(e):!!n}bindEvents(){const{graph:e}=this.context;e.on(be.POINTER_DOWN,this.onPointerDown),e.on(be.POINTER_MOVE,this.onPointerMove),e.on(be.POINTER_UP,this.onPointerUp),e.on(fu.CLICK,this.clearStates)}unbindEvents(){const{graph:e}=this.context;e.off(be.POINTER_DOWN,this.onPointerDown),e.off(be.POINTER_MOVE,this.onPointerMove),e.off(be.POINTER_UP,this.onPointerUp),e.off(fu.CLICK,this.clearStates)}update(e){this.unbindEvents(),this.options=me(this.options,e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}am.defaultOptions={animation:!1,enable:!0,enableElements:["node","combo","edge"],immediately:!1,mode:"default",state:"selected",trigger:["shift"],style:{width:0,height:0,lineWidth:1,fill:"#1677FF",stroke:"#1677FF",fillOpacity:.1,zIndex:2,pointerEvents:"none"}};const Nx=t=>[t.canvas.x,t.canvas.y],hu=.8,ed=["node","edge","combo"];function Mf(t,e,n,r,i=0){r==="TB"&&e(t,i);const a=n(t);if(a)for(const o of a)Mf(o,e,n,r,i+1);r==="BT"&&e(t,i)}function hXe(t,e,n){const r=[[t,0]];for(;r.length;){const[i,a]=r.shift();e(i,a);const o=n(i);if(o)for(const s of o)r.push([s,a+1])}}function due(t,e,n,r,i="both"){if(e==="combo"||e==="node")return gO(t,n,r,i);const a=t.getEdgeData(n);if(!a)return[];const o=gO(t,a.source,r-1,i),s=gO(t,a.target,r-1,i);return Array.from(new Set([...o,...s,n]))}function gO(t,e,n,r="both"){const i=new Set,a=new Set,o=new Set;return hXe(e,(s,l)=>{l>n||(o.add(s),t.getRelatedEdgesData(s,r).forEach(u=>{const c=ce(u);!a.has(c)&&l<n&&(o.add(c),a.add(c))}))},s=>t.getRelatedEdgesData(s,r).map(l=>l.source===s?l.target:l.source).filter(l=>i.has(l)?!1:(i.add(l),!0))),Array.from(o)}function vO(t){return t.states||[]}var Ky=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class yw extends vo{constructor(e,n){super(e,Object.assign({},yw.defaultOptions,n)),this.onClickSelect=r=>Ky(this,void 0,void 0,function*(){var i,a;this.validate(r)&&(yield this.updateState(r),(a=(i=this.options).onClick)===null||a===void 0||a.call(i,r))}),this.onClickCanvas=r=>Ky(this,void 0,void 0,function*(){var i,a;this.validate(r)&&(yield this.clearState(),(a=(i=this.options).onClick)===null||a===void 0||a.call(i,r))}),this.shortcut=new Mp(e.graph),this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),ed.forEach(n=>{e.on(`${n}:${be.CLICK}`,this.onClickSelect)}),e.on(fu.CLICK,this.onClickCanvas)}get isMultipleSelect(){const{multiple:e,trigger:n}=this.options;return e&&this.shortcut.match(n)}getNeighborIds(e){const{target:n,targetType:r}=e,{graph:i}=this.context,{degree:a}=this.options;return due(i,r,n.id,typeof a=="function"?a(e):a).filter(o=>o!==n.id)}updateState(e){return Ky(this,void 0,void 0,function*(){const{state:n,unselectedState:r,neighborState:i,animation:a}=this.options;if(!n&&!i&&!r)return;const{target:o}=e,{graph:s}=this.context,l=s.getElementData(o.id),u=vO(l).includes(n)?"unselect":"select",c={},f=this.isMultipleSelect,d=[o.id],h=this.getNeighborIds(e);if(f)if(Object.assign(c,this.getDataStates()),u==="select"){const p=(g,v)=>{g.forEach(m=>{const y=new Set(s.getElementState(m));y.add(v),y.delete(r),c[m]=Array.from(y)})};p(d,n),p(h,i),r&&Object.keys(c).forEach(g=>{const v=c[g];!v.includes(n)&&!v.includes(i)&&!v.includes(r)&&c[g].push(r)})}else{const p=c[o.id];c[o.id]=p.filter(g=>g!==n&&g!==i),p.includes(r)||c[o.id].push(r),h.forEach(g=>{c[g]=c[g].filter(v=>v!==i),c[g].includes(n)||c[g].push(r)})}else if(u==="select"){Object.assign(c,this.getClearStates(!!r));const p=(g,v)=>{g.forEach(m=>{c[m]||(c[m]=s.getElementState(m)),c[m].push(v)})};p(d,n),p(h,i),r&&Object.keys(c).forEach(g=>{!d.includes(g)&&!h.includes(g)&&c[g].push(r)})}else Object.assign(c,this.getClearStates());yield s.setElementState(c,a)})}getDataStates(){const{graph:e}=this.context,{nodes:n,edges:r,combos:i}=e.getData(),a={};return[...n,...r,...i].forEach(o=>{a[ce(o)]=vO(o)}),a}getClearStates(e=!1){const{graph:n}=this.context,{state:r,unselectedState:i,neighborState:a}=this.options,o=new Set([r,i,a]),{nodes:s,edges:l,combos:u}=n.getData(),c={};return[...s,...l,...u].forEach(f=>{const d=vO(f),h=d.filter(p=>!o.has(p));(e||h.length!==d.length)&&(c[ce(f)]=h)}),c}clearState(){return Ky(this,void 0,void 0,function*(){const{graph:e}=this.context;yield e.setElementState(this.getClearStates(),this.options.animation)})}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return Ue(n)?n(e):!!n}unbindEvents(){const{graph:e}=this.context;ed.forEach(n=>{e.off(`${n}:${be.CLICK}`,this.onClickSelect)}),e.off(fu.CLICK,this.onClickCanvas)}destroy(){this.unbindEvents(),super.destroy()}}yw.defaultOptions={animation:!0,enable:!0,multiple:!1,trigger:["shift"],state:"selected",neighborState:"selected",unselectedState:void 0,degree:0};function Ia(t){var e;return!!(!((e=t.style)===null||e===void 0)&&e.collapsed)}function Fx(t,e){if(!t.startsWith(e))return!1;const n=t[e.length];return n>="A"&&n<="Z"}function pXe(t,e){return`${e}${Bo(t)}`}function gXe(t,e,n=!0){if(!e||!Fx(t,e))return t;const r=t.slice(e.length);return n?OI(r):r}function ri(t,e){const n=Object.entries(t).reduce((r,[i,a])=>(i==="className"||i==="class"||Fx(i,e)&&Object.assign(r,{[gXe(i,e)]:a}),r),{});if("opacity"in t){const r=pXe("opacity",e),i=t.opacity;if(r in t){const a=t[r];Object.assign(n,{opacity:i*a})}else Object.assign(n,{opacity:i})}return n}function sD(t,e){const n=e.length;return Object.keys(t).reduce((r,i)=>{if(i.startsWith(e)){const a=i.slice(n);r[a]=t[i]}return r},{})}function hue(t,e){const n=typeof e=="string"?[e]:e,r={};return Object.keys(t).forEach(i=>{n.find(a=>i.startsWith(a))||(r[i]=t[i])}),r}function ao(t=0){if(typeof t=="number")return[t,t,t];const[e,n=e,r=e]=t;return[e,n,r]}var vXe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function jB(t,e){const{datum:n,graph:r}=e;return typeof t=="function"?t.call(r,n):Object.fromEntries(Object.entries(t).map(([i,a])=>typeof a=="function"?[i,a.call(r,n)]:[i,a]))}function Ii(t,e){const n=(t==null?void 0:t.style)||{},r=(e==null?void 0:e.style)||{};for(const i in n)i in r||(r[i]=n[i]);return Object.assign({},t,e,{style:r})}function mXe(t){return vXe(t,["x","y","z","class","className","transform","transformOrigin","zIndex","visibility"])}function yXe(t,e){const n=ao(t);let r={};return e.text&&!e.fontSize&&(r={fontSize:Math.min(...n)*.5}),e.src&&(!e.width||!e.height)&&(r={width:n[0]*.5,height:n[1]*.5}),r}function BB(t){if(t)return typeof t=="string"||typeof t=="function"||Array.isArray(t)?{type:"group",field:e=>e.id,color:t,invert:!1}:t}function bXe(t,e){if(!e)return{};const{type:n,color:r,field:i,invert:a}=e,o=l=>{const u=typeof r=="string"?du("palette",r):r;if(typeof u=="function"){const c={};return l.forEach(([f,d])=>{c[f]=u(a?1-d:d)}),c}else if(Array.isArray(u)){const c=a?[...u].reverse():u,f={};return l.forEach(([d,h])=>{f[d]=c[h%u.length]}),f}return{}},s=(l,u)=>{var c;return typeof l=="string"?(c=u.data)===null||c===void 0?void 0:c[l]:l==null?void 0:l(u)};if(n==="group"){const l=y2(t,d=>{if(!i)return"default";const h=s(i,d);return h?String(h):"default"}),u=Object.keys(l),c=o(u.map((d,h)=>[d,h])),f={};return Object.entries(l).forEach(([d,h])=>{h.forEach(p=>{f[ce(p)]=c[d]})}),f}else if(n==="value"){const[l,u]=t.reduce(([f,d],h)=>{const p=s(i,h);if(typeof p!="number")throw new Error(Ul(`Palette field ${i} is not a number`));return[Math.min(f,p),Math.max(d,p)]},[1/0,-1/0]),c=u-l;return o(t.map(f=>[f.id,(s(i,f)-l)/c]))}}function pue(t){const e=typeof t=="string"?du("palette",t):t;if(typeof e!="function")return e}function gue(t,e){let n=2*t;return typeof e=="string"?n=t*Number(e.replace("%",""))/100:typeof e=="number"&&(n=e),isNaN(n)&&(n=2*t),n}function vue(t,e,n=1,r=!1){const i=r?n:1,a=(t.max[0]-t.min[0])*i;return gue(a,e)}function xXe(t,e,n=1){const r=Jn(t[0],t[1])*n;return gue(r,e)}class om extends Wv{constructor(e){$B(e.style),super(e),this.shapeMap={},this.animateMap={},this.render(this.attributes,this),this.setVisibility(),this.bindEvents()}get parsedAttributes(){return this.attributes}upsert(e,n,r,i,a){var o,s,l,u,c,f,d,h;const p=this.shapeMap[e];if(r===!1){p&&((o=a==null?void 0:a.beforeDestroy)===null||o===void 0||o.call(a,p),i.removeChild(p),delete this.shapeMap[e],(s=a==null?void 0:a.afterDestroy)===null||s===void 0||s.call(a,p));return}const g=typeof n=="string"?du(Sc.SHAPE,n):n;if(!g)throw new Error(Ul(`Shape ${n} not found`));if(!p||p.destroyed||!(p instanceof g)){p&&((l=a==null?void 0:a.beforeDestroy)===null||l===void 0||l.call(a,p),p==null||p.destroy(),(u=a==null?void 0:a.afterDestroy)===null||u===void 0||u.call(a,p)),(c=a==null?void 0:a.beforeCreate)===null||c===void 0||c.call(a);const v=new g({className:e,style:r});return i.appendChild(v),this.shapeMap[e]=v,(f=a==null?void 0:a.afterCreate)===null||f===void 0||f.call(a,v),v}return(d=a==null?void 0:a.beforeUpdate)===null||d===void 0||d.call(a,p),hD(p,r),(h=a==null?void 0:a.afterUpdate)===null||h===void 0||h.call(a,p),p}update(e={}){const n=Object.assign({},this.attributes,e);$B(n),kZe(this,n),this.render(n,this),this.setVisibility()}bindEvents(){}getGraphicStyle(e){return mXe(e)}get compositeShapes(){return[["badges","badge-"],["ports","port-"]]}animate(e,n){if(e.length===0)return null;const r=[];if(e[0].x!==void 0||e[0].y!==void 0||e[0].z!==void 0){const{x:a=0,y:o=0,z:s=0}=this.attributes;e.forEach(l=>{const{x:u=a,y:c=o,z:f=s}=l;Object.assign(l,{transform:f?[["translate3d",u,c,f]]:[["translate",u,c]]})})}const i=super.animate(e,n);if(i&&(mO(this,i),r.push(i)),Array.isArray(e)&&e.length>0){const a=["transform","transformOrigin","x","y","z","zIndex"];if(Object.keys(e[0]).some(o=>!a.includes(o))){Object.entries(this.shapeMap).forEach(([s,l])=>{const u=`get${Bo(s)}Style`,c=this[u];if(Ue(c)){const f=e.map(h=>c.call(this,Object.assign(Object.assign({},this.attributes),h))),d=l.animate(oD(f),n);d&&(mO(l,d),r.push(d))}});const o=(s,l)=>{if(!Ys(s)){const u=`get${Bo(l)}Style`,c=this[u];if(Ue(c)){const f=e.map(d=>c.call(this,Object.assign(Object.assign({},this.attributes),d)));Object.entries(f[0]).map(([d])=>{const h=f.map(g=>g[d]),p=s[d];if(p){const g=p.animate(oD(h),n);g&&(mO(p,g),r.push(g))}})}}};this.compositeShapes.forEach(([s,l])=>{const u=sD(this.shapeMap,l);o(u,s)})}}return t4(r)}getShape(e){return this.shapeMap[e]}setVisibility(){const{visibility:e}=this.attributes;Jf(this,e)}destroy(){this.shapeMap={},this.animateMap={},super.destroy()}}function mO(t,e){e==null||e.finished.then(()=>{const n=t.activeAnimations.findIndex(r=>r===e);n>-1&&t.activeAnimations.splice(n,1)})}function $B(t){if(!t)return{};if("x"in t||"y"in t||"z"in t){const{x:e=0,y:n=0,z:r,transform:i}=t,a=Ule(e,n,r,i);a&&(t.transform=a)}return t}var wXe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class vu extends om{constructor(e){super(Ii({style:vu.defaultStyleProps},e))}isTextStyle(e){return Fx(e,"label")}isBackgroundStyle(e){return Fx(e,"background")}getTextStyle(e){const n=this.getGraphicStyle(e),r=wXe(n,["padding"]);return hue(r,"background")}getBackgroundStyle(e){if(e.background===!1)return!1;const n=this.getGraphicStyle(e),{wordWrap:r,wordWrapWidth:i,padding:a}=n,o=ri(n,"background"),{min:[s,l],center:[u,c],halfExtents:[f,d]}=this.shapeMap.text.getGeometryBounds(),[h,p,g,v]=kl(a),m=f*2+v+p,{width:y,height:b}=o;y&&b?Object.assign(o,{x:u-Number(y)/2,y:c-Number(b)/2}):Object.assign(o,{x:s-v,y:l-h,width:r?Math.min(m,i+v+p):m,height:d*2+h+g});const{radius:x}=o;if(typeof x=="string"&&x.endsWith("%")){const w=Number(x.replace("%",""))/100;o.radius=Math.min(+o.width,+o.height)*w}return o}render(e=this.parsedAttributes,n=this){this.upsert("text",Va,this.getTextStyle(e),n),this.upsert("background",Vr,this.getBackgroundStyle(e),n)}getGeometryBounds(){return(this.getShape("background")||this.getShape("text")).getGeometryBounds()}}vu.defaultStyleProps={padding:0,fontSize:12,fontFamily:"system-ui, sans-serif",wordWrap:!0,maxLines:1,wordWrapWidth:128,textOverflow:"...",textBaseline:"middle",backgroundOpacity:.75,backgroundZIndex:-1,backgroundLineWidth:0};class pd extends om{constructor(e){super(Ii({style:pd.defaultStyleProps},e))}getBadgeStyle(e){return this.getGraphicStyle(e)}render(e=this.parsedAttributes,n=this){this.upsert("label",vu,this.getBadgeStyle(e),n)}getGeometryBounds(){const e=this.getShape("label");return(e.getShape("background")||e.getShape("text")).getGeometryBounds()}}pd.defaultStyleProps={padding:[2,4,2,4],fontSize:10,wordWrap:!1,backgroundRadius:"50%",backgroundOpacity:1};function _Xe(t,e=!0){const n=[];return t.forEach((r,i)=>{n.push([i===0?"M":"L",...r])}),e&&n.push(["Z"]),n}const VB={M:["x","y"],m:["dx","dy"],H:["x"],h:["dx"],V:["y"],v:["dy"],L:["x","y"],l:["dx","dy"],Z:[],z:[],C:["x1","y1","x2","y2","x","y"],c:["dx1","dy1","dx2","dy2","dx","dy"],S:["x2","y2","x","y"],s:["dx2","dy2","dx","dy"],Q:["x1","y1","x","y"],q:["dx1","dy1","dx","dy"],T:["x","y"],t:["dx","dy"],A:["rx","ry","rotation","large-arc","sweep","x","y"],a:["rx","ry","rotation","large-arc","sweep","dx","dy"]};function SXe(t){const e=t.replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").trim().split(/\s*,|\s+/),n=[];let r="",i={};for(;e.length>0;){let a=e.shift();a in VB?r=a:e.unshift(a),i={type:r},VB[r].forEach(l=>{a=e.shift(),i[l]=a}),r==="M"?r="L":r==="m"&&(r="l");const[o,...s]=Object.values(i);n.push([o,...s.map(Number)])}return n}function EXe(t){const e=[];return(typeof t=="string"?SXe(t):t).forEach(r=>{const i=r[0];if(i==="Z"){e.push(e[0]);return}if(i!=="A")for(let a=1;a<r.length;a=a+2)e.push([r[a],r[a+1],0]);else{const a=r.length;e.push([r[a-2],r[a-1],0])}}),e}const mue=t=>{if(t.length<2)return[["M",0,0],["L",0,0]];const e=t[0],n=t[1],r=t[t.length-1],i=t[t.length-2];t.unshift(i,r),t.push(e,n);const a=[["M",r[0],r[1]]];for(let o=1;o<t.length-2;o+=1){const[s,l]=t[o-1],[u,c]=t[o],[f,d]=t[o+1],[h,p]=o!==t.length-2?t[o+2]:[f,d],g=u+(f-s)/6,v=c+(d-l)/6,m=f-(h-u)/6,y=d-(p-c)/6;a.push(["C",g,v,m,y,f,d])}return a};function OXe(t,e,n,r,i,a,o){const[s,l]=Gl(t,e),u={textAlign:e==="left"?"right":e==="right"?"left":"center",textBaseline:e==="top"?"bottom":e==="bottom"?"top":"middle",transform:[["translate",s+n,l+r]]};if(e==="center"||!i)return u;const c=EXe(a);if(!c||c.length<=3)return u;const f=c.map((p,g)=>{const v=p,m=c[(g+1)%c.length];return br(v,m)?null:[v,m]}).filter(Boolean),d=cXe([s,l],f),h=fue([s,l],d);if(h&&d&&(u.transform=[["translate",h[0]+n,h[1]+r]],o)){const p=Math.atan((d[0][1]-d[1][1])/(d[0][0]-d[1][0]));u.transform.push(["rotate",p/Math.PI*180]),u.textAlign="center",(e==="right"||e==="left")&&(p>0?u.textBaseline=e==="right"?"bottom":"top":u.textBaseline=e==="right"?"top":"bottom")}return u}var kXe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class sm extends om{constructor(e){super(Ii({style:sm.defaultStyleProps},e))}getLabelStyle(e){if(!e.label||!e.d||e.d.length===0)return!1;const n=ri(this.getGraphicStyle(e),"label"),{maxWidth:r,offsetX:i,offsetY:a,autoRotate:o,placement:s,closeToPath:l}=n,u=kXe(n,["maxWidth","offsetX","offsetY","autoRotate","placement","closeToPath"]),c=this.shapeMap.key,f=c==null?void 0:c.getRenderBounds();return Object.assign(OXe(f,s,i,a,l,e.d,o),{wordWrapWidth:vue(f,r)},u)}getKeyStyle(e){return this.getGraphicStyle(e)}render(e,n){this.upsert("key",yr,this.getKeyStyle(e),n),this.upsert("label",vu,this.getLabelStyle(e),n)}}sm.defaultStyleProps={label:!0,labelPlacement:"bottom",labelCloseToPath:!0,labelAutoRotate:!0,labelOffsetX:0,labelOffsetY:0};function AXe(t){const e=[],n=r=>{r!=null&&r.children.length&&r.children.forEach(i=>{e.push(i),n(i)})};return n(t),e}function TXe(t){const e=[];let n=t.parentNode;for(;n;)e.push(n),n=n.parentNode;return e}let l4=class extends wp{constructor(e){super(e),this.onMounted=()=>{this.handleRadius()},this.onAttrModified=()=>{this.handleRadius()},eh=this,this.isMutationObserved=!0,this.addEventListener(Dt.MOUNTED,this.onMounted),this.addEventListener(Dt.ATTR_MODIFIED,this.onAttrModified)}handleRadius(){const{radius:e,clipPath:n,width:r=0,height:i=0}=this.attributes;if(e&&r&&i){const[a,o]=this.getBounds().min,s={x:a,y:o,radius:e,width:r,height:i};if(n)Object.assign(this.parsedStyle.clipPath.style,s);else{const l=new Vr({style:s});this.style.clipPath=l}}else n&&(this.style.clipPath=null)}};const lD=new WeakMap;let eh=null;const u4=t=>{if(eh&&TXe(eh).includes(t)){const e=lD.get(t);e?e.includes(eh)||e.push(eh):lD.set(t,[eh])}},c4=t=>{const e=lD.get(t);e&&e.forEach(n=>n.handleRadius())};class yue extends om{constructor(e){super(e)}isImage(){const{src:e}=this.attributes;return!!e}getIconStyle(e=this.attributes){const{width:n=0,height:r=0}=e,i=this.getGraphicStyle(e);return this.isImage()?Object.assign({x:-n/2,y:-r/2},i):Object.assign({textBaseline:"middle",textAlign:"center"},i)}render(e=this.attributes,n=this){this.upsert("icon",this.isImage()?l4:Va,this.getIconStyle(e),n)}}class bue extends om{get context(){return this.config.context}get parsedAttributes(){return this.attributes}onframe(){}animate(e,n){const r=super.animate(e,n);return r&&(r.onframe=()=>this.onframe(),r.finished.then(()=>this.onframe())),r}}var Jy=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class go extends bue{constructor(e){super(Ii({style:go.defaultStyleProps},e)),this.type="node"}getSize(e=this.attributes){const{size:n}=e;return ao(n)}getKeyStyle(e){const n=this.getGraphicStyle(e);return Object.assign(hue(n,["label","halo","icon","badge","port"]))}getLabelStyle(e){if(e.label===!1||!e.labelText)return!1;const n=ri(this.getGraphicStyle(e),"label"),{placement:r,maxWidth:i,offsetX:a,offsetY:o}=n,s=Jy(n,["placement","maxWidth","offsetX","offsetY"]),l=this.getShape("key").getLocalBounds();return Object.assign(t$(l,r,a,o),{wordWrapWidth:vue(l,i)},s)}getHaloStyle(e){if(e.halo===!1)return!1;const n=this.getKeyStyle(e),{fill:r}=n,i=Jy(n,["fill"]),a=ri(this.getGraphicStyle(e),"halo");return Object.assign(Object.assign(Object.assign({},i),{stroke:r}),a)}getIconStyle(e){if(e.icon===!1||!e.iconText&&!e.iconSrc)return!1;const n=ri(this.getGraphicStyle(e),"icon");return Object.assign(yXe(e.size,n),n)}getBadgesStyle(e){var n;const r=sD(this.shapeMap,"badge-"),i={};if(Object.keys(r).forEach(f=>{i[f]=!1}),e.badge===!1||!(!((n=e.badges)===null||n===void 0)&&n.length))return i;const{badges:a=[],badgePalette:o,opacity:s=1}=e,l=Jy(e,["badges","badgePalette","opacity"]),u=pue(o),c=ri(this.getGraphicStyle(l),"badge");return a.forEach((f,d)=>{i[d]=Object.assign(Object.assign({backgroundFill:u?u[d%(u==null?void 0:u.length)]:void 0,opacity:s},c),this.getBadgeStyle(f))}),i}getBadgeStyle(e){const n=this.getShape("key"),{placement:r="top",offsetX:i,offsetY:a}=e,o=Jy(e,["placement","offsetX","offsetY"]),s=t$(n.getLocalBounds(),r,i,a,!0);return Object.assign(Object.assign({},s),o)}getPortsStyle(e){var n;const r=this.getPorts(),i={};if(Object.keys(r).forEach(s=>{i[s]=!1}),e.port===!1||!(!((n=e.ports)===null||n===void 0)&&n.length))return i;const a=ri(this.getGraphicStyle(e),"port"),{ports:o=[]}=e;return o.forEach((s,l)=>{const u=s.key||l,c=Object.assign(Object.assign({},a),s);if(Iue(c))i[u]=!1;else{const[f,d]=this.getPortXY(e,s);i[u]=Object.assign({transform:[["translate",f,d]]},c)}}),i}getPortXY(e,n){const{placement:r="left"}=n,i=this.getShape("key");return h4(MXe(this.context,i),r)}getPorts(){return sD(this.shapeMap,"port-")}getCenter(){return this.getShape("key").getBounds().center}getIntersectPoint(e,n=!1){const r=this.getShape("key").getBounds();return lXe(e,r,n)}drawHaloShape(e,n){const r=this.getHaloStyle(e),i=this.getShape("key");this.upsert("halo",i.constructor,r,n)}drawIconShape(e,n){const r=this.getIconStyle(e);this.upsert("icon",yue,r,n),u4(this)}drawBadgeShapes(e,n){const r=this.getBadgesStyle(e);Object.keys(r).forEach(i=>{const a=r[i];this.upsert(`badge-${i}`,pd,a,n)})}drawPortShapes(e,n){const r=this.getPortsStyle(e);Object.keys(r).forEach(i=>{const a=r[i],o=`port-${i}`;this.upsert(o,$a,a,n)})}drawLabelShape(e,n){const r=this.getLabelStyle(e);this.upsert("label",vu,r,n)}_drawKeyShape(e,n){return this.drawKeyShape(e,n)}render(e=this.parsedAttributes,n=this){this._drawKeyShape(e,n),this.getShape("key")&&(this.drawHaloShape(e,n),this.drawIconShape(e,n),this.drawBadgeShapes(e,n),this.drawLabelShape(e,n),this.drawPortShapes(e,n))}update(e){super.update(e),e&&("x"in e||"y"in e||"z"in e)&&c4(this)}onframe(){this.drawBadgeShapes(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this)}}go.defaultStyleProps={x:0,y:0,size:32,droppable:!0,draggable:!0,port:!0,ports:[],portZIndex:2,portLinkToCenter:!1,badge:!0,badges:[],badgeZIndex:3,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloStrokeOpacity:.25,haloPointerEvents:"none",haloZIndex:-1,icon:!0,iconZIndex:1,label:!0,labelIsBillboard:!0,labelMaxWidth:"200%",labelPlacement:"bottom",labelWordWrap:!1,labelZIndex:0};function MXe(t,e){if(!t)return e.getLocalBounds();const n=t.canvas.getLayer(),r=e.cloneNode();Jf(r,"hidden"),n.appendChild(r);const i=r.getLocalBounds();return r.destroy(),i}let lm=class xue extends go{constructor(e){super(Ii({style:xue.defaultStyleProps},e))}drawKeyShape(e,n){return this.upsert("key",$a,this.getKeyStyle(e),n)}getKeyStyle(e){const n=super.getKeyStyle(e);return Object.assign(Object.assign({},n),{r:Math.min(...this.getSize(e))/2})}getIconStyle(e){const n=super.getIconStyle(e),{r}=this.getShape("key").attributes,i=r*2*hu;return n?Object.assign({width:i,height:i},n):!1}getIntersectPoint(e,n=!1){const r=this.getShape("key").getBounds();return mw(e,r,n)}};lm.defaultStyleProps={size:32};class bw extends go{constructor(e){super(e)}get parsedAttributes(){return this.attributes}drawKeyShape(e,n){return this.upsert("key",Ic,this.getKeyStyle(e),n)}getKeyStyle(e){const n=super.getKeyStyle(e);return Object.assign(Object.assign({},n),{points:this.getPoints(e)})}getIntersectPoint(e,n=!1){var r,i;const{points:a}=this.getShape("key").attributes,o=[+(((r=this.attributes)===null||r===void 0?void 0:r.x)||0),+(((i=this.attributes)===null||i===void 0?void 0:i.y)||0)];return cue(e,o,a,!0,n).point}}class CXe extends bw{constructor(e){super(e)}getPoints(e){const[n,r]=this.getSize(e);return EZe(n,r)}}var PXe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class xw extends lm{constructor(e){super(Ii({style:xw.defaultStyleProps},e))}parseOuterR(){const{size:e}=this.parsedAttributes;return Math.min(...ao(e))/2}parseInnerR(){const{innerR:e}=this.parsedAttributes;return an(e)?parseInt(e)/100*this.parseOuterR():e}drawDonutShape(e,n){const{donuts:r}=e;if(!(r!=null&&r.length))return;const i=r.map(f=>je(f)?{value:f}:f),a=ri(this.getGraphicStyle(e),"donut"),o=pue(e.donutPalette);if(!o)return;const s=i.reduce((f,d)=>{var h;return f+((h=d.value)!==null&&h!==void 0?h:0)},0),l=this.parseOuterR(),u=this.parseInnerR();let c=0;i.forEach((f,d)=>{const{value:h=0,color:p=o[d%o.length]}=f,g=PXe(f,["value","color"]),v=(s===0?1/i.length:h/s)*360;this.upsert(`round${d}`,yr,Object.assign(Object.assign(Object.assign({},a),{d:LXe(l,u,c,c+v),fill:p}),g),n),c+=v})}render(e,n=this){super.render(e,n),this.drawDonutShape(e,n)}}xw.defaultStyleProps={innerR:"50%",donuts:[],donutPalette:"tableau"};const Qy=(t,e,n,r)=>[t+Math.sin(r)*n,e-Math.cos(r)*n],DXe=(t,e,n,r)=>r<=0||n<=r?[["M",t-n,e],["A",n,n,0,1,1,t+n,e],["A",n,n,0,1,1,t-n,e],["Z"]]:[["M",t-n,e],["A",n,n,0,1,1,t+n,e],["A",n,n,0,1,1,t-n,e],["Z"],["M",t+r,e],["A",r,r,0,1,0,t-r,e],["A",r,r,0,1,0,t+r,e],["Z"]],IXe=(t,e,n,r,i,a)=>{const[o,s]=[i/360*2*Math.PI,a/360*2*Math.PI],l=[Qy(t,e,r,o),Qy(t,e,n,o),Qy(t,e,n,s),Qy(t,e,r,s)],u=s-o>Math.PI?1:0;return[["M",l[0][0],l[0][1]],["L",l[1][0],l[1][1]],["A",n,n,0,u,1,l[2][0],l[2][1]],["L",l[3][0],l[3][1]],["A",r,r,0,u,0,l[0][0],l[0][1]],["Z"]]},LXe=(t=0,e=0,n,r)=>{const[i,a]=[0,0];return Math.abs(n-r)%360<1e-6?DXe(i,a,t,e):IXe(i,a,t,e,n,r)};class ww extends go{constructor(e){super(Ii({style:ww.defaultStyleProps},e))}drawKeyShape(e,n){return this.upsert("key",xp,this.getKeyStyle(e),n)}getKeyStyle(e){const n=super.getKeyStyle(e),[r,i]=this.getSize(e);return Object.assign(Object.assign({},n),{rx:r/2,ry:i/2})}getIconStyle(e){const n=super.getIconStyle(e),{rx:r,ry:i}=this.getShape("key").attributes,a=Math.min(+r,+i)*2*hu;return n?Object.assign({width:a,height:a},n):!1}getIntersectPoint(e,n=!1){const r=this.getShape("key").getBounds();return mw(e,r,n)}}ww.defaultStyleProps={size:[45,35]};class RXe extends bw{constructor(e){super(e)}getOuterR(e){return e.outerR||Math.min(...this.getSize(e))/2}getPoints(e){return AZe(this.getOuterR(e))}getIconStyle(e){const n=super.getIconStyle(e),r=this.getOuterR(e)*hu;return n?Object.assign({width:r,height:r},n):!1}}var NXe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class _w extends go{constructor(e){super(Object.assign(Object.assign({},e),{style:Object.assign({},_w.defaultStyleProps,e.style)})),this.rootPointerEvent=new Gb(null),this.forwardEvents=n=>{const r=this.context.canvas,i=r.context.renderingContext.root.ownerDocument.defaultView;this.normalizeToPointerEvent(n,i).forEach(o=>{const s=this.bootstrapEvent(this.rootPointerEvent,o,i,n);C0(r.context.eventService,"mappingTable.pointerupoutside",[]),r.context.eventService.mapEvent(s)})}}get eventService(){return this.context.canvas.context.eventService}get events(){return[be.CLICK,be.POINTER_DOWN,be.POINTER_MOVE,be.POINTER_UP,be.POINTER_OVER,be.POINTER_LEAVE]}getDomElement(){return this.getShape("key").getDomElement()}render(e=this.parsedAttributes,n=this){this.drawKeyShape(e,n),this.drawPortShapes(e,n)}getKeyStyle(e){const n=mc(e,["dx","dy","innerHTML","pointerEvents","cursor"]),{dx:r=0,dy:i=0}=n,a=NXe(n,["dx","dy"]),[o,s]=this.getSize(e);return Object.assign(Object.assign({x:r,y:i},a),{width:o,height:s})}drawKeyShape(e,n){const r=this.getKeyStyle(e),{x:i,y:a,width:o=0,height:s=0}=r,l=this.upsert("key-container",Vr,{x:i,y:a,width:o,height:s,opacity:0},n);return this.upsert("key",ud,r,l)}connectedCallback(){if(!(this.context.canvas.getRenderer("main")instanceof Hf))return;const r=this.getDomElement();this.events.forEach(i=>{r.addEventListener(i,this.forwardEvents)})}attributeChangedCallback(e,n,r){e==="zIndex"&&n!==r&&(this.getDomElement().style.zIndex=r)}destroy(){const e=this.getDomElement();this.events.forEach(n=>{e.removeEventListener(n,this.forwardEvents)}),super.destroy()}normalizeToPointerEvent(e,n){const r=[];if(n.isTouchEvent(e))for(let i=0;i<e.changedTouches.length;i++){const a=e.changedTouches[i];bt(a.button)&&(a.button=0),bt(a.buttons)&&(a.buttons=1),bt(a.isPrimary)&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),bt(a.width)&&(a.width=a.radiusX||1),bt(a.height)&&(a.height=a.radiusY||1),bt(a.tiltX)&&(a.tiltX=0),bt(a.tiltY)&&(a.tiltY=0),bt(a.pointerType)&&(a.pointerType="touch"),bt(a.pointerId)&&(a.pointerId=a.identifier||0),bt(a.pressure)&&(a.pressure=a.force||.5),bt(a.twist)&&(a.twist=0),bt(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,a.type=e.type,r.push(a)}else if(n.isMouseEvent(e)){const i=e;bt(i.isPrimary)&&(i.isPrimary=!0),bt(i.width)&&(i.width=1),bt(i.height)&&(i.height=1),bt(i.tiltX)&&(i.tiltX=0),bt(i.tiltY)&&(i.tiltY=0),bt(i.pointerType)&&(i.pointerType="mouse"),bt(i.pointerId)&&(i.pointerId=1),bt(i.pressure)&&(i.pressure=.5),bt(i.twist)&&(i.twist=0),bt(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,r.push(i)}else r.push(e);return r}transferMouseData(e,n){e.isTrusted=n.isTrusted,e.srcElement=n.srcElement,e.timeStamp=performance.now(),e.type=n.type,e.altKey=n.altKey,e.metaKey=n.metaKey,e.shiftKey=n.shiftKey,e.ctrlKey=n.ctrlKey,e.button=n.button,e.buttons=n.buttons,e.client.x=n.clientX,e.client.y=n.clientY,e.movement.x=n.movementX,e.movement.y=n.movementY,e.page.x=n.pageX,e.page.y=n.pageY,e.screen.x=n.screenX,e.screen.y=n.screenY,e.relatedTarget=null}bootstrapEvent(e,n,r,i){e.view=r,e.originalEvent=null,e.nativeEvent=i,e.pointerId=n.pointerId,e.width=n.width,e.height=n.height,e.isPrimary=n.isPrimary,e.pointerType=n.pointerType,e.pressure=n.pressure,e.tangentialPressure=n.tangentialPressure,e.tiltX=n.tiltX,e.tiltY=n.tiltY,e.twist=n.twist,this.transferMouseData(e,n);const{x:a,y:o}=this.getViewportXY(n);e.viewport.x=a,e.viewport.y=o;const[s,l]=this.context.canvas.getCanvasByViewport([a,o]);return e.canvas.x=s,e.canvas.y=l,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e}getViewportXY(e){let n,r;const{offsetX:i,offsetY:a,clientX:o,clientY:s}=e;if(!lt(i)&&!lt(a))n=i,r=a;else{const l=this.eventService.client2Viewport({x:o,y:s});n=l.x,r=l.y}return{x:n,y:r}}onframe(){super.onframe();const{opacity:e}=this.attributes;this.getDomElement().style.opacity=`${e}`}}_w.defaultStyleProps={size:[160,80],halo:!1,icon:!1,label:!1,pointerEvents:"auto"};var qB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};let wue=class _ue extends go{constructor(e){super(Ii({style:_ue.defaultStyleProps},e))}getKeyStyle(e){const[n,r]=this.getSize(e),i=super.getKeyStyle(e),{fillOpacity:a,opacity:o=a}=i,s=qB(i,["fillOpacity","opacity"]);return Object.assign(Object.assign({opacity:o},s),{width:n,height:r,x:-n/2,y:-r/2})}getBounds(){return this.getShape("key").getBounds()}getHaloStyle(e){if(e.halo===!1)return!1;const n=this.getShape("key").attributes;qB(n,["fill","stroke"]);const r=ri(this.getGraphicStyle(e),"halo"),i=Number(r.lineWidth),[a,o]=kt(this.getSize(e),[i,i]),{lineWidth:s}=r,l={fill:"transparent",lineWidth:s/2,width:a-s/2,height:o-s/2,x:-(a-s/2)/2,y:-(o-s/2)/2};return Object.assign(Object.assign({},r),l)}getIconStyle(e){const n=super.getIconStyle(e),[r,i]=this.getSize(e);return n?Object.assign({width:r*hu,height:i*hu},n):!1}drawKeyShape(e,n){const r=this.upsert("key",l4,this.getKeyStyle(e),n);return u4(this),r}drawHaloShape(e,n){this.upsert("halo",Vr,this.getHaloStyle(e),n)}update(e){super.update(e),e&&("x"in e||"y"in e||"z"in e)&&c4(this)}};wue.defaultStyleProps={size:32};class Sue extends go{constructor(e){super(e)}getKeyStyle(e){const[n,r]=this.getSize(e);return Object.assign(Object.assign({},super.getKeyStyle(e)),{width:n,height:r,x:-n/2,y:-r/2})}getIconStyle(e){const n=super.getIconStyle(e),{width:r,height:i}=this.getShape("key").attributes;return n?Object.assign({width:r*hu,height:i*hu},n):!1}drawKeyShape(e,n){return this.upsert("key",Vr,this.getKeyStyle(e),n)}}class FXe extends bw{constructor(e){super(e)}getInnerR(e){return e.innerR||this.getOuterR(e)*3/8}getOuterR(e){return Math.min(...this.getSize(e))/2}getPoints(e){return xZe(this.getOuterR(e),this.getInnerR(e))}getIconStyle(e){const n=super.getIconStyle(e),r=this.getInnerR(e)*2*hu;return n?Object.assign({width:r,height:r},n):!1}getPortXY(e,n){const{placement:r="top"}=n,i=this.getShape("key").getLocalBounds(),a=wZe(this.getOuterR(e),this.getInnerR(e));return h4(i,r,a,!1)}}class Sw extends bw{constructor(e){super(Ii({style:Sw.defaultStyleProps},e))}getPoints(e){const{direction:n}=e,[r,i]=this.getSize(e);return _Ze(r,i,n)}getPortXY(e,n){const{direction:r}=e,{placement:i="top"}=n,a=this.getShape("key").getLocalBounds(),[o,s]=this.getSize(e),l=SZe(o,s,r);return h4(a,i,l,!1)}getIconStyle(e){const{icon:n,iconText:r,iconSrc:i,direction:a}=e;if(n===!1||Ys(r||i))return!1;const o=ri(this.getGraphicStyle(e),"icon"),s=this.getShape("key").getLocalBounds(),[l,u]=NUe(s,a),c=FUe(s,a)*2*hu;return Object.assign({x:l,y:u,width:c,height:c},o)}}Sw.defaultStyleProps={size:40,direction:"up"};var WB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Cp extends go{constructor(e){super(Ii({style:Cp.defaultStyleProps},e)),this.type="combo",this.updateComboPosition(this.parsedAttributes)}getKeySize(e){const{collapsed:n,childrenNode:r=[]}=e;return r.length===0?this.getEmptyKeySize(e):n?this.getCollapsedKeySize(e):this.getExpandedKeySize(e)}getEmptyKeySize(e){const{padding:n,collapsedSize:r}=e,[i,a,o,s]=kl(n);return kt(ao(r),[s+a,i+o,0])}getCollapsedKeySize(e){return ao(e.collapsedSize)}getExpandedKeySize(e){const n=this.getContentBBox(e);return[Al(n),Tl(n),0]}getContentBBox(e){const{childrenNode:n=[],padding:r}=e,i=n.map(o=>this.context.element.getElement(o)).filter(Boolean);if(i.length===0){const o=new zn,{x:s=0,y:l=0,size:u}=e,[c,f]=ao(u);return o.setMinMax([s-c/2,l-f/2,0],[s+c/2,l+f/2,0]),o}const a=im(i.map(o=>o.getBounds()));return r?Bc(a,r):a}drawCollapsedMarkerShape(e,n){const r=this.getCollapsedMarkerStyle(e);this.upsert("collapsed-marker",yue,r,n),u4(this)}getCollapsedMarkerStyle(e){if(!e.collapsed||!e.collapsedMarker)return!1;const n=ri(this.getGraphicStyle(e),"collapsedMarker"),{type:r}=n,i=WB(n,["type"]),a=this.getShape("key"),[o,s]=Gl(a.getLocalBounds(),"center"),l=Object.assign(Object.assign({},i),{x:o,y:s});if(r){const u=this.getCollapsedMarkerText(r,e);Object.assign(l,{text:u})}return l}getCollapsedMarkerText(e,n){const{childrenData:r=[]}=n,{model:i}=this.context;return e==="descendant-count"?i.getDescendantsData(this.id).length.toString():e==="child-count"?r.length.toString():e==="node-count"?i.getDescendantsData(this.id).filter(a=>i.getElementType(ce(a))==="node").length.toString():Ue(e)?e(r):""}getComboPosition(e){const{x:n=0,y:r=0,collapsed:i,childrenData:a=[]}=e;if(a.length===0)return[+n,+r,0];if(i){const{model:o}=this.context,s=o.getDescendantsData(this.id).filter(l=>!o.isCombo(ce(l)));if(s.length>0&&s.some(rXe)){const l=s.reduce((u,c)=>kt(u,Yr(c)),[0,0,0]);return As(l,s.length)}return[+n,+r,0]}return this.getContentBBox(e).center}getComboStyle(e){const[n,r]=this.getComboPosition(e);return{x:n,y:r,transform:[["translate",n,r]]}}updateComboPosition(e){const n=this.getComboStyle(e);Object.assign(this.style,n);const{x:r,y:i}=n;this.context.model.syncNodeLikeDatum({id:this.id,style:{x:r,y:i}}),c4(this)}render(e,n=this){super.render(e,n),this.drawCollapsedMarkerShape(e,n)}update(e={}){super.update(e),this.updateComboPosition(this.parsedAttributes)}onframe(){super.onframe(),this.attributes.collapsed||this.updateComboPosition(this.parsedAttributes),this.drawKeyShape(this.parsedAttributes,this)}animate(e,n){const r=super.animate(this.attributes.collapsed?e:e.map(i=>{var a=WB(i,["x","y","z","transform"]);return a}),n);return r&&new Proxy(r,{set:(i,a,o)=>(a==="currentTime"&&Promise.resolve().then(()=>this.onframe()),Reflect.set(i,a,o))})}}Cp.defaultStyleProps={childrenNode:[],droppable:!0,draggable:!0,collapsed:!1,collapsedSize:32,collapsedMarker:!0,collapsedMarkerZIndex:1,collapsedMarkerFontSize:12,collapsedMarkerTextAlign:"center",collapsedMarkerTextBaseline:"middle",collapsedMarkerType:"child-count"};class zXe extends Cp{constructor(e){super(e)}drawKeyShape(e,n){return this.upsert("key",$a,this.getKeyStyle(e),n)}getKeyStyle(e){const{collapsed:n}=e,r=super.getKeyStyle(e),[i]=this.getKeySize(e);return Object.assign(Object.assign(Object.assign({},r),n&&ri(r,"collapsed")),{r:i/2})}getCollapsedKeySize(e){const[n,r]=ao(e.collapsedSize),i=Math.max(n,r)/2;return[i*2,i*2,0]}getExpandedKeySize(e){const n=this.getContentBBox(e),[r,i]=jc(n),a=Math.sqrt(Math.pow(r,2)+Math.pow(i,2))/2;return[a*2,a*2,0]}getIntersectPoint(e,n=!1){const r=this.getShape("key").getBounds();return mw(e,r,n)}}class jXe extends Cp{constructor(e){super(e)}drawKeyShape(e,n){return this.upsert("key",Vr,this.getKeyStyle(e),n)}getKeyStyle(e){const n=super.getKeyStyle(e),[r,i]=this.getKeySize(e);return Object.assign(Object.assign(Object.assign({},n),e.collapsed&&ri(n,"collapsed")),{width:r,height:i,x:-r/2,y:-i/2})}}const BXe={padding:10};function GB(t,e,n,r,i,a){const{padding:o}=Object.assign(BXe,a),s=Ju(n,o),l=Ju(r,o),u=[t,...i,e];let c=null;const f=[];for(let d=0,h=u.length;d<h-1;d++){const p=d+1,g=u[d],v=u[p],m=oXe(g,v);let y=null;if(d===0)if(p===h-1)if(s.intersects(l))y=yO(g,v,s,l);else if(!Lx(g,s)&&!Lx(v,l)){const b=Tf(g,s),x=Tf(v,l);y=YB(b,x,ba(b,x)),y.points.unshift(b),y.points.push(x)}else m||(y=VXe(g,v,s,l));else ks(v,s)?y=yO(g,v,s,Ju(v,o),c):m||(y=j1(g,v,s));else p===h-1?ks(g,l)?y=yO(g,v,Ju(g,o),l,c):m||(y=Eue(g,v,l,c)):m||(y=YB(g,v,c));y?(f.push(...y.points),c=y.direction):c=ba(g,v),p<h-1&&f.push(v)}return f.map(Qf)}const $Xe={N:"S",S:"N",W:"E",E:"W"},HB={N:-Math.PI/2,S:Math.PI/2,E:0,W:Math.PI};function ba(t,e){const[n,r]=t,[i,a]=e;return n===i?r>a?"N":"S":r===a?n>i?"W":"E":null}function uD(t,e){return e==="N"||e==="S"?Tl(t):Al(t)}function YB(t,e,n){const r=[t[0],e[1]],i=[e[0],t[1]],a=ba(t,r),o=ba(t,i),s=n?$Xe[n]:null,l=a===n||a!==s&&o!==n?r:i;return{points:[l],direction:ba(l,e)}}function j1(t,e,n){if(Lx(t,n)){const r=cv(t,e,n);return{points:[r],direction:ba(r,e)}}else{const r=Tf(t,n),a=["left","right"].includes(i0(t,n))?[e[0],r[1]]:[r[0],e[1]];return{points:[a],direction:ba(a,e)}}}function Eue(t,e,n,r){const i=Lx(e,n)?e:Tf(e,n),a=[[i[0],t[1]],[t[0],i[1]]],o=a.filter(l=>RUe(l,n)&&!Jle(l,n,!0)),s=o.filter(l=>ba(l,t)!==r);if(s.length>0){const l=s.find(u=>ba(t,u)===r)||s[0];return{points:[l],direction:ba(l,e)}}else{const l=MOe(a,o)[0],u=cc(e,l,uD(n,r)/2);return{points:[cv(u,t,n),u],direction:ba(u,e)}}}function VXe(t,e,n,r){let i=j1(t,e,n);const a=uv(i.points[0]);if(ks(a,r)){i=j1(e,t,r);const o=uv(i.points[0]);if(ks(o,n)){const s=cc(t,a,uD(n,ba(t,a))/2),l=cc(e,o,uD(r,ba(e,o))/2),u=[(s[0]+l[0])/2,(s[1]+l[1])/2],c=j1(t,u,n),f=Eue(u,e,r,c.direction);i.points=[c.points[0],f.points[0]],i.direction=f.direction}}return i}function yO(t,e,n,r,i){const o=im([n,r]),s=Jn(e,o.center)>Jn(t,o.center),[l,u]=s?[e,t]:[t,e],c=Tl(o)+Al(o);let f;if(i){const p=[l[0]+c*Math.cos(HB[i]),l[1]+c*Math.sin(HB[i])];f=cc(Tf(p,o),p,.01)}else f=cc(Tf(l,o),l,-.01);let d=cv(f,u,o),h=[ug(f,2),ug(d,2)];if(br(ug(f),ug(d))){const p=a4(In(f,l),[1,0,0])+Math.PI/2;d=[u[0]+c*Math.cos(p),u[1]+c*Math.sin(p),0],d=ug(cc(Tf(d,o),u,-.01),2);const g=cv(f,d,o);h=[f,g,d]}return{points:s?h.reverse():h,direction:ba(s?f:d,e)}}function cv(t,e,n){let r=[t[0],e[1]];return ks(r,n)&&(r=[e[0],t[1]]),r}function Oue(t,e,n,r,i){let l=typeof e=="number"?e:.5;e==="start"&&(l=0),e==="end"&&(l=.99);const u=Vi(t.getPoint(l)),c=Vi(t.getPoint(l+.01));let f=e==="start"?"left":e==="end"?"right":"center";if(sue(u,c)||!n){const[m,y]=UB(t,l,r,i);return{transform:[["translate",m,y]],textAlign:f}}let d=Math.atan2(c[1]-u[1],c[0]-u[0]);c[0]<u[0]&&(f=f==="center"?f:f==="left"?"right":"left",r*=-1,d+=Math.PI);const[p,g]=UB(t,l,r,i,d),v=[["translate",p,g],["rotate",d/Math.PI*180]];return{textAlign:f,transform:v}}function qXe(t,e,n,r,i){var a,o;const s=((a=t.badge)===null||a===void 0?void 0:a.getGeometryBounds().halfExtents[0])*2||0,l=((o=t.label)===null||o===void 0?void 0:o.getGeometryBounds().halfExtents[0])*2||0;return Oue(t.key,n,!0,(l?(l/2+s/2)*(e==="suffix"?1:-1):0)+r,i)}function UB(t,e,n,r,i){const[a,o]=Vi(t.getPoint(e));let s=n,l=r;return i&&(s=n*Math.cos(i)-r*Math.sin(i),l=n*Math.sin(i)+r*Math.cos(i)),[a+s,o+l]}function cD(t,e,n,r){if(br(t,e))return t;const i=In(e,t),a=[t[0]+n*i[0],t[1]+n*i[1]],o=eu(vw(i,!1));return a[0]+=r*o[0],a[1]+=r*o[1],a}function WXe(t){return je(t)?[t,-t]:t}function GXe(t){return je(t)?[t,1-t]:t}function HXe(t,e,n){return[["M",t[0],t[1]],["Q",n[0],n[1],e[0],e[1]]]}function kue(t,e,n){return[["M",t[0],t[1]],["C",n[0][0],n[0][1],n[1][0],n[1][1],e[0],e[1]]]}function f4(t,e=0,n=!1){const r=t.length-1,i=t[0],a=t[r],o=t.slice(1,r),s=[["M",i[0],i[1]]];return o.forEach((l,u)=>{const c=o[u-1]||i,f=o[u+1]||a;if(!lue(c,l,f)&&e){const[d,h]=YXe(c,l,f,e);s.push(["L",d[0],d[1]],["Q",l[0],l[1],h[0],h[1]],["L",h[0],h[1]])}else s.push(["L",l[0],l[1]])}),s.push(["L",a[0],a[1]]),n&&s.push(["Z"]),s}function YXe(t,e,n,r){const i=Rx(t,e),a=Rx(n,e),o=Math.min(r,Math.min(i,a)/2),s=[e[0]-o/i*(e[0]-t[0]),e[1]-o/i*(e[1]-t[1])],l=[e[0]-o/a*(e[0]-n[0]),e[1]-o/a*(e[1]-n[1])];return[s,l]}const UXe=t=>{const e=Math.PI/2,n=Tl(t)/2,r=Al(t)/2,i=Math.atan2(n,r)/2,a=Math.atan2(r,n)/2;return{top:[-e-a,-e+a],"top-right":[-e+a,-i],"right-top":[-e+a,-i],right:[-i,i],"bottom-right":[i,e-a],"right-bottom":[i,e-a],bottom:[e-a,e+a],"bottom-left":[e+a,Math.PI-i],"left-bottom":[e+a,Math.PI-i],left:[Math.PI-i,Math.PI+i],"top-left":[Math.PI+i,-e-a],"left-top":[Math.PI+i,-e-a]}};function Aue(t,e,n,r,i){const a=Ju(t),o=t.getCenter();let s=r&&Ec(r),l=i&&Ec(i);if(!s||!l){const u=UXe(a),c=u[e][0],f=u[e][1],[d,h]=jc(a),p=Math.max(d,h),g=kt(o,[p*Math.cos(c),p*Math.sin(c),0]),v=kt(o,[p*Math.cos(f),p*Math.sin(f),0]);s=dD(t,g),l=dD(t,v),n||([s,l]=[l,s])}return[s,l]}function XXe(t,e,n,r,i,a){const o=t.getPorts()[i||a],s=t.getPorts()[a||i];let[l,u]=Aue(t,e,n,o,s);const c=ZXe(t,l,u,r);return o&&(l=fv(o,c[0])),s&&(u=fv(s,c.at(-1))),kue(l,u,c)}function ZXe(t,e,n,r){const i=t.getCenter();if(br(e,n)){const a=In(e,i),o=[r*Math.sign(a[0])||r/2,r*Math.sign(a[1])||-r/2,0];return[kt(e,o),kt(n,gs(o,[1,-1,1]))]}return[cc(i,e,Jn(i,e)+r),cc(i,n,Jn(i,n)+r)]}function KXe(t,e,n,r,i,a,o){const s=p4(t),l=s[a||o],u=s[o||a];let[c,f]=Aue(t,n,r,l,u);const d=JXe(t,c,f,i);return l&&(c=fv(l,d[0])),u&&(f=fv(u,d.at(-1))),f4([c,...d,f],e)}function JXe(t,e,n,r){const i=[],a=Ju(t);if(br(e,n))switch(i0(e,a)){case"left":i.push([e[0]-r,e[1]]),i.push([e[0]-r,e[1]+r]),i.push([e[0],e[1]+r]);break;case"right":i.push([e[0]+r,e[1]]),i.push([e[0]+r,e[1]+r]),i.push([e[0],e[1]+r]);break;case"top":i.push([e[0],e[1]-r]),i.push([e[0]+r,e[1]-r]),i.push([e[0]+r,e[1]]);break;case"bottom":i.push([e[0],e[1]+r]),i.push([e[0]+r,e[1]+r]),i.push([e[0]+r,e[1]]);break}else{const o=i0(e,a),s=i0(n,a);if(o===s){const l=o;let u,c;switch(l){case"left":u=Math.min(e[0],n[0])-r,i.push([u,e[1]]),i.push([u,n[1]]);break;case"right":u=Math.max(e[0],n[0])+r,i.push([u,e[1]]),i.push([u,n[1]]);break;case"top":c=Math.min(e[1],n[1])-r,i.push([e[0],c]),i.push([n[0],c]);break;case"bottom":c=Math.max(e[1],n[1])+r,i.push([e[0],c]),i.push([n[0],c]);break}}else{const l=(d,h)=>({left:[h[0]-r,h[1]],right:[h[0]+r,h[1]],top:[h[0],h[1]-r],bottom:[h[0],h[1]+r]})[d],u=l(o,e),c=l(s,n),f=cv(u,c,a);i.push(u,f,c)}}return i}function fD(t,e){const n=new Set,r=new Set,i=new Set;return t.forEach(a=>{e(a).forEach(s=>{n.add(s),t.includes(s.source)&&t.includes(s.target)?r.add(s):i.add(s)})}),{edges:Array.from(n),internal:Array.from(r),external:Array.from(i)}}function XB(t,e){const n=[];let r=t;for(;r;){n.push(r);const i=e(ce(r));if(i)r=i;else break}if(n.some(i=>{var a;return(a=i.style)===null||a===void 0?void 0:a.collapsed})){const i=n.reverse().findIndex(Ia);return n[i]||n.at(-1)}return t}function QXe(t,e){return e||(t<4?10:t===4?12:t*2.5)}const eZe=(t,e)=>{const n=Math.max(t,e)/2;return[["M",-t/2,0],["A",n,n,0,1,0,2*n-t/2,0],["A",n,n,0,1,0,-t/2,0],["Z"]]},Tue=(t,e)=>[["M",-t/2,0],["L",t/2,-e/2],["L",t/2,e/2],["Z"]],tZe=(t,e)=>[["M",-t/2,0],["L",0,-e/2],["L",t/2,0],["L",0,e/2],["Z"]],nZe=(t,e)=>[["M",-t/2,0],["L",t/2,-e/2],["L",4*t/5-t/2,0],["L",t/2,e/2],["Z"]],rZe=(t,e)=>[["M",-t/2,-e/2],["L",t/2,-e/2],["L",t/2,e/2],["L",-t/2,e/2],["Z"]],iZe=(t,e)=>{const n=t/2,r=t/7,i=t-r;return[["M",-n,0],["L",0,-e/2],["L",0,e/2],["Z"],["M",i-n,-e/2],["L",i+r-n,-e/2],["L",i+r-n,e/2],["L",i-n,e/2],["Z"]]},aZe=(t,e)=>[["M",t/2,-e/2],["L",-t/2,0],["L",t/2,0],["L",-t/2,0],["L",t/2,e/2]],oZe=Object.freeze(Object.defineProperty({__proto__:null,circle:eZe,diamond:tZe,rect:rZe,simple:aZe,triangle:Tue,triangleRect:iZe,vee:nZe},Symbol.toStringTag,{value:"Module"}));var e1=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class $c extends bue{constructor(e){super(Ii({style:$c.defaultStyleProps},e)),this.type="edge"}get sourceNode(){const{sourceNode:e}=this.parsedAttributes;return this.context.element.getElement(e)}get targetNode(){const{targetNode:e}=this.parsedAttributes;return this.context.element.getElement(e)}getKeyStyle(e){const n=this.getGraphicStyle(e),{loop:r}=n,i=e1(n,["loop"]),{sourceNode:a,targetNode:o}=this,l={d:r&&vZe(a,o)?this.getLoopPath(e):this.getKeyPath(e)};return yr.PARSED_STYLE_LIST.forEach(u=>{u in i&&(l[u]=i[u])}),l}getLoopPath(e){const{sourcePort:n,targetPort:r}=e,i=this.sourceNode,a=Ju(i),o=Math.max(Al(a),Tl(a)),{placement:s,clockwise:l,dist:u=o}=ri(this.getGraphicStyle(e),"loop");return XXe(i,s,l,u,n,r)}getEndpoints(e,n=!0,r=[]){const{sourcePort:i,targetPort:a}=e,{sourceNode:o,targetNode:s}=this,[l,u]=yZe(o,s,i,a);if(!n){const h=l?Ec(l):o.getCenter(),p=u?Ec(u):s.getCenter();return[h,p]}const c=typeof r=="function"?r():r,f=e$(l||o,c[0]||u||s),d=e$(u||s,c[c.length-1]||l||o);return[f,d]}getHaloStyle(e){if(e.halo===!1)return!1;const n=this.getKeyStyle(e),r=ri(this.getGraphicStyle(e),"halo");return Object.assign(Object.assign({},n),r)}getLabelStyle(e){if(e.label===!1||!e.labelText)return!1;const n=ri(this.getGraphicStyle(e),"label"),{placement:r,offsetX:i,offsetY:a,autoRotate:o,maxWidth:s}=n,l=e1(n,["placement","offsetX","offsetY","autoRotate","maxWidth"]),u=Oue(this.shapeMap.key,r,o,i,a),c=this.shapeMap.key.getLocalBounds(),f=xXe([c.min,c.max],s);return Object.assign({wordWrapWidth:f},u,l)}getBadgeStyle(e){if(e.badge===!1||!e.badgeText)return!1;const n=ri(e,"badge"),{offsetX:r,offsetY:i,placement:a}=n,o=e1(n,["offsetX","offsetY","placement"]);return Object.assign(o,qXe(this.shapeMap,a,e.labelPlacement,r,i))}drawArrow(e,n){var r;const i=n==="start",o=e[n==="start"?"startArrow":"endArrow"],s=this.shapeMap.key;if(o){const l=this.getArrowStyle(e,i),[u,c,f]=i?["markerStart","markerStartOffset","startArrowOffset"]:["markerEnd","markerEndOffset","endArrowOffset"],d=s.parsedStyle[u];if(d)d.attr(l);else{const h=l.src?wp:yr,p=new h({style:l});s.style[u]=p}s.style[c]=e[f]||l.width/2+ +l.lineWidth}else{const l=i?"markerStart":"markerEnd";(r=s.style[l])===null||r===void 0||r.destroy(),s.style[l]=null}}getArrowStyle(e,n){const r=this.getShape("key").attributes,i=n?"startArrow":"endArrow",a=ri(this.getGraphicStyle(e),i),{size:o,type:s}=a,l=e1(a,["size","type"]),[u,c]=ao(QXe(r.lineWidth,o)),d=(Ue(s)?s:oZe[s]||Tue)(u,c);return Object.assign(mc(r,["stroke","strokeOpacity","fillOpacity"]),{width:u,height:c},Object.assign({},d&&{d,fill:s==="simple"?"":r.stroke}),l)}drawLabelShape(e,n){const r=this.getLabelStyle(e);this.upsert("label",vu,r,n)}drawHaloShape(e,n){const r=this.getHaloStyle(e);this.upsert("halo",yr,r,n)}drawBadgeShape(e,n){const r=this.getBadgeStyle(e);this.upsert("badge",pd,r,n)}drawSourceArrow(e){this.drawArrow(e,"start")}drawTargetArrow(e){this.drawArrow(e,"end")}drawKeyShape(e,n){const r=this.getKeyStyle(e);return this.upsert("key",yr,r,n)}render(e=this.parsedAttributes,n=this){this.drawKeyShape(e,n),this.getShape("key")&&(this.drawSourceArrow(e),this.drawTargetArrow(e),this.drawLabelShape(e,n),this.drawHaloShape(e,n),this.drawBadgeShape(e,n))}onframe(){this.drawKeyShape(this.parsedAttributes,this),this.drawSourceArrow(this.parsedAttributes),this.drawTargetArrow(this.parsedAttributes),this.drawHaloShape(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this),this.drawBadgeShape(this.parsedAttributes,this)}animate(e,n){const r=super.animate(e,n);return r&&new Proxy(r,{set:(i,a,o)=>(a==="currentTime"&&Promise.resolve().then(()=>this.onframe()),Reflect.set(i,a,o))})}}$c.defaultStyleProps={badge:!0,badgeOffsetX:0,badgeOffsetY:0,badgePlacement:"suffix",isBillboard:!0,label:!0,labelAutoRotate:!0,labelIsBillboard:!0,labelMaxWidth:"80%",labelOffsetX:4,labelOffsetY:0,labelPlacement:"center",labelTextBaseline:"middle",labelWordWrap:!1,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloPointerEvents:"none",haloStrokeOpacity:.25,haloZIndex:-1,loop:!0,startArrow:!1,startArrowLineDash:0,startArrowLineJoin:"round",startArrowLineWidth:1,startArrowTransformOrigin:"center",startArrowType:"vee",endArrow:!1,endArrowLineDash:0,endArrowLineJoin:"round",endArrowLineWidth:1,endArrowTransformOrigin:"center",endArrowType:"vee",loopPlacement:"top",loopClockwise:!0};class gd extends $c{constructor(e){super(Ii({style:gd.defaultStyleProps},e))}getKeyPath(e){const[n,r]=this.getEndpoints(e),{controlPoints:i,curvePosition:a,curveOffset:o}=e,s=this.getControlPoints(n,r,GXe(a),WXe(o),i);return kue(n,r,s)}getControlPoints(e,n,r,i,a){return(a==null?void 0:a.length)===2?a:[cD(e,n,r[0],i[0]),cD(e,n,r[1],i[1])]}}gd.defaultStyleProps={curvePosition:.5,curveOffset:20};class Ew extends gd{constructor(e){super(Ii({style:Ew.defaultStyleProps},e))}getControlPoints(e,n,r,i){const a=n[0]-e[0];return[[e[0]+a*r[0]+i[0],e[1]],[n[0]-a*r[1]+i[1],n[1]]]}}Ew.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};class Ow extends gd{constructor(e){super(Ii({style:Ow.defaultStyleProps},e))}get ref(){return this.context.model.getRootsData()[0]}getEndpoints(e){if(this.sourceNode.id===this.ref.id)return super.getEndpoints(e);const n=Yr(this.ref),r=this.sourceNode.getIntersectPoint(n,!0),i=this.targetNode.getIntersectPoint(n);return[r,i]}toRadialCoordinate(e){const n=Yr(this.ref),r=Jn(e,n),i=iue(In(e,n));return[r,i]}getControlPoints(e,n,r,i){const[a,o]=this.toRadialCoordinate(e),[s]=this.toRadialCoordinate(n),l=s-a;return[[e[0]+(l*r[0]+i[0])*Math.cos(o),e[1]+(l*r[0]+i[0])*Math.sin(o)],[n[0]-(l*r[1]-i[0])*Math.cos(o),n[1]-(l*r[1]-i[0])*Math.sin(o)]]}}Ow.defaultStyleProps={curvePosition:.5,curveOffset:20};class kw extends gd{constructor(e){super(Ii({style:kw.defaultStyleProps},e))}getControlPoints(e,n,r,i){const a=n[1]-e[1];return[[e[0],e[1]+a*r[0]+i[0]],[n[0],n[1]-a*r[1]+i[1]]]}}kw.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};let Mue=class Cue extends $c{constructor(e){super(Ii({style:Cue.defaultStyleProps},e))}getKeyPath(e){const[n,r]=this.getEndpoints(e);return[["M",n[0],n[1]],["L",r[0],r[1]]]}};Mue.defaultStyleProps={};const sZe={enableObstacleAvoidance:!1,offset:10,maxAllowedDirectionChange:Math.PI/2,maximumLoops:3e3,gridSize:5,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{right:{stepX:1,stepY:0},left:{stepX:-1,stepY:0},bottom:{stepX:0,stepY:1},top:{stepX:0,stepY:-1}},penalties:{0:0,90:0},distFunc:Rx},zl=t=>`${Math.round(t[0])}|||${Math.round(t[1])}`;function vf(t,e){const n=r=>Math.round(r/e);return je(t)?n(t):t.map(n)}function lZe(t,e){const n=Math.abs(t-e);return n>Math.PI?2*Math.PI-n:n}function ZB(t,e){const n=e[0]-t[0],r=e[1]-t[1];return!n&&!r?0:Math.atan2(r,n)}function Pue(t,e,n,r){const i=ZB(t,e),a=n[zl(t)],s=ZB(a||r,t);return lZe(s,i)}const uZe=(t,e)=>{const{offset:n,gridSize:r}=e,i={};return t.forEach(a=>{if(!a||a.destroyed||!a.isVisible())return;const o=Bc(a.getRenderBounds(),n);for(let s=vf(o.min[0],r);s<=vf(o.max[0],r);s+=1)for(let l=vf(o.min[1],r);l<=vf(o.max[1],r);l+=1)i[`${s}|||${l}`]=!0}),i};function KB(t,e,n){return Math.min(...e.map(r=>n(t,r)))}function cZe(t,e,n){let r=t[0],i=n(t[0],e);for(let a=0;a<t.length;a++){const o=t[a],s=n(o,e);s<i&&(r=o,i=s)}return r}const JB=(t,e,n,r)=>{if(!e)return[t];const{directionMap:i,offset:a}=r,o=Bc(e.getRenderBounds(),a),s=Object.keys(i).reduce((l,u)=>{if(n.includes(u)){const c=i[u],[f,d]=jc(o),h=[t[0]+c.stepX*f,t[1]+c.stepY*d],p=zUe(o);for(let g=0;g<p.length;g++){const v=o4([t,h],p[g]);v&&Jle(v,o)&&l.push(v)}}return l},[]);return ks(t,o)||s.push(t),s.map(l=>vf(l,r.gridSize))},fZe=(t,e,n,r,i,a,o)=>{const s=[];let l=[a[0]===r[0]?r[0]:t[0]*o,a[1]===r[1]?r[1]:t[1]*o];s.unshift(l);let u=t,c=e[zl(u)];for(;c;){const h=c,p=u;Pue(h,p,e,n)&&(l=[h[0]===p[0]?l[0]:h[0]*o,h[1]===p[1]?l[1]:h[1]*o],s.unshift(l)),c=e[zl(h)],u=h}const f=i.map(h=>[h[0]*o,h[1]*o]),d=cZe(f,l,Rx);return s.unshift(d),s};function dZe(t,e,n,r){const i=Qf(t.getCenter()),a=Qf(e.getCenter()),o=Object.assign(sZe,r),{gridSize:s}=o,l=o.enableObstacleAvoidance?n:[t,e],u=uZe(l,o),c=vf(i,s),f=vf(a,s),d=JB(i,t,o.startDirections,o),h=JB(a,e,o.endDirections,o);d.forEach(S=>delete u[zl(S)]),h.forEach(S=>delete u[zl(S)]);const p={},g={},v={},m={},y={},b=new hZe;for(let S=0;S<d.length;S++){const O=d[S],A=zl(O);p[A]=O,m[A]=0,y[A]=KB(O,h,o.distFunc),b.add({id:A,value:y[A]})}const x=h.map(S=>zl(S));let w=o.maximumLoops,_,E=1/0;for(const[S,O]of Object.entries(p))y[S]<=E&&(E=y[S],_=O);for(;Object.keys(p).length>0&&w>0;){const S=b.minId(!1);if(S)_=p[S];else break;const O=zl(_);if(x.includes(O))return fZe(_,v,c,a,d,f,s);delete p[O],b.remove(O),g[O]=!0;for(const A of Object.values(o.directionMap)){const T=kt(_,[A.stepX,A.stepY]),I=zl(T);if(g[I])continue;const D=Pue(_,T,v,c);if(D>o.maxAllowedDirectionChange||u[I])continue;p[I]||(p[I]=T);const R=o.penalties[D],F=o.distFunc(_,T)+(isNaN(R)?s:R),z=m[O]+F,N=m[I];N&&z>=N||(v[I]=_,m[I]=z,y[I]=z+KB(T,h,o.distFunc),b.add({id:I,value:y[I]}))}w-=1}return[]}class hZe{constructor(){this.arr=[],this.map={},this.arr=[],this.map={}}_innerAdd(e,n){let r=0,i=n-1;for(;i-r>1;){const a=Math.floor((r+i)/2);if(this.arr[a].value>e.value)i=a;else if(this.arr[a].value<e.value)r=a;else{this.arr.splice(a,0,e),this.map[e.id]=!0;return}}this.arr.splice(i,0,e),this.map[e.id]=!0}add(e){delete this.map[e.id];const n=this.arr.length;if(!n||this.arr[n-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,n)}remove(e){this.map[e]&&delete this.map[e]}_clearAndGetMinId(){let e;for(let n=this.arr.length-1;n>=0;n--)this.map[this.arr[n].id]?e=this.arr[n].id:this.arr.splice(n,1);return e}_findFirstId(){for(;this.arr.length;){const e=this.arr.shift();if(this.map[e.id])return e.id}}minId(e){return e?this._clearAndGetMinId():this._findFirstId()}}class Aw extends $c{constructor(e){super(Ii({style:Aw.defaultStyleProps},e))}getControlPoints(e){const{router:n}=e,{sourceNode:r,targetNode:i}=this,[a,o]=this.getEndpoints(e,!1);let s=[];if(!n)s=e.controlPoints;else if(n.type==="shortest-path"){const l=this.context.element.getNodes();s=dZe(r,i,l,n),s.length||(s=GB(a,o,r,i,e.controlPoints,{padding:n.offset}))}else n.type==="orth"&&(s=GB(a,o,r,i,e.controlPoints,n));return s}getPoints(e){const n=this.getControlPoints(e),[r,i]=this.getEndpoints(e,!0,n);return[r,...n,i]}getKeyPath(e){const n=this.getPoints(e);return f4(n,e.radius)}getLoopPath(e){const{sourcePort:n,targetPort:r,radius:i}=e,a=this.sourceNode,o=Ju(a),s=Math.max(Al(o),Tl(o))/4,{placement:l,clockwise:u,dist:c=s}=ri(this.getGraphicStyle(e),"loop");return KXe(a,i,l,u,c,n,r)}}Aw.defaultStyleProps={radius:0,controlPoints:[],router:!1};class Tw extends $c{constructor(e){super(Ii({style:Tw.defaultStyleProps},e))}getKeyPath(e){const{curvePosition:n,curveOffset:r}=e,[i,a]=this.getEndpoints(e),o=e.controlPoint||cD(i,a,n,r);return HXe(i,a,o)}}Tw.defaultStyleProps={curvePosition:.5,curveOffset:30};var pZe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function um(t){return t instanceof go&&t.type==="node"}function Due(t){return t instanceof $c}function d4(t){return t instanceof Cp}function gZe(t){return um(t)||Due(t)||d4(t)}function vZe(t,e){return!t||!e?!1:t===e}const mZe={top:[.5,0],right:[1,.5],bottom:[.5,1],left:[0,.5],"left-top":[0,0],"top-left":[0,0],"left-bottom":[0,1],"bottom-left":[0,1],"right-top":[1,0],"top-right":[1,0],"right-bottom":[1,1],"bottom-right":[1,1],default:[.5,.5]};function h4(t,e,n=mZe,r=!0){const i=[.5,.5],a=an(e)?qt(n,e.toLocaleLowerCase(),i):e;if(!r&&an(e))return a;const[o,s]=a||i;return[t.min[0]+Al(t)*o,t.min[1]+Tl(t)*s]}function p4(t){if(!t)return{};const e=t.getPorts();return(t.attributes.ports||[]).forEach((r,i)=>{var a;const{key:o,placement:s}=r;Iue(r)&&(e[a=o||i]||(e[a]=Gl(t.getShape("key").getBounds(),s)))}),e}function Iue(t){const{r:e}=t;return!e||Number(e)===0}function Ec(t){return cp(t)?t:t.getPosition()}function yZe(t,e,n,r){const i=QB(t,e,n,r),a=QB(e,t,r,n);return[i,a]}function QB(t,e,n,r){const i=p4(t);if(n)return i[n];const a=Object.values(i);if(a.length===0)return;const o=a.map(u=>Ec(u)),s=bZe(e,r),[l]=uXe(o,s);return a.find(u=>Ec(u)===l)}function bZe(t,e){const n=p4(t);if(e)return[Ec(n[e])];const r=Object.values(n);return r.length>0?r.map(i=>Ec(i)):[t.getCenter()]}function e$(t,e){return d4(t)||um(t)?dD(t,e):fv(t,e)}function fv(t,e){if(!t||!e)return[0,0,0];if(cp(t))return t;if(t.attributes.linkToCenter)return t.getPosition();const n=cp(e)?e:um(e)?e.getCenter():e.getPosition();return mw(n,t.getBounds())}function dD(t,e){if(!t||!e)return[0,0,0];const n=cp(e)?e:um(e)?e.getCenter():e.getPosition();return t.getIntersectPoint(n)||t.getCenter()}function t$(t,e="bottom",n=0,r=0,i=!1){const a=e.split("-"),[o,s]=Gl(t,e),[l,u]=i?["bottom","top"]:["top","bottom"],c=a.includes("top")?u:a.includes("bottom")?l:"middle",f=a.includes("left")?"right":a.includes("right")?"left":"center";return{transform:[["translate",o+n,s+r]],textBaseline:c,textAlign:f}}function xZe(t,e){return[[0,-t],[e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)],[t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],[e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],[0,e],[-t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],[-e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[-t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],[-e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)]]}function wZe(t,e){const n={};return n.top=[0,-t],n.left=[-t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],n["left-bottom"]=[-t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],n.bottom=[0,e],n["right-bottom"]=[t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],n.right=n.default=[t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],n}function _Ze(t,e,n){const r=e/2,i=t/2,a={up:[[-i,r],[i,r],[0,-r]],left:[[-i,0],[i,r],[i,-r]],right:[[-i,r],[-i,-r],[i,0]],down:[[-i,-r],[i,-r],[0,r]]};return a[n]||a.up}function SZe(t,e,n){const r=e/2,i=t/2,a={};return n==="down"?(a.bottom=a.default=[0,r],a.right=[i,-r],a.left=[-i,-r]):n==="left"?(a.top=[i,-r],a.bottom=[i,r],a.left=a.default=[-i,0]):n==="right"?(a.top=[-i,-r],a.bottom=[-i,r],a.right=a.default=[i,0]):(a.left=[-i,r],a.top=a.default=[0,-r],a.right=[i,r]),a}function EZe(t,e){return[[0,-e/2],[t/2,0],[0,e/2],[-t/2,0]]}function OZe(t){return qt(t,["style","visibility"])!=="hidden"}function kZe(t,e){const{zIndex:n,transform:r,transformOrigin:i,visibility:a,cursor:o,clipPath:s,component:l}=e,u=pZe(e,["zIndex","transform","transformOrigin","visibility","cursor","clipPath","component"]);Object.assign(t.attributes,u),r&&t.setAttribute("transform",r),je(n)&&t.setAttribute("zIndex",n),i&&t.setAttribute("transformOrigin",i),a&&t.setAttribute("visibility",a),o&&t.setAttribute("cursor",o),s&&t.setAttribute("clipPath",s),l&&t.setAttribute("component",l)}function hD(t,e){"update"in t?t.update(e):t.attr(e)}function AZe(t){return[[0,t],[t*Math.sqrt(3)/2,t/2],[t*Math.sqrt(3)/2,-t/2],[0,-t],[-t*Math.sqrt(3)/2,-t/2],[-t*Math.sqrt(3)/2,t/2]]}function TZe(t){C0(t,"__to_be_destroyed__",!0)}function Mw(t){return qt(t,"__to_be_destroyed__",!1)}var MZe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class Cw extends vo{constructor(e,n){super(e,Object.assign({},Cw.defaultOptions,n)),this.onCollapseExpand=r=>MZe(this,void 0,void 0,function*(){if(!this.validate(r))return;const{target:i}=r;if(!gZe(i))return;const a=i.id,{model:o,graph:s}=this.context,l=o.getElementDataById(a);if(!l)return!1;const{onCollapse:u,onExpand:c,animation:f,align:d}=this.options;Ia(l)?(yield s.expandElement(a,{animation:f,align:d}),c==null||c(a)):(yield s.collapseElement(a,{animation:f,align:d}),u==null||u(a))}),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{graph:e}=this.context,{trigger:n}=this.options;e.on(`node:${n}`,this.onCollapseExpand),e.on(`combo:${n}`,this.onCollapseExpand)}unbindEvents(){const{graph:e}=this.context,{trigger:n}=this.options;e.off(`node:${n}`,this.onCollapseExpand),e.off(`combo:${n}`,this.onCollapseExpand)}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return Ue(n)?n(e):!!n}destroy(){this.unbindEvents(),super.destroy()}}Cw.defaultOptions={enable:!0,animation:!0,trigger:be.DBLCLICK,align:!0};var t1=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};const CZe="g6-create-edge-assist-edge-id",n1="g6-create-edge-assist-node-id";class Pw extends vo{constructor(e,n){super(e,Object.assign({},Pw.defaultOptions,n)),this.drop=r=>t1(this,void 0,void 0,function*(){const{targetType:i}=r;["combo","node"].includes(i)&&this.source?yield this.handleCreateEdge(r):yield this.cancelEdge()}),this.handleCreateEdge=r=>t1(this,void 0,void 0,function*(){var i,a,o;if(!this.validate(r))return;const{graph:s,canvas:l,batch:u,element:c}=this.context,{style:f}=this.options;if(this.source){this.createEdge(r),yield this.cancelEdge();return}u.startBatch(),l.setCursor("crosshair"),this.source=this.getSelectedNodeIDs([r.target.id])[0];const d=s.getElementData(this.source);s.addNodeData([{id:n1,style:{visibility:"hidden",ports:[{key:"port-1",placement:[.5,.5]}],x:(i=d.style)===null||i===void 0?void 0:i.x,y:(a=d.style)===null||a===void 0?void 0:a.y}}]),s.addEdgeData([{id:CZe,source:this.source,target:n1,style:Object.assign({pointerEvents:"none"},f)}]),yield(o=c.draw({animation:!1}))===null||o===void 0?void 0:o.finished}),this.updateAssistEdge=r=>t1(this,void 0,void 0,function*(){var i;if(!this.source)return;const{model:a,element:o}=this.context;a.translateNodeTo(n1,[r.canvas.x,r.canvas.y]),yield(i=o.draw({animation:!1,silence:!0}))===null||i===void 0?void 0:i.finished}),this.createEdge=r=>{var i,a;const{graph:o}=this.context,{style:s,onFinish:l,onCreate:u}=this.options;if(((i=r.target)===null||i===void 0?void 0:i.id)===void 0||this.source===void 0)return;const f=(a=this.getSelectedNodeIDs([r.target.id]))===null||a===void 0?void 0:a[0],d=`${this.source}-${f}-${QOe()}`,h=u({id:d,source:this.source,target:f,style:s});h&&(o.addEdgeData([h]),l(h))},this.cancelEdge=()=>t1(this,void 0,void 0,function*(){var r;if(!this.source)return;const{graph:i,element:a,batch:o}=this.context;i.removeNodeData([n1]),this.source=void 0,yield(r=a.draw({animation:!1}))===null||r===void 0?void 0:r.finished,o.endBatch()}),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){const{graph:e}=this.context,{trigger:n}=this.options;this.unbindEvents(),n==="click"?(e.on(Ao.CLICK,this.handleCreateEdge),e.on(gf.CLICK,this.handleCreateEdge),e.on(fu.CLICK,this.cancelEdge),e.on(Ix.CLICK,this.cancelEdge)):(e.on(Ao.DRAG_START,this.handleCreateEdge),e.on(gf.DRAG_START,this.handleCreateEdge),e.on(be.POINTER_UP,this.drop)),e.on(be.POINTER_MOVE,this.updateAssistEdge)}getSelectedNodeIDs(e){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(n=>n.id).concat(e)))}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return Ue(n)?n(e):!!n}unbindEvents(){const{graph:e}=this.context;e.off(Ao.CLICK,this.handleCreateEdge),e.off(gf.CLICK,this.handleCreateEdge),e.off(fu.CLICK,this.cancelEdge),e.off(Ix.CLICK,this.cancelEdge),e.off(Ao.DRAG_START,this.handleCreateEdge),e.off(gf.DRAG_START,this.handleCreateEdge),e.off(be.POINTER_UP,this.drop),e.off(be.POINTER_MOVE,this.updateAssistEdge)}destroy(){this.unbindEvents(),super.destroy()}}Pw.defaultOptions={animation:!0,enable:!0,style:{},trigger:"drag",onCreate:t=>t,onFinish:()=>{}};var n$=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class Dw extends vo{constructor(e,n){super(e,Object.assign({},Dw.defaultOptions,n)),this.isDragging=!1,this.onDragStart=r=>{this.validate(r)&&(this.isDragging=!0,this.context.canvas.setCursor("grabbing"))},this.onDrag=r=>{var i,a,o,s;if(!this.isDragging||Hr.isPinching)return;const l=(a=(i=r.movement)===null||i===void 0?void 0:i.x)!==null&&a!==void 0?a:r.dx,u=(s=(o=r.movement)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:r.dy;l|u&&this.translate([l,u],!1)},this.onDragEnd=()=>{var r,i;this.isDragging=!1,this.context.canvas.setCursor(this.defaultCursor),(i=(r=this.options).onFinish)===null||i===void 0||i.call(r)},this.invokeOnFinish=gp(()=>{var r,i;(i=(r=this.options).onFinish)===null||i===void 0||i.call(r)},300),this.shortcut=new Mp(e.graph),this.bindEvents(),this.defaultCursor=this.context.canvas.getConfig().cursor||"default"}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{trigger:e}=this.options;if(jr(e)){const{up:n=[],down:r=[],left:i=[],right:a=[]}=e;this.shortcut.bind(n,o=>this.onTranslate([0,1],o)),this.shortcut.bind(r,o=>this.onTranslate([0,-1],o)),this.shortcut.bind(i,o=>this.onTranslate([1,0],o)),this.shortcut.bind(a,o=>this.onTranslate([-1,0],o))}else{const{graph:n}=this.context;n.on(be.DRAG_START,this.onDragStart),n.on(be.DRAG,this.onDrag),n.on(be.DRAG_END,this.onDragEnd)}}onTranslate(e,n){return n$(this,void 0,void 0,function*(){if(!this.validate(n))return;const{sensitivity:r}=this.options,i=r*-1;yield this.translate(gs(e,i),this.options.animation),this.invokeOnFinish()})}translate(e,n){return n$(this,void 0,void 0,function*(){e=this.clampByDirection(e),e=this.clampByRange(e),yield this.context.graph.translateBy(e,n)})}clampByDirection([e,n]){const{direction:r}=this.options;return r==="x"?n=0:r==="y"&&(e=0),[e,n]}clampByRange([e,n]){const{viewport:r,canvas:i}=this.context,[a,o]=i.getSize(),[s,l,u,c]=kl(this.options.range),f=[o*s,a*l,o*u,a*c],d=Bc(n4(r.getCanvasCenter()),f),h=In(r.getViewportCenter(),[e,n,0]);if(!ks(h,d)){const{min:[p,g],max:[v,m]}=d;(h[0]<p&&e>0||h[0]>v&&e<0)&&(e=0),(h[1]<g&&n>0||h[1]>m&&n<0)&&(n=0)}return[e,n]}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return typeof n=="function"?n(e):!!n}unbindEvents(){this.shortcut.unbindAll();const{graph:e}=this.context;e.off(be.DRAG_START,this.onDragStart),e.off(be.DRAG,this.onDrag),e.off(be.DRAG_END,this.onDragEnd)}destroy(){this.shortcut.destroy(),this.unbindEvents(),this.context.canvas.setCursor(this.defaultCursor),super.destroy()}}Dw.defaultOptions={enable:t=>"targetType"in t?t.targetType==="canvas":!0,sensitivity:10,direction:"both",range:1/0};var r$=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class cm extends vo{constructor(e,n){super(e,Object.assign({},cm.defaultOptions,n)),this.enable=!1,this.enableElements=["node","combo"],this.target=[],this.shadowOrigin=[0,0],this.hiddenEdges=[],this.isDragging=!1,this.onDrop=r=>r$(this,void 0,void 0,function*(){var i;if(this.options.dropEffect!=="link")return;const{model:a,element:o}=this.context,s=r.target.id;this.target.forEach(l=>{const u=a.getParentData(l,Fn);u&&ce(u)===s&&a.refreshComboData(s),a.setParent(l,s,Fn)}),yield(i=o==null?void 0:o.draw({animation:!0}))===null||i===void 0?void 0:i.finished}),this.setCursor=r=>{if(this.isDragging)return;const{type:i}=r,{canvas:a}=this.context,{cursor:o}=this.options;i===be.POINTER_ENTER?a.setCursor((o==null?void 0:o.grab)||"grab"):a.setCursor((o==null?void 0:o.default)||"default")},this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onDrop=this.onDrop.bind(this),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{graph:e,canvas:n}=this.context,r=n.getLayer().getContextService().$canvas;r&&(r.addEventListener("blur",this.onDragEnd),r.addEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(i=>{e.on(`${i}:${be.DRAG_START}`,this.onDragStart),e.on(`${i}:${be.DRAG}`,this.onDrag),e.on(`${i}:${be.DRAG_END}`,this.onDragEnd),e.on(`${i}:${be.POINTER_ENTER}`,this.setCursor),e.on(`${i}:${be.POINTER_LEAVE}`,this.setCursor)}),["link"].includes(this.options.dropEffect)&&(e.on(gf.DROP,this.onDrop),e.on(fu.DROP,this.onDrop))}getSelectedNodeIDs(e){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(n=>n.id).concat(e)))}getDelta(e){const n=this.context.graph.getZoom();return As([e.dx,e.dy],n)}onDragStart(e){var n;if(this.enable=this.validate(e),!this.enable)return;const{batch:r,canvas:i,graph:a}=this.context;i.setCursor(((n=this.options.cursor)===null||n===void 0?void 0:n.grabbing)||"grabbing"),this.isDragging=!0,r.startBatch();const o=e.target.id;a.getElementState(o).includes(this.options.state)?this.target=this.getSelectedNodeIDs([o]):this.target=[o],this.hideEdge(),this.context.graph.frontElement(this.target),this.options.shadow&&this.createShadow(this.target)}onDrag(e){if(!this.enable)return;const n=this.getDelta(e);this.options.shadow?this.moveShadow(n):this.moveElement(this.target,n)}onDragEnd(){var e,n,r;if(!this.enable)return;if(this.enable=!1,this.options.shadow){if(!this.shadow)return;this.shadow.style.visibility="hidden";const{x:o=0,y:s=0}=this.shadow.attributes,[l,u]=In([+o,+s],this.shadowOrigin);this.moveElement(this.target,[l,u])}this.showEdges(),(n=(e=this.options).onFinish)===null||n===void 0||n.call(e,this.target);const{batch:i,canvas:a}=this.context;i.endBatch(),a.setCursor(((r=this.options.cursor)===null||r===void 0?void 0:r.grab)||"grab"),this.isDragging=!1,this.target=[]}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return Ue(n)?n(e):!!n}moveElement(e,n){return r$(this,void 0,void 0,function*(){const{graph:r,model:i}=this.context,{dropEffect:a}=this.options;a==="move"&&e.forEach(o=>i.refreshComboData(o)),r.translateElementBy(Object.fromEntries(e.map(o=>[o,n])),!1)})}moveShadow(e){if(!this.shadow)return;const{x:n=0,y:r=0}=this.shadow.attributes,[i,a]=e;this.shadow.attr({x:+n+i,y:+r+a})}createShadow(e){const n=ri(this.options,"shadow"),r=im(e.map(u=>this.context.element.getElement(u).getBounds())),[i,a]=r.min;this.shadowOrigin=[i,a];const[o,s]=jc(r),l={width:o,height:s,x:i,y:a};this.shadow?this.shadow.attr(Object.assign(Object.assign(Object.assign({},n),l),{visibility:"visible"})):(this.shadow=new Vr({style:Object.assign(Object.assign(Object.assign({$layer:"transient"},n),l),{pointerEvents:"none"})}),this.context.canvas.appendChild(this.shadow))}showEdges(){this.options.shadow||this.hiddenEdges.length===0||(this.context.graph.showElement(this.hiddenEdges),this.hiddenEdges=[])}hideEdge(){const{hideEdge:e,shadow:n}=this.options;if(e==="none"||n)return;const{graph:r}=this.context;e==="all"?this.hiddenEdges=r.getEdgeData().map(ce):this.hiddenEdges=Array.from(new Set(this.target.map(i=>r.getRelatedEdgesData(i,e).map(ce)).flat())),r.hideElement(this.hiddenEdges)}unbindEvents(){const{graph:e,canvas:n}=this.context,r=n.getLayer().getContextService().$canvas;r&&(r.removeEventListener("blur",this.onDragEnd),r.removeEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(i=>{e.off(`${i}:${be.DRAG_START}`,this.onDragStart),e.off(`${i}:${be.DRAG}`,this.onDrag),e.off(`${i}:${be.DRAG_END}`,this.onDragEnd),e.off(`${i}:${be.POINTER_ENTER}`,this.setCursor),e.off(`${i}:${be.POINTER_LEAVE}`,this.setCursor)}),e.off(`combo:${be.DROP}`,this.onDrop),e.off(`canvas:${be.DROP}`,this.onDrop)}destroy(){var e;this.unbindEvents(),(e=this.shadow)===null||e===void 0||e.destroy(),super.destroy()}}cm.defaultOptions={animation:!0,enable:t=>["node","combo"].includes(t.targetType),dropEffect:"move",state:"selected",hideEdge:"none",shadow:!1,shadowZIndex:100,shadowFill:"#F3F9FF",shadowFillOpacity:.5,shadowStroke:"#1890FF",shadowStrokeOpacity:.9,shadowLineDash:[5,5],cursor:{default:"default",grab:"grab",grabbing:"grabbing"}};function pD(t,e,n,r){for(;t.length;){const i=t.shift();if(n(i))return!0;e.add(i.id),r(i.id).forEach(o=>{e.has(o.id)||(e.add(o.id),t.push(o))})}return!1}function zx(t,e,n,r){if(n(t))return!0;e.add(t.id);for(const a of r(t.id))if(!e.has(a.id)&&zx(a,e,n,r))return!0;return!1}const i$=()=>!0;class PZe{constructor(e){yt(this,"graph");yt(this,"nodeFilter");yt(this,"edgeFilter");yt(this,"cacheEnabled");yt(this,"inEdgesMap",new Map);yt(this,"outEdgesMap",new Map);yt(this,"bothEdgesMap",new Map);yt(this,"allNodesMap",new Map);yt(this,"allEdgesMap",new Map);yt(this,"clearCache",()=>{this.inEdgesMap.clear(),this.outEdgesMap.clear(),this.bothEdgesMap.clear(),this.allNodesMap.clear(),this.allEdgesMap.clear()});yt(this,"refreshCache",()=>{this.clearCache(),this.updateCache(this.graph.getAllNodes().map(e=>e.id))});yt(this,"updateCache",e=>{const n=new Set;e.forEach(r=>{const i=this.bothEdgesMap.get(r);if(i&&i.forEach(a=>n.add(a.id)),!this.hasNode(r))this.inEdgesMap.delete(r),this.outEdgesMap.delete(r),this.bothEdgesMap.delete(r),this.allNodesMap.delete(r);else{const a=this.graph.getRelatedEdges(r,"in").filter(this.edgeFilter),o=this.graph.getRelatedEdges(r,"out").filter(this.edgeFilter),s=Array.from(new Set([...a,...o]));s.forEach(l=>n.add(l.id)),this.inEdgesMap.set(r,a),this.outEdgesMap.set(r,o),this.bothEdgesMap.set(r,s),this.allNodesMap.set(r,this.graph.getNode(r))}}),n.forEach(r=>{this.hasEdge(r)?this.allEdgesMap.set(r,this.graph.getEdge(r)):this.allEdgesMap.delete(r)})});yt(this,"handleGraphChanged",e=>{const n=new Set;e.changes.forEach(r=>{switch(r.type){case"NodeAdded":n.add(r.value.id);break;case"NodeDataUpdated":n.add(r.id);break;case"EdgeAdded":n.add(r.value.source),n.add(r.value.target);break;case"EdgeUpdated":(r.propertyName==="source"||r.propertyName==="target")&&(n.add(r.oldValue),n.add(r.newValue));break;case"EdgeDataUpdated":if(e.graph.hasEdge(r.id)){const i=e.graph.getEdge(r.id);n.add(i.source),n.add(i.target)}break;case"EdgeRemoved":n.add(r.value.source),n.add(r.value.target);break;case"NodeRemoved":n.add(r.value.id);break}}),this.updateCache(n)});this.graph=e.graph;const n=e.nodeFilter||i$,r=e.edgeFilter||i$;this.nodeFilter=n,this.edgeFilter=i=>{const{source:a,target:o}=this.graph.getEdgeDetail(i.id);return!n(a)||!n(o)?!1:r(i,a,o)},e.cache==="auto"?(this.cacheEnabled=!0,this.startAutoCache()):e.cache==="manual"?this.cacheEnabled=!0:this.cacheEnabled=!1}startAutoCache(){this.refreshCache(),this.graph.on("changed",this.handleGraphChanged)}stopAutoCache(){this.graph.off("changed",this.handleGraphChanged)}checkNodeExistence(e){this.getNode(e)}hasNode(e){if(!this.graph.hasNode(e))return!1;const n=this.graph.getNode(e);return this.nodeFilter(n)}areNeighbors(e,n){return this.checkNodeExistence(e),this.getNeighbors(n).some(r=>r.id===e)}getNode(e){const n=this.graph.getNode(e);if(!this.nodeFilter(n))throw new Error("Node not found for id: "+e);return n}getRelatedEdges(e,n){return this.checkNodeExistence(e),this.cacheEnabled?n==="in"?this.inEdgesMap.get(e):n==="out"?this.outEdgesMap.get(e):this.bothEdgesMap.get(e):this.graph.getRelatedEdges(e,n).filter(this.edgeFilter)}getDegree(e,n){return this.getRelatedEdges(e,n).length}getSuccessors(e){const r=this.getRelatedEdges(e,"out").map(i=>this.getNode(i.target));return Array.from(new Set(r))}getPredecessors(e){const r=this.getRelatedEdges(e,"in").map(i=>this.getNode(i.source));return Array.from(new Set(r))}getNeighbors(e){const n=this.getPredecessors(e),r=this.getSuccessors(e);return Array.from(new Set([...n,...r]))}hasEdge(e){if(!this.graph.hasEdge(e))return!1;const n=this.graph.getEdge(e);return this.edgeFilter(n)}getEdge(e){const n=this.graph.getEdge(e);if(!this.edgeFilter(n))throw new Error("Edge not found for id: "+e);return n}getEdgeDetail(e){const n=this.getEdge(e);return{edge:n,source:this.getNode(n.source),target:this.getNode(n.target)}}hasTreeStructure(e){return this.graph.hasTreeStructure(e)}getRoots(e){return this.graph.getRoots(e).filter(this.nodeFilter)}getChildren(e,n){return this.checkNodeExistence(e),this.graph.getChildren(e,n).filter(this.nodeFilter)}getParent(e,n){this.checkNodeExistence(e);const r=this.graph.getParent(e,n);return!r||!this.nodeFilter(r)?null:r}getAllNodes(){return this.cacheEnabled?Array.from(this.allNodesMap.values()):this.graph.getAllNodes().filter(this.nodeFilter)}getAllEdges(){return this.cacheEnabled?Array.from(this.allEdgesMap.values()):this.graph.getAllEdges().filter(this.edgeFilter)}bfs(e,n,r="out"){const i={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];pD([this.getNode(e)],new Set,n,i)}dfs(e,n,r="out"){const i={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];zx(this.getNode(e),new Set,n,i)}}let xi=class Lue extends kp{constructor(n){super();yt(this,"nodeMap",new Map);yt(this,"edgeMap",new Map);yt(this,"inEdgesMap",new Map);yt(this,"outEdgesMap",new Map);yt(this,"bothEdgesMap",new Map);yt(this,"treeIndices",new Map);yt(this,"changes",[]);yt(this,"batchCount",0);yt(this,"onChanged",()=>{});yt(this,"batch",n=>{this.batchCount+=1,n(),this.batchCount-=1,this.batchCount||this.commit()});n&&(n.nodes&&this.addNodes(n.nodes),n.edges&&this.addEdges(n.edges),n.tree&&this.addTree(n.tree),n.onChanged&&(this.onChanged=n.onChanged))}commit(){const n=this.changes;this.changes=[];const r={graph:this,changes:n};this.emit("changed",r),this.onChanged(r)}reduceChanges(n){let r=[];return n.forEach(i=>{switch(i.type){case"NodeRemoved":{let a=!1;r=r.filter(o=>{if(o.type==="NodeAdded"){const s=o.value.id===i.value.id;return s&&(a=!0),!s}else{if(o.type==="NodeDataUpdated")return o.id!==i.value.id;if(o.type==="TreeStructureChanged")return o.nodeId!==i.value.id}return!0}),a||r.push(i);break}case"EdgeRemoved":{let a=!1;r=r.filter(o=>{if(o.type==="EdgeAdded"){const s=o.value.id===i.value.id;return s&&(a=!0),!s}else if(o.type==="EdgeDataUpdated"||o.type==="EdgeUpdated")return o.id!==i.value.id;return!0}),a||r.push(i);break}case"NodeDataUpdated":case"EdgeDataUpdated":case"EdgeUpdated":{const a=r.findIndex(s=>s.type===i.type&&s.id===i.id&&(i.propertyName===void 0||s.propertyName===i.propertyName)),o=r[a];o?i.propertyName!==void 0?o.newValue=i.newValue:(r.splice(a,1),r.push(i)):r.push(i);break}case"TreeStructureDetached":{r=r.filter(a=>a.type==="TreeStructureAttached"||a.type==="TreeStructureChanged"?a.treeKey!==i.treeKey:!0),r.push(i);break}case"TreeStructureChanged":{const a=r.find(o=>o.type==="TreeStructureChanged"&&o.treeKey===i.treeKey&&o.nodeId===i.nodeId);a?a.newParentId=i.newParentId:r.push(i);break}default:r.push(i);break}}),r}checkNodeExistence(n){this.getNode(n)}hasNode(n){return this.nodeMap.has(n)}areNeighbors(n,r){return this.getNeighbors(r).some(i=>i.id===n)}getNode(n){const r=this.nodeMap.get(n);if(!r)throw new Error("Node not found for id: "+n);return r}getRelatedEdges(n,r){if(this.checkNodeExistence(n),r==="in"){const i=this.inEdgesMap.get(n);return Array.from(i)}else if(r==="out"){const i=this.outEdgesMap.get(n);return Array.from(i)}else{const i=this.bothEdgesMap.get(n);return Array.from(i)}}getDegree(n,r){return this.getRelatedEdges(n,r).length}getSuccessors(n){const i=this.getRelatedEdges(n,"out").map(a=>this.getNode(a.target));return Array.from(new Set(i))}getPredecessors(n){const i=this.getRelatedEdges(n,"in").map(a=>this.getNode(a.source));return Array.from(new Set(i))}getNeighbors(n){const r=this.getPredecessors(n),i=this.getSuccessors(n);return Array.from(new Set([...r,...i]))}doAddNode(n){if(this.hasNode(n.id))throw new Error("Node already exists: "+n.id);this.nodeMap.set(n.id,n),this.inEdgesMap.set(n.id,new Set),this.outEdgesMap.set(n.id,new Set),this.bothEdgesMap.set(n.id,new Set),this.treeIndices.forEach(r=>{r.childrenMap.set(n.id,new Set)}),this.changes.push({type:"NodeAdded",value:n})}addNodes(n){this.batch(()=>{for(const r of n)this.doAddNode(r)})}addNode(n){this.addNodes([n])}doRemoveNode(n){const r=this.getNode(n),i=this.bothEdgesMap.get(n);i==null||i.forEach(a=>this.doRemoveEdge(a.id)),this.nodeMap.delete(n),this.treeIndices.forEach(a=>{var s,l;(s=a.childrenMap.get(n))==null||s.forEach(u=>{a.parentMap.delete(u.id)});const o=a.parentMap.get(n);o&&((l=a.childrenMap.get(o.id))==null||l.delete(r)),a.parentMap.delete(n),a.childrenMap.delete(n)}),this.bothEdgesMap.delete(n),this.inEdgesMap.delete(n),this.outEdgesMap.delete(n),this.changes.push({type:"NodeRemoved",value:r})}removeNodes(n){this.batch(()=>{n.forEach(r=>this.doRemoveNode(r))})}removeNode(n){this.removeNodes([n])}updateNodeDataProperty(n,r,i){const a=this.getNode(n);this.batch(()=>{const o=a.data[r],s=i;a.data[r]=s,this.changes.push({type:"NodeDataUpdated",id:n,propertyName:r,oldValue:o,newValue:s})})}mergeNodeData(n,r){this.batch(()=>{Object.entries(r).forEach(([i,a])=>{this.updateNodeDataProperty(n,i,a)})})}updateNodeData(...n){const r=n[0],i=this.getNode(r);if(typeof n[1]=="string"){this.updateNodeDataProperty(r,n[1],n[2]);return}let a;if(typeof n[1]=="function"){const o=n[1];a=o(i.data)}else typeof n[1]=="object"&&(a=n[1]);this.batch(()=>{const o=i.data,s=a;i.data=a,this.changes.push({type:"NodeDataUpdated",id:r,oldValue:o,newValue:s})})}checkEdgeExistence(n){if(!this.hasEdge(n))throw new Error("Edge not found for id: "+n)}hasEdge(n){return this.edgeMap.has(n)}getEdge(n){return this.checkEdgeExistence(n),this.edgeMap.get(n)}getEdgeDetail(n){const r=this.getEdge(n);return{edge:r,source:this.getNode(r.source),target:this.getNode(r.target)}}doAddEdge(n){if(this.hasEdge(n.id))throw new Error("Edge already exists: "+n.id);this.checkNodeExistence(n.source),this.checkNodeExistence(n.target),this.edgeMap.set(n.id,n);const r=this.inEdgesMap.get(n.target),i=this.outEdgesMap.get(n.source),a=this.bothEdgesMap.get(n.source),o=this.bothEdgesMap.get(n.target);r.add(n),i.add(n),a.add(n),o.add(n),this.changes.push({type:"EdgeAdded",value:n})}addEdges(n){this.batch(()=>{for(const r of n)this.doAddEdge(r)})}addEdge(n){this.addEdges([n])}doRemoveEdge(n){const r=this.getEdge(n),i=this.outEdgesMap.get(r.source),a=this.inEdgesMap.get(r.target),o=this.bothEdgesMap.get(r.source),s=this.bothEdgesMap.get(r.target);i.delete(r),a.delete(r),o.delete(r),s.delete(r),this.edgeMap.delete(n),this.changes.push({type:"EdgeRemoved",value:r})}removeEdges(n){this.batch(()=>{n.forEach(r=>this.doRemoveEdge(r))})}removeEdge(n){this.removeEdges([n])}updateEdgeSource(n,r){const i=this.getEdge(n);this.checkNodeExistence(r);const a=i.source,o=r;this.outEdgesMap.get(a).delete(i),this.bothEdgesMap.get(a).delete(i),this.outEdgesMap.get(o).add(i),this.bothEdgesMap.get(o).add(i),i.source=r,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:n,propertyName:"source",oldValue:a,newValue:o})})}updateEdgeTarget(n,r){const i=this.getEdge(n);this.checkNodeExistence(r);const a=i.target,o=r;this.inEdgesMap.get(a).delete(i),this.bothEdgesMap.get(a).delete(i),this.inEdgesMap.get(o).add(i),this.bothEdgesMap.get(o).add(i),i.target=r,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:n,propertyName:"target",oldValue:a,newValue:o})})}updateEdgeDataProperty(n,r,i){const a=this.getEdge(n);this.batch(()=>{const o=a.data[r],s=i;a.data[r]=s,this.changes.push({type:"EdgeDataUpdated",id:n,propertyName:r,oldValue:o,newValue:s})})}updateEdgeData(...n){const r=n[0],i=this.getEdge(r);if(typeof n[1]=="string"){this.updateEdgeDataProperty(r,n[1],n[2]);return}let a;if(typeof n[1]=="function"){const o=n[1];a=o(i.data)}else typeof n[1]=="object"&&(a=n[1]);this.batch(()=>{const o=i.data,s=a;i.data=a,this.changes.push({type:"EdgeDataUpdated",id:r,oldValue:o,newValue:s})})}mergeEdgeData(n,r){this.batch(()=>{Object.entries(r).forEach(([i,a])=>{this.updateEdgeDataProperty(n,i,a)})})}checkTreeExistence(n){if(!this.hasTreeStructure(n))throw new Error("Tree structure not found for treeKey: "+n)}hasTreeStructure(n){return this.treeIndices.has(n)}attachTreeStructure(n){this.treeIndices.has(n)||(this.treeIndices.set(n,{parentMap:new Map,childrenMap:new Map}),this.batch(()=>{this.changes.push({type:"TreeStructureAttached",treeKey:n})}))}detachTreeStructure(n){this.checkTreeExistence(n),this.treeIndices.delete(n),this.batch(()=>{this.changes.push({type:"TreeStructureDetached",treeKey:n})})}addTree(n,r){this.batch(()=>{this.attachTreeStructure(r);const i=[],a=Array.isArray(n)?n:[n];for(;a.length;){const o=a.shift();i.push(o),o.children&&a.push(...o.children)}this.addNodes(i),i.forEach(o=>{var s;(s=o.children)==null||s.forEach(l=>{this.setParent(l.id,o.id,r)})})})}getRoots(n){return this.checkTreeExistence(n),this.getAllNodes().filter(r=>!this.getParent(r.id,n))}getChildren(n,r){this.checkNodeExistence(n),this.checkTreeExistence(r);const a=this.treeIndices.get(r).childrenMap.get(n);return Array.from(a||[])}getParent(n,r){return this.checkNodeExistence(n),this.checkTreeExistence(r),this.treeIndices.get(r).parentMap.get(n)||null}getAncestors(n,r){const i=[];let a=this.getNode(n),o;for(;o=this.getParent(a.id,r);)i.push(o),a=o;return i}setParent(n,r,i){var c,f;this.checkTreeExistence(i);const a=this.treeIndices.get(i);if(!a)return;const o=this.getNode(n),s=a.parentMap.get(n);if((s==null?void 0:s.id)===r)return;if(r==null){s&&((c=a.childrenMap.get(s.id))==null||c.delete(o)),a.parentMap.delete(n);return}const l=this.getNode(r);a.parentMap.set(n,l),s&&((f=a.childrenMap.get(s.id))==null||f.delete(o));let u=a.childrenMap.get(l.id);u||(u=new Set,a.childrenMap.set(l.id,u)),u.add(o),this.batch(()=>{this.changes.push({type:"TreeStructureChanged",treeKey:i,nodeId:n,oldParentId:s==null?void 0:s.id,newParentId:l.id})})}dfsTree(n,r,i){const a=o=>this.getChildren(o,i);return zx(this.getNode(n),new Set,r,a)}bfsTree(n,r,i){const a=o=>this.getChildren(o,i);return pD([this.getNode(n)],new Set,r,a)}getAllNodes(){return Array.from(this.nodeMap.values())}getAllEdges(){return Array.from(this.edgeMap.values())}bfs(n,r,i="out"){const a={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[i];return pD([this.getNode(n)],new Set,r,a)}dfs(n,r,i="out"){const a={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[i];return zx(this.getNode(n),new Set,r,a)}clone(){const n=this.getAllNodes().map(a=>({...a,data:{...a.data}})),r=this.getAllEdges().map(a=>({...a,data:{...a.data}})),i=new Lue({nodes:n,edges:r});return this.treeIndices.forEach(({parentMap:a,childrenMap:o},s)=>{const l=new Map;a.forEach((c,f)=>{l.set(f,i.getNode(c.id))});const u=new Map;o.forEach((c,f)=>{u.set(f,new Set(Array.from(c).map(d=>i.getNode(d.id))))}),i.treeIndices.set(s,{parentMap:l,childrenMap:u})}),i}toJSON(){return JSON.stringify({nodes:this.getAllNodes(),edges:this.getAllEdges()})}createView(n){return new PZe({graph:this,...n})}};class Iw{constructor(e,n){this.context=e,this.options=n||{}}}var DZe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},IZe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function LZe(t){const{type:e}=t;return["compact-box","mindmap","dendrogram","indented"].includes(e)}function RZe(t){return!Array.isArray(t)&&(t==null?void 0:t.preLayout)}function B1(t){const{nodes:e,edges:n}=t,r={nodes:[],edges:[],combos:[]};return e.forEach(i=>{const a=i.data._isCombo?r.combos:r.nodes,{x:o,y:s,z:l=0}=i.data;a==null||a.push({id:i.id,style:{x:o,y:s,z:l}})}),n.forEach(i=>{const{id:a,source:o,target:s,data:{points:l=[],controlPoints:u=l.slice(1,l.length-1)}}=i;r.edges.push({id:a,source:o,target:s,style:Object.assign({},u!=null&&u.length?{controlPoints:u.map(Vi)}:{})})}),r}function NZe(t,e){class n extends Iw{constructor(i,a){if(super(i,a),this.instance=new t({}),this.id=this.instance.id,"stop"in this.instance&&"tick"in this.instance){const o=this.instance;this.stop=o.stop.bind(o),this.tick=s=>{const l=o.tick(s);return B1(l)}}}execute(i,a){return DZe(this,void 0,void 0,function*(){return B1(yield this.instance.execute(this.graphData2LayoutModel(i),this.transformOptions(me({},this.options,a))))})}transformOptions(i){const{onTick:a}=i;return a&&(i.onTick=o=>a(B1(o))),i}graphData2LayoutModel(i){const{nodes:a=[],edges:o=[],combos:s=[]}=i,l=a.map(h=>{const p=ce(h),{data:g,style:v,combo:m}=h,y=IZe(h,["data","style","combo"]),b={id:p,data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},g),{data:g}),m?{parentId:m}:{}),{style:v}),y)};return v!=null&&v.x&&Object.assign(b.data,{x:v.x}),v!=null&&v.y&&Object.assign(b.data,{y:v.y}),v!=null&&v.z&&Object.assign(b.data,{z:v.z}),b}),u=new Map(l.map(h=>[h.id,h])),c=o.filter(h=>{const{source:p,target:g}=h;return u.has(p)&&u.has(g)}).map(h=>{const{source:p,target:g,data:v,style:m}=h;return{id:ce(h),source:p,target:g,data:Object.assign({},v),style:Object.assign({},m)}}),f=s.map(h=>({id:ce(h),data:Object.assign({_isCombo:!0},h.data),style:Object.assign({},h.style)})),d=new xi({nodes:[...l,...f],edges:c});return e.model.model.hasTreeStructure(Fn)&&(d.attachTreeStructure(Fn),l.forEach(h=>{const p=e.model.model.getParent(h.id,Fn);p&&d.hasNode(p.id)&&d.setParent(h.id,p.id,Fn)})),d}}return n}function bO(t,e,...n){if(e in t)return t[e](...n);if("instance"in t){const r=t.instance;if(e in r)return r[e](...n)}return null}function a$(t,e){if(e in t)return t[e];if("instance"in t){const n=t.instance;if(e in n)return n[e]}return null}var FZe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class zZe extends cm{get forceLayoutInstance(){return this.context.layout.getLayoutInstance().find(e=>["d3-force","d3-force-3d"].includes(e==null?void 0:e.id))}validate(e){return this.context.layout?this.forceLayoutInstance?super.validate(e):(Ol.warn("DragElementForce only works with d3-force or d3-force-3d layout"),!1):!1}moveElement(e,n){return FZe(this,void 0,void 0,function*(){const r=this.forceLayoutInstance;this.context.graph.getNodeData(e).forEach((i,a)=>{const{x:o=0,y:s=0}=i.style||{};r&&bO(r,"setFixedPosition",e[a],[...kt([+o,+s],n)])})})}onDragStart(e){if(this.enable=this.validate(e),!this.enable)return;this.target=this.getSelectedNodeIDs([e.target.id]),this.hideEdge(),this.context.graph.frontElement(this.target);const n=this.forceLayoutInstance;n&&a$(n,"simulation").alphaTarget(.3).restart(),this.context.graph.getNodeData(this.target).forEach(r=>{const{x:i=0,y:a=0}=r.style||{};n&&bO(n,"setFixedPosition",ce(r),[+i,+a])})}onDrag(e){if(!this.enable)return;const n=this.getDelta(e);this.moveElement(this.target,n)}onDragEnd(){const e=this.forceLayoutInstance;e&&a$(e,"simulation").alphaTarget(0),!this.options.fixed&&this.context.graph.getNodeData(this.target).forEach(n=>{e&&bO(e,"setFixedPosition",ce(n),[null,null,null])})}}var o$=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class Lw extends vo{constructor(e,n){super(e,Object.assign({},Lw.defaultOptions,n)),this.isZoomEvent=r=>!!(r.data&&"scale"in r.data),this.relatedEdgeToUpdate=new Set,this.zoom=this.context.graph.getZoom(),this.fixElementSize=r=>o$(this,void 0,void 0,function*(){if(!this.validate(r))return;const{graph:i}=this.context,{state:a,nodeFilter:o,edgeFilter:s,comboFilter:l}=this.options,u=(a?i.getElementDataByState("node",a):i.getNodeData()).filter(o),c=(a?i.getElementDataByState("edge",a):i.getEdgeData()).filter(s),f=(a?i.getElementDataByState("combo",a):i.getComboData()).filter(l),d=this.isZoomEvent(r)?this.zoom=Math.max(.01,Math.min(r.data.scale,10)):this.zoom,h=[...u,...f];h.length>0&&h.forEach(p=>this.fixNodeLike(p,d)),this.updateRelatedEdges(),c.length>0&&c.forEach(p=>this.fixEdge(p,d))}),this.cachedStyles=new Map,this.getOriginalFieldValue=(r,i,a)=>{var o;const s=this.cachedStyles.get(r)||[],l=((o=s.find(u=>u.shape===i))===null||o===void 0?void 0:o.style)||{};return a in l||(l[a]=i.attributes[a],this.cachedStyles.set(r,[...s.filter(u=>u.shape!==i),{shape:i,style:l}])),l[a]},this.scaleEntireElement=(r,i,a)=>{i.setLocalScale(1/a);const o=this.cachedStyles.get(r)||[];o.push({shape:i}),this.cachedStyles.set(r,o)},this.scaleSpecificShapes=(r,i,a)=>{const o=AXe(r);(Array.isArray(a)?a:[a]).forEach(l=>{const{shape:u,fields:c}=l,f=typeof u=="function"?u(o):r.getShape(u);if(f){if(!c){this.scaleEntireElement(r.id,f,i);return}c.forEach(d=>{const h=this.getOriginalFieldValue(r.id,f,d);je(h)&&(f.style[d]=h/i)})}})},this.skipIfExceedViewport=r=>{const{viewport:i}=this.context;return!(i!=null&&i.isInViewport(r.getRenderBounds(),!1,30))},this.fixNodeLike=(r,i)=>{const a=ce(r),{element:o,model:s}=this.context,l=o.getElement(a);if(!l||this.skipIfExceedViewport(l))return;s.getRelatedEdgesData(a).forEach(f=>this.relatedEdgeToUpdate.add(ce(f)));const c=this.options[l.type];if(!c){this.scaleEntireElement(a,l,i);return}this.scaleSpecificShapes(l,i,c)},this.fixEdge=(r,i)=>{const a=ce(r),o=this.context.element.getElement(a);if(!o||this.skipIfExceedViewport(o))return;const s=this.options.edge;if(!s){o.style.transformOrigin="center",this.scaleEntireElement(a,o,i);return}this.scaleSpecificShapes(o,i,s)},this.updateRelatedEdges=()=>{const{element:r}=this.context;this.relatedEdgeToUpdate.size>0&&this.relatedEdgeToUpdate.forEach(i=>{const a=r.getElement(i);a==null||a.update({})}),this.relatedEdgeToUpdate.clear()},this.resetTransform=r=>o$(this,void 0,void 0,function*(){var i;!((i=r.data)===null||i===void 0)&&i.firstRender||(this.options.reset?this.restoreCachedStyles():this.fixElementSize({data:{scale:this.zoom}}))}),this.bindEvents()}restoreCachedStyles(){if(this.cachedStyles.size>0){this.cachedStyles.forEach(i=>{i.forEach(({shape:a,style:o})=>{if(Ys(o))a.setLocalScale(1);else{if(this.options.state)return;Object.entries(o).forEach(([s,l])=>a.style[s]=l)}})});const{graph:e,element:n}=this.context,r=Object.keys(Object.fromEntries(this.cachedStyles)).filter(i=>i&&e.getElementType(i)==="node");if(r.length>0){const i=new Set;r.forEach(a=>{e.getRelatedEdgesData(a).forEach(o=>i.add(ce(o)))}),i.forEach(a=>{const o=n==null?void 0:n.getElement(a);o==null||o.update({})})}}}bindEvents(){const{graph:e}=this.context;e.on(Le.AFTER_DRAW,this.resetTransform),e.on(Le.AFTER_TRANSFORM,this.fixElementSize)}unbindEvents(){const{graph:e}=this.context;e.off(Le.AFTER_DRAW,this.resetTransform),e.off(Le.AFTER_TRANSFORM,this.fixElementSize)}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return Ue(n)?n(e):!!n}destroy(){this.unbindEvents(),super.destroy()}}Lw.defaultOptions={enable:t=>t.data.scale<1,nodeFilter:()=>!0,edgeFilter:()=>!0,comboFilter:()=>!0,edge:[{shape:"key",fields:["lineWidth"]},{shape:"halo",fields:["lineWidth"]},{shape:"label"}],reset:!1};var jZe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class Rw extends vo{constructor(e,n){super(e,Object.assign({},Rw.defaultOptions,n)),this.focus=r=>jZe(this,void 0,void 0,function*(){if(!this.validate(r))return;const{graph:i}=this.context;yield i.focusElement(r.target.id,this.options.animation)}),this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),ed.forEach(n=>{e.on(`${n}:${be.CLICK}`,this.focus)})}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return Ue(n)?n(e):!!n}unbindEvents(){const{graph:e}=this.context;ed.forEach(n=>{e.off(`${n}:${be.CLICK}`,this.focus)})}destroy(){this.unbindEvents(),super.destroy()}}Rw.defaultOptions={animation:{easing:"ease-in",duration:500},enable:!0};class Nw extends vo{constructor(e,n){super(e,Object.assign({},Nw.defaultOptions,n)),this.isFrozen=!1,this.toggleFrozen=r=>{this.isFrozen=r.type==="dragstart"},this.hoverElement=r=>{if(!this.validate(r))return;const i=r.type===be.POINTER_ENTER;this.updateElementsState(r,i);const{onHover:a,onHoverEnd:o}=this.options;i?a==null||a(r):o==null||o(r)},this.updateElementsState=(r,i)=>{if(!this.options.state&&!this.options.inactiveState)return;const{graph:a}=this.context,{state:o,animation:s,inactiveState:l}=this.options,u=this.getActiveIds(r),c={};if(o&&Object.assign(c,this.getElementsState(u,o,i)),l){const f=tue(a.getData(),!0).filter(d=>!u.includes(d));Object.assign(c,this.getElementsState(f,l,i))}a.setElementState(c,s)},this.getElementsState=(r,i,a)=>{const{graph:o}=this.context,s={};return r.forEach(l=>{const u=o.getElementState(l);a?s[l]=u.includes(i)?u:[...u,i]:s[l]=u.filter(c=>c!==i)}),s},this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),ed.forEach(r=>{e.on(`${r}:${be.POINTER_ENTER}`,this.hoverElement),e.on(`${r}:${be.POINTER_LEAVE}`,this.hoverElement)});const n=this.context.canvas.document;n.addEventListener(`${be.DRAG_START}`,this.toggleFrozen),n.addEventListener(`${be.DRAG_END}`,this.toggleFrozen)}getActiveIds(e){const{graph:n}=this.context,{degree:r,direction:i}=this.options,a=e.target.id;return r?due(n,e.targetType,a,typeof r=="function"?r(e):r,i):[a]}validate(e){if(this.destroyed||this.isFrozen||Mw(e.target)||this.context.graph.isCollapsingExpanding)return!1;const{enable:n}=this.options;return Ue(n)?n(e):!!n}unbindEvents(){const{graph:e}=this.context;ed.forEach(r=>{e.off(`${r}:${be.POINTER_ENTER}`,this.hoverElement),e.off(`${r}:${be.POINTER_LEAVE}`,this.hoverElement)});const n=this.context.canvas.document;n.removeEventListener(`${be.DRAG_START}`,this.toggleFrozen),n.removeEventListener(`${be.DRAG_END}`,this.toggleFrozen)}destroy(){this.unbindEvents(),super.destroy()}}Nw.defaultOptions={animation:!1,enable:!0,degree:0,direction:"both",state:"active",inactiveState:void 0};class BZe extends am{onPointerDown(e){if(!super.validate(e)||!super.isKeydown()||this.points)return;const{canvas:n}=this.context;this.pathShape=new yr({id:"g6-lasso-select",style:this.options.style}),n.appendChild(this.pathShape),this.points=[Nx(e)]}onPointerMove(e){var n;if(!this.points)return;const{immediately:r,mode:i}=this.options;this.points.push(Nx(e)),(n=this.pathShape)===null||n===void 0||n.setAttribute("d",_Xe(this.points)),r&&i==="default"&&this.points.length>2&&super.updateElementsStates(this.points)}onPointerUp(){if(this.points){if(this.points.length<2){this.clearLasso();return}super.updateElementsStates(this.points),this.clearLasso()}}clearLasso(){var e;(e=this.pathShape)===null||e===void 0||e.remove(),this.pathShape=void 0,this.points=void 0}}class Fw extends vo{constructor(e,n){super(e,Object.assign({},Fw.defaultOptions,n)),this.hiddenShapes=[],this.isVisible=!0,this.setElementsVisibility=(r,i,a)=>{r.filter(Boolean).forEach(o=>{i==="hidden"&&!o.isVisible()?this.hiddenShapes.push(o):i==="visible"&&this.hiddenShapes.includes(o)?this.hiddenShapes.splice(this.hiddenShapes.indexOf(o),1):Jf(o,i,a)})},this.filterShapes=(r,i)=>{if(Ue(i))return o=>!i(r,o);const a=i==null?void 0:i[r];return o=>o.className?!(a!=null&&a.includes(o.className)):!0},this.hideShapes=r=>{if(!this.validate(r)||!this.isVisible)return;const{element:i}=this.context,{shapes:a={}}=this.options;this.setElementsVisibility(i.getNodes(),"hidden",this.filterShapes("node",a)),this.setElementsVisibility(i.getEdges(),"hidden",this.filterShapes("edge",a)),this.setElementsVisibility(i.getCombos(),"hidden",this.filterShapes("combo",a)),this.isVisible=!1},this.showShapes=gp(r=>{if(!this.validate(r)||this.isVisible)return;const{element:i}=this.context;this.setElementsVisibility(i.getNodes(),"visible"),this.setElementsVisibility(i.getEdges(),"visible"),this.setElementsVisibility(i.getCombos(),"visible"),this.isVisible=!0},this.options.debounce),this.bindEvents()}bindEvents(){const{graph:e}=this.context;e.on(Le.BEFORE_TRANSFORM,this.hideShapes),e.on(Le.AFTER_TRANSFORM,this.showShapes)}unbindEvents(){const{graph:e}=this.context;e.off(Le.BEFORE_TRANSFORM,this.hideShapes),e.off(Le.AFTER_TRANSFORM,this.showShapes)}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return Ue(n)?n(e):!!n}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}Fw.defaultOptions={enable:!0,debounce:200,shapes:t=>t==="node"};var s$=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class zw extends vo{constructor(e,n){super(e,Object.assign({},zw.defaultOptions,n)),this.onWheel=r=>s$(this,void 0,void 0,function*(){this.options.preventDefault&&r.preventDefault();const i=r.deltaX,a=r.deltaY;yield this.scroll([-i,-a],r)}),this.shortcut=new Mp(e.graph),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){var e,n;const{trigger:r}=this.options;if(this.shortcut.unbindAll(),jr(r)){(e=this.graphDom)===null||e===void 0||e.removeEventListener(be.WHEEL,this.onWheel);const{up:i=[],down:a=[],left:o=[],right:s=[]}=r;this.shortcut.bind(i,l=>this.scroll([0,-10],l)),this.shortcut.bind(a,l=>this.scroll([0,10],l)),this.shortcut.bind(o,l=>this.scroll([-10,0],l)),this.shortcut.bind(s,l=>this.scroll([10,0],l))}else(n=this.graphDom)===null||n===void 0||n.addEventListener(be.WHEEL,this.onWheel,{passive:!1})}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}formatDisplacement(e){const{sensitivity:n}=this.options;return e=gs(e,n),e=this.clampByDirection(e),e=this.clampByRange(e),e}clampByDirection([e,n]){const{direction:r}=this.options;return r==="x"?n=0:r==="y"&&(e=0),[e,n]}clampByRange([e,n]){const{viewport:r,canvas:i}=this.context,[a,o]=i.getSize(),[s,l,u,c]=kl(this.options.range),f=[o*s,a*l,o*u,a*c],d=Bc(n4(r.getCanvasCenter()),f),h=In(r.getViewportCenter(),[e,n,0]);if(!ks(h,d)){const{min:[p,g],max:[v,m]}=d;(h[0]<p&&e>0||h[0]>v&&e<0)&&(e=0),(h[1]<g&&n>0||h[1]>m&&n<0)&&(n=0)}return[e,n]}scroll(e,n){return s$(this,void 0,void 0,function*(){if(!this.validate(n))return;const{onFinish:r}=this.options,i=this.context.graph,a=this.formatDisplacement(e);yield i.translateBy(a,!1),r==null||r()})}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return Ue(n)?n(e):!!n}destroy(){var e;this.shortcut.destroy(),(e=this.graphDom)===null||e===void 0||e.removeEventListener(be.WHEEL,this.onWheel),super.destroy()}}zw.defaultOptions={enable:!0,sensitivity:1,preventDefault:!0,range:1/0};var l$=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class jw extends vo{constructor(e,n){super(e,Object.assign({},jw.defaultOptions,n)),this.zoom=(r,i,a)=>l$(this,void 0,void 0,function*(){if(!this.validate(i))return;const{graph:o}=this.context;let s=this.options.origin;!s&&"viewport"in i&&(s=Vi(i.viewport));const{sensitivity:l,onFinish:u}=this.options,c=1+jn(r,-50,50)*l/100,f=o.getZoom();yield o.zoomTo(f*c,a,s),u==null||u()}),this.onReset=()=>l$(this,void 0,void 0,function*(){yield this.context.graph.zoomTo(1,this.options.animation)}),this.preventDefault=r=>{this.options.preventDefault&&r.preventDefault()},this.shortcut=new Mp(e.graph),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){const{trigger:e}=this.options;if(this.shortcut.unbindAll(),Array.isArray(e))if(e.includes(be.PINCH))this.shortcut.bind([be.PINCH],n=>{this.zoom(n.scale,n,!1)});else{const n=this.context.canvas.getContainer();n==null||n.addEventListener(be.WHEEL,this.preventDefault),this.shortcut.bind([...e,be.WHEEL],r=>{const{deltaX:i,deltaY:a}=r;this.zoom(-(a??i),r,!1)})}if(typeof e=="object"){const{zoomIn:n=[],zoomOut:r=[],reset:i=[]}=e;this.shortcut.bind(n,a=>this.zoom(10,a,this.options.animation)),this.shortcut.bind(r,a=>this.zoom(-10,a,this.options.animation)),this.shortcut.bind(i,this.onReset)}}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return Ue(n)?n(e):!!n}destroy(){var e;this.shortcut.destroy(),(e=this.context.canvas.getContainer())===null||e===void 0||e.removeEventListener(be.WHEEL,this.preventDefault),super.destroy()}}jw.defaultOptions={animation:{duration:200},enable:!0,sensitivity:1,trigger:[],preventDefault:!0};var xO,u$;function Vc(){if(u$)return xO;u$=1;function t(e,n,r,i){return i===void 0&&(i="height"),r==="center"?(e[i]+n[i])/2:e.height}return xO={assign:Object.assign,getHeight:t},xO}var wO,c$;function Rue(){if(c$)return wO;c$=1;var t=Vc(),e=18,n=e*2,r=e,i={getId:function(l){return l.id||l.name},getPreH:function(l){return l.preH||0},getPreV:function(l){return l.preV||0},getHGap:function(l){return l.hgap||r},getVGap:function(l){return l.vgap||r},getChildren:function(l){return l.children},getHeight:function(l){return l.height||n},getWidth:function(l){var u=l.label||" ";return l.width||u.split("").length*e}};function a(s,l){var u=this;if(u.vgap=u.hgap=0,s instanceof a)return s;u.data=s;var c=l.getHGap(s),f=l.getVGap(s);return u.preH=l.getPreH(s),u.preV=l.getPreV(s),u.width=l.getWidth(s),u.height=l.getHeight(s),u.width+=u.preH,u.height+=u.preV,u.id=l.getId(s),u.x=u.y=0,u.depth=0,u.children||(u.children=[]),u.addGap(c,f),u}t.assign(a.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(l,u){var c=this;c.hgap+=l,c.vgap+=u,c.width+=2*l,c.height+=2*u},eachNode:function(l){for(var u=this,c=[u],f;f=c.shift();)l(f),c=f.children.concat(c)},DFTraverse:function(l){this.eachNode(l)},BFTraverse:function(l){for(var u=this,c=[u],f;f=c.shift();)l(f),c=c.concat(f.children)},getBoundingBox:function(){var l={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(u){l.left=Math.min(l.left,u.x),l.top=Math.min(l.top,u.y),l.width=Math.max(l.width,u.x+u.width),l.height=Math.max(l.height,u.y+u.height)}),l},translate:function(l,u){l===void 0&&(l=0),u===void 0&&(u=0),this.eachNode(function(c){c.x+=l,c.y+=u,c.x+=c.preH,c.y+=c.preV})},right2left:function(){var l=this,u=l.getBoundingBox();l.eachNode(function(c){c.x=c.x-(c.x-u.left)*2-c.width}),l.translate(u.width,0)},bottom2top:function(){var l=this,u=l.getBoundingBox();l.eachNode(function(c){c.y=c.y-(c.y-u.top)*2-c.height}),l.translate(0,u.height)}});function o(s,l,u){l===void 0&&(l={}),l=t.assign({},i,l);var c=new a(s,l),f=[c],d;if(!u&&!s.collapsed){for(;d=f.shift();)if(!d.data.collapsed){var h=l.getChildren(d.data),p=h?h.length:0;if(d.children=new Array(p),h&&p)for(var g=0;g<p;g++){var v=new a(h[g],l);d.children[g]=v,f.push(v),v.parent=d,v.depth=d.depth+1}}}return c}return wO=o,wO}var _O,f$;function Bw(){if(f$)return _O;f$=1;var t=Rue(),e=function(){function n(i,a){a===void 0&&(a={});var o=this;o.options=a,o.rootNode=t(i,a)}var r=n.prototype;return r.execute=function(){throw new Error("please override this method")},n}();return _O=e,_O}var SO,d$;function $Ze(){if(d$)return SO;d$=1;function t(o,s,l,u){u===void 0&&(u=[]);var c=this;c.w=o||0,c.h=s||0,c.y=l||0,c.x=0,c.c=u||[],c.cs=u.length,c.prelim=0,c.mod=0,c.shift=0,c.change=0,c.tl=null,c.tr=null,c.el=null,c.er=null,c.msel=0,c.mser=0}t.fromNode=function(o,s){if(!o)return null;var l=[];return o.children.forEach(function(u){l.push(t.fromNode(u,s))}),s?new t(o.height,o.width,o.x,l):new t(o.width,o.height,o.y,l)};function e(o,s,l){l?o.y+=s:o.x+=s,o.children.forEach(function(u){e(u,s,l)})}function n(o,s){var l=s?o.y:o.x;return o.children.forEach(function(u){l=Math.min(n(u,s),l)}),l}function r(o,s){var l=n(o,s);e(o,-l,s)}function i(o,s,l){l?s.y=o.x:s.x=o.x,o.c.forEach(function(u,c){i(u,s.children[c],l)})}function a(o,s,l){l===void 0&&(l=0),s?(o.x=l,l+=o.width):(o.y=l,l+=o.height),o.children.forEach(function(u){a(u,s,l)})}return SO=function(o,s){s===void 0&&(s={});var l=s.isHorizontal;function u(S){if(S.cs===0){c(S);return}u(S.c[0]);for(var O=_(g(S.c[0].el),0,null),A=1;A<S.cs;++A){u(S.c[A]);var T=g(S.c[A].er);f(S,A,O),O=_(T,A,O)}y(S),c(S)}function c(S){S.cs===0?(S.el=S,S.er=S,S.msel=S.mser=0):(S.el=S.c[0].el,S.msel=S.c[0].msel,S.er=S.c[S.cs-1].er,S.mser=S.c[S.cs-1].mser)}function f(S,O,A){for(var T=S.c[O-1],I=T.mod,D=S.c[O],R=D.mod;T!==null&&D!==null;){g(T)>A.low&&(A=A.nxt);var F=I+T.prelim+T.w-(R+D.prelim);F>0&&(R+=F,d(S,O,A.index,F));var z=g(T),N=g(D);z<=N&&(T=p(T),T!==null&&(I+=T.mod)),z>=N&&(D=h(D),D!==null&&(R+=D.mod))}!T&&D?v(S,O,D,R):T&&!D&&m(S,O,T,I)}function d(S,O,A,T){S.c[O].mod+=T,S.c[O].msel+=T,S.c[O].mser+=T,x(S,O,A,T)}function h(S){return S.cs===0?S.tl:S.c[0]}function p(S){return S.cs===0?S.tr:S.c[S.cs-1]}function g(S){return S.y+S.h}function v(S,O,A,T){var I=S.c[0].el;I.tl=A;var D=T-A.mod-S.c[0].msel;I.mod+=D,I.prelim-=D,S.c[0].el=S.c[O].el,S.c[0].msel=S.c[O].msel}function m(S,O,A,T){var I=S.c[O].er;I.tr=A;var D=T-A.mod-S.c[O].mser;I.mod+=D,I.prelim-=D,S.c[O].er=S.c[O-1].er,S.c[O].mser=S.c[O-1].mser}function y(S){S.prelim=(S.c[0].prelim+S.c[0].mod+S.c[S.cs-1].mod+S.c[S.cs-1].prelim+S.c[S.cs-1].w)/2-S.w/2}function b(S,O){O+=S.mod,S.x=S.prelim+O,w(S);for(var A=0;A<S.cs;A++)b(S.c[A],O)}function x(S,O,A,T){if(A!==O-1){var I=O-A;S.c[A+1].shift+=T/I,S.c[O].shift-=T/I,S.c[O].change-=T-T/I}}function w(S){for(var O=0,A=0,T=0;T<S.cs;T++)O+=S.c[T].shift,A+=O+S.c[T].change,S.c[T].mod+=A}function _(S,O,A){for(;A!==null&&S>=A.low;)A=A.nxt;return{low:S,index:O,nxt:A}}a(o,l);var E=t.fromNode(o,l);return u(E),b(E,0),i(E,o,l),r(o,l),o},SO}var EO,h$;function Nue(){if(h$)return EO;h$=1;var t=Rue();return EO=function(e,n){for(var r=t(e.data,n,!0),i=t(e.data,n,!0),a=e.children.length,o=Math.round(a/2),s=n.getSide||function(f,d){return d<o?"right":"left"},l=0;l<a;l++){var u=e.children[l],c=s(u,l);c==="right"?i.children.push(u):r.children.push(u)}return r.eachNode(function(f){f.isRoot()||(f.side="left")}),i.eachNode(function(f){f.isRoot()||(f.side="right")}),{left:r,right:i}},EO}var OO,p$;function g4(){if(p$)return OO;p$=1;var t=Nue(),e=["LR","RL","TB","BT","H","V"],n=["LR","RL","H"],r=function(s){return n.indexOf(s)>-1},i=e[0];OO=function(o,s,l){var u=s.direction||i;if(s.isHorizontal=r(u),e.indexOf(u)===-1)throw new TypeError("Invalid direction: "+u);if(u===e[0])l(o,s);else if(u===e[1])l(o,s),o.right2left();else if(u===e[2])l(o,s);else if(u===e[3])l(o,s),o.bottom2top();else if(u===e[4]||u===e[5]){var c=t(o,s),f=c.left,d=c.right;l(f,s),l(d,s),s.isHorizontal?f.right2left():f.bottom2top(),d.translate(f.x-d.x,f.y-d.y),o.x=f.x,o.y=d.y;var h=o.getBoundingBox();s.isHorizontal?h.top<0&&o.translate(0,-h.top):h.left<0&&o.translate(-h.left,0)}var p=s.fixedRoot;return p===void 0&&(p=!0),p&&o.translate(-(o.x+o.width/2+o.hgap),-(o.y+o.height/2+o.vgap)),a(o,s),o};function a(o,s){if(s.radial){var l=s.isHorizontal?["x","y"]:["y","x"],u=l[0],c=l[1],f={x:1/0,y:1/0},d={x:-1/0,y:-1/0},h=0;o.DFTraverse(function(v){h++;var m=v.x,y=v.y;f.x=Math.min(f.x,m),f.y=Math.min(f.y,y),d.x=Math.max(d.x,m),d.y=Math.max(d.y,y)});var p=d[c]-f[c];if(p===0)return;var g=Math.PI*2/h;o.DFTraverse(function(v){var m=(v[c]-f[c])/p*(Math.PI*2-g)+g,y=v[u]-o[u];v.x=Math.cos(m)*y,v.y=Math.sin(m)*y})}}return OO}var kO,g$;function VZe(){if(g$)return kO;g$=1;function t(u,c){u.prototype=Object.create(c.prototype),u.prototype.constructor=u,e(u,c)}function e(u,c){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,d){return f.__proto__=d,f},e(u,c)}var n=Bw(),r=$Ze(),i=g4(),a=Vc(),o=function(u){function c(){return u.apply(this,arguments)||this}t(c,u);var f=c.prototype;return f.execute=function(){var h=this;return i(h.rootNode,h.options,r)},c}(n),s={};function l(u,c){return c=a.assign({},s,c),new o(u,c).execute()}return kO=l,kO}var AO,v$;function qZe(){if(v$)return AO;v$=1;var t=Vc();function e(i,a){a===void 0&&(a=[]);var o=this;o.x=o.y=0,o.leftChild=o.rightChild=null,o.height=0,o.children=a}var n={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function r(i,a,o){o?(a.x=i.x,a.y=i.y):(a.x=i.y,a.y=i.x),i.children.forEach(function(s,l){r(s,a.children[l],o)})}return AO=function(i,a){a===void 0&&(a={}),a=t.assign({},n,a);var o=0;function s(d){if(!d)return null;d.width=0,d.depth&&d.depth>o&&(o=d.depth);var h=d.children,p=h.length,g=new e(d.height,[]);return h.forEach(function(v,m){var y=s(v);g.children.push(y),m===0&&(g.leftChild=y),m===p-1&&(g.rightChild=y)}),g.originNode=d,g.isLeaf=d.isLeaf(),g}function l(d){if(d.isLeaf||d.children.length===0)d.drawingDepth=o;else{var h=d.children.map(function(g){return l(g)}),p=Math.min.apply(null,h);d.drawingDepth=p-1}return d.drawingDepth}var u;function c(d){d.x=d.drawingDepth*a.rankSep,d.isLeaf?(d.y=0,u&&(d.y=u.y+u.height+a.nodeSep,d.originNode.parent!==u.originNode.parent&&(d.y+=a.subTreeSep)),u=d):(d.children.forEach(function(h){c(h)}),d.y=(d.leftChild.y+d.rightChild.y)/2)}var f=s(i);return l(f),c(f),r(f,i,a.isHorizontal),i},AO}var TO,m$;function WZe(){if(m$)return TO;m$=1;function t(u,c){u.prototype=Object.create(c.prototype),u.prototype.constructor=u,e(u,c)}function e(u,c){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,d){return f.__proto__=d,f},e(u,c)}var n=Bw(),r=qZe(),i=g4(),a=Vc(),o=function(u){function c(){return u.apply(this,arguments)||this}t(c,u);var f=c.prototype;return f.execute=function(){var h=this;return h.rootNode.width=0,i(h.rootNode,h.options,r)},c}(n),s={};function l(u,c){return c=a.assign({},s,c),new o(u,c).execute()}return TO=l,TO}var MO,y$;function GZe(){if(y$)return MO;y$=1;var t=Vc();function e(n,r,i,a,o){var s=(typeof i=="function"?i(n):i)*n.depth;if(!a)try{if(n.id===n.parent.children[0].id){n.x+=s,n.y=r?r.y:0;return}}catch{}if(n.x+=s,r){if(n.y=r.y+t.getHeight(r,n,o),r.parent&&n.parent.id!==r.parent.id){var l=r.parent,u=l.y+t.getHeight(l,n,o);n.y=u>n.y?u:n.y}}else n.y=0}return MO=function(n,r,i,a){var o=null;n.eachNode(function(s){e(s,o,r,i,a),o=s})},MO}var CO,b$;function HZe(){if(b$)return CO;b$=1;function t(f,d){f.prototype=Object.create(d.prototype),f.prototype.constructor=f,e(f,d)}function e(f,d){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,p){return h.__proto__=p,h},e(f,d)}var n=Bw(),r=GZe(),i=Nue(),a=Vc(),o=["LR","RL","H"],s=o[0],l=function(f){function d(){return f.apply(this,arguments)||this}t(d,f);var h=d.prototype;return h.execute=function(){var g=this,v=g.options,m=g.rootNode;v.isHorizontal=!0;var y=v.indent,b=y===void 0?20:y,x=v.dropCap,w=x===void 0?!0:x,_=v.direction,E=_===void 0?s:_,S=v.align;if(E&&o.indexOf(E)===-1)throw new TypeError("Invalid direction: "+E);if(E===o[0])r(m,b,w,S);else if(E===o[1])r(m,b,w,S),m.right2left();else if(E===o[2]){var O=i(m,v),A=O.left,T=O.right;r(A,b,w,S),A.right2left(),r(T,b,w,S);var I=A.getBoundingBox();T.translate(I.width,0),m.x=T.x-m.width/2}return m},d}(n),u={};function c(f,d){return d=a.assign({},u,d),new l(f,d).execute()}return CO=c,CO}var PO,x$;function YZe(){if(x$)return PO;x$=1;var t=Vc();function e(i,a){var o=0;return i.children.length?i.children.forEach(function(s){o+=e(s,a)}):o=i.height,i._subTreeSep=a.getSubTreeSep(i.data),i.totalHeight=Math.max(i.height,o)+2*i._subTreeSep,i.totalHeight}function n(i){var a=i.children,o=a.length;if(o){a.forEach(function(d){n(d)});var s=a[0],l=a[o-1],u=l.y-s.y+l.height,c=0;if(a.forEach(function(d){c+=d.totalHeight}),u>i.height)i.y=s.y+u/2-i.height/2;else if(a.length!==1||i.height>c){var f=i.y+(i.height-u)/2-s.y;a.forEach(function(d){d.translate(0,f)})}else i.y=(s.y+s.height/2+l.y+l.height/2)/2-i.height/2}}var r={getSubTreeSep:function(){return 0}};return PO=function(i,a){a===void 0&&(a={}),a=t.assign({},r,a),i.parent={x:0,width:0,height:0,y:0},i.BFTraverse(function(o){o.x=o.parent.x+o.parent.width}),i.parent=null,e(i,a),i.startY=0,i.y=i.totalHeight/2-i.height/2,i.eachNode(function(o){var s=o.children,l=s.length;if(l){var u=s[0];if(u.startY=o.startY+o._subTreeSep,l===1)u.y=o.y+o.height/2-u.height/2;else{u.y=u.startY+u.totalHeight/2-u.height/2;for(var c=1;c<l;c++){var f=s[c];f.startY=s[c-1].startY+s[c-1].totalHeight,f.y=f.startY+f.totalHeight/2-f.height/2}}}}),n(i)},PO}var DO,w$;function UZe(){if(w$)return DO;w$=1;function t(u,c){u.prototype=Object.create(c.prototype),u.prototype.constructor=u,e(u,c)}function e(u,c){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,d){return f.__proto__=d,f},e(u,c)}var n=Bw(),r=YZe(),i=g4(),a=Vc(),o=function(u){function c(){return u.apply(this,arguments)||this}t(c,u);var f=c.prototype;return f.execute=function(){var h=this;return i(h.rootNode,h.options,r)},c}(n),s={};function l(u,c){return c=a.assign({},s,c),new o(u,c).execute()}return DO=l,DO}var IO,_$;function XZe(){if(_$)return IO;_$=1;var t={compactBox:VZe(),dendrogram:WZe(),indented:HZe(),mindmap:UZe()};return IO=t,IO}var r1=XZe();const ZZe=(t,e)=>{if(t!=="next"&&t!=="prev")return e},S$=t=>{t.prev.next=t.next,t.next.prev=t.prev,delete t.next,delete t.prev};let KZe=class{constructor(){const e={};e.prev=e,e.next=e.prev,this.shortcut=e}dequeue(){const e=this.shortcut,n=e.prev;if(n&&n!==e)return S$(n),n}enqueue(e){const n=this.shortcut;e.prev&&e.next&&S$(e),e.next=n.next,n.next.prev=e,n.next=e,e.prev=n}toString(){const e=[],n=this.shortcut;let r=n.prev;for(;r!==n;)e.push(JSON.stringify(r,ZZe)),r=r==null?void 0:r.prev;return`[${e.join(", ")}]`}};class JZe extends KZe{}const QZe=(t,e)=>{var n;if(t.getAllNodes().length<=1)return[];const r=tKe(t,e);return(n=eKe(r.graph,r.buckets,r.zeroIdx).map(a=>t.getRelatedEdges(a.v,"out").filter(({target:o})=>o===a.w)))===null||n===void 0?void 0:n.flat()},eKe=(t,e,n)=>{let r=[];const i=e[e.length-1],a=e[0];let o;for(;t.getAllNodes().length;){for(;o=a.dequeue();)LO(t,e,n,o);for(;o=i.dequeue();)LO(t,e,n,o);if(t.getAllNodes().length){for(let s=e.length-2;s>0;--s)if(o=e[s].dequeue(),o){r=r.concat(LO(t,e,n,o,!0));break}}}return r},LO=(t,e,n,r,i)=>{var a,o;const s=[];return t.hasNode(r.v)&&((a=t.getRelatedEdges(r.v,"in"))===null||a===void 0||a.forEach(l=>{const u=l.data.weight,c=t.getNode(l.source);i&&s.push({v:l.source,w:l.target,in:0,out:0}),c.data.out===void 0&&(c.data.out=0),c.data.out-=u,gD(e,n,Object.assign({v:c.id},c.data))}),(o=t.getRelatedEdges(r.v,"out"))===null||o===void 0||o.forEach(l=>{const u=l.data.weight,c=l.target,f=t.getNode(c);f.data.in===void 0&&(f.data.in=0),f.data.in-=u,gD(e,n,Object.assign({v:f.id},f.data))}),t.removeNode(r.v)),i?s:void 0},tKe=(t,e)=>{const n=new xi;let r=0,i=0;t.getAllNodes().forEach(l=>{n.addNode({id:l.id,data:{v:l.id,in:0,out:0}})}),t.getAllEdges().forEach(l=>{const u=n.getRelatedEdges(l.source,"out").find(f=>f.target===l.target),c=(e==null?void 0:e(l))||1;u?n.updateEdgeData(u==null?void 0:u.id,Object.assign(Object.assign({},u.data),{weight:u.data.weight+c})):n.addEdge({id:l.id,source:l.source,target:l.target,data:{weight:c}}),i=Math.max(i,n.getNode(l.source).data.out+=c),r=Math.max(r,n.getNode(l.target).data.in+=c)});const a=[],o=i+r+3;for(let l=0;l<o;l++)a.push(new JZe);const s=r+1;return n.getAllNodes().forEach(l=>{gD(a,s,Object.assign({v:l.id},n.getNode(l.id).data))}),{buckets:a,zeroIdx:s,graph:n}},gD=(t,e,n)=>{n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)},nKe=(t,e)=>{const r=e==="greedy"?QZe(t,(i=>a=>a.data.weight||1)()):rKe(t);r==null||r.forEach(i=>{const a=i.data;t.removeEdge(i.id),a.forwardName=i.data.name,a.reversed=!0,t.addEdge({id:i.id,source:i.target,target:i.source,data:Object.assign({},a)})})},rKe=t=>{const e=[],n={},r={},i=a=>{r[a]||(r[a]=!0,n[a]=!0,t.getRelatedEdges(a,"out").forEach(o=>{n[o.target]?e.push(o):i(o.target)}),delete n[a])};return t.getAllNodes().forEach(a=>i(a.id)),e},iKe=t=>{t.getAllEdges().forEach(e=>{const n=e.data;if(n.reversed){t.removeEdge(e.id);const r=n.forwardName;delete n.reversed,delete n.forwardName,t.addEdge({id:e.id,source:e.target,target:e.source,data:Object.assign(Object.assign({},n),{forwardName:r})})}})},aKe=(t,e)=>Number(t)-Number(e),Pp=(t,e,n,r)=>{let i;do i=`${r}${Math.random()}`;while(t.hasNode(i));return n.dummy=e,t.addNode({id:i,data:n}),i},oKe=t=>{const e=new xi;return t.getAllNodes().forEach(n=>{e.addNode(Object.assign({},n))}),t.getAllEdges().forEach(n=>{const r=e.getRelatedEdges(n.source,"out").find(i=>i.target===n.target);r?e.updateEdgeData(r==null?void 0:r.id,Object.assign(Object.assign({},r.data),{weight:r.data.weight+n.data.weight||0,minlen:Math.max(r.data.minlen,n.data.minlen||1)})):e.addEdge({id:n.id,source:n.source,target:n.target,data:{weight:n.data.weight||0,minlen:n.data.minlen||1}})}),e},Fue=t=>{const e=new xi;return t.getAllNodes().forEach(n=>{t.getChildren(n.id).length||e.addNode(Object.assign({},n))}),t.getAllEdges().forEach(n=>{e.addEdge(n)}),e},sKe=(t,e)=>t==null?void 0:t.reduce((n,r,i)=>(n[r]=e[i],n),{}),E$=(t,e)=>{const n=Number(t.x),r=Number(t.y),i=Number(e.x)-n,a=Number(e.y)-r;let o=Number(t.width)/2,s=Number(t.height)/2;if(!i&&!a)return{x:0,y:0};let l,u;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),l=s*i/a,u=s):(i<0&&(o=-o),l=o,u=o*a/i),{x:n+l,y:r+u}},dv=t=>{const e=[],n=zue(t)+1;for(let r=0;r<n;r++)e.push([]);t.getAllNodes().forEach(r=>{const i=r.data.rank;i!==void 0&&e[i]&&e[i].push(r.id)});for(let r=0;r<n;r++)e[r]=e[r].sort((i,a)=>aKe(t.getNode(i).data.order,t.getNode(a).data.order));return e},lKe=t=>{const e=t.getAllNodes().filter(r=>r.data.rank!==void 0).map(r=>r.data.rank),n=Math.min(...e);t.getAllNodes().forEach(r=>{r.data.hasOwnProperty("rank")&&n!==1/0&&(r.data.rank-=n)})},uKe=(t,e=0)=>{const n=t.getAllNodes(),r=n.filter(s=>s.data.rank!==void 0).map(s=>s.data.rank),i=Math.min(...r),a=[];n.forEach(s=>{const l=(s.data.rank||0)-i;a[l]||(a[l]=[]),a[l].push(s.id)});let o=0;for(let s=0;s<a.length;s++){const l=a[s];l===void 0?s%e!==0&&(o-=1):o&&(l==null||l.forEach(u=>{const c=t.getNode(u);c&&(c.data.rank=c.data.rank||0,c.data.rank+=o)}))}},O$=(t,e,n,r)=>{const i={width:0,height:0};return je(n)&&je(r)&&(i.rank=n,i.order=r),Pp(t,"border",i,e)},zue=t=>{let e;return t.getAllNodes().forEach(n=>{const r=n.data.rank;r!==void 0&&(e===void 0||r>e)&&(e=r)}),e||(e=0),e},cKe=(t,e)=>{const n={lhs:[],rhs:[]};return t==null||t.forEach(r=>{e(r)?n.lhs.push(r):n.rhs.push(r)}),n},v4=(t,e)=>t.reduce((n,r)=>{const i=e(n),a=e(r);return i>a?r:n}),jue=(t,e,n,r,i,a)=>{r.includes(e.id)||(r.push(e.id),n||a.push(e.id),i(e.id).forEach(o=>jue(t,o,n,r,i,a)),n&&a.push(e.id))},Bue=(t,e,n,r)=>{const i=Array.isArray(e)?e:[e],a=l=>t.getNeighbors(l),o=[],s=[];return i.forEach(l=>{if(t.hasNode(l.id))jue(t,l,n==="post",s,a,o);else throw new Error(`Graph does not have node: ${l}`)}),o},fKe=t=>{const e=n=>{const r=t.getChildren(n),i=t.getNode(n);if(r!=null&&r.length&&r.forEach(a=>e(a.id)),i.data.hasOwnProperty("minRank")){i.data.borderLeft=[],i.data.borderRight=[];for(let a=i.data.minRank,o=i.data.maxRank+1;a<o;a+=1)k$(t,"borderLeft","_bl",n,i,a),k$(t,"borderRight","_br",n,i,a)}};t.getRoots().forEach(n=>e(n.id))},k$=(t,e,n,r,i,a)=>{const o={rank:a,borderType:e,width:0,height:0},s=i.data[e][a-1],l=Pp(t,"border",o,n);i.data[e][a]=l,t.setParent(l,r),s&&t.addEdge({id:`e${Math.random()}`,source:s,target:l,data:{weight:1}})},dKe=(t,e)=>{const n=e.toLowerCase();(n==="lr"||n==="rl")&&$ue(t)},hKe=(t,e)=>{const n=e.toLowerCase();(n==="bt"||n==="rl")&&pKe(t),(n==="lr"||n==="rl")&&(gKe(t),$ue(t))},$ue=t=>{t.getAllNodes().forEach(e=>{A$(e)}),t.getAllEdges().forEach(e=>{A$(e)})},A$=t=>{const e=t.data.width;t.data.width=t.data.height,t.data.height=e},pKe=t=>{t.getAllNodes().forEach(e=>{RO(e.data)}),t.getAllEdges().forEach(e=>{var n;(n=e.data.points)===null||n===void 0||n.forEach(r=>RO(r)),e.data.hasOwnProperty("y")&&RO(e.data)})},RO=t=>{t!=null&&t.y&&(t.y=-t.y)},gKe=t=>{t.getAllNodes().forEach(e=>{NO(e.data)}),t.getAllEdges().forEach(e=>{var n;(n=e.data.points)===null||n===void 0||n.forEach(r=>NO(r)),e.data.hasOwnProperty("x")&&NO(e.data)})},NO=t=>{const e=t.x;t.x=t.y,t.y=e},vKe=t=>{const e=Pp(t,"root",{},"_root"),n=mKe(t);let r=Math.max(...Object.values(n));Math.abs(r)===1/0&&(r=1);const i=r-1,a=2*i+1;t.getAllEdges().forEach(s=>{s.data.minlen*=a});const o=yKe(t)+1;return t.getRoots().forEach(s=>{Vue(t,e,a,o,i,n,s.id)}),{nestingRoot:e,nodeRankFactor:a}},Vue=(t,e,n,r,i,a,o)=>{const s=t.getChildren(o);if(!(s!=null&&s.length)){o!==e&&t.addEdge({id:`e${Math.random()}`,source:e,target:o,data:{weight:0,minlen:n}});return}const l=O$(t,"_bt"),u=O$(t,"_bb"),c=t.getNode(o);t.setParent(l,o),c.data.borderTop=l,t.setParent(u,o),c.data.borderBottom=u,s==null||s.forEach(f=>{Vue(t,e,n,r,i,a,f.id);const d=f.data.borderTop?f.data.borderTop:f.id,h=f.data.borderBottom?f.data.borderBottom:f.id,p=f.data.borderTop?r:2*r,g=d!==h?1:i-a[o]+1;t.addEdge({id:`e${Math.random()}`,source:l,target:d,data:{minlen:g,weight:p,nestingEdge:!0}}),t.addEdge({id:`e${Math.random()}`,source:h,target:u,data:{minlen:g,weight:p,nestingEdge:!0}})}),t.getParent(o)||t.addEdge({id:`e${Math.random()}`,source:e,target:l,data:{weight:0,minlen:i+a[o]}})},mKe=t=>{const e={},n=(r,i)=>{const a=t.getChildren(r);a==null||a.forEach(o=>n(o.id,i+1)),e[r]=i};return t.getRoots().forEach(r=>n(r.id,1)),e},yKe=t=>{let e=0;return t.getAllEdges().forEach(n=>{e+=n.data.weight}),e},bKe=(t,e)=>{e&&t.removeNode(e),t.getAllEdges().forEach(n=>{n.data.nestingEdge&&t.removeEdge(n.id)})},xKe="edge",que="edge-label",wKe=(t,e)=>{t.getAllEdges().forEach(n=>_Ke(t,n,e))},_Ke=(t,e,n)=>{let r=e.source,i=t.getNode(r).data.rank;const a=e.target,o=t.getNode(a).data.rank,s=e.data.labelRank;if(o===i+1)return;t.removeEdge(e.id);let l,u,c;for(c=0,++i;i<o;++c,++i)e.data.points=[],u={originalEdge:e,width:0,height:0,rank:i},l=Pp(t,xKe,u,"_d"),i===s&&(u.width=e.data.width,u.height=e.data.height,u.dummy=que,u.labelpos=e.data.labelpos),t.addEdge({id:`e${Math.random()}`,source:r,target:l,data:{weight:e.data.weight}}),c===0&&n.push(l),r=l;t.addEdge({id:`e${Math.random()}`,source:r,target:a,data:{weight:e.data.weight}})},SKe=(t,e)=>{e.forEach(n=>{let r=t.getNode(n);const{data:i}=r,a=i.originalEdge;let o;a&&t.addEdge(a);let s=n;for(;r.data.dummy;)o=t.getSuccessors(s)[0],t.removeNode(s),a.data.points.push({x:r.data.x,y:r.data.y}),r.data.dummy===que&&(a.data.x=r.data.x,a.data.y=r.data.y,a.data.width=r.data.width,a.data.height=r.data.height),s=o.id,r=t.getNode(s)})},EKe=(t,e,n)=>{const r={};let i;n==null||n.forEach(a=>{let o=t.getParent(a),s,l;for(;o;){if(s=t.getParent(o.id),s?(l=r[s.id],r[s.id]=o.id):(l=i,i=o.id),l&&l!==o.id){e.hasNode(l)||e.addNode({id:l,data:{}}),e.hasNode(o.id)||e.addNode({id:o.id,data:{}}),e.hasEdge(`e${l}-${o.id}`)||e.addEdge({id:`e${l}-${o.id}`,source:l,target:o.id,data:{}});return}o=s}})},OKe=(t,e,n)=>{const r=kKe(t),i=new xi({tree:[{id:r,children:[],data:{}}]});return t.getAllNodes().forEach(a=>{const o=t.getParent(a.id);(a.data.rank===e||a.data.minRank<=e&&e<=a.data.maxRank)&&(i.hasNode(a.id)||i.addNode(Object.assign({},a)),o!=null&&o.id&&!i.hasNode(o==null?void 0:o.id)&&i.addNode(Object.assign({},o)),i.setParent(a.id,(o==null?void 0:o.id)||r),t.getRelatedEdges(a.id,n).forEach(s=>{const l=s.source===a.id?s.target:s.source;i.hasNode(l)||i.addNode(Object.assign({},t.getNode(l)));const u=i.getRelatedEdges(l,"out").find(({target:f})=>f===a.id),c=u!==void 0?u.data.weight:0;u?i.updateEdgeData(u.id,Object.assign(Object.assign({},u.data),{weight:s.data.weight+c})):i.addEdge({id:s.id,source:l,target:a.id,data:{weight:s.data.weight+c}})}),a.data.hasOwnProperty("minRank")&&i.updateNodeData(a.id,Object.assign(Object.assign({},a.data),{borderLeft:a.data.borderLeft[e],borderRight:a.data.borderRight[e]})))}),i},kKe=t=>{let e;for(;t.hasNode(e=`_root${Math.random()}`););return e},AKe=(t,e,n)=>{const r=sKe(n,n.map((c,f)=>f)),a=e.map(c=>{const f=t.getRelatedEdges(c,"out").map(d=>({pos:r[d.target]||0,weight:d.data.weight}));return f==null?void 0:f.sort((d,h)=>d.pos-h.pos)}).flat().filter(c=>c!==void 0);let o=1;for(;o<n.length;)o<<=1;const s=2*o-1;o-=1;const l=Array(s).fill(0,0,s);let u=0;return a==null||a.forEach(c=>{if(c){let f=c.pos+o;l[f]+=c.weight;let d=0;for(;f>0;)f%2&&(d+=l[f+1]),f=f-1>>1,l[f]+=c.weight;u+=c.weight*d}}),u},T$=(t,e)=>{let n=0;for(let r=1;r<(e==null?void 0:e.length);r+=1)n+=AKe(t,e[r-1],e[r]);return n},M$=t=>{const e={},n=t.getAllNodes(),r=n.map(u=>{var c;return(c=u.data.rank)!==null&&c!==void 0?c:-1/0}),i=Math.max(...r),a=[];for(let u=0;u<i+1;u++)a.push([]);const o=n.sort((u,c)=>t.getNode(u.id).data.rank-t.getNode(c.id).data.rank),l=o.filter(u=>t.getNode(u.id).data.fixorder!==void 0).sort((u,c)=>t.getNode(u.id).data.fixorder-t.getNode(c.id).data.fixorder);return l==null||l.forEach(u=>{isNaN(t.getNode(u.id).data.rank)||a[t.getNode(u.id).data.rank].push(u.id),e[u.id]=!0}),o==null||o.forEach(u=>t.dfsTree(u.id,c=>{if(e.hasOwnProperty(c.id))return!0;e[c.id]=!0,isNaN(c.data.rank)||a[c.data.rank].push(c.id)})),a},TKe=(t,e)=>e.map(n=>{const r=t.getRelatedEdges(n,"in");if(!(r!=null&&r.length))return{v:n};const i={sum:0,weight:0};return r==null||r.forEach(a=>{const o=t.getNode(a.source);i.sum+=a.data.weight*o.data.order,i.weight+=a.data.weight}),{v:n,barycenter:i.sum/i.weight,weight:i.weight}}),MKe=(t,e)=>{var n,r,i;const a={};t==null||t.forEach((s,l)=>{a[s.v]={i:l,indegree:0,in:[],out:[],vs:[s.v]};const u=a[s.v];s.barycenter!==void 0&&(u.barycenter=s.barycenter,u.weight=s.weight)}),(n=e.getAllEdges())===null||n===void 0||n.forEach(s=>{const l=a[s.source],u=a[s.target];l!==void 0&&u!==void 0&&(u.indegree++,l.out.push(a[s.target]))});const o=(i=(r=Object.values(a)).filter)===null||i===void 0?void 0:i.call(r,s=>!s.indegree);return CKe(o)},CKe=t=>{var e,n;const r=[],i=l=>u=>{u.merged||(u.barycenter===void 0||l.barycenter===void 0||u.barycenter>=l.barycenter)&&PKe(l,u)},a=l=>u=>{u.in.push(l),--u.indegree===0&&t.push(u)};for(;t!=null&&t.length;){const l=t.pop();r.push(l),(e=l.in.reverse())===null||e===void 0||e.forEach(u=>i(l)(u)),(n=l.out)===null||n===void 0||n.forEach(u=>a(l)(u))}const o=r.filter(l=>!l.merged),s=["vs","i","barycenter","weight"];return o.map(l=>{const u={};return s==null||s.forEach(c=>{l[c]!==void 0&&(u[c]=l[c])}),u})},PKe=(t,e)=>{var n;let r=0,i=0;t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.vs=(n=e.vs)===null||n===void 0?void 0:n.concat(t.vs),t.barycenter=r/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0},DKe=(t,e,n,r)=>{const i=cKe(t,d=>{const h=d.hasOwnProperty("fixorder")&&!isNaN(d.fixorder);return r?!h&&d.hasOwnProperty("barycenter"):h||d.hasOwnProperty("barycenter")}),a=i.lhs,o=i.rhs.sort((d,h)=>-d.i- -h.i),s=[];let l=0,u=0,c=0;a==null||a.sort(IKe(!!e,!!n)),c=C$(s,o,c),a==null||a.forEach(d=>{var h;c+=(h=d.vs)===null||h===void 0?void 0:h.length,s.push(d.vs),l+=d.barycenter*d.weight,u+=d.weight,c=C$(s,o,c)});const f={vs:s.flat()};return u&&(f.barycenter=l/u,f.weight=u),f},C$=(t,e,n)=>{let r=n,i;for(;e.length&&(i=e[e.length-1]).i<=r;)e.pop(),t==null||t.push(i.vs),r++;return r},IKe=(t,e)=>(n,r)=>{if(n.fixorder!==void 0&&r.fixorder!==void 0)return n.fixorder-r.fixorder;if(n.barycenter<r.barycenter)return-1;if(n.barycenter>r.barycenter)return 1;if(e&&n.order!==void 0&&r.order!==void 0){if(n.order<r.order)return-1;if(n.order>r.order)return 1}return t?r.i-n.i:n.i-r.i},Wue=(t,e,n,r,i,a)=>{var o,s,l,u;let c=t.getChildren(e).map(y=>y.id);const f=t.getNode(e),d=f?f.data.borderLeft:void 0,h=f?f.data.borderRight:void 0,p={};d&&(c=c==null?void 0:c.filter(y=>y!==d&&y!==h));const g=TKe(t,c||[]);g==null||g.forEach(y=>{var b;if(!((b=t.getChildren(y.v))===null||b===void 0)&&b.length){const x=Wue(t,y.v,n,r,a);p[y.v]=x,x.hasOwnProperty("barycenter")&&RKe(y,x)}});const v=MKe(g,n);LKe(v,p),(o=v.filter(y=>y.vs.length>0))===null||o===void 0||o.forEach(y=>{const b=t.getNode(y.vs[0]);b&&(y.fixorder=b.data.fixorder,y.order=b.data.order)});const m=DKe(v,r,i,a);if(d&&(m.vs=[d,m.vs,h].flat(),!((s=t.getPredecessors(d))===null||s===void 0)&&s.length)){const y=t.getNode(((l=t.getPredecessors(d))===null||l===void 0?void 0:l[0].id)||""),b=t.getNode(((u=t.getPredecessors(h))===null||u===void 0?void 0:u[0].id)||"");m.hasOwnProperty("barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+y.data.order+b.data.order)/(m.weight+2),m.weight+=2}return m},LKe=(t,e)=>{t==null||t.forEach(n=>{var r;const i=(r=n.vs)===null||r===void 0?void 0:r.map(a=>e[a]?e[a].vs:a);n.vs=i.flat()})},RKe=(t,e)=>{t.barycenter!==void 0?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)},NKe=(t,e)=>{const n=zue(t),r=[],i=[];for(let c=1;c<n+1;c++)r.push(c);for(let c=n-1;c>-1;c--)i.push(c);const a=P$(t,r,"in"),o=P$(t,i,"out");let s=M$(t);FO(t,s);let l=Number.POSITIVE_INFINITY,u;for(let c=0,f=0;f<4;++c,++f){D$(c%2?a:o,c%4>=2,!1,e),s=dv(t);const d=T$(t,s);d<l&&(f=0,u=vc(s),l=d)}s=M$(t),FO(t,s);for(let c=0,f=0;f<4;++c,++f){D$(c%2?a:o,c%4>=2,!0,e),s=dv(t);const d=T$(t,s);d<l&&(f=0,u=vc(s),l=d)}FO(t,u)},P$=(t,e,n)=>e.map(r=>OKe(t,r,n)),D$=(t,e,n,r)=>{const i=new xi;t==null||t.forEach(a=>{var o;const s=a.getRoots()[0].id,l=Wue(a,s,i,e,n,r);for(let u=0;u<((o=l.vs)===null||o===void 0?void 0:o.length);u++){const c=a.getNode(l.vs[u]);c&&(c.data.order=u)}EKe(a,i,l.vs)})},FO=(t,e)=>{e==null||e.forEach(n=>{n==null||n.forEach((r,i)=>{t.getNode(r).data.order=i})})},FKe=(t,e)=>{const r=t.getAllNodes().filter(o=>{var s;return!(!((s=t.getChildren(o.id))===null||s===void 0)&&s.length)}).map(o=>o.data.rank),i=Math.max(...r),a=[];for(let o=0;o<i+1;o++)a[o]=[];e==null||e.forEach(o=>{const s=t.getNode(o);!s||s.data.dummy||isNaN(s.data.rank)||(s.data.fixorder=a[s.data.rank].length,a[s.data.rank].push(o))})},zKe=t=>{const e={};let n=0;const r=i=>{const a=n;t.getChildren(i).forEach(o=>r(o.id)),e[i]={low:a,lim:n++}};return t.getRoots().forEach(i=>r(i.id)),e},jKe=(t,e,n,r)=>{var i,a;const o=[],s=[],l=Math.min(e[n].low,e[r].low),u=Math.max(e[n].lim,e[r].lim);let c,f;c=n;do c=(i=t.getParent(c))===null||i===void 0?void 0:i.id,o.push(c);while(c&&(e[c].low>l||u>e[c].lim));for(f=c,c=r;c&&c!==f;)s.push(c),c=(a=t.getParent(c))===null||a===void 0?void 0:a.id;return{lca:f,path:o.concat(s.reverse())}},BKe=(t,e)=>{const n=zKe(t);e.forEach(r=>{var i,a;let o=r,s=t.getNode(o);const l=s.data.originalEdge;if(!l)return;const u=jKe(t,n,l.source,l.target),c=u.path,f=u.lca;let d=0,h=c[d],p=!0;for(;o!==l.target;){if(s=t.getNode(o),p){for(;h!==f&&((i=t.getNode(h))===null||i===void 0?void 0:i.data.maxRank)<s.data.rank;)d++,h=c[d];h===f&&(p=!1)}if(!p){for(;d<c.length-1&&((a=t.getNode(c[d+1]))===null||a===void 0?void 0:a.data.minRank)<=s.data.rank;)d++;h=c[d]}t.hasNode(h)&&t.setParent(o,h),o=t.getSuccessors(o)[0].id}})},$Ke=(t,e)=>{const n={},r=(i,a)=>{let o=0,s=0;const l=i.length,u=a==null?void 0:a[(a==null?void 0:a.length)-1];return a==null||a.forEach((c,f)=>{var d;const h=qKe(t,c),p=h?t.getNode(h.id).data.order:l;(h||c===u)&&((d=a.slice(s,f+1))===null||d===void 0||d.forEach(g=>{var v;(v=t.getPredecessors(g))===null||v===void 0||v.forEach(m=>{var y;const b=t.getNode(m.id),x=b.data.order;(x<o||p<x)&&!(b.data.dummy&&(!((y=t.getNode(g))===null||y===void 0)&&y.data.dummy))&&Gue(n,m.id,g)})}),s=f+1,o=p)}),a};return e!=null&&e.length&&e.reduce(r),n},VKe=(t,e)=>{const n={};function r(s,l,u,c,f){var d,h;let p;for(let g=l;g<u;g++)p=s[g],!((d=t.getNode(p))===null||d===void 0)&&d.data.dummy&&((h=t.getPredecessors(p))===null||h===void 0||h.forEach(v=>{const m=t.getNode(v.id);m.data.dummy&&(m.data.order<c||m.data.order>f)&&Gue(n,v.id,p)}))}function i(s){return JSON.stringify(s.slice(1))}function a(s,l){const u=i(s);l.get(u)||(r(...s),l.set(u,!0))}const o=(s,l)=>{let u=-1,c,f=0;const d=new Map;return l==null||l.forEach((h,p)=>{var g;if(((g=t.getNode(h))===null||g===void 0?void 0:g.data.dummy)==="border"){const v=t.getPredecessors(h)||[];v.length&&(c=t.getNode(v[0].id).data.order,a([l,f,p,u,c],d),f=p,u=c)}a([l,f,l.length,c,s.length],d)}),l};return e!=null&&e.length&&e.reduce(o),n},qKe=(t,e)=>{var n,r;if(!((n=t.getNode(e))===null||n===void 0)&&n.data.dummy)return(r=t.getPredecessors(e))===null||r===void 0?void 0:r.find(i=>t.getNode(i.id).data.dummy)},Gue=(t,e,n)=>{let r=e,i=n;if(r>i){const o=r;r=i,i=o}let a=t[r];a||(t[r]=a={}),a[i]=!0},WKe=(t,e,n)=>{let r=e,i=n;if(r>i){const a=e;r=i,i=a}return!!t[r]},GKe=(t,e,n,r)=>{const i={},a={},o={};return e==null||e.forEach(s=>{s==null||s.forEach((l,u)=>{i[l]=l,a[l]=l,o[l]=u})}),e==null||e.forEach(s=>{let l=-1;s==null||s.forEach(u=>{let c=r(u).map(f=>f.id);if(c.length){c=c.sort((d,h)=>o[d]-o[h]);const f=(c.length-1)/2;for(let d=Math.floor(f),h=Math.ceil(f);d<=h;++d){const p=c[d];a[u]===u&&l<o[p]&&!WKe(n,u,p)&&(a[p]=u,a[u]=i[u]=i[p],l=o[p])}}})}),{root:i,align:a}},HKe=(t,e,n,r,i,a,o)=>{var s;const l={},u=YKe(t,e,n,i,a,o),c=o?"borderLeft":"borderRight",f=(p,g)=>{let v=u.getAllNodes(),m=v.pop();const y={};for(;m;)y[m.id]?p(m.id):(y[m.id]=!0,v.push(m),v=v.concat(g(m.id))),m=v.pop()},d=p=>{l[p]=(u.getRelatedEdges(p,"in")||[]).reduce((g,v)=>Math.max(g,(l[v.source]||0)+v.data.weight),0)},h=p=>{const g=(u.getRelatedEdges(p,"out")||[]).reduce((m,y)=>Math.min(m,(l[y.target]||0)-y.data.weight),Number.POSITIVE_INFINITY),v=t.getNode(p);g!==Number.POSITIVE_INFINITY&&v.data.borderType!==c&&(l[p]=Math.max(l[p],g))};return f(d,u.getPredecessors.bind(u)),f(h,u.getSuccessors.bind(u)),(s=Object.values(r))===null||s===void 0||s.forEach(p=>{l[p]=l[n[p]]}),l},YKe=(t,e,n,r,i,a)=>{const o=new xi,s=KKe(r,i,a);return e==null||e.forEach(l=>{let u;l==null||l.forEach(c=>{const f=n[c];if(o.hasNode(f)||o.addNode({id:f,data:{}}),u){const d=n[u],h=o.getRelatedEdges(d,"out").find(p=>p.target===f);h?o.updateEdgeData(h.id,Object.assign(Object.assign({},h.data),{weight:Math.max(s(t,c,u),h.data.weight||0)})):o.addEdge({id:`e${Math.random()}`,source:d,target:f,data:{weight:Math.max(s(t,c,u),0)}})}u=c})}),o},UKe=(t,e)=>v4(Object.values(e),n=>{var r;let i=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return(r=Object.keys(n))===null||r===void 0||r.forEach(o=>{const s=n[o],l=JKe(t,o)/2;i=Math.max(s+l,i),a=Math.min(s-l,a)}),i-a});function XKe(t,e){const n=Object.values(e),r=Math.min(...n),i=Math.max(...n);["u","d"].forEach(a=>{["l","r"].forEach(o=>{const s=a+o,l=t[s];let u;if(l===e)return;const c=Object.values(l);u=o==="l"?r-Math.min(...c):i-Math.max(...c),u&&(t[s]={},Object.keys(l).forEach(f=>{t[s][f]=l[f]+u}))})})}const ZKe=(t,e)=>{const n={};return Object.keys(t.ul).forEach(r=>{if(e)n[r]=t[e.toLowerCase()][r];else{const i=Object.values(t).map(a=>a[r]);n[r]=(i[0]+i[1])/2}}),n},KKe=(t,e,n)=>(r,i,a)=>{const o=r.getNode(i),s=r.getNode(a);let l=0,u=0;if(l+=o.data.width/2,o.data.hasOwnProperty("labelpos"))switch((o.data.labelpos||"").toLowerCase()){case"l":u=-o.data.width/2;break;case"r":u=o.data.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(o.data.dummy?e:t)/2,l+=(s.data.dummy?e:t)/2,l+=s.data.width/2,s.data.labelpos)switch((s.data.labelpos||"").toLowerCase()){case"l":u=s.data.width/2;break;case"r":u=-s.data.width/2;break}return u&&(l+=n?u:-u),u=0,l},JKe=(t,e)=>t.getNode(e).data.width||0,QKe=(t,e)=>{const{ranksep:n=0}=e,r=dv(t);let i=0;r==null||r.forEach(a=>{const o=a.map(l=>t.getNode(l).data.height),s=Math.max(...o,0);a==null||a.forEach(l=>{t.getNode(l).data.y=i+s/2}),i+=s+n})},eJe=(t,e)=>{const{align:n,nodesep:r=0,edgesep:i=0}=e,a=dv(t),o=Object.assign($Ke(t,a),VKe(t,a)),s={};let l=[];["u","d"].forEach(c=>{l=c==="u"?a:Object.values(a).reverse(),["l","r"].forEach(f=>{f==="r"&&(l=l.map(g=>Object.values(g).reverse()));const d=(c==="u"?t.getPredecessors:t.getSuccessors).bind(t),h=GKe(t,l,o,d),p=HKe(t,l,h.root,h.align,r,i,f==="r");f==="r"&&Object.keys(p).forEach(g=>p[g]=-p[g]),s[c+f]=p})});const u=UKe(t,s);return u&&XKe(s,u),ZKe(s,n)},tJe=(t,e)=>{var n;const r=Fue(t);QKe(r,e);const i=eJe(r,e);(n=Object.keys(i))===null||n===void 0||n.forEach(a=>{r.getNode(a).data.x=i[a]})},Hue=t=>{const e={},n=r=>{var i;const a=t.getNode(r);if(!a)return 0;if(e[r])return a.data.rank;e[r]=!0;let o;return(i=t.getRelatedEdges(r,"out"))===null||i===void 0||i.forEach(s=>{const l=n(s.target),u=s.data.minlen,c=l-u;c&&(o===void 0||c<o)&&(o=c)}),o||(o=0),a.data.rank=o,o};t.getAllNodes().filter(r=>t.getRelatedEdges(r.id,"in").length===0).forEach(r=>n(r.id))},nJe=t=>{const e={};let n;const r=o=>{var s;const l=t.getNode(o);if(!l)return 0;if(e[o])return l.data.rank;e[o]=!0;let u;return(s=t.getRelatedEdges(o,"out"))===null||s===void 0||s.forEach(c=>{const f=r(c.target),d=c.data.minlen,h=f-d;h&&(u===void 0||h<u)&&(u=h)}),u||(u=0),(n===void 0||u<n)&&(n=u),l.data.rank=u,u};t.getAllNodes().filter(o=>t.getRelatedEdges(o.id,"in").length===0).forEach(o=>{o&&r(o.id)}),n===void 0&&(n=0);const i={},a=(o,s)=>{var l;const u=t.getNode(o),c=isNaN(u.data.layer)?s:u.data.layer;(u.data.rank===void 0||u.data.rank<c)&&(u.data.rank=c),!i[o]&&(i[o]=!0,(l=t.getRelatedEdges(o,"out"))===null||l===void 0||l.forEach(f=>{a(f.target,c+f.data.minlen)}))};t.getAllNodes().forEach(o=>{const s=o.data;s&&(isNaN(s.layer)?s.rank-=n:a(o.id,s.layer))})},Oc=(t,e)=>t.getNode(e.target).data.rank-t.getNode(e.source).data.rank-e.data.minlen,rJe=t=>{const e=new xi({tree:[]}),n=t.getAllNodes()[0],r=t.getAllNodes().length;e.addNode(n);let i,a;for(;iJe(e,t)<r;)i=Yue(e,t),a=e.hasNode(i.source)?Oc(t,i):-Oc(t,i),Uue(e,t,a);return e},iJe=(t,e)=>{const n=r=>{e.getRelatedEdges(r,"both").forEach(i=>{const a=i.source,o=r===a?i.target:a;!t.hasNode(o)&&!Oc(e,i)&&(t.addNode({id:o,data:{}}),t.addEdge({id:i.id,source:r,target:o,data:{}}),n(o))})};return t.getAllNodes().forEach(r=>n(r.id)),t.getAllNodes().length},aJe=t=>{const e=new xi({tree:[]}),n=t.getAllNodes()[0],r=t.getAllNodes().length;e.addNode(n);let i,a;for(;oJe(e,t)<r;)i=Yue(e,t),a=e.hasNode(i.source)?Oc(t,i):-Oc(t,i),Uue(e,t,a);return e},oJe=(t,e)=>{const n=r=>{var i;(i=e.getRelatedEdges(r,"both"))===null||i===void 0||i.forEach(a=>{const o=a.source,s=r===o?a.target:o;!t.hasNode(s)&&(e.getNode(s).data.layer!==void 0||!Oc(e,a))&&(t.addNode({id:s,data:{}}),t.addEdge({id:a.id,source:r,target:s,data:{}}),n(s))})};return t.getAllNodes().forEach(r=>n(r.id)),t.getAllNodes().length},Yue=(t,e)=>v4(e.getAllEdges(),n=>t.hasNode(n.source)!==t.hasNode(n.target)?Oc(e,n):1/0),Uue=(t,e,n)=>{t.getAllNodes().forEach(r=>{const i=e.getNode(r.id);i.data.rank||(i.data.rank=0),i.data.rank+=n})},sJe=t=>{const e=oKe(t);Hue(e);const n=rJe(e);Zue(n),Xue(n,e);let r,i;for(;r=cJe(n);)i=fJe(n,e,r),dJe(n,e,r,i)},Xue=(t,e)=>{let n=Bue(t,t.getAllNodes(),"post");n=n.slice(0,(n==null?void 0:n.length)-1),n.forEach(r=>{lJe(t,e,r)})},lJe=(t,e,n)=>{const i=t.getNode(n).data.parent,a=t.getRelatedEdges(n,"both").find(o=>o.target===i||o.source===i);a.data.cutvalue=uJe(t,e,n)},uJe=(t,e,n)=>{const i=t.getNode(n).data.parent;let a=!0,o=e.getRelatedEdges(n,"out").find(l=>l.target===i),s=0;return o||(a=!1,o=e.getRelatedEdges(i,"out").find(l=>l.target===n)),s=o.data.weight,e.getRelatedEdges(n,"both").forEach(l=>{const u=l.source===n,c=u?l.target:l.source;if(c!==i){const f=u===a,d=l.data.weight;if(s+=f?d:-d,pJe(t,n,c)){const h=t.getRelatedEdges(n,"both").find(p=>p.source===c||p.target===c).data.cutvalue;s+=f?-h:h}}}),s},Zue=(t,e=t.getAllNodes()[0].id)=>{Kue(t,{},1,e)},Kue=(t,e,n,r,i)=>{var a;const o=n;let s=n;const l=t.getNode(r);return e[r]=!0,(a=t.getNeighbors(r))===null||a===void 0||a.forEach(u=>{e[u.id]||(s=Kue(t,e,s,u.id,r))}),l.data.low=o,l.data.lim=s++,i?l.data.parent=i:delete l.data.parent,s},cJe=t=>t.getAllEdges().find(e=>e.data.cutvalue<0),fJe=(t,e,n)=>{let r=n.source,i=n.target;e.getRelatedEdges(r,"out").find(c=>c.target===i)||(r=n.target,i=n.source);const a=t.getNode(r),o=t.getNode(i);let s=a,l=!1;a.data.lim>o.data.lim&&(s=o,l=!0);const u=e.getAllEdges().filter(c=>l===I$(t.getNode(c.source),s)&&l!==I$(t.getNode(c.target),s));return v4(u,c=>Oc(e,c))},dJe=(t,e,n,r)=>{const i=t.getRelatedEdges(n.source,"both").find(a=>a.source===n.target||a.target===n.target);i&&t.removeEdge(i.id),t.addEdge({id:`e${Math.random()}`,source:r.source,target:r.target,data:{}}),Zue(t),Xue(t,e),hJe(t,e)},hJe=(t,e)=>{const n=t.getAllNodes().find(i=>!i.data.parent);let r=Bue(t,n,"pre");r=r.slice(1),r.forEach(i=>{const a=t.getNode(i).data.parent;let o=e.getRelatedEdges(i,"out").find(l=>l.target===a),s=!1;!o&&e.hasNode(a)&&(o=e.getRelatedEdges(a,"out").find(l=>l.target===i),s=!0),e.getNode(i).data.rank=(e.hasNode(a)&&e.getNode(a).data.rank||0)+(s?o==null?void 0:o.data.minlen:-(o==null?void 0:o.data.minlen))})},pJe=(t,e,n)=>t.getRelatedEdges(e,"both").find(r=>r.source===n||r.target===n),I$=(t,e)=>e.data.low<=t.data.lim&&t.data.lim<=e.data.lim,gJe=(t,e)=>{switch(e){case"network-simplex":mJe(t);break;case"tight-tree":L$(t);break;case"longest-path":vJe(t);break;default:L$(t)}},vJe=Hue,L$=t=>{nJe(t),aJe(t)},mJe=t=>{sJe(t)},yJe=(t,e)=>{const{edgeLabelSpace:n,keepNodeOrder:r,prevGraph:i,rankdir:a,ranksep:o}=e;!r&&i&&xJe(t,i);const s=kJe(t);n&&(e.ranksep=AJe(s,{rankdir:a,ranksep:o}));let l;try{l=bJe(s,e)}catch(u){if(u.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,u);return}throw u}return wJe(t,s),l},bJe=(t,e)=>{const{acyclicer:n,ranker:r,rankdir:i="tb",nodeOrder:a,keepNodeOrder:o,align:s,nodesep:l=50,edgesep:u=20,ranksep:c=50}=e;NJe(t),nKe(t,n);const{nestingRoot:f,nodeRankFactor:d}=vKe(t);gJe(Fue(t),r),TJe(t),uKe(t,d),bKe(t,f),lKe(t),MJe(t),CJe(t);const h=[];wKe(t,h),BKe(t,h),fKe(t),o&&FKe(t,a),NKe(t,o),FJe(t),dKe(t,i),tJe(t,{align:s,nodesep:l,edgesep:u,ranksep:c}),zJe(t),RJe(t),SKe(t,h),IJe(t),hKe(t,i);const{width:p,height:g}=PJe(t);return DJe(t),LJe(t),iKe(t),{width:p,height:g}},xJe=(t,e)=>{t.getAllNodes().forEach(n=>{const r=t.getNode(n.id);if(e.hasNode(n.id)){const i=e.getNode(n.id);r.data.fixorder=i.data._order,delete i.data._order}else delete r.data.fixorder})},wJe=(t,e)=>{t.getAllNodes().forEach(n=>{var r;const i=t.getNode(n.id);if(i){const a=e.getNode(n.id);i.data.x=a.data.x,i.data.y=a.data.y,i.data._order=a.data.order,i.data._rank=a.data.rank,!((r=e.getChildren(n.id))===null||r===void 0)&&r.length&&(i.data.width=a.data.width,i.data.height=a.data.height)}}),t.getAllEdges().forEach(n=>{const r=t.getEdge(n.id),i=e.getEdge(n.id);r.data.points=i?i.data.points:[],i&&i.data.hasOwnProperty("x")&&(r.data.x=i.data.x,r.data.y=i.data.y)})},_Je=["width","height","layer","fixorder"],SJe={width:0,height:0},EJe=["minlen","weight","width","height","labeloffset"],OJe={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},zO=["labelpos"],kJe=t=>{const e=new xi({tree:[]});return t.getAllNodes().forEach(n=>{const r=N$(t.getNode(n.id).data),i=Object.assign(Object.assign({},SJe),r),a=R$(i,_Je);e.hasNode(n.id)||e.addNode({id:n.id,data:Object.assign({},a)});const o=t.hasTreeStructure("combo")?t.getParent(n.id,"combo"):t.getParent(n.id);lt(o)||(e.hasNode(o.id)||e.addNode(Object.assign({},o)),e.setParent(n.id,o.id))}),t.getAllEdges().forEach(n=>{const r=N$(t.getEdge(n.id).data),i={};zO==null||zO.forEach(a=>{r[a]!==void 0&&(i[a]=r[a])}),e.addEdge({id:n.id,source:n.source,target:n.target,data:Object.assign({},OJe,R$(r,EJe),i)})}),e},AJe=(t,e)=>{const{ranksep:n=0,rankdir:r}=e;return t.getAllNodes().forEach(i=>{isNaN(i.data.layer)||i.data.layer||(i.data.layer=0)}),t.getAllEdges().forEach(i=>{var a;i.data.minlen*=2,((a=i.data.labelpos)===null||a===void 0?void 0:a.toLowerCase())!=="c"&&(r==="TB"||r==="BT"?i.data.width+=i.data.labeloffset:i.data.height+=i.data.labeloffset)}),n/2},TJe=t=>{t.getAllEdges().forEach(e=>{if(e.data.width&&e.data.height){const n=t.getNode(e.source),r=t.getNode(e.target),i={e,rank:(r.data.rank-n.data.rank)/2+n.data.rank};Pp(t,"edge-proxy",i,"_ep")}})},MJe=t=>{let e=0;return t.getAllNodes().forEach(n=>{var r,i;n.data.borderTop&&(n.data.minRank=(r=t.getNode(n.data.borderTop))===null||r===void 0?void 0:r.data.rank,n.data.maxRank=(i=t.getNode(n.data.borderBottom))===null||i===void 0?void 0:i.data.rank,e=Math.max(e,n.data.maxRank||-1/0))}),e},CJe=t=>{t.getAllNodes().forEach(e=>{e.data.dummy==="edge-proxy"&&(t.getEdge(e.data.e.id).data.labelRank=e.data.rank,t.removeNode(e.id))})},PJe=(t,e)=>{let n,r=0,i,a=0;const{marginx:o=0,marginy:s=0}={},l=u=>{if(!u.data)return;const c=u.data.x,f=u.data.y,d=u.data.width,h=u.data.height;!isNaN(c)&&!isNaN(d)&&(n===void 0&&(n=c-d/2),n=Math.min(n,c-d/2),r=Math.max(r,c+d/2)),!isNaN(f)&&!isNaN(h)&&(i===void 0&&(i=f-h/2),i=Math.min(i,f-h/2),a=Math.max(a,f+h/2))};return t.getAllNodes().forEach(u=>{l(u)}),t.getAllEdges().forEach(u=>{u!=null&&u.data.hasOwnProperty("x")&&l(u)}),n-=o,i-=s,t.getAllNodes().forEach(u=>{u.data.x-=n,u.data.y-=i}),t.getAllEdges().forEach(u=>{var c;(c=u.data.points)===null||c===void 0||c.forEach(f=>{f.x-=n,f.y-=i}),u.data.hasOwnProperty("x")&&(u.data.x-=n),u.data.hasOwnProperty("y")&&(u.data.y-=i)}),{width:r-n+o,height:a-i+s}},DJe=t=>{t.getAllEdges().forEach(e=>{const n=t.getNode(e.source),r=t.getNode(e.target);let i,a;e.data.points?(i=e.data.points[0],a=e.data.points[e.data.points.length-1]):(e.data.points=[],i={x:r.data.x,y:r.data.y},a={x:n.data.x,y:n.data.y}),e.data.points.unshift(E$(n.data,i)),e.data.points.push(E$(r.data,a))})},IJe=t=>{t.getAllEdges().forEach(e=>{if(e.data.hasOwnProperty("x"))switch((e.data.labelpos==="l"||e.data.labelpos==="r")&&(e.data.width-=e.data.labeloffset),e.data.labelpos){case"l":e.data.x-=e.data.width/2+e.data.labeloffset;break;case"r":e.data.x+=e.data.width/2+e.data.labeloffset;break}})},LJe=t=>{t.getAllEdges().forEach(e=>{var n;e.data.reversed&&((n=e.data.points)===null||n===void 0||n.reverse())})},RJe=t=>{t.getAllNodes().forEach(e=>{var n,r,i;if(!((n=t.getChildren(e.id))===null||n===void 0)&&n.length){const a=t.getNode(e.id),o=t.getNode(a.data.borderTop),s=t.getNode(a.data.borderBottom),l=t.getNode(a.data.borderLeft[((r=a.data.borderLeft)===null||r===void 0?void 0:r.length)-1]),u=t.getNode(a.data.borderRight[((i=a.data.borderRight)===null||i===void 0?void 0:i.length)-1]);a.data.width=Math.abs((u==null?void 0:u.data.x)-(l==null?void 0:l.data.x))||10,a.data.height=Math.abs((s==null?void 0:s.data.y)-(o==null?void 0:o.data.y))||10,a.data.x=((l==null?void 0:l.data.x)||0)+a.data.width/2,a.data.y=((o==null?void 0:o.data.y)||0)+a.data.height/2}}),t.getAllNodes().forEach(e=>{e.data.dummy==="border"&&t.removeNode(e.id)})},NJe=t=>{t.getAllEdges().forEach(e=>{if(e.source===e.target){const n=t.getNode(e.source);n.data.selfEdges||(n.data.selfEdges=[]),n.data.selfEdges.push(e),t.removeEdge(e.id)}})},FJe=t=>{const e=dv(t);e==null||e.forEach(n=>{let r=0;n==null||n.forEach((i,a)=>{var o;const s=t.getNode(i);s.data.order=a+r,(o=s.data.selfEdges)===null||o===void 0||o.forEach(l=>{Pp(t,"selfedge",{width:l.data.width,height:l.data.height,rank:s.data.rank,order:a+ ++r,e:l},"_se")}),delete s.data.selfEdges})})},zJe=t=>{t.getAllNodes().forEach(e=>{const n=t.getNode(e.id);if(n.data.dummy==="selfedge"){const r=t.getNode(n.data.e.source),i=r.data.x+r.data.width/2,a=r.data.y,o=n.data.x-i,s=r.data.height/2;t.hasEdge(n.data.e.id)?t.updateEdgeData(n.data.e.id,n.data.e.data):t.addEdge({id:n.data.e.id,source:n.data.e.source,target:n.data.e.target,data:n.data.e.data}),t.removeNode(e.id),n.data.e.data.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{y:a,x:i+o},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],n.data.e.data.x=n.data.x,n.data.e.data.y=n.data.y}})},R$=(t,e)=>{const n={};return e==null||e.forEach(r=>{t[r]!==void 0&&(n[r]=+t[r])}),n},N$=(t={})=>{const e={};return Object.keys(t).forEach(n=>{e[n.toLowerCase()]=t[n]}),e},Hl=Array.isArray,Jue=t=>{const e=[],n=t.length;for(let r=0;r<n;r+=1){e[r]=[];for(let i=0;i<n;i+=1)r===i?e[r][i]=0:t[r][i]===0||!t[r][i]?e[r][i]=1/0:e[r][i]=t[r][i]}for(let r=0;r<n;r+=1)for(let i=0;i<n;i+=1)for(let a=0;a<n;a+=1)e[i][a]>e[i][r]+e[r][a]&&(e[i][a]=e[i][r]+e[r][a]);return e},Que=(t,e)=>{const{nodes:n,edges:r}=t,i=[],a={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((o,s)=>{a[o.id]=s;const l=[];i.push(l)}),r==null||r.forEach(o=>{const{source:s,target:l}=o,u=a[s],c=a[l];u===void 0||c===void 0||(i[u][c]=1,i[c][u]=1)}),i},jJe=(t,e)=>{const n=[];return t.forEach(r=>{const i=[];r.forEach(a=>{i.push(a*e)}),n.push(i)}),n},BJe=t=>{let e=1/0,n=1/0,r=-1/0,i=-1/0;return t.forEach(a=>{let o=a.data.size;Hl(o)?o.length===1&&(o=[o[0],o[0]]):je(o)?o=[o,o]:(o===void 0||isNaN(o))&&(o=[30,30]);const s=[o[0]/2,o[1]/2],l=a.data.x-s[0],u=a.data.x+s[0],c=a.data.y-s[1],f=a.data.y+s[1];e>l&&(e=l),n>c&&(n=c),r<u&&(r=u),i<f&&(i=f)}),{minX:e,minY:n,maxX:r,maxY:i}},F$=(t,e)=>Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)),vD=(t,e,n,r="TB",i,a={})=>{if(!(e!=null&&e.length))return;const{stopBranchFn:o,stopAllFn:s}=a;for(let l=0;l<e.length;l++){const u=e[l];if(t.hasNode(u.id)&&!(o!=null&&o(u))){if(s!=null&&s(u))return;r==="TB"&&n(u),vD(t,t.getChildren(u.id,i),n,r,i,a),r!=="TB"&&n(u)}}},mD=t=>{if(t===null)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){const e=[];return t.forEach(n=>{e.push(n)}),e.map(n=>mD(n))}if(typeof t=="object"){const e={};return Object.keys(t).forEach(n=>{e[n]=mD(t[n])}),e}return t},to=(t,e)=>{const n=mD(t);return n.data=n.data||{},e&&(je(n.data.x)||(n.data.x=Math.random()*e[0]),je(n.data.y)||(n.data.y=Math.random()*e[1])),n};function fm(t){if(!t)return[0,0,0];if(je(t))return[t,t,t];if(t.length===0)return[0,0,0];const[e,n=e,r=e]=t;return[e,n,r]}function Cf(t,e){let n;return Ue(e)?n=e:je(e)?n=()=>e:n=()=>t,n}function m4(t,e,n=!0){return!e&&e!==0?r=>{const{size:i}=r.data||{};return i?Array.isArray(i)?n?Math.max(...i)||t:i:jr(i)&&i.width&&i.height?n?Math.max(i.width,i.height)||t:[i.width,i.height]:i:t}:Ue(e)?e:je(e)?()=>e:Array.isArray(e)?()=>n?Math.max(...e)||t:e:jr(e)&&e.width&&e.height?()=>n?Math.max(e.width,e.height)||t:[e.width,e.height]:()=>t}const y4=(t,e,n=10)=>{let r;const i=typeof e=="function"?e:()=>e||0;return t?Array.isArray(t)?r=o=>t:Ue(t)?r=t:r=o=>t:r=o=>{var s,l,u;if(!((s=o.data)===null||s===void 0)&&s.bboxSize)return(l=o.data)===null||l===void 0?void 0:l.bboxSize;if(!((u=o.data)===null||u===void 0)&&u.size){const c=o.data.size;return Array.isArray(c)?c:jr(c)?[c.width,c.height]:c}return n},o=>{const s=r(o),l=i(o);return Math.max(...fm(s))+l}},$Je={rankdir:"TB",nodesep:50,ranksep:50,edgeLabelSpace:!0,ranker:"tight-tree",controlPoints:!1,radial:!1,focusNode:null};class VJe{constructor(e={}){this.options=e,this.id="antv-dagre",this.options=Object.assign(Object.assign({},$Je),e)}execute(e,n){return zt(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,e,n)})}assign(e,n){return zt(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,e,n)})}genericDagreLayout(e,n,r){return zt(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{nodeSize:a,align:o,rankdir:s="TB",ranksep:l,nodesep:u,ranksepFunc:c,nodesepFunc:f,edgeLabelSpace:d,ranker:h,nodeOrder:p,begin:g,controlPoints:v,radial:m,sortByCombo:y,preset:b}=i,x=new xi({tree:[]}),w=Cf(l||50,c),_=Cf(u||50,f);let E=_,S=w;(s==="LR"||s==="RL")&&(E=w,S=_);const O=m4(10,a,!1),A=n.getAllNodes(),T=n.getAllEdges();A.forEach(L=>{const B=fm(O(L)),$=S(L),G=E(L),W=B[0]+2*G,U=B[1]+2*$,Y=L.data.layer;je(Y)?x.addNode({id:L.id,data:{width:W,height:U,layer:Y}}):x.addNode({id:L.id,data:{width:W,height:U}})}),y&&(x.attachTreeStructure("combo"),A.forEach(L=>{const{parentId:B}=L.data;B!==void 0&&x.hasNode(B)&&x.setParent(L.id,B,"combo")})),T.forEach(L=>{x.addEdge({id:L.id,source:L.source,target:L.target,data:{weight:L.data.weight||1}})});let I;b!=null&&b.length&&(I=new xi({nodes:b})),yJe(x,{prevGraph:I,edgeLabelSpace:d,keepNodeOrder:!!p,nodeOrder:p||[],acyclicer:"greedy",ranker:h,rankdir:s,nodesep:u,align:o});const D=[0,0];if(g){let L=1/0,B=1/0;x.getAllNodes().forEach($=>{L>$.data.x&&(L=$.data.x),B>$.data.y&&(B=$.data.y)}),x.getAllEdges().forEach($=>{var G;(G=$.data.points)===null||G===void 0||G.forEach(W=>{L>W.x&&(L=W.x),B>W.y&&(B=W.y)})}),D[0]=g[0]-L,D[1]=g[1]-B}const R=s==="LR"||s==="RL";if(!m){const L=new Set,$=s==="BT"||s==="RL"?(Y,q)=>q-Y:(Y,q)=>Y-q;x.getAllNodes().forEach(Y=>{Y.data.x=Y.data.x+D[0],Y.data.y=Y.data.y+D[1],L.add(R?Y.data.x:Y.data.y)});const G=Array.from(L).sort($),W=R?(Y,q)=>Y.x!==q.x:(Y,q)=>Y.y!==q.y,U=R?(Y,q,K)=>{const J=Math.max(q.y,K.y),Q=Math.min(q.y,K.y);return Y.filter(se=>se.y<=J&&se.y>=Q)}:(Y,q,K)=>{const J=Math.max(q.x,K.x),Q=Math.min(q.x,K.x);return Y.filter(se=>se.x<=J&&se.x>=Q)};x.getAllEdges().forEach((Y,q)=>{var K;d&&v&&Y.data.type!=="loop"&&(Y.data.controlPoints=qJe((K=Y.data.points)===null||K===void 0?void 0:K.map(({x:J,y:Q})=>({x:J+D[0],y:Q+D[1]})),x.getNode(Y.source),x.getNode(Y.target),G,R,W,U))})}let F=[];F=x.getAllNodes().map(L=>to(L));const z=x.getAllEdges();return e&&(F.forEach(L=>{n.mergeNodeData(L.id,{x:L.data.x,y:L.data.y})}),z.forEach(L=>{n.mergeEdgeData(L.id,{controlPoints:L.data.controlPoints})})),{nodes:F,edges:z}})}}const qJe=(t,e,n,r,i,a,o)=>{let s=(t==null?void 0:t.slice(1,t.length-1))||[];if(e&&n){let{x:l,y:u}=e.data,{x:c,y:f}=n.data;if(i&&(l=e.data.y,u=e.data.x,c=n.data.y,f=n.data.x),f!==u&&l!==c){const d=r.indexOf(u),h=r[d+1];if(h){const v=s[0],m=i?{x:(u+h)/2,y:(v==null?void 0:v.y)||c}:{x:(v==null?void 0:v.x)||c,y:(u+h)/2};(!v||a(v,m))&&s.unshift(m)}const p=r.indexOf(f),g=Math.abs(p-d);if(g===1)s=o(s,e.data,n.data),s.length||s.push(i?{x:(u+f)/2,y:l}:{x:l,y:(u+f)/2});else if(g>1){const v=r[p-1];if(v){const m=s[s.length-1],y=i?{x:(f+v)/2,y:(m==null?void 0:m.y)||c}:{x:(m==null?void 0:m.x)||l,y:(f+v)/2};(!m||a(m,y))&&s.push(y)}}}}return s},vd=(t,e,n)=>{const r=t.getAllNodes(),i=t.getAllEdges();if(!(r!=null&&r.length))return{nodes:[],edges:i};if(r.length===1)return e&&t.mergeNodeData(r[0].id,{x:n[0],y:n[1]}),{nodes:[Object.assign(Object.assign({},r[0]),{data:Object.assign(Object.assign({},r[0].data),{x:n[0],y:n[1]})})],edges:i}},WJe={radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1};class GJe{constructor(e={}){this.options=e,this.id="circular",this.options=Object.assign(Object.assign({},WJe),e)}execute(e,n){return zt(this,void 0,void 0,function*(){return this.genericCircularLayout(!1,e,n)})}assign(e,n){return zt(this,void 0,void 0,function*(){yield this.genericCircularLayout(!0,e,n)})}genericCircularLayout(e,n,r){return zt(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{width:a,height:o,center:s,divisions:l,startAngle:u=0,endAngle:c=2*Math.PI,angleRatio:f,ordering:d,clockwise:h,nodeSpacing:p,nodeSize:g}=i,v=n.getAllNodes(),m=n.getAllEdges(),[y,b,x]=YJe(a,o,s),w=v==null?void 0:v.length;if(!w||w===1)return vd(n,e,x);const _=(c-u)/w;let{radius:E,startRadius:S,endRadius:O}=i;if(p){const R=Cf(10,p),F=m4(10,g);let z=-1/0;v.forEach(L=>{const B=F(L);z<B&&(z=B)});let N=0;v.forEach((L,B)=>{B===0?N+=z||10:N+=(R(L)||0)+(z||10)}),E=N/(2*Math.PI)}else!E&&!S&&!O?E=Math.min(b,y)/2:!S&&O?S=O:S&&!O&&(O=S);const A=_*f;let T=[];d==="topology"?T=z$(n,v):d==="topology-directed"?T=z$(n,v,!0):d==="degree"?T=HJe(n,v):T=v.map(R=>to(R));const I=Math.ceil(w/l);for(let R=0;R<w;++R){let F=E;!F&&S!==null&&O!==null&&(F=S+R*(O-S)/(w-1)),F||(F=10+R*100/(w-1));let z=u+R%I*A+2*Math.PI/l*Math.floor(R/I);h||(z=c-R%I*A-2*Math.PI/l*Math.floor(R/I)),T[R].data.x=x[0]+Math.cos(z)*F,T[R].data.y=x[1]+Math.sin(z)*F}return e&&T.forEach(R=>{n.mergeNodeData(R.id,{x:R.data.x,y:R.data.y})}),{nodes:T,edges:m}})}}const z$=(t,e,n=!1)=>{const r=[to(e[0])],i={},a=e.length;i[e[0].id]=!0;let o=0;return e.forEach((s,l)=>{if(l!==0)if((l===a-1||t.getDegree(s.id,"both")!==t.getDegree(e[l+1].id,"both")||t.areNeighbors(r[o].id,s.id))&&!i[s.id])r.push(to(s)),i[s.id]=!0,o++;else{const u=n?t.getSuccessors(r[o].id):t.getNeighbors(r[o].id);let c=!1;for(let d=0;d<u.length;d++){const h=u[d];if(t.getDegree(h.id)===t.getDegree(s.id)&&!i[h.id]){r.push(to(h)),i[h.id]=!0,c=!0;break}}let f=0;for(;!c&&(i[e[f].id]||(r.push(to(e[f])),i[e[f].id]=!0,c=!0),f++,f!==a););}}),r};function HJe(t,e){const n=[];return e.forEach((r,i)=>{n.push(to(r))}),n.sort((r,i)=>t.getDegree(r.id,"both")-t.getDegree(i.id,"both")),n}const YJe=(t,e,n)=>{let r=t,i=e,a=n;return!r&&typeof window<"u"&&(r=window.innerWidth),!i&&typeof window<"u"&&(i=window.innerHeight),a||(a=[r/2,i/2]),[r,i,a]},UJe={nodeSize:30,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"};class yD{constructor(e={}){this.options=e,this.id="concentric",this.options=Object.assign(Object.assign({},UJe),e)}execute(e,n){return zt(this,void 0,void 0,function*(){return this.genericConcentricLayout(!1,e,n)})}assign(e,n){return zt(this,void 0,void 0,function*(){yield this.genericConcentricLayout(!0,e,n)})}genericConcentricLayout(e,n,r){return zt(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{center:a,width:o,height:s,sortBy:l,maxLevelDiff:u,sweep:c,clockwise:f,equidistant:d,preventOverlap:h,startAngle:p=3/2*Math.PI,nodeSize:g,nodeSpacing:v}=i,m=n.getAllNodes(),y=n.getAllEdges(),b=!o&&typeof window<"u"?window.innerWidth:o,x=!s&&typeof window<"u"?window.innerHeight:s,w=a||[b/2,x/2];if(!(m!=null&&m.length)||m.length===1)return vd(n,e,w);const _=[];let E,S=0;Hl(g)?E=Math.max(g[0],g[1]):Ue(g)?(E=-1/0,m.forEach(L=>{const B=Math.max(...fm(g(L)));B>E&&(E=B)})):E=g,Hl(v)?S=Math.max(v[0],v[1]):je(v)&&(S=v),m.forEach(L=>{const B=to(L);_.push(B);let $=E;const{data:G}=B;Hl(G.size)?$=Math.max(G.size[0],G.size[1]):je(G.size)?$=G.size:jr(G.size)&&($=Math.max(G.size.width,G.size.height)),E=Math.max(E,$),Ue(v)&&(S=Math.max(v(L),S))});const O={};_.forEach((L,B)=>{O[L.id]=B});let A=l;(!an(A)||_[0].data[A]===void 0)&&(A="degree"),A==="degree"?_.sort((L,B)=>n.getDegree(B.id,"both")-n.getDegree(L.id,"both")):_.sort((L,B)=>B.data[A]-L.data[A]);const T=_[0],I=(u||(A==="degree"?n.getDegree(T.id,"both"):T.data[A]))/4,D=[{nodes:[]}];let R=D[0];_.forEach(L=>{if(R.nodes.length>0){const B=Math.abs(A==="degree"?n.getDegree(R.nodes[0].id,"both")-n.getDegree(L.id,"both"):R.nodes[0].data[A]-L.data[A]);I&&B>=I&&(R={nodes:[]},D.push(R))}R.nodes.push(L)});let F=E+S;if(!h){const L=D.length>0&&D[0].nodes.length>1,$=(Math.min(b,x)/2-F)/(D.length+(L?1:0));F=Math.min(F,$)}let z=0;if(D.forEach(L=>{const B=c===void 0?2*Math.PI-2*Math.PI/L.nodes.length:c;if(L.dTheta=B/Math.max(1,L.nodes.length-1),L.nodes.length>1&&h){const $=Math.cos(L.dTheta)-Math.cos(0),G=Math.sin(L.dTheta)-Math.sin(0),W=Math.sqrt(F*F/($*$+G*G));z=Math.max(W,z)}L.r=z,z+=F}),d){let L=0,B=0;for(let $=0;$<D.length;$++){const W=(D[$].r||0)-B;L=Math.max(L,W)}B=0,D.forEach(($,G)=>{G===0&&(B=$.r||0),$.r=B,B+=L})}return D.forEach(L=>{const B=L.dTheta||0,$=L.r||0;L.nodes.forEach((G,W)=>{const U=p+(f?1:-1)*B*W;G.data.x=w[0]+$*Math.cos(U),G.data.y=w[1]+$*Math.sin(U)})}),e&&_.forEach(L=>n.mergeNodeData(L.id,{x:L.data.x,y:L.data.y})),{nodes:_,edges:y}})}}function XJe(t){const e=+this._x.call(null,t),n=+this._y.call(null,t),r=+this._z.call(null,t);return ece(this.cover(e,n,r),e,n,r,t)}function ece(t,e,n,r,i){if(isNaN(e)||isNaN(n)||isNaN(r))return t;var a,o=t._root,s={data:i},l=t._x0,u=t._y0,c=t._z0,f=t._x1,d=t._y1,h=t._z1,p,g,v,m,y,b,x,w,_,E,S;if(!o)return t._root=s,t;for(;o.length;)if((x=e>=(p=(l+f)/2))?l=p:f=p,(w=n>=(g=(u+d)/2))?u=g:d=g,(_=r>=(v=(c+h)/2))?c=v:h=v,a=o,!(o=o[E=_<<2|w<<1|x]))return a[E]=s,t;if(m=+t._x.call(null,o.data),y=+t._y.call(null,o.data),b=+t._z.call(null,o.data),e===m&&n===y&&r===b)return s.next=o,a?a[E]=s:t._root=s,t;do a=a?a[E]=new Array(8):t._root=new Array(8),(x=e>=(p=(l+f)/2))?l=p:f=p,(w=n>=(g=(u+d)/2))?u=g:d=g,(_=r>=(v=(c+h)/2))?c=v:h=v;while((E=_<<2|w<<1|x)===(S=(b>=v)<<2|(y>=g)<<1|m>=p));return a[S]=o,a[E]=s,t}function ZJe(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e),r=new Float64Array(e),i=new Float64Array(e);let a=1/0,o=1/0,s=1/0,l=-1/0,u=-1/0,c=-1/0;for(let f=0,d,h,p,g;f<e;++f)isNaN(h=+this._x.call(null,d=t[f]))||isNaN(p=+this._y.call(null,d))||isNaN(g=+this._z.call(null,d))||(n[f]=h,r[f]=p,i[f]=g,h<a&&(a=h),h>l&&(l=h),p<o&&(o=p),p>u&&(u=p),g<s&&(s=g),g>c&&(c=g));if(a>l||o>u||s>c)return this;this.cover(a,o,s).cover(l,u,c);for(let f=0;f<e;++f)ece(this,n[f],r[f],i[f],t[f]);return this}function KJe(t,e,n){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,a=this._z0,o=this._x1,s=this._y1,l=this._z1;if(isNaN(r))o=(r=Math.floor(t))+1,s=(i=Math.floor(e))+1,l=(a=Math.floor(n))+1;else{for(var u=o-r||1,c=this._root,f,d;r>t||t>=o||i>e||e>=s||a>n||n>=l;)switch(d=(n<a)<<2|(e<i)<<1|t<r,f=new Array(8),f[d]=c,c=f,u*=2,d){case 0:o=r+u,s=i+u,l=a+u;break;case 1:r=o-u,s=i+u,l=a+u;break;case 2:o=r+u,i=s-u,l=a+u;break;case 3:r=o-u,i=s-u,l=a+u;break;case 4:o=r+u,s=i+u,a=l-u;break;case 5:r=o-u,s=i+u,a=l-u;break;case 6:o=r+u,i=s-u,a=l-u;break;case 7:r=o-u,i=s-u,a=l-u;break}this._root&&this._root.length&&(this._root=c)}return this._x0=r,this._y0=i,this._z0=a,this._x1=o,this._y1=s,this._z1=l,this}function JJe(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function QJe(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Wn(t,e,n,r,i,a,o){this.node=t,this.x0=e,this.y0=n,this.z0=r,this.x1=i,this.y1=a,this.z1=o}function eQe(t,e,n,r){var i,a=this._x0,o=this._y0,s=this._z0,l,u,c,f,d,h,p=this._x1,g=this._y1,v=this._z1,m=[],y=this._root,b,x;for(y&&m.push(new Wn(y,a,o,s,p,g,v)),r==null?r=1/0:(a=t-r,o=e-r,s=n-r,p=t+r,g=e+r,v=n+r,r*=r);b=m.pop();)if(!(!(y=b.node)||(l=b.x0)>p||(u=b.y0)>g||(c=b.z0)>v||(f=b.x1)<a||(d=b.y1)<o||(h=b.z1)<s))if(y.length){var w=(l+f)/2,_=(u+d)/2,E=(c+h)/2;m.push(new Wn(y[7],w,_,E,f,d,h),new Wn(y[6],l,_,E,w,d,h),new Wn(y[5],w,u,E,f,_,h),new Wn(y[4],l,u,E,w,_,h),new Wn(y[3],w,_,c,f,d,E),new Wn(y[2],l,_,c,w,d,E),new Wn(y[1],w,u,c,f,_,E),new Wn(y[0],l,u,c,w,_,E)),(x=(n>=E)<<2|(e>=_)<<1|t>=w)&&(b=m[m.length-1],m[m.length-1]=m[m.length-1-x],m[m.length-1-x]=b)}else{var S=t-+this._x.call(null,y.data),O=e-+this._y.call(null,y.data),A=n-+this._z.call(null,y.data),T=S*S+O*O+A*A;if(T<r){var I=Math.sqrt(r=T);a=t-I,o=e-I,s=n-I,p=t+I,g=e+I,v=n+I,i=y.data}}return i}const tQe=(t,e,n,r,i,a)=>Math.sqrt((t-r)**2+(e-i)**2+(n-a)**2);function nQe(t,e,n,r){const i=[],a=t-r,o=e-r,s=n-r,l=t+r,u=e+r,c=n+r;return this.visit((f,d,h,p,g,v,m)=>{if(!f.length)do{const y=f.data;tQe(t,e,n,this._x(y),this._y(y),this._z(y))<=r&&i.push(y)}while(f=f.next);return d>l||h>u||p>c||g<a||v<o||m<s}),i}function rQe(t){if(isNaN(d=+this._x.call(null,t))||isNaN(h=+this._y.call(null,t))||isNaN(p=+this._z.call(null,t)))return this;var e,n=this._root,r,i,a,o=this._x0,s=this._y0,l=this._z0,u=this._x1,c=this._y1,f=this._z1,d,h,p,g,v,m,y,b,x,w,_;if(!n)return this;if(n.length)for(;;){if((y=d>=(g=(o+u)/2))?o=g:u=g,(b=h>=(v=(s+c)/2))?s=v:c=v,(x=p>=(m=(l+f)/2))?l=m:f=m,e=n,!(n=n[w=x<<2|b<<1|y]))return this;if(!n.length)break;(e[w+1&7]||e[w+2&7]||e[w+3&7]||e[w+4&7]||e[w+5&7]||e[w+6&7]||e[w+7&7])&&(r=e,_=w)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):e?(a?e[w]=a:delete e[w],(n=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&n===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[_]=n:this._root=n),this):(this._root=a,this)}function iQe(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function aQe(){return this._root}function oQe(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function sQe(t){var e=[],n,r=this._root,i,a,o,s,l,u,c;for(r&&e.push(new Wn(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();)if(!t(r=n.node,a=n.x0,o=n.y0,s=n.z0,l=n.x1,u=n.y1,c=n.z1)&&r.length){var f=(a+l)/2,d=(o+u)/2,h=(s+c)/2;(i=r[7])&&e.push(new Wn(i,f,d,h,l,u,c)),(i=r[6])&&e.push(new Wn(i,a,d,h,f,u,c)),(i=r[5])&&e.push(new Wn(i,f,o,h,l,d,c)),(i=r[4])&&e.push(new Wn(i,a,o,h,f,d,c)),(i=r[3])&&e.push(new Wn(i,f,d,s,l,u,h)),(i=r[2])&&e.push(new Wn(i,a,d,s,f,u,h)),(i=r[1])&&e.push(new Wn(i,f,o,s,l,d,h)),(i=r[0])&&e.push(new Wn(i,a,o,s,f,d,h))}return this}function lQe(t){var e=[],n=[],r;for(this._root&&e.push(new Wn(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();){var i=r.node;if(i.length){var a,o=r.x0,s=r.y0,l=r.z0,u=r.x1,c=r.y1,f=r.z1,d=(o+u)/2,h=(s+c)/2,p=(l+f)/2;(a=i[0])&&e.push(new Wn(a,o,s,l,d,h,p)),(a=i[1])&&e.push(new Wn(a,d,s,l,u,h,p)),(a=i[2])&&e.push(new Wn(a,o,h,l,d,c,p)),(a=i[3])&&e.push(new Wn(a,d,h,l,u,c,p)),(a=i[4])&&e.push(new Wn(a,o,s,p,d,h,f)),(a=i[5])&&e.push(new Wn(a,d,s,p,u,h,f)),(a=i[6])&&e.push(new Wn(a,o,h,p,d,c,f)),(a=i[7])&&e.push(new Wn(a,d,h,p,u,c,f))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function uQe(t){return t[0]}function cQe(t){return arguments.length?(this._x=t,this):this._x}function fQe(t){return t[1]}function dQe(t){return arguments.length?(this._y=t,this):this._y}function hQe(t){return t[2]}function pQe(t){return arguments.length?(this._z=t,this):this._z}function tce(t,e,n,r){var i=new b4(e??uQe,n??fQe,r??hQe,NaN,NaN,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function b4(t,e,n,r,i,a,o,s,l){this._x=t,this._y=e,this._z=n,this._x0=r,this._y0=i,this._z0=a,this._x1=o,this._y1=s,this._z1=l,this._root=void 0}function j$(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Ui=tce.prototype=b4.prototype;Ui.copy=function(){var t=new b4(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=j$(e),t;for(n=[{source:e,target:t._root=new Array(8)}];e=n.pop();)for(var i=0;i<8;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(8)}):e.target[i]=j$(r));return t};Ui.add=XJe;Ui.addAll=ZJe;Ui.cover=KJe;Ui.data=JJe;Ui.extent=QJe;Ui.find=eQe;Ui.findAllWithinRadius=nQe;Ui.remove=rQe;Ui.removeAll=iQe;Ui.root=aQe;Ui.size=oQe;Ui.visit=sQe;Ui.visitAfter=lQe;Ui.x=cQe;Ui.y=dQe;Ui.z=pQe;const gQe=.81,jO=.1;function vQe(t,e,n,r,i=2){const a=e/n,o=t.getAllNodes(),s=o.map((c,f)=>{const{nodeStrength:d,x:h,y:p,z:g,size:v}=c.data;return{x:h,y:p,z:g,size:v,index:f,id:c.id,vx:0,vy:0,vz:0,weight:a*d}}),l=(i===2?K2(s,c=>c.x,c=>c.y):tce(s,c=>c.x,c=>c.y,c=>c.z)).visitAfter(mQe),u=new Map;return s.forEach(c=>{u.set(c.id,c),bQe(c,l,i)}),s.map((c,f)=>{const{id:d,data:h}=o[f],{mass:p=1}=h;r[d]={x:c.vx/p,y:c.vy/p,z:c.vz/p}}),r}function mQe(t){let e=0,n=0,r=0,i=0,a=0;const o=t.length;if(o){for(let s=0;s<o;s++){const l=t[s];l&&l.weight&&(e+=l.weight,n+=l.x*l.weight,r+=l.y*l.weight,i+=l.z*l.weight,a+=l.size*l.weight)}t.x=n/e,t.y=r/e,t.z=i/e,t.size=a/e,t.weight=e}else{const s=t;t.x=s.data.x,t.y=s.data.y,t.z=s.data.z,t.size=s.data.size,t.weight=s.data.weight}}const yQe=(t,e,n,r,i,a,o)=>{var s;if(((s=t.data)===null||s===void 0?void 0:s.id)===a.id)return;const l=[n,r,i][o-1],u=a.x-t.x||jO,c=a.y-t.y||jO,f=a.z-t.z||jO,d=[u,c,f],h=l-e;let p=0;for(let m=0;m<o;m++)p+=d[m]*d[m];const v=Math.sqrt(p)*p;if(h*h*gQe<p){const m=t.weight/v;return a.vx+=u*m,a.vy+=c*m,a.vz+=f*m,!0}if(t.length)return!1;if(t.data!==a){const m=t.data.weight/v;a.vx+=u*m,a.vy+=c*m,a.vz+=f*m}};function bQe(t,e,n){e.visit((r,i,a,o,s)=>yQe(r,i,a,o,s,t,n))}const xQe={dimensions:2,maxIteration:500,gravity:10,factor:1,edgeStrength:50,nodeStrength:1e3,coulombDisScale:.005,damping:.9,maxSpeed:200,minMovement:.4,interval:.02,linkDistance:200,clusterNodeStrength:20,preventOverlap:!0,distanceThresholdMode:"mean"};class nce{constructor(e={}){this.options=e,this.id="force",this.timeInterval=0,this.judgingDistance=0,this.running=!1,this.options=Object.assign(Object.assign({},xQe),e)}execute(e,n){return zt(this,void 0,void 0,function*(){return this.genericForceLayout(!1,e,n)})}assign(e,n){return zt(this,void 0,void 0,function*(){yield this.genericForceLayout(!0,e,n)})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval),this.running=!1}tick(e=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let r=0;(this.judgingDistance>this.lastOptions.minMovement||r<1)&&r<e;r++)this.runOneStep(this.lastCalcGraph,this.lastGraph,r,this.lastVelMap,this.lastOptions),this.updatePosition(this.lastGraph,this.lastCalcGraph,this.lastVelMap,this.lastOptions);const n={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&n.nodes.forEach(r=>this.lastGraph.mergeNodeData(r.id,{x:r.data.x,y:r.data.y,z:this.options.dimensions===3?r.data.z:void 0})),n}genericForceLayout(e,n,r){return zt(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),a=n.getAllNodes(),o=n.getAllEdges(),s=this.formatOptions(i,n),{dimensions:l,width:u,height:c,nodeSize:f,getMass:d,nodeStrength:h,edgeStrength:p,linkDistance:g}=s,v=a.map((S,O)=>Object.assign(Object.assign({},S),{data:Object.assign(Object.assign({},S.data),{x:je(S.data.x)?S.data.x:Math.random()*u,y:je(S.data.y)?S.data.y:Math.random()*c,z:je(S.data.z)?S.data.z:Math.random()*Math.sqrt(u*c),size:f(S)||30,mass:d(S),nodeStrength:h(S)})})),m=o.map(S=>Object.assign(Object.assign({},S),{data:Object.assign(Object.assign({},S.data),{edgeStrength:p(S),linkDistance:g(S,n.getNode(S.source),n.getNode(S.target))})}));if(!(a!=null&&a.length))return this.lastResult={nodes:[],edges:o},{nodes:[],edges:o};const y={};a.forEach((S,O)=>{y[S.id]={x:0,y:0,z:0}});const b=new xi({nodes:v,edges:m});this.formatCentripetal(s,b);const{maxIteration:x,minMovement:w,onTick:_}=s;if(this.lastLayoutNodes=v,this.lastLayoutEdges=m,this.lastAssign=e,this.lastGraph=n,this.lastCalcGraph=b,this.lastOptions=s,this.lastVelMap=y,typeof window>"u")return;let E=0;return new Promise(S=>{this.timeInterval=window.setInterval(()=>{(!a||!this.running)&&S({nodes:BO(n,v),edges:o}),this.runOneStep(b,n,E,y,s),this.updatePosition(n,b,y,s),e&&v.forEach(O=>n.mergeNodeData(O.id,{x:O.data.x,y:O.data.y,z:l===3?O.data.z:void 0})),_==null||_({nodes:BO(n,v),edges:o}),E++,(E>=x||this.judgingDistance<w)&&(window.clearInterval(this.timeInterval),S({nodes:BO(n,v),edges:o}))},0),this.running=!0})})}formatOptions(e,n){const r=Object.assign({},e),{width:i,height:a,getMass:o}=e;r.width=!i&&typeof window<"u"?window.innerWidth:i,r.height=!a&&typeof window<"u"?window.innerHeight:a,e.center||(r.center=[r.width/2,r.height/2]),o||(r.getMass=l=>{let u=1;je(l==null?void 0:l.data.mass)&&(u=l==null?void 0:l.data.mass);const c=n.getDegree(l.id,"both");return!c||c<5?u:c*5*u}),r.nodeSize=y4(e.nodeSize,e.nodeSpacing);const s=e.linkDistance?Cf(1,e.linkDistance):l=>1+r.nodeSize(n.getNode(l.source))+r.nodeSize(n.getNode(l.target));return r.linkDistance=s,r.nodeStrength=Cf(1,e.nodeStrength),r.edgeStrength=Cf(1,e.edgeStrength),r}formatCentripetal(e,n){const{dimensions:r,centripetalOptions:i,center:a,clusterNodeStrength:o,leafCluster:s,clustering:l,nodeClusterBy:u}=e,c=n.getAllNodes(),f=i||{leaf:2,single:2,others:1,center:m=>({x:a[0],y:a[1],z:r===3?a[2]:void 0})};typeof o!="function"&&(e.clusterNodeStrength=m=>o);let d,h;if(s&&u&&(d=B$(n,u),h=Array.from(new Set(c==null?void 0:c.map(m=>m.data[u])))||[],e.centripetalOptions=Object.assign(f,{single:100,leaf:m=>{const{siblingLeaves:y,sameTypeLeaves:b}=d[m.id]||{};return(b==null?void 0:b.length)===(y==null?void 0:y.length)||(h==null?void 0:h.length)===1?1:e.clusterNodeStrength(m)},others:1,center:m=>{const y=n.getDegree(m.id,"both");if(!y)return{x:100,y:100,z:0};let b;if(y===1){const{sameTypeLeaves:x=[]}=d[m.id]||{};x.length===1?b=void 0:x.length>1&&(b=$$(x))}else b=void 0;return{x:b==null?void 0:b.x,y:b==null?void 0:b.y,z:b==null?void 0:b.z}}})),l&&u){d||(d=B$(n,u)),h||(h=Array.from(new Set(c.map(y=>y.data[u])))),h=h.filter(y=>y!==void 0);const m={};h.forEach(y=>{const b=c.filter(x=>x.data[u]===y).map(x=>n.getNode(x.id));m[y]=$$(b)}),e.centripetalOptions=Object.assign(f,{single:y=>e.clusterNodeStrength(y),leaf:y=>e.clusterNodeStrength(y),others:y=>e.clusterNodeStrength(y),center:y=>{const b=m[y.data[u]];return{x:b==null?void 0:b.x,y:b==null?void 0:b.y,z:b==null?void 0:b.z}}})}const{leaf:p,single:g,others:v}=e.centripetalOptions||{};p&&typeof p!="function"&&(e.centripetalOptions.leaf=()=>p),g&&typeof g!="function"&&(e.centripetalOptions.single=()=>g),v&&typeof v!="function"&&(e.centripetalOptions.others=()=>v)}runOneStep(e,n,r,i,a){const o={},s=e.getAllNodes(),l=e.getAllEdges();if(!(s!=null&&s.length))return;const{monitor:u}=a;if(this.calRepulsive(e,o,a),l&&this.calAttractive(e,o,a),this.calGravity(e,n,o,a),this.updateVelocity(e,o,i,a),u){const c=this.calTotalEnergy(o,s);u({energy:c,nodes:n.getAllNodes(),edges:n.getAllEdges(),iterations:r})}}calTotalEnergy(e,n){if(!(n!=null&&n.length))return 0;let r=0;return n.forEach((i,a)=>{const o=e[i.id].x,s=e[i.id].y,l=this.options.dimensions===3?e[i.id].z:0,u=o*o+s*s+l*l,{mass:c=1}=i.data;r+=c*u*.5}),r}calRepulsive(e,n,r){const{dimensions:i,factor:a,coulombDisScale:o}=r;vQe(e,a,o*o,n,i)}calAttractive(e,n,r){const{dimensions:i,nodeSize:a}=r;e.getAllEdges().forEach((o,s)=>{const{source:l,target:u}=o,c=e.getNode(l),f=e.getNode(u);if(!c||!f)return;let d=f.data.x-c.data.x,h=f.data.y-c.data.y,p=i===3?f.data.z-c.data.z:0;!d&&!h&&(d=Math.random()*.01,h=Math.random()*.01,i===3&&!p&&(p=Math.random()*.01));const g=Math.sqrt(d*d+h*h+p*p);if(g<a(c)+a(f))return;const v=d/g,m=h/g,y=p/g,{linkDistance:b=200,edgeStrength:x=200}=o.data||{},_=(b-g)*x,E=c.data.mass||1,S=f.data.mass||1,O=1/E,A=1/S,T=v*_,I=m*_,D=y*_;n[l].x-=T*O,n[l].y-=I*O,n[l].z-=D*O,n[u].x+=T*A,n[u].y+=I*A,n[u].z+=D*A})}calGravity(e,n,r,i){const{getCenter:a}=i,o=e.getAllNodes(),s=n.getAllNodes(),l=n.getAllEdges(),{width:u,height:c,center:f,gravity:d,centripetalOptions:h}=i;o&&o.forEach(p=>{const{id:g,data:v}=p,{mass:m,x:y,y:b,z:x}=v,w=n.getNode(g);let _=0,E=0,S=0,O=d;const A=e.getDegree(g,"in"),T=e.getDegree(g,"out"),I=e.getDegree(g,"both"),D=a==null?void 0:a(w,I);if(D){const[R,F,z]=D;_=y-R,E=b-F,O=z}else _=y-f[0],E=b-f[1],S=x-f[2];if(O&&(r[g].x-=O*_/m,r[g].y-=O*E/m,r[g].z-=O*S/m),h){const{leaf:R,single:F,others:z,center:N}=h,{x:L,y:B,z:$,centerStrength:G}=(N==null?void 0:N(w,s,l,u,c))||{x:0,y:0,z:0,centerStrength:0};if(!je(L)||!je(B))return;const W=(y-L)/m,U=(b-B)/m,Y=(x-$)/m;if(G&&(r[g].x-=G*W,r[g].y-=G*U,r[g].z-=G*Y),I===0){const K=F(w);if(!K)return;r[g].x-=K*W,r[g].y-=K*U,r[g].z-=K*Y;return}if(A===0||T===0){const K=R(w,s,l);if(!K)return;r[g].x-=K*W,r[g].y-=K*U,r[g].z-=K*Y;return}const q=z(w);if(!q)return;r[g].x-=q*W,r[g].y-=q*U,r[g].z-=q*Y}})}updateVelocity(e,n,r,i){const{damping:a,maxSpeed:o,interval:s,dimensions:l}=i,u=e.getAllNodes();u!=null&&u.length&&u.forEach(c=>{const{id:f}=c;let d=(r[f].x+n[f].x*s)*a||.01,h=(r[f].y+n[f].y*s)*a||.01,p=l===3?(r[f].z+n[f].z*s)*a||.01:0;const g=Math.sqrt(d*d+h*h+p*p);if(g>o){const v=o/g;d=v*d,h=v*h,p=v*p}r[f]={x:d,y:h,z:p}})}updatePosition(e,n,r,i){const{distanceThresholdMode:a,interval:o,dimensions:s}=i,l=n.getAllNodes();if(!(l!=null&&l.length)){this.judgingDistance=0;return}let u=0;a==="max"?this.judgingDistance=-1/0:a==="min"&&(this.judgingDistance=1/0),l.forEach(c=>{const{id:f}=c,d=e.getNode(f);if(je(d.data.fx)&&je(d.data.fy)){n.mergeNodeData(f,{x:d.data.fx,y:d.data.fy,z:s===3?d.data.fz:void 0});return}const h=r[f].x*o,p=r[f].y*o,g=s===3?r[f].z*o:0;n.mergeNodeData(f,{x:c.data.x+h,y:c.data.y+p,z:c.data.z+g});const v=Math.sqrt(h*h+p*p+g*g);switch(a){case"max":this.judgingDistance<v&&(this.judgingDistance=v);break;case"min":this.judgingDistance>v&&(this.judgingDistance=v);break;default:u=u+v;break}}),(!a||a==="mean")&&(this.judgingDistance=u/l.length)}}const B$=(t,e)=>{const n=t.getAllNodes();if(!(n!=null&&n.length))return{};const r={};return n.forEach((i,a)=>{t.getDegree(i.id,"both")===1&&(r[i.id]=wQe(t,"leaf",i,e))}),r},wQe=(t,e,n,r)=>{const i=t.getDegree(n.id,"in"),a=t.getDegree(n.id,"out");let o=n,s=[];i===0?(o=t.getSuccessors(n.id)[0],s=t.getNeighbors(o.id)):a===0&&(o=t.getPredecessors(n.id)[0],s=t.getNeighbors(o.id)),s=s.filter(u=>t.getDegree(u.id,"in")===0||t.getDegree(u.id,"out")===0);const l=_Qe(t,e,r,n,s);return{coreNode:o,siblingLeaves:s,sameTypeLeaves:l}},_Qe=(t,e,n,r,i)=>{const a=r.data[n]||"";let o=(i==null?void 0:i.filter(s=>s.data[n]===a))||[];return o=o.filter(s=>t.getDegree(s.id,"in")===0||t.getDegree(s.id,"out")===0),o},$$=t=>{const e={x:0,y:0};t.forEach(r=>{const{x:i,y:a}=r.data;e.x+=i||0,e.y+=a||0});const n=t.length||1;return{x:e.x/n,y:e.y/n}},BO=(t,e)=>e.map(n=>{const{id:r,data:i}=n,a=t.getNode(r);return Object.assign(Object.assign({},a),{data:Object.assign(Object.assign({},a.data),{x:i.x,y:i.y,z:i.z})})});var Vt={};const SQe=Object.prototype.toString;function hv(t){const e=SQe.call(t);return e.endsWith("Array]")&&!e.includes("Big")}const EQe=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray:hv},Symbol.toStringTag,{value:"Module"})),OQe=lU(EQe);function kQe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!hv(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var n=e.fromIndex,r=n===void 0?0:n,i=e.toIndex,a=i===void 0?t.length:i;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[r],s=r+1;s<a;s++)t[s]>o&&(o=t[s]);return o}function AQe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!hv(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var n=e.fromIndex,r=n===void 0?0:n,i=e.toIndex,a=i===void 0?t.length:i;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[r],s=r+1;s<a;s++)t[s]<o&&(o=t[s]);return o}function TQe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(hv(t)){if(t.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var n;if(e.output!==void 0){if(!hv(e.output))throw new TypeError("output option must be an array if specified");n=e.output}else n=new Array(t.length);var r=AQe(t),i=kQe(t);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=e.min,o=a===void 0?e.autoMinMax?r:0:a,s=e.max,l=s===void 0?e.autoMinMax?i:1:s;if(o>=l)throw new RangeError("min option must be smaller than max option");for(var u=(l-o)/(i-r),c=0;c<t.length;c++)n[c]=(t[c]-r)*u+o;return n}const MQe=Object.freeze(Object.defineProperty({__proto__:null,default:TQe},Symbol.toStringTag,{value:"Module"})),CQe=lU(MQe);var V$;function PQe(){var Bp,bD,Ki;if(V$)return Vt;V$=1,Object.defineProperty(Vt,"__esModule",{value:!0});var t=OQe,e=CQe;const n=" ".repeat(2),r=" ".repeat(4);function i(){return a(this)}function a(H,P={}){const{maxRows:M=15,maxColumns:k=10,maxNumSize:C=8,padMinus:j="auto"}=P;return`${H.constructor.name} {
${n}[
${r}${o(H,M,k,C,j)}
${n}]
${n}rows: ${H.rows}
${n}columns: ${H.columns}
}`}function o(H,P,M,k,C){const{rows:j,columns:X}=H,Z=Math.min(j,P),ee=Math.min(X,M),ne=[];if(C==="auto"){C=!1;e:for(let fe=0;fe<Z;fe++)for(let ie=0;ie<ee;ie++)if(H.get(fe,ie)<0){C=!0;break e}}for(let fe=0;fe<Z;fe++){let ie=[];for(let xe=0;xe<ee;xe++)ie.push(s(H.get(fe,xe),k,C));ne.push(`${ie.join(" ")}`)}return ee!==X&&(ne[ne.length-1]+=` ... ${X-M} more columns`),Z!==j&&ne.push(`... ${j-P} more rows`),ne.join(`
${r}`)}function s(H,P,M){return(H>=0&&M?` ${l(H,P-1)}`:l(H,P)).padEnd(P)}function l(H,P){let M=H.toString();if(M.length<=P)return M;let k=H.toFixed(P);if(k.length>P&&(k=H.toFixed(Math.max(0,P-(k.length-P)))),k.length<=P&&!k.startsWith("0.000")&&!k.startsWith("-0.000"))return k;let C=H.toExponential(P);return C.length>P&&(C=H.toExponential(Math.max(0,P-(C.length-P)))),C.slice(0)}function u(H,P){H.prototype.add=function(k){return typeof k=="number"?this.addS(k):this.addM(k)},H.prototype.addS=function(k){for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)+k);return this},H.prototype.addM=function(k){if(k=P.checkMatrix(k),this.rows!==k.rows||this.columns!==k.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)+k.get(C,j));return this},H.add=function(k,C){return new P(k).add(C)},H.prototype.sub=function(k){return typeof k=="number"?this.subS(k):this.subM(k)},H.prototype.subS=function(k){for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)-k);return this},H.prototype.subM=function(k){if(k=P.checkMatrix(k),this.rows!==k.rows||this.columns!==k.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)-k.get(C,j));return this},H.sub=function(k,C){return new P(k).sub(C)},H.prototype.subtract=H.prototype.sub,H.prototype.subtractS=H.prototype.subS,H.prototype.subtractM=H.prototype.subM,H.subtract=H.sub,H.prototype.mul=function(k){return typeof k=="number"?this.mulS(k):this.mulM(k)},H.prototype.mulS=function(k){for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)*k);return this},H.prototype.mulM=function(k){if(k=P.checkMatrix(k),this.rows!==k.rows||this.columns!==k.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)*k.get(C,j));return this},H.mul=function(k,C){return new P(k).mul(C)},H.prototype.multiply=H.prototype.mul,H.prototype.multiplyS=H.prototype.mulS,H.prototype.multiplyM=H.prototype.mulM,H.multiply=H.mul,H.prototype.div=function(k){return typeof k=="number"?this.divS(k):this.divM(k)},H.prototype.divS=function(k){for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)/k);return this},H.prototype.divM=function(k){if(k=P.checkMatrix(k),this.rows!==k.rows||this.columns!==k.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)/k.get(C,j));return this},H.div=function(k,C){return new P(k).div(C)},H.prototype.divide=H.prototype.div,H.prototype.divideS=H.prototype.divS,H.prototype.divideM=H.prototype.divM,H.divide=H.div,H.prototype.mod=function(k){return typeof k=="number"?this.modS(k):this.modM(k)},H.prototype.modS=function(k){for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)%k);return this},H.prototype.modM=function(k){if(k=P.checkMatrix(k),this.rows!==k.rows||this.columns!==k.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)%k.get(C,j));return this},H.mod=function(k,C){return new P(k).mod(C)},H.prototype.modulus=H.prototype.mod,H.prototype.modulusS=H.prototype.modS,H.prototype.modulusM=H.prototype.modM,H.modulus=H.mod,H.prototype.and=function(k){return typeof k=="number"?this.andS(k):this.andM(k)},H.prototype.andS=function(k){for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)&k);return this},H.prototype.andM=function(k){if(k=P.checkMatrix(k),this.rows!==k.rows||this.columns!==k.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)&k.get(C,j));return this},H.and=function(k,C){return new P(k).and(C)},H.prototype.or=function(k){return typeof k=="number"?this.orS(k):this.orM(k)},H.prototype.orS=function(k){for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)|k);return this},H.prototype.orM=function(k){if(k=P.checkMatrix(k),this.rows!==k.rows||this.columns!==k.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)|k.get(C,j));return this},H.or=function(k,C){return new P(k).or(C)},H.prototype.xor=function(k){return typeof k=="number"?this.xorS(k):this.xorM(k)},H.prototype.xorS=function(k){for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)^k);return this},H.prototype.xorM=function(k){if(k=P.checkMatrix(k),this.rows!==k.rows||this.columns!==k.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)^k.get(C,j));return this},H.xor=function(k,C){return new P(k).xor(C)},H.prototype.leftShift=function(k){return typeof k=="number"?this.leftShiftS(k):this.leftShiftM(k)},H.prototype.leftShiftS=function(k){for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)<<k);return this},H.prototype.leftShiftM=function(k){if(k=P.checkMatrix(k),this.rows!==k.rows||this.columns!==k.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)<<k.get(C,j));return this},H.leftShift=function(k,C){return new P(k).leftShift(C)},H.prototype.signPropagatingRightShift=function(k){return typeof k=="number"?this.signPropagatingRightShiftS(k):this.signPropagatingRightShiftM(k)},H.prototype.signPropagatingRightShiftS=function(k){for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)>>k);return this},H.prototype.signPropagatingRightShiftM=function(k){if(k=P.checkMatrix(k),this.rows!==k.rows||this.columns!==k.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)>>k.get(C,j));return this},H.signPropagatingRightShift=function(k,C){return new P(k).signPropagatingRightShift(C)},H.prototype.rightShift=function(k){return typeof k=="number"?this.rightShiftS(k):this.rightShiftM(k)},H.prototype.rightShiftS=function(k){for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)>>>k);return this},H.prototype.rightShiftM=function(k){if(k=P.checkMatrix(k),this.rows!==k.rows||this.columns!==k.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)>>>k.get(C,j));return this},H.rightShift=function(k,C){return new P(k).rightShift(C)},H.prototype.zeroFillRightShift=H.prototype.rightShift,H.prototype.zeroFillRightShiftS=H.prototype.rightShiftS,H.prototype.zeroFillRightShiftM=H.prototype.rightShiftM,H.zeroFillRightShift=H.rightShift,H.prototype.not=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,~this.get(k,C));return this},H.not=function(k){return new P(k).not()},H.prototype.abs=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.abs(this.get(k,C)));return this},H.abs=function(k){return new P(k).abs()},H.prototype.acos=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.acos(this.get(k,C)));return this},H.acos=function(k){return new P(k).acos()},H.prototype.acosh=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.acosh(this.get(k,C)));return this},H.acosh=function(k){return new P(k).acosh()},H.prototype.asin=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.asin(this.get(k,C)));return this},H.asin=function(k){return new P(k).asin()},H.prototype.asinh=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.asinh(this.get(k,C)));return this},H.asinh=function(k){return new P(k).asinh()},H.prototype.atan=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.atan(this.get(k,C)));return this},H.atan=function(k){return new P(k).atan()},H.prototype.atanh=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.atanh(this.get(k,C)));return this},H.atanh=function(k){return new P(k).atanh()},H.prototype.cbrt=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.cbrt(this.get(k,C)));return this},H.cbrt=function(k){return new P(k).cbrt()},H.prototype.ceil=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.ceil(this.get(k,C)));return this},H.ceil=function(k){return new P(k).ceil()},H.prototype.clz32=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.clz32(this.get(k,C)));return this},H.clz32=function(k){return new P(k).clz32()},H.prototype.cos=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.cos(this.get(k,C)));return this},H.cos=function(k){return new P(k).cos()},H.prototype.cosh=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.cosh(this.get(k,C)));return this},H.cosh=function(k){return new P(k).cosh()},H.prototype.exp=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.exp(this.get(k,C)));return this},H.exp=function(k){return new P(k).exp()},H.prototype.expm1=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.expm1(this.get(k,C)));return this},H.expm1=function(k){return new P(k).expm1()},H.prototype.floor=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.floor(this.get(k,C)));return this},H.floor=function(k){return new P(k).floor()},H.prototype.fround=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.fround(this.get(k,C)));return this},H.fround=function(k){return new P(k).fround()},H.prototype.log=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.log(this.get(k,C)));return this},H.log=function(k){return new P(k).log()},H.prototype.log1p=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.log1p(this.get(k,C)));return this},H.log1p=function(k){return new P(k).log1p()},H.prototype.log10=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.log10(this.get(k,C)));return this},H.log10=function(k){return new P(k).log10()},H.prototype.log2=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.log2(this.get(k,C)));return this},H.log2=function(k){return new P(k).log2()},H.prototype.round=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.round(this.get(k,C)));return this},H.round=function(k){return new P(k).round()},H.prototype.sign=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.sign(this.get(k,C)));return this},H.sign=function(k){return new P(k).sign()},H.prototype.sin=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.sin(this.get(k,C)));return this},H.sin=function(k){return new P(k).sin()},H.prototype.sinh=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.sinh(this.get(k,C)));return this},H.sinh=function(k){return new P(k).sinh()},H.prototype.sqrt=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.sqrt(this.get(k,C)));return this},H.sqrt=function(k){return new P(k).sqrt()},H.prototype.tan=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.tan(this.get(k,C)));return this},H.tan=function(k){return new P(k).tan()},H.prototype.tanh=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.tanh(this.get(k,C)));return this},H.tanh=function(k){return new P(k).tanh()},H.prototype.trunc=function(){for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.set(k,C,Math.trunc(this.get(k,C)));return this},H.trunc=function(k){return new P(k).trunc()},H.pow=function(k,C){return new P(k).pow(C)},H.prototype.pow=function(k){return typeof k=="number"?this.powS(k):this.powM(k)},H.prototype.powS=function(k){for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)**k);return this},H.prototype.powM=function(k){if(k=P.checkMatrix(k),this.rows!==k.rows||this.columns!==k.columns)throw new RangeError("Matrices dimensions must be equal");for(let C=0;C<this.rows;C++)for(let j=0;j<this.columns;j++)this.set(C,j,this.get(C,j)**k.get(C,j));return this}}function c(H,P,M){let k=M?H.rows:H.rows-1;if(P<0||P>k)throw new RangeError("Row index out of range")}function f(H,P,M){let k=M?H.columns:H.columns-1;if(P<0||P>k)throw new RangeError("Column index out of range")}function d(H,P){if(P.to1DArray&&(P=P.to1DArray()),P.length!==H.columns)throw new RangeError("vector size must be the same as the number of columns");return P}function h(H,P){if(P.to1DArray&&(P=P.to1DArray()),P.length!==H.rows)throw new RangeError("vector size must be the same as the number of rows");return P}function p(H,P){if(!t.isAnyArray(P))throw new TypeError("row indices must be an array");for(let M=0;M<P.length;M++)if(P[M]<0||P[M]>=H.rows)throw new RangeError("row indices are out of range")}function g(H,P){if(!t.isAnyArray(P))throw new TypeError("column indices must be an array");for(let M=0;M<P.length;M++)if(P[M]<0||P[M]>=H.columns)throw new RangeError("column indices are out of range")}function v(H,P,M,k,C){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(y("startRow",P),y("endRow",M),y("startColumn",k),y("endColumn",C),P>M||k>C||P<0||P>=H.rows||M<0||M>=H.rows||k<0||k>=H.columns||C<0||C>=H.columns)throw new RangeError("Submatrix indices are out of range")}function m(H,P=0){let M=[];for(let k=0;k<H;k++)M.push(P);return M}function y(H,P){if(typeof P!="number")throw new TypeError(`${H} must be a number`)}function b(H){if(H.isEmpty())throw new Error("Empty matrix has no elements to index")}function x(H){let P=m(H.rows);for(let M=0;M<H.rows;++M)for(let k=0;k<H.columns;++k)P[M]+=H.get(M,k);return P}function w(H){let P=m(H.columns);for(let M=0;M<H.rows;++M)for(let k=0;k<H.columns;++k)P[k]+=H.get(M,k);return P}function _(H){let P=0;for(let M=0;M<H.rows;M++)for(let k=0;k<H.columns;k++)P+=H.get(M,k);return P}function E(H){let P=m(H.rows,1);for(let M=0;M<H.rows;++M)for(let k=0;k<H.columns;++k)P[M]*=H.get(M,k);return P}function S(H){let P=m(H.columns,1);for(let M=0;M<H.rows;++M)for(let k=0;k<H.columns;++k)P[k]*=H.get(M,k);return P}function O(H){let P=1;for(let M=0;M<H.rows;M++)for(let k=0;k<H.columns;k++)P*=H.get(M,k);return P}function A(H,P,M){const k=H.rows,C=H.columns,j=[];for(let X=0;X<k;X++){let Z=0,ee=0,ne=0;for(let fe=0;fe<C;fe++)ne=H.get(X,fe)-M[X],Z+=ne,ee+=ne*ne;P?j.push((ee-Z*Z/C)/(C-1)):j.push((ee-Z*Z/C)/C)}return j}function T(H,P,M){const k=H.rows,C=H.columns,j=[];for(let X=0;X<C;X++){let Z=0,ee=0,ne=0;for(let fe=0;fe<k;fe++)ne=H.get(fe,X)-M[X],Z+=ne,ee+=ne*ne;P?j.push((ee-Z*Z/k)/(k-1)):j.push((ee-Z*Z/k)/k)}return j}function I(H,P,M){const k=H.rows,C=H.columns,j=k*C;let X=0,Z=0,ee=0;for(let ne=0;ne<k;ne++)for(let fe=0;fe<C;fe++)ee=H.get(ne,fe)-M,X+=ee,Z+=ee*ee;return P?(Z-X*X/j)/(j-1):(Z-X*X/j)/j}function D(H,P){for(let M=0;M<H.rows;M++)for(let k=0;k<H.columns;k++)H.set(M,k,H.get(M,k)-P[M])}function R(H,P){for(let M=0;M<H.rows;M++)for(let k=0;k<H.columns;k++)H.set(M,k,H.get(M,k)-P[k])}function F(H,P){for(let M=0;M<H.rows;M++)for(let k=0;k<H.columns;k++)H.set(M,k,H.get(M,k)-P)}function z(H){const P=[];for(let M=0;M<H.rows;M++){let k=0;for(let C=0;C<H.columns;C++)k+=H.get(M,C)**2/(H.columns-1);P.push(Math.sqrt(k))}return P}function N(H,P){for(let M=0;M<H.rows;M++)for(let k=0;k<H.columns;k++)H.set(M,k,H.get(M,k)/P[M])}function L(H){const P=[];for(let M=0;M<H.columns;M++){let k=0;for(let C=0;C<H.rows;C++)k+=H.get(C,M)**2/(H.rows-1);P.push(Math.sqrt(k))}return P}function B(H,P){for(let M=0;M<H.rows;M++)for(let k=0;k<H.columns;k++)H.set(M,k,H.get(M,k)/P[k])}function $(H){const P=H.size-1;let M=0;for(let k=0;k<H.columns;k++)for(let C=0;C<H.rows;C++)M+=H.get(C,k)**2/P;return Math.sqrt(M)}function G(H,P){for(let M=0;M<H.rows;M++)for(let k=0;k<H.columns;k++)H.set(M,k,H.get(M,k)/P)}class W{static from1DArray(P,M,k){if(P*M!==k.length)throw new RangeError("data length does not match given dimensions");let j=new q(P,M);for(let X=0;X<P;X++)for(let Z=0;Z<M;Z++)j.set(X,Z,k[X*M+Z]);return j}static rowVector(P){let M=new q(1,P.length);for(let k=0;k<P.length;k++)M.set(0,k,P[k]);return M}static columnVector(P){let M=new q(P.length,1);for(let k=0;k<P.length;k++)M.set(k,0,P[k]);return M}static zeros(P,M){return new q(P,M)}static ones(P,M){return new q(P,M).fill(1)}static rand(P,M,k={}){if(typeof k!="object")throw new TypeError("options must be an object");const{random:C=Math.random}=k;let j=new q(P,M);for(let X=0;X<P;X++)for(let Z=0;Z<M;Z++)j.set(X,Z,C());return j}static randInt(P,M,k={}){if(typeof k!="object")throw new TypeError("options must be an object");const{min:C=0,max:j=1e3,random:X=Math.random}=k;if(!Number.isInteger(C))throw new TypeError("min must be an integer");if(!Number.isInteger(j))throw new TypeError("max must be an integer");if(C>=j)throw new RangeError("min must be smaller than max");let Z=j-C,ee=new q(P,M);for(let ne=0;ne<P;ne++)for(let fe=0;fe<M;fe++){let ie=C+Math.round(X()*Z);ee.set(ne,fe,ie)}return ee}static eye(P,M,k){M===void 0&&(M=P),k===void 0&&(k=1);let C=Math.min(P,M),j=this.zeros(P,M);for(let X=0;X<C;X++)j.set(X,X,k);return j}static diag(P,M,k){let C=P.length;M===void 0&&(M=C),k===void 0&&(k=M);let j=Math.min(C,M,k),X=this.zeros(M,k);for(let Z=0;Z<j;Z++)X.set(Z,Z,P[Z]);return X}static min(P,M){P=this.checkMatrix(P),M=this.checkMatrix(M);let k=P.rows,C=P.columns,j=new q(k,C);for(let X=0;X<k;X++)for(let Z=0;Z<C;Z++)j.set(X,Z,Math.min(P.get(X,Z),M.get(X,Z)));return j}static max(P,M){P=this.checkMatrix(P),M=this.checkMatrix(M);let k=P.rows,C=P.columns,j=new this(k,C);for(let X=0;X<k;X++)for(let Z=0;Z<C;Z++)j.set(X,Z,Math.max(P.get(X,Z),M.get(X,Z)));return j}static checkMatrix(P){return W.isMatrix(P)?P:new q(P)}static isMatrix(P){return P!=null&&P.klass==="Matrix"}get size(){return this.rows*this.columns}apply(P){if(typeof P!="function")throw new TypeError("callback must be a function");for(let M=0;M<this.rows;M++)for(let k=0;k<this.columns;k++)P.call(this,M,k);return this}to1DArray(){let P=[];for(let M=0;M<this.rows;M++)for(let k=0;k<this.columns;k++)P.push(this.get(M,k));return P}to2DArray(){let P=[];for(let M=0;M<this.rows;M++){P.push([]);for(let k=0;k<this.columns;k++)P[M].push(this.get(M,k))}return P}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let P=0;P<this.rows;P++)for(let M=0;M<=P;M++)if(this.get(P,M)!==this.get(M,P))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let P=0;P<this.rows;P++)if(this.get(P,P)!==0)return!1;return!0}isEchelonForm(){let P=0,M=0,k=-1,C=!0,j=!1;for(;P<this.rows&&C;){for(M=0,j=!1;M<this.columns&&j===!1;)this.get(P,M)===0?M++:this.get(P,M)===1&&M>k?(j=!0,k=M):(C=!1,j=!0);P++}return C}isReducedEchelonForm(){let P=0,M=0,k=-1,C=!0,j=!1;for(;P<this.rows&&C;){for(M=0,j=!1;M<this.columns&&j===!1;)this.get(P,M)===0?M++:this.get(P,M)===1&&M>k?(j=!0,k=M):(C=!1,j=!0);for(let X=M+1;X<this.rows;X++)this.get(P,X)!==0&&(C=!1);P++}return C}echelonForm(){let P=this.clone(),M=0,k=0;for(;M<P.rows&&k<P.columns;){let C=M;for(let j=M;j<P.rows;j++)P.get(j,k)>P.get(C,k)&&(C=j);if(P.get(C,k)===0)k++;else{P.swapRows(M,C);let j=P.get(M,k);for(let X=k;X<P.columns;X++)P.set(M,X,P.get(M,X)/j);for(let X=M+1;X<P.rows;X++){let Z=P.get(X,k)/P.get(M,k);P.set(X,k,0);for(let ee=k+1;ee<P.columns;ee++)P.set(X,ee,P.get(X,ee)-P.get(M,ee)*Z)}M++,k++}}return P}reducedEchelonForm(){let P=this.echelonForm(),M=P.columns,k=P.rows,C=k-1;for(;C>=0;)if(P.maxRow(C)===0)C--;else{let j=0,X=!1;for(;j<k&&X===!1;)P.get(C,j)===1?X=!0:j++;for(let Z=0;Z<C;Z++){let ee=P.get(Z,j);for(let ne=j;ne<M;ne++){let fe=P.get(Z,ne)-ee*P.get(C,ne);P.set(Z,ne,fe)}}C--}return P}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(P={}){if(typeof P!="object")throw new TypeError("options must be an object");const{rows:M=1,columns:k=1}=P;if(!Number.isInteger(M)||M<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(k)||k<=0)throw new TypeError("columns must be a positive integer");let C=new q(this.rows*M,this.columns*k);for(let j=0;j<M;j++)for(let X=0;X<k;X++)C.setSubMatrix(this,this.rows*j,this.columns*X);return C}fill(P){for(let M=0;M<this.rows;M++)for(let k=0;k<this.columns;k++)this.set(M,k,P);return this}neg(){return this.mulS(-1)}getRow(P){c(this,P);let M=[];for(let k=0;k<this.columns;k++)M.push(this.get(P,k));return M}getRowVector(P){return q.rowVector(this.getRow(P))}setRow(P,M){c(this,P),M=d(this,M);for(let k=0;k<this.columns;k++)this.set(P,k,M[k]);return this}swapRows(P,M){c(this,P),c(this,M);for(let k=0;k<this.columns;k++){let C=this.get(P,k);this.set(P,k,this.get(M,k)),this.set(M,k,C)}return this}getColumn(P){f(this,P);let M=[];for(let k=0;k<this.rows;k++)M.push(this.get(k,P));return M}getColumnVector(P){return q.columnVector(this.getColumn(P))}setColumn(P,M){f(this,P),M=h(this,M);for(let k=0;k<this.rows;k++)this.set(k,P,M[k]);return this}swapColumns(P,M){f(this,P),f(this,M);for(let k=0;k<this.rows;k++){let C=this.get(k,P);this.set(k,P,this.get(k,M)),this.set(k,M,C)}return this}addRowVector(P){P=d(this,P);for(let M=0;M<this.rows;M++)for(let k=0;k<this.columns;k++)this.set(M,k,this.get(M,k)+P[k]);return this}subRowVector(P){P=d(this,P);for(let M=0;M<this.rows;M++)for(let k=0;k<this.columns;k++)this.set(M,k,this.get(M,k)-P[k]);return this}mulRowVector(P){P=d(this,P);for(let M=0;M<this.rows;M++)for(let k=0;k<this.columns;k++)this.set(M,k,this.get(M,k)*P[k]);return this}divRowVector(P){P=d(this,P);for(let M=0;M<this.rows;M++)for(let k=0;k<this.columns;k++)this.set(M,k,this.get(M,k)/P[k]);return this}addColumnVector(P){P=h(this,P);for(let M=0;M<this.rows;M++)for(let k=0;k<this.columns;k++)this.set(M,k,this.get(M,k)+P[M]);return this}subColumnVector(P){P=h(this,P);for(let M=0;M<this.rows;M++)for(let k=0;k<this.columns;k++)this.set(M,k,this.get(M,k)-P[M]);return this}mulColumnVector(P){P=h(this,P);for(let M=0;M<this.rows;M++)for(let k=0;k<this.columns;k++)this.set(M,k,this.get(M,k)*P[M]);return this}divColumnVector(P){P=h(this,P);for(let M=0;M<this.rows;M++)for(let k=0;k<this.columns;k++)this.set(M,k,this.get(M,k)/P[M]);return this}mulRow(P,M){c(this,P);for(let k=0;k<this.columns;k++)this.set(P,k,this.get(P,k)*M);return this}mulColumn(P,M){f(this,P);for(let k=0;k<this.rows;k++)this.set(k,P,this.get(k,P)*M);return this}max(P){if(this.isEmpty())return NaN;switch(P){case"row":{const M=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.get(k,C)>M[k]&&(M[k]=this.get(k,C));return M}case"column":{const M=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.get(k,C)>M[C]&&(M[C]=this.get(k,C));return M}case void 0:{let M=this.get(0,0);for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.get(k,C)>M&&(M=this.get(k,C));return M}default:throw new Error(`invalid option: ${P}`)}}maxIndex(){b(this);let P=this.get(0,0),M=[0,0];for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.get(k,C)>P&&(P=this.get(k,C),M[0]=k,M[1]=C);return M}min(P){if(this.isEmpty())return NaN;switch(P){case"row":{const M=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.get(k,C)<M[k]&&(M[k]=this.get(k,C));return M}case"column":{const M=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.get(k,C)<M[C]&&(M[C]=this.get(k,C));return M}case void 0:{let M=this.get(0,0);for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.get(k,C)<M&&(M=this.get(k,C));return M}default:throw new Error(`invalid option: ${P}`)}}minIndex(){b(this);let P=this.get(0,0),M=[0,0];for(let k=0;k<this.rows;k++)for(let C=0;C<this.columns;C++)this.get(k,C)<P&&(P=this.get(k,C),M[0]=k,M[1]=C);return M}maxRow(P){if(c(this,P),this.isEmpty())return NaN;let M=this.get(P,0);for(let k=1;k<this.columns;k++)this.get(P,k)>M&&(M=this.get(P,k));return M}maxRowIndex(P){c(this,P),b(this);let M=this.get(P,0),k=[P,0];for(let C=1;C<this.columns;C++)this.get(P,C)>M&&(M=this.get(P,C),k[1]=C);return k}minRow(P){if(c(this,P),this.isEmpty())return NaN;let M=this.get(P,0);for(let k=1;k<this.columns;k++)this.get(P,k)<M&&(M=this.get(P,k));return M}minRowIndex(P){c(this,P),b(this);let M=this.get(P,0),k=[P,0];for(let C=1;C<this.columns;C++)this.get(P,C)<M&&(M=this.get(P,C),k[1]=C);return k}maxColumn(P){if(f(this,P),this.isEmpty())return NaN;let M=this.get(0,P);for(let k=1;k<this.rows;k++)this.get(k,P)>M&&(M=this.get(k,P));return M}maxColumnIndex(P){f(this,P),b(this);let M=this.get(0,P),k=[0,P];for(let C=1;C<this.rows;C++)this.get(C,P)>M&&(M=this.get(C,P),k[0]=C);return k}minColumn(P){if(f(this,P),this.isEmpty())return NaN;let M=this.get(0,P);for(let k=1;k<this.rows;k++)this.get(k,P)<M&&(M=this.get(k,P));return M}minColumnIndex(P){f(this,P),b(this);let M=this.get(0,P),k=[0,P];for(let C=1;C<this.rows;C++)this.get(C,P)<M&&(M=this.get(C,P),k[0]=C);return k}diag(){let P=Math.min(this.rows,this.columns),M=[];for(let k=0;k<P;k++)M.push(this.get(k,k));return M}norm(P="frobenius"){switch(P){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${P}`)}}cumulativeSum(){let P=0;for(let M=0;M<this.rows;M++)for(let k=0;k<this.columns;k++)P+=this.get(M,k),this.set(M,k,P);return this}dot(P){W.isMatrix(P)&&(P=P.to1DArray());let M=this.to1DArray();if(M.length!==P.length)throw new RangeError("vectors do not have the same size");let k=0;for(let C=0;C<M.length;C++)k+=M[C]*P[C];return k}mmul(P){P=q.checkMatrix(P);let M=this.rows,k=this.columns,C=P.columns,j=new q(M,C),X=new Float64Array(k);for(let Z=0;Z<C;Z++){for(let ee=0;ee<k;ee++)X[ee]=P.get(ee,Z);for(let ee=0;ee<M;ee++){let ne=0;for(let fe=0;fe<k;fe++)ne+=this.get(ee,fe)*X[fe];j.set(ee,Z,ne)}}return j}mpow(P){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(P)||P<0)throw new RangeError("Exponent must be a non-negative integer");let M=q.eye(this.rows),k=this;for(let C=P;C>=1;C/=2)C&1&&(M=M.mmul(k)),k=k.mmul(k);return M}strassen2x2(P){P=q.checkMatrix(P);let M=new q(2,2);const k=this.get(0,0),C=P.get(0,0),j=this.get(0,1),X=P.get(0,1),Z=this.get(1,0),ee=P.get(1,0),ne=this.get(1,1),fe=P.get(1,1),ie=(k+ne)*(C+fe),xe=(Z+ne)*C,ze=k*(X-fe),ve=ne*(ee-C),Oe=(k+j)*fe,Xe=(Z-k)*(C+X),ae=(j-ne)*(ee+fe),Re=ie+ve-Oe+ae,Je=ze+Oe,Et=xe+ve,Tt=ie-xe+ze+Xe;return M.set(0,0,Re),M.set(0,1,Je),M.set(1,0,Et),M.set(1,1,Tt),M}strassen3x3(P){P=q.checkMatrix(P);let M=new q(3,3);const k=this.get(0,0),C=this.get(0,1),j=this.get(0,2),X=this.get(1,0),Z=this.get(1,1),ee=this.get(1,2),ne=this.get(2,0),fe=this.get(2,1),ie=this.get(2,2),xe=P.get(0,0),ze=P.get(0,1),ve=P.get(0,2),Oe=P.get(1,0),Xe=P.get(1,1),ae=P.get(1,2),Re=P.get(2,0),Je=P.get(2,1),Et=P.get(2,2),Tt=(k+C+j-X-Z-fe-ie)*Xe,hr=(k-X)*(-ze+Xe),ct=Z*(-xe+ze+Oe-Xe-ae-Re+Et),vt=(-k+X+Z)*(xe-ze+Xe),Vn=(X+Z)*(-xe+ze),le=k*xe,Pe=(-k+ne+fe)*(xe-ve+ae),Ze=(-k+ne)*(ve-ae),Ie=(ne+fe)*(-xe+ve),pr=(k+C+j-Z-ee-ne-fe)*ae,kn=fe*(-xe+ve+Oe-Xe-ae-Re+Je),tr=(-j+fe+ie)*(Xe+Re-Je),gr=(j-ie)*(Xe-Je),Ri=j*Re,Jo=(fe+ie)*(-Re+Je),fi=(-j+Z+ee)*(ae+Re-Et),Rs=(j-ee)*(ae-Et),Cl=(Z+ee)*(-Re+Et),Kt=C*Oe,Ni=ee*Je,Wa=X*ve,Ga=ne*ze,di=ie*Et,ude=le+Ri+Kt,cde=Tt+vt+Vn+le+tr+Ri+Jo,fde=le+Pe+Ie+pr+Ri+fi+Cl,dde=hr+ct+vt+le+Ri+fi+Rs,hde=hr+vt+Vn+le+Ni,pde=Ri+fi+Rs+Cl+Wa,gde=le+Pe+Ze+kn+tr+gr+Ri,vde=tr+gr+Ri+Jo+Ga,mde=le+Pe+Ze+Ie+di;return M.set(0,0,ude),M.set(0,1,cde),M.set(0,2,fde),M.set(1,0,dde),M.set(1,1,hde),M.set(1,2,pde),M.set(2,0,gde),M.set(2,1,vde),M.set(2,2,mde),M}mmulStrassen(P){P=q.checkMatrix(P);let M=this.clone(),k=M.rows,C=M.columns,j=P.rows,X=P.columns;C!==j&&console.warn(`Multiplying ${k} x ${C} and ${j} x ${X} matrix: dimensions do not match.`);function Z(ie,xe,ze){let ve=ie.rows,Oe=ie.columns;if(ve===xe&&Oe===ze)return ie;{let Xe=W.zeros(xe,ze);return Xe=Xe.setSubMatrix(ie,0,0),Xe}}let ee=Math.max(k,j),ne=Math.max(C,X);M=Z(M,ee,ne),P=Z(P,ee,ne);function fe(ie,xe,ze,ve){if(ze<=512||ve<=512)return ie.mmul(xe);ze%2===1&&ve%2===1?(ie=Z(ie,ze+1,ve+1),xe=Z(xe,ze+1,ve+1)):ze%2===1?(ie=Z(ie,ze+1,ve),xe=Z(xe,ze+1,ve)):ve%2===1&&(ie=Z(ie,ze,ve+1),xe=Z(xe,ze,ve+1));let Oe=parseInt(ie.rows/2,10),Xe=parseInt(ie.columns/2,10),ae=ie.subMatrix(0,Oe-1,0,Xe-1),Re=xe.subMatrix(0,Oe-1,0,Xe-1),Je=ie.subMatrix(0,Oe-1,Xe,ie.columns-1),Et=xe.subMatrix(0,Oe-1,Xe,xe.columns-1),Tt=ie.subMatrix(Oe,ie.rows-1,0,Xe-1),hr=xe.subMatrix(Oe,xe.rows-1,0,Xe-1),ct=ie.subMatrix(Oe,ie.rows-1,Xe,ie.columns-1),vt=xe.subMatrix(Oe,xe.rows-1,Xe,xe.columns-1),Vn=fe(W.add(ae,ct),W.add(Re,vt),Oe,Xe),le=fe(W.add(Tt,ct),Re,Oe,Xe),Pe=fe(ae,W.sub(Et,vt),Oe,Xe),Ze=fe(ct,W.sub(hr,Re),Oe,Xe),Ie=fe(W.add(ae,Je),vt,Oe,Xe),pr=fe(W.sub(Tt,ae),W.add(Re,Et),Oe,Xe),kn=fe(W.sub(Je,ct),W.add(hr,vt),Oe,Xe),tr=W.add(Vn,Ze);tr.sub(Ie),tr.add(kn);let gr=W.add(Pe,Ie),Ri=W.add(le,Ze),Jo=W.sub(Vn,le);Jo.add(Pe),Jo.add(pr);let fi=W.zeros(2*tr.rows,2*tr.columns);return fi=fi.setSubMatrix(tr,0,0),fi=fi.setSubMatrix(gr,tr.rows,0),fi=fi.setSubMatrix(Ri,0,tr.columns),fi=fi.setSubMatrix(Jo,tr.rows,tr.columns),fi.subMatrix(0,ze-1,0,ve-1)}return fe(M,P,ee,ne)}scaleRows(P={}){if(typeof P!="object")throw new TypeError("options must be an object");const{min:M=0,max:k=1}=P;if(!Number.isFinite(M))throw new TypeError("min must be a number");if(!Number.isFinite(k))throw new TypeError("max must be a number");if(M>=k)throw new RangeError("min must be smaller than max");let C=new q(this.rows,this.columns);for(let j=0;j<this.rows;j++){const X=this.getRow(j);X.length>0&&e(X,{min:M,max:k,output:X}),C.setRow(j,X)}return C}scaleColumns(P={}){if(typeof P!="object")throw new TypeError("options must be an object");const{min:M=0,max:k=1}=P;if(!Number.isFinite(M))throw new TypeError("min must be a number");if(!Number.isFinite(k))throw new TypeError("max must be a number");if(M>=k)throw new RangeError("min must be smaller than max");let C=new q(this.rows,this.columns);for(let j=0;j<this.columns;j++){const X=this.getColumn(j);X.length&&e(X,{min:M,max:k,output:X}),C.setColumn(j,X)}return C}flipRows(){const P=Math.ceil(this.columns/2);for(let M=0;M<this.rows;M++)for(let k=0;k<P;k++){let C=this.get(M,k),j=this.get(M,this.columns-1-k);this.set(M,k,j),this.set(M,this.columns-1-k,C)}return this}flipColumns(){const P=Math.ceil(this.rows/2);for(let M=0;M<this.columns;M++)for(let k=0;k<P;k++){let C=this.get(k,M),j=this.get(this.rows-1-k,M);this.set(k,M,j),this.set(this.rows-1-k,M,C)}return this}kroneckerProduct(P){P=q.checkMatrix(P);let M=this.rows,k=this.columns,C=P.rows,j=P.columns,X=new q(M*C,k*j);for(let Z=0;Z<M;Z++)for(let ee=0;ee<k;ee++)for(let ne=0;ne<C;ne++)for(let fe=0;fe<j;fe++)X.set(C*Z+ne,j*ee+fe,this.get(Z,ee)*P.get(ne,fe));return X}kroneckerSum(P){if(P=q.checkMatrix(P),!this.isSquare()||!P.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let M=this.rows,k=P.rows,C=this.kroneckerProduct(q.eye(k,k)),j=q.eye(M,M).kroneckerProduct(P);return C.add(j)}transpose(){let P=new q(this.columns,this.rows);for(let M=0;M<this.rows;M++)for(let k=0;k<this.columns;k++)P.set(k,M,this.get(M,k));return P}sortRows(P=U){for(let M=0;M<this.rows;M++)this.setRow(M,this.getRow(M).sort(P));return this}sortColumns(P=U){for(let M=0;M<this.columns;M++)this.setColumn(M,this.getColumn(M).sort(P));return this}subMatrix(P,M,k,C){v(this,P,M,k,C);let j=new q(M-P+1,C-k+1);for(let X=P;X<=M;X++)for(let Z=k;Z<=C;Z++)j.set(X-P,Z-k,this.get(X,Z));return j}subMatrixRow(P,M,k){if(M===void 0&&(M=0),k===void 0&&(k=this.columns-1),M>k||M<0||M>=this.columns||k<0||k>=this.columns)throw new RangeError("Argument out of range");let C=new q(P.length,k-M+1);for(let j=0;j<P.length;j++)for(let X=M;X<=k;X++){if(P[j]<0||P[j]>=this.rows)throw new RangeError(`Row index out of range: ${P[j]}`);C.set(j,X-M,this.get(P[j],X))}return C}subMatrixColumn(P,M,k){if(M===void 0&&(M=0),k===void 0&&(k=this.rows-1),M>k||M<0||M>=this.rows||k<0||k>=this.rows)throw new RangeError("Argument out of range");let C=new q(k-M+1,P.length);for(let j=0;j<P.length;j++)for(let X=M;X<=k;X++){if(P[j]<0||P[j]>=this.columns)throw new RangeError(`Column index out of range: ${P[j]}`);C.set(X-M,j,this.get(X,P[j]))}return C}setSubMatrix(P,M,k){if(P=q.checkMatrix(P),P.isEmpty())return this;let C=M+P.rows-1,j=k+P.columns-1;v(this,M,C,k,j);for(let X=0;X<P.rows;X++)for(let Z=0;Z<P.columns;Z++)this.set(M+X,k+Z,P.get(X,Z));return this}selection(P,M){p(this,P),g(this,M);let k=new q(P.length,M.length);for(let C=0;C<P.length;C++){let j=P[C];for(let X=0;X<M.length;X++){let Z=M[X];k.set(C,X,this.get(j,Z))}}return k}trace(){let P=Math.min(this.rows,this.columns),M=0;for(let k=0;k<P;k++)M+=this.get(k,k);return M}clone(){return this.constructor.copy(this,new q(this.rows,this.columns))}static copy(P,M){for(const[k,C,j]of P.entries())M.set(k,C,j);return M}sum(P){switch(P){case"row":return x(this);case"column":return w(this);case void 0:return _(this);default:throw new Error(`invalid option: ${P}`)}}product(P){switch(P){case"row":return E(this);case"column":return S(this);case void 0:return O(this);default:throw new Error(`invalid option: ${P}`)}}mean(P){const M=this.sum(P);switch(P){case"row":{for(let k=0;k<this.rows;k++)M[k]/=this.columns;return M}case"column":{for(let k=0;k<this.columns;k++)M[k]/=this.rows;return M}case void 0:return M/this.size;default:throw new Error(`invalid option: ${P}`)}}variance(P,M={}){if(typeof P=="object"&&(M=P,P=void 0),typeof M!="object")throw new TypeError("options must be an object");const{unbiased:k=!0,mean:C=this.mean(P)}=M;if(typeof k!="boolean")throw new TypeError("unbiased must be a boolean");switch(P){case"row":{if(!t.isAnyArray(C))throw new TypeError("mean must be an array");return A(this,k,C)}case"column":{if(!t.isAnyArray(C))throw new TypeError("mean must be an array");return T(this,k,C)}case void 0:{if(typeof C!="number")throw new TypeError("mean must be a number");return I(this,k,C)}default:throw new Error(`invalid option: ${P}`)}}standardDeviation(P,M){typeof P=="object"&&(M=P,P=void 0);const k=this.variance(P,M);if(P===void 0)return Math.sqrt(k);for(let C=0;C<k.length;C++)k[C]=Math.sqrt(k[C]);return k}center(P,M={}){if(typeof P=="object"&&(M=P,P=void 0),typeof M!="object")throw new TypeError("options must be an object");const{center:k=this.mean(P)}=M;switch(P){case"row":{if(!t.isAnyArray(k))throw new TypeError("center must be an array");return D(this,k),this}case"column":{if(!t.isAnyArray(k))throw new TypeError("center must be an array");return R(this,k),this}case void 0:{if(typeof k!="number")throw new TypeError("center must be a number");return F(this,k),this}default:throw new Error(`invalid option: ${P}`)}}scale(P,M={}){if(typeof P=="object"&&(M=P,P=void 0),typeof M!="object")throw new TypeError("options must be an object");let k=M.scale;switch(P){case"row":{if(k===void 0)k=z(this);else if(!t.isAnyArray(k))throw new TypeError("scale must be an array");return N(this,k),this}case"column":{if(k===void 0)k=L(this);else if(!t.isAnyArray(k))throw new TypeError("scale must be an array");return B(this,k),this}case void 0:{if(k===void 0)k=$(this);else if(typeof k!="number")throw new TypeError("scale must be a number");return G(this,k),this}default:throw new Error(`invalid option: ${P}`)}}toString(P){return a(this,P)}[Symbol.iterator](){return this.entries()}*entries(){for(let P=0;P<this.rows;P++)for(let M=0;M<this.columns;M++)yield[P,M,this.get(P,M)]}*values(){for(let P=0;P<this.rows;P++)for(let M=0;M<this.columns;M++)yield this.get(P,M)}}W.prototype.klass="Matrix",typeof Symbol<"u"&&(W.prototype[Symbol.for("nodejs.util.inspect.custom")]=i);function U(H,P){return H-P}function Y(H){return H.every(P=>typeof P=="number")}W.random=W.rand,W.randomInt=W.randInt,W.diagonal=W.diag,W.prototype.diagonal=W.prototype.diag,W.identity=W.eye,W.prototype.negate=W.prototype.neg,W.prototype.tensorProduct=W.prototype.kroneckerProduct;const xm=class xm extends W{constructor(M,k){super();tn(this,Bp);yt(this,"data");if(xm.isMatrix(M))Qe(this,Bp,bD).call(this,M.rows,M.columns),xm.copy(M,this);else if(Number.isInteger(M)&&M>=0)Qe(this,Bp,bD).call(this,M,k);else if(t.isAnyArray(M)){const C=M;if(M=C.length,k=M?C[0].length:0,typeof k!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let j=0;j<M;j++){if(C[j].length!==k)throw new RangeError("Inconsistent array dimensions");if(!Y(C[j]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(C[j]))}this.rows=M,this.columns=k}else throw new TypeError("First argument must be a positive number or an array")}set(M,k,C){return this.data[M][k]=C,this}get(M,k){return this.data[M][k]}removeRow(M){return c(this,M),this.data.splice(M,1),this.rows-=1,this}addRow(M,k){return k===void 0&&(k=M,M=this.rows),c(this,M,!0),k=Float64Array.from(d(this,k)),this.data.splice(M,0,k),this.rows+=1,this}removeColumn(M){f(this,M);for(let k=0;k<this.rows;k++){const C=new Float64Array(this.columns-1);for(let j=0;j<M;j++)C[j]=this.data[k][j];for(let j=M+1;j<this.columns;j++)C[j-1]=this.data[k][j];this.data[k]=C}return this.columns-=1,this}addColumn(M,k){typeof k>"u"&&(k=M,M=this.columns),f(this,M,!0),k=h(this,k);for(let C=0;C<this.rows;C++){const j=new Float64Array(this.columns+1);let X=0;for(;X<M;X++)j[X]=this.data[C][X];for(j[X++]=k[C];X<this.columns+1;X++)j[X]=this.data[C][X-1];this.data[C]=j}return this.columns+=1,this}};Bp=new WeakSet,bD=function(M,k){if(this.data=[],Number.isInteger(k)&&k>=0)for(let C=0;C<M;C++)this.data.push(new Float64Array(k));else throw new TypeError("nColumns must be a positive integer");this.rows=M,this.columns=k};let q=xm;u(W,q);const wm=class wm extends W{constructor(M){super();tn(this,Ki);if(q.isMatrix(M)){if(!M.isSymmetric())throw new TypeError("not symmetric data");ht(this,Ki,q.copy(M,new q(M.rows,M.rows)))}else if(Number.isInteger(M)&&M>=0)ht(this,Ki,new q(M,M));else if(ht(this,Ki,new q(M)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return re(this,Ki).size}get rows(){return re(this,Ki).rows}get columns(){return re(this,Ki).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(M){return q.isMatrix(M)&&M.klassType==="SymmetricMatrix"}static zeros(M){return new this(M)}static ones(M){return new this(M).fill(1)}clone(){const M=new wm(this.diagonalSize);for(const[k,C,j]of this.upperRightEntries())M.set(k,C,j);return M}toMatrix(){return new q(this)}get(M,k){return re(this,Ki).get(M,k)}set(M,k,C){return re(this,Ki).set(M,k,C),re(this,Ki).set(k,M,C),this}removeCross(M){return re(this,Ki).removeRow(M),re(this,Ki).removeColumn(M),this}addCross(M,k){k===void 0&&(k=M,M=this.diagonalSize);const C=k.slice();return C.splice(M,1),re(this,Ki).addRow(M,C),re(this,Ki).addColumn(M,k),this}applyMask(M){if(M.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const k=[];for(const[C,j]of M.entries())j||k.push(C);k.reverse();for(const C of k)this.removeCross(C);return this}toCompact(){const{diagonalSize:M}=this,k=new Array(M*(M+1)/2);for(let C=0,j=0,X=0;X<k.length;X++)k[X]=this.get(j,C),++C>=M&&(C=++j);return k}static fromCompact(M){const k=M.length,C=(Math.sqrt(8*k+1)-1)/2;if(!Number.isInteger(C))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(M)}`);const j=new wm(C);for(let X=0,Z=0,ee=0;ee<k;ee++)j.set(X,Z,M[ee]),++X>=C&&(X=++Z);return j}*upperRightEntries(){for(let M=0,k=0;M<this.diagonalSize;void 0){const C=this.get(M,k);yield[M,k,C],++k>=this.diagonalSize&&(k=++M)}}*upperRightValues(){for(let M=0,k=0;M<this.diagonalSize;void 0)yield this.get(M,k),++k>=this.diagonalSize&&(k=++M)}};Ki=new WeakMap;let K=wm;K.prototype.klassType="SymmetricMatrix";class J extends K{static isDistanceMatrix(P){return K.isSymmetricMatrix(P)&&P.klassSubType==="DistanceMatrix"}constructor(P){if(super(P),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(P,M,k){return P===M&&(k=0),super.set(P,M,k)}addCross(P,M){return M===void 0&&(M=P,P=this.diagonalSize),M=M.slice(),M[P]=0,super.addCross(P,M)}toSymmetricMatrix(){return new K(this)}clone(){const P=new J(this.diagonalSize);for(const[M,k,C]of this.upperRightEntries())M!==k&&P.set(M,k,C);return P}toCompact(){const{diagonalSize:P}=this,M=(P-1)*P/2,k=new Array(M);for(let C=1,j=0,X=0;X<k.length;X++)k[X]=this.get(j,C),++C>=P&&(C=++j+1);return k}static fromCompact(P){const M=P.length;if(M===0)return new this(0);const k=(Math.sqrt(8*M+1)+1)/2;if(!Number.isInteger(k))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(P)}`);const C=new this(k);for(let j=1,X=0,Z=0;Z<M;Z++)C.set(j,X,P[Z]),++j>=k&&(j=++X+1);return C}}J.prototype.klassSubType="DistanceMatrix";class Q extends W{constructor(P,M,k){super(),this.matrix=P,this.rows=M,this.columns=k}}class se extends Q{constructor(P,M){f(P,M),super(P,P.rows,1),this.column=M}set(P,M,k){return this.matrix.set(P,this.column,k),this}get(P){return this.matrix.get(P,this.column)}}class de extends Q{constructor(P,M){g(P,M),super(P,P.rows,M.length),this.columnIndices=M}set(P,M,k){return this.matrix.set(P,this.columnIndices[M],k),this}get(P,M){return this.matrix.get(P,this.columnIndices[M])}}class ye extends Q{constructor(P){super(P,P.rows,P.columns)}set(P,M,k){return this.matrix.set(P,this.columns-M-1,k),this}get(P,M){return this.matrix.get(P,this.columns-M-1)}}class _e extends Q{constructor(P){super(P,P.rows,P.columns)}set(P,M,k){return this.matrix.set(this.rows-P-1,M,k),this}get(P,M){return this.matrix.get(this.rows-P-1,M)}}class Ee extends Q{constructor(P,M){c(P,M),super(P,1,P.columns),this.row=M}set(P,M,k){return this.matrix.set(this.row,M,k),this}get(P,M){return this.matrix.get(this.row,M)}}class ue extends Q{constructor(P,M){p(P,M),super(P,M.length,P.columns),this.rowIndices=M}set(P,M,k){return this.matrix.set(this.rowIndices[P],M,k),this}get(P,M){return this.matrix.get(this.rowIndices[P],M)}}class he extends Q{constructor(P,M,k){p(P,M),g(P,k),super(P,M.length,k.length),this.rowIndices=M,this.columnIndices=k}set(P,M,k){return this.matrix.set(this.rowIndices[P],this.columnIndices[M],k),this}get(P,M){return this.matrix.get(this.rowIndices[P],this.columnIndices[M])}}class ke extends Q{constructor(P,M,k,C,j){v(P,M,k,C,j),super(P,k-M+1,j-C+1),this.startRow=M,this.startColumn=C}set(P,M,k){return this.matrix.set(this.startRow+P,this.startColumn+M,k),this}get(P,M){return this.matrix.get(this.startRow+P,this.startColumn+M)}}class Se extends Q{constructor(P){super(P,P.columns,P.rows)}set(P,M,k){return this.matrix.set(M,P,k),this}get(P,M){return this.matrix.get(M,P)}}class Me extends W{constructor(P,M={}){const{rows:k=1}=M;if(P.length%k!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=k,this.columns=P.length/k,this.data=P}set(P,M,k){let C=this._calculateIndex(P,M);return this.data[C]=k,this}get(P,M){let k=this._calculateIndex(P,M);return this.data[k]}_calculateIndex(P,M){return P*this.columns+M}}class Be extends W{constructor(P){super(),this.data=P,this.rows=P.length,this.columns=P[0].length}set(P,M,k){return this.data[P][M]=k,this}get(P,M){return this.data[P][M]}}function en(H,P){if(t.isAnyArray(H))return H[0]&&t.isAnyArray(H[0])?new Be(H):new Me(H,P);throw new Error("the argument is not an array")}class Ht{constructor(P){P=Be.checkMatrix(P);let M=P.clone(),k=M.rows,C=M.columns,j=new Float64Array(k),X=1,Z,ee,ne,fe,ie,xe,ze,ve,Oe;for(Z=0;Z<k;Z++)j[Z]=Z;for(ve=new Float64Array(k),ee=0;ee<C;ee++){for(Z=0;Z<k;Z++)ve[Z]=M.get(Z,ee);for(Z=0;Z<k;Z++){for(Oe=Math.min(Z,ee),ie=0,ne=0;ne<Oe;ne++)ie+=M.get(Z,ne)*ve[ne];ve[Z]-=ie,M.set(Z,ee,ve[Z])}for(fe=ee,Z=ee+1;Z<k;Z++)Math.abs(ve[Z])>Math.abs(ve[fe])&&(fe=Z);if(fe!==ee){for(ne=0;ne<C;ne++)xe=M.get(fe,ne),M.set(fe,ne,M.get(ee,ne)),M.set(ee,ne,xe);ze=j[fe],j[fe]=j[ee],j[ee]=ze,X=-X}if(ee<k&&M.get(ee,ee)!==0)for(Z=ee+1;Z<k;Z++)M.set(Z,ee,M.get(Z,ee)/M.get(ee,ee))}this.LU=M,this.pivotVector=j,this.pivotSign=X}isSingular(){let P=this.LU,M=P.columns;for(let k=0;k<M;k++)if(P.get(k,k)===0)return!0;return!1}solve(P){P=q.checkMatrix(P);let M=this.LU;if(M.rows!==P.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let C=P.columns,j=P.subMatrixRow(this.pivotVector,0,C-1),X=M.columns,Z,ee,ne;for(ne=0;ne<X;ne++)for(Z=ne+1;Z<X;Z++)for(ee=0;ee<C;ee++)j.set(Z,ee,j.get(Z,ee)-j.get(ne,ee)*M.get(Z,ne));for(ne=X-1;ne>=0;ne--){for(ee=0;ee<C;ee++)j.set(ne,ee,j.get(ne,ee)/M.get(ne,ne));for(Z=0;Z<ne;Z++)for(ee=0;ee<C;ee++)j.set(Z,ee,j.get(Z,ee)-j.get(ne,ee)*M.get(Z,ne))}return j}get determinant(){let P=this.LU;if(!P.isSquare())throw new Error("Matrix must be square");let M=this.pivotSign,k=P.columns;for(let C=0;C<k;C++)M*=P.get(C,C);return M}get lowerTriangularMatrix(){let P=this.LU,M=P.rows,k=P.columns,C=new q(M,k);for(let j=0;j<M;j++)for(let X=0;X<k;X++)j>X?C.set(j,X,P.get(j,X)):j===X?C.set(j,X,1):C.set(j,X,0);return C}get upperTriangularMatrix(){let P=this.LU,M=P.rows,k=P.columns,C=new q(M,k);for(let j=0;j<M;j++)for(let X=0;X<k;X++)j<=X?C.set(j,X,P.get(j,X)):C.set(j,X,0);return C}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function wt(H,P){let M=0;return Math.abs(H)>Math.abs(P)?(M=P/H,Math.abs(H)*Math.sqrt(1+M*M)):P!==0?(M=H/P,Math.abs(P)*Math.sqrt(1+M*M)):0}class At{constructor(P){P=Be.checkMatrix(P);let M=P.clone(),k=P.rows,C=P.columns,j=new Float64Array(C),X,Z,ee,ne;for(ee=0;ee<C;ee++){let fe=0;for(X=ee;X<k;X++)fe=wt(fe,M.get(X,ee));if(fe!==0){for(M.get(ee,ee)<0&&(fe=-fe),X=ee;X<k;X++)M.set(X,ee,M.get(X,ee)/fe);for(M.set(ee,ee,M.get(ee,ee)+1),Z=ee+1;Z<C;Z++){for(ne=0,X=ee;X<k;X++)ne+=M.get(X,ee)*M.get(X,Z);for(ne=-ne/M.get(ee,ee),X=ee;X<k;X++)M.set(X,Z,M.get(X,Z)+ne*M.get(X,ee))}}j[ee]=-fe}this.QR=M,this.Rdiag=j}solve(P){P=q.checkMatrix(P);let M=this.QR,k=M.rows;if(P.rows!==k)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let C=P.columns,j=P.clone(),X=M.columns,Z,ee,ne,fe;for(ne=0;ne<X;ne++)for(ee=0;ee<C;ee++){for(fe=0,Z=ne;Z<k;Z++)fe+=M.get(Z,ne)*j.get(Z,ee);for(fe=-fe/M.get(ne,ne),Z=ne;Z<k;Z++)j.set(Z,ee,j.get(Z,ee)+fe*M.get(Z,ne))}for(ne=X-1;ne>=0;ne--){for(ee=0;ee<C;ee++)j.set(ne,ee,j.get(ne,ee)/this.Rdiag[ne]);for(Z=0;Z<ne;Z++)for(ee=0;ee<C;ee++)j.set(Z,ee,j.get(Z,ee)-j.get(ne,ee)*M.get(Z,ne))}return j.subMatrix(0,X-1,0,C-1)}isFullRank(){let P=this.QR.columns;for(let M=0;M<P;M++)if(this.Rdiag[M]===0)return!1;return!0}get upperTriangularMatrix(){let P=this.QR,M=P.columns,k=new q(M,M),C,j;for(C=0;C<M;C++)for(j=0;j<M;j++)C<j?k.set(C,j,P.get(C,j)):C===j?k.set(C,j,this.Rdiag[C]):k.set(C,j,0);return k}get orthogonalMatrix(){let P=this.QR,M=P.rows,k=P.columns,C=new q(M,k),j,X,Z,ee;for(Z=k-1;Z>=0;Z--){for(j=0;j<M;j++)C.set(j,Z,0);for(C.set(Z,Z,1),X=Z;X<k;X++)if(P.get(Z,Z)!==0){for(ee=0,j=Z;j<M;j++)ee+=P.get(j,Z)*C.get(j,X);for(ee=-ee/P.get(Z,Z),j=Z;j<M;j++)C.set(j,X,C.get(j,X)+ee*P.get(j,Z))}}return C}}class nn{constructor(P,M={}){if(P=Be.checkMatrix(P),P.isEmpty())throw new Error("Matrix must be non-empty");let k=P.rows,C=P.columns;const{computeLeftSingularVectors:j=!0,computeRightSingularVectors:X=!0,autoTranspose:Z=!1}=M;let ee=!!j,ne=!!X,fe=!1,ie;if(k<C)if(!Z)ie=P.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{ie=P.transpose(),k=ie.rows,C=ie.columns,fe=!0;let le=ee;ee=ne,ne=le}else ie=P.clone();let xe=Math.min(k,C),ze=Math.min(k+1,C),ve=new Float64Array(ze),Oe=new q(k,xe),Xe=new q(C,C),ae=new Float64Array(C),Re=new Float64Array(k),Je=new Float64Array(ze);for(let le=0;le<ze;le++)Je[le]=le;let Et=Math.min(k-1,C),Tt=Math.max(0,Math.min(C-2,k)),hr=Math.max(Et,Tt);for(let le=0;le<hr;le++){if(le<Et){ve[le]=0;for(let Pe=le;Pe<k;Pe++)ve[le]=wt(ve[le],ie.get(Pe,le));if(ve[le]!==0){ie.get(le,le)<0&&(ve[le]=-ve[le]);for(let Pe=le;Pe<k;Pe++)ie.set(Pe,le,ie.get(Pe,le)/ve[le]);ie.set(le,le,ie.get(le,le)+1)}ve[le]=-ve[le]}for(let Pe=le+1;Pe<C;Pe++){if(le<Et&&ve[le]!==0){let Ze=0;for(let Ie=le;Ie<k;Ie++)Ze+=ie.get(Ie,le)*ie.get(Ie,Pe);Ze=-Ze/ie.get(le,le);for(let Ie=le;Ie<k;Ie++)ie.set(Ie,Pe,ie.get(Ie,Pe)+Ze*ie.get(Ie,le))}ae[Pe]=ie.get(le,Pe)}if(ee&&le<Et)for(let Pe=le;Pe<k;Pe++)Oe.set(Pe,le,ie.get(Pe,le));if(le<Tt){ae[le]=0;for(let Pe=le+1;Pe<C;Pe++)ae[le]=wt(ae[le],ae[Pe]);if(ae[le]!==0){ae[le+1]<0&&(ae[le]=0-ae[le]);for(let Pe=le+1;Pe<C;Pe++)ae[Pe]/=ae[le];ae[le+1]+=1}if(ae[le]=-ae[le],le+1<k&&ae[le]!==0){for(let Pe=le+1;Pe<k;Pe++)Re[Pe]=0;for(let Pe=le+1;Pe<k;Pe++)for(let Ze=le+1;Ze<C;Ze++)Re[Pe]+=ae[Ze]*ie.get(Pe,Ze);for(let Pe=le+1;Pe<C;Pe++){let Ze=-ae[Pe]/ae[le+1];for(let Ie=le+1;Ie<k;Ie++)ie.set(Ie,Pe,ie.get(Ie,Pe)+Ze*Re[Ie])}}if(ne)for(let Pe=le+1;Pe<C;Pe++)Xe.set(Pe,le,ae[Pe])}}let ct=Math.min(C,k+1);if(Et<C&&(ve[Et]=ie.get(Et,Et)),k<ct&&(ve[ct-1]=0),Tt+1<ct&&(ae[Tt]=ie.get(Tt,ct-1)),ae[ct-1]=0,ee){for(let le=Et;le<xe;le++){for(let Pe=0;Pe<k;Pe++)Oe.set(Pe,le,0);Oe.set(le,le,1)}for(let le=Et-1;le>=0;le--)if(ve[le]!==0){for(let Pe=le+1;Pe<xe;Pe++){let Ze=0;for(let Ie=le;Ie<k;Ie++)Ze+=Oe.get(Ie,le)*Oe.get(Ie,Pe);Ze=-Ze/Oe.get(le,le);for(let Ie=le;Ie<k;Ie++)Oe.set(Ie,Pe,Oe.get(Ie,Pe)+Ze*Oe.get(Ie,le))}for(let Pe=le;Pe<k;Pe++)Oe.set(Pe,le,-Oe.get(Pe,le));Oe.set(le,le,1+Oe.get(le,le));for(let Pe=0;Pe<le-1;Pe++)Oe.set(Pe,le,0)}else{for(let Pe=0;Pe<k;Pe++)Oe.set(Pe,le,0);Oe.set(le,le,1)}}if(ne)for(let le=C-1;le>=0;le--){if(le<Tt&&ae[le]!==0)for(let Pe=le+1;Pe<C;Pe++){let Ze=0;for(let Ie=le+1;Ie<C;Ie++)Ze+=Xe.get(Ie,le)*Xe.get(Ie,Pe);Ze=-Ze/Xe.get(le+1,le);for(let Ie=le+1;Ie<C;Ie++)Xe.set(Ie,Pe,Xe.get(Ie,Pe)+Ze*Xe.get(Ie,le))}for(let Pe=0;Pe<C;Pe++)Xe.set(Pe,le,0);Xe.set(le,le,1)}let vt=ct-1,Vn=Number.EPSILON;for(;ct>0;){let le,Pe;for(le=ct-2;le>=-1&&le!==-1;le--){const Ze=Number.MIN_VALUE+Vn*Math.abs(ve[le]+Math.abs(ve[le+1]));if(Math.abs(ae[le])<=Ze||Number.isNaN(ae[le])){ae[le]=0;break}}if(le===ct-2)Pe=4;else{let Ze;for(Ze=ct-1;Ze>=le&&Ze!==le;Ze--){let Ie=(Ze!==ct?Math.abs(ae[Ze]):0)+(Ze!==le+1?Math.abs(ae[Ze-1]):0);if(Math.abs(ve[Ze])<=Vn*Ie){ve[Ze]=0;break}}Ze===le?Pe=3:Ze===ct-1?Pe=1:(Pe=2,le=Ze)}switch(le++,Pe){case 1:{let Ze=ae[ct-2];ae[ct-2]=0;for(let Ie=ct-2;Ie>=le;Ie--){let pr=wt(ve[Ie],Ze),kn=ve[Ie]/pr,tr=Ze/pr;if(ve[Ie]=pr,Ie!==le&&(Ze=-tr*ae[Ie-1],ae[Ie-1]=kn*ae[Ie-1]),ne)for(let gr=0;gr<C;gr++)pr=kn*Xe.get(gr,Ie)+tr*Xe.get(gr,ct-1),Xe.set(gr,ct-1,-tr*Xe.get(gr,Ie)+kn*Xe.get(gr,ct-1)),Xe.set(gr,Ie,pr)}break}case 2:{let Ze=ae[le-1];ae[le-1]=0;for(let Ie=le;Ie<ct;Ie++){let pr=wt(ve[Ie],Ze),kn=ve[Ie]/pr,tr=Ze/pr;if(ve[Ie]=pr,Ze=-tr*ae[Ie],ae[Ie]=kn*ae[Ie],ee)for(let gr=0;gr<k;gr++)pr=kn*Oe.get(gr,Ie)+tr*Oe.get(gr,le-1),Oe.set(gr,le-1,-tr*Oe.get(gr,Ie)+kn*Oe.get(gr,le-1)),Oe.set(gr,Ie,pr)}break}case 3:{const Ze=Math.max(Math.abs(ve[ct-1]),Math.abs(ve[ct-2]),Math.abs(ae[ct-2]),Math.abs(ve[le]),Math.abs(ae[le])),Ie=ve[ct-1]/Ze,pr=ve[ct-2]/Ze,kn=ae[ct-2]/Ze,tr=ve[le]/Ze,gr=ae[le]/Ze,Ri=((pr+Ie)*(pr-Ie)+kn*kn)/2,Jo=Ie*kn*(Ie*kn);let fi=0;(Ri!==0||Jo!==0)&&(Ri<0?fi=0-Math.sqrt(Ri*Ri+Jo):fi=Math.sqrt(Ri*Ri+Jo),fi=Jo/(Ri+fi));let Rs=(tr+Ie)*(tr-Ie)+fi,Cl=tr*gr;for(let Kt=le;Kt<ct-1;Kt++){let Ni=wt(Rs,Cl);Ni===0&&(Ni=Number.MIN_VALUE);let Wa=Rs/Ni,Ga=Cl/Ni;if(Kt!==le&&(ae[Kt-1]=Ni),Rs=Wa*ve[Kt]+Ga*ae[Kt],ae[Kt]=Wa*ae[Kt]-Ga*ve[Kt],Cl=Ga*ve[Kt+1],ve[Kt+1]=Wa*ve[Kt+1],ne)for(let di=0;di<C;di++)Ni=Wa*Xe.get(di,Kt)+Ga*Xe.get(di,Kt+1),Xe.set(di,Kt+1,-Ga*Xe.get(di,Kt)+Wa*Xe.get(di,Kt+1)),Xe.set(di,Kt,Ni);if(Ni=wt(Rs,Cl),Ni===0&&(Ni=Number.MIN_VALUE),Wa=Rs/Ni,Ga=Cl/Ni,ve[Kt]=Ni,Rs=Wa*ae[Kt]+Ga*ve[Kt+1],ve[Kt+1]=-Ga*ae[Kt]+Wa*ve[Kt+1],Cl=Ga*ae[Kt+1],ae[Kt+1]=Wa*ae[Kt+1],ee&&Kt<k-1)for(let di=0;di<k;di++)Ni=Wa*Oe.get(di,Kt)+Ga*Oe.get(di,Kt+1),Oe.set(di,Kt+1,-Ga*Oe.get(di,Kt)+Wa*Oe.get(di,Kt+1)),Oe.set(di,Kt,Ni)}ae[ct-2]=Rs;break}case 4:{if(ve[le]<=0&&(ve[le]=ve[le]<0?-ve[le]:0,ne))for(let Ze=0;Ze<=vt;Ze++)Xe.set(Ze,le,-Xe.get(Ze,le));for(;le<vt&&!(ve[le]>=ve[le+1]);){let Ze=ve[le];if(ve[le]=ve[le+1],ve[le+1]=Ze,ne&&le<C-1)for(let Ie=0;Ie<C;Ie++)Ze=Xe.get(Ie,le+1),Xe.set(Ie,le+1,Xe.get(Ie,le)),Xe.set(Ie,le,Ze);if(ee&&le<k-1)for(let Ie=0;Ie<k;Ie++)Ze=Oe.get(Ie,le+1),Oe.set(Ie,le+1,Oe.get(Ie,le)),Oe.set(Ie,le,Ze);le++}ct--;break}}}if(fe){let le=Xe;Xe=Oe,Oe=le}this.m=k,this.n=C,this.s=ve,this.U=Oe,this.V=Xe}solve(P){let M=P,k=this.threshold,C=this.s.length,j=q.zeros(C,C);for(let xe=0;xe<C;xe++)Math.abs(this.s[xe])<=k?j.set(xe,xe,0):j.set(xe,xe,1/this.s[xe]);let X=this.U,Z=this.rightSingularVectors,ee=Z.mmul(j),ne=Z.rows,fe=X.rows,ie=q.zeros(ne,fe);for(let xe=0;xe<ne;xe++)for(let ze=0;ze<fe;ze++){let ve=0;for(let Oe=0;Oe<C;Oe++)ve+=ee.get(xe,Oe)*X.get(ze,Oe);ie.set(xe,ze,ve)}return ie.mmul(M)}solveForDiagonal(P){return this.solve(q.diag(P))}inverse(){let P=this.V,M=this.threshold,k=P.rows,C=P.columns,j=new q(k,this.s.length);for(let fe=0;fe<k;fe++)for(let ie=0;ie<C;ie++)Math.abs(this.s[ie])>M&&j.set(fe,ie,P.get(fe,ie)/this.s[ie]);let X=this.U,Z=X.rows,ee=X.columns,ne=new q(k,Z);for(let fe=0;fe<k;fe++)for(let ie=0;ie<Z;ie++){let xe=0;for(let ze=0;ze<ee;ze++)xe+=j.get(fe,ze)*X.get(ie,ze);ne.set(fe,ie,xe)}return ne}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let P=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,M=0,k=this.s;for(let C=0,j=k.length;C<j;C++)k[C]>P&&M++;return M}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return q.diag(this.s)}}function sn(H,P=!1){return H=Be.checkMatrix(H),P?new nn(H).inverse():Zt(H,q.eye(H.rows))}function Zt(H,P,M=!1){return H=Be.checkMatrix(H),P=Be.checkMatrix(P),M?new nn(H).solve(P):H.isSquare()?new Ht(H).solve(P):new At(H).solve(P)}function gn(H){if(H=q.checkMatrix(H),H.isSquare()){if(H.columns===0)return 1;let P,M,k,C;if(H.columns===2)return P=H.get(0,0),M=H.get(0,1),k=H.get(1,0),C=H.get(1,1),P*C-M*k;if(H.columns===3){let j,X,Z;return j=new he(H,[1,2],[1,2]),X=new he(H,[1,2],[0,2]),Z=new he(H,[1,2],[0,1]),P=H.get(0,0),M=H.get(0,1),k=H.get(0,2),P*gn(j)-M*gn(X)+k*gn(Z)}else return new Ht(H).determinant}else throw Error("determinant can only be calculated for a square matrix")}function cn(H,P){let M=[];for(let k=0;k<H;k++)k!==P&&M.push(k);return M}function Nn(H,P,M,k=1e-9,C=1e-9){if(H>C)return new Array(P.rows+1).fill(0);{let j=P.addRow(M,[0]);for(let X=0;X<j.rows;X++)Math.abs(j.get(X,0))<k&&j.set(X,0,0);return j.to1DArray()}}function vn(H,P={}){const{thresholdValue:M=1e-9,thresholdError:k=1e-9}=P;H=q.checkMatrix(H);let C=H.rows,j=new q(C,C);for(let X=0;X<C;X++){let Z=q.columnVector(H.getRow(X)),ee=H.subMatrixRow(cn(C,X)).transpose(),fe=new nn(ee).solve(Z),ie=q.sub(Z,ee.mmul(fe)).abs().max();j.setRow(X,Nn(ie,fe,X,M,k))}return j}function ci(H,P=Number.EPSILON){if(H=q.checkMatrix(H),H.isEmpty())return H.transpose();let M=new nn(H,{autoTranspose:!0}),k=M.leftSingularVectors,C=M.rightSingularVectors,j=M.diagonal;for(let X=0;X<j.length;X++)Math.abs(j[X])>P?j[X]=1/j[X]:j[X]=0;return C.mmul(q.diag(j).mmul(k.transpose()))}function Jr(H,P=H,M={}){H=new q(H);let k=!1;if(typeof P=="object"&&!q.isMatrix(P)&&!t.isAnyArray(P)?(M=P,P=H,k=!0):P=new q(P),H.rows!==P.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:C=!0}=M;C&&(H=H.center("column"),k||(P=P.center("column")));const j=H.transpose().mmul(P);for(let X=0;X<j.rows;X++)for(let Z=0;Z<j.columns;Z++)j.set(X,Z,j.get(X,Z)*(1/(H.rows-1)));return j}function _i(H,P=H,M={}){H=new q(H);let k=!1;if(typeof P=="object"&&!q.isMatrix(P)&&!t.isAnyArray(P)?(M=P,P=H,k=!0):P=new q(P),H.rows!==P.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:C=!0,scale:j=!0}=M;C&&(H.center("column"),k||P.center("column")),j&&(H.scale("column"),k||P.scale("column"));const X=H.standardDeviation("column",{unbiased:!0}),Z=k?X:P.standardDeviation("column",{unbiased:!0}),ee=H.transpose().mmul(P);for(let ne=0;ne<ee.rows;ne++)for(let fe=0;fe<ee.columns;fe++)ee.set(ne,fe,ee.get(ne,fe)*(1/(X[ne]*Z[fe]))*(1/(H.rows-1)));return ee}class Zi{constructor(P,M={}){const{assumeSymmetric:k=!1}=M;if(P=Be.checkMatrix(P),!P.isSquare())throw new Error("Matrix is not a square matrix");if(P.isEmpty())throw new Error("Matrix must be non-empty");let C=P.columns,j=new q(C,C),X=new Float64Array(C),Z=new Float64Array(C),ee=P,ne,fe,ie=!1;if(k?ie=!0:ie=P.isSymmetric(),ie){for(ne=0;ne<C;ne++)for(fe=0;fe<C;fe++)j.set(ne,fe,ee.get(ne,fe));jp(C,Z,X,j),ym(C,Z,X,j)}else{let xe=new q(C,C),ze=new Float64Array(C);for(fe=0;fe<C;fe++)for(ne=0;ne<C;ne++)xe.set(ne,fe,ee.get(ne,fe));D_(C,xe,ze,j),I_(C,Z,X,j,xe)}this.n=C,this.e=Z,this.d=X,this.V=j}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let P=this.n,M=this.e,k=this.d,C=new q(P,P),j,X;for(j=0;j<P;j++){for(X=0;X<P;X++)C.set(j,X,0);C.set(j,j,k[j]),M[j]>0?C.set(j,j+1,M[j]):M[j]<0&&C.set(j,j-1,M[j])}return C}}function jp(H,P,M,k){let C,j,X,Z,ee,ne,fe,ie;for(ee=0;ee<H;ee++)M[ee]=k.get(H-1,ee);for(Z=H-1;Z>0;Z--){for(ie=0,X=0,ne=0;ne<Z;ne++)ie=ie+Math.abs(M[ne]);if(ie===0)for(P[Z]=M[Z-1],ee=0;ee<Z;ee++)M[ee]=k.get(Z-1,ee),k.set(Z,ee,0),k.set(ee,Z,0);else{for(ne=0;ne<Z;ne++)M[ne]/=ie,X+=M[ne]*M[ne];for(C=M[Z-1],j=Math.sqrt(X),C>0&&(j=-j),P[Z]=ie*j,X=X-C*j,M[Z-1]=C-j,ee=0;ee<Z;ee++)P[ee]=0;for(ee=0;ee<Z;ee++){for(C=M[ee],k.set(ee,Z,C),j=P[ee]+k.get(ee,ee)*C,ne=ee+1;ne<=Z-1;ne++)j+=k.get(ne,ee)*M[ne],P[ne]+=k.get(ne,ee)*C;P[ee]=j}for(C=0,ee=0;ee<Z;ee++)P[ee]/=X,C+=P[ee]*M[ee];for(fe=C/(X+X),ee=0;ee<Z;ee++)P[ee]-=fe*M[ee];for(ee=0;ee<Z;ee++){for(C=M[ee],j=P[ee],ne=ee;ne<=Z-1;ne++)k.set(ne,ee,k.get(ne,ee)-(C*P[ne]+j*M[ne]));M[ee]=k.get(Z-1,ee),k.set(Z,ee,0)}}M[Z]=X}for(Z=0;Z<H-1;Z++){if(k.set(H-1,Z,k.get(Z,Z)),k.set(Z,Z,1),X=M[Z+1],X!==0){for(ne=0;ne<=Z;ne++)M[ne]=k.get(ne,Z+1)/X;for(ee=0;ee<=Z;ee++){for(j=0,ne=0;ne<=Z;ne++)j+=k.get(ne,Z+1)*k.get(ne,ee);for(ne=0;ne<=Z;ne++)k.set(ne,ee,k.get(ne,ee)-j*M[ne])}}for(ne=0;ne<=Z;ne++)k.set(ne,Z+1,0)}for(ee=0;ee<H;ee++)M[ee]=k.get(H-1,ee),k.set(H-1,ee,0);k.set(H-1,H-1,1),P[0]=0}function ym(H,P,M,k){let C,j,X,Z,ee,ne,fe,ie,xe,ze,ve,Oe,Xe,ae,Re,Je;for(X=1;X<H;X++)P[X-1]=P[X];P[H-1]=0;let Et=0,Tt=0,hr=Number.EPSILON;for(ne=0;ne<H;ne++){for(Tt=Math.max(Tt,Math.abs(M[ne])+Math.abs(P[ne])),fe=ne;fe<H&&!(Math.abs(P[fe])<=hr*Tt);)fe++;if(fe>ne)do{for(C=M[ne],ie=(M[ne+1]-C)/(2*P[ne]),xe=wt(ie,1),ie<0&&(xe=-xe),M[ne]=P[ne]/(ie+xe),M[ne+1]=P[ne]*(ie+xe),ze=M[ne+1],j=C-M[ne],X=ne+2;X<H;X++)M[X]-=j;for(Et=Et+j,ie=M[fe],ve=1,Oe=ve,Xe=ve,ae=P[ne+1],Re=0,Je=0,X=fe-1;X>=ne;X--)for(Xe=Oe,Oe=ve,Je=Re,C=ve*P[X],j=ve*ie,xe=wt(ie,P[X]),P[X+1]=Re*xe,Re=P[X]/xe,ve=ie/xe,ie=ve*M[X]-Re*C,M[X+1]=j+Re*(ve*C+Re*M[X]),ee=0;ee<H;ee++)j=k.get(ee,X+1),k.set(ee,X+1,Re*k.get(ee,X)+ve*j),k.set(ee,X,ve*k.get(ee,X)-Re*j);ie=-Re*Je*Xe*ae*P[ne]/ze,P[ne]=Re*ie,M[ne]=ve*ie}while(Math.abs(P[ne])>hr*Tt);M[ne]=M[ne]+Et,P[ne]=0}for(X=0;X<H-1;X++){for(ee=X,ie=M[X],Z=X+1;Z<H;Z++)M[Z]<ie&&(ee=Z,ie=M[Z]);if(ee!==X)for(M[ee]=M[X],M[X]=ie,Z=0;Z<H;Z++)ie=k.get(Z,X),k.set(Z,X,k.get(Z,ee)),k.set(Z,ee,ie)}}function D_(H,P,M,k){let C=0,j=H-1,X,Z,ee,ne,fe,ie,xe;for(ie=C+1;ie<=j-1;ie++){for(xe=0,ne=ie;ne<=j;ne++)xe=xe+Math.abs(P.get(ne,ie-1));if(xe!==0){for(ee=0,ne=j;ne>=ie;ne--)M[ne]=P.get(ne,ie-1)/xe,ee+=M[ne]*M[ne];for(Z=Math.sqrt(ee),M[ie]>0&&(Z=-Z),ee=ee-M[ie]*Z,M[ie]=M[ie]-Z,fe=ie;fe<H;fe++){for(X=0,ne=j;ne>=ie;ne--)X+=M[ne]*P.get(ne,fe);for(X=X/ee,ne=ie;ne<=j;ne++)P.set(ne,fe,P.get(ne,fe)-X*M[ne])}for(ne=0;ne<=j;ne++){for(X=0,fe=j;fe>=ie;fe--)X+=M[fe]*P.get(ne,fe);for(X=X/ee,fe=ie;fe<=j;fe++)P.set(ne,fe,P.get(ne,fe)-X*M[fe])}M[ie]=xe*M[ie],P.set(ie,ie-1,xe*Z)}}for(ne=0;ne<H;ne++)for(fe=0;fe<H;fe++)k.set(ne,fe,ne===fe?1:0);for(ie=j-1;ie>=C+1;ie--)if(P.get(ie,ie-1)!==0){for(ne=ie+1;ne<=j;ne++)M[ne]=P.get(ne,ie-1);for(fe=ie;fe<=j;fe++){for(Z=0,ne=ie;ne<=j;ne++)Z+=M[ne]*k.get(ne,fe);for(Z=Z/M[ie]/P.get(ie,ie-1),ne=ie;ne<=j;ne++)k.set(ne,fe,k.get(ne,fe)+Z*M[ne])}}}function I_(H,P,M,k,C){let j=H-1,X=0,Z=H-1,ee=Number.EPSILON,ne=0,fe=0,ie=0,xe=0,ze=0,ve=0,Oe=0,Xe=0,ae,Re,Je,Et,Tt,hr,ct,vt,Vn,le,Pe,Ze,Ie,pr,kn;for(ae=0;ae<H;ae++)for((ae<X||ae>Z)&&(M[ae]=C.get(ae,ae),P[ae]=0),Re=Math.max(ae-1,0);Re<H;Re++)fe=fe+Math.abs(C.get(ae,Re));for(;j>=X;){for(Et=j;Et>X&&(ve=Math.abs(C.get(Et-1,Et-1))+Math.abs(C.get(Et,Et)),ve===0&&(ve=fe),!(Math.abs(C.get(Et,Et-1))<ee*ve));)Et--;if(Et===j)C.set(j,j,C.get(j,j)+ne),M[j]=C.get(j,j),P[j]=0,j--,Xe=0;else if(Et===j-1){if(ct=C.get(j,j-1)*C.get(j-1,j),ie=(C.get(j-1,j-1)-C.get(j,j))/2,xe=ie*ie+ct,Oe=Math.sqrt(Math.abs(xe)),C.set(j,j,C.get(j,j)+ne),C.set(j-1,j-1,C.get(j-1,j-1)+ne),vt=C.get(j,j),xe>=0){for(Oe=ie>=0?ie+Oe:ie-Oe,M[j-1]=vt+Oe,M[j]=M[j-1],Oe!==0&&(M[j]=vt-ct/Oe),P[j-1]=0,P[j]=0,vt=C.get(j,j-1),ve=Math.abs(vt)+Math.abs(Oe),ie=vt/ve,xe=Oe/ve,ze=Math.sqrt(ie*ie+xe*xe),ie=ie/ze,xe=xe/ze,Re=j-1;Re<H;Re++)Oe=C.get(j-1,Re),C.set(j-1,Re,xe*Oe+ie*C.get(j,Re)),C.set(j,Re,xe*C.get(j,Re)-ie*Oe);for(ae=0;ae<=j;ae++)Oe=C.get(ae,j-1),C.set(ae,j-1,xe*Oe+ie*C.get(ae,j)),C.set(ae,j,xe*C.get(ae,j)-ie*Oe);for(ae=X;ae<=Z;ae++)Oe=k.get(ae,j-1),k.set(ae,j-1,xe*Oe+ie*k.get(ae,j)),k.set(ae,j,xe*k.get(ae,j)-ie*Oe)}else M[j-1]=vt+ie,M[j]=vt+ie,P[j-1]=Oe,P[j]=-Oe;j=j-2,Xe=0}else{if(vt=C.get(j,j),Vn=0,ct=0,Et<j&&(Vn=C.get(j-1,j-1),ct=C.get(j,j-1)*C.get(j-1,j)),Xe===10){for(ne+=vt,ae=X;ae<=j;ae++)C.set(ae,ae,C.get(ae,ae)-vt);ve=Math.abs(C.get(j,j-1))+Math.abs(C.get(j-1,j-2)),vt=Vn=.75*ve,ct=-.4375*ve*ve}if(Xe===30&&(ve=(Vn-vt)/2,ve=ve*ve+ct,ve>0)){for(ve=Math.sqrt(ve),Vn<vt&&(ve=-ve),ve=vt-ct/((Vn-vt)/2+ve),ae=X;ae<=j;ae++)C.set(ae,ae,C.get(ae,ae)-ve);ne+=ve,vt=Vn=ct=.964}for(Xe=Xe+1,Tt=j-2;Tt>=Et&&(Oe=C.get(Tt,Tt),ze=vt-Oe,ve=Vn-Oe,ie=(ze*ve-ct)/C.get(Tt+1,Tt)+C.get(Tt,Tt+1),xe=C.get(Tt+1,Tt+1)-Oe-ze-ve,ze=C.get(Tt+2,Tt+1),ve=Math.abs(ie)+Math.abs(xe)+Math.abs(ze),ie=ie/ve,xe=xe/ve,ze=ze/ve,!(Tt===Et||Math.abs(C.get(Tt,Tt-1))*(Math.abs(xe)+Math.abs(ze))<ee*(Math.abs(ie)*(Math.abs(C.get(Tt-1,Tt-1))+Math.abs(Oe)+Math.abs(C.get(Tt+1,Tt+1))))));)Tt--;for(ae=Tt+2;ae<=j;ae++)C.set(ae,ae-2,0),ae>Tt+2&&C.set(ae,ae-3,0);for(Je=Tt;Je<=j-1&&(pr=Je!==j-1,Je!==Tt&&(ie=C.get(Je,Je-1),xe=C.get(Je+1,Je-1),ze=pr?C.get(Je+2,Je-1):0,vt=Math.abs(ie)+Math.abs(xe)+Math.abs(ze),vt!==0&&(ie=ie/vt,xe=xe/vt,ze=ze/vt)),vt!==0);Je++)if(ve=Math.sqrt(ie*ie+xe*xe+ze*ze),ie<0&&(ve=-ve),ve!==0){for(Je!==Tt?C.set(Je,Je-1,-ve*vt):Et!==Tt&&C.set(Je,Je-1,-C.get(Je,Je-1)),ie=ie+ve,vt=ie/ve,Vn=xe/ve,Oe=ze/ve,xe=xe/ie,ze=ze/ie,Re=Je;Re<H;Re++)ie=C.get(Je,Re)+xe*C.get(Je+1,Re),pr&&(ie=ie+ze*C.get(Je+2,Re),C.set(Je+2,Re,C.get(Je+2,Re)-ie*Oe)),C.set(Je,Re,C.get(Je,Re)-ie*vt),C.set(Je+1,Re,C.get(Je+1,Re)-ie*Vn);for(ae=0;ae<=Math.min(j,Je+3);ae++)ie=vt*C.get(ae,Je)+Vn*C.get(ae,Je+1),pr&&(ie=ie+Oe*C.get(ae,Je+2),C.set(ae,Je+2,C.get(ae,Je+2)-ie*ze)),C.set(ae,Je,C.get(ae,Je)-ie),C.set(ae,Je+1,C.get(ae,Je+1)-ie*xe);for(ae=X;ae<=Z;ae++)ie=vt*k.get(ae,Je)+Vn*k.get(ae,Je+1),pr&&(ie=ie+Oe*k.get(ae,Je+2),k.set(ae,Je+2,k.get(ae,Je+2)-ie*ze)),k.set(ae,Je,k.get(ae,Je)-ie),k.set(ae,Je+1,k.get(ae,Je+1)-ie*xe)}}}if(fe!==0){for(j=H-1;j>=0;j--)if(ie=M[j],xe=P[j],xe===0)for(Et=j,C.set(j,j,1),ae=j-1;ae>=0;ae--){for(ct=C.get(ae,ae)-ie,ze=0,Re=Et;Re<=j;Re++)ze=ze+C.get(ae,Re)*C.get(Re,j);if(P[ae]<0)Oe=ct,ve=ze;else if(Et=ae,P[ae]===0?C.set(ae,j,ct!==0?-ze/ct:-ze/(ee*fe)):(vt=C.get(ae,ae+1),Vn=C.get(ae+1,ae),xe=(M[ae]-ie)*(M[ae]-ie)+P[ae]*P[ae],hr=(vt*ve-Oe*ze)/xe,C.set(ae,j,hr),C.set(ae+1,j,Math.abs(vt)>Math.abs(Oe)?(-ze-ct*hr)/vt:(-ve-Vn*hr)/Oe)),hr=Math.abs(C.get(ae,j)),ee*hr*hr>1)for(Re=ae;Re<=j;Re++)C.set(Re,j,C.get(Re,j)/hr)}else if(xe<0)for(Et=j-1,Math.abs(C.get(j,j-1))>Math.abs(C.get(j-1,j))?(C.set(j-1,j-1,xe/C.get(j,j-1)),C.set(j-1,j,-(C.get(j,j)-ie)/C.get(j,j-1))):(kn=bm(0,-C.get(j-1,j),C.get(j-1,j-1)-ie,xe),C.set(j-1,j-1,kn[0]),C.set(j-1,j,kn[1])),C.set(j,j-1,0),C.set(j,j,1),ae=j-2;ae>=0;ae--){for(le=0,Pe=0,Re=Et;Re<=j;Re++)le=le+C.get(ae,Re)*C.get(Re,j-1),Pe=Pe+C.get(ae,Re)*C.get(Re,j);if(ct=C.get(ae,ae)-ie,P[ae]<0)Oe=ct,ze=le,ve=Pe;else if(Et=ae,P[ae]===0?(kn=bm(-le,-Pe,ct,xe),C.set(ae,j-1,kn[0]),C.set(ae,j,kn[1])):(vt=C.get(ae,ae+1),Vn=C.get(ae+1,ae),Ze=(M[ae]-ie)*(M[ae]-ie)+P[ae]*P[ae]-xe*xe,Ie=(M[ae]-ie)*2*xe,Ze===0&&Ie===0&&(Ze=ee*fe*(Math.abs(ct)+Math.abs(xe)+Math.abs(vt)+Math.abs(Vn)+Math.abs(Oe))),kn=bm(vt*ze-Oe*le+xe*Pe,vt*ve-Oe*Pe-xe*le,Ze,Ie),C.set(ae,j-1,kn[0]),C.set(ae,j,kn[1]),Math.abs(vt)>Math.abs(Oe)+Math.abs(xe)?(C.set(ae+1,j-1,(-le-ct*C.get(ae,j-1)+xe*C.get(ae,j))/vt),C.set(ae+1,j,(-Pe-ct*C.get(ae,j)-xe*C.get(ae,j-1))/vt)):(kn=bm(-ze-Vn*C.get(ae,j-1),-ve-Vn*C.get(ae,j),Oe,xe),C.set(ae+1,j-1,kn[0]),C.set(ae+1,j,kn[1]))),hr=Math.max(Math.abs(C.get(ae,j-1)),Math.abs(C.get(ae,j))),ee*hr*hr>1)for(Re=ae;Re<=j;Re++)C.set(Re,j-1,C.get(Re,j-1)/hr),C.set(Re,j,C.get(Re,j)/hr)}for(ae=0;ae<H;ae++)if(ae<X||ae>Z)for(Re=ae;Re<H;Re++)k.set(ae,Re,C.get(ae,Re));for(Re=H-1;Re>=X;Re--)for(ae=X;ae<=Z;ae++){for(Oe=0,Je=X;Je<=Math.min(Re,Z);Je++)Oe=Oe+k.get(ae,Je)*C.get(Je,Re);k.set(ae,Re,Oe)}}}function bm(H,P,M,k){let C,j;return Math.abs(M)>Math.abs(k)?(C=k/M,j=M+C*k,[(H+C*P)/j,(P-C*H)/j]):(C=M/k,j=k+C*M,[(C*H+P)/j,(C*P-H)/j])}class H4{constructor(P){if(P=Be.checkMatrix(P),!P.isSymmetric())throw new Error("Matrix is not symmetric");let M=P,k=M.rows,C=new q(k,k),j=!0,X,Z,ee;for(Z=0;Z<k;Z++){let ne=0;for(ee=0;ee<Z;ee++){let fe=0;for(X=0;X<ee;X++)fe+=C.get(ee,X)*C.get(Z,X);fe=(M.get(Z,ee)-fe)/C.get(ee,ee),C.set(Z,ee,fe),ne=ne+fe*fe}for(ne=M.get(Z,Z)-ne,j&&(j=ne>0),C.set(Z,Z,Math.sqrt(Math.max(ne,0))),ee=Z+1;ee<k;ee++)C.set(Z,ee,0)}this.L=C,this.positiveDefinite=j}isPositiveDefinite(){return this.positiveDefinite}solve(P){P=Be.checkMatrix(P);let M=this.L,k=M.rows;if(P.rows!==k)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let C=P.columns,j=P.clone(),X,Z,ee;for(ee=0;ee<k;ee++)for(Z=0;Z<C;Z++){for(X=0;X<ee;X++)j.set(ee,Z,j.get(ee,Z)-j.get(X,Z)*M.get(ee,X));j.set(ee,Z,j.get(ee,Z)/M.get(ee,ee))}for(ee=k-1;ee>=0;ee--)for(Z=0;Z<C;Z++){for(X=ee+1;X<k;X++)j.set(ee,Z,j.get(ee,Z)-j.get(X,Z)*M.get(X,ee));j.set(ee,Z,j.get(ee,Z)/M.get(ee,ee))}return j}get lowerTriangularMatrix(){return this.L}}class Y4{constructor(P,M={}){P=Be.checkMatrix(P);let{Y:k}=M;const{scaleScores:C=!1,maxIterations:j=1e3,terminationCriteria:X=1e-10}=M;let Z;if(k){if(t.isAnyArray(k)&&typeof k[0]=="number"?k=q.columnVector(k):k=Be.checkMatrix(k),k.rows!==P.rows)throw new Error("Y should have the same number of rows as X");Z=k.getColumnVector(0)}else Z=P.getColumnVector(0);let ee=1,ne,fe,ie,xe;for(let ze=0;ze<j&&ee>X;ze++)ie=P.transpose().mmul(Z).div(Z.transpose().mmul(Z).get(0,0)),ie=ie.div(ie.norm()),ne=P.mmul(ie).div(ie.transpose().mmul(ie).get(0,0)),ze>0&&(ee=ne.clone().sub(xe).pow(2).sum()),xe=ne.clone(),k?(fe=k.transpose().mmul(ne).div(ne.transpose().mmul(ne).get(0,0)),fe=fe.div(fe.norm()),Z=k.mmul(fe).div(fe.transpose().mmul(fe).get(0,0))):Z=ne;if(k){let ze=P.transpose().mmul(ne).div(ne.transpose().mmul(ne).get(0,0));ze=ze.div(ze.norm());let ve=P.clone().sub(ne.clone().mmul(ze.transpose())),Oe=Z.transpose().mmul(ne).div(ne.transpose().mmul(ne).get(0,0)),Xe=k.clone().sub(ne.clone().mulS(Oe.get(0,0)).mmul(fe.transpose()));this.t=ne,this.p=ze.transpose(),this.w=ie.transpose(),this.q=fe,this.u=Z,this.s=ne.transpose().mmul(ne),this.xResidual=ve,this.yResidual=Xe,this.betas=Oe}else this.w=ie.transpose(),this.s=ne.transpose().mmul(ne).sqrt(),C?this.t=ne.clone().div(this.s.get(0,0)):this.t=ne,this.xResidual=P.sub(ne.mmul(ie.transpose()))}}return Vt.AbstractMatrix=W,Vt.CHO=H4,Vt.CholeskyDecomposition=H4,Vt.DistanceMatrix=J,Vt.EVD=Zi,Vt.EigenvalueDecomposition=Zi,Vt.LU=Ht,Vt.LuDecomposition=Ht,Vt.Matrix=q,Vt.MatrixColumnSelectionView=de,Vt.MatrixColumnView=se,Vt.MatrixFlipColumnView=ye,Vt.MatrixFlipRowView=_e,Vt.MatrixRowSelectionView=ue,Vt.MatrixRowView=Ee,Vt.MatrixSelectionView=he,Vt.MatrixSubView=ke,Vt.MatrixTransposeView=Se,Vt.NIPALS=Y4,Vt.Nipals=Y4,Vt.QR=At,Vt.QrDecomposition=At,Vt.SVD=nn,Vt.SingularValueDecomposition=nn,Vt.SymmetricMatrix=K,Vt.WrapperMatrix1D=Me,Vt.WrapperMatrix2D=Be,Vt.correlation=_i,Vt.covariance=Jr,Vt.default=q,Vt.determinant=gn,Vt.inverse=sn,Vt.linearDependencies=vn,Vt.pseudoInverse=ci,Vt.solve=Zt,Vt.wrap=en,Vt}var $w=PQe();const q$=dp($w),ec=$w.Matrix,rce=$w.SingularValueDecomposition;q$.Matrix?q$.Matrix:$w.Matrix;const DQe={center:[0,0],linkDistance:50};class ice{constructor(e={}){this.options=e,this.id="mds",this.options=Object.assign(Object.assign({},DQe),e)}execute(e,n){return zt(this,void 0,void 0,function*(){return this.genericMDSLayout(!1,e,n)})}assign(e,n){return zt(this,void 0,void 0,function*(){yield this.genericMDSLayout(!0,e,n)})}genericMDSLayout(e,n,r){return zt(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{center:a=[0,0],linkDistance:o=50}=i,s=n.getAllNodes(),l=n.getAllEdges();if(!(s!=null&&s.length)||s.length===1)return vd(n,e,a);const u=Que({nodes:s,edges:l}),c=Jue(u);IQe(c);const f=jJe(c,o),d=LQe(f),h=[];return d.forEach((g,v)=>{const m=to(s[v]);m.data.x=g[0]+a[0],m.data.y=g[1]+a[1],h.push(m)}),e&&h.forEach(g=>n.mergeNodeData(g.id,{x:g.data.x,y:g.data.y})),{nodes:h,edges:l}})}}const IQe=t=>{let e=-999999;t.forEach(n=>{n.forEach(r=>{r!==1/0&&e<r&&(e=r)})}),t.forEach((n,r)=>{n.forEach((i,a)=>{i===1/0&&(t[r][a]=e)})})},LQe=t=>{const n=ec.mul(ec.pow(t,2),-.5),r=n.mean("row"),i=n.mean("column"),a=n.mean();n.add(a).subRowVector(r).subColumnVector(i);const o=new rce(n),s=ec.sqrt(o.diagonalMatrix).diagonal();return o.leftSingularVectors.toJSON().map(l=>ec.mul([l],[s]).toJSON()[0].splice(0,2))};function xD(t){return!!t.tick&&!!t.stop}const RQe={gForce:!0,force2:!0,d3force:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0},NQe={center:[0,0],comboPadding:10,treeKey:"combo"};class FQe{constructor(e={}){this.options=e,this.id="comboCombined",this.options=Object.assign(Object.assign({},NQe),e)}execute(e,n){return zt(this,void 0,void 0,function*(){return this.genericComboCombinedLayout(!1,e,n)})}assign(e,n){return zt(this,void 0,void 0,function*(){yield this.genericComboCombinedLayout(!0,e,n)})}genericComboCombinedLayout(e,n,r){return zt(this,void 0,void 0,function*(){const i=this.initVals(Object.assign(Object.assign({},this.options),r)),{center:a,treeKey:o,outerLayout:s}=i,l=n.getAllNodes().filter(S=>!S.data._isCombo),u=n.getAllNodes().filter(S=>S.data._isCombo),c=n.getAllEdges(),f=l==null?void 0:l.length;if(!f||f===1)return vd(n,e,a);const d=[],h=new Map;l.forEach(S=>{h.set(S.id,S)});const p=new Map;u.forEach(S=>{p.set(S.id,S)});const g=new Map,v=this.getInnerGraphs(n,o,h,p,c,i,g);yield Promise.all(v);const m=new Map,y=[],b=new Map;let x=!0;n.getRoots(o).forEach(S=>{const O=g.get(S.id),A=p.get(S.id)||h.get(S.id),T={id:S.id,data:Object.assign(Object.assign({},S.data),{x:O.data.x||A.data.x,y:O.data.y||A.data.y,fx:O.data.fx||A.data.fx,fy:O.data.fy||A.data.fy,mass:O.data.mass||A.data.mass,size:O.data.size})};y.push(T),m.set(S.id,!0),!isNaN(T.data.x)&&T.data.x!==0&&!isNaN(T.data.y)&&T.data.y!==0?x=!1:(T.data.x=Math.random()*100,T.data.y=Math.random()*100),vD(n,[S],I=>{I.id!==S.id&&b.set(I.id,S.id)},"TB",o)});const w=[];c.forEach(S=>{const O=b.get(S.source)||S.source,A=b.get(S.target)||S.target;O!==A&&m.has(O)&&m.has(A)&&w.push({id:S.id,source:O,target:A,data:{}})});let _;if(y!=null&&y.length){if(y.length===1)y[0].data.x=a[0],y[0].data.y=a[1];else{const S=new xi({nodes:y,edges:w}),O=s||new nce;x&&RQe[O.id]&&(yield(y.length<100?new ice:new yD).assign(S));const A=Object.assign({center:a,kg:5,preventOverlap:!0,animate:!1},O.id==="force"?{gravity:1,factor:4,linkDistance:(T,I,D)=>{const R=Math.max(...I.data.size)||32,F=Math.max(...D.data.size)||32;return R/2+F/2+200}}:{});_=yield W$(O,S,A)}g.forEach(S=>{var O;const A=_.nodes.find(D=>D.id===S.id);if(A){const{x:D,y:R}=A.data;S.data.visited=!0,S.data.x=D,S.data.y=R,d.push({id:S.id,data:{x:D,y:R}})}const{x:T,y:I}=S.data;(O=S.data.nodes)===null||O===void 0||O.forEach(D=>{d.push({id:D.id,data:{x:D.data.x+T,y:D.data.y+I}})})}),g.forEach(({data:S})=>{const{x:O,y:A,visited:T,nodes:I}=S;I==null||I.forEach(D=>{if(!T){const R=d.find(F=>F.id===D.id);R.data.x+=O||0,R.data.y+=A||0}})})}return e&&d.forEach(S=>{n.mergeNodeData(S.id,{x:S.data.x,y:S.data.y})}),{nodes:d,edges:c}})}initVals(e){const n=Object.assign({},e),{nodeSize:r,spacing:i,comboPadding:a}=e;let o,s;if(je(i)?s=()=>i:Ue(i)?s=i:s=()=>0,n.spacing=s,!r)o=u=>{const c=s(u);return u.size?Hl(u.size)?((u.size[0]>u.size[1]?u.size[0]:u.size[1])+c)/2:jr(u.size)?((u.size.width>u.size.height?u.size.width:u.size.height)+c)/2:(u.size+c)/2:32+c/2};else if(Ue(r))o=u=>{const c=r(u),f=s(u);return Hl(u.size)?((u.size[0]>u.size[1]?u.size[0]:u.size[1])+f)/2:((c||32)+f)/2};else if(Hl(r)){const c=(r[0]>r[1]?r[0]:r[1])/2;o=f=>c+s(f)/2}else{const u=r/2;o=c=>u+s(c)/2}n.nodeSize=o;let l;return je(a)?l=()=>a:Hl(a)?l=()=>Math.max.apply(null,a):Ue(a)?l=a:l=()=>0,n.comboPadding=l,n}getInnerGraphs(e,n,r,i,a,o,s){const{nodeSize:l,comboPadding:u,spacing:c,innerLayout:f}=o,d=f||new yD({}),h={center:[0,0],preventOverlap:!0,nodeSpacing:c},p=[],g=v=>{let m=(u==null?void 0:u(v))||10;return Hl(m)&&(m=Math.max(...m)),{size:m?[m*2,m*2]:[30,30],padding:m}};return e.getRoots(n).forEach(v=>{s.set(v.id,{id:v.id,data:{nodes:[],size:g(v).size}});let m=Promise.resolve();vD(e,[v],y=>{var b;if(!y.data._isCombo)return;const{size:x,padding:w}=g(y);if(!(!((b=e.getChildren(y.id,n))===null||b===void 0)&&b.length))s.set(y.id,{id:y.id,data:Object.assign(Object.assign({},y.data),{size:x})});else{const _=s.get(y.id);s.set(y.id,{id:y.id,data:Object.assign({nodes:[]},_==null?void 0:_.data)});const E=new Map,S=e.getChildren(y.id,n).map(T=>{if(T.data._isCombo)return s.has(T.id)||s.set(T.id,{id:T.id,data:Object.assign({},T.data)}),E.set(T.id,!0),s.get(T.id);const I=r.get(T.id)||i.get(T.id);return E.set(T.id,!0),{id:T.id,data:Object.assign(Object.assign({},I.data),T.data)}}),O={nodes:S,edges:a.filter(T=>E.has(T.source)&&E.has(T.target))};let A=1/0;S.forEach(T=>{var I;let{size:D}=T.data;D||(D=((I=s.get(T.id))===null||I===void 0?void 0:I.data.size)||(l==null?void 0:l(T))||[30,30]),je(D)&&(D=[D,D]);const[R,F]=D;A>R&&(A=R),A>F&&(A=F),T.data.size=D}),m=m.then(()=>zt(this,void 0,void 0,function*(){const T=new xi(O);yield W$(d,T,h,!0);const{minX:I,minY:D,maxX:R,maxY:F}=BJe(S),z={x:(R+I)/2,y:(F+D)/2};O.nodes.forEach(L=>{L.data.x-=z.x,L.data.y-=z.y});const N=[Math.max(R-I,A)+w*2,Math.max(F-D,A)+w*2];s.get(y.id).data.size=N,s.get(y.id).data.nodes=S}))}return!0},"BT",n),p.push(m)}),p}}function W$(t,e,n,r){var i;return zt(this,void 0,void 0,function*(){return xD(t)?(t.execute(e,n),t.stop(),t.tick((i=n.iterations)!==null&&i!==void 0?i:300)):r?yield t.assign(e,n):yield t.execute(e,n)})}class zQe{constructor(e){this.id="d3-force",this.config={inputNodeAttrs:["x","y","vx","vy","fx","fy"],outputNodeAttrs:["x","y","vx","vy"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource"]},this.forceMap={link:sie,manyBody:pie,center:aie,collide:X8e,radial:f9e,x:gie,y:vie},this.options={link:{id:n=>n.id},manyBody:{},center:{x:0,y:0}},this.context={options:{},assign:!1,nodes:[],edges:[]},me(this.options,e),this.options.forceSimulation&&(this.simulation=this.options.forceSimulation)}execute(e,n){return zt(this,void 0,void 0,function*(){return this.genericLayout(!1,e,n)})}assign(e,n){return zt(this,void 0,void 0,function*(){yield this.genericLayout(!0,e,n)})}stop(){this.simulation.stop()}tick(e){return this.simulation.tick(e),this.getResult()}restart(){this.simulation.restart()}setFixedPosition(e,n){const r=this.context.nodes.find(i=>i.id===e);r&&n.forEach((i,a)=>{if(typeof i=="number"||i===null){const o=["fx","fy","fz"][a];r[o]=i}})}getOptions(e){var n,r;const i=me({},this.options,e);return i.collide&&((n=i.collide)===null||n===void 0?void 0:n.radius)===void 0&&(i.collide=i.collide||{},i.collide.radius=(r=i.nodeSize)!==null&&r!==void 0?r:10),i.iterations===void 0&&(i.link&&i.link.iterations===void 0&&(i.iterations=i.link.iterations),i.collide&&i.collide.iterations===void 0&&(i.iterations=i.collide.iterations)),this.context.options=i,i}genericLayout(e,n,r){var i;return zt(this,void 0,void 0,function*(){const a=this.getOptions(r),o=n.getAllNodes().map(({id:c,data:f})=>Object.assign(Object.assign({id:c},f),mc(f.data,this.config.inputNodeAttrs))),s=n.getAllEdges().map(c=>Object.assign({},c));Object.assign(this.context,{assign:e,nodes:o,edges:s,graph:n});const l=new Promise(c=>{this.resolver=c}),u=this.setSimulation(a);return u.nodes(o),(i=u.force("link"))===null||i===void 0||i.links(s),l})}getResult(){const{assign:e,nodes:n,edges:r,graph:i}=this.context,a=n.map(s=>({id:s.id,data:Object.assign(Object.assign({},s.data),mc(s,this.config.outputNodeAttrs))})),o=r.map(({id:s,source:l,target:u,data:c})=>({id:s,source:typeof l=="object"?l.id:l,target:typeof u=="object"?u.id:u,data:c}));return e&&a.forEach(s=>i.mergeNodeData(s.id,s.data)),{nodes:a,edges:o}}initSimulation(){return hie()}setSimulation(e){const n=this.simulation||this.options.forceSimulation||this.initSimulation();return this.simulation||(this.simulation=n.on("tick",()=>{var r;return(r=e.onTick)===null||r===void 0?void 0:r.call(e,this.getResult())}).on("end",()=>{var r;return(r=this.resolver)===null||r===void 0?void 0:r.call(this,this.getResult())})),G$(n,this.config.simulationAttrs.map(r=>[r,e[r]])),Object.entries(this.forceMap).forEach(([r,i])=>{const a=r;if(e[r]){let o=n.force(a);o||(o=i(),n.force(a,o)),G$(o,Object.entries(e[a]))}else n.force(a,null)}),n}}const G$=(t,e)=>e.reduce((n,[r,i])=>!n[r]||i===void 0?n:n[r].call(t,i),t);var $O,H$;function jQe(){if(H$)return $O;H$=1;function t(){this.__data__=[],this.size=0}return $O=t,$O}var VO,Y$;function Dp(){if(Y$)return VO;Y$=1;function t(e,n){return e===n||e!==e&&n!==n}return VO=t,VO}var qO,U$;function Vw(){if(U$)return qO;U$=1;var t=Dp();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return qO=e,qO}var WO,X$;function BQe(){if(X$)return WO;X$=1;var t=Vw(),e=Array.prototype,n=e.splice;function r(i){var a=this.__data__,o=t(a,i);if(o<0)return!1;var s=a.length-1;return o==s?a.pop():n.call(a,o,1),--this.size,!0}return WO=r,WO}var GO,Z$;function $Qe(){if(Z$)return GO;Z$=1;var t=Vw();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return GO=e,GO}var HO,K$;function VQe(){if(K$)return HO;K$=1;var t=Vw();function e(n){return t(this.__data__,n)>-1}return HO=e,HO}var YO,J$;function qQe(){if(J$)return YO;J$=1;var t=Vw();function e(n,r){var i=this.__data__,a=t(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return YO=e,YO}var UO,Q$;function qw(){if(Q$)return UO;Q$=1;var t=jQe(),e=BQe(),n=$Qe(),r=VQe(),i=qQe();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var u=o[s];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,UO=a,UO}var XO,eV;function WQe(){if(eV)return XO;eV=1;var t=qw();function e(){this.__data__=new t,this.size=0}return XO=e,XO}var ZO,tV;function GQe(){if(tV)return ZO;tV=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return ZO=t,ZO}var KO,nV;function HQe(){if(nV)return KO;nV=1;function t(e){return this.__data__.get(e)}return KO=t,KO}var JO,rV;function YQe(){if(rV)return JO;rV=1;function t(e){return this.__data__.has(e)}return JO=t,JO}var QO,iV;function ace(){if(iV)return QO;iV=1;var t=typeof Sm=="object"&&Sm&&Sm.Object===Object&&Sm;return QO=t,QO}var ek,aV;function Ls(){if(aV)return ek;aV=1;var t=ace(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return ek=n,ek}var tk,oV;function Ip(){if(oV)return tk;oV=1;var t=Ls(),e=t.Symbol;return tk=e,tk}var nk,sV;function UQe(){if(sV)return nk;sV=1;var t=Ip(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function a(o){var s=n.call(o,i),l=o[i];try{o[i]=void 0;var u=!0}catch{}var c=r.call(o);return u&&(s?o[i]=l:delete o[i]),c}return nk=a,nk}var rk,lV;function XQe(){if(lV)return rk;lV=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return rk=n,rk}var ik,uV;function md(){if(uV)return ik;uV=1;var t=Ip(),e=UQe(),n=XQe(),r="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function o(s){return s==null?s===void 0?i:r:a&&a in Object(s)?e(s):n(s)}return ik=o,ik}var ak,cV;function Zo(){if(cV)return ak;cV=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return ak=t,ak}var ok,fV;function dm(){if(fV)return ok;fV=1;var t=md(),e=Zo(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(s){if(!e(s))return!1;var l=t(s);return l==r||l==i||l==n||l==a}return ok=o,ok}var sk,dV;function ZQe(){if(dV)return sk;dV=1;var t=Ls(),e=t["__core-js_shared__"];return sk=e,sk}var lk,hV;function KQe(){if(hV)return lk;hV=1;var t=ZQe(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!e&&e in r}return lk=n,lk}var uk,pV;function oce(){if(pV)return uk;pV=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return uk=n,uk}var ck,gV;function JQe(){if(gV)return ck;gV=1;var t=dm(),e=KQe(),n=Zo(),r=oce(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,l=o.toString,u=s.hasOwnProperty,c=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(d){if(!n(d)||e(d))return!1;var h=t(d)?c:a;return h.test(r(d))}return ck=f,ck}var fk,vV;function QQe(){if(vV)return fk;vV=1;function t(e,n){return e==null?void 0:e[n]}return fk=t,fk}var dk,mV;function yd(){if(mV)return dk;mV=1;var t=JQe(),e=QQe();function n(r,i){var a=e(r,i);return t(a)?a:void 0}return dk=n,dk}var hk,yV;function x4(){if(yV)return hk;yV=1;var t=yd(),e=Ls(),n=t(e,"Map");return hk=n,hk}var pk,bV;function Ww(){if(bV)return pk;bV=1;var t=yd(),e=t(Object,"create");return pk=e,pk}var gk,xV;function eet(){if(xV)return gk;xV=1;var t=Ww();function e(){this.__data__=t?t(null):{},this.size=0}return gk=e,gk}var vk,wV;function tet(){if(wV)return vk;wV=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return vk=t,vk}var mk,_V;function net(){if(_V)return mk;_V=1;var t=Ww(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var o=this.__data__;if(t){var s=o[a];return s===e?void 0:s}return r.call(o,a)?o[a]:void 0}return mk=i,mk}var yk,SV;function ret(){if(SV)return yk;SV=1;var t=Ww(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var a=this.__data__;return t?a[i]!==void 0:n.call(a,i)}return yk=r,yk}var bk,EV;function iet(){if(EV)return bk;EV=1;var t=Ww(),e="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=t&&i===void 0?e:i,this}return bk=n,bk}var xk,OV;function aet(){if(OV)return xk;OV=1;var t=eet(),e=tet(),n=net(),r=ret(),i=iet();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var u=o[s];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,xk=a,xk}var wk,kV;function oet(){if(kV)return wk;kV=1;var t=aet(),e=qw(),n=x4();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return wk=r,wk}var _k,AV;function set(){if(AV)return _k;AV=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return _k=t,_k}var Sk,TV;function Gw(){if(TV)return Sk;TV=1;var t=set();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Sk=e,Sk}var Ek,MV;function uet(){if(MV)return Ek;MV=1;var t=Gw();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return Ek=e,Ek}var Ok,CV;function cet(){if(CV)return Ok;CV=1;var t=Gw();function e(n){return t(this,n).get(n)}return Ok=e,Ok}var kk,PV;function fet(){if(PV)return kk;PV=1;var t=Gw();function e(n){return t(this,n).has(n)}return kk=e,kk}var Ak,DV;function det(){if(DV)return Ak;DV=1;var t=Gw();function e(n,r){var i=t(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return Ak=e,Ak}var Tk,IV;function w4(){if(IV)return Tk;IV=1;var t=oet(),e=uet(),n=cet(),r=fet(),i=det();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var u=o[s];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Tk=a,Tk}var Mk,LV;function het(){if(LV)return Mk;LV=1;var t=qw(),e=x4(),n=w4(),r=200;function i(a,o){var s=this.__data__;if(s instanceof t){var l=s.__data__;if(!e||l.length<r-1)return l.push([a,o]),this.size=++s.size,this;s=this.__data__=new n(l)}return s.set(a,o),this.size=s.size,this}return Mk=i,Mk}var Ck,RV;function Hw(){if(RV)return Ck;RV=1;var t=qw(),e=WQe(),n=GQe(),r=HQe(),i=YQe(),a=het();function o(s){var l=this.__data__=new t(s);this.size=l.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=a,Ck=o,Ck}var Pk,NV;function _4(){if(NV)return Pk;NV=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i&&n(e[r],r,e)!==!1;);return e}return Pk=t,Pk}var Dk,FV;function sce(){if(FV)return Dk;FV=1;var t=yd(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Dk=e,Dk}var Ik,zV;function Yw(){if(zV)return Ik;zV=1;var t=sce();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Ik=e,Ik}var Lk,jV;function Uw(){if(jV)return Lk;jV=1;var t=Yw(),e=Dp(),n=Object.prototype,r=n.hasOwnProperty;function i(a,o,s){var l=a[o];(!(r.call(a,o)&&e(l,s))||s===void 0&&!(o in a))&&t(a,o,s)}return Lk=i,Lk}var Rk,BV;function hm(){if(BV)return Rk;BV=1;var t=Uw(),e=Yw();function n(r,i,a,o){var s=!a;a||(a={});for(var l=-1,u=i.length;++l<u;){var c=i[l],f=o?o(a[c],r[c],c,a,r):void 0;f===void 0&&(f=r[c]),s?e(a,c,f):t(a,c,f)}return a}return Rk=n,Rk}var Nk,$V;function pet(){if($V)return Nk;$V=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return Nk=t,Nk}var Fk,VV;function Ml(){if(VV)return Fk;VV=1;function t(e){return e!=null&&typeof e=="object"}return Fk=t,Fk}var zk,qV;function get(){if(qV)return zk;qV=1;var t=md(),e=Ml(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return zk=r,zk}var jk,WV;function pm(){if(WV)return jk;WV=1;var t=get(),e=Ml(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=t(function(){return arguments}())?t:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return jk=a,jk}var Bk,GV;function ui(){if(GV)return Bk;GV=1;var t=Array.isArray;return Bk=t,Bk}var jg={exports:{}},$k,HV;function vet(){if(HV)return $k;HV=1;function t(){return!1}return $k=t,$k}jg.exports;var YV;function Lp(){return YV||(YV=1,function(t,e){var n=Ls(),r=vet(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,s=o?n.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||r;t.exports=u}(jg,jg.exports)),jg.exports}var Vk,UV;function Xw(){if(UV)return Vk;UV=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return Vk=n,Vk}var qk,XV;function S4(){if(XV)return qk;XV=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return qk=e,qk}var Wk,ZV;function met(){if(ZV)return Wk;ZV=1;var t=md(),e=S4(),n=Ml(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",s="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",f="[object Object]",d="[object RegExp]",h="[object Set]",p="[object String]",g="[object WeakMap]",v="[object ArrayBuffer]",m="[object DataView]",y="[object Float32Array]",b="[object Float64Array]",x="[object Int8Array]",w="[object Int16Array]",_="[object Int32Array]",E="[object Uint8Array]",S="[object Uint8ClampedArray]",O="[object Uint16Array]",A="[object Uint32Array]",T={};T[y]=T[b]=T[x]=T[w]=T[_]=T[E]=T[S]=T[O]=T[A]=!0,T[r]=T[i]=T[v]=T[a]=T[m]=T[o]=T[s]=T[l]=T[u]=T[c]=T[f]=T[d]=T[h]=T[p]=T[g]=!1;function I(D){return n(D)&&e(D.length)&&!!T[t(D)]}return Wk=I,Wk}var Gk,KV;function Zw(){if(KV)return Gk;KV=1;function t(e){return function(n){return e(n)}}return Gk=t,Gk}var Bg={exports:{}};Bg.exports;var JV;function E4(){return JV||(JV=1,function(t,e){var n=ace(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,o=a&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s}(Bg,Bg.exports)),Bg.exports}var Hk,QV;function gm(){if(QV)return Hk;QV=1;var t=met(),e=Zw(),n=E4(),r=n&&n.isTypedArray,i=r?e(r):t;return Hk=i,Hk}var Yk,eq;function lce(){if(eq)return Yk;eq=1;var t=pet(),e=pm(),n=ui(),r=Lp(),i=Xw(),a=gm(),o=Object.prototype,s=o.hasOwnProperty;function l(u,c){var f=n(u),d=!f&&e(u),h=!f&&!d&&r(u),p=!f&&!d&&!h&&a(u),g=f||d||h||p,v=g?t(u.length,String):[],m=v.length;for(var y in u)(c||s.call(u,y))&&!(g&&(y=="length"||h&&(y=="offset"||y=="parent")||p&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||i(y,m)))&&v.push(y);return v}return Yk=l,Yk}var Uk,tq;function Kw(){if(tq)return Uk;tq=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return Uk=e,Uk}var Xk,nq;function uce(){if(nq)return Xk;nq=1;function t(e,n){return function(r){return e(n(r))}}return Xk=t,Xk}var Zk,rq;function yet(){if(rq)return Zk;rq=1;var t=uce(),e=t(Object.keys,Object);return Zk=e,Zk}var Kk,iq;function O4(){if(iq)return Kk;iq=1;var t=Kw(),e=yet(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!t(a))return e(a);var o=[];for(var s in Object(a))r.call(a,s)&&s!="constructor"&&o.push(s);return o}return Kk=i,Kk}var Jk,aq;function mu(){if(aq)return Jk;aq=1;var t=dm(),e=S4();function n(r){return r!=null&&e(r.length)&&!t(r)}return Jk=n,Jk}var Qk,oq;function qc(){if(oq)return Qk;oq=1;var t=lce(),e=O4(),n=mu();function r(i){return n(i)?t(i):e(i)}return Qk=r,Qk}var eA,sq;function bet(){if(sq)return eA;sq=1;var t=hm(),e=qc();function n(r,i){return r&&t(i,e(i),r)}return eA=n,eA}var tA,lq;function xet(){if(lq)return tA;lq=1;function t(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}return tA=t,tA}var nA,uq;function wet(){if(uq)return nA;uq=1;var t=Zo(),e=Kw(),n=xet(),r=Object.prototype,i=r.hasOwnProperty;function a(o){if(!t(o))return n(o);var s=e(o),l=[];for(var u in o)u=="constructor"&&(s||!i.call(o,u))||l.push(u);return l}return nA=a,nA}var rA,cq;function bd(){if(cq)return rA;cq=1;var t=lce(),e=wet(),n=mu();function r(i){return n(i)?t(i,!0):e(i)}return rA=r,rA}var iA,fq;function _et(){if(fq)return iA;fq=1;var t=hm(),e=bd();function n(r,i){return r&&t(i,e(i),r)}return iA=n,iA}var $g={exports:{}};$g.exports;var dq;function cce(){return dq||(dq=1,function(t,e){var n=Ls(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,o=a?n.Buffer:void 0,s=o?o.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var f=u.length,d=s?s(f):new u.constructor(f);return u.copy(d),d}t.exports=l}($g,$g.exports)),$g.exports}var aA,hq;function fce(){if(hq)return aA;hq=1;function t(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}return aA=t,aA}var oA,pq;function dce(){if(pq)return oA;pq=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=0,o=[];++r<i;){var s=e[r];n(s,r,e)&&(o[a++]=s)}return o}return oA=t,oA}var sA,gq;function hce(){if(gq)return sA;gq=1;function t(){return[]}return sA=t,sA}var lA,vq;function k4(){if(vq)return lA;vq=1;var t=dce(),e=hce(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(s){return r.call(o,s)}))}:e;return lA=a,lA}var uA,mq;function Eet(){if(mq)return uA;mq=1;var t=hm(),e=k4();function n(r,i){return t(r,e(r),i)}return uA=n,uA}var cA,yq;function A4(){if(yq)return cA;yq=1;function t(e,n){for(var r=-1,i=n.length,a=e.length;++r<i;)e[a+r]=n[r];return e}return cA=t,cA}var fA,bq;function Jw(){if(bq)return fA;bq=1;var t=uce(),e=t(Object.getPrototypeOf,Object);return fA=e,fA}var dA,xq;function pce(){if(xq)return dA;xq=1;var t=A4(),e=Jw(),n=k4(),r=hce(),i=Object.getOwnPropertySymbols,a=i?function(o){for(var s=[];o;)t(s,n(o)),o=e(o);return s}:r;return dA=a,dA}var hA,wq;function Oet(){if(wq)return hA;wq=1;var t=hm(),e=pce();function n(r,i){return t(r,e(r),i)}return hA=n,hA}var pA,_q;function gce(){if(_q)return pA;_q=1;var t=A4(),e=ui();function n(r,i,a){var o=i(r);return e(r)?o:t(o,a(r))}return pA=n,pA}var gA,Sq;function vce(){if(Sq)return gA;Sq=1;var t=gce(),e=k4(),n=qc();function r(i){return t(i,n,e)}return gA=r,gA}var vA,Eq;function ket(){if(Eq)return vA;Eq=1;var t=gce(),e=pce(),n=bd();function r(i){return t(i,n,e)}return vA=r,vA}var mA,Oq;function Aet(){if(Oq)return mA;Oq=1;var t=yd(),e=Ls(),n=t(e,"DataView");return mA=n,mA}var yA,kq;function Tet(){if(kq)return yA;kq=1;var t=yd(),e=Ls(),n=t(e,"Promise");return yA=n,yA}var bA,Aq;function mce(){if(Aq)return bA;Aq=1;var t=yd(),e=Ls(),n=t(e,"Set");return bA=n,bA}var xA,Tq;function Met(){if(Tq)return xA;Tq=1;var t=yd(),e=Ls(),n=t(e,"WeakMap");return xA=n,xA}var wA,Mq;function Rp(){if(Mq)return wA;Mq=1;var t=Aet(),e=x4(),n=Tet(),r=mce(),i=Met(),a=md(),o=oce(),s="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",f="[object WeakMap]",d="[object DataView]",h=o(t),p=o(e),g=o(n),v=o(r),m=o(i),y=a;return(t&&y(new t(new ArrayBuffer(1)))!=d||e&&y(new e)!=s||n&&y(n.resolve())!=u||r&&y(new r)!=c||i&&y(new i)!=f)&&(y=function(b){var x=a(b),w=x==l?b.constructor:void 0,_=w?o(w):"";if(_)switch(_){case h:return d;case p:return s;case g:return u;case v:return c;case m:return f}return x}),wA=y,wA}var _A,Cq;function Cet(){if(Cq)return _A;Cq=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return _A=n,_A}var SA,Pq;function yce(){if(Pq)return SA;Pq=1;var t=Ls(),e=t.Uint8Array;return SA=e,SA}var EA,Dq;function T4(){if(Dq)return EA;Dq=1;var t=yce();function e(n){var r=new n.constructor(n.byteLength);return new t(r).set(new t(n)),r}return EA=e,EA}var OA,Iq;function Pet(){if(Iq)return OA;Iq=1;var t=T4();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return OA=e,OA}var kA,Lq;function Det(){if(Lq)return kA;Lq=1;var t=/\w*$/;function e(n){var r=new n.constructor(n.source,t.exec(n));return r.lastIndex=n.lastIndex,r}return kA=e,kA}var AA,Rq;function Iet(){if(Rq)return AA;Rq=1;var t=Ip(),e=t?t.prototype:void 0,n=e?e.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return AA=r,AA}var TA,Nq;function bce(){if(Nq)return TA;Nq=1;var t=T4();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return TA=e,TA}var MA,Fq;function Let(){if(Fq)return MA;Fq=1;var t=T4(),e=Pet(),n=Det(),r=Iet(),i=bce(),a="[object Boolean]",o="[object Date]",s="[object Map]",l="[object Number]",u="[object RegExp]",c="[object Set]",f="[object String]",d="[object Symbol]",h="[object ArrayBuffer]",p="[object DataView]",g="[object Float32Array]",v="[object Float64Array]",m="[object Int8Array]",y="[object Int16Array]",b="[object Int32Array]",x="[object Uint8Array]",w="[object Uint8ClampedArray]",_="[object Uint16Array]",E="[object Uint32Array]";function S(O,A,T){var I=O.constructor;switch(A){case h:return t(O);case a:case o:return new I(+O);case p:return e(O,T);case g:case v:case m:case y:case b:case x:case w:case _:case E:return i(O,T);case s:return new I;case l:case f:return new I(O);case u:return n(O);case c:return new I;case d:return r(O)}}return MA=S,MA}var CA,zq;function xce(){if(zq)return CA;zq=1;var t=Zo(),e=Object.create,n=function(){function r(){}return function(i){if(!t(i))return{};if(e)return e(i);r.prototype=i;var a=new r;return r.prototype=void 0,a}}();return CA=n,CA}var PA,jq;function wce(){if(jq)return PA;jq=1;var t=xce(),e=Jw(),n=Kw();function r(i){return typeof i.constructor=="function"&&!n(i)?t(e(i)):{}}return PA=r,PA}var DA,Bq;function Ret(){if(Bq)return DA;Bq=1;var t=Rp(),e=Ml(),n="[object Map]";function r(i){return e(i)&&t(i)==n}return DA=r,DA}var IA,$q;function Net(){if($q)return IA;$q=1;var t=Ret(),e=Zw(),n=E4(),r=n&&n.isMap,i=r?e(r):t;return IA=i,IA}var LA,Vq;function Fet(){if(Vq)return LA;Vq=1;var t=Rp(),e=Ml(),n="[object Set]";function r(i){return e(i)&&t(i)==n}return LA=r,LA}var RA,qq;function zet(){if(qq)return RA;qq=1;var t=Fet(),e=Zw(),n=E4(),r=n&&n.isSet,i=r?e(r):t;return RA=i,RA}var NA,Wq;function _ce(){if(Wq)return NA;Wq=1;var t=Hw(),e=_4(),n=Uw(),r=bet(),i=_et(),a=cce(),o=fce(),s=Eet(),l=Oet(),u=vce(),c=ket(),f=Rp(),d=Cet(),h=Let(),p=wce(),g=ui(),v=Lp(),m=Net(),y=Zo(),b=zet(),x=qc(),w=bd(),_=1,E=2,S=4,O="[object Arguments]",A="[object Array]",T="[object Boolean]",I="[object Date]",D="[object Error]",R="[object Function]",F="[object GeneratorFunction]",z="[object Map]",N="[object Number]",L="[object Object]",B="[object RegExp]",$="[object Set]",G="[object String]",W="[object Symbol]",U="[object WeakMap]",Y="[object ArrayBuffer]",q="[object DataView]",K="[object Float32Array]",J="[object Float64Array]",Q="[object Int8Array]",se="[object Int16Array]",de="[object Int32Array]",ye="[object Uint8Array]",_e="[object Uint8ClampedArray]",Ee="[object Uint16Array]",ue="[object Uint32Array]",he={};he[O]=he[A]=he[Y]=he[q]=he[T]=he[I]=he[K]=he[J]=he[Q]=he[se]=he[de]=he[z]=he[N]=he[L]=he[B]=he[$]=he[G]=he[W]=he[ye]=he[_e]=he[Ee]=he[ue]=!0,he[D]=he[R]=he[U]=!1;function ke(Se,Me,Be,en,Ht,wt){var At,nn=Me&_,sn=Me&E,Zt=Me&S;if(Be&&(At=Ht?Be(Se,en,Ht,wt):Be(Se)),At!==void 0)return At;if(!y(Se))return Se;var gn=g(Se);if(gn){if(At=d(Se),!nn)return o(Se,At)}else{var cn=f(Se),Nn=cn==R||cn==F;if(v(Se))return a(Se,nn);if(cn==L||cn==O||Nn&&!Ht){if(At=sn||Nn?{}:p(Se),!nn)return sn?l(Se,i(At,Se)):s(Se,r(At,Se))}else{if(!he[cn])return Ht?Se:{};At=h(Se,cn,nn)}}wt||(wt=new t);var vn=wt.get(Se);if(vn)return vn;wt.set(Se,At),b(Se)?Se.forEach(function(_i){At.add(ke(_i,Me,Be,_i,Se,wt))}):m(Se)&&Se.forEach(function(_i,Zi){At.set(Zi,ke(_i,Me,Be,Zi,Se,wt))});var ci=Zt?sn?c:u:sn?w:x,Jr=gn?void 0:ci(Se);return e(Jr||Se,function(_i,Zi){Jr&&(Zi=_i,_i=Se[Zi]),n(At,Zi,ke(_i,Me,Be,Zi,Se,wt))}),At}return NA=ke,NA}var FA,Gq;function jet(){if(Gq)return FA;Gq=1;var t=_ce(),e=4;function n(r){return t(r,e)}return FA=n,FA}var zA,Hq;function M4(){if(Hq)return zA;Hq=1;function t(e){return function(){return e}}return zA=t,zA}var jA,Yq;function Bet(){if(Yq)return jA;Yq=1;function t(e){return function(n,r,i){for(var a=-1,o=Object(n),s=i(n),l=s.length;l--;){var u=s[e?l:++a];if(r(o[u],u,o)===!1)break}return n}}return jA=t,jA}var BA,Uq;function C4(){if(Uq)return BA;Uq=1;var t=Bet(),e=t();return BA=e,BA}var $A,Xq;function P4(){if(Xq)return $A;Xq=1;var t=C4(),e=qc();function n(r,i){return r&&t(r,i,e)}return $A=n,$A}var VA,Zq;function $et(){if(Zq)return VA;Zq=1;var t=mu();function e(n,r){return function(i,a){if(i==null)return i;if(!t(i))return n(i,a);for(var o=i.length,s=r?o:-1,l=Object(i);(r?s--:++s<o)&&a(l[s],s,l)!==!1;);return i}}return VA=e,VA}var qA,Kq;function Qw(){if(Kq)return qA;Kq=1;var t=P4(),e=$et(),n=e(t);return qA=n,qA}var WA,Jq;function xd(){if(Jq)return WA;Jq=1;function t(e){return e}return WA=t,WA}var GA,Qq;function Sce(){if(Qq)return GA;Qq=1;var t=xd();function e(n){return typeof n=="function"?n:t}return GA=e,GA}var HA,eW;function Ece(){if(eW)return HA;eW=1;var t=_4(),e=Qw(),n=Sce(),r=ui();function i(a,o){var s=r(a)?t:e;return s(a,n(o))}return HA=i,HA}var YA,tW;function Oce(){return tW||(tW=1,YA=Ece()),YA}var UA,nW;function Vet(){if(nW)return UA;nW=1;var t=Qw();function e(n,r){var i=[];return t(n,function(a,o,s){r(a,o,s)&&i.push(a)}),i}return UA=e,UA}var XA,rW;function qet(){if(rW)return XA;rW=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return XA=e,XA}var ZA,iW;function Wet(){if(iW)return ZA;iW=1;function t(e){return this.__data__.has(e)}return ZA=t,ZA}var KA,aW;function kce(){if(aW)return KA;aW=1;var t=w4(),e=qet(),n=Wet();function r(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new t;++a<o;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,KA=r,KA}var JA,oW;function Get(){if(oW)return JA;oW=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return JA=t,JA}var QA,sW;function Ace(){if(sW)return QA;sW=1;function t(e,n){return e.has(n)}return QA=t,QA}var e3,lW;function Tce(){if(lW)return e3;lW=1;var t=kce(),e=Get(),n=Ace(),r=1,i=2;function a(o,s,l,u,c,f){var d=l&r,h=o.length,p=s.length;if(h!=p&&!(d&&p>h))return!1;var g=f.get(o),v=f.get(s);if(g&&v)return g==s&&v==o;var m=-1,y=!0,b=l&i?new t:void 0;for(f.set(o,s),f.set(s,o);++m<h;){var x=o[m],w=s[m];if(u)var _=d?u(w,x,m,s,o,f):u(x,w,m,o,s,f);if(_!==void 0){if(_)continue;y=!1;break}if(b){if(!e(s,function(E,S){if(!n(b,S)&&(x===E||c(x,E,l,u,f)))return b.push(S)})){y=!1;break}}else if(!(x===w||c(x,w,l,u,f))){y=!1;break}}return f.delete(o),f.delete(s),y}return e3=a,e3}var t3,uW;function Het(){if(uW)return t3;uW=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,a){r[++n]=[a,i]}),r}return t3=t,t3}var n3,cW;function D4(){if(cW)return n3;cW=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return n3=t,n3}var r3,fW;function Yet(){if(fW)return r3;fW=1;var t=Ip(),e=yce(),n=Dp(),r=Tce(),i=Het(),a=D4(),o=1,s=2,l="[object Boolean]",u="[object Date]",c="[object Error]",f="[object Map]",d="[object Number]",h="[object RegExp]",p="[object Set]",g="[object String]",v="[object Symbol]",m="[object ArrayBuffer]",y="[object DataView]",b=t?t.prototype:void 0,x=b?b.valueOf:void 0;function w(_,E,S,O,A,T,I){switch(S){case y:if(_.byteLength!=E.byteLength||_.byteOffset!=E.byteOffset)return!1;_=_.buffer,E=E.buffer;case m:return!(_.byteLength!=E.byteLength||!T(new e(_),new e(E)));case l:case u:case d:return n(+_,+E);case c:return _.name==E.name&&_.message==E.message;case h:case g:return _==E+"";case f:var D=i;case p:var R=O&o;if(D||(D=a),_.size!=E.size&&!R)return!1;var F=I.get(_);if(F)return F==E;O|=s,I.set(_,E);var z=r(D(_),D(E),O,A,T,I);return I.delete(_),z;case v:if(x)return x.call(_)==x.call(E)}return!1}return r3=w,r3}var i3,dW;function Uet(){if(dW)return i3;dW=1;var t=vce(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,o,s,l,u,c){var f=s&e,d=t(a),h=d.length,p=t(o),g=p.length;if(h!=g&&!f)return!1;for(var v=h;v--;){var m=d[v];if(!(f?m in o:r.call(o,m)))return!1}var y=c.get(a),b=c.get(o);if(y&&b)return y==o&&b==a;var x=!0;c.set(a,o),c.set(o,a);for(var w=f;++v<h;){m=d[v];var _=a[m],E=o[m];if(l)var S=f?l(E,_,m,o,a,c):l(_,E,m,a,o,c);if(!(S===void 0?_===E||u(_,E,s,l,c):S)){x=!1;break}w||(w=m=="constructor")}if(x&&!w){var O=a.constructor,A=o.constructor;O!=A&&"constructor"in a&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof A=="function"&&A instanceof A)&&(x=!1)}return c.delete(a),c.delete(o),x}return i3=i,i3}var a3,hW;function Xet(){if(hW)return a3;hW=1;var t=Hw(),e=Tce(),n=Yet(),r=Uet(),i=Rp(),a=ui(),o=Lp(),s=gm(),l=1,u="[object Arguments]",c="[object Array]",f="[object Object]",d=Object.prototype,h=d.hasOwnProperty;function p(g,v,m,y,b,x){var w=a(g),_=a(v),E=w?c:i(g),S=_?c:i(v);E=E==u?f:E,S=S==u?f:S;var O=E==f,A=S==f,T=E==S;if(T&&o(g)){if(!o(v))return!1;w=!0,O=!1}if(T&&!O)return x||(x=new t),w||s(g)?e(g,v,m,y,b,x):n(g,v,E,m,y,b,x);if(!(m&l)){var I=O&&h.call(g,"__wrapped__"),D=A&&h.call(v,"__wrapped__");if(I||D){var R=I?g.value():g,F=D?v.value():v;return x||(x=new t),b(R,F,m,y,x)}}return T?(x||(x=new t),r(g,v,m,y,b,x)):!1}return a3=p,a3}var o3,pW;function Mce(){if(pW)return o3;pW=1;var t=Xet(),e=Ml();function n(r,i,a,o,s){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,a,o,n,s)}return o3=n,o3}var s3,gW;function Zet(){if(gW)return s3;gW=1;var t=Hw(),e=Mce(),n=1,r=2;function i(a,o,s,l){var u=s.length,c=u,f=!l;if(a==null)return!c;for(a=Object(a);u--;){var d=s[u];if(f&&d[2]?d[1]!==a[d[0]]:!(d[0]in a))return!1}for(;++u<c;){d=s[u];var h=d[0],p=a[h],g=d[1];if(f&&d[2]){if(p===void 0&&!(h in a))return!1}else{var v=new t;if(l)var m=l(p,g,h,a,o,v);if(!(m===void 0?e(g,p,n|r,l,v):m))return!1}}return!0}return s3=i,s3}var l3,vW;function Cce(){if(vW)return l3;vW=1;var t=Zo();function e(n){return n===n&&!t(n)}return l3=e,l3}var u3,mW;function Ket(){if(mW)return u3;mW=1;var t=Cce(),e=qc();function n(r){for(var i=e(r),a=i.length;a--;){var o=i[a],s=r[o];i[a]=[o,s,t(s)]}return i}return u3=n,u3}var c3,yW;function Pce(){if(yW)return c3;yW=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return c3=t,c3}var f3,bW;function Jet(){if(bW)return f3;bW=1;var t=Zet(),e=Ket(),n=Pce();function r(i){var a=e(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(o){return o===i||t(o,i,a)}}return f3=r,f3}var d3,xW;function Np(){if(xW)return d3;xW=1;var t=md(),e=Ml(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return d3=r,d3}var h3,wW;function I4(){if(wW)return h3;wW=1;var t=ui(),e=Np(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){if(t(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||e(a)?!0:r.test(a)||!n.test(a)||o!=null&&a in Object(o)}return h3=i,h3}var p3,_W;function Qet(){if(_W)return p3;_W=1;var t=w4(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var o=arguments,s=i?i.apply(this,o):o[0],l=a.cache;if(l.has(s))return l.get(s);var u=r.apply(this,o);return a.cache=l.set(s,u)||l,u};return a.cache=new(n.Cache||t),a}return n.Cache=t,p3=n,p3}var g3,SW;function ett(){if(SW)return g3;SW=1;var t=Qet(),e=500;function n(r){var i=t(r,function(o){return a.size===e&&a.clear(),o}),a=i.cache;return i}return g3=n,g3}var v3,EW;function ttt(){if(EW)return v3;EW=1;var t=ett(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(o,s,l,u){a.push(l?u.replace(n,"$1"):s||o)}),a});return v3=r,v3}var m3,OW;function e_(){if(OW)return m3;OW=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=n(e[r],r,e);return a}return m3=t,m3}var y3,kW;function ntt(){if(kW)return y3;kW=1;var t=Ip(),e=e_(),n=ui(),r=Np(),i=1/0,a=t?t.prototype:void 0,o=a?a.toString:void 0;function s(l){if(typeof l=="string")return l;if(n(l))return e(l,s)+"";if(r(l))return o?o.call(l):"";var u=l+"";return u=="0"&&1/l==-i?"-0":u}return y3=s,y3}var b3,AW;function Dce(){if(AW)return b3;AW=1;var t=ntt();function e(n){return n==null?"":t(n)}return b3=e,b3}var x3,TW;function t_(){if(TW)return x3;TW=1;var t=ui(),e=I4(),n=ttt(),r=Dce();function i(a,o){return t(a)?a:e(a,o)?[a]:n(r(a))}return x3=i,x3}var w3,MW;function vm(){if(MW)return w3;MW=1;var t=Np(),e=1/0;function n(r){if(typeof r=="string"||t(r))return r;var i=r+"";return i=="0"&&1/r==-e?"-0":i}return w3=n,w3}var _3,CW;function n_(){if(CW)return _3;CW=1;var t=t_(),e=vm();function n(r,i){i=t(i,r);for(var a=0,o=i.length;r!=null&&a<o;)r=r[e(i[a++])];return a&&a==o?r:void 0}return _3=n,_3}var S3,PW;function rtt(){if(PW)return S3;PW=1;var t=n_();function e(n,r,i){var a=n==null?void 0:t(n,r);return a===void 0?i:a}return S3=e,S3}var E3,DW;function itt(){if(DW)return E3;DW=1;function t(e,n){return e!=null&&n in Object(e)}return E3=t,E3}var O3,IW;function Ice(){if(IW)return O3;IW=1;var t=t_(),e=pm(),n=ui(),r=Xw(),i=S4(),a=vm();function o(s,l,u){l=t(l,s);for(var c=-1,f=l.length,d=!1;++c<f;){var h=a(l[c]);if(!(d=s!=null&&u(s,h)))break;s=s[h]}return d||++c!=f?d:(f=s==null?0:s.length,!!f&&i(f)&&r(h,f)&&(n(s)||e(s)))}return O3=o,O3}var k3,LW;function Lce(){if(LW)return k3;LW=1;var t=itt(),e=Ice();function n(r,i){return r!=null&&e(r,i,t)}return k3=n,k3}var A3,RW;function att(){if(RW)return A3;RW=1;var t=Mce(),e=rtt(),n=Lce(),r=I4(),i=Cce(),a=Pce(),o=vm(),s=1,l=2;function u(c,f){return r(c)&&i(f)?a(o(c),f):function(d){var h=e(d,c);return h===void 0&&h===f?n(d,c):t(f,h,s|l)}}return A3=u,A3}var T3,NW;function Rce(){if(NW)return T3;NW=1;function t(e){return function(n){return n==null?void 0:n[e]}}return T3=t,T3}var M3,FW;function ott(){if(FW)return M3;FW=1;var t=n_();function e(n){return function(r){return t(r,n)}}return M3=e,M3}var C3,zW;function stt(){if(zW)return C3;zW=1;var t=Rce(),e=ott(),n=I4(),r=vm();function i(a){return n(a)?t(r(a)):e(a)}return C3=i,C3}var P3,jW;function yu(){if(jW)return P3;jW=1;var t=Jet(),e=att(),n=xd(),r=ui(),i=stt();function a(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?e(o[0],o[1]):t(o):i(o)}return P3=a,P3}var D3,BW;function Nce(){if(BW)return D3;BW=1;var t=dce(),e=Vet(),n=yu(),r=ui();function i(a,o){var s=r(a)?t:e;return s(a,n(o,3))}return D3=i,D3}var I3,$W;function ltt(){if($W)return I3;$W=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r,i){return r!=null&&e.call(r,i)}return I3=n,I3}var L3,VW;function Fce(){if(VW)return L3;VW=1;var t=ltt(),e=Ice();function n(r,i){return r!=null&&e(r,i,t)}return L3=n,L3}var R3,qW;function utt(){if(qW)return R3;qW=1;var t=O4(),e=Rp(),n=pm(),r=ui(),i=mu(),a=Lp(),o=Kw(),s=gm(),l="[object Map]",u="[object Set]",c=Object.prototype,f=c.hasOwnProperty;function d(h){if(h==null)return!0;if(i(h)&&(r(h)||typeof h=="string"||typeof h.splice=="function"||a(h)||s(h)||n(h)))return!h.length;var p=e(h);if(p==l||p==u)return!h.size;if(o(h))return!t(h).length;for(var g in h)if(f.call(h,g))return!1;return!0}return R3=d,R3}var N3,WW;function zce(){if(WW)return N3;WW=1;function t(e){return e===void 0}return N3=t,N3}var F3,GW;function jce(){if(GW)return F3;GW=1;var t=Qw(),e=mu();function n(r,i){var a=-1,o=e(r)?Array(r.length):[];return t(r,function(s,l,u){o[++a]=i(s,l,u)}),o}return F3=n,F3}var z3,HW;function Bce(){if(HW)return z3;HW=1;var t=e_(),e=yu(),n=jce(),r=ui();function i(a,o){var s=r(a)?t:n;return s(a,e(o,3))}return z3=i,z3}var j3,YW;function ctt(){if(YW)return j3;YW=1;function t(e,n,r,i){var a=-1,o=e==null?0:e.length;for(i&&o&&(r=e[++a]);++a<o;)r=n(r,e[a],a,e);return r}return j3=t,j3}var B3,UW;function ftt(){if(UW)return B3;UW=1;function t(e,n,r,i,a){return a(e,function(o,s,l){r=i?(i=!1,o):n(r,o,s,l)}),r}return B3=t,B3}var $3,XW;function $ce(){if(XW)return $3;XW=1;var t=ctt(),e=Qw(),n=yu(),r=ftt(),i=ui();function a(o,s,l){var u=i(o)?t:r,c=arguments.length<3;return u(o,n(s,4),l,c,e)}return $3=a,$3}var V3,ZW;function dtt(){if(ZW)return V3;ZW=1;var t=md(),e=ui(),n=Ml(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&n(a)&&t(a)==r}return V3=i,V3}var q3,KW;function htt(){if(KW)return q3;KW=1;var t=Rce(),e=t("length");return q3=e,q3}var W3,JW;function ptt(){if(JW)return W3;JW=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+t+i+a+"]");function l(u){return s.test(u)}return W3=l,W3}var G3,QW;function gtt(){if(QW)return G3;QW=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",o="["+t+"]",s="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+s+"|"+l+")",c="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",p=u+"?",g="["+a+"]?",v="(?:"+h+"(?:"+[c,f,d].join("|")+")"+g+p+")*",m=g+p+v,y="(?:"+[c+s+"?",s,f,d,o].join("|")+")",b=RegExp(l+"(?="+l+")|"+y+m,"g");function x(w){for(var _=b.lastIndex=0;b.test(w);)++_;return _}return G3=x,G3}var H3,eG;function vtt(){if(eG)return H3;eG=1;var t=htt(),e=ptt(),n=gtt();function r(i){return e(i)?n(i):t(i)}return H3=r,H3}var Y3,tG;function mtt(){if(tG)return Y3;tG=1;var t=O4(),e=Rp(),n=mu(),r=dtt(),i=vtt(),a="[object Map]",o="[object Set]";function s(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var u=e(l);return u==a||u==o?l.size:t(l).length}return Y3=s,Y3}var U3,nG;function ytt(){if(nG)return U3;nG=1;var t=_4(),e=xce(),n=P4(),r=yu(),i=Jw(),a=ui(),o=Lp(),s=dm(),l=Zo(),u=gm();function c(f,d,h){var p=a(f),g=p||o(f)||u(f);if(d=r(d,4),h==null){var v=f&&f.constructor;g?h=p?new v:[]:l(f)?h=s(v)?e(i(f)):{}:h={}}return(g?t:n)(f,function(m,y,b){return d(h,m,y,b)}),h}return U3=c,U3}var X3,rG;function btt(){if(rG)return X3;rG=1;var t=Ip(),e=pm(),n=ui(),r=t?t.isConcatSpreadable:void 0;function i(a){return n(a)||e(a)||!!(r&&a&&a[r])}return X3=i,X3}var Z3,iG;function L4(){if(iG)return Z3;iG=1;var t=A4(),e=btt();function n(r,i,a,o,s){var l=-1,u=r.length;for(a||(a=e),s||(s=[]);++l<u;){var c=r[l];i>0&&a(c)?i>1?n(c,i-1,a,o,s):t(s,c):o||(s[s.length]=c)}return s}return Z3=n,Z3}var K3,aG;function xtt(){if(aG)return K3;aG=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return K3=t,K3}var J3,oG;function Vce(){if(oG)return J3;oG=1;var t=xtt(),e=Math.max;function n(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var o=arguments,s=-1,l=e(o.length-i,0),u=Array(l);++s<l;)u[s]=o[i+s];s=-1;for(var c=Array(i+1);++s<i;)c[s]=o[s];return c[i]=a(u),t(r,this,c)}}return J3=n,J3}var Q3,sG;function wtt(){if(sG)return Q3;sG=1;var t=M4(),e=sce(),n=xd(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:n;return Q3=r,Q3}var eT,lG;function _tt(){if(lG)return eT;lG=1;var t=800,e=16,n=Date.now;function r(i){var a=0,o=0;return function(){var s=n(),l=e-(s-o);if(o=s,l>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return eT=r,eT}var tT,uG;function qce(){if(uG)return tT;uG=1;var t=wtt(),e=_tt(),n=e(t);return tT=n,tT}var nT,cG;function r_(){if(cG)return nT;cG=1;var t=xd(),e=Vce(),n=qce();function r(i,a){return n(e(i,a,t),i+"")}return nT=r,nT}var rT,fG;function Wce(){if(fG)return rT;fG=1;function t(e,n,r,i){for(var a=e.length,o=r+(i?1:-1);i?o--:++o<a;)if(n(e[o],o,e))return o;return-1}return rT=t,rT}var iT,dG;function Stt(){if(dG)return iT;dG=1;function t(e){return e!==e}return iT=t,iT}var aT,hG;function Ett(){if(hG)return aT;hG=1;function t(e,n,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===n)return i;return-1}return aT=t,aT}var oT,pG;function Ott(){if(pG)return oT;pG=1;var t=Wce(),e=Stt(),n=Ett();function r(i,a,o){return a===a?n(i,a,o):t(i,e,o)}return oT=r,oT}var sT,gG;function ktt(){if(gG)return sT;gG=1;var t=Ott();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return sT=e,sT}var lT,vG;function Att(){if(vG)return lT;vG=1;function t(e,n,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(n,e[i]))return!0;return!1}return lT=t,lT}var uT,mG;function Ttt(){if(mG)return uT;mG=1;function t(){}return uT=t,uT}var cT,yG;function Mtt(){if(yG)return cT;yG=1;var t=mce(),e=Ttt(),n=D4(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(a){return new t(a)}:e;return cT=i,cT}var fT,bG;function Ctt(){if(bG)return fT;bG=1;var t=kce(),e=ktt(),n=Att(),r=Ace(),i=Mtt(),a=D4(),o=200;function s(l,u,c){var f=-1,d=e,h=l.length,p=!0,g=[],v=g;if(c)p=!1,d=n;else if(h>=o){var m=u?null:i(l);if(m)return a(m);p=!1,d=r,v=new t}else v=u?[]:g;e:for(;++f<h;){var y=l[f],b=u?u(y):y;if(y=c||y!==0?y:0,p&&b===b){for(var x=v.length;x--;)if(v[x]===b)continue e;u&&v.push(b),g.push(y)}else d(v,b,c)||(v!==g&&v.push(b),g.push(y))}return g}return fT=s,fT}var dT,xG;function Gce(){if(xG)return dT;xG=1;var t=mu(),e=Ml();function n(r){return e(r)&&t(r)}return dT=n,dT}var hT,wG;function Ptt(){if(wG)return hT;wG=1;var t=L4(),e=r_(),n=Ctt(),r=Gce(),i=e(function(a){return n(t(a,1,r,!0))});return hT=i,hT}var pT,_G;function Dtt(){if(_G)return pT;_G=1;var t=e_();function e(n,r){return t(r,function(i){return n[i]})}return pT=e,pT}var gT,SG;function Hce(){if(SG)return gT;SG=1;var t=Dtt(),e=qc();function n(r){return r==null?[]:t(r,e(r))}return gT=n,gT}var vT,EG;function Ko(){if(EG)return vT;EG=1;var t;if(typeof kD=="function")try{t={clone:jet(),constant:M4(),each:Oce(),filter:Nce(),has:Fce(),isArray:ui(),isEmpty:utt(),isFunction:dm(),isUndefined:zce(),keys:qc(),map:Bce(),reduce:$ce(),size:mtt(),transform:ytt(),union:Ptt(),values:Hce()}}catch{}return t||(t=window._),vT=t,vT}var mT,OG;function R4(){if(OG)return mT;OG=1;var t=Ko();mT=i;var e="\0",n="\0",r="";function i(c){this._isDirected=t.has(c,"directed")?c.directed:!0,this._isMultigraph=t.has(c,"multigraph")?c.multigraph:!1,this._isCompound=t.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return t.isFunction(c)||(c=t.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return t.keys(this._nodes)},i.prototype.sources=function(){var c=this;return t.filter(this.nodes(),function(f){return t.isEmpty(c._in[f])})},i.prototype.sinks=function(){var c=this;return t.filter(this.nodes(),function(f){return t.isEmpty(c._out[f])})},i.prototype.setNodes=function(c,f){var d=arguments,h=this;return t.each(c,function(p){d.length>1?h.setNode(p,f):h.setNode(p)}),this},i.prototype.setNode=function(c,f){return t.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return t.has(this._nodes,c)},i.prototype.removeNode=function(c){var f=this;if(t.has(this._nodes,c)){var d=function(h){f.removeEdge(f._edgeObjs[h])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],t.each(this.children(c),function(h){f.setParent(h)}),delete this._children[c]),t.each(t.keys(this._in[c]),d),delete this._in[c],delete this._preds[c],t.each(t.keys(this._out[c]),d),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(f))f=n;else{f+="";for(var d=f;!t.isUndefined(d);d=this.parent(d))if(d===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var f=this._parent[c];if(f!==n)return f}},i.prototype.children=function(c){if(t.isUndefined(c)&&(c=n),this._isCompound){var f=this._children[c];if(f)return t.keys(f)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var f=this._preds[c];if(f)return t.keys(f)},i.prototype.successors=function(c){var f=this._sucs[c];if(f)return t.keys(f)},i.prototype.neighbors=function(c){var f=this.predecessors(c);if(f)return t.union(f,this.successors(c))},i.prototype.isLeaf=function(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0},i.prototype.filterNodes=function(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var d=this;t.each(this._nodes,function(g,v){c(v)&&f.setNode(v,g)}),t.each(this._edgeObjs,function(g){f.hasNode(g.v)&&f.hasNode(g.w)&&f.setEdge(g,d.edge(g))});var h={};function p(g){var v=d.parent(g);return v===void 0||f.hasNode(v)?(h[g]=v,v):v in h?h[v]:p(v)}return this._isCompound&&t.each(f.nodes(),function(g){f.setParent(g,p(g))}),f},i.prototype.setDefaultEdgeLabel=function(c){return t.isFunction(c)||(c=t.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return t.values(this._edgeObjs)},i.prototype.setPath=function(c,f){var d=this,h=arguments;return t.reduce(c,function(p,g){return h.length>1?d.setEdge(p,g,f):d.setEdge(p,g),g}),this},i.prototype.setEdge=function(){var c,f,d,h,p=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(c=g.v,f=g.w,d=g.name,arguments.length===2&&(h=arguments[1],p=!0)):(c=g,f=arguments[1],d=arguments[3],arguments.length>2&&(h=arguments[2],p=!0)),c=""+c,f=""+f,t.isUndefined(d)||(d=""+d);var v=s(this._isDirected,c,f,d);if(t.has(this._edgeLabels,v))return p&&(this._edgeLabels[v]=h),this;if(!t.isUndefined(d)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[v]=p?h:this._defaultEdgeLabelFn(c,f,d);var m=l(this._isDirected,c,f,d);return c=m.v,f=m.w,Object.freeze(m),this._edgeObjs[v]=m,a(this._preds[f],c),a(this._sucs[c],f),this._in[f][v]=m,this._out[c][v]=m,this._edgeCount++,this},i.prototype.edge=function(c,f,d){var h=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,c,f,d);return this._edgeLabels[h]},i.prototype.hasEdge=function(c,f,d){var h=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,c,f,d);return t.has(this._edgeLabels,h)},i.prototype.removeEdge=function(c,f,d){var h=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,c,f,d),p=this._edgeObjs[h];return p&&(c=p.v,f=p.w,delete this._edgeLabels[h],delete this._edgeObjs[h],o(this._preds[f],c),o(this._sucs[c],f),delete this._in[f][h],delete this._out[c][h],this._edgeCount--),this},i.prototype.inEdges=function(c,f){var d=this._in[c];if(d){var h=t.values(d);return f?t.filter(h,function(p){return p.v===f}):h}},i.prototype.outEdges=function(c,f){var d=this._out[c];if(d){var h=t.values(d);return f?t.filter(h,function(p){return p.w===f}):h}},i.prototype.nodeEdges=function(c,f){var d=this.inEdges(c,f);if(d)return d.concat(this.outEdges(c,f))};function a(c,f){c[f]?c[f]++:c[f]=1}function o(c,f){--c[f]||delete c[f]}function s(c,f,d,h){var p=""+f,g=""+d;if(!c&&p>g){var v=p;p=g,g=v}return p+r+g+r+(t.isUndefined(h)?e:h)}function l(c,f,d,h){var p=""+f,g=""+d;if(!c&&p>g){var v=p;p=g,g=v}var m={v:p,w:g};return h&&(m.name=h),m}function u(c,f){return s(c,f.v,f.w,f.name)}return mT}var yT,kG;function Itt(){return kG||(kG=1,yT="2.1.8"),yT}var bT,AG;function Ltt(){return AG||(AG=1,bT={Graph:R4(),version:Itt()}),bT}var xT,TG;function Rtt(){if(TG)return xT;TG=1;var t=Ko(),e=R4();xT={write:n,read:a};function n(o){var s={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return t.isUndefined(o.graph())||(s.value=t.clone(o.graph())),s}function r(o){return t.map(o.nodes(),function(s){var l=o.node(s),u=o.parent(s),c={v:s};return t.isUndefined(l)||(c.value=l),t.isUndefined(u)||(c.parent=u),c})}function i(o){return t.map(o.edges(),function(s){var l=o.edge(s),u={v:s.v,w:s.w};return t.isUndefined(s.name)||(u.name=s.name),t.isUndefined(l)||(u.value=l),u})}function a(o){var s=new e(o.options).setGraph(o.value);return t.each(o.nodes,function(l){s.setNode(l.v,l.value),l.parent&&s.setParent(l.v,l.parent)}),t.each(o.edges,function(l){s.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),s}return xT}var wT,MG;function Ntt(){if(MG)return wT;MG=1;var t=Ko();wT=e;function e(n){var r={},i=[],a;function o(s){t.has(r,s)||(r[s]=!0,a.push(s),t.each(n.successors(s),o),t.each(n.predecessors(s),o))}return t.each(n.nodes(),function(s){a=[],o(s),a.length&&i.push(a)}),i}return wT}var _T,CG;function Yce(){if(CG)return _T;CG=1;var t=Ko();_T=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(n){return n.key})},e.prototype.has=function(n){return t.has(this._keyIndices,n)},e.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!t.has(i,n)){var a=this._arr,o=a.length;return i[n]=o,a.push({key:n,priority:r}),this._decrease(o),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},e.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},e.prototype._heapify=function(n){var r=this._arr,i=2*n,a=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,a<r.length&&(o=r[a].priority<r[o].priority?a:o),o!==n&&(this._swap(n,o),this._heapify(o)))},e.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<i));)this._swap(n,a),n=a},e.prototype._swap=function(n,r){var i=this._arr,a=this._keyIndices,o=i[n],s=i[r];i[n]=s,i[r]=o,a[s.key]=n,a[o.key]=r},_T}var ST,PG;function Uce(){if(PG)return ST;PG=1;var t=Ko(),e=Yce();ST=r;var n=t.constant(1);function r(a,o,s,l){return i(a,String(o),s||n,l||function(u){return a.outEdges(u)})}function i(a,o,s,l){var u={},c=new e,f,d,h=function(p){var g=p.v!==f?p.v:p.w,v=u[g],m=s(p),y=d.distance+m;if(m<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+p+" Weight: "+m);y<v.distance&&(v.distance=y,v.predecessor=f,c.decrease(g,y))};for(a.nodes().forEach(function(p){var g=p===o?0:Number.POSITIVE_INFINITY;u[p]={distance:g},c.add(p,g)});c.size()>0&&(f=c.removeMin(),d=u[f],d.distance!==Number.POSITIVE_INFINITY);)l(f).forEach(h);return u}return ST}var ET,DG;function Ftt(){if(DG)return ET;DG=1;var t=Uce(),e=Ko();ET=n;function n(r,i,a){return e.transform(r.nodes(),function(o,s){o[s]=t(r,s,i,a)},{})}return ET}var OT,IG;function Xce(){if(IG)return OT;IG=1;var t=Ko();OT=e;function e(n){var r=0,i=[],a={},o=[];function s(l){var u=a[l]={onStack:!0,lowlink:r,index:r++};if(i.push(l),n.successors(l).forEach(function(d){t.has(a,d)?a[d].onStack&&(u.lowlink=Math.min(u.lowlink,a[d].index)):(s(d),u.lowlink=Math.min(u.lowlink,a[d].lowlink))}),u.lowlink===u.index){var c=[],f;do f=i.pop(),a[f].onStack=!1,c.push(f);while(l!==f);o.push(c)}}return n.nodes().forEach(function(l){t.has(a,l)||s(l)}),o}return OT}var kT,LG;function ztt(){if(LG)return kT;LG=1;var t=Ko(),e=Xce();kT=n;function n(r){return t.filter(e(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return kT}var AT,RG;function jtt(){if(RG)return AT;RG=1;var t=Ko();AT=n;var e=t.constant(1);function n(i,a,o){return r(i,a||e,o||function(s){return i.outEdges(s)})}function r(i,a,o){var s={},l=i.nodes();return l.forEach(function(u){s[u]={},s[u][u]={distance:0},l.forEach(function(c){u!==c&&(s[u][c]={distance:Number.POSITIVE_INFINITY})}),o(u).forEach(function(c){var f=c.v===u?c.w:c.v,d=a(c);s[u][f]={distance:d,predecessor:u}})}),l.forEach(function(u){var c=s[u];l.forEach(function(f){var d=s[f];l.forEach(function(h){var p=d[u],g=c[h],v=d[h],m=p.distance+g.distance;m<v.distance&&(v.distance=m,v.predecessor=g.predecessor)})})}),s}return AT}var TT,NG;function Zce(){if(NG)return TT;NG=1;var t=Ko();TT=e,e.CycleException=n;function e(r){var i={},a={},o=[];function s(l){if(t.has(a,l))throw new n;t.has(i,l)||(a[l]=!0,i[l]=!0,t.each(r.predecessors(l),s),delete a[l],o.push(l))}if(t.each(r.sinks(),s),t.size(i)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,TT}var MT,FG;function Btt(){if(FG)return MT;FG=1;var t=Zce();MT=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return MT}var CT,zG;function Kce(){if(zG)return CT;zG=1;var t=Ko();CT=e;function e(r,i,a){t.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],l={};return t.each(i,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,a==="post",l,o,s)}),s}function n(r,i,a,o,s,l){t.has(o,i)||(o[i]=!0,a||l.push(i),t.each(s(i),function(u){n(r,u,a,o,s,l)}),a&&l.push(i))}return CT}var PT,jG;function $tt(){if(jG)return PT;jG=1;var t=Kce();PT=e;function e(n,r){return t(n,r,"post")}return PT}var DT,BG;function Vtt(){if(BG)return DT;BG=1;var t=Kce();DT=e;function e(n,r){return t(n,r,"pre")}return DT}var IT,$G;function qtt(){if($G)return IT;$G=1;var t=Ko(),e=R4(),n=Yce();IT=r;function r(i,a){var o=new e,s={},l=new n,u;function c(d){var h=d.v===u?d.w:d.v,p=l.priority(h);if(p!==void 0){var g=a(d);g<p&&(s[h]=u,l.decrease(h,g))}}if(i.nodeCount()===0)return o;t.each(i.nodes(),function(d){l.add(d,Number.POSITIVE_INFINITY),o.setNode(d)}),l.decrease(i.nodes()[0],0);for(var f=!1;l.size()>0;){if(u=l.removeMin(),t.has(s,u))o.setEdge(u,s[u]);else{if(f)throw new Error("Input graph is not connected: "+i);f=!0}i.nodeEdges(u).forEach(c)}return o}return IT}var LT,VG;function Wtt(){return VG||(VG=1,LT={components:Ntt(),dijkstra:Uce(),dijkstraAll:Ftt(),findCycles:ztt(),floydWarshall:jtt(),isAcyclic:Btt(),postorder:$tt(),preorder:Vtt(),prim:qtt(),tarjan:Xce(),topsort:Zce()}),LT}var RT,qG;function Gtt(){if(qG)return RT;qG=1;var t=Ltt();return RT={Graph:t.Graph,json:Rtt(),alg:Wtt(),version:t.version},RT}var NT,WG;function Ts(){if(WG)return NT;WG=1;var t;if(typeof kD=="function")try{t=Gtt()}catch{}return t||(t=window.graphlib),NT=t,NT}var FT,GG;function Htt(){if(GG)return FT;GG=1;var t=_ce(),e=1,n=4;function r(i){return t(i,e|n)}return FT=r,FT}var zT,HG;function i_(){if(HG)return zT;HG=1;var t=Dp(),e=mu(),n=Xw(),r=Zo();function i(a,o,s){if(!r(s))return!1;var l=typeof o;return(l=="number"?e(s)&&n(o,s.length):l=="string"&&o in s)?t(s[o],a):!1}return zT=i,zT}var jT,YG;function Ytt(){if(YG)return jT;YG=1;var t=r_(),e=Dp(),n=i_(),r=bd(),i=Object.prototype,a=i.hasOwnProperty,o=t(function(s,l){s=Object(s);var u=-1,c=l.length,f=c>2?l[2]:void 0;for(f&&n(l[0],l[1],f)&&(c=1);++u<c;)for(var d=l[u],h=r(d),p=-1,g=h.length;++p<g;){var v=h[p],m=s[v];(m===void 0||e(m,i[v])&&!a.call(s,v))&&(s[v]=d[v])}return s});return jT=o,jT}var BT,UG;function Utt(){if(UG)return BT;UG=1;var t=yu(),e=mu(),n=qc();function r(i){return function(a,o,s){var l=Object(a);if(!e(a)){var u=t(o,3);a=n(a),o=function(f){return u(l[f],f,l)}}var c=i(a,o,s);return c>-1?l[u?a[c]:c]:void 0}}return BT=r,BT}var $T,XG;function Xtt(){if(XG)return $T;XG=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return $T=e,$T}var VT,ZG;function Ztt(){if(ZG)return VT;ZG=1;var t=Xtt(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return VT=n,VT}var qT,KG;function Ktt(){if(KG)return qT;KG=1;var t=Ztt(),e=Zo(),n=Np(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(e(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=e(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=t(u);var f=a.test(u);return f||o.test(u)?s(u.slice(2),f?2:8):i.test(u)?r:+u}return qT=l,qT}var WT,JG;function Jce(){if(JG)return WT;JG=1;var t=Ktt(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*n}return i===i?i:0}return WT=r,WT}var GT,QG;function Jtt(){if(QG)return GT;QG=1;var t=Jce();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return GT=e,GT}var HT,eH;function Qtt(){if(eH)return HT;eH=1;var t=Wce(),e=yu(),n=Jtt(),r=Math.max;function i(a,o,s){var l=a==null?0:a.length;if(!l)return-1;var u=s==null?0:n(s);return u<0&&(u=r(l+u,0)),t(a,e(o,3),u)}return HT=i,HT}var YT,tH;function ent(){if(tH)return YT;tH=1;var t=Utt(),e=Qtt(),n=t(e);return YT=n,YT}var UT,nH;function Qce(){if(nH)return UT;nH=1;var t=L4();function e(n){var r=n==null?0:n.length;return r?t(n,1):[]}return UT=e,UT}var XT,rH;function tnt(){if(rH)return XT;rH=1;var t=C4(),e=Sce(),n=bd();function r(i,a){return i==null?i:t(i,e(a),n)}return XT=r,XT}var ZT,iH;function nnt(){if(iH)return ZT;iH=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return ZT=t,ZT}var KT,aH;function rnt(){if(aH)return KT;aH=1;var t=Yw(),e=P4(),n=yu();function r(i,a){var o={};return a=n(a,3),e(i,function(s,l,u){t(o,l,a(s,l,u))}),o}return KT=r,KT}var JT,oH;function N4(){if(oH)return JT;oH=1;var t=Np();function e(n,r,i){for(var a=-1,o=n.length;++a<o;){var s=n[a],l=r(s);if(l!=null&&(u===void 0?l===l&&!t(l):i(l,u)))var u=l,c=s}return c}return JT=e,JT}var QT,sH;function int(){if(sH)return QT;sH=1;function t(e,n){return e>n}return QT=t,QT}var eM,lH;function ant(){if(lH)return eM;lH=1;var t=N4(),e=int(),n=xd();function r(i){return i&&i.length?t(i,n,e):void 0}return eM=r,eM}var tM,uH;function efe(){if(uH)return tM;uH=1;var t=Yw(),e=Dp();function n(r,i,a){(a!==void 0&&!e(r[i],a)||a===void 0&&!(i in r))&&t(r,i,a)}return tM=n,tM}var nM,cH;function ont(){if(cH)return nM;cH=1;var t=md(),e=Jw(),n=Ml(),r="[object Object]",i=Function.prototype,a=Object.prototype,o=i.toString,s=a.hasOwnProperty,l=o.call(Object);function u(c){if(!n(c)||t(c)!=r)return!1;var f=e(c);if(f===null)return!0;var d=s.call(f,"constructor")&&f.constructor;return typeof d=="function"&&d instanceof d&&o.call(d)==l}return nM=u,nM}var rM,fH;function tfe(){if(fH)return rM;fH=1;function t(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return rM=t,rM}var iM,dH;function snt(){if(dH)return iM;dH=1;var t=hm(),e=bd();function n(r){return t(r,e(r))}return iM=n,iM}var aM,hH;function lnt(){if(hH)return aM;hH=1;var t=efe(),e=cce(),n=bce(),r=fce(),i=wce(),a=pm(),o=ui(),s=Gce(),l=Lp(),u=dm(),c=Zo(),f=ont(),d=gm(),h=tfe(),p=snt();function g(v,m,y,b,x,w,_){var E=h(v,y),S=h(m,y),O=_.get(S);if(O){t(v,y,O);return}var A=w?w(E,S,y+"",v,m,_):void 0,T=A===void 0;if(T){var I=o(S),D=!I&&l(S),R=!I&&!D&&d(S);A=S,I||D||R?o(E)?A=E:s(E)?A=r(E):D?(T=!1,A=e(S,!0)):R?(T=!1,A=n(S,!0)):A=[]:f(S)||a(S)?(A=E,a(E)?A=p(E):(!c(E)||u(E))&&(A=i(S))):T=!1}T&&(_.set(S,A),x(A,S,b,w,_),_.delete(S)),t(v,y,A)}return aM=g,aM}var oM,pH;function unt(){if(pH)return oM;pH=1;var t=Hw(),e=efe(),n=C4(),r=lnt(),i=Zo(),a=bd(),o=tfe();function s(l,u,c,f,d){l!==u&&n(u,function(h,p){if(d||(d=new t),i(h))r(l,u,p,c,s,f,d);else{var g=f?f(o(l,p),h,p+"",l,u,d):void 0;g===void 0&&(g=h),e(l,p,g)}},a)}return oM=s,oM}var sM,gH;function cnt(){if(gH)return sM;gH=1;var t=r_(),e=i_();function n(r){return t(function(i,a){var o=-1,s=a.length,l=s>1?a[s-1]:void 0,u=s>2?a[2]:void 0;for(l=r.length>3&&typeof l=="function"?(s--,l):void 0,u&&e(a[0],a[1],u)&&(l=s<3?void 0:l,s=1),i=Object(i);++o<s;){var c=a[o];c&&r(i,c,o,l)}return i})}return sM=n,sM}var lM,vH;function fnt(){if(vH)return lM;vH=1;var t=unt(),e=cnt(),n=e(function(r,i,a){t(r,i,a)});return lM=n,lM}var uM,mH;function nfe(){if(mH)return uM;mH=1;function t(e,n){return e<n}return uM=t,uM}var cM,yH;function dnt(){if(yH)return cM;yH=1;var t=N4(),e=nfe(),n=xd();function r(i){return i&&i.length?t(i,n,e):void 0}return cM=r,cM}var fM,bH;function hnt(){if(bH)return fM;bH=1;var t=N4(),e=yu(),n=nfe();function r(i,a){return i&&i.length?t(i,e(a,2),n):void 0}return fM=r,fM}var dM,xH;function pnt(){if(xH)return dM;xH=1;var t=Ls(),e=function(){return t.Date.now()};return dM=e,dM}var hM,wH;function gnt(){if(wH)return hM;wH=1;var t=Uw(),e=t_(),n=Xw(),r=Zo(),i=vm();function a(o,s,l,u){if(!r(o))return o;s=e(s,o);for(var c=-1,f=s.length,d=f-1,h=o;h!=null&&++c<f;){var p=i(s[c]),g=l;if(p==="__proto__"||p==="constructor"||p==="prototype")return o;if(c!=d){var v=h[p];g=u?u(v,p,h):void 0,g===void 0&&(g=r(v)?v:n(s[c+1])?[]:{})}t(h,p,g),h=h[p]}return o}return hM=a,hM}var pM,_H;function vnt(){if(_H)return pM;_H=1;var t=n_(),e=gnt(),n=t_();function r(i,a,o){for(var s=-1,l=a.length,u={};++s<l;){var c=a[s],f=t(i,c);o(f,c)&&e(u,n(c,i),f)}return u}return pM=r,pM}var gM,SH;function mnt(){if(SH)return gM;SH=1;var t=vnt(),e=Lce();function n(r,i){return t(r,i,function(a,o){return e(r,o)})}return gM=n,gM}var vM,EH;function ynt(){if(EH)return vM;EH=1;var t=Qce(),e=Vce(),n=qce();function r(i){return n(e(i,void 0,t),i+"")}return vM=r,vM}var mM,OH;function bnt(){if(OH)return mM;OH=1;var t=mnt(),e=ynt(),n=e(function(r,i){return r==null?{}:t(r,i)});return mM=n,mM}var yM,kH;function xnt(){if(kH)return yM;kH=1;var t=Math.ceil,e=Math.max;function n(r,i,a,o){for(var s=-1,l=e(t((i-r)/(a||1)),0),u=Array(l);l--;)u[o?l:++s]=r,r+=a;return u}return yM=n,yM}var bM,AH;function wnt(){if(AH)return bM;AH=1;var t=xnt(),e=i_(),n=Jce();function r(i){return function(a,o,s){return s&&typeof s!="number"&&e(a,o,s)&&(o=s=void 0),a=n(a),o===void 0?(o=a,a=0):o=n(o),s=s===void 0?a<o?1:-1:n(s),t(a,o,s,i)}}return bM=r,bM}var xM,TH;function _nt(){if(TH)return xM;TH=1;var t=wnt(),e=t();return xM=e,xM}var wM,MH;function Snt(){if(MH)return wM;MH=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return wM=t,wM}var _M,CH;function Ent(){if(CH)return _M;CH=1;var t=Np();function e(n,r){if(n!==r){var i=n!==void 0,a=n===null,o=n===n,s=t(n),l=r!==void 0,u=r===null,c=r===r,f=t(r);if(!u&&!f&&!s&&n>r||s&&l&&c&&!u&&!f||a&&l&&c||!i&&c||!o)return 1;if(!a&&!s&&!f&&n<r||f&&i&&o&&!a&&!s||u&&i&&o||!l&&o||!c)return-1}return 0}return _M=e,_M}var SM,PH;function Ont(){if(PH)return SM;PH=1;var t=Ent();function e(n,r,i){for(var a=-1,o=n.criteria,s=r.criteria,l=o.length,u=i.length;++a<l;){var c=t(o[a],s[a]);if(c){if(a>=u)return c;var f=i[a];return c*(f=="desc"?-1:1)}}return n.index-r.index}return SM=e,SM}var EM,DH;function knt(){if(DH)return EM;DH=1;var t=e_(),e=n_(),n=yu(),r=jce(),i=Snt(),a=Zw(),o=Ont(),s=xd(),l=ui();function u(c,f,d){f.length?f=t(f,function(g){return l(g)?function(v){return e(v,g.length===1?g[0]:g)}:g}):f=[s];var h=-1;f=t(f,a(n));var p=r(c,function(g,v,m){var y=t(f,function(b){return b(g)});return{criteria:y,index:++h,value:g}});return i(p,function(g,v){return o(g,v,d)})}return EM=u,EM}var OM,IH;function Ant(){if(IH)return OM;IH=1;var t=L4(),e=knt(),n=r_(),r=i_(),i=n(function(a,o){if(a==null)return[];var s=o.length;return s>1&&r(a,o[0],o[1])?o=[]:s>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),e(a,t(o,1),[])});return OM=i,OM}var kM,LH;function Tnt(){if(LH)return kM;LH=1;var t=Dce(),e=0;function n(r){var i=++e;return t(r)+i}return kM=n,kM}var AM,RH;function Mnt(){if(RH)return AM;RH=1;function t(e,n,r){for(var i=-1,a=e.length,o=n.length,s={};++i<a;){var l=i<o?n[i]:void 0;r(s,e[i],l)}return s}return AM=t,AM}var TM,NH;function Cnt(){if(NH)return TM;NH=1;var t=Uw(),e=Mnt();function n(r,i){return e(r||[],i||[],t)}return TM=n,TM}var MM,FH;function _r(){if(FH)return MM;FH=1;var t;if(typeof kD=="function")try{t={cloneDeep:Htt(),constant:M4(),defaults:Ytt(),each:Oce(),filter:Nce(),find:ent(),flatten:Qce(),forEach:Ece(),forIn:tnt(),has:Fce(),isUndefined:zce(),last:nnt(),map:Bce(),mapValues:rnt(),max:ant(),merge:fnt(),min:dnt(),minBy:hnt(),now:pnt(),pick:bnt(),range:_nt(),reduce:$ce(),sortBy:Ant(),uniqueId:Tnt(),values:Hce(),zipObject:Cnt()}}catch{}return t||(t=window._),MM=t,MM}var CM,zH;function Pnt(){if(zH)return CM;zH=1,CM=t;function t(){var r={};r._next=r._prev=r,this._sentinel=r}t.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return e(i),i},t.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&e(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},t.prototype.toString=function(){for(var r=[],i=this._sentinel,a=i._prev;a!==i;)r.push(JSON.stringify(a,n)),a=a._prev;return"["+r.join(", ")+"]"};function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return CM}var PM,jH;function Dnt(){if(jH)return PM;jH=1;var t=_r(),e=Ts().Graph,n=Pnt();PM=i;var r=t.constant(1);function i(u,c){if(u.nodeCount()<=1)return[];var f=s(u,c||r),d=a(f.graph,f.buckets,f.zeroIdx);return t.flatten(t.map(d,function(h){return u.outEdges(h.v,h.w)}),!0)}function a(u,c,f){for(var d=[],h=c[c.length-1],p=c[0],g;u.nodeCount();){for(;g=p.dequeue();)o(u,c,f,g);for(;g=h.dequeue();)o(u,c,f,g);if(u.nodeCount()){for(var v=c.length-2;v>0;--v)if(g=c[v].dequeue(),g){d=d.concat(o(u,c,f,g,!0));break}}}return d}function o(u,c,f,d,h){var p=h?[]:void 0;return t.forEach(u.inEdges(d.v),function(g){var v=u.edge(g),m=u.node(g.v);h&&p.push({v:g.v,w:g.w}),m.out-=v,l(c,f,m)}),t.forEach(u.outEdges(d.v),function(g){var v=u.edge(g),m=g.w,y=u.node(m);y.in-=v,l(c,f,y)}),u.removeNode(d.v),p}function s(u,c){var f=new e,d=0,h=0;t.forEach(u.nodes(),function(v){f.setNode(v,{v,in:0,out:0})}),t.forEach(u.edges(),function(v){var m=f.edge(v.v,v.w)||0,y=c(v),b=m+y;f.setEdge(v.v,v.w,b),h=Math.max(h,f.node(v.v).out+=y),d=Math.max(d,f.node(v.w).in+=y)});var p=t.range(h+d+3).map(function(){return new n}),g=d+1;return t.forEach(f.nodes(),function(v){l(p,g,f.node(v))}),{graph:f,buckets:p,zeroIdx:g}}function l(u,c,f){f.out?f.in?u[f.out-f.in+c].enqueue(f):u[u.length-1].enqueue(f):u[0].enqueue(f)}return PM}var DM,BH;function Int(){if(BH)return DM;BH=1;var t=_r(),e=Dnt();DM={run:n,undo:i};function n(a){var o=a.graph().acyclicer==="greedy"?e(a,s(a)):r(a);t.forEach(o,function(l){var u=a.edge(l);a.removeEdge(l),u.forwardName=l.name,u.reversed=!0,a.setEdge(l.w,l.v,u,t.uniqueId("rev"))});function s(l){return function(u){return l.edge(u).weight}}}function r(a){var o=[],s={},l={};function u(c){t.has(l,c)||(l[c]=!0,s[c]=!0,t.forEach(a.outEdges(c),function(f){t.has(s,f.w)?o.push(f):u(f.w)}),delete s[c])}return t.forEach(a.nodes(),u),o}function i(a){t.forEach(a.edges(),function(o){var s=a.edge(o);if(s.reversed){a.removeEdge(o);var l=s.forwardName;delete s.reversed,delete s.forwardName,a.setEdge(o.w,o.v,s,l)}})}return DM}var IM,$H;function Fa(){if($H)return IM;$H=1;var t=_r(),e=Ts().Graph;IM={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:a,predecessorWeights:o,intersectRect:s,buildLayerMatrix:l,normalizeRanks:u,removeEmptyRanks:c,addBorderNode:f,maxRank:d,partition:h,time:p,notime:g};function n(v,m,y,b){var x;do x=t.uniqueId(b);while(v.hasNode(x));return y.dummy=m,v.setNode(x,y),x}function r(v){var m=new e().setGraph(v.graph());return t.forEach(v.nodes(),function(y){m.setNode(y,v.node(y))}),t.forEach(v.edges(),function(y){var b=m.edge(y.v,y.w)||{weight:0,minlen:1},x=v.edge(y);m.setEdge(y.v,y.w,{weight:b.weight+x.weight,minlen:Math.max(b.minlen,x.minlen)})}),m}function i(v){var m=new e({multigraph:v.isMultigraph()}).setGraph(v.graph());return t.forEach(v.nodes(),function(y){v.children(y).length||m.setNode(y,v.node(y))}),t.forEach(v.edges(),function(y){m.setEdge(y,v.edge(y))}),m}function a(v){var m=t.map(v.nodes(),function(y){var b={};return t.forEach(v.outEdges(y),function(x){b[x.w]=(b[x.w]||0)+v.edge(x).weight}),b});return t.zipObject(v.nodes(),m)}function o(v){var m=t.map(v.nodes(),function(y){var b={};return t.forEach(v.inEdges(y),function(x){b[x.v]=(b[x.v]||0)+v.edge(x).weight}),b});return t.zipObject(v.nodes(),m)}function s(v,m){var y=v.x,b=v.y,x=m.x-y,w=m.y-b,_=v.width/2,E=v.height/2;if(!x&&!w)throw new Error("Not possible to find intersection inside of the rectangle");var S,O;return Math.abs(w)*_>Math.abs(x)*E?(w<0&&(E=-E),S=E*x/w,O=E):(x<0&&(_=-_),S=_,O=_*w/x),{x:y+S,y:b+O}}function l(v){var m=t.map(t.range(d(v)+1),function(){return[]});return t.forEach(v.nodes(),function(y){var b=v.node(y),x=b.rank;t.isUndefined(x)||(m[x][b.order]=y)}),m}function u(v){var m=t.min(t.map(v.nodes(),function(y){return v.node(y).rank}));t.forEach(v.nodes(),function(y){var b=v.node(y);t.has(b,"rank")&&(b.rank-=m)})}function c(v){var m=t.min(t.map(v.nodes(),function(w){return v.node(w).rank})),y=[];t.forEach(v.nodes(),function(w){var _=v.node(w).rank-m;y[_]||(y[_]=[]),y[_].push(w)});var b=0,x=v.graph().nodeRankFactor;t.forEach(y,function(w,_){t.isUndefined(w)&&_%x!==0?--b:b&&t.forEach(w,function(E){v.node(E).rank+=b})})}function f(v,m,y,b){var x={width:0,height:0};return arguments.length>=4&&(x.rank=y,x.order=b),n(v,"border",x,m)}function d(v){return t.max(t.map(v.nodes(),function(m){var y=v.node(m).rank;if(!t.isUndefined(y))return y}))}function h(v,m){var y={lhs:[],rhs:[]};return t.forEach(v,function(b){m(b)?y.lhs.push(b):y.rhs.push(b)}),y}function p(v,m){var y=t.now();try{return m()}finally{v+""+(t.now()-y)}}function g(v,m){return m()}return IM}var LM,VH;function Lnt(){if(VH)return LM;VH=1;var t=_r(),e=Fa();LM={run:n,undo:i};function n(a){a.graph().dummyChains=[],t.forEach(a.edges(),function(o){r(a,o)})}function r(a,o){var s=o.v,l=a.node(s).rank,u=o.w,c=a.node(u).rank,f=o.name,d=a.edge(o),h=d.labelRank;if(c!==l+1){a.removeEdge(o);var p,g,v;for(v=0,++l;l<c;++v,++l)d.points=[],g={width:0,height:0,edgeLabel:d,edgeObj:o,rank:l},p=e.addDummyNode(a,"edge",g,"_d"),l===h&&(g.width=d.width,g.height=d.height,g.dummy="edge-label",g.labelpos=d.labelpos),a.setEdge(s,p,{weight:d.weight},f),v===0&&a.graph().dummyChains.push(p),s=p;a.setEdge(s,u,{weight:d.weight},f)}}function i(a){t.forEach(a.graph().dummyChains,function(o){var s=a.node(o),l=s.edgeLabel,u;for(a.setEdge(s.edgeObj,l);s.dummy;)u=a.successors(o)[0],a.removeNode(o),l.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(l.x=s.x,l.y=s.y,l.width=s.width,l.height=s.height),o=u,s=a.node(o)})}return LM}var RM,qH;function jx(){if(qH)return RM;qH=1;var t=_r();RM={longestPath:e,slack:n};function e(r){var i={};function a(o){var s=r.node(o);if(t.has(i,o))return s.rank;i[o]=!0;var l=t.min(t.map(r.outEdges(o),function(u){return a(u.w)-r.edge(u).minlen}));return(l===Number.POSITIVE_INFINITY||l===void 0||l===null)&&(l=0),s.rank=l}t.forEach(r.sources(),a)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return RM}var NM,WH;function rfe(){if(WH)return NM;WH=1;var t=_r(),e=Ts().Graph,n=jx().slack;NM=r;function r(s){var l=new e({directed:!1}),u=s.nodes()[0],c=s.nodeCount();l.setNode(u,{});for(var f,d;i(l,s)<c;)f=a(l,s),d=l.hasNode(f.v)?n(s,f):-n(s,f),o(l,s,d);return l}function i(s,l){function u(c){t.forEach(l.nodeEdges(c),function(f){var d=f.v,h=c===d?f.w:d;!s.hasNode(h)&&!n(l,f)&&(s.setNode(h,{}),s.setEdge(c,h,{}),u(h))})}return t.forEach(s.nodes(),u),s.nodeCount()}function a(s,l){return t.minBy(l.edges(),function(u){if(s.hasNode(u.v)!==s.hasNode(u.w))return n(l,u)})}function o(s,l,u){t.forEach(s.nodes(),function(c){l.node(c).rank+=u})}return NM}var FM,GH;function Rnt(){if(GH)return FM;GH=1;var t=_r(),e=rfe(),n=jx().slack,r=jx().longestPath,i=Ts().alg.preorder,a=Ts().alg.postorder,o=Fa().simplify;FM=s,s.initLowLimValues=f,s.initCutValues=l,s.calcCutValue=c,s.leaveEdge=h,s.enterEdge=p,s.exchangeEdges=g;function s(b){b=o(b),r(b);var x=e(b);f(x),l(x,b);for(var w,_;w=h(x);)_=p(x,b,w),g(x,b,w,_)}function l(b,x){var w=a(b,b.nodes());w=w.slice(0,w.length-1),t.forEach(w,function(_){u(b,x,_)})}function u(b,x,w){var _=b.node(w),E=_.parent;b.edge(w,E).cutvalue=c(b,x,w)}function c(b,x,w){var _=b.node(w),E=_.parent,S=!0,O=x.edge(w,E),A=0;return O||(S=!1,O=x.edge(E,w)),A=O.weight,t.forEach(x.nodeEdges(w),function(T){var I=T.v===w,D=I?T.w:T.v;if(D!==E){var R=I===S,F=x.edge(T).weight;if(A+=R?F:-F,m(b,w,D)){var z=b.edge(w,D).cutvalue;A+=R?-z:z}}}),A}function f(b,x){arguments.length<2&&(x=b.nodes()[0]),d(b,{},1,x)}function d(b,x,w,_,E){var S=w,O=b.node(_);return x[_]=!0,t.forEach(b.neighbors(_),function(A){t.has(x,A)||(w=d(b,x,w,A,_))}),O.low=S,O.lim=w++,E?O.parent=E:delete O.parent,w}function h(b){return t.find(b.edges(),function(x){return b.edge(x).cutvalue<0})}function p(b,x,w){var _=w.v,E=w.w;x.hasEdge(_,E)||(_=w.w,E=w.v);var S=b.node(_),O=b.node(E),A=S,T=!1;S.lim>O.lim&&(A=O,T=!0);var I=t.filter(x.edges(),function(D){return T===y(b,b.node(D.v),A)&&T!==y(b,b.node(D.w),A)});return t.minBy(I,function(D){return n(x,D)})}function g(b,x,w,_){var E=w.v,S=w.w;b.removeEdge(E,S),b.setEdge(_.v,_.w,{}),f(b),l(b,x),v(b,x)}function v(b,x){var w=t.find(b.nodes(),function(E){return!x.node(E).parent}),_=i(b,w);_=_.slice(1),t.forEach(_,function(E){var S=b.node(E).parent,O=x.edge(E,S),A=!1;O||(O=x.edge(S,E),A=!0),x.node(E).rank=x.node(S).rank+(A?O.minlen:-O.minlen)})}function m(b,x,w){return b.hasEdge(x,w)}function y(b,x,w){return w.low<=x.lim&&x.lim<=w.lim}return FM}var zM,HH;function Nnt(){if(HH)return zM;HH=1;var t=jx(),e=t.longestPath,n=rfe(),r=Rnt();zM=i;function i(l){switch(l.graph().ranker){case"network-simplex":s(l);break;case"tight-tree":o(l);break;case"longest-path":a(l);break;default:s(l)}}var a=e;function o(l){e(l),n(l)}function s(l){r(l)}return zM}var jM,YH;function Fnt(){if(YH)return jM;YH=1;var t=_r();jM=e;function e(i){var a=r(i);t.forEach(i.graph().dummyChains,function(o){for(var s=i.node(o),l=s.edgeObj,u=n(i,a,l.v,l.w),c=u.path,f=u.lca,d=0,h=c[d],p=!0;o!==l.w;){if(s=i.node(o),p){for(;(h=c[d])!==f&&i.node(h).maxRank<s.rank;)d++;h===f&&(p=!1)}if(!p){for(;d<c.length-1&&i.node(h=c[d+1]).minRank<=s.rank;)d++;h=c[d]}i.setParent(o,h),o=i.successors(o)[0]}})}function n(i,a,o,s){var l=[],u=[],c=Math.min(a[o].low,a[s].low),f=Math.max(a[o].lim,a[s].lim),d,h;d=o;do d=i.parent(d),l.push(d);while(d&&(a[d].low>c||f>a[d].lim));for(h=d,d=s;(d=i.parent(d))!==h;)u.push(d);return{path:l.concat(u.reverse()),lca:h}}function r(i){var a={},o=0;function s(l){var u=o;t.forEach(i.children(l),s),a[l]={low:u,lim:o++}}return t.forEach(i.children(),s),a}return jM}var BM,UH;function znt(){if(UH)return BM;UH=1;var t=_r(),e=Fa();BM={run:n,cleanup:o};function n(s){var l=e.addDummyNode(s,"root",{},"_root"),u=i(s),c=t.max(t.values(u))-1,f=2*c+1;s.graph().nestingRoot=l,t.forEach(s.edges(),function(h){s.edge(h).minlen*=f});var d=a(s)+1;t.forEach(s.children(),function(h){r(s,l,f,d,c,u,h)}),s.graph().nodeRankFactor=f}function r(s,l,u,c,f,d,h){var p=s.children(h);if(!p.length){h!==l&&s.setEdge(l,h,{weight:0,minlen:u});return}var g=e.addBorderNode(s,"_bt"),v=e.addBorderNode(s,"_bb"),m=s.node(h);s.setParent(g,h),m.borderTop=g,s.setParent(v,h),m.borderBottom=v,t.forEach(p,function(y){r(s,l,u,c,f,d,y);var b=s.node(y),x=b.borderTop?b.borderTop:y,w=b.borderBottom?b.borderBottom:y,_=b.borderTop?c:2*c,E=x!==w?1:f-d[h]+1;s.setEdge(g,x,{weight:_,minlen:E,nestingEdge:!0}),s.setEdge(w,v,{weight:_,minlen:E,nestingEdge:!0})}),s.parent(h)||s.setEdge(l,g,{weight:0,minlen:f+d[h]})}function i(s){var l={};function u(c,f){var d=s.children(c);d&&d.length&&t.forEach(d,function(h){u(h,f+1)}),l[c]=f}return t.forEach(s.children(),function(c){u(c,1)}),l}function a(s){return t.reduce(s.edges(),function(l,u){return l+s.edge(u).weight},0)}function o(s){var l=s.graph();s.removeNode(l.nestingRoot),delete l.nestingRoot,t.forEach(s.edges(),function(u){var c=s.edge(u);c.nestingEdge&&s.removeEdge(u)})}return BM}var $M,XH;function jnt(){if(XH)return $M;XH=1;var t=_r(),e=Fa();$M=n;function n(i){function a(o){var s=i.children(o),l=i.node(o);if(s.length&&t.forEach(s,a),t.has(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(var u=l.minRank,c=l.maxRank+1;u<c;++u)r(i,"borderLeft","_bl",o,l,u),r(i,"borderRight","_br",o,l,u)}}t.forEach(i.children(),a)}function r(i,a,o,s,l,u){var c={width:0,height:0,rank:u,borderType:a},f=l[a][u-1],d=e.addDummyNode(i,"border",c,o);l[a][u]=d,i.setParent(d,s),f&&i.setEdge(f,d,{weight:1})}return $M}var VM,ZH;function Bnt(){if(ZH)return VM;ZH=1;var t=_r();VM={adjust:e,undo:n};function e(u){var c=u.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&r(u)}function n(u){var c=u.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&a(u),(c==="lr"||c==="rl")&&(s(u),r(u))}function r(u){t.forEach(u.nodes(),function(c){i(u.node(c))}),t.forEach(u.edges(),function(c){i(u.edge(c))})}function i(u){var c=u.width;u.width=u.height,u.height=c}function a(u){t.forEach(u.nodes(),function(c){o(u.node(c))}),t.forEach(u.edges(),function(c){var f=u.edge(c);t.forEach(f.points,o),t.has(f,"y")&&o(f)})}function o(u){u.y=-u.y}function s(u){t.forEach(u.nodes(),function(c){l(u.node(c))}),t.forEach(u.edges(),function(c){var f=u.edge(c);t.forEach(f.points,l),t.has(f,"x")&&l(f)})}function l(u){var c=u.x;u.x=u.y,u.y=c}return VM}var qM,KH;function $nt(){if(KH)return qM;KH=1;var t=_r();qM=e;function e(n){var r={},i=t.filter(n.nodes(),function(u){return!n.children(u).length}),a=t.max(t.map(i,function(u){return n.node(u).rank})),o=t.map(t.range(a+1),function(){return[]});function s(u){if(!t.has(r,u)){r[u]=!0;var c=n.node(u);o[c.rank].push(u),t.forEach(n.successors(u),s)}}var l=t.sortBy(i,function(u){return n.node(u).rank});return t.forEach(l,s),o}return qM}var WM,JH;function Vnt(){if(JH)return WM;JH=1;var t=_r();WM=e;function e(r,i){for(var a=0,o=1;o<i.length;++o)a+=n(r,i[o-1],i[o]);return a}function n(r,i,a){for(var o=t.zipObject(a,t.map(a,function(d,h){return h})),s=t.flatten(t.map(i,function(d){return t.sortBy(t.map(r.outEdges(d),function(h){return{pos:o[h.w],weight:r.edge(h).weight}}),"pos")}),!0),l=1;l<a.length;)l<<=1;var u=2*l-1;l-=1;var c=t.map(new Array(u),function(){return 0}),f=0;return t.forEach(s.forEach(function(d){var h=d.pos+l;c[h]+=d.weight;for(var p=0;h>0;)h%2&&(p+=c[h+1]),h=h-1>>1,c[h]+=d.weight;f+=d.weight*p})),f}return WM}var GM,QH;function qnt(){if(QH)return GM;QH=1;var t=_r();GM=e;function e(n,r){return t.map(r,function(i){var a=n.inEdges(i);if(a.length){var o=t.reduce(a,function(s,l){var u=n.edge(l),c=n.node(l.v);return{sum:s.sum+u.weight*c.order,weight:s.weight+u.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return GM}var HM,eY;function Wnt(){if(eY)return HM;eY=1;var t=_r();HM=e;function e(i,a){var o={};t.forEach(i,function(l,u){var c=o[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:u};t.isUndefined(l.barycenter)||(c.barycenter=l.barycenter,c.weight=l.weight)}),t.forEach(a.edges(),function(l){var u=o[l.v],c=o[l.w];!t.isUndefined(u)&&!t.isUndefined(c)&&(c.indegree++,u.out.push(o[l.w]))});var s=t.filter(o,function(l){return!l.indegree});return n(s)}function n(i){var a=[];function o(u){return function(c){c.merged||(t.isUndefined(c.barycenter)||t.isUndefined(u.barycenter)||c.barycenter>=u.barycenter)&&r(u,c)}}function s(u){return function(c){c.in.push(u),--c.indegree===0&&i.push(c)}}for(;i.length;){var l=i.pop();a.push(l),t.forEach(l.in.reverse(),o(l)),t.forEach(l.out,s(l))}return t.map(t.filter(a,function(u){return!u.merged}),function(u){return t.pick(u,["vs","i","barycenter","weight"])})}function r(i,a){var o=0,s=0;i.weight&&(o+=i.barycenter*i.weight,s+=i.weight),a.weight&&(o+=a.barycenter*a.weight,s+=a.weight),i.vs=a.vs.concat(i.vs),i.barycenter=o/s,i.weight=s,i.i=Math.min(a.i,i.i),a.merged=!0}return HM}var YM,tY;function Gnt(){if(tY)return YM;tY=1;var t=_r(),e=Fa();YM=n;function n(a,o){var s=e.partition(a,function(g){return t.has(g,"barycenter")}),l=s.lhs,u=t.sortBy(s.rhs,function(g){return-g.i}),c=[],f=0,d=0,h=0;l.sort(i(!!o)),h=r(c,u,h),t.forEach(l,function(g){h+=g.vs.length,c.push(g.vs),f+=g.barycenter*g.weight,d+=g.weight,h=r(c,u,h)});var p={vs:t.flatten(c,!0)};return d&&(p.barycenter=f/d,p.weight=d),p}function r(a,o,s){for(var l;o.length&&(l=t.last(o)).i<=s;)o.pop(),a.push(l.vs),s++;return s}function i(a){return function(o,s){return o.barycenter<s.barycenter?-1:o.barycenter>s.barycenter?1:a?s.i-o.i:o.i-s.i}}return YM}var UM,nY;function Hnt(){if(nY)return UM;nY=1;var t=_r(),e=qnt(),n=Wnt(),r=Gnt();UM=i;function i(s,l,u,c){var f=s.children(l),d=s.node(l),h=d?d.borderLeft:void 0,p=d?d.borderRight:void 0,g={};h&&(f=t.filter(f,function(w){return w!==h&&w!==p}));var v=e(s,f);t.forEach(v,function(w){if(s.children(w.v).length){var _=i(s,w.v,u,c);g[w.v]=_,t.has(_,"barycenter")&&o(w,_)}});var m=n(v,u);a(m,g);var y=r(m,c);if(h&&(y.vs=t.flatten([h,y.vs,p],!0),s.predecessors(h).length)){var b=s.node(s.predecessors(h)[0]),x=s.node(s.predecessors(p)[0]);t.has(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+b.order+x.order)/(y.weight+2),y.weight+=2}return y}function a(s,l){t.forEach(s,function(u){u.vs=t.flatten(u.vs.map(function(c){return l[c]?l[c].vs:c}),!0)})}function o(s,l){t.isUndefined(s.barycenter)?(s.barycenter=l.barycenter,s.weight=l.weight):(s.barycenter=(s.barycenter*s.weight+l.barycenter*l.weight)/(s.weight+l.weight),s.weight+=l.weight)}return UM}var XM,rY;function Ynt(){if(rY)return XM;rY=1;var t=_r(),e=Ts().Graph;XM=n;function n(i,a,o){var s=r(i),l=new e({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(u){return i.node(u)});return t.forEach(i.nodes(),function(u){var c=i.node(u),f=i.parent(u);(c.rank===a||c.minRank<=a&&a<=c.maxRank)&&(l.setNode(u),l.setParent(u,f||s),t.forEach(i[o](u),function(d){var h=d.v===u?d.w:d.v,p=l.edge(h,u),g=t.isUndefined(p)?0:p.weight;l.setEdge(h,u,{weight:i.edge(d).weight+g})}),t.has(c,"minRank")&&l.setNode(u,{borderLeft:c.borderLeft[a],borderRight:c.borderRight[a]}))}),l}function r(i){for(var a;i.hasNode(a=t.uniqueId("_root")););return a}return XM}var ZM,iY;function Unt(){if(iY)return ZM;iY=1;var t=_r();ZM=e;function e(n,r,i){var a={},o;t.forEach(i,function(s){for(var l=n.parent(s),u,c;l;){if(u=n.parent(l),u?(c=a[u],a[u]=l):(c=o,o=l),c&&c!==l){r.setEdge(c,l);return}l=u}})}return ZM}var KM,aY;function Xnt(){if(aY)return KM;aY=1;var t=_r(),e=$nt(),n=Vnt(),r=Hnt(),i=Ynt(),a=Unt(),o=Ts().Graph,s=Fa();KM=l;function l(d){var h=s.maxRank(d),p=u(d,t.range(1,h+1),"inEdges"),g=u(d,t.range(h-1,-1,-1),"outEdges"),v=e(d);f(d,v);for(var m=Number.POSITIVE_INFINITY,y,b=0,x=0;x<4;++b,++x){c(b%2?p:g,b%4>=2),v=s.buildLayerMatrix(d);var w=n(d,v);w<m&&(x=0,y=t.cloneDeep(v),m=w)}f(d,y)}function u(d,h,p){return t.map(h,function(g){return i(d,g,p)})}function c(d,h){var p=new o;t.forEach(d,function(g){var v=g.graph().root,m=r(g,v,p,h);t.forEach(m.vs,function(y,b){g.node(y).order=b}),a(g,p,m.vs)})}function f(d,h){t.forEach(h,function(p){t.forEach(p,function(g,v){d.node(g).order=v})})}return KM}var JM,oY;function Znt(){if(oY)return JM;oY=1;var t=_r(),e=Ts().Graph,n=Fa();JM={positionX:p,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:s,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:d,findSmallestWidthAlignment:f,balance:h};function r(m,y){var b={};function x(w,_){var E=0,S=0,O=w.length,A=t.last(_);return t.forEach(_,function(T,I){var D=a(m,T),R=D?m.node(D).order:O;(D||T===A)&&(t.forEach(_.slice(S,I+1),function(F){t.forEach(m.predecessors(F),function(z){var N=m.node(z),L=N.order;(L<E||R<L)&&!(N.dummy&&m.node(F).dummy)&&o(b,z,F)})}),S=I+1,E=R)}),_}return t.reduce(y,x),b}function i(m,y){var b={};function x(_,E,S,O,A){var T;t.forEach(t.range(E,S),function(I){T=_[I],m.node(T).dummy&&t.forEach(m.predecessors(T),function(D){var R=m.node(D);R.dummy&&(R.order<O||R.order>A)&&o(b,D,T)})})}function w(_,E){var S=-1,O,A=0;return t.forEach(E,function(T,I){if(m.node(T).dummy==="border"){var D=m.predecessors(T);D.length&&(O=m.node(D[0]).order,x(E,A,I,S,O),A=I,S=O)}x(E,A,E.length,O,_.length)}),E}return t.reduce(y,w),b}function a(m,y){if(m.node(y).dummy)return t.find(m.predecessors(y),function(b){return m.node(b).dummy})}function o(m,y,b){if(y>b){var x=y;y=b,b=x}var w=m[y];w||(m[y]=w={}),w[b]=!0}function s(m,y,b){if(y>b){var x=y;y=b,b=x}return t.has(m[y],b)}function l(m,y,b,x){var w={},_={},E={};return t.forEach(y,function(S){t.forEach(S,function(O,A){w[O]=O,_[O]=O,E[O]=A})}),t.forEach(y,function(S){var O=-1;t.forEach(S,function(A){var T=x(A);if(T.length){T=t.sortBy(T,function(z){return E[z]});for(var I=(T.length-1)/2,D=Math.floor(I),R=Math.ceil(I);D<=R;++D){var F=T[D];_[A]===A&&O<E[F]&&!s(b,A,F)&&(_[F]=A,_[A]=w[A]=w[F],O=E[F])}}})}),{root:w,align:_}}function u(m,y,b,x,w){var _={},E=c(m,y,b,w),S=w?"borderLeft":"borderRight";function O(I,D){for(var R=E.nodes(),F=R.pop(),z={};F;)z[F]?I(F):(z[F]=!0,R.push(F),R=R.concat(D(F))),F=R.pop()}function A(I){_[I]=E.inEdges(I).reduce(function(D,R){return Math.max(D,_[R.v]+E.edge(R))},0)}function T(I){var D=E.outEdges(I).reduce(function(F,z){return Math.min(F,_[z.w]-E.edge(z))},Number.POSITIVE_INFINITY),R=m.node(I);D!==Number.POSITIVE_INFINITY&&R.borderType!==S&&(_[I]=Math.max(_[I],D))}return O(A,E.predecessors.bind(E)),O(T,E.successors.bind(E)),t.forEach(x,function(I){_[I]=_[b[I]]}),_}function c(m,y,b,x){var w=new e,_=m.graph(),E=g(_.nodesep,_.edgesep,x);return t.forEach(y,function(S){var O;t.forEach(S,function(A){var T=b[A];if(w.setNode(T),O){var I=b[O],D=w.edge(I,T);w.setEdge(I,T,Math.max(E(m,A,O),D||0))}O=A})}),w}function f(m,y){return t.minBy(t.values(y),function(b){var x=Number.NEGATIVE_INFINITY,w=Number.POSITIVE_INFINITY;return t.forIn(b,function(_,E){var S=v(m,E)/2;x=Math.max(_+S,x),w=Math.min(_-S,w)}),x-w})}function d(m,y){var b=t.values(y),x=t.min(b),w=t.max(b);t.forEach(["u","d"],function(_){t.forEach(["l","r"],function(E){var S=_+E,O=m[S],A;if(O!==y){var T=t.values(O);A=E==="l"?x-t.min(T):w-t.max(T),A&&(m[S]=t.mapValues(O,function(I){return I+A}))}})})}function h(m,y){return t.mapValues(m.ul,function(b,x){if(y)return m[y.toLowerCase()][x];var w=t.sortBy(t.map(m,x));return(w[1]+w[2])/2})}function p(m){var y=n.buildLayerMatrix(m),b=t.merge(r(m,y),i(m,y)),x={},w;t.forEach(["u","d"],function(E){w=E==="u"?y:t.values(y).reverse(),t.forEach(["l","r"],function(S){S==="r"&&(w=t.map(w,function(I){return t.values(I).reverse()}));var O=(E==="u"?m.predecessors:m.successors).bind(m),A=l(m,w,b,O),T=u(m,w,A.root,A.align,S==="r");S==="r"&&(T=t.mapValues(T,function(I){return-I})),x[E+S]=T})});var _=f(m,x);return d(x,_),h(x,m.graph().align)}function g(m,y,b){return function(x,w,_){var E=x.node(w),S=x.node(_),O=0,A;if(O+=E.width/2,t.has(E,"labelpos"))switch(E.labelpos.toLowerCase()){case"l":A=-E.width/2;break;case"r":A=E.width/2;break}if(A&&(O+=b?A:-A),A=0,O+=(E.dummy?y:m)/2,O+=(S.dummy?y:m)/2,O+=S.width/2,t.has(S,"labelpos"))switch(S.labelpos.toLowerCase()){case"l":A=S.width/2;break;case"r":A=-S.width/2;break}return A&&(O+=b?A:-A),A=0,O}}function v(m,y){return m.node(y).width}return JM}var QM,sY;function Knt(){if(sY)return QM;sY=1;var t=_r(),e=Fa(),n=Znt().positionX;QM=r;function r(a){a=e.asNonCompoundGraph(a),i(a),t.forEach(n(a),function(o,s){a.node(s).x=o})}function i(a){var o=e.buildLayerMatrix(a),s=a.graph().ranksep,l=0;t.forEach(o,function(u){var c=t.max(t.map(u,function(f){return a.node(f).height}));t.forEach(u,function(f){a.node(f).y=l+c/2}),l+=c+s})}return QM}var eC,lY;function Jnt(){if(lY)return eC;lY=1;var t=_r(),e=Int(),n=Lnt(),r=Nnt(),i=Fa().normalizeRanks,a=Fnt(),o=Fa().removeEmptyRanks,s=znt(),l=jnt(),u=Bnt(),c=Xnt(),f=Knt(),d=Fa(),h=Ts().Graph;eC=p;function p(Y,q){var K=q&&q.debugTiming?d.time:d.notime;K("layout",function(){var J=K("  buildLayoutGraph",function(){return O(Y)});K("  runLayout",function(){g(J,K)}),K("  updateInputGraph",function(){v(Y,J)})})}function g(Y,q){q("    makeSpaceForEdgeLabels",function(){A(Y)}),q("    removeSelfEdges",function(){B(Y)}),q("    acyclic",function(){e.run(Y)}),q("    nestingGraph.run",function(){s.run(Y)}),q("    rank",function(){r(d.asNonCompoundGraph(Y))}),q("    injectEdgeLabelProxies",function(){T(Y)}),q("    removeEmptyRanks",function(){o(Y)}),q("    nestingGraph.cleanup",function(){s.cleanup(Y)}),q("    normalizeRanks",function(){i(Y)}),q("    assignRankMinMax",function(){I(Y)}),q("    removeEdgeLabelProxies",function(){D(Y)}),q("    normalize.run",function(){n.run(Y)}),q("    parentDummyChains",function(){a(Y)}),q("    addBorderSegments",function(){l(Y)}),q("    order",function(){c(Y)}),q("    insertSelfEdges",function(){$(Y)}),q("    adjustCoordinateSystem",function(){u.adjust(Y)}),q("    position",function(){f(Y)}),q("    positionSelfEdges",function(){G(Y)}),q("    removeBorderNodes",function(){L(Y)}),q("    normalize.undo",function(){n.undo(Y)}),q("    fixupEdgeLabelCoords",function(){z(Y)}),q("    undoCoordinateSystem",function(){u.undo(Y)}),q("    translateGraph",function(){R(Y)}),q("    assignNodeIntersects",function(){F(Y)}),q("    reversePoints",function(){N(Y)}),q("    acyclic.undo",function(){e.undo(Y)})}function v(Y,q){t.forEach(Y.nodes(),function(K){var J=Y.node(K),Q=q.node(K);J&&(J.x=Q.x,J.y=Q.y,q.children(K).length&&(J.width=Q.width,J.height=Q.height))}),t.forEach(Y.edges(),function(K){var J=Y.edge(K),Q=q.edge(K);J.points=Q.points,t.has(Q,"x")&&(J.x=Q.x,J.y=Q.y)}),Y.graph().width=q.graph().width,Y.graph().height=q.graph().height}var m=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],x=["width","height"],w={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function O(Y){var q=new h({multigraph:!0,compound:!0}),K=U(Y.graph());return q.setGraph(t.merge({},y,W(K,m),t.pick(K,b))),t.forEach(Y.nodes(),function(J){var Q=U(Y.node(J));q.setNode(J,t.defaults(W(Q,x),w)),q.setParent(J,Y.parent(J))}),t.forEach(Y.edges(),function(J){var Q=U(Y.edge(J));q.setEdge(J,t.merge({},E,W(Q,_),t.pick(Q,S)))}),q}function A(Y){var q=Y.graph();q.ranksep/=2,t.forEach(Y.edges(),function(K){var J=Y.edge(K);J.minlen*=2,J.labelpos.toLowerCase()!=="c"&&(q.rankdir==="TB"||q.rankdir==="BT"?J.width+=J.labeloffset:J.height+=J.labeloffset)})}function T(Y){t.forEach(Y.edges(),function(q){var K=Y.edge(q);if(K.width&&K.height){var J=Y.node(q.v),Q=Y.node(q.w),se={rank:(Q.rank-J.rank)/2+J.rank,e:q};d.addDummyNode(Y,"edge-proxy",se,"_ep")}})}function I(Y){var q=0;t.forEach(Y.nodes(),function(K){var J=Y.node(K);J.borderTop&&(J.minRank=Y.node(J.borderTop).rank,J.maxRank=Y.node(J.borderBottom).rank,q=t.max(q,J.maxRank))}),Y.graph().maxRank=q}function D(Y){t.forEach(Y.nodes(),function(q){var K=Y.node(q);K.dummy==="edge-proxy"&&(Y.edge(K.e).labelRank=K.rank,Y.removeNode(q))})}function R(Y){var q=Number.POSITIVE_INFINITY,K=0,J=Number.POSITIVE_INFINITY,Q=0,se=Y.graph(),de=se.marginx||0,ye=se.marginy||0;function _e(Ee){var ue=Ee.x,he=Ee.y,ke=Ee.width,Se=Ee.height;q=Math.min(q,ue-ke/2),K=Math.max(K,ue+ke/2),J=Math.min(J,he-Se/2),Q=Math.max(Q,he+Se/2)}t.forEach(Y.nodes(),function(Ee){_e(Y.node(Ee))}),t.forEach(Y.edges(),function(Ee){var ue=Y.edge(Ee);t.has(ue,"x")&&_e(ue)}),q-=de,J-=ye,t.forEach(Y.nodes(),function(Ee){var ue=Y.node(Ee);ue.x-=q,ue.y-=J}),t.forEach(Y.edges(),function(Ee){var ue=Y.edge(Ee);t.forEach(ue.points,function(he){he.x-=q,he.y-=J}),t.has(ue,"x")&&(ue.x-=q),t.has(ue,"y")&&(ue.y-=J)}),se.width=K-q+de,se.height=Q-J+ye}function F(Y){t.forEach(Y.edges(),function(q){var K=Y.edge(q),J=Y.node(q.v),Q=Y.node(q.w),se,de;K.points?(se=K.points[0],de=K.points[K.points.length-1]):(K.points=[],se=Q,de=J),K.points.unshift(d.intersectRect(J,se)),K.points.push(d.intersectRect(Q,de))})}function z(Y){t.forEach(Y.edges(),function(q){var K=Y.edge(q);if(t.has(K,"x"))switch((K.labelpos==="l"||K.labelpos==="r")&&(K.width-=K.labeloffset),K.labelpos){case"l":K.x-=K.width/2+K.labeloffset;break;case"r":K.x+=K.width/2+K.labeloffset;break}})}function N(Y){t.forEach(Y.edges(),function(q){var K=Y.edge(q);K.reversed&&K.points.reverse()})}function L(Y){t.forEach(Y.nodes(),function(q){if(Y.children(q).length){var K=Y.node(q),J=Y.node(K.borderTop),Q=Y.node(K.borderBottom),se=Y.node(t.last(K.borderLeft)),de=Y.node(t.last(K.borderRight));K.width=Math.abs(de.x-se.x),K.height=Math.abs(Q.y-J.y),K.x=se.x+K.width/2,K.y=J.y+K.height/2}}),t.forEach(Y.nodes(),function(q){Y.node(q).dummy==="border"&&Y.removeNode(q)})}function B(Y){t.forEach(Y.edges(),function(q){if(q.v===q.w){var K=Y.node(q.v);K.selfEdges||(K.selfEdges=[]),K.selfEdges.push({e:q,label:Y.edge(q)}),Y.removeEdge(q)}})}function $(Y){var q=d.buildLayerMatrix(Y);t.forEach(q,function(K){var J=0;t.forEach(K,function(Q,se){var de=Y.node(Q);de.order=se+J,t.forEach(de.selfEdges,function(ye){d.addDummyNode(Y,"selfedge",{width:ye.label.width,height:ye.label.height,rank:de.rank,order:se+ ++J,e:ye.e,label:ye.label},"_se")}),delete de.selfEdges})})}function G(Y){t.forEach(Y.nodes(),function(q){var K=Y.node(q);if(K.dummy==="selfedge"){var J=Y.node(K.e.v),Q=J.x+J.width/2,se=J.y,de=K.x-Q,ye=J.height/2;Y.setEdge(K.e,K.label),Y.removeNode(q),K.label.points=[{x:Q+2*de/3,y:se-ye},{x:Q+5*de/6,y:se-ye},{x:Q+de,y:se},{x:Q+5*de/6,y:se+ye},{x:Q+2*de/3,y:se+ye}],K.label.x=K.x,K.label.y=K.y}})}function W(Y,q){return t.mapValues(t.pick(Y,q),Number)}function U(Y){var q={};return t.forEach(Y,function(K,J){q[J.toLowerCase()]=K}),q}return eC}var tC,uY;function Qnt(){if(uY)return tC;uY=1;var t=_r(),e=Fa(),n=Ts().Graph;tC={debugOrdering:r};function r(i){var a=e.buildLayerMatrix(i),o=new n({compound:!0,multigraph:!0}).setGraph({});return t.forEach(i.nodes(),function(s){o.setNode(s,{label:s}),o.setParent(s,"layer"+i.node(s).rank)}),t.forEach(i.edges(),function(s){o.setEdge(s.v,s.w,{},s.name)}),t.forEach(a,function(s,l){var u="layer"+l;o.setNode(u,{rank:"same"}),t.reduce(s,function(c,f){return o.setEdge(c,f,{style:"invis"}),f})}),o}return tC}var nC,cY;function ert(){return cY||(cY=1,nC="0.8.5"),nC}var rC,fY;function trt(){return fY||(fY=1,rC={graphlib:Ts(),layout:Jnt(),debug:Qnt(),util:{time:Fa().time,notime:Fa().notime},version:ert()}),rC}var ife=trt();const nrt=dp(ife);class a_{constructor(e){this.id="dagre",this.options={},Object.assign(this.options,a_.defaultOptions,e)}execute(e,n){return zt(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,e,Object.assign(Object.assign({},this.options),n))})}assign(e,n){return zt(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,e,Object.assign(Object.assign({},this.options),n))})}genericDagreLayout(e,n,r){return zt(this,void 0,void 0,function*(){const{nodeSize:i}=r,a=new ife.graphlib.Graph;a.setGraph(r),a.setDefaultEdgeLabel(()=>({}));const o=n.getAllNodes(),s=n.getAllEdges();[...o,...s].some(({id:u})=>je(u))&&console.error("Dagre layout only support string id, it will convert number to string."),n.getAllNodes().forEach(u=>{const{id:c}=u,f=Object.assign({},u.data);if(i!==void 0){const[d,h]=fm(Ue(i)?i(u):i);Object.assign(f,{width:d,height:h})}a.setNode(c.toString(),f)}),n.getAllEdges().forEach(({id:u,source:c,target:f})=>{a.setEdge(c.toString(),f.toString(),{id:u})}),nrt.layout(a);const l={nodes:[],edges:[]};return a.nodes().forEach(u=>{const c=a.node(u);l.nodes.push({id:u,data:c}),e&&n.mergeNodeData(u,c)}),a.edges().forEach(u=>{const c=a.edge(u),{id:f}=c,d=uJ(c,["id"]),{v:h,w:p}=u;l.edges.push({id:f,source:h,target:p,data:d}),e&&n.mergeEdgeData(f,d)}),l})}}a_.defaultOptions={};class F4{constructor(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}distanceTo(e){const n=this.rx-e.rx,r=this.ry-e.ry;return Math.hypot(n,r)}setPos(e,n){this.rx=e,this.ry=n}resetForce(){this.fx=0,this.fy=0}addForce(e){const n=e.rx-this.rx,r=e.ry-this.ry;let i=Math.hypot(n,r);i=i<1e-4?1e-4:i;const a=this.g*(this.degree+1)*(e.degree+1)/i;this.fx+=a*n/i,this.fy+=a*r/i}in(e){return e.contains(this.rx,this.ry)}add(e){const n=this.mass+e.mass,r=(this.rx*this.mass+e.rx*e.mass)/n,i=(this.ry*this.mass+e.ry*e.mass)/n,a=this.degree+e.degree,o={rx:r,ry:i,mass:n,degree:a};return new F4(o)}}class sh{constructor(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}getLength(){return this.length}contains(e,n){const r=this.length/2;return e<=this.xmid+r&&e>=this.xmid-r&&n<=this.ymid+r&&n>=this.ymid-r}NW(){const e=this.xmid-this.length/4,n=this.ymid+this.length/4,r=this.length/2,i={xmid:e,ymid:n,length:r};return new sh(i)}NE(){const e=this.xmid+this.length/4,n=this.ymid+this.length/4,r=this.length/2,i={xmid:e,ymid:n,length:r};return new sh(i)}SW(){const e=this.xmid-this.length/4,n=this.ymid-this.length/4,r=this.length/2,i={xmid:e,ymid:n,length:r};return new sh(i)}SE(){const e=this.xmid+this.length/4,n=this.ymid-this.length/4,r=this.length/2,i={xmid:e,ymid:n,length:r};return new sh(i)}}class lh{constructor(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,e!=null&&(this.quad=e)}insert(e){if(this.body==null){this.body=e;return}this._isExternal()?(this.quad&&(this.NW=new lh(this.quad.NW()),this.NE=new lh(this.quad.NE()),this.SW=new lh(this.quad.SW()),this.SE=new lh(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e))}_putBody(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(e){if(!(this.body==null||e===this.body))if(this._isExternal())e.addForce(this.body);else{const n=this.quad?this.quad.getLength():0,r=this.body.distanceTo(e);n/r<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e))}}}const rrt={center:[0,0],width:300,height:300,kr:5,kg:1,mode:"normal",preventOverlap:!1,dissuadeHubs:!1,maxIteration:0,ks:.1,ksmax:10,tao:.1};class irt{constructor(e={}){this.options=e,this.id="forceAtlas2",this.options=Object.assign(Object.assign({},rrt),e)}execute(e,n){return zt(this,void 0,void 0,function*(){return this.genericForceAtlas2Layout(!1,e,n)})}assign(e,n){return zt(this,void 0,void 0,function*(){yield this.genericForceAtlas2Layout(!0,e,n)})}genericForceAtlas2Layout(e,n,r){return zt(this,void 0,void 0,function*(){const i=n.getAllEdges(),a=n.getAllNodes(),o=this.formatOptions(r,a.length),{width:s,height:l,prune:u,maxIteration:c,nodeSize:f,center:d}=o;if(!(a!=null&&a.length)||a.length===1)return vd(n,e,d);const h=a.map(m=>to(m,[s,l])),p=i.filter(m=>{const{source:y,target:b}=m;return y!==b}),g=new xi({nodes:h,edges:p}),v=this.getSizes(g,f);if(this.run(g,n,c,v,e,o),u){for(let y=0;y<p.length;y+=1){const{source:b,target:x}=p[y],w=g.getDegree(b),_=g.getDegree(b);if(w<=1){const E=g.getNode(x);g.mergeNodeData(b,{x:E.data.x,y:E.data.y})}else if(_<=1){const E=g.getNode(b);g.mergeNodeData(x,{x:E.data.x,y:E.data.y})}}const m=Object.assign(Object.assign({},o),{prune:!1,barnesHut:!1});this.run(g,n,100,v,e,m)}return{nodes:h,edges:i}})}getSizes(e,n){const r=e.getAllNodes(),i={};for(let a=0;a<r.length;a+=1){const o=r[a];i[o.id]=y4(n,void 0)(o)}return i}formatOptions(e={},n){const r=Object.assign(Object.assign({},this.options),e),{center:i,width:a,height:o,barnesHut:s,prune:l,maxIteration:u,kr:c,kg:f}=r;return r.width=!a&&typeof window<"u"?window.innerWidth:a,r.height=!o&&typeof window<"u"?window.innerHeight:o,r.center=i||[r.width/2,r.height/2],s===void 0&&n>250&&(r.barnesHut=!0),l===void 0&&n>100&&(r.prune=!0),u===0&&!l?(r.maxIteration=250,n<=200&&n>100?r.maxIteration=1e3:n>200&&(r.maxIteration=1200)):u===0&&l&&(r.maxIteration=100,n<=200&&n>100?r.maxIteration=500:n>200&&(r.maxIteration=950)),c||(r.kr=50,n>100&&n<=500?r.kr=20:n>500&&(r.kr=1)),f||(r.kg=20,n>100&&n<=500?r.kg=10:n>500&&(r.kg=1)),r}run(e,n,r,i,a,o){const{kr:s,barnesHut:l,onTick:u}=o,c=e.getAllNodes();let f=0,d=r;const h={},p={},g={};for(let v=0;v<c.length;v+=1){const{data:m,id:y}=c[v];if(h[y]=[0,0],l){const b={id:v,rx:m.x,ry:m.y,mass:1,g:s,degree:e.getDegree(y)};g[y]=new F4(b)}}for(;d>0;)f=this.oneStep(e,{iter:d,preventOverlapIters:50,krPrime:100,sg:f,forces:h,preForces:p,bodies:g,sizes:i},o),d--,u==null||u({nodes:c,edges:n.getAllEdges()});return e}oneStep(e,n,r){const{iter:i,preventOverlapIters:a,krPrime:o,sg:s,preForces:l,bodies:u,sizes:c}=n;let{forces:f}=n;const{preventOverlap:d,barnesHut:h}=r,p=e.getAllNodes();for(let g=0;g<p.length;g+=1){const{id:v}=p[g];l[v]=[...f[v]],f[v]=[0,0]}return f=this.getAttrForces(e,i,a,c,f,r),h&&(d&&i>a||!d)?f=this.getOptRepGraForces(e,f,u,r):f=this.getRepGraForces(e,i,a,f,o,c,r),this.updatePos(e,f,l,s,r)}getAttrForces(e,n,r,i,a,o){const{preventOverlap:s,dissuadeHubs:l,mode:u,prune:c}=o,f=e.getAllEdges();for(let d=0;d<f.length;d+=1){const{source:h,target:p}=f[d],g=e.getNode(h),v=e.getNode(p),m=e.getDegree(h),y=e.getDegree(p);if(c&&(m<=1||y<=1))continue;const b=[v.data.x-g.data.x,v.data.y-g.data.y];let x=Math.hypot(b[0],b[1]);x=x<1e-4?1e-4:x,b[0]=b[0]/x,b[1]=b[1]/x,s&&n<r&&(x=x-i[h]-i[p]);let w=x,_=w;u==="linlog"&&(w=Math.log(1+x),_=w),l&&(w=x/m,_=x/y),s&&n<r&&x<=0?(w=0,_=0):s&&n<r&&x>0&&(w=x,_=x),a[h][0]+=w*b[0],a[p][0]-=_*b[0],a[h][1]+=w*b[1],a[p][1]-=_*b[1]}return a}getOptRepGraForces(e,n,r,i){const{kg:a,center:o,prune:s}=i,l=e.getAllNodes(),u=l.length;let c=9e10,f=-9e10,d=9e10,h=-9e10;for(let y=0;y<u;y+=1){const{id:b,data:x}=l[y];s&&e.getDegree(b)<=1||(r[b].setPos(x.x,x.y),x.x>=f&&(f=x.x),x.x<=c&&(c=x.x),x.y>=h&&(h=x.y),x.y<=d&&(d=x.y))}const p=Math.max(f-c,h-d),g={xmid:(f+c)/2,ymid:(h+d)/2,length:p,massCenter:o,mass:u},v=new sh(g),m=new lh(v);for(let y=0;y<u;y+=1){const{id:b}=l[y];s&&e.getDegree(b)<=1||r[b].in(v)&&m.insert(r[b])}for(let y=0;y<u;y+=1){const{id:b,data:x}=l[y],w=e.getDegree(b);if(s&&w<=1)continue;r[b].resetForce(),m.updateForce(r[b]),n[b][0]-=r[b].fx,n[b][1]-=r[b].fy;const _=[x.x-o[0],x.y-o[1]];let E=Math.hypot(_[0],_[1]);E=E<1e-4?1e-4:E,_[0]=_[0]/E,_[1]=_[1]/E;const S=a*(w+1);n[b][0]-=S*_[0],n[b][1]-=S*_[1]}return n}getRepGraForces(e,n,r,i,a,o,s){const{preventOverlap:l,kr:u,kg:c,center:f,prune:d}=s,h=e.getAllNodes(),p=h.length;for(let g=0;g<p;g+=1){const v=h[g],m=e.getDegree(v.id);for(let w=g+1;w<p;w+=1){const _=h[w],E=e.getDegree(_.id);if(d&&(m<=1||E<=1))continue;const S=[_.data.x-v.data.x,_.data.y-v.data.y];let O=Math.hypot(S[0],S[1]);O=O<1e-4?1e-4:O,S[0]=S[0]/O,S[1]=S[1]/O,l&&n<r&&(O=O-o[v.id]-o[_.id]);let A=u*(m+1)*(E+1)/O;l&&n<r&&O<0?A=a*(m+1)*(E+1):l&&n<r&&O===0?A=0:l&&n<r&&O>0&&(A=u*(m+1)*(E+1)/O),i[v.id][0]-=A*S[0],i[_.id][0]+=A*S[0],i[v.id][1]-=A*S[1],i[_.id][1]+=A*S[1]}const y=[v.data.x-f[0],v.data.y-f[1]],b=Math.hypot(y[0],y[1]);y[0]=y[0]/b,y[1]=y[1]/b;const x=c*(m+1);i[v.id][0]-=x*y[0],i[v.id][1]-=x*y[1]}return i}updatePos(e,n,r,i,a){const{ks:o,tao:s,prune:l,ksmax:u}=a,c=e.getAllNodes(),f=c.length,d=[],h=[];let p=0,g=0,v=i;for(let y=0;y<f;y+=1){const{id:b}=c[y],x=e.getDegree(b);if(l&&x<=1)continue;const w=[n[b][0]-r[b][0],n[b][1]-r[b][1]],_=Math.hypot(w[0],w[1]),E=[n[b][0]+r[b][0],n[b][1]+r[b][1]],S=Math.hypot(E[0],E[1]);d[y]=_,h[y]=S/2,p+=(x+1)*d[y],g+=(x+1)*h[y]}const m=v;v=s*g/p,m!==0&&(v=v>1.5*m?1.5*m:v);for(let y=0;y<f;y+=1){const{id:b,data:x}=c[y],w=e.getDegree(b);if(l&&w<=1||je(x.fx)&&je(x.fy))continue;let _=o*v/(1+v*Math.sqrt(d[y])),E=Math.hypot(n[b][0],n[b][1]);E=E<1e-4?1e-4:E;const S=u/E;_=_>S?S:_;const O=_*n[b][0],A=_*n[b][1];e.mergeNodeData(b,{x:x.x+O,y:x.y+A})}return v}}const art={maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10,width:300,height:300,nodeClusterBy:"cluster"},ort=800;class srt{constructor(e={}){this.options=e,this.id="fruchterman",this.timeInterval=0,this.running=!1,this.options=Object.assign(Object.assign({},art),e)}execute(e,n){return zt(this,void 0,void 0,function*(){return this.genericFruchtermanLayout(!1,e,n)})}assign(e,n){return zt(this,void 0,void 0,function*(){yield this.genericFruchtermanLayout(!0,e,n)})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval),this.running=!1}tick(e=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let r=0;r<e;r++)this.runOneStep(this.lastGraph,this.lastClusterMap,this.lastOptions);const n={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&n.nodes.forEach(r=>this.lastGraph.mergeNodeData(r.id,{x:r.data.x,y:r.data.y,z:this.options.dimensions===3?r.data.z:void 0})),n}genericFruchtermanLayout(e,n,r){return zt(this,void 0,void 0,function*(){if(this.running)return;const i=this.formatOptions(r),{dimensions:a,width:o,height:s,center:l,clustering:u,nodeClusterBy:c,maxIteration:f,onTick:d}=i,h=n.getAllNodes(),p=n.getAllEdges();if(!(h!=null&&h.length)){const b={nodes:[],edges:p};return this.lastResult=b,b}if(h.length===1){e&&n.mergeNodeData(h[0].id,{x:l[0],y:l[1],z:a===3?l[2]:void 0});const b={nodes:[Object.assign(Object.assign({},h[0]),{data:Object.assign(Object.assign({},h[0].data),{x:l[0],y:l[1],z:a===3?l[2]:void 0})})],edges:p};return this.lastResult=b,b}const g=h.map(b=>to(b,[o,s])),v=new xi({nodes:g,edges:p}),m={};if(u&&g.forEach(b=>{const x=b.data[c];m[x]||(m[x]={name:x,cx:0,cy:0,count:0})}),this.lastLayoutNodes=g,this.lastLayoutEdges=p,this.lastAssign=e,this.lastGraph=v,this.lastOptions=i,this.lastClusterMap=m,typeof window>"u")return;let y=0;return new Promise(b=>{this.timeInterval=window.setInterval(()=>{if(!this.running){b({nodes:g,edges:p});return}this.runOneStep(v,m,i),e&&g.forEach(({id:x,data:w})=>n.mergeNodeData(x,{x:w.x,y:w.y,z:a===3?w.z:void 0})),d==null||d({nodes:g,edges:p}),y++,y>=f&&(window.clearInterval(this.timeInterval),b({nodes:g,edges:p}))},0),this.running=!0})})}formatOptions(e={}){const n=Object.assign(Object.assign({},this.options),e),{clustering:r,nodeClusterBy:i}=n,{center:a,width:o,height:s}=n;return n.width=!o&&typeof window<"u"?window.innerWidth:o,n.height=!s&&typeof window<"u"?window.innerHeight:s,n.center=a||[n.width/2,n.height/2],n.clustering=r&&!!i,n}runOneStep(e,n,r){const{dimensions:i,height:a,width:o,gravity:s,center:l,speed:u,clustering:c,nodeClusterBy:f,clusterGravity:d}=r,h=a*o,p=Math.sqrt(h)/10,g=e.getAllNodes(),v=h/(g.length+1),m=Math.sqrt(v),y={};if(this.applyCalculate(e,y,m,v),c){for(const x in n)n[x].cx=0,n[x].cy=0,n[x].count=0;g.forEach(x=>{const{data:w}=x,_=n[w[f]];je(w.x)&&(_.cx+=w.x),je(w.y)&&(_.cy+=w.y),_.count++});for(const x in n)n[x].cx/=n[x].count,n[x].cy/=n[x].count;const b=d||s;g.forEach((x,w)=>{const{id:_,data:E}=x;if(!je(E.x)||!je(E.y))return;const S=n[E[f]],O=Math.sqrt((E.x-S.cx)*(E.x-S.cx)+(E.y-S.cy)*(E.y-S.cy)),A=m*b;y[_].x-=A*(E.x-S.cx)/O,y[_].y-=A*(E.y-S.cy)/O})}g.forEach((b,x)=>{const{id:w,data:_}=b;if(!je(_.x)||!je(_.y))return;const E=.01*m*s;y[w].x-=E*(_.x-l[0]),y[w].y-=E*(_.y-l[1]),i===3&&(y[w].z-=E*(_.z-l[2]))}),g.forEach((b,x)=>{const{id:w,data:_}=b;if(je(_.fx)&&je(_.fy)){_.x=_.fx,_.y=_.fy,i===3&&(_.z=_.fz);return}if(!je(_.x)||!je(_.y))return;const E=Math.sqrt(y[w].x*y[w].x+y[w].y*y[w].y+(i===3?y[w].z*y[w].z:0));if(E>0){const S=Math.min(p*(u/ort),E);e.mergeNodeData(w,{x:_.x+y[w].x/E*S,y:_.y+y[w].y/E*S,z:i===3?_.z+y[w].z/E*S:void 0})}})}applyCalculate(e,n,r,i){this.calRepulsive(e,n,i),this.calAttractive(e,n,r)}calRepulsive(e,n,r){const i=e.getAllNodes();i.forEach(({data:a,id:o},s)=>{n[o]={x:0,y:0,z:0},i.forEach(({data:l,id:u},c)=>{if(s<=c||!je(a.x)||!je(l.x)||!je(a.y)||!je(l.y))return;let f=a.x-l.x,d=a.y-l.y,h=this.options.dimensions===3?a.z-l.z:0,p=f*f+d*d+h*h;p===0&&(p=1,f=.01,d=.01,h=.01);const g=r/p,v=f*g,m=d*g,y=h*g;n[o].x+=v,n[o].y+=m,n[u].x-=v,n[u].y-=m,this.options.dimensions===3&&(n[o].z+=y,n[u].z-=y)})})}calAttractive(e,n,r){e.getAllEdges().forEach(a=>{const{source:o,target:s}=a;if(!o||!s||o===s)return;const{data:l}=e.getNode(o),{data:u}=e.getNode(s);if(!je(u.x)||!je(l.x)||!je(u.y)||!je(l.y))return;const c=u.x-l.x,f=u.y-l.y,d=this.options.dimensions===3?u.z-l.z:0,h=Math.sqrt(c*c+f*f+d*d)/r,p=c*h,g=f*h,v=d*h;n[o].x+=p,n[o].y+=g,n[s].x-=p,n[s].y-=g,this.options.dimensions===3&&(n[o].z+=v,n[s].z-=v)})}}const lrt={begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30,width:300,height:300};class urt{constructor(e={}){this.options=e,this.id="grid",this.options=Object.assign(Object.assign({},lrt),e)}execute(e,n){return zt(this,void 0,void 0,function*(){return this.genericGridLayout(!1,e,n)})}assign(e,n){return zt(this,void 0,void 0,function*(){yield this.genericGridLayout(!0,e,n)})}genericGridLayout(e,n,r){return zt(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{begin:a=[0,0],condense:o,preventOverlapPadding:s,preventOverlap:l,rows:u,cols:c,nodeSpacing:f,nodeSize:d,width:h,height:p,position:g}=i;let{sortBy:v}=i;const m=n.getAllNodes(),y=n.getAllEdges(),b=m==null?void 0:m.length;if(!b||b===1)return vd(n,e,a);const x=m.map(F=>to(F));v!=="id"&&(!an(v)||x[0].data[v]===void 0)&&(v="degree"),v==="degree"?x.sort((F,z)=>n.getDegree(z.id,"both")-n.getDegree(F.id,"both")):v==="id"?x.sort((F,z)=>je(z.id)&&je(F.id)?z.id-F.id:`${F.id}`.localeCompare(`${z.id}`)):x.sort((F,z)=>z.data[v]-F.data[v]);const w=!h&&typeof window<"u"?window.innerWidth:h,_=!p&&typeof window<"u"?window.innerHeight:p,E=b,S={rows:u,cols:c};if(u!=null&&c!=null)S.rows=u,S.cols=c;else if(u!=null&&c==null)S.rows=u,S.cols=Math.ceil(E/S.rows);else if(u==null&&c!=null)S.cols=c,S.rows=Math.ceil(E/S.cols);else{const F=Math.sqrt(E*_/w);S.rows=Math.round(F),S.cols=Math.round(w/_*F)}if(S.rows=Math.max(S.rows,1),S.cols=Math.max(S.cols,1),S.cols*S.rows>E){const F=i1(S),z=a1(S);(F-1)*z>=E?i1(S,F-1):(z-1)*F>=E&&a1(S,z-1)}else for(;S.cols*S.rows<E;){const F=i1(S),z=a1(S);(z+1)*F>=E?a1(S,z+1):i1(S,F+1)}let O=o?0:w/S.cols,A=o?0:_/S.rows;if(l||f){const F=Cf(10,f),z=m4(30,d,!1);x.forEach(N=>{(!N.data.x||!N.data.y)&&(N.data.x=0,N.data.y=0);const L=n.getNode(N.id),[B,$]=fm(z(L)||30),G=F!==void 0?F(N):s,W=B+G,U=$+G;O=Math.max(O,W),A=Math.max(A,U)})}const T={},I={row:0,col:0},D={};for(let F=0;F<x.length;F++){const z=x[F];let N;if(g&&(N=g(n.getNode(z.id))),N&&(N.row!==void 0||N.col!==void 0)){const L={row:N.row,col:N.col};if(L.col===void 0)for(L.col=0;wD(T,L);)L.col++;else if(L.row===void 0)for(L.row=0;wD(T,L);)L.row++;D[z.id]=L,afe(T,L)}crt(z,a,O,A,D,S,I,T)}const R={nodes:x,edges:y};return e&&x.forEach(F=>{n.mergeNodeData(F.id,{x:F.data.x,y:F.data.y})}),R})}}const i1=(t,e)=>{let n;const r=t.rows||5,i=t.cols||5;return e==null?n=Math.min(r,i):Math.min(r,i)===t.rows?t.rows=e:t.cols=e,n},a1=(t,e)=>{let n;const r=t.rows||5,i=t.cols||5;return e==null?n=Math.max(r,i):Math.max(r,i)===t.rows?t.rows=e:t.cols=e,n},wD=(t,e)=>t[`c-${e.row}-${e.col}`]||!1,afe=(t,e)=>t[`c-${e.row}-${e.col}`]=!0,dY=(t,e)=>{const n=t.cols||5;e.col++,e.col>=n&&(e.col=0,e.row++)},crt=(t,e,n,r,i,a,o,s)=>{let l,u;const c=i[t.id];if(c)l=c.col*n+n/2+e[0],u=c.row*r+r/2+e[1];else{for(;wD(s,o);)dY(a,o);l=o.col*n+n/2+e[0],u=o.row*r+r/2+e[1],afe(s,o),dY(a,o)}t.data.x=l,t.data.y=u},frt=(t,e,n)=>{try{const r=ec.mul(ec.pow(e,2),-.5),i=r.mean("row"),a=r.mean("column"),o=r.mean();r.add(o).subRowVector(i).subColumnVector(a);const s=new rce(r),l=ec.sqrt(s.diagonalMatrix).diagonal();return s.leftSingularVectors.toJSON().map(u=>ec.mul([u],[l]).toJSON()[0].splice(0,t))}catch{const i=[];for(let a=0;a<e.length;a++){const o=Math.random()*n,s=Math.random()*n;i.push([o,s])}return i}},drt=800,hrt={iterations:10,height:10,width:10,speed:100,gravity:10,k:5},prt=(t,e)=>{const n=Object.assign(Object.assign({},hrt),e),{positions:r,iterations:i,width:a,k:o,speed:s=100,strictRadial:l,focusIdx:u,radii:c=[],nodeSizeFunc:f}=n,d=t.getAllNodes(),h=[],p=a/10;for(let g=0;g<i;g++)r.forEach((v,m)=>{h[m]={x:0,y:0}}),grt(d,r,h,o,c,f),vrt(r,h,s,l,u,p,a,c);return r},grt=(t,e,n,r,i,a)=>{e.forEach((o,s)=>{n[s]={x:0,y:0},e.forEach((l,u)=>{if(s===u||i[s]!==i[u])return;let c=o.x-l.x,f=o.y-l.y,d=Math.sqrt(c*c+f*f);if(d===0){d=1;const h=s>u?1:-1;c=.01*h,f=.01*h}if(d<a(t[s])/2+a(t[u])/2){const h=r*r/d;n[s].x+=c/d*h,n[s].y+=f/d*h}})})},vrt=(t,e,n,r,i,a,o,s)=>{const l=a||o/10;return r&&e.forEach((u,c)=>{const f=t[c].x-t[i].x,d=t[c].y-t[i].y,h=Math.sqrt(f*f+d*d);let p=d/h,g=-f/h;const v=Math.sqrt(u.x*u.x+u.y*u.y);let m=Math.acos((p*u.x+g*u.y)/v);m>Math.PI/2&&(m-=Math.PI/2,p*=-1,g*=-1);const y=Math.cos(m)*v;u.x=p*y,u.y=g*y}),t.forEach((u,c)=>{if(c===i)return;const f=Math.sqrt(e[c].x*e[c].x+e[c].y*e[c].y);if(f>0&&c!==i){const d=Math.min(l*(n/drt),f);if(u.x+=e[c].x/f*d,u.y+=e[c].y/f*d,r){let h=u.x-t[i].x,p=u.y-t[i].y;const g=Math.sqrt(h*h+p*p);h=h/g*s[c],p=p/g*s[c],u.x=t[i].x+h,u.y=t[i].y+p}}}),t},mrt={maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,strictRadial:!0,maxPreventOverlapIteration:200,sortStrength:10};class yrt{constructor(e={}){this.options=e,this.id="radial",this.options=Object.assign(Object.assign({},mrt),e)}execute(e,n){return zt(this,void 0,void 0,function*(){return this.genericRadialLayout(!1,e,n)})}assign(e,n){return zt(this,void 0,void 0,function*(){yield this.genericRadialLayout(!0,e,n)})}genericRadialLayout(e,n,r){return zt(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{width:a,height:o,center:s,focusNode:l,unitRadius:u,nodeSize:c,nodeSpacing:f,strictRadial:d,preventOverlap:h,maxPreventOverlapIteration:p,sortBy:g,linkDistance:v=50,sortStrength:m=10,maxIteration:y=1e3}=i,b=n.getAllNodes(),x=n.getAllEdges(),w=!a&&typeof window<"u"?window.innerWidth:a,_=!o&&typeof window<"u"?window.innerHeight:o,E=s||[w/2,_/2];if(!(b!=null&&b.length)||b.length===1)return vd(n,e,E);let S=b[0];if(an(l)){for(let J=0;J<b.length;J++)if(b[J].id===l){S=b[J];break}}else S=l||b[0];const O=wrt(b,S.id),A=Que({nodes:b,edges:x}),T=Jue(A),I=Srt(T,O);_rt(T,O,I+1);const D=T[O];let R=w-E[0]>E[0]?E[0]:w-E[0],F=_-E[1]>E[1]?E[1]:_-E[1];R===0&&(R=w/2),F===0&&(F=_/2);const z=Math.min(R,F),N=Math.max(...D),L=[],B=u||z/N;D.forEach((J,Q)=>{L[Q]=J*B});const $=brt(b,T,v,L,B,g,m),G=xrt($),W=frt(v,$,v);let U=W.map(([J,Q])=>({x:(isNaN(J)?Math.random()*v:J)-W[O][0],y:(isNaN(Q)?Math.random()*v:Q)-W[O][1]}));this.run(y,U,G,$,L,O);let Y;if(h){Y=y4(c,f);const J={nodes:b,nodeSizeFunc:Y,positions:U,radii:L,height:_,width:w,strictRadial:!!d,focusIdx:O,iterations:p||200,k:U.length/4.5};U=prt(n,J)}const q=[];return U.forEach((J,Q)=>{const se=to(b[Q]);se.data.x=J.x+E[0],se.data.y=J.y+E[1],q.push(se)}),e&&q.forEach(J=>n.mergeNodeData(J.id,{x:J.data.x,y:J.data.y})),{nodes:q,edges:x}})}run(e,n,r,i,a,o){for(let s=0;s<=e;s++){const l=s/e;this.oneIteration(l,n,a,i,r,o)}}oneIteration(e,n,r,i,a,o){const s=1-e;n.forEach((l,u)=>{const c=F$(l,{x:0,y:0}),f=c===0?0:1/c;if(u===o)return;let d=0,h=0,p=0;n.forEach((v,m)=>{if(u===m)return;const y=F$(l,v),b=y===0?0:1/y,x=i[m][u];p+=a[u][m],d+=a[u][m]*(v.x+x*(l.x-v.x)*b),h+=a[u][m]*(v.y+x*(l.y-v.y)*b)});const g=r[u]===0?0:1/r[u];p*=s,p+=e*g*g,d*=s,d+=e*g*l.x*f,l.x=d/p,h*=s,h+=e*g*l.y*f,l.y=h/p})}}const brt=(t,e,n,r,i,a,o)=>{if(!t)return[];const s=[];{const l={};e.forEach((u,c)=>{const f=[];u.forEach((d,h)=>{var p,g;if(c===h)f.push(0);else if(r[c]===r[h])if(a==="data")f.push(d*(Math.abs(c-h)*o)/(r[c]/i));else if(a){let v,m;if(l[t[c].id])v=l[t[c].id];else{const y=(a==="id"?t[c].id:(p=t[c].data)===null||p===void 0?void 0:p[a])||0;an(y)?v=y.charCodeAt(0):v=y,l[t[c].id]=v}if(l[t[h].id])m=l[t[h].id];else{const y=(a==="id"?t[h].id:(g=t[h].data)===null||g===void 0?void 0:g[a])||0;an(y)?m=y.charCodeAt(0):m=y,l[t[h].id]=m}f.push(d*(Math.abs(v-m)*o)/(r[c]/i))}else f.push(d*n/(r[c]/i));else{const v=(n+i)/2;f.push(d*v)}}),s.push(f)})}return s},xrt=t=>{const e=t.length,n=t[0].length,r=[];for(let i=0;i<e;i++){const a=[];for(let o=0;o<n;o++)t[i][o]!==0?a.push(1/(t[i][o]*t[i][o])):a.push(0);r.push(a)}return r},wrt=(t,e)=>{let n=-1;return t.forEach((r,i)=>{r.id===e&&(n=i)}),Math.max(n,0)},_rt=(t,e,n)=>{const r=t.length;for(let i=0;i<r;i++)if(t[e][i]===1/0){t[e][i]=n,t[i][e]=n;for(let a=0;a<r;a++)t[i][a]!==1/0&&t[e][a]===1/0&&(t[e][a]=n+t[i][a],t[a][e]=n+t[i][a])}for(let i=0;i<r;i++)if(i!==e){for(let a=0;a<r;a++)if(t[i][a]===1/0){let o=Math.abs(t[e][i]-t[e][a]);o=o===0?1:o,t[i][a]=o}}},Srt=(t,e)=>{let n=0;for(let r=0;r<t[e].length;r++)t[e][r]!==1/0&&(n=t[e][r]>n?t[e][r]:n);return n},Ert={center:[0,0],width:300,height:300};class Ort{constructor(e={}){this.options=e,this.id="random",this.options=Object.assign(Object.assign({},Ert),e)}execute(e,n){return zt(this,void 0,void 0,function*(){return this.genericRandomLayout(!1,e,n)})}assign(e,n){return zt(this,void 0,void 0,function*(){yield this.genericRandomLayout(!0,e,n)})}genericRandomLayout(e,n,r){return zt(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{center:a,width:o,height:s}=i,l=n.getAllNodes(),u=.9,c=!o&&typeof window<"u"?window.innerWidth:o,f=!s&&typeof window<"u"?window.innerHeight:s,d=a||[c/2,f/2],h=[];return l&&l.forEach(g=>{h.push({id:g.id,data:{x:(Math.random()-.5)*u*c+d[0],y:(Math.random()-.5)*u*f+d[1]}})}),e&&h.forEach(g=>n.mergeNodeData(g.id,{x:g.data.x,y:g.data.y})),{nodes:h,edges:n.getAllEdges()}})}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ofe=Symbol("Comlink.proxy"),krt=Symbol("Comlink.endpoint"),sfe=Symbol("Comlink.releaseProxy"),iC=Symbol("Comlink.finalizer"),$1=Symbol("Comlink.thrown"),lfe=t=>typeof t=="object"&&t!==null||typeof t=="function",Art={canHandle:t=>lfe(t)&&t[ofe],serialize(t){const{port1:e,port2:n}=new MessageChannel;return cfe(t,e),[n,[n]]},deserialize(t){return t.start(),dfe(t)}},Trt={canHandle:t=>lfe(t)&&$1 in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},ufe=new Map([["proxy",Art],["throw",Trt]]);function Mrt(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function cfe(t,e=globalThis,n=["*"]){e.addEventListener("message",function r(i){if(!i||!i.data)return;if(!Mrt(n,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:a,type:o,path:s}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(sf);let u;try{const c=s.slice(0,-1).reduce((d,h)=>d[h],t),f=s.reduce((d,h)=>d[h],t);switch(o){case"GET":u=f;break;case"SET":c[s.slice(-1)[0]]=sf(i.data.value),u=!0;break;case"APPLY":u=f.apply(c,l);break;case"CONSTRUCT":{const d=new f(...l);u=Rrt(d)}break;case"ENDPOINT":{const{port1:d,port2:h}=new MessageChannel;cfe(t,h),u=Lrt(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[$1]:0}}Promise.resolve(u).catch(c=>({value:c,[$1]:0})).then(c=>{const[f,d]=Vx(c);e.postMessage(Object.assign(Object.assign({},f),{id:a}),d),o==="RELEASE"&&(e.removeEventListener("message",r),ffe(e),iC in t&&typeof t[iC]=="function"&&t[iC]())}).catch(c=>{const[f,d]=Vx({value:new TypeError("Unserializable return value"),[$1]:0});e.postMessage(Object.assign(Object.assign({},f),{id:a}),d)})}),e.start&&e.start()}function Crt(t){return t.constructor.name==="MessagePort"}function ffe(t){Crt(t)&&t.close()}function dfe(t,e){const n=new Map;return t.addEventListener("message",function(i){const{data:a}=i;if(!a||!a.id)return;const o=n.get(a.id);if(o)try{o(a)}finally{n.delete(a.id)}}),_D(t,n,[],e)}function o1(t){if(t)throw new Error("Proxy has been released and is not useable")}function hfe(t){return th(t,new Map,{type:"RELEASE"}).then(()=>{ffe(t)})}const Bx=new WeakMap,$x="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(Bx.get(t)||0)-1;Bx.set(t,e),e===0&&hfe(t)});function Prt(t,e){const n=(Bx.get(e)||0)+1;Bx.set(e,n),$x&&$x.register(t,e,t)}function Drt(t){$x&&$x.unregister(t)}function _D(t,e,n=[],r=function(){}){let i=!1;const a=new Proxy(r,{get(o,s){if(o1(i),s===sfe)return()=>{Drt(a),hfe(t),e.clear(),i=!0};if(s==="then"){if(n.length===0)return{then:()=>a};const l=th(t,e,{type:"GET",path:n.map(u=>u.toString())}).then(sf);return l.then.bind(l)}return _D(t,e,[...n,s])},set(o,s,l){o1(i);const[u,c]=Vx(l);return th(t,e,{type:"SET",path:[...n,s].map(f=>f.toString()),value:u},c).then(sf)},apply(o,s,l){o1(i);const u=n[n.length-1];if(u===krt)return th(t,e,{type:"ENDPOINT"}).then(sf);if(u==="bind")return _D(t,e,n.slice(0,-1));const[c,f]=hY(l);return th(t,e,{type:"APPLY",path:n.map(d=>d.toString()),argumentList:c},f).then(sf)},construct(o,s){o1(i);const[l,u]=hY(s);return th(t,e,{type:"CONSTRUCT",path:n.map(c=>c.toString()),argumentList:l},u).then(sf)}});return Prt(a,t),a}function Irt(t){return Array.prototype.concat.apply([],t)}function hY(t){const e=t.map(Vx);return[e.map(n=>n[0]),Irt(e.map(n=>n[1]))]}const pfe=new WeakMap;function Lrt(t,e){return pfe.set(t,e),t}function Rrt(t){return Object.assign(t,{[ofe]:!0})}function Vx(t){for(const[e,n]of ufe)if(n.canHandle(t)){const[r,i]=n.serialize(t);return[{type:"HANDLER",name:e,value:r},i]}return[{type:"RAW",value:t},pfe.get(t)||[]]}function sf(t){switch(t.type){case"HANDLER":return ufe.get(t.name).deserialize(t.value);case"RAW":return t.value}}function th(t,e,n,r){return new Promise(i=>{const a=Nrt();e.set(a,i),t.start&&t.start(),t.postMessage(Object.assign({id:a},n),r)})}function Nrt(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class Frt extends kp{constructor(e,n,r){super(),this.graph=e,this.layout=n,this.options=r,this.spawnWorker()}spawnWorker(){this.proxy=dfe(new Worker(new URL("/assets/worker-CxdtqjTt.js",import.meta.url),{type:"module"})),this.running&&(this.running=!1,this.execute())}execute(){var e;return zt(this,void 0,void 0,function*(){if(this.running)return this;this.running=!0;const n=this.layout.options,r=uJ(n,["onTick"]),i={};Object.keys(r).forEach(l=>{Ue(r[l])||(i[l]=r[l])});const a={layout:{id:this.layout.id,options:i,iterations:(e=this.options)===null||e===void 0?void 0:e.iterations},nodes:this.graph.getAllNodes(),edges:this.graph.getAllEdges()},o=new Float32Array([0]),[s]=yield this.proxy.calculateLayout(a,[o]);return s})}stop(){return this.running=!1,this.proxy.stopLayout(),this}kill(){this.proxy[sfe]()}isRunning(){return this.running}}var zrt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class o_ extends Iw{constructor(){super(...arguments),this.id="fishbone"}getRoot(){const e=this.context.model.getRootsData();if(!(Ys(e)||e.length>2))return e[0]}formatSize(e){const n=typeof e=="function"?e:()=>e;return r=>ao(n(r))}doLayout(e,n){const{hGap:r,getRibSep:i,vGap:a,nodeSize:o,height:s}=n,{model:l}=this.context,u=this.formatSize(o);let c=u(e)[0]+i(e);const f=(b,x=0)=>{var w;return x+=r*((b.children||[]).length+1),(w=b.children)===null||w===void 0||w.forEach(_=>{var E;(E=l.getNodeLikeDatum(_).children)===null||E===void 0||E.forEach(O=>{const A=l.getNodeLikeDatum(O);x=f(A,x)})}),x},d=b=>{if(b.depth===1)return c;const x=l.getParentData(b.id,"tree");if(qd(b)){const w=l.getParentData(x.id,"tree"),_=g(b)-g(w);return d(x)+_*r/a}else{const w=(x.children||[]).indexOf(b.id),_=l.getNodeData((x.children||[]).slice(w));return h(x)-_.reduce((E,S)=>E+f(S),0)-u(x)[0]/2}},h=w6(b=>{if(aC(b))return u(b)[0]/2;const x=l.getParentData(b.id,"tree");if(qd(b))return d(b)+f(b)+u(b)[0]/2;{const w=g(b)-g(x),_=r/a;return d(b)+w*_}},b=>b.id),p=b=>g(l.getParentData(b,"tree")),g=w6(b=>{if(aC(b))return s/2;if(qd(b)){const x=l.getParentData(b.id,"tree"),w=x.children.indexOf(b.id);if(w===0)return p(x.id)+a;const _=l.getNodeLikeDatum(x.children[w-1]);if(Ys(_.children))return g(_)+a;const E=l.getDescendantsData(_.id);return Math.max(...E.map(S=>qd(S)?p(S.id):g(S)))+a}else{if(Ys(b.children))return p(b.id)+a;const x=l.getNodeLikeDatum(b.children.slice(-1)[0]);if(Ys(x.children))return g(x)+a;const w=l.getDescendantsData(b.id).slice(-1)[0];return(qd(w)?p(w.id):g(w))+a}},b=>b.id);let v=0;const m={nodes:[],edges:[]},y=b=>{var x;(x=b.children)===null||x===void 0||x.forEach(O=>y(l.getNodeLikeDatum(O)));const w=g(b),_=h(b);if(m.nodes.push({id:b.id,x:_,y:w}),aC(b))return;const E=l.getRelatedEdgesData(b.id,"in")[0],S=[d(b),qd(b)?w:p(b.id)];m.edges.push({id:ce(E),controlPoints:[S],relatedNodeId:b.id}),v=Math.max(v,_+i(b)),b.depth===1&&(c=v)};return y(e),m}placeAlterative(e,n){const r=(n.children||[]).filter((s,l)=>l%2!==0);if(r.length===0)return e;const{model:i}=this.context,a=e.nodes.find(s=>s.id===n.id).y,o=s=>{const l=i.getAncestorsData(s,"tree");if(Ys(l))return!1;const u=l.length===1?s:l[l.length-2].id;return r.includes(u)};e.nodes.forEach(s=>{o(s.id)&&(s.y=2*a-s.y)}),e.edges.forEach(s=>{o(s.relatedNodeId)&&(s.controlPoints=s.controlPoints.map(l=>[l[0],2*a-l[1]]))})}rightToLeft(e,n){return e.nodes.forEach(r=>r.x=n.width-r.x),e.edges.forEach(r=>{r.controlPoints=r.controlPoints.map(i=>[n.width-i[0],i[1]])}),e}execute(e,n){return zrt(this,void 0,void 0,function*(){const r=Object.assign(Object.assign(Object.assign({},o_.defaultOptions),this.options),n),{direction:i,nodeSize:a}=r,o=this.getRoot();if(!o)return e;const s=this.formatSize(a);r.vGap||(r.vGap=Math.max(...(e.nodes||[]).map(d=>s(d)[1]))),r.hGap||(r.hGap=Math.max(...(e.nodes||[]).map(d=>s(d)[0])));let l=this.doLayout(o,r);this.placeAlterative(l,o),i==="RL"&&(l=this.rightToLeft(l,r));const{model:u}=this.context,c=[],f=[];return l.nodes.forEach(d=>{const{id:h,x:p,y:g}=d,v=u.getNodeLikeDatum(h);c.push(pY(v,{x:p,y:g}))}),l.edges.forEach(d=>{const{id:h,controlPoints:p}=d,g=u.getEdgeDatum(h);f.push(pY(g,{controlPoints:p}))}),{nodes:c,edges:f}})}}o_.defaultOptions={direction:"RL",getRibSep:()=>60};const pY=(t,e)=>Object.assign(Object.assign({},t),{style:Object.assign(Object.assign({},t.style||{}),e)}),aC=t=>t.depth===0,qd=t=>(t.depth||(t.depth=0))%2===0;var jrt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class s_ extends Iw{constructor(){super(...arguments),this.id="snake"}formatSize(e,n){const r=typeof n=="function"?n:()=>n;return e.reduce((i,a)=>{const[o,s]=ao(r(a))||[0,0];return[Math.max(i[0],o),Math.max(i[1],s)]},[0,0])}validate(e){const{nodes:n=[],edges:r=[]}=e,i={},a={},o={};n.forEach(d=>{i[d.id]=0,a[d.id]=0,o[d.id]=[]}),r.forEach(d=>{i[d.target]++,a[d.source]++,o[d.source].push(d.target)});const s=new Set,l=d=>{s.has(d)||(s.add(d),o[d].forEach(l))};if(l(n[0].id),s.size!==n.length)return!1;const u=n.filter(d=>i[d.id]===0),c=n.filter(d=>a[d.id]===0);return!(u.length!==1||c.length!==1||n.filter(d=>i[d.id]===1&&a[d.id]===1).length!==n.length-2)}execute(e,n){return jrt(this,void 0,void 0,function*(){var r;if(!this.validate(e))return e;const{nodeSize:i,padding:a,sortBy:o,cols:s,colGap:l,rowGap:u,clockwise:c,width:f,height:d}=Object.assign({},s_.defaultOptions,this.options,n),[h,p,g,v]=kl(a),m=this.formatSize(e.nodes||[],i),y=Math.ceil((e.nodes||[]).length/s);let b=l||(f-v-p-s*m[0])/(s-1),x=u||(d-h-g-y*m[1])/(y-1);return(x===1/0||x<0)&&(x=0),(b===1/0||b<0)&&(b=0),{nodes:((o?(r=e.nodes)===null||r===void 0?void 0:r.sort(o):Brt(e))||[]).map((E,S)=>{const O=Math.floor(S/s),A=S%s,T=c?O%2===0?A:s-1-A:O%2===0?s-1-A:A,I=v+T*(m[0]+b)+m[0]/2,D=h+O*(m[1]+x)+m[1]/2;return{id:E.id,style:{x:I,y:D}}})}})}}s_.defaultOptions={padding:0,cols:5,clockwise:!0};function Brt(t){const{nodes:e=[],edges:n=[]}=t,r={},i={};e.forEach(s=>{r[s.id]=0,i[s.id]=[]}),n.forEach(s=>{r[s.target]++,i[s.source].push(s.target)});const a=[],o=[];for(e.forEach(s=>{r[s.id]===0&&a.push(s.id)});a.length>0;){const s=a.shift(),l=e.find(u=>u.id===s);o.push(l),i[s].forEach(u=>{r[u]--,r[u]===0&&a.push(u)})}return o}const $rt=["rgb(158, 1, 66)","rgb(213, 62, 79)","rgb(244, 109, 67)","rgb(253, 174, 97)","rgb(254, 224, 139)","rgb(255, 255, 191)","rgb(230, 245, 152)","rgb(171, 221, 164)","rgb(102, 194, 165)","rgb(50, 136, 189)","rgb(94, 79, 162)"],Vrt=["rgb(78, 121, 167)","rgb(242, 142, 44)","rgb(225, 87, 89)","rgb(118, 183, 178)","rgb(89, 161, 79)","rgb(237, 201, 73)","rgb(175, 122, 161)","rgb(255, 157, 167)","rgb(156, 117, 95)","rgb(186, 176, 171)"],qrt=["rgb(255, 245, 235)","rgb(254, 230, 206)","rgb(253, 208, 162)","rgb(253, 174, 107)","rgb(253, 141, 60)","rgb(241, 105, 19)","rgb(217, 72, 1)","rgb(166, 54, 3)","rgb(127, 39, 4)"],Wrt=["rgb(247, 252, 245)","rgb(229, 245, 224)","rgb(199, 233, 192)","rgb(161, 217, 155)","rgb(116, 196, 118)","rgb(65, 171, 93)","rgb(35, 139, 69)","rgb(0, 109, 44)","rgb(0, 68, 27)"],Grt=["rgb(247, 251, 255)","rgb(222, 235, 247)","rgb(198, 219, 239)","rgb(158, 202, 225)","rgb(107, 174, 214)","rgb(66, 146, 198)","rgb(33, 113, 181)","rgb(8, 81, 156)","rgb(8, 48, 107)"];class Xi extends i4{}function Fp(t,e=!0,n){const r=document.createElement("div");return r.setAttribute("class",`g6-${t}`),Object.assign(r.style,{position:"absolute",display:"block"}),e&&Object.assign(r.style,{position:"unset",gridArea:"1 / 1 / 2 / 2",inset:"0px",height:"100%",width:"100%",overflow:"hidden",pointerEvents:"none"}),n&&Object.assign(r.style,n),r}function SD(t,e="div",n={},r="",i=document.body){const a=document.getElementById(t);a&&a.remove();const o=document.createElement(e);return o.innerHTML=r,o.id=t,Object.assign(o.style,n),i.appendChild(o),o}var Hrt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class l_ extends Xi{constructor(e,n){super(e,Object.assign({},l_.defaultOptions,n)),this.$element=Fp("background"),this.context.canvas.getContainer().prepend(this.$element),this.update(n)}update(e){const n=Object.create(null,{update:{get:()=>super.update}});return Hrt(this,void 0,void 0,function*(){n.update.call(this,e),Object.assign(this.$element.style,vp(this.options,["key","type"]))})}destroy(){super.destroy(),this.$element.remove()}}l_.defaultOptions={transition:"background 0.5s",backgroundSize:"cover",zIndex:"-1"};function z4(t,e,n,r,i,a){const o=t,s=e,l=n-o,u=r-s;let c=i-o,f=a-s,d=c*l+f*u,h=0;d<=0?h=0:(c=l-c,f=u-f,d=c*l+f*u,d<=0?h=0:h=d*d/(l*l+u*u));const p=c*c+f*f-h;return p<0?0:p}function tc(t,e,n,r){return(t-n)*(t-n)+(e-r)*(e-r)}function gY(t,e,n,r,i){return tc(t,e,n,r)<i*i}function Yrt(t){if(!Number.isFinite(t))return n=>n;if(t===0)return Math.round;const e=Math.pow(10,t);return n=>Math.round(n*e)/e}function gfe(t){const e=Math.min(t.x1,t.x2),n=Math.max(t.x1,t.x2),r=Math.min(t.y1,t.y2),i=Math.max(t.y1,t.y2);return{x:e,y:r,x2:n,y2:i,width:n-e,height:i-r}}class Mi{constructor(e,n,r,i){this.x1=e,this.y1=n,this.x2=r,this.y2=i}equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2}draw(e){e.moveTo(this.x1,this.y1),e.lineTo(this.x2,this.y2)}toString(){return`Line(from=(${this.x1},${this.y1}),to=(${this.x2},${this.y2}))`}static from(e){return new Mi(e.x1,e.y1,e.x2,e.y2)}cuts(e,n){if(this.y1===this.y2||n<this.y1&&n<=this.y2||n>this.y1&&n>=this.y2||e>this.x1&&e>=this.x2)return!1;if(e<this.x1&&e<=this.x2)return!0;const r=this.x1+(n-this.y1)*(this.x2-this.x1)/(this.y2-this.y1);return e<=r}distSquare(e,n){return z4(this.x1,this.y1,this.x2,this.y2,e,n)}ptClose(e,n,r){if(this.x1<this.x2){if(e<this.x1-r||e>this.x2+r)return!1}else if(e<this.x2-r||e>this.x1+r)return!1;if(this.y1<this.y2){if(n<this.y1-r||n>this.y2+r)return!1}else if(n<this.y2-r||n>this.y1+r)return!1;return!0}}var Rr;(function(t){t[t.POINT=1]="POINT",t[t.PARALLEL=2]="PARALLEL",t[t.COINCIDENT=3]="COINCIDENT",t[t.NONE=4]="NONE"})(Rr||(Rr={}));class oC{constructor(e,n=0,r=0){this.state=e,this.x=n,this.y=r}}function s1(t,e){const n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),i=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(i){const a=n/i,o=r/i;return 0<=a&&a<=1&&0<=o&&o<=1?new oC(Rr.POINT,t.x1+a*(t.x2-t.x1),t.y1+a*(t.y2-t.y1)):new oC(Rr.NONE)}return new oC(n===0||r===0?Rr.COINCIDENT:Rr.PARALLEL)}function vfe(t,e){const n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),i=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(i){const a=n/i,o=r/i;if(0<=a&&a<=1&&0<=o&&o<=1)return a}return Number.POSITIVE_INFINITY}function Urt(t,e){function n(i,a,o,s){let l=vfe(e,new Mi(i,a,o,s));return l=Math.abs(l-.5),l>=0&&l<=1?1:0}let r=n(t.x,t.y,t.x2,t.y);return r+=n(t.x,t.y,t.x,t.y2),r>1||(r+=n(t.x,t.y2,t.x2,t.y2),r>1)?!0:(r+=n(t.x2,t.y,t.x2,t.y2),r>0)}var zr;(function(t){t[t.LEFT=0]="LEFT",t[t.TOP=1]="TOP",t[t.RIGHT=2]="RIGHT",t[t.BOTTOM=3]="BOTTOM"})(zr||(zr={}));function V1(t,e,n){const r=new Set;return t.width<=0?(r.add(zr.LEFT),r.add(zr.RIGHT)):e<t.x?r.add(zr.LEFT):e>t.x+t.width&&r.add(zr.RIGHT),t.height<=0?(r.add(zr.TOP),r.add(zr.BOTTOM)):n<t.y?r.add(zr.TOP):n>t.y+t.height&&r.add(zr.BOTTOM),r}function mfe(t,e){let n=e.x1,r=e.y1;const i=e.x2,a=e.y2,o=Array.from(V1(t,i,a));if(o.length===0)return!0;let s=V1(t,n,r);for(;s.size!==0;){for(const l of o)if(s.has(l))return!1;if(s.has(zr.RIGHT)||s.has(zr.LEFT)){let l=t.x;s.has(zr.RIGHT)&&(l+=t.width),r=r+(l-n)*(a-r)/(i-n),n=l}else{let l=t.y;s.has(zr.BOTTOM)&&(l+=t.height),n=n+(l-r)*(i-n)/(a-r),r=l}s=V1(t,n,r)}return!0}function Xrt(t,e){let n=Number.POSITIVE_INFINITY,r=0;function i(a,o,s,l){let u=vfe(e,new Mi(a,o,s,l));u=Math.abs(u-.5),u>=0&&u<=1&&(r++,u<n&&(n=u))}return i(t.x,t.y,t.x2,t.y),i(t.x,t.y,t.x,t.y2),r>1||(i(t.x,t.y2,t.x2,t.y2),r>1)?n:(i(t.x2,t.y,t.x2,t.y2),r===0?-1:n)}function Zrt(t,e){let n=0;const r=s1(t,new Mi(e.x,e.y,e.x2,e.y));n+=r.state===Rr.POINT?1:0;const i=s1(t,new Mi(e.x,e.y,e.x,e.y2));n+=i.state===Rr.POINT?1:0;const a=s1(t,new Mi(e.x,e.y2,e.x2,e.y2));n+=a.state===Rr.POINT?1:0;const o=s1(t,new Mi(e.x2,e.y,e.x2,e.y2));return n+=o.state===Rr.POINT?1:0,{top:r,left:i,bottom:a,right:o,count:n}}class ia{constructor(e,n,r,i){this.x=e,this.y=n,this.width=r,this.height=i}get x2(){return this.x+this.width}get y2(){return this.y+this.height}get cx(){return this.x+this.width/2}get cy(){return this.y+this.height/2}get radius(){return Math.max(this.width,this.height)/2}static from(e){return new ia(e.x,e.y,e.width,e.height)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}clone(){return new ia(this.x,this.y,this.width,this.height)}add(e){const n=Math.min(this.x,e.x),r=Math.min(this.y,e.y),i=Math.max(this.x2,e.x+e.width),a=Math.max(this.y2,e.y+e.height);this.x=n,this.y=r,this.width=i-n,this.height=a-r}addPoint(e){const n=Math.min(this.x,e.x),r=Math.min(this.y,e.y),i=Math.max(this.x2,e.x),a=Math.max(this.y2,e.y);this.x=n,this.y=r,this.width=i-n,this.height=a-r}toString(){return`Rectangle[x=${this.x}, y=${this.y}, w=${this.width}, h=${this.height}]`}draw(e){e.rect(this.x,this.y,this.width,this.height)}containsPt(e,n){return e>=this.x&&e<=this.x2&&n>=this.y&&n<=this.y2}get area(){return this.width*this.height}intersects(e){return this.area<=0||e.width<=0||e.height<=0?!1:e.x+e.width>this.x&&e.y+e.height>this.y&&e.x<this.x2&&e.y<this.y2}distSquare(e,n){if(this.containsPt(e,n))return 0;const r=V1(this,e,n);return r.has(zr.TOP)?r.has(zr.LEFT)?tc(e,n,this.x,this.y):r.has(zr.RIGHT)?tc(e,n,this.x2,this.y):(this.y-n)*(this.y-n):r.has(zr.BOTTOM)?r.has(zr.LEFT)?tc(e,n,this.x,this.y2):r.has(zr.RIGHT)?tc(e,n,this.x2,this.y2):(n-this.y2)*(n-this.y2):r.has(zr.LEFT)?(this.x-e)*(this.x-e):r.has(zr.RIGHT)?(e-this.x2)*(e-this.x2):0}}function Krt(t){if(t.length===0)return null;const e=t[0],n=new ia(e.x,e.y,0,0);for(const r of t)n.addPoint(r);return n}class qx{constructor(e,n,r){this.cx=e,this.cy=n,this.radius=r}get x(){return this.cx-this.radius}get x2(){return this.cx+this.radius}get width(){return this.radius*2}get y(){return this.cy-this.radius}get y2(){return this.cy+this.radius}get height(){return this.radius*2}static from(e){return new qx(e.cx,e.cy,e.radius)}containsPt(e,n){return tc(this.cx,this.cy,e,n)<this.radius*this.radius}distSquare(e,n){const r=tc(this.cx,this.cy,e,n);if(r<this.radius*this.radius)return 0;const i=Math.sqrt(r)-this.radius;return i*i}draw(e){e.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,Math.PI*2)}}class Pf{constructor(e,n=0,r=0,i=0,a=0,o=10,s=10,l=new Float32Array(Math.max(0,o*s)).fill(0)){this.pixelGroup=e,this.i=n,this.j=r,this.pixelX=i,this.pixelY=a,this.width=o,this.height=s,this.area=l}createSub(e,n){return new Pf(this.pixelGroup,e.x,e.y,n.x,n.y,e.width,e.height)}static fromPixelRegion(e,n){return new Pf(n,0,0,e.x,e.y,Math.ceil(e.width/n),Math.ceil(e.height/n))}copy(e,n){return new Pf(this.pixelGroup,this.scaleX(n.x),this.scaleY(n.y),n.x,n.y,e.width,e.height,e.area)}boundX(e){return e<this.i?this.i:e>=this.width?this.width-1:e}boundY(e){return e<this.j?this.j:e>=this.height?this.height-1:e}scaleX(e){return this.boundX(Math.floor((e-this.pixelX)/this.pixelGroup))}scaleY(e){return this.boundY(Math.floor((e-this.pixelY)/this.pixelGroup))}scale(e){const n=this.scaleX(e.x),r=this.scaleY(e.y),i=this.boundX(Math.ceil((e.x+e.width-this.pixelX)/this.pixelGroup)),a=this.boundY(Math.ceil((e.y+e.height-this.pixelY)/this.pixelGroup)),o=i-n,s=a-r;return new ia(n,r,o,s)}invertScaleX(e){return Math.round(e*this.pixelGroup+this.pixelX)}invertScaleY(e){return Math.round(e*this.pixelGroup+this.pixelY)}addPadding(e,n){const r=Math.ceil(n/this.pixelGroup),i=this.boundX(e.x-r),a=this.boundY(e.y-r),o=this.boundX(e.x2+r),s=this.boundY(e.y2+r),l=o-i,u=s-a;return new ia(i,a,l,u)}get(e,n){return e<0||n<0||e>=this.width||n>=this.height?Number.NaN:this.area[e+n*this.width]}inc(e,n,r){e<0||n<0||e>=this.width||n>=this.height||(this.area[e+n*this.width]+=r)}set(e,n,r){e<0||n<0||e>=this.width||n>=this.height||(this.area[e+n*this.width]=r)}incArea(e,n){if(e.width<=0||e.height<=0||n===0)return;const r=this.width,i=e.width,a=Math.max(0,e.i),o=Math.max(0,e.j),s=Math.min(e.i+e.width,r),l=Math.min(e.j+e.height,this.height);if(!(l<=0||s<=0||a>=r||l>=this.height))for(let u=o;u<l;u++){const c=(u-e.j)*i,f=u*r;for(let d=a;d<s;d++){const h=e.area[d-e.i+c];h!==0&&(this.area[d+f]+=n*h)}}}fill(e){this.area.fill(e)}fillArea(e,n){const r=e.x+e.y*this.width;for(let i=0;i<e.height;i++){const a=r+i*this.width;this.area.fill(n,a,a+e.width)}}fillHorizontalLine(e,n,r,i){const a=e+n*this.width;this.area.fill(i,a,a+r)}fillVerticalLine(e,n,r,i){const a=e+n*this.width;for(let o=0;o<r;o++)this.area[a+o*this.width]=i}clear(){this.area.fill(0)}toString(){let e="";for(let n=0;n<this.height;n++){const r=n*this.width;for(let i=0;i<this.width;i++){const a=this.area[r+i];e+=a.toFixed(1).padStart(6),e+=" "}e+=`
`}return e}draw(e,n=!0){if(this.width<=0||this.height<=0)return;e.save(),n&&e.translate(this.pixelX,this.pixelY);const r=this.area.reduce((o,s)=>Math.min(o,s),Number.POSITIVE_INFINITY),i=this.area.reduce((o,s)=>Math.max(o,s),Number.NEGATIVE_INFINITY),a=o=>(o-r)/(i-r);e.scale(this.pixelGroup,this.pixelGroup);for(let o=0;o<this.width;o++)for(let s=0;s<this.height;s++){const l=this.area[o+s*this.width];e.fillStyle=`rgba(0, 0, 0, ${a(l)})`,e.fillRect(o,s,1,1)}e.restore()}drawThreshold(e,n,r=!0){if(!(this.width<=0||this.height<=0)){e.save(),r&&e.translate(this.pixelX,this.pixelY),e.scale(this.pixelGroup,this.pixelGroup);for(let i=0;i<this.width;i++)for(let a=0;a<this.height;a++){const o=this.area[i+a*this.width];e.fillStyle=o>n?"black":"white",e.fillRect(i,a,1,1)}e.restore()}}}function yfe(t,e){const n=r=>({x:r.x-e,y:r.y-e,width:r.width+2*e,height:r.height+2*e});return Array.isArray(t)?t.map(n):n(t)}function vY(t,e,n){return bfe(Object.assign(gfe(t),{distSquare:(r,i)=>z4(t.x1,t.y1,t.x2,t.y2,r,i)}),e,n)}function bfe(t,e,n){const r=yfe(t,n),i=e.scale(r),a=e.createSub(i,r);return Jrt(a,e,n,(o,s)=>t.distSquare(o,s)),a}function Jrt(t,e,n,r){const i=n*n;for(let a=0;a<t.height;a++)for(let o=0;o<t.width;o++){const s=e.invertScaleX(t.i+o),l=e.invertScaleY(t.j+a),u=r(s,l);if(u===0){t.set(o,a,i);continue}if(u<i){const c=n-Math.sqrt(u);t.set(o,a,c*c)}}return t}function Qrt(t,e,n){const r=e.scale(t),i=e.addPadding(r,n),a=e.createSub(i,{x:t.x-n,y:t.y-n}),o=r.x-i.x,s=r.y-i.y,l=i.x2-r.x2,u=i.y2-r.y2,c=i.width-o-l,f=i.height-s-u,d=n*n;a.fillArea({x:o,y:s,width:c+1,height:f+1},d);const h=[0],p=Math.max(s,o,l,u);{const y=e.invertScaleX(r.x+r.width/2);for(let b=1;b<p;b++){const x=e.invertScaleY(r.y-b),w=t.distSquare(y,x);if(w<d){const _=n-Math.sqrt(w);h.push(_*_)}else break}}const g=[],v=Math.max(o,l),m=Math.max(s,l);for(let y=1;y<v;y++){const b=e.invertScaleX(r.x-y),x=[];for(let w=1;w<m;w++){const _=e.invertScaleY(r.y-w),E=t.distSquare(b,_);if(E<d){const S=n-Math.sqrt(E);x.push(S*S)}else x.push(0)}g.push(x)}for(let y=1;y<Math.min(s,h.length);y++){const b=h[y];a.fillHorizontalLine(o,s-y,c+1,b)}for(let y=1;y<Math.min(u,h.length);y++){const b=h[y];a.fillHorizontalLine(o,s+f+y,c+1,b)}for(let y=1;y<Math.min(o,h.length);y++){const b=h[y];a.fillVerticalLine(o-y,s,f+1,b)}for(let y=1;y<Math.min(u,h.length);y++){const b=h[y];a.fillVerticalLine(o+c+y,s,f+1,b)}for(let y=1;y<o;y++){const b=g[y-1],x=o-y;for(let w=1;w<s;w++)a.set(x,s-w,b[w-1]);for(let w=1;w<u;w++)a.set(x,s+f+w,b[w-1])}for(let y=1;y<l;y++){const b=g[y-1],x=o+c+y;for(let w=1;w<s;w++)a.set(x,s-w,b[w-1]);for(let w=1;w<u;w++)a.set(x,s+f+w,b[w-1])}return a}function rr(t,e){return{x:t,y:e}}function eit(t,e,n,r){if(t.length===0)return[];const i=ait(t);return i.map((a,o)=>{const s=i.slice(0,o);return tit(e,a,s,n,r)}).flat()}function tit(t,e,n,r,i){const a=rr(e.cx,e.cy),o=iit(a,n,t);if(o==null)return[];const s=new Mi(a.x,a.y,o.cx,o.cy),l=nit(s,t,r,i);return rit(l,t)}function nit(t,e,n,r){const i=[],a=[];a.push(t);let o=!0;for(let s=0;s<n&&o;s++)for(o=!1;!o&&a.length>0;){const l=a.pop(),u=xfe(e,l),c=u?Zrt(l,u):null;if(!u||!c||c.count!==2){o||i.push(l);continue}let f=r,d=u1(u,f,c,!0),h=_u(d,a)||_u(d,i),p=l1(d,e);for(;!h&&p&&f>=1;)f/=1.5,d=u1(u,f,c,!0),h=_u(d,a)||_u(d,i),p=l1(d,e);if(d&&!h&&!p&&(a.push(new Mi(l.x1,l.y1,d.x,d.y)),a.push(new Mi(d.x,d.y,l.x2,l.y2)),o=!0),o)continue;f=r,d=u1(u,f,c,!1);let g=_u(d,a)||_u(d,i);for(p=l1(d,e);!g&&p&&f>=1;)f/=1.5,d=u1(u,f,c,!1),g=_u(d,a)||_u(d,i),p=l1(d,e);d&&!g&&(a.push(new Mi(l.x1,l.y1,d.x,d.y)),a.push(new Mi(d.x,d.y,l.x2,l.y2)),o=!0),o||i.push(l)}for(;a.length>0;)i.push(a.pop());return i}function rit(t,e){const n=[];for(;t.length>0;){const r=t.pop();if(t.length===0){n.push(r);break}const i=t.pop(),a=new Mi(r.x1,r.y1,i.x2,i.y2);xfe(e,a)?(n.push(r),t.push(i)):t.push(a)}return n}function iit(t,e,n){let r=Number.POSITIVE_INFINITY;return e.reduce((i,a)=>{const o=tc(t.x,t.y,a.cx,a.cy);if(o>r)return i;const s=new Mi(t.x,t.y,a.cx,a.cy),l=oit(n,s);return o*(l+1)*(l+1)<r&&(i=a,r=o*(l+1)*(l+1)),i},null)}function ait(t){if(t.length<2)return t;let e=0,n=0;return t.forEach(r=>{e+=r.cx,n+=r.cy}),e/=t.length,n/=t.length,t.map(r=>{const i=e-r.cx,a=n-r.cy,o=i*i+a*a;return[r,o]}).sort((r,i)=>r[1]-i[1]).map(r=>r[0])}function l1(t,e){return e.some(n=>n.containsPt(t.x,t.y))}function _u(t,e){return e.some(n=>!!(gY(n.x1,n.y1,t.x,t.y,.001)||gY(n.x2,n.y2,t.x,t.y,.001)))}function xfe(t,e){let n=Number.POSITIVE_INFINITY,r=null;for(const i of t){if(!mfe(i,e))continue;const a=Xrt(i,e);a>=0&&a<n&&(r=i,n=a)}return r}function oit(t,e){return t.reduce((n,r)=>mfe(r,e)&&Urt(r,e)?n+1:n,0)}function u1(t,e,n,r){const i=n.top,a=n.left,o=n.bottom,s=n.right;if(r){if(a.state===Rr.POINT){if(i.state===Rr.POINT)return rr(t.x-e,t.y-e);if(o.state===Rr.POINT)return rr(t.x-e,t.y2+e);const d=t.width*t.height;return t.width*((a.y-t.y+(s.y-t.y))*.5)<d*.5?a.y>s.y?rr(t.x-e,t.y-e):rr(t.x2+e,t.y-e):a.y<s.y?rr(t.x-e,t.y2+e):rr(t.x2+e,t.y2+e)}if(s.state===Rr.POINT){if(i.state===Rr.POINT)return rr(t.x2+e,t.y-e);if(o.state===Rr.POINT)return rr(t.x2+e,t.y2+e)}const c=t.height*t.width;return t.height*((i.x-t.x+(s.x-t.x))*.5)<c*.5?i.x>o.x?rr(t.x-e,t.y-e):rr(t.x-e,t.y2+e):i.x<o.x?rr(t.x2+e,t.y-e):rr(t.x2+e,t.y2+e)}if(a.state===Rr.POINT){if(i.state===Rr.POINT)return rr(t.x2+e,t.y2+e);if(o.state===Rr.POINT)return rr(t.x2+e,t.y-e);const c=t.height*t.width;return t.width*((a.y-t.y+(s.y-t.y))*.5)<c*.5?a.y>s.y?rr(t.x2+e,t.y2+e):rr(t.x-e,t.y2+e):a.y<s.y?rr(t.x2+e,t.y-e):rr(t.x-e,t.y-e)}if(s.state===Rr.POINT){if(i.state===Rr.POINT)return rr(t.x-e,t.y2+e);if(o.state===Rr.POINT)return rr(t.x-e,t.y-e)}const l=t.height*t.width;return t.height*((i.x-t.x+(s.x-t.x))*.5)<l*.5?i.x>o.x?rr(t.x2+e,t.y2+e):rr(t.x2+e,t.y-e):i.x<o.x?rr(t.x-e,t.y2+e):rr(t.x-e,t.y-e)}function sit(t,e,n,r){if(!(t.closed?n<t.length:n<t.length-1))return!1;const a=t.get(e),o=t.get(n+1);for(let s=e+1;s<=n;s++){const l=t.get(s);if(z4(a.x,a.y,o.x,o.y,l.x,l.y)>r)return!1}return!0}function lit(t=0){return e=>{if(t<0||e.length<3)return e;const n=[];let r=0;const i=t*t;for(;r<e.length;){let a=r+1;for(;sit(e,r,a,i);)a++;n.push(e.get(r)),r=a}return new zp(n)}}function uit(t,e){switch(t){case-2:return(((-e+3)*e-3)*e+1)/6;case-1:return((3*e-6)*e*e+4)/6;case 0:return(((-3*e+3)*e+3)*e+1)/6;case 1:return e*e*e/6;default:throw new Error("unknown error")}}function cit(t=6){function a(o,s,l){let u=0,c=0;for(let f=-2;f<=1;f++){const d=o.get(s+f),h=uit(f,l);u+=h*d.x,c+=h*d.y}return{x:u,y:c}}return o=>{if(o.length<3)return o;const s=[],l=o.closed,u=o.length+3-1+(l?0:2);s.push(a(o,2-(l?0:2),0));for(let c=2-(l?0:2);c<u;c++)for(let f=1;f<=t;f++)s.push(a(o,c,f/t));return new zp(s)}}function fit(t=8){return e=>{let n=t,r=e.length;if(n>1)for(r=Math.floor(e.length/n);r<3&&n>1;)n-=1,r=Math.floor(e.length/n);const i=[];for(let a=0,o=0;o<r;o++,a+=n)i.push(e.get(a));return new zp(i)}}class zp{constructor(e=[],n=!0){this.points=e,this.closed=n}get(e){const n=e,r=this.points.length;return e<0?this.closed?this.get(e+r):this.points[0]:e>=r?this.closed?this.get(e-r):this.points[r-1]:this.points[n]}get length(){return this.points.length}toString(e=1/0){const n=this.points;if(n.length===0)return"";const r=typeof e=="function"?e:Yrt(e);let i="M";for(const a of n)i+=`${r(a.x)},${r(a.y)} L`;return i=i.slice(0,-1),this.closed&&(i+=" Z"),i}draw(e){const n=this.points;if(n.length!==0){e.beginPath(),e.moveTo(n[0].x,n[0].y);for(const r of n)e.lineTo(r.x,r.y);this.closed&&e.closePath()}}sample(e){return fit(e)(this)}simplify(e){return lit(e)(this)}bSplines(e){return cit(e)(this)}apply(e){return e(this)}containsElements(e){const n=Krt(this.points);return n?e.every(r=>n.containsPt(r.cx,r.cy)&&this.withinArea(r.cx,r.cy)):!1}withinArea(e,n){if(this.length===0)return!1;let r=0;const i=this.points[0],a=new Mi(i.x,i.y,i.x,i.y);for(let o=1;o<this.points.length;o++){const s=this.points[o];a.x1=a.x2,a.y1=a.y2,a.x2=s.x,a.y2=s.y,a.cuts(e,n)&&r++}return a.x1=a.x2,a.y1=a.y2,a.x2=i.x,a.y2=i.y,a.cuts(e,n)&&r++,r%2===1}}class dit{constructor(e=0){this.count=0,this.arr=[],this.set=new Set,this.arr.length=e}add(e){this.set.add(`${e.x}x${e.y}`),this.arr[this.count++]=e}contains(e){return this.set.has(`${e.x}x${e.y}`)}isFirst(e){if(this.count===0)return!1;const n=this.arr[0];return n!=null&&n.x===e.x&&n.y===e.y}path(){return new zp(this.arr.slice(0,this.count))}clear(){this.set.clear(),this.count=0}get(e){return this.arr[e]}get length(){return this.count}}const cg=0,c1=1,f1=2,sC=3;function hit(t,e){const n=(Math.floor(t.width)+Math.floor(t.height))*2,r=new dit(n);function i(l,u,c,f){const d=t.get(l,u);return Number.isNaN(d)?Number.NaN:d>e?c+f:c}function a(l,u){let c=cg;return c=i(l,u,c,1),c=i(l+1,u,c,2),c=i(l,u+1,c,4),c=i(l+1,u+1,c,8),Number.isNaN(c)?-1:c}let o=c1;function s(l,u){let c=l,f=u,d=t.invertScaleX(c),h=t.invertScaleY(f);for(let p=0;p<t.width*t.height;p++){const g={x:d,y:h};if(r.contains(g)){if(r.isFirst(g))return!0}else r.add(g);const v=a(c,f);switch(v){case-1:return!0;case 0:case 3:case 2:case 7:o=f1;break;case 12:case 14:case 4:o=sC;break;case 6:o=o===cg?sC:f1;break;case 1:case 13:case 5:o=cg;break;case 9:o=o===f1?cg:c1;break;case 10:case 8:case 11:o=c1;break;default:return console.warn("Marching squares invalid state: "+v),!0}switch(o){case cg:f--,h-=t.pixelGroup;break;case c1:f++,h+=t.pixelGroup;break;case sC:c--,d-=t.pixelGroup;break;case f1:c++,d+=t.pixelGroup;break;default:return console.warn("Marching squares invalid state: "+v),!0}}return!0}for(let l=0;l<t.width;l++)for(let u=0;u<t.height;u++){if(t.get(l,u)<=e)continue;const c=a(l,u);if(!(c<0||c===15)&&s(l,u))return r.path()}return null}const u_={maxRoutingIterations:100,maxMarchingIterations:20,pixelGroup:4,edgeR0:10,edgeR1:20,nodeR0:15,nodeR1:50,morphBuffer:10,threshold:1,memberInfluenceFactor:1,edgeInfluenceFactor:1,nonMemberInfluenceFactor:-.8,virtualEdges:!0};function a0(t){return t!=null&&typeof t.radius=="number"}function mY(t,e){if(a0(t)!==a0(e))return!1;if(a0(t)){const r=e;return t.cx===r.cx&&t.cy===r.cy&&t.radius===r.radius}const n=e;return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height}var rs;(function(t){t[t.MEMBERS=0]="MEMBERS",t[t.NON_MEMBERS=1]="NON_MEMBERS",t[t.EDGES=2]="EDGES"})(rs||(rs={}));let yY=class{constructor(e={}){this.dirty=new Set,this.members=[],this.nonMembers=[],this.virtualEdges=[],this.edges=[],this.activeRegion=new ia(0,0,0,0),this.potentialArea=new Pf(1,0,0,0,0,0,0),this.o=Object.assign({},u_,e)}pushMember(...e){if(e.length!==0){this.dirty.add(rs.MEMBERS);for(const n of e)this.members.push({raw:n,obj:a0(n)?qx.from(n):ia.from(n),area:null})}}removeMember(e){const n=this.members.findIndex(r=>mY(r.raw,e));return n<0?!1:(this.members.splice(n,1),this.dirty.add(rs.MEMBERS),!0)}removeNonMember(e){const n=this.nonMembers.findIndex(r=>mY(r.raw,e));return n<0?!1:(this.nonMembers.splice(n,1),this.dirty.add(rs.NON_MEMBERS),!0)}removeEdge(e){const n=this.edges.findIndex(r=>r.obj.equals(e));return n<0?!1:(this.edges.splice(n,1),this.dirty.add(rs.NON_MEMBERS),!0)}pushNonMember(...e){if(e.length!==0){this.dirty.add(rs.NON_MEMBERS);for(const n of e)this.nonMembers.push({raw:n,obj:a0(n)?qx.from(n):ia.from(n),area:null})}}pushEdge(...e){if(e.length!==0){this.dirty.add(rs.EDGES);for(const n of e)this.edges.push({raw:n,obj:Mi.from(n),area:null})}}update(){const e=this.dirty.has(rs.MEMBERS),n=this.dirty.has(rs.NON_MEMBERS);let r=this.dirty.has(rs.EDGES);this.dirty.clear();const i=this.members.map(u=>u.obj);if(this.o.virtualEdges&&(e||n)){const u=this.nonMembers.map(d=>d.obj),c=eit(i,u,this.o.maxRoutingIterations,this.o.morphBuffer),f=new Map(this.virtualEdges.map(d=>[d.obj.toString(),d.area]));this.virtualEdges=c.map(d=>{var h;return{raw:d,obj:d,area:(h=f.get(d.toString()))!==null&&h!==void 0?h:null}}),r=!0}let a=!1;if(e||r){const u=this.virtualEdges.concat(this.edges).map(h=>h.obj),c=git(i,u),f=Math.max(this.o.edgeR1,this.o.nodeR1)+this.o.morphBuffer,d=ia.from(yfe(c,f));d.equals(this.activeRegion)||(a=!0,this.activeRegion=d)}if(a){const u=Math.ceil(this.activeRegion.width/this.o.pixelGroup),c=Math.ceil(this.activeRegion.height/this.o.pixelGroup);this.activeRegion.x!==this.potentialArea.pixelX||this.activeRegion.y!==this.potentialArea.pixelY?(this.potentialArea=Pf.fromPixelRegion(this.activeRegion,this.o.pixelGroup),this.members.forEach(f=>f.area=null),this.nonMembers.forEach(f=>f.area=null),this.edges.forEach(f=>f.area=null),this.virtualEdges.forEach(f=>f.area=null)):(u!==this.potentialArea.width||c!==this.potentialArea.height)&&(this.potentialArea=Pf.fromPixelRegion(this.activeRegion,this.o.pixelGroup))}const o=new Map,s=u=>{if(u.area){const c=`${u.obj.width}x${u.obj.height}x${u.obj instanceof ia?"R":"C"}`;o.set(c,u.area)}},l=u=>{if(u.area)return;const c=`${u.obj.width}x${u.obj.height}x${u.obj instanceof ia?"R":"C"}`;if(o.has(c)){const d=o.get(c);u.area=this.potentialArea.copy(d,{x:u.obj.x-this.o.nodeR1,y:u.obj.y-this.o.nodeR1});return}const f=u.obj instanceof ia?Qrt(u.obj,this.potentialArea,this.o.nodeR1):bfe(u.obj,this.potentialArea,this.o.nodeR1);u.area=f,o.set(c,f)};this.members.forEach(s),this.nonMembers.forEach(s),this.members.forEach(l),this.nonMembers.forEach(u=>{this.activeRegion.intersects(u.obj)?l(u):u.area=null}),this.edges.forEach(u=>{u.area||(u.area=vY(u.obj,this.potentialArea,this.o.edgeR1))}),this.virtualEdges.forEach(u=>{u.area||(u.area=vY(u.obj,this.potentialArea,this.o.edgeR1))})}drawMembers(e){for(const n of this.members)n.obj.draw(e)}drawNonMembers(e){for(const n of this.nonMembers)n.obj.draw(e)}drawEdges(e){for(const n of this.edges)n.obj.draw(e)}drawPotentialArea(e,n=!0){this.potentialArea.draw(e,n)}compute(){if(this.members.length===0)return new zp([]);this.dirty.size>0&&this.update();const{o:e,potentialArea:n}=this,r=this.members.map(s=>s.area),i=this.virtualEdges.concat(this.edges).map(s=>s.area),a=this.nonMembers.filter(s=>s.area!=null).map(s=>s.area),o=this.members.map(s=>s.obj);return pit(n,r,i,a,s=>s.containsElements(o),e)}};function pit(t,e,n,r,i,a={}){const o=Object.assign({},u_,a);let s=o.threshold,l=o.memberInfluenceFactor,u=o.edgeInfluenceFactor,c=o.nonMemberInfluenceFactor;const f=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),d=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1);for(let h=0;h<o.maxMarchingIterations;h++){if(t.clear(),l!==0){const g=l/f;for(const v of e)t.incArea(v,g)}if(u!==0){const g=u/d;for(const v of n)t.incArea(v,g)}if(c!==0){const g=c/f;for(const v of r)t.incArea(v,g)}const p=hit(t,s);if(p&&i(p))return p;if(s*=.95,h<=o.maxMarchingIterations*.5)l*=1.2,u*=1.2;else if(c!==0&&r.length>0)c*=.8;else break}return new zp([])}function git(t,e){if(t.length===0)return new ia(0,0,0,0);const n=ia.from(t[0]);for(const r of t)n.add(r);for(const r of e)n.add(gfe(r));return n}var vit=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class c_ extends Xi{constructor(e,n){super(e,me({},c_.defaultOptions,n)),this.members=new Map,this.avoidMembers=new Map,this.bubbleSetOptions={},this.drawBubbleSets=()=>{const{style:r,bubbleSetOptions:i}=this.parseOptions();br(this.bubbleSetOptions,i)||this.init(),this.bubbleSetOptions=Object.assign({},i);const a=Object.assign(Object.assign({},r),{d:this.getPath()});this.shape?this.shape.update(a):(this.shape=new sm({style:a}),this.context.canvas.appendChild(this.shape))},this.updateBubbleSetsPath=r=>{if(!this.shape)return;const i=ce(r.data);[...this.options.members,...this.options.avoidMembers].includes(i)&&this.shape.update(Object.assign(Object.assign({},this.parseOptions().style),{d:this.getPath(i)}))},this.getPath=r=>{const{graph:i}=this.context,a=this.options.members,o=[...this.members.keys()],s=this.options.avoidMembers,l=[...this.avoidMembers.keys()];if(!r&&br(a,o)&&br(s,l))return this.path;const{enter:u=[],exit:c=[]}=uc(o,a,v=>v),{enter:f=[],exit:d=[]}=uc(l,s,v=>v);r&&(c.push(r),u.push(r));const h=(v,m,y)=>{v.forEach(b=>{const x=y?this.members:this.avoidMembers,w=y?"pushMember":"pushNonMember",_=y?"removeMember":"removeNonMember";if(m){let E;i.getElementType(b)==="edge"?([E]=yit(i,b),this.bubbleSets.pushEdge(E)):([E]=mit(i,b),this.bubbleSets[w](E)),x.set(b,E)}else{const E=x.get(b);E&&(i.getElementType(b)==="edge"?this.bubbleSets.removeEdge(E):this.bubbleSets[_](E),x.delete(b))}})};h(c,!1,!0),h(u,!0,!0),h(d,!1,!1),h(f,!0,!1);const g=this.bubbleSets.compute().sample(8).simplify(0).bSplines().simplify(0);return this.path=mue(g.points.map(Vi)),this.path},this.bindEvents(),this.bubbleSets=new yY(this.options)}bindEvents(){this.context.graph.on(Le.AFTER_RENDER,this.drawBubbleSets),this.context.graph.on(Le.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath)}init(){this.bubbleSets=new yY(this.options),this.members=new Map,this.avoidMembers=new Map}parseOptions(){const e=this.options,{type:n,key:r,members:i,avoidMembers:a}=e,o=vit(e,["type","key","members","avoidMembers"]),s=Object.keys(o).reduce((l,u)=>(u in u_?l.bubbleSetOptions[u]=o[u]:l.style[u]=o[u],l),{style:{},bubbleSetOptions:{}});return Object.assign({type:n,key:r,members:i,avoidMembers:a},s)}addMember(e){const n=Array.isArray(e)?e:[e];n.some(r=>this.options.avoidMembers.includes(r))&&(this.options.avoidMembers=this.options.avoidMembers.filter(r=>!n.includes(r))),this.options.members=[...new Set([...this.options.members,...n])],this.drawBubbleSets()}removeMember(e){const n=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter(r=>!n.includes(r)),this.drawBubbleSets()}updateMember(e){this.options.members=Ue(e)?e(this.options.members):e,this.drawBubbleSets()}getMember(){return this.options.members}addAvoidMember(e){const n=Array.isArray(e)?e:[e];n.some(r=>this.options.members.includes(r))&&(this.options.members=this.options.members.filter(r=>!n.includes(r))),this.options.avoidMembers=[...new Set([...this.options.avoidMembers,...n])],this.drawBubbleSets()}removeAvoidMember(e){const n=Array.isArray(e)?e:[e];this.options.avoidMembers.some(r=>n.includes(r))&&(this.options.avoidMembers=this.options.avoidMembers.filter(r=>!n.includes(r)),this.drawBubbleSets())}updateAvoidMember(e){this.options.avoidMembers=Array.isArray(e)?e:[e],this.drawBubbleSets()}getAvoidMember(){return this.options.avoidMembers}destroy(){this.context.graph.off(Le.AFTER_RENDER,this.drawBubbleSets),this.context.graph.off(Le.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath),this.shape.destroy(),super.destroy()}}c_.defaultOptions=Object.assign({members:[],avoidMembers:[],fill:"lightblue",fillOpacity:.2,stroke:"blue",strokeOpacity:.2},u_);const mit=(t,e)=>(Array.isArray(e)?e:[e]).map(r=>{const i=t.getElementRenderBounds(r);return new ia(i.min[0],i.min[1],Al(i),Tl(i))}),yit=(t,e)=>(Array.isArray(e)?e:[e]).map(r=>{const i=t.getEdgeData(r),a=t.getElementPosition(i.source),o=t.getElementPosition(i.target);return Mi.from({x1:a[0],y1:a[1],x2:o[0],y2:o[1]})});function bit(t){return`
    <ul class="g6-contextmenu-ul">
      ${t.map(e=>`<li  class="g6-contextmenu-li" value="${e.value}">${e.name}</li>`).join("")}
    </ul>
  `}const xit=`
  .g6-contextmenu {
    font-size: 12px;
    background-color: rgba(255, 255, 255, 0.96);
    border-radius: 4px;
    overflow: hidden;
    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;
    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;
  }

  .g6-contextmenu-ul {
    max-width: 256px;
    min-width: 96px;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .g6-contextmenu-li {
    padding: 8px 12px;
    cursor: pointer;
    user-select: none;
  }

  .g6-contextmenu-li:hover {
    background-color: #f5f5f5;
    cursor: pointer;
  }
`;var bY=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class f_ extends Xi{constructor(e,n){super(e,Object.assign({},f_.defaultOptions,n)),this.targetElement=null,this.onTriggerEvent=r=>{var i;(i=r.preventDefault)===null||i===void 0||i.call(r),this.show(r)},this.onMenuItemClick=r=>{const{onClick:i,trigger:a}=this.options;if(r.target instanceof HTMLElement&&r.target.className.includes("g6-contextmenu-li")){const o=r.target.getAttribute("value");i==null||i(o,r.target,this.targetElement),this.hide()}a!=="click"&&this.hide()},this.initElement(),this.update(n)}initElement(){this.$element=Fp("contextmenu",!1,{zIndex:"99"});const{className:e}=this.options;e&&this.$element.classList.add(e),this.context.canvas.getContainer().appendChild(this.$element),SD("g6-contextmenu-css","style",{},xit,document.head)}show(e){return bY(this,void 0,void 0,function*(){const{enable:n,offset:r}=this.options;if(typeof n=="function"&&!n(e)||!n){this.hide();return}const i=yield this.getDOMContent(e);i instanceof HTMLElement?(this.$element.innerHTML="",this.$element.appendChild(i)):this.$element.innerHTML=i;const a=this.context.graph.getCanvas().getContainer().getBoundingClientRect();this.$element.style.left=`${e.client.x-a.left+r[0]}px`,this.$element.style.top=`${e.client.y-a.top+r[1]}px`,this.$element.style.display="block",this.targetElement=e.target})}hide(){this.$element.style.display="none",this.targetElement=null}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.$element.remove()}getDOMContent(e){return bY(this,void 0,void 0,function*(){const{getContent:n,getItems:r}=this.options;return r?bit(yield r(e)):yield n(e)})}bindEvents(){const{graph:e}=this.context,{trigger:n}=this.options;e.on(`canvas:${n}`,this.onTriggerEvent),e.on(`node:${n}`,this.onTriggerEvent),e.on(`edge:${n}`,this.onTriggerEvent),e.on(`combo:${n}`,this.onTriggerEvent),document.addEventListener("click",this.onMenuItemClick)}unbindEvents(){const{graph:e}=this.context,{trigger:n}=this.options;e.off(`canvas:${n}`,this.onTriggerEvent),e.off(`node:${n}`,this.onTriggerEvent),e.off(`edge:${n}`,this.onTriggerEvent),e.off(`combo:${n}`,this.onTriggerEvent),document.removeEventListener("click",this.onMenuItemClick)}}f_.defaultOptions={trigger:"contextmenu",offset:[4,4],loadingContent:'<div class="g6-contextmenu-loading">Loading...</div>',getContent:()=>"It is a empty context menu.",enable:()=>!0};class d_ extends Xi{constructor(e,n){super(e,Object.assign({},d_.defaultOptions,n)),this.edgeBundles={},this.edgePoints={},this.onBundle=()=>{const{model:r,element:i}=this.context,a=r.getEdgeData();this.divideEdges(this.options.divisions);const{cycles:o,iterRate:s,divRate:l}=this.options;let{lambda:u,divisions:c,iterations:f}=this.options;for(let d=0;d<o;d++){for(let h=0;h<f;h++){const p={};a.forEach(g=>{var v;if(g.source===g.target)return;const m=ce(g);p[m]=this.getEdgeForces(g,c,u);for(let y=0;y<c+1;y++)(v=this.edgePoints)[m]||(v[m]=[]),this.edgePoints[m][y]=kt(this.edgePoints[m][y],p[m][y])})}u/=2,c*=l,f*=s,this.divideEdges(c)}a.forEach(d=>{const h=ce(d),p=i.getElement(h);p==null||p.update({d:f4(this.edgePoints[h])})})},this.bindEvents()}get nodeMap(){const e=this.context.model.getNodeData();return Object.fromEntries(e.map(n=>[ce(n),Qf(Yr(n))]))}divideEdges(e){this.context.model.getEdgeData().forEach(r=>{var i;const a=ce(r);(i=this.edgePoints)[a]||(i[a]=[]);const o=this.nodeMap[r.source],s=this.nodeMap[r.target];if(e===1)this.edgePoints[a].push(o),this.edgePoints[a].push(As(kt(o,s),2)),this.edgePoints[a].push(s);else{const u=(this.edgePoints[a].length===0?Jn(o,s):Oit(this.edgePoints[a]))/(e+1);let c=u;const f=[o];for(let d=1;d<this.edgePoints[a].length;d++){const h=this.edgePoints[a][d-1],p=this.edgePoints[a][d];let g=Jn(p,h);for(;g>c;){const v=c/g,m=kt(h,gs(In(p,h),v));f.push(m),g-=c,c=u}c-=g}f.push(s),this.edgePoints[a]=f}})}getVectorPosition(e){const n=this.nodeMap[e.source],r=this.nodeMap[e.target],[i,a]=In(r,n),o=Jn(n,r);return{source:n,target:r,vx:i,vy:a,length:o}}measureEdgeCompatibility(e,n){const r=this.getVectorPosition(e),i=this.getVectorPosition(n),a=wit(r,i),o=_it(r,i),s=Sit(r,i),l=Eit(r,i);return a*o*s*l}getEdgeBundles(){const e={},n=this.options.bundleThreshold,r=this.context.model.getEdgeData();return r.forEach((i,a)=>{r.forEach((o,s)=>{var l,u;if(s<=a)return;this.measureEdgeCompatibility(i,o)>=n&&(e[l=ce(i)]||(e[l]=[]),e[ce(i)].push(o),e[u=ce(o)]||(e[u]=[]),e[ce(o)].push(i))})}),e}getSpringForce(e,n){const{pre:r,cur:i,next:a}=e;return gs(In(kt(r,a),gs(i,2)),n)}getElectrostaticForce(e,n){Ys(this.edgeBundles)&&(this.edgeBundles=this.getEdgeBundles());const r=this.edgeBundles[ce(n)];let i=[0,0];return r==null||r.forEach(a=>{const o=this.edgePoints[ce(a)][e],s=this.edgePoints[ce(n)][e],l=In(o,s),u=Jn(o,s);i=kt(i,gs(l,1/u))}),i}getEdgeForces(e,n,r){const i=this.nodeMap[e.source],a=this.nodeMap[e.target],o=this.options.K/(Jn(i,a)*(n+1)),s=[[0,0]],l=ce(e);for(let u=1;u<n;u++){const c=this.getSpringForce({pre:this.edgePoints[l][u-1],cur:this.edgePoints[l][u],next:this.edgePoints[l][u+1]||[0,0]},o),f=this.getElectrostaticForce(u,e);s.push(gs(kt(c,f),r))}return s.push([0,0]),s}bindEvents(){const{graph:e}=this.context;e.on(Le.AFTER_RENDER,this.onBundle)}unbindEvents(){const{graph:e}=this.context;e.off(Le.AFTER_RENDER,this.onBundle)}destroy(){this.unbindEvents(),super.destroy()}}d_.defaultOptions={K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:2/3,bundleThreshold:.6};const wit=(t,e)=>Math.abs(tXe([t.vx,t.vy],[e.vx,e.vy])/(t.length*e.length)),_it=(t,e)=>{const n=(t.length+e.length)/2;return 2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n)},Sit=(t,e)=>{const n=(t.length+e.length)/2,r=As(kt(t.source,t.target),2),i=As(kt(e.source,e.target),2);return n/(n+Jn(r,i))},xY=(t,e)=>{if(e.source[0]===e.target[0])return[e.source[0],t[1]];if(e.source[1]===e.target[1])return[t[0],e.source[1]];const n=(e.source[1]-e.target[1])/(e.source[0]-e.target[0]),r=(n*n*e.source[0]+n*(t[1]-e.source[1])+t[0])/(n*n+1),i=n*(r-e.source[0])+e.source[1];return[r,i]},wY=(t,e)=>{const n=xY(e.source,t),r=xY(e.target,t),i=As(kt(n,r),2),a=As(kt(t.source,t.target),2);return Jn(n,r)===0?0:Math.max(0,1-2*Jn(a,i)/Jn(n,r))},Eit=(t,e)=>Math.min(wY(t,e),wY(e,t)),Oit=t=>{let e=0;for(let n=1;n<t.length;n++)e+=Jn(t[n],t[n-1]);return e},kit={fill:"#fff",fillOpacity:1,lineWidth:1,stroke:"#000",strokeOpacity:.8,zIndex:-1/0},_Y=.05;class h_ extends Xi{constructor(e,n){super(e,Object.assign({},h_.defaultOptions,n)),this.shapes=new Map,this.r=this.options.r,this.onEdgeFilter=r=>{if(this.options.trigger==="drag"&&this.isLensOn)return;const i=Vi(r.canvas);this.renderLens(i),this.renderFocusElements()},this.renderLens=r=>{const i=Object.assign({},kit,this.options.style);this.isLensOn||(this.lens=new lm({style:i}),this.canvas.appendChild(this.lens)),Object.assign(i,vs(r),{size:this.r*2}),this.lens.update(i)},this.getFilterData=()=>{const{filter:r}=this.options,{model:i}=this.context,a=i.getData();if(!r)return a;const{nodes:o,edges:s,combos:l}=a;return{nodes:o.filter(u=>r(ce(u),"node")),edges:s.filter(u=>r(ce(u),"edge")),combos:l.filter(u=>r(ce(u),"combo"))}},this.getFocusElements=r=>{const{nodes:i,edges:a}=this.getFilterData(),o=i.filter(u=>Jn(Yr(u),r)<this.r),s=o.map(u=>ce(u)),l=a.filter(u=>{const{source:c,target:f}=u,d=s.includes(c),h=s.includes(f);switch(this.options.nodeType){case"both":return d&&h;case"either":return d!==h;case"source":return d&&!h;case"target":return!d&&h;default:return!1}});return{nodes:o,edges:l}},this.renderFocusElements=()=>{const{element:r,graph:i}=this.context;if(!this.isLensOn)return;const a=this.lens.getCenter(),{nodes:o,edges:s}=this.getFocusElements(a),l=new Set,u=c=>{const f=ce(c);l.add(f);const d=r.getElement(f);if(!d)return;const h=this.shapes.get(f)||d.cloneNode();h.setPosition(d.getPosition()),h.id=d.id,this.shapes.has(f)?Object.entries(d.attributes).forEach(([v,m])=>{h.style[v]!==m&&(h.style[v]=m)}):(this.canvas.appendChild(h),this.shapes.set(f,h));const p=i.getElementType(f),g=this.getElementStyle(p,c);h.update(g)};o.forEach(u),s.forEach(u),this.shapes.forEach((c,f)=>{l.has(f)||(c.destroy(),this.shapes.delete(f))})},this.scaleRByWheel=r=>{var i;this.options.preventDefault&&r.preventDefault();const{clientX:a,clientY:o,deltaX:s,deltaY:l}=r,{graph:u,canvas:c}=this.context,f=u.getCanvasByClient([a,o]),d=(i=this.lens)===null||i===void 0?void 0:i.getCenter();if(!this.isLensOn||Jn(f,d)>this.r)return;const{maxR:h,minR:p}=this.options,g=s+l>0?1/(1-_Y):1-_Y,v=Math.min(...c.getSize())/2;this.r=Math.max(p||0,Math.min(h||v,this.r*g)),this.renderLens(d),this.renderFocusElements()},this.isLensDragging=!1,this.onDragStart=r=>{var i;const a=Vi(r.canvas),o=(i=this.lens)===null||i===void 0?void 0:i.getCenter();!this.isLensOn||Jn(a,o)>this.r||(this.isLensDragging=!0)},this.onDrag=r=>{if(!this.isLensDragging)return;const i=Vi(r.canvas);this.renderLens(i),this.renderFocusElements()},this.onDragEnd=()=>{this.isLensDragging=!1},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}getElementStyle(e,n){const r=e==="node"?this.options.nodeStyle:this.options.edgeStyle;return typeof r=="function"?r(n):r}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var e;const{graph:n}=this.context,{trigger:r,scaleRBy:i}=this.options,a=n.getCanvas().getLayer();["click","drag"].includes(r)&&a.addEventListener(be.CLICK,this.onEdgeFilter),r==="pointermove"?a.addEventListener(be.POINTER_MOVE,this.onEdgeFilter):r==="drag"&&(a.addEventListener(be.DRAG_START,this.onDragStart),a.addEventListener(be.DRAG,this.onDrag),a.addEventListener(be.DRAG_END,this.onDragEnd)),i==="wheel"&&((e=this.graphDom)===null||e===void 0||e.addEventListener(be.WHEEL,this.scaleRByWheel,{passive:!1}))}unbindEvents(){var e;const{graph:n}=this.context,{trigger:r,scaleRBy:i}=this.options,a=n.getCanvas().getLayer();["click","drag"].includes(r)&&a.removeEventListener(be.CLICK,this.onEdgeFilter),r==="pointermove"?a.removeEventListener(be.POINTER_MOVE,this.onEdgeFilter):r==="drag"&&(a.removeEventListener(be.DRAG_START,this.onDragStart),a.removeEventListener(be.DRAG,this.onDrag),a.removeEventListener(be.DRAG_END,this.onDragEnd)),i==="wheel"&&((e=this.graphDom)===null||e===void 0||e.removeEventListener(be.WHEEL,this.scaleRByWheel))}update(e){var n;this.unbindEvents(),super.update(e),this.r=(n=e.r)!==null&&n!==void 0?n:this.r,this.bindEvents()}destroy(){this.unbindEvents(),this.isLensOn&&this.lens.destroy(),this.shapes.forEach((e,n)=>{e.destroy(),this.shapes.delete(n)}),super.destroy()}}h_.defaultOptions={trigger:"pointermove",r:60,nodeType:"both",filter:()=>!0,style:{lineWidth:2},nodeStyle:{label:!1},edgeStyle:{label:!0},scaleRBy:"wheel",preventDefault:!0};const Ait={fill:"#ccc",fillOpacity:.1,lineWidth:2,stroke:"#000",strokeOpacity:.8,labelFontSize:12},SY=.05,EY=.1;class p_ extends Xi{constructor(e,n){super(e,Object.assign({},p_.defaultOptions,n)),this.r=this.options.r,this.d=this.options.d,this.onCreateFisheye=r=>{if(this.options.trigger==="drag"&&this.isLensOn)return;const i=Vi(r.canvas);this.onMagnify(i)},this.onMagnify=r=>{r.some(isNaN)||(this.renderLens(r),this.renderFocusElements())},this.renderLens=r=>{const i=Object.assign({},Ait,this.options.style);this.isLensOn||(this.lens=new lm({style:i}),this.canvas.appendChild(this.lens)),Object.assign(i,vs(r),{size:this.r*2,label:this.options.showDPercent,labelText:this.getDPercent()}),this.lens.update(i)},this.getDPercent=()=>{const{minD:r,maxD:i}=this.options;return`${Math.round((this.d-r)/(i-r)*100)}%`},this.prevMagnifiedStyleMap=new Map,this.prevOriginStyleMap=new Map,this.renderFocusElements=()=>{if(!this.isLensOn)return;const{graph:r}=this.context,i=this.lens.getCenter(),a=(this.d+1)*this.r,o=new Map,s=new Map;r.getNodeData().forEach(u=>{const c=Yr(u),f=Jn(c,i);if(f>this.r)return;const d=a*f/(this.d*f+this.r),[h,p]=c,[g,v]=i,m=(h-g)/f,y=(p-v)/f,b=[g+d*m,v+d*y],x=ce(u),w=this.getNodeStyle(u),_=mc(r.getElementRenderStyle(x),Object.keys(w));o.set(x,Object.assign(Object.assign({},vs(b)),w)),s.set(x,Object.assign(Object.assign({},vs(c)),_))}),this.updateStyle(o,s)},this.getNodeStyle=r=>{const{nodeStyle:i}=this.options;return typeof i=="function"?i(r):i},this.updateStyle=(r,i)=>{const{graph:a,element:o}=this.context,{enter:s,exit:l,keep:u}=uc(Array.from(this.prevMagnifiedStyleMap.keys()),Array.from(r.keys()),d=>d),c=new Set,f=(d,h)=>{const p=o.getElement(d);p==null||p.update(h),a.getRelatedEdgesData(d).forEach(g=>{c.add(ce(g))})};[...s,...u].forEach(d=>{f(d,r.get(d))}),l.forEach(d=>{f(d,this.prevOriginStyleMap.get(d)),this.prevOriginStyleMap.delete(d)}),c.forEach(d=>{const h=o.getElement(d);h==null||h.update({})}),this.prevMagnifiedStyleMap=r,i.forEach((d,h)=>{this.prevOriginStyleMap.has(h)||this.prevOriginStyleMap.set(h,d)})},this.isWheelValid=r=>{if(this.options.preventDefault&&r.preventDefault(),!this.isLensOn)return!1;const{clientX:i,clientY:a}=r,o=this.context.graph.getCanvasByClient([i,a]),s=this.lens.getCenter();return!(Jn(o,s)>this.r)},this.scaleR=r=>{const{maxR:i,minR:a}=this.options,o=r?1/(1-SY):1-SY,s=Math.min(...this.context.canvas.getSize())/2;this.r=Math.max(a||0,Math.min(i||s,this.r*o))},this.scaleD=r=>{const{maxD:i,minD:a}=this.options,o=r?this.d+EY:this.d-EY;this.d=Math.max(a,Math.min(i,o))},this.scaleRByWheel=r=>{if(!this.isWheelValid(r))return;const{deltaX:i,deltaY:a}=r;this.scaleR(i+a>0);const o=this.lens.getCenter();this.onMagnify(o)},this.scaleDByWheel=r=>{if(!this.isWheelValid(r))return;const{deltaX:i,deltaY:a}=r;this.scaleD(i+a>0);const o=this.lens.getCenter();this.onMagnify(o)},this.isDragValid=r=>{if(this.options.preventDefault&&r.preventDefault(),!this.isLensOn)return!1;const i=Vi(r.canvas),a=this.lens.getCenter();return!(Jn(i,a)>this.r)},this.isLensDragging=!1,this.onDragStart=r=>{this.isDragValid(r)&&(this.isLensDragging=!0)},this.onDrag=r=>{if(!this.isLensDragging)return;const i=Vi(r.canvas);this.onMagnify(i)},this.onDragEnd=()=>{this.isLensDragging=!1},this.scaleRByDrag=r=>{if(!this.isLensDragging)return;const{dx:i,dy:a}=r;this.scaleR(i-a>0);const o=this.lens.getCenter();this.onMagnify(o)},this.scaleDByDrag=r=>{if(!this.isLensDragging)return;const{dx:i,dy:a}=r;this.scaleD(i-a>0);const o=this.lens.getCenter();this.onMagnify(o)},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var e;const{graph:n}=this.context,{trigger:r,scaleRBy:i,scaleDBy:a}=this.options,o=n.getCanvas().getLayer();if(["click","drag"].includes(r)&&o.addEventListener(be.CLICK,this.onCreateFisheye),r==="pointermove"&&o.addEventListener(be.POINTER_MOVE,this.onCreateFisheye),r==="drag"||i==="drag"||a==="drag"){o.addEventListener(be.DRAG_START,this.onDragStart),o.addEventListener(be.DRAG_END,this.onDragEnd);const s=r==="drag"?this.onDrag:i==="drag"?this.scaleRByDrag:this.scaleDByDrag;o.addEventListener(be.DRAG,s)}if(i==="wheel"||a==="wheel"){const s=i==="wheel"?this.scaleRByWheel:this.scaleDByWheel;(e=this.graphDom)===null||e===void 0||e.addEventListener(be.WHEEL,s,{passive:!1})}}unbindEvents(){var e;const{graph:n}=this.context,{trigger:r,scaleRBy:i,scaleDBy:a}=this.options,o=n.getCanvas().getLayer();if(["click","drag"].includes(r)&&o.removeEventListener(be.CLICK,this.onCreateFisheye),r==="pointermove"&&o.removeEventListener(be.POINTER_MOVE,this.onCreateFisheye),r==="drag"||i==="drag"||a==="drag"){o.removeEventListener(be.DRAG_START,this.onDragStart),o.removeEventListener(be.DRAG_END,this.onDragEnd);const s=r==="drag"?this.onDrag:i==="drag"?this.scaleRByDrag:this.scaleDByDrag;o.removeEventListener(be.DRAG,s)}if(i==="wheel"||a==="wheel"){const s=i==="wheel"?this.scaleRByWheel:this.scaleDByWheel;(e=this.graphDom)===null||e===void 0||e.removeEventListener(be.WHEEL,s)}}update(e){var n,r;this.unbindEvents(),super.update(e),this.r=(n=e.r)!==null&&n!==void 0?n:this.r,this.d=(r=e.d)!==null&&r!==void 0?r:this.d,this.bindEvents()}destroy(){var e;this.unbindEvents(),this.isLensOn&&((e=this.lens)===null||e===void 0||e.destroy()),this.prevMagnifiedStyleMap.clear(),this.prevOriginStyleMap.clear(),super.destroy()}}p_.defaultOptions={trigger:"pointermove",r:120,d:1.5,maxD:5,minD:0,showDPercent:!0,style:{},nodeStyle:{label:!0},preventDefault:!0};class g_ extends Xi{constructor(e,n){super(e,Object.assign({},g_.defaultOptions,n)),this.$el=this.context.canvas.getContainer(),this.graphSize=[0,0],this.onFullscreenChange=()=>{var r,i,a,o;const s=!!document.fullscreenElement;this.options.autoFit&&this.setGraphSize(s),s?(i=(r=this.options).onEnter)===null||i===void 0||i.call(r):(o=(a=this.options).onExit)===null||o===void 0||o.call(a)},this.shortcut=new Mp(e.graph),this.bindEvents(),this.style=document.createElement("style"),document.head.appendChild(this.style),this.style.innerHTML=`
      :not(:root):fullscreen::backdrop {
        background: transparent;
      }
    `}bindEvents(){this.unbindEvents(),this.shortcut.unbindAll();const{request:e=[],exit:n=[]}=this.options.trigger;this.shortcut.bind(e,this.request),this.shortcut.bind(n,this.exit),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(i=>{document.addEventListener(i,this.onFullscreenChange,!1)})}unbindEvents(){this.shortcut.unbindAll(),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(n=>{document.removeEventListener(n,this.onFullscreenChange,!1)})}setGraphSize(e=!0){var n,r;let i,a;e?(i=((n=globalThis.screen)===null||n===void 0?void 0:n.width)||0,a=((r=globalThis.screen)===null||r===void 0?void 0:r.height)||0,this.graphSize=this.context.graph.getSize()):[i,a]=this.graphSize,this.context.graph.setSize(i,a),this.context.graph.render()}request(){document.fullscreenElement||!Tit()||this.$el.requestFullscreen().catch(e=>{Ol.warn(`Error attempting to enable full-screen: ${e.message} (${e.name})`)})}exit(){document.fullscreenElement&&document.exitFullscreen()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.exit(),this.style.remove(),super.destroy()}}g_.defaultOptions={trigger:{},autoFit:!0};function Tit(){return document.fullscreenEnabled||Reflect.get(document,"webkitFullscreenEnabled")||Reflect.get(document,"mozFullscreenEnabled")||Reflect.get(document,"msFullscreenEnabled")}class v_ extends Xi{constructor(e,n){super(e,Object.assign({},v_.defaultOptions,n)),this.$element=Fp("grid-line",!0),this.offset=[0,0],this.currentScale=1,this.followZoom=i=>{const{data:{scale:a,origin:o}}=i;if(!a)return;const s=this.currentScale;this.currentScale=a;const l=a/s,u=gs(o||this.context.graph.getCanvasCenter(),1-l),c=this.baseSize*a,f=gs(this.offset,l),d=pO(f,c),h=kt(d,u);this.$element.style.backgroundSize=`${c}px ${c}px`,this.$element.style.backgroundPosition=`${h[0]}px ${h[1]}px`,this.offset=pO(h,c)},this.followTranslate=i=>{if(!this.options.follow)return;const{data:{translate:a}}=i;a&&this.updateOffset(a)},this.onTransform=i=>{const a=this.parseFollow(this.options.follow);a.zoom&&this.followZoom(i),a.translate&&this.followTranslate(i)},this.context.canvas.getContainer().prepend(this.$element),this.baseSize=this.options.size,this.updateStyle(),this.bindEvents()}update(e){super.update(e),e.size!==void 0&&(this.baseSize=e.size),this.updateStyle()}bindEvents(){const{graph:e}=this.context;e.on(Le.AFTER_TRANSFORM,this.onTransform)}updateStyle(){const{stroke:e,lineWidth:n,border:r,borderLineWidth:i,borderStroke:a,borderStyle:o}=this.options,s=this.baseSize*this.currentScale;Object.assign(this.$element.style,{border:r?`${i}px ${o} ${a}`:"none",backgroundImage:`linear-gradient(${e} ${n}px, transparent ${n}px), linear-gradient(90deg, ${e} ${n}px, transparent ${n}px)`,backgroundSize:`${s}px ${s}px`,backgroundRepeat:"repeat"})}updateOffset(e){const n=this.baseSize*this.currentScale;this.offset=pO(kt(this.offset,e),n),this.$element.style.backgroundPosition=`${this.offset[0]}px ${this.offset[1]}px`}parseFollow(e){var n,r;return M0(e)?{translate:e,zoom:e}:{translate:(n=e==null?void 0:e.translate)!==null&&n!==void 0?n:!1,zoom:(r=e==null?void 0:e.zoom)!==null&&r!==void 0?r:!1}}destroy(){this.context.graph.off(Le.AFTER_TRANSFORM,this.onTransform),this.$element.remove(),super.destroy()}}v_.defaultOptions={border:!0,borderLineWidth:1,borderStroke:"#eee",borderStyle:"solid",lineWidth:1,size:20,stroke:"#eee"};function j4(t){const e={Added:new Map,Updated:new Map,Removed:new Map};return t.forEach(n=>{const{type:r,value:i}=n,a=ce(i);if(r==="NodeAdded"||r==="EdgeAdded"||r==="ComboAdded")e.Added.set(a,n);else if(r==="NodeUpdated"||r==="EdgeUpdated"||r==="ComboUpdated")if(e.Added.has(a))e.Added.set(a,{type:r.replace("Updated","Added"),value:i});else if(e.Updated.has(a)){const{original:o}=e.Updated.get(a);e.Updated.set(a,{type:r,value:i,original:o})}else e.Removed.has(a)||e.Updated.set(a,n);else(r==="NodeRemoved"||r==="EdgeRemoved"||r==="ComboRemoved")&&(e.Added.has(a)?e.Added.delete(a):(e.Updated.has(a)&&e.Updated.delete(a),e.Removed.set(a,n)))}),[...Array.from(e.Added.values()),...Array.from(e.Updated.values()),...Array.from(e.Removed.values())]}function wfe(t){const{NodeAdded:e=[],NodeUpdated:n=[],NodeRemoved:r=[],EdgeAdded:i=[],EdgeUpdated:a=[],EdgeRemoved:o=[],ComboAdded:s=[],ComboUpdated:l=[],ComboRemoved:u=[]}=y2(t,c=>c.type);return{add:{nodes:e,edges:i,combos:s},update:{nodes:n,edges:a,combos:l},remove:{nodes:r,edges:o,combos:u}}}function _fe(t,e){for(const n in t)jr(t[n])&&!Array.isArray(t[n])&&t[n]!==null?(e[n]||(e[n]={}),_fe(t[n],e[n])):e[n]===void 0&&(e[n]=lv(n))}function Mit(t,e=!1,n){const r={animation:e,current:{add:{},update:{},remove:{}},original:{add:{},update:{},remove:{}}},{add:i,update:a,remove:o}=wfe(j4(t));return["nodes","edges","combos"].forEach(s=>{a[s]&&a[s].forEach(l=>{var u,c;const f=Object.assign({},l.value);let d=Object.assign({},l.original);if(n){const h=n.graph.getElementType(ce(l.original)),p=h==="edge"?"stroke":"fill",g=n.element.getElementComputedStyle(h,l.original);d=Object.assign(Object.assign({},l.original),{style:Object.assign({[p]:g[p]},l.original.style)})}_fe(f,d),(u=r.current.update)[s]||(u[s]=[]),r.current.update[s].push(f),(c=r.original.update)[s]||(c[s]=[]),r.original.update[s].push(d)}),i[s]&&i[s].forEach(l=>{var u,c;const f=Object.assign({},l.value);(u=r.current.add)[s]||(u[s]=[]),r.current.add[s].push(f),(c=r.original.remove)[s]||(c[s]=[]),r.original.remove[s].push(f)}),o[s]&&o[s].forEach(l=>{var u,c;const f=Object.assign({},l.value);(u=r.current.remove)[s]||(u[s]=[]),r.current.remove[s].push(f),(c=r.original.add)[s]||(c[s]=[]),r.original.add[s].push(f)})}),r}class m_ extends Xi{constructor(e,n){super(e,Object.assign({},m_.defaultOptions,n)),this.batchChanges=null,this.batchAnimation=!1,this.undoStack=[],this.redoStack=[],this.freezed=!1,this.executeCommand=(i,a=!0)=>{var o,s,l;this.freezed=!0,(s=(o=this.options).executeCommand)===null||s===void 0||s.call(o,i);const u=a?i.original:i.current;this.context.graph.addData(u.add),this.context.graph.updateData(u.update),this.context.graph.removeData(tue(u.remove,!1)),(l=this.context.element)===null||l===void 0||l.draw({silence:!0,animation:i.animation}),this.freezed=!1},this.addCommand=i=>{var a;if(!this.freezed){if(i.type===Le.AFTER_DRAW){const{dataChanges:o=[],animation:s=!0}=i.data;if(!((a=this.context.batch)===null||a===void 0)&&a.isBatching){if(!this.batchChanges)return;this.batchChanges.push(o),this.batchAnimation&&(this.batchAnimation=s);return}this.batchChanges=[o],this.batchAnimation=s}this.undoStackPush(Mit(this.batchChanges.flat(),this.batchAnimation,this.context)),this.notify(Nu.ADD,this.undoStack[this.undoStack.length-1])}},this.initBatchCommand=i=>{const{initiate:a}=i.data;this.batchAnimation=!1,a?this.batchChanges=[]:this.undoStack.pop()||(this.batchChanges=null)},this.emitter=new kp;const{graph:r}=this.context;r.on(Le.AFTER_DRAW,this.addCommand),r.on(Le.BATCH_START,this.initBatchCommand),r.on(Le.BATCH_END,this.addCommand)}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undo(){var e,n,r,i;const a=this.undoStack.pop();if(a){if(this.executeCommand(a),((n=(e=this.options).beforeAddCommand)===null||n===void 0?void 0:n.call(e,a,!1))===!1)return;this.redoStack.push(a),(i=(r=this.options).afterAddCommand)===null||i===void 0||i.call(r,a,!1),this.notify(Nu.UNDO,a)}return this}redo(){const e=this.redoStack.pop();return e&&(this.executeCommand(e,!1),this.undoStackPush(e),this.notify(Nu.REDO,e)),this}undoAndCancel(){const e=this.undoStack.pop();return e&&(this.executeCommand(e,!1),this.redoStack=[],this.notify(Nu.CANCEL,e)),this}undoStackPush(e){var n,r,i,a;const{stackSize:o}=this.options;o!==0&&this.undoStack.length>=o&&this.undoStack.shift(),((r=(n=this.options).beforeAddCommand)===null||r===void 0?void 0:r.call(n,e,!0))!==!1&&(this.undoStack.push(e),(a=(i=this.options).afterAddCommand)===null||a===void 0||a.call(i,e,!0))}clear(){this.undoStack=[],this.redoStack=[],this.batchChanges=null,this.batchAnimation=!1,this.notify(Nu.CLEAR,null)}notify(e,n){this.emitter.emit(e,{cmd:n}),this.emitter.emit(Nu.CHANGE,{cmd:n})}on(e,n){this.emitter.on(e,n)}destroy(){const{graph:e}=this.context;e.off(Le.AFTER_DRAW,this.addCommand),e.off(Le.BATCH_START,this.initBatchCommand),e.off(Le.BATCH_END,this.addCommand),this.emitter.off(),super.destroy(),this.undoStack=[],this.redoStack=[]}}m_.defaultOptions={stackSize:0};const lC={toXy(t,e){if(!e)return[...t];const n=e[0].slice(1),r=e[1].slice(1);return t.map(i=>[i[n],i[r]])},fromXy(t,e){if(!e)return[...t];const n=e[0].slice(1),r=e[1].slice(1);return t.map(([i,a])=>({[n]:i,[r]:a}))}};class Cit{constructor(e,n){this._cells=[],this._cellSize=n,this._reverseCellSize=1/n;for(const r of e){const i=this.coordToCellNum(r[0]),a=this.coordToCellNum(r[1]);this._cells[i]||(this._cells[i]=[]),this._cells[i][a]||(this._cells[i][a]=[]),this._cells[i][a].push(r)}}cellPoints(e,n){var r;return((r=this._cells[e])===null||r===void 0?void 0:r[n])||[]}rangePoints(e){const n=this.coordToCellNum(e[0]),r=this.coordToCellNum(e[1]),i=this.coordToCellNum(e[2]),a=this.coordToCellNum(e[3]),o=[];for(let s=n;s<=i;s++)for(let l=r;l<=a;l++){const u=this.cellPoints(s,l);for(const c of u)o.push(c)}return o}removePoint(e){const n=this.coordToCellNum(e[0]),r=this.coordToCellNum(e[1]),i=this._cells[n][r],a=i.findIndex(([o,s])=>o===e[0]&&s===e[1]);return a>-1&&i.splice(a,1),i}trunc(e){return Math.trunc(e)}coordToCellNum(e){return this.trunc(e*this._reverseCellSize)}extendBbox(e,n){return[e[0]-n*this._cellSize,e[1]-n*this._cellSize,e[2]+n*this._cellSize,e[3]+n*this._cellSize]}}function Pit(t,e){return new Cit(t,e)}const OY=+(Math.pow(2,27)+1);function q1(t,e,n){const r=t*e,i=OY*t,a=i-t,o=i-a,s=t-o,l=OY*e,u=l-e,c=l-u,f=e-c,p=r-o*c-s*c-o*f,g=s*f-p;return n?(n[0]=g,n[1]=r,n):[g,r]}function Dit(t,e,n){const r=t+e,i=r-t,a=r-i,o=e-i,s=t-a;return n[0]=s+o,n[1]=r,n}function Iit(t,e){const n=t.length;if(n===1){const s=q1(t[0],e);return s[0]?s:[s[1]]}const r=new Array(2*n),i=[.1,.1],a=[.1,.1];let o=0;q1(t[0],e,i),i[0]&&(r[o++]=i[0]);for(let s=1;s<n;++s){q1(t[s],e,a);const l=i[1];Dit(l,a[0],i),i[0]&&(r[o++]=i[0]);const u=a[1],c=i[1],f=u+c,d=f-u,h=c-d;i[1]=f,h&&(r[o++]=h)}return i[1]&&(r[o++]=i[1]),o===0&&(r[o++]=0),r.length=o,r}function Lit(t,e){const n=t+e,r=n-t,i=n-r,a=e-r,s=t-i+a;return s?[s,n]:[n]}function Rit(t,e){const n=t.length|0,r=e.length|0;if(n===1&&r===1)return Lit(t[0],-e[0]);const i=n+r,a=new Array(i);let o=0,s=0,l=0;const u=Math.abs;let c=t[s],f=u(c),d=-e[l],h=u(d),p,g;f<h?(g=c,s+=1,s<n&&(c=t[s],f=u(c))):(g=d,l+=1,l<r&&(d=-e[l],h=u(d))),s<n&&f<h||l>=r?(p=c,s+=1,s<n&&(c=t[s],f=u(c))):(p=d,l+=1,l<r&&(d=-e[l],h=u(d)));let v=p+g,m=v-p,y=g-m,b=y,x=v,w,_,E,S,O;for(;s<n&&l<r;)f<h?(p=c,s+=1,s<n&&(c=t[s],f=u(c))):(p=d,l+=1,l<r&&(d=-e[l],h=u(d))),g=b,v=p+g,m=v-p,y=g-m,y&&(a[o++]=y),w=x+v,_=w-x,E=w-_,S=v-_,O=x-E,b=O+S,x=w;for(;s<n;)p=c,g=b,v=p+g,m=v-p,y=g-m,y&&(a[o++]=y),w=x+v,_=w-x,E=w-_,S=v-_,O=x-E,b=O+S,x=w,s+=1,s<n&&(c=t[s]);for(;l<r;)p=d,g=b,v=p+g,m=v-p,y=g-m,y&&(a[o++]=y),w=x+v,_=w-x,E=w-_,S=v-_,O=x-E,b=O+S,x=w,l+=1,l<r&&(d=-e[l]);return b&&(a[o++]=b),x&&(a[o++]=x),o||(a[o++]=0),a.length=o,a}function Nit(t,e){const n=t+e,r=n-t,i=n-r,a=e-r,s=t-i+a;return s?[s,n]:[n]}function Fit(t,e){const n=t.length|0,r=e.length|0;if(n===1&&r===1)return Nit(t[0],e[0]);const i=n+r,a=new Array(i);let o=0,s=0,l=0;const u=Math.abs;let c=t[s],f=u(c),d=e[l],h=u(d),p,g;f<h?(g=c,s+=1,s<n&&(c=t[s],f=u(c))):(g=d,l+=1,l<r&&(d=e[l],h=u(d))),s<n&&f<h||l>=r?(p=c,s+=1,s<n&&(c=t[s],f=u(c))):(p=d,l+=1,l<r&&(d=e[l],h=u(d)));let v=p+g,m=v-p,y=g-m,b=y,x=v,w,_,E,S,O;for(;s<n&&l<r;)f<h?(p=c,s+=1,s<n&&(c=t[s],f=u(c))):(p=d,l+=1,l<r&&(d=e[l],h=u(d))),g=b,v=p+g,m=v-p,y=g-m,y&&(a[o++]=y),w=x+v,_=w-x,E=w-_,S=v-_,O=x-E,b=O+S,x=w;for(;s<n;)p=c,g=b,v=p+g,m=v-p,y=g-m,y&&(a[o++]=y),w=x+v,_=w-x,E=w-_,S=v-_,O=x-E,b=O+S,x=w,s+=1,s<n&&(c=t[s]);for(;l<r;)p=d,g=b,v=p+g,m=v-p,y=g-m,y&&(a[o++]=y),w=x+v,_=w-x,E=w-_,S=v-_,O=x-E,b=O+S,x=w,l+=1,l<r&&(d=e[l]);return b&&(a[o++]=b),x&&(a[o++]=x),o||(a[o++]=0),a.length=o,a}const kY=5,Wx=11102230246251565e-32,zit=(3+16*Wx)*Wx,jit=(7+56*Wx)*Wx;function Bit(t,e,n,r){return function(a,o,s){const l=t(t(e(o[1],s[0]),e(-s[1],o[0])),t(e(a[1],o[0]),e(-o[1],a[0]))),u=t(e(a[1],s[0]),e(-s[1],a[0])),c=r(l,u);return c[c.length-1]}}function $it(t,e,n,r){return function(a,o,s,l){const u=t(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),o[2]),t(n(t(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),l[2]))),t(n(t(e(o[1],l[0]),e(-l[1],o[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),l[2])))),c=t(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),t(n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),s[2])))),f=r(u,c);return f[f.length-1]}}function Vit(t,e,n,r){return function(a,o,s,l,u){const c=t(t(t(n(t(n(t(e(l[1],u[0]),e(-u[1],l[0])),s[2]),t(n(t(e(s[1],u[0]),e(-u[1],s[0])),-l[2]),n(t(e(s[1],l[0]),e(-l[1],s[0])),u[2]))),o[3]),t(n(t(n(t(e(l[1],u[0]),e(-u[1],l[0])),o[2]),t(n(t(e(o[1],u[0]),e(-u[1],o[0])),-l[2]),n(t(e(o[1],l[0]),e(-l[1],o[0])),u[2]))),-s[3]),n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),o[2]),t(n(t(e(o[1],u[0]),e(-u[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),u[2]))),l[3]))),t(n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),o[2]),t(n(t(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),l[2]))),-u[3]),t(n(t(n(t(e(l[1],u[0]),e(-u[1],l[0])),o[2]),t(n(t(e(o[1],u[0]),e(-u[1],o[0])),-l[2]),n(t(e(o[1],l[0]),e(-l[1],o[0])),u[2]))),a[3]),n(t(n(t(e(l[1],u[0]),e(-u[1],l[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-l[2]),n(t(e(a[1],l[0]),e(-l[1],a[0])),u[2]))),-o[3])))),t(t(n(t(n(t(e(o[1],u[0]),e(-u[1],o[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),u[2]))),l[3]),t(n(t(n(t(e(o[1],l[0]),e(-l[1],o[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),-u[3]),n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),o[2]),t(n(t(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),l[2]))),a[3]))),t(n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),-o[3]),t(n(t(n(t(e(o[1],l[0]),e(-l[1],o[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),s[3]),n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),s[2]))),-l[3]))))),f=t(t(t(n(t(n(t(e(l[1],u[0]),e(-u[1],l[0])),s[2]),t(n(t(e(s[1],u[0]),e(-u[1],s[0])),-l[2]),n(t(e(s[1],l[0]),e(-l[1],s[0])),u[2]))),a[3]),n(t(n(t(e(l[1],u[0]),e(-u[1],l[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-l[2]),n(t(e(a[1],l[0]),e(-l[1],a[0])),u[2]))),-s[3])),t(n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),u[2]))),l[3]),n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),-u[3]))),t(t(n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),o[2]),t(n(t(e(o[1],u[0]),e(-u[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),u[2]))),a[3]),n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),u[2]))),-o[3])),t(n(t(n(t(e(o[1],u[0]),e(-u[1],o[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),u[2]))),s[3]),n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),s[2]))),-u[3])))),d=r(c,f);return d[d.length-1]}}function y_(t){return(t===3?Bit:t===4?$it:Vit)(Fit,q1,Iit,Rit)}const qit=y_(3),Wit=y_(4),lf=[function(){return 0},function(){return 0},function(e,n){return n[0]-e[0]},function(e,n,r){const i=(e[1]-r[1])*(n[0]-r[0]),a=(e[0]-r[0])*(n[1]-r[1]),o=i-a;let s;if(i>0){if(a<=0)return o;s=i+a}else if(i<0){if(a>=0)return o;s=-(i+a)}else return o;const l=zit*s;return o>=l||o<=-l?o:qit(e,n,r)},function(e,n,r,i){const a=e[0]-i[0],o=n[0]-i[0],s=r[0]-i[0],l=e[1]-i[1],u=n[1]-i[1],c=r[1]-i[1],f=e[2]-i[2],d=n[2]-i[2],h=r[2]-i[2],p=o*c,g=s*u,v=s*l,m=a*c,y=a*u,b=o*l,x=f*(p-g)+d*(v-m)+h*(y-b),w=(Math.abs(p)+Math.abs(g))*Math.abs(f)+(Math.abs(v)+Math.abs(m))*Math.abs(d)+(Math.abs(y)+Math.abs(b))*Math.abs(h),_=jit*w;return x>_||-x>_?x:Wit(e,n,r,i)}];function Git(t){let e=lf[t.length];return e||(e=lf[t.length]=y_(t.length)),e.apply(void 0,...t)}function Hit(t,e,n,r,i,a,o){return function(...l){switch(l.length){case 0:case 1:return 0;case 2:return r(l[0],l[1]);case 3:return i(l[0],l[1],l[2]);case 4:return a(l[0],l[1],l[2],l[3]);case 5:return o(l[0],l[1],l[2],l[3],l[4])}return t(l)}}function Yit(){for(;lf.length<=kY;)lf.push(y_(lf.length));const t=Hit(void 0,Git,...lf);for(let e=0;e<=kY;++e)t[e]=lf[e];return t}const Vg=Yit(),AY=Vg[3];function Uit(t){const e=t.length;if(e<3){const s=new Array(e);for(let l=0;l<e;++l)s[l]=l;return e===2&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:s}const n=new Array(e);for(let s=0;s<e;++s)n[s]=s;n.sort((s,l)=>{const u=t[s][0]-t[l][0];return u||t[s][1]-t[l][1]});const r=[n[0],n[1]],i=[n[0],n[1]];for(let s=2;s<e;++s){const l=n[s],u=t[l];let c=r.length;for(;c>1&&AY(t[r[c-2]],t[r[c-1]],u)<=0;)c-=1,r.pop();for(r.push(l),c=i.length;c>1&&AY(t[i[c-2]],t[i[c-1]],u)>=0;)c-=1,i.pop();i.push(l)}const a=new Array(i.length+r.length-2);let o=0;for(let s=0,l=r.length;s<l;++s)a[o++]=r[s];for(let s=i.length-2;s>0;--s)a[o++]=i[s];return a}function Xit(t,e,n,r){for(let i=0;i<2;++i){const a=t[i],o=e[i],[s,l]=[Math.min(a,o),Math.max(a,o)],u=n[i],c=r[i],[f,d]=[Math.min(u,c),Math.max(u,c)];if(d<s||l<f)return!1}return!0}function Zit(t,e,n,r){const i=Vg(t,n,r),a=Vg(e,n,r);if(i>0&&a>0||i<0&&a<0)return!1;const o=Vg(n,t,e),s=Vg(r,t,e);return o>0&&s>0||o<0&&s<0?!1:i===0&&a===0&&o===0&&s===0?Xit(t,e,n,r):!0}function Kit(t){const e=[t[0]];let n=t[0];for(let r=1;r<t.length;r++){const i=t[r];(n[0]!==i[0]||n[1]!==i[1])&&e.push(i),n=i}return e}function Jit(t){return t.sort(function(e,n){return e[0]-n[0]||e[1]-n[1]})}function ED(t,e){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function TY(t,e,n){const r=[e[0]-t[0],e[1]-t[1]],i=[n[0]-t[0],n[1]-t[1]],a=ED(t,e),o=ED(t,n);return(r[0]*i[0]+r[1]*i[1])/Math.sqrt(a*o)}function MY(t,e){for(let n=0;n<e.length-1;n++){const r=[e[n],e[n+1]];if(!(t[0][0]===r[0][0]&&t[0][1]===r[0][1]||t[0][0]===r[1][0]&&t[0][1]===r[1][1])&&Zit(t[0],t[1],r[0],r[1]))return!0}return!1}function Qit(t){let e=1/0,n=1/0,r=-1/0,i=-1/0;for(let a=t.length-1;a>=0;a--)t[a][0]<e&&(e=t[a][0]),t[a][1]<n&&(n=t[a][1]),t[a][0]>r&&(r=t[a][0]),t[a][1]>i&&(i=t[a][1]);return[r-e,i-n]}function eat(t){return[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1]),Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]}function tat(t,e,n){let r=null,i=CY,a=CY,o,s;for(let l=0;l<e.length;l++)o=TY(t[0],t[1],e[l]),s=TY(t[1],t[0],e[l]),o>i&&s>a&&!MY([t[0],e[l]],n)&&!MY([t[1],e[l]],n)&&(i=o,a=s,r=e[l]);return r}function Sfe(t,e,n,r,i){let a=!1;for(let o=0;o<t.length-1;o++){const s=[t[o],t[o+1]],l=s[0][0]+","+s[0][1]+","+s[1][0]+","+s[1][1];if(ED(s[0],s[1])<e||i.has(l))continue;let u=0,c=eat(s),f,d,h;do c=r.extendBbox(c,u),f=c[2]-c[0],d=c[3]-c[1],h=tat(s,r.rangePoints(c),t),u++;while(h===null&&(n[0]>f||n[1]>d));f>=n[0]&&d>=n[1]&&i.add(l),h!==null&&(t.splice(o+1,0,h),r.removePoint(h),a=!0)}return a?Sfe(t,e,n,r,i):t}function nat(t,e,n){const r=e||20,i=Kit(Jit(lC.toXy(t,n)));if(i.length<4){const f=i.concat([i[0]]);return n?lC.fromXy(f,n):f}const a=Qit(i),o=[a[0]*PY,a[1]*PY],s=Uit(i).reverse().map(f=>i[f]);s.push(s[0]);const l=i.filter(function(f){return s.indexOf(f)<0}),u=Math.ceil(1/(i.length/(a[0]*a[1]))),c=Sfe(s,Math.pow(r,2),o,Pit(l,u),new Set);return n?lC.fromXy(c,n):c}const CY=Math.cos(90/(180/Math.PI)),PY=.6;function rat(t,e,n){if(t.length===1)return iat(t[0],e,n);if(t.length===2)return DY(t,e,n);if(t.length===3){const[r,i,a]=s4(t);if(lue(r,i,a))return DY([r,a],e,n)}switch(n){case"smooth":return oat(t,e);case"sharp":return sat(t,e);case"rounded":default:return aat(t,e)}}const iat=(t,e,n)=>{if(n==="sharp")return[["M",t[0]-e,t[1]-e],["L",t[0]+e,t[1]-e],["L",t[0]+e,t[1]+e],["L",t[0]-e,t[1]+e],["Z"]];const r=[e,e,0,0,0];return[["M",t[0],t[1]-e],["A",...r,t[0],t[1]+e],["A",...r,t[0],t[1]-e]]},DY=(t,e,n)=>{const r=[e,e,0,0,0],i=n==="sharp"?kt(t[0],Qu(eu(In(t[0],t[1])),e)):t[0],a=n==="sharp"?kt(t[1],Qu(eu(In(t[1],t[0])),e)):t[1],o=Qu(eu(vw(In(i,a),!1)),e),s=Qu(o,-1),l=kt(i,o),u=kt(a,o),c=kt(a,s),f=kt(i,s);return n==="sharp"?[["M",l[0],l[1]],["L",u[0],u[1]],["L",c[0],c[1]],["L",f[0],f[1]],["Z"]]:[["M",l[0],l[1]],["L",u[0],u[1]],["A",...r,c[0],c[1]],["L",f[0],f[1]],["A",...r,l[0],l[1]]]},aat=(t,e)=>{const n=s4(t).map((s,l)=>{const u=(l-2+t.length)%t.length,c=(l-1+t.length)%t.length,f=(l+1)%t.length,d=t[u],h=t[c],p=t[f],g=In(d,h),v=In(h,s),m=In(s,p),y=(E,S)=>a4(E,S,!0)<Math.PI,b=y(g,v),x=y(v,m),w=E=>Qu(eu(vw(E,!1)),e),_=w(v);return[{p:Qf(b?kt(h,w(g)):kt(h,_)),concave:b&&h},{p:Qf(x?kt(s,w(m)):kt(s,_)),concave:x&&s}]}),r=[e,e,0,0,0],i=n.findIndex((s,l)=>!n[(l-1+n.length)%n.length][0].concave&&!n[(l-1+n.length)%n.length][1].concave&&!s[0].concave&&!s[0].concave&&!s[1].concave),a=n.slice(i).concat(n.slice(0,i));let o=[];return a.flatMap((s,l)=>{const u=[],c=a[n.length-1];return l===0&&u.push(["M",...c[1].p]),s[0].concave?o.push(s[0].p,s[1].p):u.push(["A",...r,...s[0].p]),s[1].concave?o.unshift(s[1].p):u.push(["L",...s[1].p]),o.length===3&&(u.pop(),u.push(["C",...o.flat()]),o=[]),u})},oat=(t,e)=>{const n=s4(t).map((r,i)=>{const a=t[(i+1)%t.length];return{p:r,v:eu(In(a,r))}});return n.forEach((r,i)=>{const a=i>0?i-1:t.length-1,o=n[a].v,s=eu(kt(o,Qu(r.v,a4(o,r.v,!0)<Math.PI?1:-1)));r.p=kt(r.p,Qu(s,e))}),mue(n.map(r=>r.p))},sat=(t,e)=>{const r=t.map((a,o)=>{const s=t[o===0?t.length-1:o-1],l=uv(Qu(eu(vw(In(s,a),!1)),e));return[kt(s,l),kt(a,l)]}).flat();return r.map((a,o)=>{if(o%2===0)return null;const s=[r[(o-1)%r.length],r[o%r.length]],l=[r[(o+1)%r.length],r[(o+2)%r.length]];return o4(s,l,!0)}).filter(Boolean).map((a,o)=>[o===0?"M":"L",a[0],a[1]]).concat([["Z"]])};var lat=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class b_ extends Xi{constructor(e,n){super(e,Object.assign({},b_.defaultOptions,n)),this.hullMemberIds=[],this.drawHull=()=>{if(!this.shape)this.shape=new sm({style:this.getHullStyle()}),this.context.canvas.appendChild(this.shape);else{const r=!br(this.optionsCache,this.options);this.shape.update(this.getHullStyle(r))}this.optionsCache=Object.assign({},this.options)},this.updateHullPath=r=>{this.shape&&this.options.members.includes(ce(r.data))&&this.shape.update({d:this.getHullPath(!0)})},this.getHullPath=(r=!1)=>{const{graph:i}=this.context,a=this.getMember();if(a.length===0)return"";const o=a.map(u=>i.getNodeData(u)),s=nat(o.map(Yr),this.options.concavity).slice(1).reverse(),l=s.flatMap(u=>o.filter(c=>br(Yr(c),u)).map(ce));return br(l,this.hullMemberIds)&&!r?this.path:(this.hullMemberIds=l,this.path=rat(s,this.getPadding(),this.options.corner),this.path)},this.bindEvents()}bindEvents(){this.context.graph.on(Le.AFTER_RENDER,this.drawHull),this.context.graph.on(Le.AFTER_ELEMENT_UPDATE,this.updateHullPath)}getHullStyle(e){const n=this.options,r=lat(n,["members","padding","corner"]);return Object.assign(Object.assign({},r),{d:this.getHullPath(e)})}getPadding(){const{graph:e}=this.context;return this.hullMemberIds.reduce((r,i)=>{const{halfExtents:a}=e.getElementRenderBounds(i),o=Math.max(a[0],a[1]);return Math.max(r,o)},0)+this.options.padding}addMember(e){const n=Array.isArray(e)?e:[e];this.options.members=[...new Set([...this.options.members,...n])],this.shape.update({d:this.getHullPath()})}removeMember(e){const n=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter(r=>!n.includes(r)),n.some(r=>this.hullMemberIds.includes(r))&&this.shape.update({d:this.getHullPath()})}updateMember(e){this.options.members=Ue(e)?e(this.options.members):e,this.shape.update(this.getHullStyle(!0))}getMember(){return this.options.members}destroy(){this.context.graph.off(Le.AFTER_DRAW,this.drawHull),this.shape.destroy(),this.hullMemberIds=[],super.destroy()}}b_.defaultOptions={members:[],padding:10,corner:"rounded",concavity:1/0,fill:"lightblue",fillOpacity:.2,labelOpacity:1,stroke:"blue",strokeOpacity:.2};function B4(t){const{width:e,height:n,renderer:r}=t,i=uat(t),a=new V0({width:e,height:n,container:i,renderer:r||new Hf});return[i,a]}function uat(t){var e;const{container:n,className:r,graphCanvas:i}=t;if(n)return typeof n=="string"?document.getElementById(n):n;const a=Fp(r,!1),{width:o,height:s,containerStyle:l}=t,[u,c]=cat(t);return Object.assign(a.style,Object.assign({position:"absolute",left:u+"px",top:c+"px",width:o+"px",height:s+"px"},l)),(e=i.getContainer())===null||e===void 0||e.appendChild(a),a}function cat(t){const{width:e,height:n,placement:r,graphCanvas:i}=t,[a,o]=i.getSize(),[s,l]=oue(r);return[s*(a-e),l*(o-n)]}var fat=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class x_ extends Xi{constructor(e,n){super(e,Object.assign({},x_.defaultOptions,n)),this.typePrefix="__data__",this.draw=!1,this.fieldMap={node:new Map,edge:new Map,combo:new Map},this.selectedItems=[],this.bindEvents=()=>{const{graph:r}=this.context;r.on(Le.AFTER_DRAW,this.createElement)},this.changeState=(r,i)=>{const{graph:a}=this.context,{typePrefix:o}=this,s=qt(r,[o,"id"]),l=qt(r,[o,"style","labelText"]),[u]=s.split("__"),c=this.fieldMap[u].get(l)||[];a.setElementState(Object.fromEntries(c==null?void 0:c.map(f=>[f,i])))},this.click=r=>{if(this.options.trigger==="hover")return;const i=qt(r,[this.typePrefix,"id"]);this.selectedItems.includes(i)?(this.selectedItems=this.selectedItems.filter(a=>a!==i),this.changeState(r,[])):(this.selectedItems.push(i),this.changeState(r,"selected"))},this.mouseleave=r=>{this.options.trigger!=="click"&&(this.selectedItems=[],this.changeState(r,[]))},this.mouseenter=r=>{if(this.options.trigger==="click")return;const i=qt(r,[this.typePrefix,"id"]);this.selectedItems.includes(i)?this.selectedItems=this.selectedItems.filter(a=>a!==i):(this.selectedItems.push(i),this.changeState(r,"active"))},this.setFieldMap=(r,i,a)=>{if(!r)return;const o=this.fieldMap[a];if(o)if(!o.has(r))o.set(r,[i]);else{const s=o.get(r);s&&(s.push(i),o.set(r,s))}},this.getEvents=()=>({mouseenter:this.mouseenter,mouseleave:this.mouseleave,click:this.click}),this.getMarkerData=(r,i)=>{if(!r)return[];const{model:a,element:o}=this.context,{nodes:s,edges:l,combos:u}=a.getData(),c={},f=v=>Ue(r)?r(v):r,d={node:"circle",edge:"line",combo:"rect"},h={circle:"circle",ellipse:"circle",image:"bowtie",rect:"square",star:"cross",triangle:"triangle",diamond:"diamond",cubic:"dot",line:"hyphen",polyline:"hyphen",quadratic:"hv","cubic-horizontal":"hyphen","cubic-vertical":"line"},p=(v,m)=>o==null?void 0:o.getElementComputedStyle(v,m),g=(v,m)=>{v.forEach(y=>{const{id:b}=y,x=qt(y,["data",f(y)]),w=(o==null?void 0:o.getElementType(m,y))||"circle",_=p(m,y),E=(m==="edge"?_==null?void 0:_.stroke:_==null?void 0:_.fill)||"#1783ff";b&&x&&x.replace(/\s+/g,"")&&(this.setFieldMap(x,b,m),c[x]||(c[x]={id:`${m}__${b}`,label:x,marker:h[w]||d[m],elementType:m,lineWidth:1,stroke:E,fill:E}))})};switch(i){case"node":g(s,"node");break;case"edge":g(l,"edge");break;case"combo":g(u,"combo");break;default:return[]}return Object.values(c)},this.createElement=()=>{if(this.draw){this.updateElement();return}const r=this.options,{width:i,height:a,nodeField:o,edgeField:s,comboField:l,trigger:u,position:c,container:f,containerStyle:d,className:h}=r,p=fat(r,["width","height","nodeField","edgeField","comboField","trigger","position","container","containerStyle","className"]),g=this.getMarkerData(o,"node"),v=this.getMarkerData(s,"edge"),m=this.getMarkerData(l,"combo"),y=[...g,...m,...v],b=Object.assign({width:i,height:a,data:y,itemMarkerLineWidth:({lineWidth:_})=>_,itemMarker:({marker:_})=>_,itemMarkerStroke:({stroke:_})=>_,itemMarkerFill:({fill:_})=>_,gridCol:g.length},p,this.getEvents()),x=new Lne({className:"legend",style:b});this.category=x,this.upsertCanvas().appendChild(x),this.draw=!0},this.bindEvents()}update(e){super.update(e),this.clear(),this.createElement()}clear(){var e,n;(e=this.canvas)===null||e===void 0||e.destroy(),(n=this.container)===null||n===void 0||n.remove(),this.canvas=void 0,this.container=void 0,this.draw=!1}updateElement(){this.category&&this.category.update({itemMarkerOpacity:({id:e})=>!this.selectedItems.length||this.selectedItems.includes(e)?1:.5,itemLabelOpacity:({id:e})=>!this.selectedItems.length||this.selectedItems.includes(e)?1:.5})}upsertCanvas(){if(this.canvas)return this.canvas;const e=this.context.canvas,[n,r]=e.getSize(),{width:i=n,height:a=r,position:o,container:s,containerStyle:l,className:u}=this.options,[c,f]=B4({width:i,height:a,graphCanvas:e,container:s,containerStyle:l,placement:o,className:"legend"});return this.container=c,u&&c.classList.add(u),this.canvas=f,this.canvas}destroy(){this.clear(),this.context.graph.off(Le.AFTER_DRAW,this.createElement),super.destroy()}}x_.defaultOptions={position:"bottom",trigger:"hover",orientation:"horizontal",layout:"flex",itemSpacing:4,rowPadding:10,colPadding:10,itemMarkerSize:16,itemLabelFontSize:16,width:240,height:160};class w_ extends Xi{constructor(e,n){super(e,Object.assign({},w_.defaultOptions,n)),this.onDraw=r=>{var i;!((i=r==null?void 0:r.data)===null||i===void 0)&&i.render||this.onRender()},this.shapes=new Map,this.landmarkMap=new Map,this.mask=null,this.isMaskDragging=!1,this.onMaskDragStart=r=>{this.mask&&(this.isMaskDragging=!0,this.mask.setPointerCapture(r.pointerId),this.mask.addEventListener("pointermove",this.onMaskDrag),this.mask.addEventListener("pointerup",this.onMaskDragEnd),this.mask.addEventListener("pointercancel",this.onMaskDragEnd))},this.onMaskDrag=r=>{if(!this.mask||!this.isMaskDragging)return;const{size:[i,a]}=this.options,{movementX:o,movementY:s}=r,{left:l,top:u,width:c,height:f}=this.mask.style,[,,d,h]=this.maskBBox;let p=parseInt(l)+o,g=parseInt(u)+s,v=parseInt(c),m=parseInt(f);p<0&&(p=0),g<0&&(g=0),p+v>i&&(p=Eu(i-v,0)),g+m>a&&(g=Eu(a-m,0)),v<d&&(o>0?(p=Eu(p-o,0),v=Su(v+o,i)):o<0&&(v=Su(v-o,i))),m<h&&(s>0?(g=Eu(g-s,0),m=Su(m+s,a)):s<0&&(m=Su(m-s,a))),Object.assign(this.mask.style,{left:p+"px",top:g+"px",width:v+"px",height:m+"px"});const y=parseInt(l)-p,b=parseInt(u)-g;if(y===0&&b===0)return;const x=this.context.canvas.getCamera().getZoom(),w=this.canvas.getCamera().getZoom(),_=x/w;this.context.graph.translateBy([y*_,b*_],!1)},this.onMaskDragEnd=r=>{this.mask&&(this.isMaskDragging=!1,this.mask.releasePointerCapture(r.pointerId),this.mask.removeEventListener("pointermove",this.onMaskDrag),this.mask.removeEventListener("pointerup",this.onMaskDragEnd),this.mask.removeEventListener("pointercancel",this.onMaskDragEnd))},this.onTransform=ou(()=>{this.isMaskDragging||(this.updateMask(),this.setCamera())},32,{leading:!0}),this.setOnRender(),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),"delay"in e&&this.setOnRender(),this.bindEvents()}setOnRender(){this.onRender=gp(()=>{this.renderMinimap(),this.renderMask()},this.options.delay)}bindEvents(){const{graph:e}=this.context;e.on(Le.AFTER_DRAW,this.onDraw),e.on(Le.AFTER_RENDER,this.onRender),e.on(Le.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:e}=this.context;e.off(Le.AFTER_DRAW,this.onDraw),e.off(Le.AFTER_RENDER,this.onRender),e.off(Le.AFTER_TRANSFORM,this.onTransform)}renderMinimap(){const e=this.getElements(),n=this.initCanvas();this.setShapes(n,e)}getElements(){const{filter:e}=this.options,{model:n}=this.context,r=n.getData();if(!e)return r;const{nodes:i,edges:a,combos:o}=r;return{nodes:i.filter(s=>e(ce(s),"node")),edges:a.filter(s=>e(ce(s),"edge")),combos:o.filter(s=>e(ce(s),"combo"))}}setShapes(e,n){const{nodes:r,edges:i,combos:a}=n,{shape:o}=this.options,{element:s}=this.context;if(o==="key"){const u=new Set,c=f=>{const d=ce(f);u.add(d);const h=s.getElement(d);if(!h)return;const p=h.getShape("key"),g=this.shapes.get(d)||p.cloneNode();g.setPosition(p.getPosition()),h.style.zIndex&&(g.style.zIndex=h.style.zIndex),g.id=h.id,this.shapes.has(d)?Object.entries(p.attributes).forEach(([v,m])=>{g.style[v]!==m&&(g.style[v]=m)}):(e.appendChild(g),this.shapes.set(d,g))};i.forEach(c),a.forEach(c),r.forEach(c),this.shapes.forEach((f,d)=>{u.has(d)||(e.removeChild(f),this.shapes.delete(d))});return}const l=(u,c)=>{const d=s.getElement(u).getPosition();return c.setPosition(d),c};e.removeChildren(),i.forEach(u=>e.appendChild(o(ce(u),"edge"))),a.forEach(u=>{e.appendChild(l(ce(u),o(ce(u),"combo")))}),r.forEach(u=>{e.appendChild(l(ce(u),o(ce(u),"node")))})}initCanvas(){const{renderer:e,size:[n,r]}=this.options;if(this.canvas){const{width:i,height:a}=this.canvas.getConfig();(n!==i||r!==a)&&this.canvas.resize(n,r),e&&this.canvas.setRenderer(e)}else{const{className:i,position:a,container:o,containerStyle:s}=this.options,[l,u]=B4({renderer:e,width:n,height:r,placement:a,className:"minimap",container:o,containerStyle:s,graphCanvas:this.context.canvas});i&&l.classList.add(i),this.container=l,this.canvas=u}return this.setCamera(),this.canvas}createLandmark(e,n,r){const i=`${e.join(",")}-${n.join(",")}-${r}`;if(this.landmarkMap.has(i))return this.landmarkMap.get(i);const o=this.canvas.getCamera().createLandmark(i,{position:e,focalPoint:n,zoom:r});return this.landmarkMap.set(i,o),o}setCamera(){var e;const{canvas:n}=this.context,r=(e=this.canvas)===null||e===void 0?void 0:e.getCamera();if(!r)return;const{size:[i,a],padding:o}=this.options,[s,l,u,c]=kl(o),{min:f,max:d,center:h}=n.getBounds("elements"),p=d[0]-f[0],g=d[1]-f[1],v=i-c-l,m=a-s-u,y=v/p,b=m/g,x=Math.min(y,b),w=this.createLandmark(h,h,x);r.gotoLandmark(w,0)}get maskBBox(){const{canvas:e}=this.context,n=e.getSize(),r=e.getCanvasByViewport([0,0]),i=e.getCanvasByViewport(n),a=this.canvas.canvas2Viewport(vs(r)),o=this.canvas.canvas2Viewport(vs(i)),s=o.x-a.x,l=o.y-a.y;return[a.x,a.y,s,l]}calculateMaskBBox(){const{size:[e,n]}=this.options;let[r,i,a,o]=this.maskBBox;return r<0&&(a=Su(a+r,e),r=0),i<0&&(o=Su(o+i,n),i=0),r+a>e&&(a=Eu(e-r,0)),i+o>n&&(o=Eu(n-i,0)),[Su(r,e),Su(i,n),Eu(a,0),Eu(o,0)]}renderMask(){const{maskStyle:e}=this.options;this.mask||(this.mask=document.createElement("div"),this.mask.addEventListener("pointerdown",this.onMaskDragStart),this.mask.draggable=!0,this.mask.addEventListener("dragstart",n=>n.preventDefault&&n.preventDefault())),this.container.appendChild(this.mask),Object.assign(this.mask.style,Object.assign(Object.assign({},e),{cursor:"move",position:"absolute",pointerEvents:"auto"})),this.updateMask()}updateMask(){if(!this.mask)return;const[e,n,r,i]=this.calculateMaskBBox();Object.assign(this.mask.style,{top:n+"px",left:e+"px",width:r+"px",height:i+"px"})}destroy(){var e;this.unbindEvents(),this.canvas.destroy(),(e=this.mask)===null||e===void 0||e.remove(),super.destroy()}}w_.defaultOptions={size:[240,160],shape:"key",padding:10,position:"right-bottom",maskStyle:{border:"1px solid #ddd",background:"rgba(0, 0, 0, 0.1)"},containerStyle:{border:"1px solid #ddd",background:"#fff"},delay:128};const Su=(t,e)=>Math.min(t,e),Eu=(t,e)=>Math.max(t,e);var uC=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};const cC={x1:0,y1:0,x2:0,y2:0,visibility:"hidden"};class __ extends Xi{constructor(e,n){super(e,Object.assign({},__.defaultOptions,n)),this.initSnapline=()=>{const r=this.context.canvas.getLayer("transient");this.horizontalLine||(this.horizontalLine=r.appendChild(new Es({style:Object.assign(Object.assign({},cC),this.options.horizontalLineStyle)}))),this.verticalLine||(this.verticalLine=r.appendChild(new Es({style:Object.assign(Object.assign({},cC),this.options.verticalLineStyle)})))},this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!0,this.autoSnapToLine=(r,i,a)=>uC(this,void 0,void 0,function*(){const{verticalX:o,horizontalY:s}=a,{tolerance:l}=this.options,{min:[u,c],max:[f,d],center:[h,p]}=i;let g=0,v=0;o!==null&&(Qi(f,o)<l&&(g=o-f),Qi(u,o)<l&&(g=o-u),Qi(h,o)<l&&(g=o-h),g!==0&&(this.isVerticalSticking=!0)),s!==null&&(Qi(d,s)<l&&(v=s-d),Qi(c,s)<l&&(v=s-c),Qi(p,s)<l&&(v=s-p),v!==0&&(this.isHorizontalSticking=!0)),(g!==0||v!==0)&&(yield this.context.graph.translateElementBy({[r]:[g,v]},!1))}),this.enableSnap=r=>{const{target:i}=r,a=.5;if(this.isHorizontalSticking||this.isVerticalSticking){const[o,s]=this.getDelta(r);if(this.isHorizontalSticking&&this.isVerticalSticking&&Math.abs(o)<=a&&Math.abs(s)<=a)return this.context.graph.translateElementBy({[i.id]:[-o,-s]},!1),!1;if(this.isHorizontalSticking&&Math.abs(s)<=a)return this.context.graph.translateElementBy({[i.id]:[0,-s]},!1),!1;if(this.isVerticalSticking&&Math.abs(o)<=a)return this.context.graph.translateElementBy({[i.id]:[-o,0]},!1),!1;this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!1,setTimeout(()=>{this.enableStick=!0},200)}return this.enableStick},this.calcSnaplineMetadata=(r,i)=>{const{tolerance:a,shape:o}=this.options,{min:[s,l],max:[u,c],center:[f,d]}=i;let h=null,p=null,g=null,v=null,m=null,y=null;return this.getNodes().some(b=>{if(br(r.id,b.id))return!1;const x=IY(b,o).getRenderBounds(),{min:[w,_],max:[E,S],center:[O,A]}=x;return h===null&&(Qi(O,f)<a?h=O:Qi(w,s)<a||Qi(w,u)<a?h=w:(Qi(E,u)<a||Qi(E,s)<a)&&(h=E),h!==null&&(p=Math.min(_,l),g=Math.max(S,c))),v===null&&(Qi(A,d)<a?v=A:Qi(_,l)<a||Qi(_,c)<a?v=_:(Qi(S,c)<a||Qi(S,l)<a)&&(v=S),v!==null&&(m=Math.min(w,s),y=Math.max(E,u))),h!==null&&v!==null}),{verticalX:h,verticalMinY:p,verticalMaxY:g,horizontalY:v,horizontalMinX:m,horizontalMaxX:y}},this.onDragStart=()=>{this.initSnapline()},this.onDrag=r=>uC(this,void 0,void 0,function*(){const{target:i}=r;if(this.options.autoSnap&&!this.enableSnap(r))return;const a=IY(i,this.options.shape).getRenderBounds(),o=this.calcSnaplineMetadata(i,a);this.hideSnapline(),(o.verticalX!==null||o.horizontalY!==null)&&this.updateSnapline(o),this.options.autoSnap&&(yield this.autoSnapToLine(i.id,a,o))}),this.onDragEnd=()=>{this.hideSnapline()},this.bindEvents()}getNodes(){var e;const{filter:n}=this.options,i=(((e=this.context.element)===null||e===void 0?void 0:e.getNodes())||[]).filter(a=>{var o;return OZe(a)&&((o=this.context.viewport)===null||o===void 0?void 0:o.isInViewport(a.getRenderBounds()))});return n?i.filter(a=>n(a)):i}hideSnapline(){this.horizontalLine.style.visibility="hidden",this.verticalLine.style.visibility="hidden"}getLineWidth(e){const{lineWidth:n}=this.options[`${e}LineStyle`];return+(n||cC.lineWidth||1)/this.context.graph.getZoom()}updateSnapline(e){const{verticalX:n,verticalMinY:r,verticalMaxY:i,horizontalY:a,horizontalMinX:o,horizontalMaxX:s}=e,[l,u]=this.context.canvas.getSize(),{offset:c}=this.options;a!==null?Object.assign(this.horizontalLine.style,{x1:c===1/0?0:o-c,y1:a,x2:c===1/0?l:s+c,y2:a,visibility:"visible",lineWidth:this.getLineWidth("horizontal")}):this.horizontalLine.style.visibility="hidden",n!==null?Object.assign(this.verticalLine.style,{x1:n,y1:c===1/0?0:r-c,x2:n,y2:c===1/0?u:i+c,visibility:"visible",lineWidth:this.getLineWidth("vertical")}):this.verticalLine.style.visibility="hidden"}getDelta(e){const n=this.context.graph.getZoom();return As([e.dx,e.dy],n)}bindEvents(){return uC(this,void 0,void 0,function*(){const{graph:e}=this.context;e.on(Ao.DRAG_START,this.onDragStart),e.on(Ao.DRAG,this.onDrag),e.on(Ao.DRAG_END,this.onDragEnd)})}unbindEvents(){const{graph:e}=this.context;e.off(Ao.DRAG_START,this.onDragStart),e.off(Ao.DRAG,this.onDrag),e.off(Ao.DRAG_END,this.onDragEnd)}destroyElements(){var e,n;(e=this.horizontalLine)===null||e===void 0||e.destroy(),(n=this.verticalLine)===null||n===void 0||n.destroy()}destroy(){this.destroyElements(),this.unbindEvents(),super.destroy()}}__.defaultOptions={tolerance:5,offset:20,autoSnap:!0,shape:"key",verticalLineStyle:{stroke:"#1783FF"},horizontalLineStyle:{stroke:"#1783FF"},filter:()=>!0};const Qi=(t,e)=>Math.abs(t-e),IY=(t,e)=>typeof e=="function"?e(t):t.getShape(e);var dat=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},hat=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const pat=["timestamp","time","date","datetime"];class S_ extends Xi{get padding(){return kl(this.options.padding)}constructor(e,n){super(e,Object.assign({},S_.defaultOptions,n)),this.backup(),this.upsertTimebar()}play(){var e;(e=this.timebar)===null||e===void 0||e.play()}pause(){var e;(e=this.timebar)===null||e===void 0||e.pause()}forward(){var e;(e=this.timebar)===null||e===void 0||e.forward()}backward(){var e;(e=this.timebar)===null||e===void 0||e.backward()}reset(){var e;(e=this.timebar)===null||e===void 0||e.reset()}update(e){super.update(e),this.backup(),this.upsertTimebar()}backup(){this.originalData=LY(this.context.graph.getData())}upsertTimebar(){const{canvas:e}=this.context,n=this.options,{onChange:r,timebarType:i,data:a,x:o,y:s,width:l,height:u,mode:c}=n,f=hat(n,["onChange","timebarType","data","x","y","width","height","mode"]),d=e.getSize(),[h]=this.padding;this.upsertCanvas().ready.then(()=>{var p;const g=Object.assign(Object.assign({x:d[0]/2-l/2,y:h,onChange:v=>{const m=(wi(v)?v:[v,v]).map(y=>VOe(y)?y.getTime():y);this.options.mode==="modify"?this.filterElements(m):this.hiddenElements(m),r==null||r(m)}},f),{data:a.map(v=>je(v)?{time:v,value:0}:v),width:l,height:u,type:i});this.timebar?this.timebar.update(g):(this.timebar=new L4e({style:g}),(p=this.canvas)===null||p===void 0||p.appendChild(this.timebar))})}upsertCanvas(){if(this.canvas)return this.canvas;const{className:e,height:n,position:r}=this.options,i=this.context.canvas,[a]=i.getSize(),[o,,s]=this.padding,[l,u]=B4({width:a,height:n+o+s,graphCanvas:i,className:"timebar",placement:r});return this.container=l,e&&l.classList.add(e),this.canvas=u,this.canvas}filterElements(e){return dat(this,void 0,void 0,function*(){var n;if(!this.originalData)return;const{elementTypes:r,getTime:i}=this.options,{graph:a,element:o}=this.context,s=LY(this.originalData);r.forEach(u=>{const c=`${u}s`;s[c]=(this.originalData[c]||[]).filter(f=>{const d=i(f);return!!RY(d,e)})});const l=[...s.nodes,...s.combos].map(u=>ce(u));s.edges=s.edges.filter(u=>{const c=u.source,f=u.target;return l.includes(c)&&l.includes(f)}),a.setData(s),yield(n=o.draw({animation:!1,silence:!0}))===null||n===void 0?void 0:n.finished})}hiddenElements(e){const{graph:n}=this.context,{elementTypes:r,getTime:i}=this.options,a=[],o=[];r.forEach(s=>{var l;const u=`${s}s`;(((l=this.originalData)===null||l===void 0?void 0:l[u])||[]).forEach(f=>{const d=ce(f),h=i(f);RY(h,e)?o.push(d):a.push(d)})}),n.hideElement(a,!1),n.showElement(o,!1)}destroy(){var e,n,r;const{graph:i}=this.context;this.originalData&&i.setData(Object.assign({},this.originalData)),(e=this.timebar)===null||e===void 0||e.destroy(),(n=this.canvas)===null||n===void 0||n.destroy(),(r=this.container)===null||r===void 0||r.remove(),this.originalData=void 0,this.container=void 0,this.timebar=void 0,this.canvas=void 0,super.destroy()}}S_.defaultOptions={position:"bottom",enable:!0,timebarType:"time",className:"g6-timebar",width:450,height:60,zIndex:3,elementTypes:["node"],padding:10,mode:"modify",getTime:t=>gat(t,pat,void 0),loop:!1};const LY=t=>{const{nodes:e=[],edges:n=[],combos:r=[]}=t;return{nodes:[...e],edges:[...n],combos:[...r]}},RY=(t,e)=>{if(je(e))return t===e;const[n,r]=e;return t>=n&&t<=r},gat=(t,e,n)=>{var r;for(let i=0;i<e.length;i++){const a=e[i],o=(r=t.data)===null||r===void 0?void 0:r[a];if(o)return o}return n};function vat(t){const e={top:"unset",right:"unset",bottom:"unset",left:"unset"};return t.split("-").forEach(r=>{e[r]="8px"}),e.flexDirection=t.startsWith("top")||t.startsWith("bottom")?"row":"column",e}const mat=`
  .g6-toolbar {
    position: absolute;
    z-index: 100;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);
    opacity: 0.65;
  }
  .g6-toolbar .g6-toolbar-item {
    display: inline-block;
    width: 16px;
    height: 16px;
    padding: 4px;
    cursor: pointer;
    box-sizing: content-box;
  }

  .g6-toolbar .g6-toolbar-item:hover {
    background-color: #f0f0f0;
  }

  .g6-toolbar .g6-toolbar-item svg {
    display: inline-block;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }
`,yat=`
  <svg>
    <symbol id="zoom-in" viewBox="64 64 896 896">
      <path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="zoom-out" viewBox="64 64 896 896">
      <path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="edit" viewBox="64 64 896 896">
      <path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"></path>
    </symbol>
    <symbol id="delete" viewBox="64 64 896 896">
      <path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"></path>
    </symbol>
    <symbol id="redo" viewBox="64 64 896 896">
      <path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"></path>
    </symbol>
    <symbol id="undo" viewBox="64 64 896 896">
      <path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"></path>
    </symbol>
    <symbol id="export" viewBox="64 64 896 896">
      <path d="M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"></path>
    </symbol>
    <symbol id="auto-fit" viewBox="64 64 896 896">
      <path d="M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"></path>
      <path d="M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"></path>
    </symbol>
    <symbol id="reset" viewBox="64 64 896 896">
      <path d="M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"></path>
    </symbol>
    <symbol id="exit-fullscreen" viewBox="0 0 1024 1024">
      <path d="M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z"  ></path></symbol>
    <symbol id="request-fullscreen" viewBox="0 0 1024 1024">
      <path d="M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z"  ></path></symbol>
  </svg>
`;var NY=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class E_ extends Xi{constructor(e,n){super(e,Object.assign({},E_.defaultOptions,n)),this.$element=Fp("toolbar",!1),this.onToolbarItemClick=i=>{const{onClick:a}=this.options;if(i.target instanceof Element&&i.target.className.includes("g6-toolbar-item")){const o=i.target.getAttribute("value");a==null||a(o,i.target)}};const r=this.context.canvas.getContainer();this.$element.style.display="flex",r.appendChild(this.$element),SD("g6-toolbar-css","style",{},mat,document.head),SD("g6-toolbar-svgicon","div",{display:"none"},yat),this.$element.addEventListener("click",this.onToolbarItemClick),this.update(n)}update(e){const n=Object.create(null,{update:{get:()=>super.update}});return NY(this,void 0,void 0,function*(){n.update.call(this,e);const{className:r,position:i,style:a}=this.options;this.$element.className=`g6-toolbar ${r||""}`,Object.assign(this.$element.style,a,vat(i)),this.$element.innerHTML=yield this.getDOMContent()})}destroy(){this.$element.removeEventListener("click",this.onToolbarItemClick),this.$element.remove(),super.destroy()}getDOMContent(){return NY(this,void 0,void 0,function*(){return(yield this.options.getItems()).map(n=>{var r;return`
          <div class="g6-toolbar-item" value="${n.value}" title="${(r=n.title)!==null&&r!==void 0?r:""}">
            <svg aria-hidden="true" focusable="false">
              <use xlink:href="#${n.id}"></use>
            </svg>
          </div>`}).join("")})}}E_.defaultOptions={position:"top-left"};var FY=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class O_ extends Xi{constructor(e,n){super(e,Object.assign({},O_.defaultOptions,n)),this.currentTarget=null,this.tooltipElement=null,this.container=null,this.isEnable=(r,i)=>{const{enable:a}=this.options;return typeof a=="function"?a(r,i):a},this.onClick=r=>{const{target:{id:i}}=r;this.currentTarget===i?this.hide(r):this.show(r)},this.onPointerMove=r=>{const{target:i}=r;!this.currentTarget||i.id===this.currentTarget||this.show(r)},this.onPointerLeave=r=>{this.hide(r)},this.onCanvasMove=r=>{this.hide(r)},this.onPointerEnter=r=>{this.show(r)},this.showById=r=>FY(this,void 0,void 0,function*(){const i={target:{id:r}};yield this.show(i)}),this.getElementData=(r,i)=>{const{model:a}=this.context;switch(i){case"node":return a.getNodeData([r]);case"edge":return a.getEdgeData([r]);case"combo":return a.getComboData([r]);default:return[]}},this.show=r=>FY(this,void 0,void 0,function*(){var i,a;const{client:o,target:{id:s}}=r;if(Mw(r.target))return;const l=this.context.graph.getElementType(s),{getContent:u,title:c}=this.options,f=this.getElementData(s,l);if(!this.tooltipElement||!this.isEnable(r,f))return;let d={};if(u){if(d.content=yield u(r,f),!d.content)return}else{const g=this.context.graph.getElementRenderStyle(s),v=l==="node"?g.fill:g.stroke;d={title:c||l,data:f.map(m=>({name:"ID",value:m.id||`${m.source} -> ${m.target}`,color:v}))}}this.currentTarget=s;let h,p;if(o)h=o.x,p=o.y;else{const g=qt(f,"0.style",{x:0,y:0});h=g.x,p=g.y}(a=(i=this.options).onOpenChange)===null||a===void 0||a.call(i,!0),this.tooltipElement.update(Object.assign(Object.assign(Object.assign({},this.tooltipStyleProps),{x:h,y:p,style:{".tooltip":{visibility:"visible"}}}),d))}),this.hide=r=>{var i,a,o,s,l;if(!r){(a=(i=this.options).onOpenChange)===null||a===void 0||a.call(i,!1),(o=this.tooltipElement)===null||o===void 0||o.hide(),this.currentTarget=null;return}if(!this.tooltipElement||!this.currentTarget)return;const{client:{x:u,y:c}}=r;(l=(s=this.options).onOpenChange)===null||l===void 0||l.call(s,!1),this.tooltipElement.hide(u,c),this.currentTarget=null},this.initTooltip=()=>{var r;const i=new zne({className:"tooltip",style:this.tooltipStyleProps});return(r=this.container)===null||r===void 0||r.appendChild(i.HTMLTooltipElement),i},this.render(),this.bindEvents()}getEvents(){return this.options.trigger==="click"?{"node:click":this.onClick,"edge:click":this.onClick,"combo:click":this.onClick,"canvas:click":this.onPointerLeave,contextmenu:this.onPointerLeave,drag:this.onPointerLeave}:{"node:pointerenter":this.onPointerEnter,"node:pointermove":this.onPointerMove,"canvas:pointermove":this.onCanvasMove,"edge:pointerenter":this.onPointerEnter,"edge:pointermove":this.onPointerMove,"combo:pointerenter":this.onPointerEnter,"combo:pointermove":this.onPointerMove,contextmenu:this.onPointerLeave,"node:drag":this.onPointerLeave}}update(e){var n;this.unbindEvents(),super.update(e),this.tooltipElement&&((n=this.container)===null||n===void 0||n.removeChild(this.tooltipElement.HTMLTooltipElement)),this.tooltipElement=this.initTooltip(),this.bindEvents()}render(){const{canvas:e}=this.context,n=e.getContainer();n&&(this.container=n,this.tooltipElement=this.initTooltip())}unbindEvents(){const{graph:e}=this.context,n=this.getEvents();Object.keys(n).forEach(r=>{e.off(r,n[r])})}bindEvents(){const{graph:e}=this.context,n=this.getEvents();Object.keys(n).forEach(r=>{e.on(r,n[r])})}get tooltipStyleProps(){const{canvas:e}=this.context,{center:n}=e.getBounds(),r=e.getContainer(),{top:i,left:a}=r.getBoundingClientRect(),{style:o,position:s,enterable:l,container:u={x:-a,y:-i},title:c,offset:f}=this.options,[d,h]=n,[p,g]=e.getSize();return{x:d,y:h,container:u,title:c,bounding:{x:0,y:0,width:p,height:g},position:s,enterable:l,offset:f,style:o}}destroy(){var e;this.unbindEvents(),this.tooltipElement&&((e=this.container)===null||e===void 0||e.removeChild(this.tooltipElement.HTMLTooltipElement)),super.destroy()}}O_.defaultOptions={trigger:"hover",position:"top-right",enterable:!1,enable:!0,offset:[10,10],style:{".tooltip":{visibility:"hidden"}}};var Efe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};let Wd;function Ofe(t,e){return Wd||(Wd=document.createElement("canvas")),Wd.width=t,Wd.height=e,Wd.getContext("2d").clearRect(0,0,t,e),Wd}function bat(t,e,n,r){return Efe(this,void 0,void 0,function*(){const i=Ofe(t,e),a=i.getContext("2d"),{rotate:o,opacity:s,textFill:l,textFontSize:u,textFontFamily:c,textFontVariant:f,textFontWeight:d,textAlign:h,textBaseline:p}=r;return a.textAlign=h,a.textBaseline=p,a.translate(t/2,e/2),a.font=`${u}px ${c} ${f} ${d}`,o&&a.rotate(o),s&&(a.globalAlpha=s),l&&(a.fillStyle=l,a.fillText(`${n}`,0,0)),i.toDataURL()})}function xat(t,e,n,r){return Efe(this,void 0,void 0,function*(){const i=Ofe(t,e),a=i.getContext("2d"),{rotate:o,opacity:s}=r;o&&a.rotate(o),s&&(a.globalAlpha=s);const l=new Image;return l.crossOrigin="anonymous",l.src=n,new Promise(u=>{l.onload=function(){const c=t>l.width?(t-l.width)/2:0,f=e>l.height?(e-l.height)/2:0;a.drawImage(l,0,0,l.width,l.height,c,f,t-c*2,e-f*2),u(i.toDataURL())}})})}var wat=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},_at=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class k_ extends Xi{constructor(e,n){super(e,Object.assign({},k_.defaultOptions,n)),this.$element=Fp("watermark"),this.context.canvas.getContainer().appendChild(this.$element),this.update(n)}update(e){const n=Object.create(null,{update:{get:()=>super.update}});return wat(this,void 0,void 0,function*(){n.update.call(this,e);const r=this.options,{width:i,height:a,text:o,imageURL:s}=r,l=_at(r,["width","height","text","imageURL"]);Object.keys(l).forEach(c=>{c.startsWith("background")&&(this.$element.style[c]=e[c])});const u=s?yield xat(i,a,s,l):yield bat(i,a,o,l);this.$element.style.backgroundImage=`url(${u})`})}destroy(){super.destroy(),this.$element.remove()}}k_.defaultOptions={width:200,height:100,opacity:.2,rotate:Math.PI/12,text:"",textFill:"#000",textFontSize:16,textAlign:"center",textBaseline:"middle",backgroundRepeat:"repeat"};const Sat=["#7E92B5","#F4664A","#FFBE3A"],Eat={type:"group",color:["#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]},Oat={type:"group",color:["#99ADD1","#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]};function kfe(t){const{bgColor:e,textColor:n,nodeColor:r,nodeColorDisabled:i,nodeStroke:a,nodeHaloStrokeOpacityActive:o=.15,nodeHaloStrokeOpacitySelected:s=.25,nodeOpacityDisabled:l=.06,nodeIconOpacityInactive:u=.85,nodeOpacityInactive:c=.25,nodeBadgePalette:f=Sat,nodePaletteOptions:d=Eat,edgeColor:h,edgeColorDisabled:p,edgePaletteOptions:g=Oat,comboColor:v,comboColorDisabled:m,comboStroke:y,comboStrokeDisabled:b,edgeColorInactive:x}=t;return{background:e,node:{palette:d,style:{donutOpacity:1,badgeBackgroundOpacity:1,badgeFill:"#fff",badgeFontSize:8,badgePadding:[0,4],badgePalette:f,fill:r,fillOpacity:1,halo:!1,iconFill:"#fff",iconOpacity:1,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelFill:n,labelFillOpacity:.85,labelLineHeight:16,labelPadding:[0,2],labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelOffsetY:2,lineWidth:0,portFill:r,portLineWidth:1,portStroke:a,portStrokeOpacity:.65,size:32,stroke:a,strokeOpacity:1,zIndex:2},state:{selected:{halo:!0,haloLineWidth:24,haloStrokeOpacity:s,labelFontSize:12,labelFontWeight:"bold",lineWidth:4,stroke:a},active:{halo:!0,haloLineWidth:12,haloStrokeOpacity:o},highlight:{labelFontWeight:"bold",lineWidth:4,stroke:a,strokeOpacity:.85},inactive:{badgeBackgroundOpacity:c,donutOpacity:c,fillOpacity:c,iconOpacity:u,labelFill:n,labelFillOpacity:c,strokeOpacity:c},disabled:{badgeBackgroundOpacity:.25,donutOpacity:l,fill:i,fillOpacity:l,iconFill:i,iconOpacity:.25,labelFill:n,labelFillOpacity:.25,strokeOpacity:l}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"node-expand",collapse:"node-collapse",update:[{fields:["x","y","fill","stroke"]}],translate:[{fields:["x","y"]}]}},edge:{palette:g,style:{badgeBackgroundFill:h,badgeFill:"#fff",badgeFontSize:8,badgeOffsetX:10,fillOpacity:1,halo:!1,haloLineWidth:12,haloStrokeOpacity:1,increasedLineWidthForHitTesting:2,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[4,4,4,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelPlacement:"center",labelTextBaseline:"middle",lineWidth:1,stroke:h,strokeOpacity:1,zIndex:1},state:{selected:{halo:!0,haloStrokeOpacity:.25,labelFontSize:14,labelFontWeight:"bold",lineWidth:3},active:{halo:!0,haloStrokeOpacity:.15},highlight:{labelFontWeight:"bold",lineWidth:3},inactive:{stroke:x,fillOpacity:.08,labelOpacity:.25,strokeOpacity:.08,badgeBackgroundOpacity:.25},disabled:{stroke:p,fillOpacity:.45,strokeOpacity:.45,labelOpacity:.25,badgeBackgroundOpacity:.45}},animation:{enter:"fade",exit:"fade",expand:"path-in",collapse:"path-out",show:"fade",hide:"fade",update:[{fields:["sourceNode","targetNode"]},{fields:["stroke"],shape:"key"}],translate:[{fields:["sourceNode","targetNode"]}]}},combo:{style:{collapsedMarkerFill:e,collapsedMarkerFontSize:12,collapsedMarkerFillOpacity:1,collapsedSize:32,collapsedFillOpacity:1,fill:v,halo:!1,haloLineWidth:12,haloStroke:y,haloStrokeOpacity:.25,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[2,4,2,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,lineDash:0,lineWidth:1,fillOpacity:.04,strokeOpacity:1,padding:10,stroke:y},state:{selected:{halo:!0,labelFontSize:14,labelFontWeight:700,lineWidth:4},active:{halo:!0},highlight:{labelFontWeight:700,lineWidth:4},inactive:{fillOpacity:.65,labelOpacity:.25,strokeOpacity:.65},disabled:{fill:m,fillOpacity:.25,labelOpacity:.25,stroke:b,strokeOpacity:.25}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"combo-expand",collapse:"combo-collapse",update:[{fields:["x","y"]},{fields:["fill","stroke","lineWidth"],shape:"key"}],translate:[{fields:["x","y"]}]}}}}const kat={type:"group",color:["#637088","#0F55A6","#008383","#9C5D38","#8B53A6","#4E40A6","#8F6608","#3E801D","#A65383","#175E75","#0F8248"]},Aat={bgColor:"#000000",comboColor:"#fdfdfd",comboColorDisabled:"#d0e4ff",comboStroke:"#99add1",comboStrokeDisabled:"#969696",edgeColor:"#637088",edgeColorDisabled:"#637088",edgeColorInactive:"#D0E4FF",edgePaletteOptions:kat,nodeColor:"#1783ff",nodeColorDisabled:"#D0E4FF",nodeHaloStrokeOpacityActive:.25,nodeHaloStrokeOpacitySelected:.45,nodeIconOpacityInactive:.45,nodeOpacityDisabled:.25,nodeOpacityInactive:.45,nodeStroke:"#d0e4ff",textColor:"#ffffff"},Tat=kfe(Aat),Mat={bgColor:"#ffffff",comboColor:"#99ADD1",comboColorDisabled:"#f0f0f0",comboStroke:"#99add1",comboStrokeDisabled:"#d9d9d9",edgeColor:"#99add1",edgeColorDisabled:"#d9d9d9",edgeColorInactive:"#1B324F",nodeColor:"#1783ff",nodeColorDisabled:"#1B324F",nodeHaloStrokeOpacityActive:.15,nodeHaloStrokeOpacitySelected:.25,nodeIconOpacityInactive:.85,nodeOpacityDisabled:.06,nodeOpacityInactive:.25,nodeStroke:"#000000",textColor:"#000000"},Cat=kfe(Mat);class bu extends i4{beforeDraw(e,n){return e}afterLayout(e,n){}}class Pat extends bu{beforeDraw(e){const{model:n}=this.context,r=e.add.combos,i=a=>{const o=[];return a.forEach((s,l)=>{const c=n.getAncestorsData(l,"combo").map(f=>ce(f)).reverse();o.push([l,s,c.length])}),new Map(o.sort(([,,s],[,,l])=>l-s).map(([s,l])=>[s,l]))};return e.add.combos=i(r),e.update.combos=i(e.update.combos),e}}function no(t,e,n,r,i){const a=ce(r),o=`${n}s`,s=i?r:t.add[o].get(a)||t.update[o].get(a)||t.remove[o].get(a)||r;Object.entries(t).forEach(([l,u])=>{e===l?u[o].set(a,s):u[o].delete(a)})}function W1(t,e){return Object.keys(t).every(n=>t[n]===e[n])}class Dat extends bu{beforeDraw(e,n){if(n.stage==="visibility"||!this.context.model.model.hasTreeStructure(Fn))return e;const{model:r}=this.context,{add:i,update:a}=e,o=[...e.update.combos.entries(),...e.add.combos.entries()];for(;o.length;){const[s,l]=o.pop();if(Ia(l)){const u=r.getDescendantsData(s),c=u.map(ce),{internal:f,external:d}=fD(c,h=>r.getRelatedEdgesData(h));u.forEach(h=>{const p=ce(h),g=o.findIndex(([m])=>m===p);g!==-1&&o.splice(g,1);const v=r.getElementType(p);no(e,"remove",v,h)}),f.forEach(h=>no(e,"remove","edge",h)),d.forEach(h=>{var p;const g=ce(h);((p=this.context.element)===null||p===void 0?void 0:p.getElement(g))?a.edges.set(g,h):i.edges.set(g,h)})}else{const u=r.getChildrenData(s),c=u.map(ce),{edges:f}=fD(c,d=>r.getRelatedEdgesData(d));[...u,...f].forEach(d=>{var h;const p=ce(d),g=r.getElementType(p);((h=this.context.element)===null||h===void 0?void 0:h.getElement(p))?no(e,"update",g,d):no(e,"add",g,d),g==="combo"&&o.push([p,d])})}}return e}}const zY=(t,e,n,r)=>{const i=`${n}s`,a=ce(r);!t.add[i].has(a)&&!t.update[i].has(a)&&t[e][i].set(ce(r),r)};class Iat extends bu{getElement(e){return this.context.element.getElement(e)}handleExpand(e,n){if(zY(n,"add","node",e),Ia(e))return;const r=ce(e);zY(n,"add","node",e),this.context.model.getRelatedEdgesData(r,"out").forEach(o=>{no(n,"add","edge",o)}),this.context.model.getChildrenData(r).forEach(o=>{this.handleExpand(o,n)})}beforeDraw(e){const{graph:n,model:r}=this.context;if(!r.model.hasTreeStructure(eo))return e;const{add:{nodes:i,edges:a},update:{nodes:o}}=e,s=new Map,l=new Map;i.forEach((c,f)=>{Ia(c)&&s.set(f,c)}),a.forEach(c=>{if(n.getElementType(c.source)!=="node")return;const f=n.getNodeData(c.source);Ia(f)&&s.set(c.source,f)}),o.forEach((c,f)=>{const d=this.getElement(f);if(!d)return;const h=d.attributes.collapsed;Ia(c)?h||s.set(f,c):h&&l.set(f,c)});const u=new Set;return s.forEach((c,f)=>{r.getDescendantsData(f).forEach(h=>{const p=ce(h);if(u.has(p))return;no(e,"remove","node",h),r.getRelatedEdgesData(p).forEach(v=>{no(e,"remove","edge",v)}),u.add(p)})}),l.forEach((c,f)=>{if(r.getAncestorsData(f,eo).some(Ia)){no(e,"remove","node",c);return}this.handleExpand(c,e)}),e}}function A_(t,e,n){aD[t][e]&&Ol.warn(`The extension ${e} of ${t} has been registered before, and will be overridden.`),Object.assign(aD[t],{[e]:n})}var jY=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},BY=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const $Y=["main"],VY=["background","main","label","transient"];function Lat(t){return t.main}class qY{getConfig(){return this.config}getLayer(e="main"){return this.extends.layers[e]||Lat(this.getLayers())}getLayers(){return this.extends.layers}getRenderer(e){return this.extends.renderers[e]}getCamera(e="main"){return this.getLayer(e).getCamera()}getRoot(e="main"){return this.getLayer(e).getRoot()}getContextService(e="main"){return this.getLayer(e).getContextService()}setCursor(e){this.config.cursor=e,this.getLayer().setCursor(e)}get document(){return this.getLayer().document}get context(){return this.getLayer().context}constructor(e){this.config={enableMultiLayer:!0},Object.assign(this.config,e);const n=this.config,{renderer:r,background:i,cursor:a,enableMultiLayer:o}=n,s=BY(n,["renderer","background","cursor","enableMultiLayer"]),l=o?VY:$Y,u=WY(r,l),c=Object.fromEntries(l.map(f=>{const d=new V0(Object.assign(Object.assign({},s),{supportsMutipleCanvasesInOneContainer:o,renderer:u[f],background:o?f==="background"?i:void 0:i}));return[f,d]}));GY(c),this.extends={config:this.config,renderer:r,renderers:u,layers:c}}get ready(){return Promise.all(Object.entries(this.getLayers()).map(([,e])=>e.ready))}resize(e,n){Object.assign(this.extends.config,{width:e,height:n}),Object.values(this.getLayers()).forEach(r=>{const i=r.getCamera(),a=i.getPosition(),o=i.getFocalPoint();r.resize(e,n),i.setPosition(a),i.setFocalPoint(o)})}getBounds(e){return im(Object.values(this.getLayers()).map(n=>e?n.getRoot().childNodes.find(i=>i.classList.includes(e)):n.getRoot()).filter(n=>(n==null?void 0:n.childNodes.length)>0).map(n=>n.getBounds()))}getContainer(){const e=this.extends.config.container;return typeof e=="string"?document.getElementById(e):e}getSize(){return[this.extends.config.width||0,this.extends.config.height||0]}appendChild(e,n){var r;const i=((r=e.style)===null||r===void 0?void 0:r.$layer)||"main";return this.getLayer(i).appendChild(e,n)}setRenderer(e){if(e===this.extends.renderer)return;const n=WY(e,this.config.enableMultiLayer?VY:$Y);this.extends.renderers=n,Object.entries(n).forEach(([r,i])=>this.getLayer(r).setRenderer(i)),GY(this.getLayers())}getCanvasByViewport(e){return Vi(this.getLayer().viewport2Canvas(vs(e)))}getViewportByCanvas(e){return Vi(this.getLayer().canvas2Viewport(vs(e)))}getViewportByClient(e){return Vi(this.getLayer().client2Viewport(vs(e)))}getClientByViewport(e){return Vi(this.getLayer().viewport2Client(vs(e)))}getClientByCanvas(e){return this.getClientByViewport(this.getViewportByCanvas(e))}getCanvasByClient(e){const n=this.getLayer(),r=n.client2Viewport(vs(e));return Vi(n.viewport2Canvas(r))}toDataURL(){return jY(this,arguments,void 0,function*(e={}){const n=globalThis.devicePixelRatio||1,{mode:r="viewport"}=e,i=BY(e,["mode"]);let[a,o,s,l]=[0,0,0,0];if(r==="viewport")[s,l]=this.getSize();else if(r==="overall"){const m=this.getBounds(),y=jc(m);[a,o]=m.min,[s,l]=y}const u=M6('<div id="virtual-image"></div>'),c=new V0({width:s,height:l,renderer:new Hf,devicePixelRatio:n,container:u,background:this.extends.config.background});yield c.ready,c.appendChild(this.getLayer("background").getRoot().cloneNode(!0)),c.appendChild(this.getRoot().cloneNode(!0));const f=this.getLayer("label").getRoot().cloneNode(!0),d=c.viewport2Canvas({x:0,y:0}),h=this.getCanvasByViewport([0,0]);f.translate([h[0]-d.x,h[1]-d.y]),f.scale(1/this.getCamera().getZoom()),c.appendChild(f),c.appendChild(this.getLayer("transient").getRoot().cloneNode(!0));const p=this.getCamera(),g=c.getCamera();if(r==="viewport")g.setZoom(p.getZoom()),g.setPosition(p.getPosition()),g.setFocalPoint(p.getFocalPoint());else if(r==="overall"){const[m,y,b]=g.getPosition(),[x,w,_]=g.getFocalPoint();g.setPosition([m+a,y+o,b]),g.setFocalPoint([x+a,w+o,_])}const v=c.getContextService();return new Promise(m=>{c.addEventListener(Qa.RERENDER,()=>jY(this,void 0,void 0,function*(){yield new Promise(b=>setTimeout(b,300));const y=yield v.toDataURL(i);m(y)}))})})}destroy(){Object.values(this.getLayers()).forEach(e=>{e.getCamera().cancelLandmarkAnimation(),e.destroy()})}}function WY(t,e){return Object.fromEntries(e.map(n=>{const r=(t==null?void 0:t(n))||new Hf;return r instanceof Hf&&r.setConfig({enableDirtyRectangleRendering:!1}),n==="main"?r.registerPlugin(new sR({isDocumentDraggable:!0,isDocumentDroppable:!0,dragstartDistanceThreshold:10,dragstartTimeThreshold:100})):r.unregisterPlugin(r.getPlugin("dom-interaction")),[n,r]}))}function GY(t){Object.entries(t).forEach(([e,n])=>{const r=n.getContextService().getDomElement();r!=null&&r.style&&(r.style.gridArea="1 / 1 / 2 / 2",r.style.outline="none",r.tabIndex=1,e!=="main"&&(r.style.pointerEvents="none")),r!=null&&r.parentElement&&(r.parentElement.style.display="grid")})}const Gd=t=>t?parseInt(t):0;function Rat(t){const e=getComputedStyle(t),n=t.clientWidth||Gd(e.width),r=t.clientHeight||Gd(e.height),i=Gd(e.paddingLeft)+Gd(e.paddingRight),a=Gd(e.paddingTop)+Gd(e.paddingBottom);return[n-i,r-a]}function HY(t){if(!t)return[0,0];let e=640,n=480;const[r,i]=Rat(t);e=r||e,n=i||n;const a=1,o=1;return[Math.max(je(e)?e:a,a),Math.max(je(n)?n:o,o)]}class T_{constructor(e){this.type=e}}class ni extends T_{constructor(e,n){super(e),this.data=n}}class _o extends T_{constructor(e,n,r,i){super(e),this.animationType=n,this.animation=r,this.data=i}}class Hd extends T_{constructor(e,n,r){super(e),this.elementType=n,this.data=r}}class d1 extends T_{constructor(e,n){super(e),this.data=n}}function vi(t,e){t.emit(e.type,e)}function Nat(t){if(!t)return null;if(t instanceof Yee)return{type:"canvas",element:t};let e=t;for(;e;){if(um(e))return{type:"node",element:e};if(Due(e))return{type:"edge",element:e};if(d4(e))return{type:"combo",element:e};e=e.parentElement}return null}function YY(t){var e;return((e=t==null?void 0:t.style)===null||e===void 0?void 0:e.zIndex)||0}const o0="cachedStyle",$4=t=>`__${t}__`;function Fat(t,e){const n=Array.isArray(e)?e:[e];qt(t,o0)||C0(t,o0,{}),n.forEach(r=>{C0(qt(t,o0),$4(r),t.attributes[r])})}function UY(t,e){return qt(t,[o0,$4(e)])}function zat(t,e){return $4(e)in(qt(t,o0)||{})}class jat{constructor(e){this.tasks=[],this.animations=new Set,this.context=e}getTasks(){const e=[...this.tasks];return this.tasks=[],e}add(e,n){this.tasks.push([e,n])}animate(e,n,r){var i,a,o;(i=n==null?void 0:n.before)===null||i===void 0||i.call(n);const s=this.getTasks().map(([u,c])=>{var f,d,h;const{element:p,elementType:g,stage:v}=u,m=SUe(this.context.options,g,v,e);(f=c==null?void 0:c.before)===null||f===void 0||f.call(c);const y=m.length?OUe(p,this.inferStyle(u,r),m):null;return y?((d=c==null?void 0:c.beforeAnimate)===null||d===void 0||d.call(c,y),y.finished.then(()=>{var b,x;(b=c==null?void 0:c.afterAnimate)===null||b===void 0||b.call(c,y),(x=c==null?void 0:c.after)===null||x===void 0||x.call(c),this.animations.delete(y)})):(h=c==null?void 0:c.after)===null||h===void 0||h.call(c),y}).filter(Boolean);s.forEach(u=>this.animations.add(u));const l=t4(s);return l?((a=n==null?void 0:n.beforeAnimate)===null||a===void 0||a.call(n,l),l.finished.then(()=>{var u,c;(u=n==null?void 0:n.afterAnimate)===null||u===void 0||u.call(n,l),(c=n==null?void 0:n.after)===null||c===void 0||c.call(n),this.release()})):(o=n==null?void 0:n.after)===null||o===void 0||o.call(n),l}inferStyle(e,n){var r,i;const{element:a,elementType:o,stage:s,originalStyle:l,updatedStyle:u={}}=e;e.modifiedStyle||(e.modifiedStyle=Object.assign(Object.assign({},l),u));const{modifiedStyle:c}=e,f={},d={};if(s==="enter")Object.assign(f,{opacity:0});else if(s==="exit")Object.assign(d,{opacity:0});else if(s==="show")Object.assign(f,{opacity:0}),Object.assign(d,{opacity:(r=UY(a,"opacity"))!==null&&r!==void 0?r:lv("opacity")});else if(s==="hide")Object.assign(f,{opacity:(i=UY(a,"opacity"))!==null&&i!==void 0?i:lv("opacity")}),Object.assign(d,{opacity:0});else if(s==="collapse"){const{collapse:h}=n||{},{target:p,descendants:g,position:v}=h;if(o==="node"){if(g.includes(a.id)){const[m,y,b]=v;Object.assign(d,{x:m,y,z:b})}}else if(o==="combo"){if(a.id===p||g.includes(a.id)){const[m,y]=v;Object.assign(d,{x:m,y,childrenNode:l.childrenNode})}}else o==="edge"&&Object.assign(d,{sourceNode:c.sourceNode,targetNode:c.targetNode})}else if(s==="expand"){const{expand:h}=n||{},{target:p,descendants:g,position:v}=h;if(o==="node"){if(a.id===p||g.includes(a.id)){const[m,y,b]=v;Object.assign(f,{x:m,y,z:b})}}else if(o==="combo"){if(a.id===p||g.includes(a.id)){const[m,y,b]=v;Object.assign(f,{x:m,y,z:b,childrenNode:c.childrenNode})}}else o==="edge"&&Object.assign(f,{sourceNode:c.sourceNode,targetNode:c.targetNode})}return[Object.keys(f).length>0?Object.assign({},l,f):l,Object.keys(d).length>0?Object.assign({},c,d):c]}stop(){this.animations.forEach(e=>e.cancel())}clear(){this.tasks=[]}release(){var e,n;const{canvas:r}=this.context,i=(n=(e=r.document)===null||e===void 0?void 0:e.timeline)===null||n===void 0?void 0:n.animationsWithPromises;i&&(r.document.timeline.animationsWithPromises=i.filter(a=>a.playState!=="finished"))}destroy(){this.stop(),this.animations.clear(),this.tasks=[]}}class Bat{constructor(e){this.batchCount=0,this.context=e}emit(e){const{graph:n}=this.context;n.emit(e.type,e)}startBatch(e=!0){this.batchCount++,this.batchCount===1&&this.emit(new ni(Le.BATCH_START,{initiate:e}))}endBatch(){this.batchCount--,this.batchCount===0&&this.emit(new ni(Le.BATCH_END))}get isBatching(){return this.batchCount>0}destroy(){this.context=null}}class $at extends r4{constructor(e){super(e),this.currentTarget=null,this.currentTargetType=null,this.category="behavior",this.forwardCanvasEvents=n=>{const{target:r}=n,i=Nat(r);if(!i)return;const{graph:a,canvas:o}=this.context,{type:s,element:l}=i;if("destroyed"in l&&(Mw(l)||l.destroyed))return;const{type:u,detail:c,button:f}=n,d=Object.assign(Object.assign({},n),{target:l,targetType:s,originalTarget:r});u===be.POINTER_MOVE&&(this.currentTarget!==l&&(this.currentTarget&&a.emit(`${this.currentTargetType}:${be.POINTER_LEAVE}`,Object.assign(Object.assign({},d),{type:be.POINTER_LEAVE,target:this.currentTarget,targetType:this.currentTargetType})),l&&(Object.assign(d,{type:be.POINTER_ENTER}),a.emit(`${s}:${be.POINTER_ENTER}`,d))),this.currentTarget=l,this.currentTargetType=s),u===be.CLICK&&f===2||(a.emit(`${s}:${u}`,d),a.emit(u,d)),u===be.CLICK&&c===2&&(Object.assign(d,{type:be.DBLCLICK}),a.emit(`${s}:${be.DBLCLICK}`,d),a.emit(be.DBLCLICK,d)),u===be.POINTER_DOWN&&f===2&&(Object.assign(d,{type:be.CONTEXT_MENU,preventDefault:()=>{var h;(h=o.getContainer())===null||h===void 0||h.addEventListener(be.CONTEXT_MENU,p=>p.preventDefault(),{once:!0})}}),a.emit(`${s}:${be.CONTEXT_MENU}`,d),a.emit(be.CONTEXT_MENU,d))},this.forwardContainerEvents=n=>{this.context.graph.emit(n.type,n)},this.forwardEvents(),this.setBehaviors(this.context.options.behaviors||[])}setBehaviors(e){this.setExtensions(e)}forwardEvents(){const e=this.context.canvas.getContainer();e&&[oh.KEY_DOWN,oh.KEY_UP].forEach(r=>{e.addEventListener(r,this.forwardContainerEvents)});const n=this.context.canvas.document;n&&[be.CLICK,be.DBLCLICK,be.POINTER_OVER,be.POINTER_LEAVE,be.POINTER_ENTER,be.POINTER_MOVE,be.POINTER_OUT,be.POINTER_DOWN,be.POINTER_UP,be.CONTEXT_MENU,be.DRAG_START,be.DRAG,be.DRAG_END,be.DRAG_ENTER,be.DRAG_OVER,be.DRAG_LEAVE,be.DROP,be.WHEEL].forEach(r=>{n.addEventListener(r,this.forwardCanvasEvents)})}destroy(){const e=this.context.canvas.getContainer();e&&[oh.KEY_DOWN,oh.KEY_UP].forEach(n=>{e.removeEventListener(n,this.forwardContainerEvents)}),this.context.canvas.document.removeAllEventListeners(),super.destroy()}}var pv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Ou(t,e){const{data:n,style:r}=t,i=pv(t,["data","style"]),{data:a,style:o}=e,s=pv(e,["data","style"]),l=Object.assign(Object.assign({},i),s);return(n||a)&&Object.assign(l,{data:Object.assign(Object.assign({},n),a)}),(r||o)&&Object.assign(l,{style:Object.assign(Object.assign({},r),o)}),l}function fC(t){const{data:e,style:n}=t,i=pv(t,["data","style"]);return e&&(i.data=Object.assign({},e)),n&&(i.style=Object.assign({},n)),i}function Yd(t={},e={}){const{states:n=[],data:r={},style:i={},children:a=[]}=t,o=pv(t,["states","data","style","children"]),{states:s=[],data:l={},style:u={},children:c=[]}=e,f=pv(e,["states","data","style","children"]),d=(p,g)=>p.length!==g.length?!1:p.every((v,m)=>v===g[m]),h=(p,g)=>{const v=Object.keys(p),m=Object.keys(g);return v.length!==m.length?!1:v.every(y=>p[y]===g[y])};return!(!h(o,f)||!d(a,c)||!d(n,s)||!h(r,l)||!h(i,u))}var Vat=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function dC(t){const{id:e=ce(t),style:n,data:r}=t,i=Vat(t,["id","style","data"]),a=Object.assign(Object.assign({},t),{style:Object.assign({},n),data:Object.assign({},r)});return PUe(t)?Object.assign({id:e,data:a},i):{id:e,data:a}}function Ei(t){return t.data}function qat(t){if(t.hasTreeStructure(eo))return;t.attachTreeStructure(eo);const e=t.getAllEdges();for(const n of e){const{source:r,target:i}=n;t.setParent(i,r,eo)}}class Wat{constructor(){this.latestRemovedComboIds=new Set,this.comboIds=new Set,this.changes=[],this.batchCount=0,this.isTraceless=!1,this.enableUpdateNodeLikeHierarchy=!0,this.model=new xi}pushChange(e){if(this.isTraceless)return;const{type:n}=e;if(n===ir.NodeUpdated||n===ir.EdgeUpdated||n===ir.ComboUpdated){const{value:r,original:i}=e;this.changes.push({value:fC(r),original:fC(i),type:n})}else this.changes.push({value:fC(e.value),type:n})}getChanges(){return this.changes}clearChanges(){this.changes=[]}batch(e){this.batchCount++,this.model.batch(e),this.batchCount--}isBatching(){return this.batchCount>0}silence(e){this.isTraceless=!0,e(),this.isTraceless=!1}isCombo(e){return this.comboIds.has(e)||this.latestRemovedComboIds.has(e)}getData(){return{nodes:this.getNodeData(),edges:this.getEdgeData(),combos:this.getComboData()}}getNodeData(e){return this.model.getAllNodes().reduce((n,r)=>{const i=Ei(r);return this.isCombo(ce(i))||(e===void 0||e.includes(ce(i)))&&n.push(i),n},[])}getEdgeDatum(e){return Ei(this.model.getEdge(e))}getEdgeData(e){return this.model.getAllEdges().reduce((n,r)=>{const i=Ei(r);return(e===void 0||e.includes(ce(i)))&&n.push(i),n},[])}getComboData(e){return this.model.getAllNodes().reduce((n,r)=>{const i=Ei(r);return this.isCombo(ce(i))&&(e===void 0||e.includes(ce(i)))&&n.push(i),n},[])}getRootsData(e=eo){return this.model.getRoots(e).map(Ei)}getAncestorsData(e,n){const{model:r}=this;return!r.hasNode(e)||!r.hasTreeStructure(n)?[]:r.getAncestors(e,n).map(Ei)}getDescendantsData(e){const n=this.getElementDataById(e),r=[];return Mf(n,i=>{i!==n&&r.push(i)},i=>this.getChildrenData(ce(i)),"TB"),r}getParentData(e,n){const{model:r}=this;if(!n){Ol.warn("The hierarchy structure key is not specified");return}if(!r.hasNode(e)||!r.hasTreeStructure(n))return;const i=r.getParent(e,n);return i?Ei(i):void 0}getChildrenData(e){const n=this.getElementType(e)==="node"?eo:Fn,{model:r}=this;return!r.hasNode(e)||!r.hasTreeStructure(n)?[]:r.getChildren(e,n).map(Ei)}getElementsDataByType(e){return e==="node"?this.getNodeData():e==="edge"?this.getEdgeData():e==="combo"?this.getComboData():[]}getElementDataById(e){return this.getElementType(e)==="edge"?this.getEdgeDatum(e):this.getNodeLikeDatum(e)}getNodeLikeDatum(e){const n=this.model.getNode(e);return Ei(n)}getNodeLikeData(e){return this.model.getAllNodes().reduce((n,r)=>{const i=Ei(r);return e?e.includes(ce(i))&&n.push(i):n.push(i),n},[])}getElementDataByState(e,n){return this.getElementsDataByType(e).filter(i=>{var a;return(a=i.states)===null||a===void 0?void 0:a.includes(n)})}getElementState(e){var n;return((n=this.getElementDataById(e))===null||n===void 0?void 0:n.states)||[]}hasNode(e){return this.model.hasNode(e)&&!this.isCombo(e)}hasEdge(e){return this.model.hasEdge(e)}hasCombo(e){return this.model.hasNode(e)&&this.isCombo(e)}getRelatedEdgesData(e,n="both"){return this.model.getRelatedEdges(e,n).map(Ei)}getNeighborNodesData(e){return this.model.getNeighbors(e).map(Ei)}setData(e){const{nodes:n=[],edges:r=[],combos:i=[]}=e,{nodes:a,edges:o,combos:s}=this.getData(),l=uc(a,n,f=>ce(f),Yd),u=uc(o,r,f=>ce(f),Yd),c=uc(s,i,f=>ce(f),Yd);this.batch(()=>{const f={nodes:l.enter,edges:u.enter,combos:c.enter};this.addData(f),this.computeZIndex(f,"add",!0);const d={nodes:l.update,edges:u.update,combos:c.update};this.updateData(d),this.computeZIndex(d,"update",!0);const h={nodes:l.exit.map(ce),edges:u.exit.map(ce),combos:c.exit.map(ce)};this.removeData(h)})}addData(e){const{nodes:n,edges:r,combos:i}=e;this.batch(()=>{this.addComboData(i),this.addNodeData(n),this.addEdgeData(r)}),this.computeZIndex(e,"add")}addNodeData(e=[]){e.length&&(this.model.addNodes(e.map(n=>(this.pushChange({value:n,type:ir.NodeAdded}),dC(n)))),this.updateNodeLikeHierarchy(e),this.computeZIndex({nodes:e},"add"))}addEdgeData(e=[]){e.length&&(this.model.addEdges(e.map(n=>(this.pushChange({value:n,type:ir.EdgeAdded}),dC(n)))),this.computeZIndex({edges:e},"add"))}addComboData(e=[]){if(!e.length)return;const{model:n}=this;n.hasTreeStructure(Fn)||n.attachTreeStructure(Fn),n.addNodes(e.map(r=>(this.comboIds.add(ce(r)),this.pushChange({value:r,type:ir.ComboAdded}),dC(r)))),this.updateNodeLikeHierarchy(e),this.computeZIndex({combos:e},"add")}addChildrenData(e,n){const r=this.getNodeLikeDatum(e),i=n.map(ce);this.addNodeData(n),this.updateNodeData([{id:e,children:[...r.children||[],...i]}]),this.addEdgeData(i.map(a=>({source:e,target:a})))}computeZIndex(e,n,r=!1){!r&&this.isBatching()||this.batch(()=>{const{nodes:i=[],edges:a=[],combos:o=[]}=e;o.forEach(s=>{var l,u,c;const f=ce(s);if(n==="add"&&je((l=s.style)===null||l===void 0?void 0:l.zIndex)||n==="update"&&!("combo"in s))return;const d=this.getParentData(f,Fn),h=d?((c=(u=d.style)===null||u===void 0?void 0:u.zIndex)!==null&&c!==void 0?c:0)+1:0;this.preventUpdateNodeLikeHierarchy(()=>{this.updateComboData([{id:f,style:{zIndex:h}}])})}),i.forEach(s=>{var l,u,c;const f=ce(s);if(n==="add"&&je((l=s.style)===null||l===void 0?void 0:l.zIndex)||n==="update"&&!("combo"in s)&&!("children"in s))return;let d=0;const h=this.getParentData(f,Fn);if(h)d=(((u=h.style)===null||u===void 0?void 0:u.zIndex)||0)+1;else{const p=this.getParentData(f,eo);p&&(d=((c=p==null?void 0:p.style)===null||c===void 0?void 0:c.zIndex)||0)}this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:f,style:{zIndex:d}}])})}),a.forEach(s=>{var l,u,c,f,d;if(je((l=s.style)===null||l===void 0?void 0:l.zIndex))return;let{id:h,source:p,target:g}=s;if(!h)h=ce(s);else{const y=this.getEdgeDatum(h);p=y.source,g=y.target}if(!p||!g)return;const v=((c=(u=this.getNodeLikeDatum(p))===null||u===void 0?void 0:u.style)===null||c===void 0?void 0:c.zIndex)||0,m=((d=(f=this.getNodeLikeDatum(g))===null||f===void 0?void 0:f.style)===null||d===void 0?void 0:d.zIndex)||0;this.updateEdgeData([{id:ce(s),style:{zIndex:Math.max(v,m)-1}}])})})}getFrontZIndex(e){var n;const r=this.getElementType(e),i=this.getElementDataById(e),a=this.getData();if(Object.assign(a,{[`${r}s`]:a[`${r}s`].filter(o=>ce(o)!==e)}),r==="combo"&&!Ia(i)){const o=new Set(this.getAncestorsData(e,Fn).map(ce));a.nodes=a.nodes.filter(s=>!o.has(ce(s))),a.combos=a.combos.filter(s=>!o.has(ce(s))),a.edges=a.edges.filter(({source:s,target:l})=>!o.has(s)&&!o.has(l))}return Math.max(((n=i.style)===null||n===void 0?void 0:n.zIndex)||0,0,...Object.values(a).flat().map(o=>{var s;return(((s=o==null?void 0:o.style)===null||s===void 0?void 0:s.zIndex)||0)+1}))}updateNodeLikeHierarchy(e){if(!this.enableUpdateNodeLikeHierarchy)return;const{model:n}=this;e.forEach(r=>{const i=ce(r),a=Zy(r);a!==void 0&&(n.hasTreeStructure(Fn)||n.attachTreeStructure(Fn),a===null&&this.refreshComboData(i),this.setParent(i,Zy(r),Fn));const o=r.children||[];if(o.length){n.hasTreeStructure(eo)||n.attachTreeStructure(eo);const s=o.filter(l=>n.hasNode(l));s.forEach(l=>this.setParent(l,i,eo)),s.length!==o.length&&this.updateNodeData([{id:i,children:s}])}})}preventUpdateNodeLikeHierarchy(e){this.enableUpdateNodeLikeHierarchy=!1,e(),this.enableUpdateNodeLikeHierarchy=!0}updateData(e){const{nodes:n,edges:r,combos:i}=e;this.batch(()=>{this.updateNodeData(n),this.updateComboData(i),this.updateEdgeData(r)}),this.computeZIndex(e,"update")}updateNodeData(e=[]){if(!e.length)return;const{model:n}=this;this.batch(()=>{const r=[];e.forEach(i=>{const a=ce(i),o=Ei(n.getNode(a));if(Yd(o,i))return;const s=Ou(o,i);this.pushChange({value:s,original:o,type:ir.NodeUpdated}),n.mergeNodeData(a,s),r.push(s)}),this.updateNodeLikeHierarchy(r)}),this.computeZIndex({nodes:e},"update")}refreshData(){const{nodes:e,edges:n,combos:r}=this.getData();e.forEach(i=>{this.pushChange({value:i,original:i,type:ir.NodeUpdated})}),n.forEach(i=>{this.pushChange({value:i,original:i,type:ir.EdgeUpdated})}),r.forEach(i=>{this.pushChange({value:i,original:i,type:ir.ComboUpdated})})}syncNodeLikeDatum(e){const{model:n}=this,r=ce(e);if(!n.hasNode(r))return;const i=Ei(n.getNode(r)),a=Ou(i,e);n.mergeNodeData(r,a)}syncEdgeDatum(e){const{model:n}=this,r=ce(e);if(!n.hasEdge(r))return;const i=Ei(n.getEdge(r)),a=Ou(i,e);n.mergeEdgeData(r,a)}updateEdgeData(e=[]){if(!e.length)return;const{model:n}=this;this.batch(()=>{e.forEach(r=>{const i=ce(r),a=Ei(n.getEdge(i));if(Yd(a,r))return;r.source&&a.source!==r.source&&n.updateEdgeSource(i,r.source),r.target&&a.target!==r.target&&n.updateEdgeTarget(i,r.target);const o=Ou(a,r);this.pushChange({value:o,original:a,type:ir.EdgeUpdated}),n.mergeEdgeData(i,o)})}),this.computeZIndex({edges:e},"update")}updateComboData(e=[]){if(!e.length)return;const{model:n}=this;n.batch(()=>{const r=[];e.forEach(i=>{const a=ce(i),o=Ei(n.getNode(a));if(Yd(o,i))return;const s=Ou(o,i);this.pushChange({value:s,original:o,type:ir.ComboUpdated}),n.mergeNodeData(a,s),r.push(s)}),this.updateNodeLikeHierarchy(r)}),this.computeZIndex({combos:e},"update")}setParent(e,n,r,i=!0){if(e===n)return;const a=this.getNodeLikeDatum(e),o=Zy(a);if(o!==n&&r===Fn){const s={id:e,combo:n};this.isCombo(e)?this.syncNodeLikeDatum(s):this.syncNodeLikeDatum(s)}this.model.setParent(e,n,r),i&&r===Fn&&LOe([o,n]).forEach(s=>{s!==void 0&&this.refreshComboData(s)})}refreshComboData(e){const n=this.getComboData([e])[0],r=this.getAncestorsData(e,Fn);n&&this.pushChange({value:n,original:n,type:ir.ComboUpdated}),r.forEach(i=>{this.pushChange({value:i,original:i,type:ir.ComboUpdated})})}getElementPosition(e){const n=this.getElementDataById(e);return Yr(n)}translateNodeLikeBy(e,n){this.isCombo(e)?this.translateComboBy(e,n):this.translateNodeBy(e,n)}translateNodeLikeTo(e,n){this.isCombo(e)?this.translateComboTo(e,n):this.translateNodeTo(e,n)}translateNodeBy(e,n){const r=this.getElementPosition(e),i=kt(r,[...n,0].slice(0,3));this.translateNodeTo(e,i)}translateNodeTo(e,n){const[r=0,i=0,a=0]=n;this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:e,style:{x:r,y:i,z:a}}])})}translateComboBy(e,n){const[r=0,i=0,a=0]=n;if([r,i,a].some(isNaN)||[r,i,a].every(l=>l===0))return;const o=this.getComboData([e])[0];if(!o)return;const s=new Set;Mf(o,l=>{const u=ce(l);if(s.has(u))return;s.add(u);const[c,f,d]=Yr(l),h=Ou(l,{style:{x:c+r,y:f+i,z:d+a}});this.pushChange({value:h,original:l,type:this.isCombo(u)?ir.ComboUpdated:ir.NodeUpdated}),this.model.mergeNodeData(u,h)},l=>this.getChildrenData(ce(l)),"BT")}translateComboTo(e,n){var r;if(n.some(isNaN))return;const[i=0,a=0,o=0]=n,s=(r=this.getComboData([e]))===null||r===void 0?void 0:r[0];if(!s)return;const[l,u,c]=Yr(s),f=i-l,d=a-u,h=o-c;Mf(s,p=>{const g=ce(p),[v,m,y]=Yr(p),b=Ou(p,{style:{x:v+f,y:m+d,z:y+h}});this.pushChange({value:b,original:p,type:this.isCombo(g)?ir.ComboUpdated:ir.NodeUpdated}),this.model.mergeNodeData(g,b)},p=>this.getChildrenData(ce(p)),"BT")}removeData(e){const{nodes:n,edges:r,combos:i}=e;this.batch(()=>{this.removeEdgeData(r),this.removeNodeData(n),this.removeComboData(i),this.latestRemovedComboIds=new Set(i)})}removeNodeData(e=[]){e.length&&this.batch(()=>{e.forEach(n=>{this.removeEdgeData(this.getRelatedEdgesData(n).map(ce)),this.pushChange({value:this.getNodeData([n])[0],type:ir.NodeRemoved}),this.removeNodeLikeHierarchy(n)}),this.model.removeNodes(e)})}removeEdgeData(e=[]){e.length&&(e.forEach(n=>this.pushChange({value:this.getEdgeData([n])[0],type:ir.EdgeRemoved})),this.model.removeEdges(e))}removeComboData(e=[]){e.length&&this.batch(()=>{e.forEach(n=>{this.pushChange({value:this.getComboData([n])[0],type:ir.ComboRemoved}),this.removeNodeLikeHierarchy(n),this.comboIds.delete(n)}),this.model.removeNodes(e)})}removeNodeLikeHierarchy(e){if(this.model.hasTreeStructure(Fn)){const n=Zy(this.getNodeLikeDatum(e));this.setParent(e,void 0,Fn,!1),this.model.getChildren(e,Fn).forEach(r=>{const i=Ei(r),a=ce(i);this.setParent(ce(i),n,Fn,!1);const o=Ou(i,{id:ce(i),combo:n});this.pushChange({value:o,original:i,type:this.isCombo(a)?ir.ComboUpdated:ir.NodeUpdated}),this.model.mergeNodeData(ce(i),o)}),lt(n)||this.refreshComboData(n)}}getElementType(e){if(this.model.hasNode(e))return this.isCombo(e)?"combo":"node";if(this.model.hasEdge(e))return"edge";throw new Error(Ul(`Unknown element type of id: ${e}`))}destroy(){const{model:e}=this,n=e.getAllNodes(),r=e.getAllEdges();e.removeEdges(r.map(i=>i.id)),e.removeNodes(n.map(i=>i.id)),this.context={}}}var fg=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class Gat{constructor(e){this.elementMap={},this.shapeTypeMap={},this.paletteStyle={},this.defaultStyle={},this.stateStyle={},this.visibilityCache=new WeakMap,this.context=e}init(){this.initContainer()}initContainer(){if(!this.container||this.container.destroyed){const{canvas:e}=this.context;this.container=e.appendChild(new fr({className:"elements"}))}}emit(e,n){n.silence||vi(this.context.graph,e)}forEachElementData(e){ed.forEach(n=>{const r=this.context.model.getElementsDataByType(n);e(n,r)})}getElementType(e,n){var r;const{options:i,graph:a}=this.context,o=((r=i[e])===null||r===void 0?void 0:r.type)||n.type;return o?typeof o=="string"?o:o.call(a,n):e==="edge"?"line":"circle"}getTheme(e){return Hle(this.context.options)[e]||{}}getThemeStyle(e){return this.getTheme(e).style||{}}getThemeStateStyle(e,n){const{state:r={}}=this.getTheme(e);return Object.assign({},...n.map(i=>r[i]||{}))}computePaletteStyle(){const{options:e}=this.context;this.paletteStyle={},this.forEachElementData((n,r)=>{var i,a;const o=Object.assign({},BB((i=this.getTheme(n))===null||i===void 0?void 0:i.palette),BB((a=e[n])===null||a===void 0?void 0:a.palette));o!=null&&o.field&&Object.assign(this.paletteStyle,bXe(r,o))})}getPaletteStyle(e,n){const r=this.paletteStyle[n];return r?e==="edge"?{stroke:r}:{fill:r}:{}}computeElementDefaultStyle(e,n){var r;const{options:i}=this.context,a=((r=i[e])===null||r===void 0?void 0:r.style)||{};"transform"in a&&Array.isArray(a.transform)&&(a.transform=[...a.transform]),this.defaultStyle[ce(n.datum)]=jB(a,n)}computeElementsDefaultStyle(e){const{graph:n}=this.context;this.forEachElementData((r,i)=>{const a=i.length;for(let o=0;o<a;o++){const s=i[o];(e===void 0||e.includes(ce(s)))&&this.computeElementDefaultStyle(r,{datum:s,graph:n})}})}getDefaultStyle(e){return this.defaultStyle[e]||{}}getElementState(e){try{const{model:n}=this.context;return n.getElementState(e)}catch{return[]}}getElementStateStyle(e,n,r){var i,a;const{options:o}=this.context,s=((a=(i=o[e])===null||i===void 0?void 0:i.state)===null||a===void 0?void 0:a[n])||{};return jB(s,r)}computeElementStatesStyle(e,n,r){this.stateStyle[ce(r.datum)]=Object.assign({},...n.map(i=>this.getElementStateStyle(e,i,r)))}computeElementsStatesStyle(e){const{graph:n}=this.context;this.forEachElementData((r,i)=>{const a=i.length;for(let o=0;o<a;o++){const s=i[o];if(e===void 0||e.includes(ce(s))){const l=this.getElementState(ce(s));this.computeElementStatesStyle(r,l,{datum:s,graph:n})}}})}getStateStyle(e){return this.stateStyle[e]||{}}computeStyle(e,n){e&&["translate","zIndex"].includes(e)||(this.computePaletteStyle(),this.computeElementsDefaultStyle(n),this.computeElementsStatesStyle(n))}getElement(e){return this.elementMap[e]}getNodes(){return this.context.model.getNodeData().map(({id:e})=>this.elementMap[e])}getEdges(){return this.context.model.getEdgeData().map(e=>this.elementMap[ce(e)])}getCombos(){return this.context.model.getComboData().map(({id:e})=>this.elementMap[e])}getElementComputedStyle(e,n){const r=ce(n),i=this.getThemeStyle(e),a=this.getPaletteStyle(e,r),o=n.style||{},s=this.getDefaultStyle(r),l=this.getThemeStateStyle(e,this.getElementState(r)),u=this.getStateStyle(r),c=Object.assign({},i,a,o,s,l,u);if(e==="combo"){const f=this.context.model.getChildrenData(r),h=!!c.collapsed?[]:f.map(ce).filter(p=>this.getElement(p));Object.assign(c,{childrenNode:h,childrenData:f})}return c}getDrawData(e){this.init();const n=this.computeChangesAndDrawData(e);if(!n)return null;const{type:r="draw",stage:i=r}=e;return this.markDestroyElement(n.drawData),this.computeStyle(i),{type:r,stage:i,data:n}}draw(e={animation:!0}){const n=this.getDrawData(e);if(!n)return;const{data:{drawData:{add:r,update:i,remove:a}}}=n;return this.destroyElements(a,e),this.createElements(r,e),this.updateElements(i,e),this.setAnimationTask(e,n)}preLayoutDraw(){return fg(this,arguments,void 0,function*(e={animation:!0}){var n,r;const i=this.getDrawData(e);if(!i)return;const{data:{drawData:a}}=i;yield(r=(n=this.context.layout)===null||n===void 0?void 0:n.preLayout)===null||r===void 0?void 0:r.call(n,a);const{add:o,update:s,remove:l}=a;return this.destroyElements(l,e),this.createElements(o,e),this.updateElements(s,e),this.setAnimationTask(e,i)})}setAnimationTask(e,n){const{animation:r,silence:i}=e,{data:{dataChanges:a,drawData:o},stage:s,type:l}=n;return this.context.animation.animate(r,i?{}:{before:()=>this.emit(new ni(Le.BEFORE_DRAW,{dataChanges:a,animation:r,stage:s,render:l==="render"}),e),beforeAnimate:u=>this.emit(new _o(Le.BEFORE_ANIMATE,Ma.DRAW,u,o),e),afterAnimate:u=>this.emit(new _o(Le.AFTER_ANIMATE,Ma.DRAW,u,o),e),after:()=>this.emit(new ni(Le.AFTER_DRAW,{dataChanges:a,animation:r,stage:s,render:l==="render",firstRender:this.context.graph.rendered===!1}),e)})}computeChangesAndDrawData(e){const{model:n}=this.context,r=n.getChanges(),i=j4(r);if(i.length===0)return null;const{NodeAdded:a=[],NodeUpdated:o=[],NodeRemoved:s=[],EdgeAdded:l=[],EdgeUpdated:u=[],EdgeRemoved:c=[],ComboAdded:f=[],ComboUpdated:d=[],ComboRemoved:h=[]}=y2(i,m=>m.type),p=m=>new Map(m.map(y=>{const b=y.value;return[ce(b),b]})),g={add:{nodes:p(a),edges:p(l),combos:p(f)},update:{nodes:p(o),edges:p(u),combos:p(d)},remove:{nodes:p(s),edges:p(c),combos:p(h)}},v=this.transformData(g,e);return n.clearChanges(),{dataChanges:r,drawData:v}}transformData(e,n){const r=this.context.transform.getTransformInstance();return Object.values(r).reduce((i,a)=>a.beforeDraw(i,n),e)}createElement(e,n,r){var i;const a=ce(n);if(this.getElement(a))return;const s=this.getElementType(e,n),l=this.getElementComputedStyle(e,n),u=du(e,s);if(!u)return Ol.warn(`The element ${s} of ${e} is not registered.`);this.emit(new Hd(Le.BEFORE_ELEMENT_CREATE,e,n),r);const c=this.container.appendChild(new u({id:a,context:this.context,style:l}));this.shapeTypeMap[a]=s,this.elementMap[a]=c;const{stage:f="enter"}=r;(i=this.context.animation)===null||i===void 0||i.add({element:c,elementType:e,stage:f,originalStyle:Object.assign({},c.attributes),updatedStyle:l},{after:()=>{var d;this.emit(new Hd(Le.AFTER_ELEMENT_CREATE,e,n),r),(d=c.onCreate)===null||d===void 0||d.call(c)}})}createElements(e,n){const{nodes:r,edges:i,combos:a}=e;[["node",r],["combo",a],["edge",i]].forEach(([s,l])=>{l.forEach(u=>this.createElement(s,u,n))})}getUpdateStageStyle(e,n,r){const{stage:i="update"}=r;if(i==="translate")if(e==="node"||e==="combo"){const{style:{x:a=0,y:o=0,z:s=0}={}}=n;return{x:a,y:o,z:s}}else return{};return this.getElementComputedStyle(e,n)}updateElement(e,n,r){var i;const a=ce(n),{stage:o="update"}=r,s=this.getElement(a);if(!s)return()=>null;this.emit(new Hd(Le.BEFORE_ELEMENT_UPDATE,e,n),r);const l=this.getElementType(e,n),u=this.getUpdateStageStyle(e,n,r);this.shapeTypeMap[a]!==l&&(s.destroy(),delete this.shapeTypeMap[a],delete this.elementMap[a],this.createElement(e,n,{animation:!1,silence:!0}));const c=o!=="visibility"?o:u.visibility==="hidden"?"hide":"show";c==="hide"&&delete u.visibility,(i=this.context.animation)===null||i===void 0||i.add({element:s,elementType:e,stage:c,originalStyle:Object.assign({},s.attributes),updatedStyle:u},{before:()=>{const f=this.elementMap[a];o!=="collapse"&&hD(f,u),o==="visibility"&&(zat(f,"opacity")||Fat(f,"opacity"),this.visibilityCache.set(f,c==="show"?"visible":"hidden"),c==="show"&&Jf(f,"visible"))},after:()=>{var f;const d=this.elementMap[a];o==="collapse"&&hD(d,u),c==="hide"&&Jf(d,this.visibilityCache.get(d)),this.emit(new Hd(Le.AFTER_ELEMENT_UPDATE,e,n),r),(f=d.onUpdate)===null||f===void 0||f.call(d)}})}updateElements(e,n){const{nodes:r,edges:i,combos:a}=e;[["node",r],["combo",a],["edge",i]].forEach(([s,l])=>{l.forEach(u=>this.updateElement(s,u,n))})}markDestroyElement(e){Object.values(e.remove).forEach(n=>{n.forEach(r=>{const i=ce(r),a=this.getElement(i);a&&TZe(a)})})}destroyElement(e,n,r){var i;const{stage:a="exit"}=r,o=ce(n),s=this.elementMap[o];if(!s)return()=>null;this.emit(new Hd(Le.BEFORE_ELEMENT_DESTROY,e,n),r),(i=this.context.animation)===null||i===void 0||i.add({element:s,elementType:e,stage:a,originalStyle:Object.assign({},s.attributes),updatedStyle:{}},{after:()=>{var l;this.clearElement(o),s.destroy(),(l=s.onDestroy)===null||l===void 0||l.call(s),this.emit(new Hd(Le.AFTER_ELEMENT_DESTROY,e,n),r)}})}destroyElements(e,n){const{nodes:r,edges:i,combos:a}=e;[["combo",a],["edge",i],["node",r]].forEach(([s,l])=>{l.forEach(u=>this.destroyElement(s,u,n))})}clearElement(e){delete this.paletteStyle[e],delete this.defaultStyle[e],delete this.stateStyle[e],delete this.elementMap[e],delete this.shapeTypeMap[e]}alignLayoutResultToElement(e,n){var r,i;const a=(r=e.nodes)===null||r===void 0?void 0:r.find(o=>ce(o)===n);if(a){const o=Yr(this.context.model.getNodeLikeDatum(n)),s=Yr(a),l=In(o,s);(i=e.nodes)===null||i===void 0||i.forEach(u=>{var c,f,d;!((c=u.style)===null||c===void 0)&&c.x&&(u.style.x+=l[0]),!((f=u.style)===null||f===void 0)&&f.y&&(u.style.y+=l[1]),!((d=u.style)===null||d===void 0)&&d.z&&(u.style.z+=l[2]||0)})}}collapseNode(e,n){return fg(this,void 0,void 0,function*(){var r;const{animation:i,align:a}=n,{model:o,layout:s}=this.context,l=this.computeChangesAndDrawData({stage:"collapse",animation:i});if(!l)return;this.markDestroyElement(l.drawData);const u=yield s.simulate();a&&this.alignLayoutResultToElement(u,e),o.updateData(u);const c=this.computeChangesAndDrawData({stage:"collapse",animation:i});if(!c)return;const{drawData:f}=c,{add:d,remove:h,update:p}=f;this.markDestroyElement(f);const g={animation:i,stage:"collapse",data:f};this.destroyElements(h,g),this.createElements(d,g),this.updateElements(p,g),yield(r=this.context.animation.animate(i,{beforeAnimate:v=>this.emit(new _o(Le.BEFORE_ANIMATE,Ma.COLLAPSE,v,f),g),afterAnimate:v=>this.emit(new _o(Le.AFTER_ANIMATE,Ma.COLLAPSE,v,f),g)},{collapse:{target:e,descendants:Array.from(h.nodes).map(([,v])=>ce(v)),position:Yr(p.nodes.get(e))}}))===null||r===void 0?void 0:r.finished})}expandNode(e,n){return fg(this,void 0,void 0,function*(){var r;const{model:i,layout:a}=this.context,{animation:o,align:s}=n,l=Yr(i.getNodeData([e])[0]),u=this.computeChangesAndDrawData({stage:"expand",animation:o});if(!u)return;const{drawData:{add:c}}=u;this.createElements(c,{animation:!1,stage:"expand",target:e}),this.context.animation.clear();const f=yield a.simulate();s&&this.alignLayoutResultToElement(f,e),i.updateData(f),this.computeStyle("expand");const d=this.computeChangesAndDrawData({stage:"collapse",animation:o});if(!d)return;const{drawData:h}=d,{update:p}=h,g={animation:o,stage:"expand",data:h};c.edges.forEach(v=>p.edges.set(ce(v),v)),c.nodes.forEach(v=>p.nodes.set(ce(v),v)),this.updateElements(p,g),yield(r=this.context.animation.animate(o,{beforeAnimate:v=>this.emit(new _o(Le.BEFORE_ANIMATE,Ma.EXPAND,v,h),g),afterAnimate:v=>this.emit(new _o(Le.AFTER_ANIMATE,Ma.EXPAND,v,h),g)},{expand:{target:e,descendants:Array.from(c.nodes).map(([,v])=>ce(v)),position:l}}))===null||r===void 0?void 0:r.finished})}collapseCombo(e,n){return fg(this,void 0,void 0,function*(){var r;const{model:i,element:a}=this.context;if(i.getAncestorsData(e,Fn).some(g=>Ia(g)))return;const o=a.getElement(e),s=o.getComboPosition(Object.assign(Object.assign({},o.attributes),{collapsed:!0})),l=this.computeChangesAndDrawData({stage:"collapse",animation:n});if(!l)return;const{dataChanges:u,drawData:c}=l;this.markDestroyElement(c);const{update:f,remove:d}=c,h={animation:n,stage:"collapse",data:c};this.destroyElements(d,h),this.updateElements(f,h);const p=g=>Array.from(g).map(([,v])=>ce(v));yield(r=this.context.animation.animate(n,{before:()=>this.emit(new ni(Le.BEFORE_DRAW,{dataChanges:u,animation:n}),h),beforeAnimate:g=>this.emit(new _o(Le.BEFORE_ANIMATE,Ma.COLLAPSE,g,c),h),afterAnimate:g=>this.emit(new _o(Le.AFTER_ANIMATE,Ma.COLLAPSE,g,c),h),after:()=>this.emit(new ni(Le.AFTER_DRAW,{dataChanges:u,animation:n}),h)},{collapse:{target:e,descendants:[...p(d.nodes),...p(d.combos)],position:s}}))===null||r===void 0?void 0:r.finished})}expandCombo(e,n){return fg(this,void 0,void 0,function*(){var r;const{model:i}=this.context,a=Yr(i.getComboData([e])[0]);this.computeStyle("expand");const o=this.computeChangesAndDrawData({stage:"expand",animation:n});if(!o)return;const{dataChanges:s,drawData:l}=o,{add:u,update:c}=l,f={animation:n,stage:"expand",data:l,target:e};this.createElements(u,f),this.updateElements(c,f);const d=h=>Array.from(h).map(([,p])=>ce(p));yield(r=this.context.animation.animate(n,{before:()=>this.emit(new ni(Le.BEFORE_DRAW,{dataChanges:s,animation:n}),f),beforeAnimate:h=>this.emit(new _o(Le.BEFORE_ANIMATE,Ma.EXPAND,h,l),f),afterAnimate:h=>this.emit(new _o(Le.AFTER_ANIMATE,Ma.EXPAND,h,l),f),after:()=>this.emit(new ni(Le.AFTER_DRAW,{dataChanges:s,animation:n}),f)},{expand:{target:e,descendants:[...d(u.nodes),...d(u.combos)],position:a}}))===null||r===void 0?void 0:r.finished})}clear(){this.container.destroy(),this.initContainer(),this.elementMap={},this.shapeTypeMap={},this.defaultStyle={},this.stateStyle={},this.paletteStyle={}}destroy(){this.clear(),this.container.destroy(),this.context={}}}var Ud=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},Hat=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Yat{get presetOptions(){return{animation:!!Yle(this.context.options,!0)}}get options(){const{options:e}=this.context;return e.layout}constructor(e){this.instances=[],this.context=e}getLayoutInstance(){return this.instances}preLayout(e){return Ud(this,void 0,void 0,function*(){var n,r,i,a;const{graph:o,model:s}=this.context,{add:l}=e;vi(o,new ni(Le.BEFORE_LAYOUT,{type:"pre"}));const u=yield(n=this.context.layout)===null||n===void 0?void 0:n.simulate();(r=u==null?void 0:u.nodes)===null||r===void 0||r.forEach(c=>{const f=ce(c),d=l.nodes.get(f);s.syncNodeLikeDatum(c),d&&Object.assign(d.style,c.style)}),(i=u==null?void 0:u.edges)===null||i===void 0||i.forEach(c=>{const f=ce(c),d=l.edges.get(f);s.syncEdgeDatum(c),d&&Object.assign(d.style,c.style)}),(a=u==null?void 0:u.combos)===null||a===void 0||a.forEach(c=>{const f=ce(c),d=l.combos.get(f);s.syncNodeLikeDatum(c),d&&Object.assign(d.style,c.style)}),vi(o,new ni(Le.AFTER_LAYOUT,{type:"pre"})),this.transformDataAfterLayout("pre",e)})}postLayout(){return Ud(this,arguments,void 0,function*(e=this.options){if(!e)return;const n=Array.isArray(e)?e:[e],{graph:r}=this.context;vi(r,new ni(Le.BEFORE_LAYOUT,{type:"post"}));for(let i=0;i<n.length;i++){const a=n[i],o=this.getLayoutData(a),s=Object.assign(Object.assign({},this.presetOptions),a);vi(r,new ni(Le.BEFORE_STAGE_LAYOUT,{options:s,index:i}));const l=yield this.stepLayout(o,s,i);vi(r,new ni(Le.AFTER_STAGE_LAYOUT,{options:s,index:i})),a.animation||this.updateElementPosition(l,!1)}vi(r,new ni(Le.AFTER_LAYOUT,{type:"post"})),this.transformDataAfterLayout("post")})}transformDataAfterLayout(e,n){const r=this.context.transform.getTransformInstance();Object.values(r).forEach(i=>i.afterLayout(e,n))}simulate(){return Ud(this,void 0,void 0,function*(){if(!this.options)return{};const e=Array.isArray(this.options)?this.options:[this.options];let n={};for(let r=0;r<e.length;r++){const i=e[r],a=this.getLayoutData(i);n=yield this.stepLayout(a,Object.assign(Object.assign(Object.assign({},this.presetOptions),i),{animation:!1}),r)}return n})}stepLayout(e,n,r){return Ud(this,void 0,void 0,function*(){return LZe(n)?yield this.treeLayout(e,n,r):yield this.graphLayout(e,n,r)})}graphLayout(e,n,r){return Ud(this,void 0,void 0,function*(){const{animation:i,enableWorker:a,iterations:o=300}=n,s=this.initGraphLayout(n);if(!s)return{};if(this.instances[r]=s,this.instance=s,a){const u=s;return this.supervisor=new Frt(u.graphData2LayoutModel(e),u.instance,{iterations:o}),B1(yield this.supervisor.execute())}if(xD(s))return i?yield s.execute(e,{onTick:u=>{this.updateElementPosition(u,!1)}}):(s.execute(e),s.stop(),s.tick(o));const l=yield s.execute(e);if(i){const u=this.updateElementPosition(l,i);yield u==null?void 0:u.finished}return l})}treeLayout(e,n,r){return Ud(this,void 0,void 0,function*(){const{type:i,animation:a}=n,o=du("layout",i);if(!o)return{};const{nodes:s=[],edges:l=[]}=e,u=new xi({nodes:s.map(p=>({id:ce(p),data:p.data||{}})),edges:l.map(p=>({id:ce(p),source:p.source,target:p.target,data:p.data||{}}))});qat(u);const c={nodes:[],edges:[]},f={nodes:[],edges:[]};u.getRoots(eo).forEach(p=>{Mf(p,b=>{b.children=u.getSuccessors(b.id)},b=>u.getSuccessors(b.id),"TB");const g=o(p,n),{x:v,y:m,z:y=0}=g;Mf(g,b=>{const{id:x,x:w,y:_,z:E=0}=b;c.nodes.push({id:x,style:{x:v,y:m,z:y}}),f.nodes.push({id:x,style:{x:w,y:_,z:E}})},b=>b.children,"TB")});const h=this.inferTreeLayoutOffset(f);if(XY(f,h),a){XY(c,h),this.updateElementPosition(c,!1);const p=this.updateElementPosition(f,a);yield p==null?void 0:p.finished}return f})}inferTreeLayoutOffset(e){var n;let[r,i]=[1/0,-1/0],[a,o]=[1/0,-1/0];(n=e.nodes)===null||n===void 0||n.forEach(g=>{const{x:v=0,y:m=0}=g.style||{};r=Math.min(r,v),i=Math.max(i,v),a=Math.min(a,m),o=Math.max(o,m)});const{canvas:s}=this.context,l=s.getSize(),[u,c]=s.getCanvasByViewport([0,0]),[f,d]=s.getCanvasByViewport(l);if(r>=u&&i<=f&&a>=c&&o<=d)return[0,0];const h=(u+f)/2,p=(c+d)/2;return[h-(r+i)/2,p-(a+o)/2]}stopLayout(){this.instance&&xD(this.instance)&&(this.instance.stop(),this.instance=void 0),this.supervisor&&(this.supervisor.stop(),this.supervisor=void 0),this.animationResult&&(this.animationResult.finish(),this.animationResult=void 0)}getLayoutData(e){const{nodeFilter:n=()=>!0,preLayout:r=!1,isLayoutInvisibleNodes:i=!1}=e,{nodes:a,edges:o,combos:s}=this.context.model.getData(),{element:l,model:u}=this.context,c=g=>l.getElement(g),f=r?g=>{var v;return!i&&(((v=g.style)===null||v===void 0?void 0:v.visibility)==="hidden"||u.getAncestorsData(g.id,eo).some(Ia)||u.getAncestorsData(g.id,Fn).some(Ia))?!1:n(g)}:g=>{const v=ce(g),m=c(v);return!m||Mw(m)?!1:n(g)},d=a.filter(f),h=new Map(d.map(g=>[ce(g),g]));s.forEach(g=>h.set(ce(g),g));const p=o.filter(({source:g,target:v})=>h.has(g)&&h.has(v));return{nodes:d,edges:p,combos:s}}initGraphLayout(e){var n;const{element:r,viewport:i}=this.context,{type:a,enableWorker:o,animation:s,iterations:l}=e,u=Hat(e,["type","enableWorker","animation","iterations"]),[c,f]=i.getCanvasSize(),d=[c/2,f/2],h=(n=e==null?void 0:e.nodeSize)!==null&&n!==void 0?n:y=>{const b=r==null?void 0:r.getElement(y.id);return b?b.attributes.size:r==null?void 0:r.getElementComputedStyle("node",y).size},p=du("layout",a);if(!p)return Ol.warn(`The layout of ${a} is not registered.`);const g=Object.getPrototypeOf(p.prototype)===Iw.prototype?p:NZe(p,this.context),v=new g(this.context),m={nodeSize:h,width:c,height:f,center:d};switch(v.id){case"d3-force":case"d3-force-3d":Object.assign(m,{center:{x:c/2,y:f/2,z:0}});break}return me(v.options,m,u),v}updateElementPosition(e,n){const{model:r,element:i}=this.context;return i?(r.updateData(e),i.draw({animation:n,silence:!0})):null}destroy(){var e;this.stopLayout(),this.context={},(e=this.supervisor)===null||e===void 0||e.kill(),this.supervisor=void 0,this.instance=void 0,this.instances=[],this.animationResult=void 0}}const XY=(t,e)=>{var n;const[r,i]=e;(n=t.nodes)===null||n===void 0||n.forEach(a=>{if(a.style){const{x:o=0,y:s=0}=a.style;a.style.x=o+r,a.style.y=s+i}else a.style={x:r,y:i}})};function Uat(t){return[Xat].reduce((n,r)=>r(n),t)}function Xat(t){return!t.layout||Array.isArray(t.layout)||"preLayout"in t.layout||["antv-dagre","combo-combined","compact-box","circular","concentric","dagre","fishbone","grid","indented","mds","radial","random","snake","dendrogram","mindmap"].includes(t.layout.type)&&(t.layout.preLayout=!0),t}class Zat extends r4{constructor(e){super(e),this.category="plugin",this.setPlugins(this.context.options.plugins||[])}setPlugins(e){this.setExtensions(e)}getPluginInstance(e){const n=this.extensionMap[e];if(n)return n;Ol.warn(`Cannot find the plugin ${e}, will try to find it by type.`);const r=this.extensions.find(i=>i.type===e);if(r)return this.extensionMap[r.key]}}const h1=["update-related-edges","collapse-expand-node","collapse-expand-combo","get-edge-actual-ends","arrange-draw-order"];class Kat extends r4{constructor(e){super(e),this.category="transform",this.setTransforms(this.context.options.transforms||[])}getTransforms(){}setTransforms(e){this.setExtensions([...h1.slice(0,h1.length-1),...e,h1[h1.length-1]])}getTransformInstance(e){return e?this.extensionMap[e]:this.extensionMap}}var dg=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class Jat{get padding(){return kl(this.context.options.padding)}get paddingOffset(){const[e,n,r,i]=this.padding,[a,o,s]=[(i-n)/2,(e-r)/2,0];return[a,o,s]}constructor(e){this.landmarkCounter=0,this.context=e;const[n,r]=this.paddingOffset,{zoom:i,rotation:a,x:o=n,y:s=r}=e.options;this.transform({mode:"absolute",scale:i,translate:[o,s],rotate:a},!1)}get camera(){const{canvas:e}=this.context;return new Proxy(e.getCamera(),{get:(n,r)=>{const a=Object.entries(e.getLayers()).filter(([s])=>!["main"].includes(s)).map(([,s])=>s.getCamera()),o=n[r];if(typeof o=="function")return(...s)=>{const l=o.apply(n,s);return a.forEach(u=>{u[r].apply(u,s)}),l}}})}createLandmark(e){return this.camera.createLandmark(`landmark-${this.landmarkCounter++}`,e)}getAnimation(e){const n=Yle(this.context.options,e);return n?mc(Object.assign({},n),["easing","duration"]):!1}getCanvasSize(){const{canvas:e}=this.context,{width:n=0,height:r=0}=e.getConfig();return[n,r]}getCanvasCenter(){const{canvas:e}=this.context,{width:n=0,height:r=0}=e.getConfig();return[n/2,r/2,0]}getViewportCenter(){const[e,n]=this.camera.getPosition();return[e,n,0]}getGraphCenter(){return this.context.graph.getViewportByCanvas(this.getCanvasCenter())}getZoom(){return this.camera.getZoom()}getRotation(){return this.camera.getRoll()}getTranslateOptions(e){const{camera:n}=this,{mode:r,translate:i=[]}=e,a=this.getZoom(),o=n.getPosition(),s=n.getFocalPoint(),[l,u]=this.getCanvasCenter(),[c=0,f=0,d=0]=i,h=As([-c,-f,-d],a);return r==="relative"?{position:kt(o,h),focalPoint:kt(s,h)}:{position:kt([l,u,o[2]],h),focalPoint:kt([l,u,s[2]],h)}}getRotateOptions(e){const{mode:n,rotate:r=0}=e;return{roll:n==="relative"?this.camera.getRoll()+r:r}}getZoomOptions(e){const{zoomRange:n}=this.context.options,r=this.camera.getZoom(),{mode:i,scale:a=1}=e;return jn(i==="relative"?r*a:a,...n)}transform(e,n){return dg(this,void 0,void 0,function*(){const{graph:r}=this.context,{translate:i,rotate:a,scale:o,origin:s}=e;this.cancelAnimation();const l=this.getAnimation(n);if(vi(r,new d1(Le.BEFORE_TRANSFORM,e)),!a&&o&&!i&&s&&!l){this.camera.setZoomByViewportPoint(this.getZoomOptions(e),s),vi(r,new d1(Le.AFTER_TRANSFORM,e));return}const u={};if(i&&Object.assign(u,this.getTranslateOptions(e)),je(a)&&Object.assign(u,this.getRotateOptions(e)),je(o)&&Object.assign(u,{zoom:this.getZoomOptions(e)}),l)return vi(r,new _o(Le.BEFORE_ANIMATE,Ma.TRANSFORM,null,e)),new Promise(c=>{this.transformResolver=c,this.camera.gotoLandmark(this.createLandmark(u),Object.assign(Object.assign({},l),{onfinish:()=>{vi(r,new _o(Le.AFTER_ANIMATE,Ma.TRANSFORM,null,e)),vi(r,new d1(Le.AFTER_TRANSFORM,e)),this.transformResolver=void 0,c()}}))});this.camera.gotoLandmark(this.createLandmark(u),{duration:0}),vi(r,new d1(Le.AFTER_TRANSFORM,e))})}fitView(e,n){return dg(this,void 0,void 0,function*(){const[r,i,a,o]=this.padding,{when:s="always",direction:l="both"}=e||{},[u,c]=this.context.canvas.getSize(),f=u-o-i,d=c-r-a,h=this.context.canvas.getBounds(),p=this.getBBoxInViewport(h),[g,v]=jc(p),m=l==="x"&&g>=f||l==="y"&&v>=d||l==="both"&&g>=f&&v>=d;if(s==="overflow"&&!m)return yield this.fitCenter({animation:n});const y=f/g,b=d/v,x=l==="x"?y:l==="y"?b:Math.min(y,b),w=this.getAnimation(n);yield this.transform({mode:"relative",scale:x,translate:kt(In(this.getCanvasCenter(),this.getBBoxInViewport(h).center),As(this.paddingOffset,x))},w)})}fitCenter(e){return dg(this,void 0,void 0,function*(){const n=this.context.canvas.getBounds();yield this.focus(n,e)})}focusElements(e){return dg(this,arguments,void 0,function*(n,r={}){const{element:i}=this.context;if(!i)return;const a=s=>r.shapes?s.getShape(r.shapes).getRenderBounds():s.getRenderBounds(),o=im(n.map(s=>a(i.getElement(s))));yield this.focus(o,r)})}focus(e,n){return dg(this,void 0,void 0,function*(){const r=this.context.graph.getViewportByCanvas(e.center),i=n.position||this.getCanvasCenter(),a=In(i,r);yield this.transform({mode:"relative",translate:kt(a,this.paddingOffset)},n.animation)})}getBBoxInViewport(e){const{min:n,max:r}=e,{graph:i}=this.context,[a,o]=i.getViewportByCanvas(n),[s,l]=i.getViewportByCanvas(r),u=new zn;return u.setMinMax([a,o,0],[s,l,0]),u}isInViewport(e,n=!1,r=0){const{graph:i}=this.context,a=this.getCanvasSize(),[o,s]=i.getCanvasByViewport([0,0]),[l,u]=i.getCanvasByViewport(a);let c=new zn;return c.setMinMax([o,s,0],[l,u,0]),r&&(c=Bc(c,r)),cp(e)?ks(e,c):n?LUe(e,c):c.intersects(e)}cancelAnimation(){var e,n;!((e=this.camera.landmarks)===null||e===void 0)&&e.length&&this.camera.cancelLandmarkAnimation(),(n=this.transformResolver)===null||n===void 0||n.call(this)}}var qn=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};class Wc extends kp{constructor(e){var n;super(),this.options={},this.rendered=!1,this.destroyed=!1,this.context={model:new Wat},this.isCollapsingExpanding=!1,this.onResize=gp(()=>{this.resize()},300),this._setOptions(Object.assign({},Wc.defaultOptions,e),!0),this.context.graph=this,this.options.autoResize&&((n=globalThis.addEventListener)===null||n===void 0||n.call(globalThis,"resize",this.onResize))}getOptions(){return this.options}setOptions(e){this._setOptions(e,!1)}_setOptions(e,n){if(this.updateCanvas(e),Object.assign(this.options,Uat(e)),n){const{data:d}=e;d&&this.addData(d);return}const{behaviors:r,combo:i,data:a,edge:o,layout:s,node:l,plugins:u,theme:c,transforms:f}=e;r&&this.setBehaviors(r),a&&this.setData(a),l&&this.setNode(l),o&&this.setEdge(o),i&&this.setCombo(i),s&&this.setLayout(s),c&&this.setTheme(c),u&&this.setPlugins(u),f&&this.setTransforms(f)}getSize(){return this.context.canvas?this.context.canvas.getSize():[this.options.width||0,this.options.height||0]}setSize(e,n){e&&(this.options.width=e),n&&(this.options.height=n),this.resize(e,n)}setZoomRange(e){this.options.zoomRange=e}getZoomRange(){return this.options.zoomRange}setNode(e){this.options.node=e,this.context.model.refreshData()}setEdge(e){this.options.edge=e,this.context.model.refreshData()}setCombo(e){this.options.combo=e,this.context.model.refreshData()}getTheme(){return this.options.theme}setTheme(e){this.options.theme=Ue(e)?e(this.getTheme()):e}setLayout(e){this.options.layout=Ue(e)?e(this.getLayout()):e}getLayout(){return this.options.layout}setBehaviors(e){var n;this.options.behaviors=Ue(e)?e(this.getBehaviors()):e,(n=this.context.behavior)===null||n===void 0||n.setBehaviors(this.options.behaviors)}updateBehavior(e){this.setBehaviors(n=>n.map(r=>typeof r=="object"&&r.key===e.key?Object.assign(Object.assign({},r),e):r))}getBehaviors(){return this.options.behaviors||[]}setPlugins(e){var n;this.options.plugins=Ue(e)?e(this.getPlugins()):e,(n=this.context.plugin)===null||n===void 0||n.setPlugins(this.options.plugins)}updatePlugin(e){this.setPlugins(n=>n.map(r=>typeof r=="object"&&r.key===e.key?Object.assign(Object.assign({},r),e):r))}getPlugins(){return this.options.plugins||[]}getPluginInstance(e){return this.context.plugin.getPluginInstance(e)}setTransforms(e){var n;this.options.transforms=Ue(e)?e(this.getTransforms()):e,(n=this.context.transform)===null||n===void 0||n.setTransforms(this.options.transforms)}updateTransform(e){this.setTransforms(n=>n.map(r=>typeof r=="object"&&r.key===e.key?Object.assign(Object.assign({},r),e):r)),this.context.model.refreshData()}getTransforms(){return this.options.transforms||[]}getData(){return this.context.model.getData()}getElementData(e){return Array.isArray(e)?e.map(n=>this.context.model.getElementDataById(n)):this.context.model.getElementDataById(e)}getNodeData(e){return e===void 0?this.context.model.getNodeData():Array.isArray(e)?this.context.model.getNodeData(e):this.context.model.getNodeLikeDatum(e)}getEdgeData(e){return e===void 0?this.context.model.getEdgeData():Array.isArray(e)?this.context.model.getEdgeData(e):this.context.model.getEdgeDatum(e)}getComboData(e){return e===void 0?this.context.model.getComboData():Array.isArray(e)?this.context.model.getComboData(e):this.context.model.getNodeLikeDatum(e)}setData(e){this.context.model.setData(Ue(e)?e(this.getData()):e)}addData(e){this.context.model.addData(Ue(e)?e(this.getData()):e)}addNodeData(e){this.context.model.addNodeData(Ue(e)?e(this.getNodeData()):e)}addEdgeData(e){this.context.model.addEdgeData(Ue(e)?e(this.getEdgeData()):e)}addComboData(e){this.context.model.addComboData(Ue(e)?e(this.getComboData()):e)}addChildrenData(e,n){this.context.model.addChildrenData(e,n)}updateData(e){this.context.model.updateData(Ue(e)?e(this.getData()):e)}updateNodeData(e){this.context.model.updateNodeData(Ue(e)?e(this.getNodeData()):e)}updateEdgeData(e){this.context.model.updateEdgeData(Ue(e)?e(this.getEdgeData()):e)}updateComboData(e){this.context.model.updateComboData(Ue(e)?e(this.getComboData()):e)}removeData(e){this.context.model.removeData(Ue(e)?e(this.getData()):e)}removeNodeData(e){this.context.model.removeNodeData(Ue(e)?e(this.getNodeData()):e)}removeEdgeData(e){this.context.model.removeEdgeData(Ue(e)?e(this.getEdgeData()):e)}removeComboData(e){this.context.model.removeComboData(Ue(e)?e(this.getComboData()):e)}getElementType(e){return this.context.model.getElementType(e)}getRelatedEdgesData(e,n="both"){return this.context.model.getRelatedEdgesData(e,n)}getNeighborNodesData(e){return this.context.model.getNeighborNodesData(e)}getAncestorsData(e,n){return this.context.model.getAncestorsData(e,n)}getParentData(e,n){return this.context.model.getParentData(e,n)}getChildrenData(e){return this.context.model.getChildrenData(e)}getDescendantsData(e){return this.context.model.getDescendantsData(e)}getElementDataByState(e,n){return this.context.model.getElementDataByState(e,n)}initCanvas(){return qn(this,void 0,void 0,function*(){var e;if(this.context.canvas)return yield this.context.canvas.ready;const{container:n="container",width:r,height:i,renderer:a,cursor:o,background:s,canvas:l,devicePixelRatio:u=(e=globalThis.devicePixelRatio)!==null&&e!==void 0?e:1}=this.options;if(n instanceof qY)this.context.canvas=n,o&&n.setCursor(o),a&&n.setRenderer(a),yield n.ready;else{const c=an(n)?document.getElementById(n):n,f=HY(c);this.emit(Le.BEFORE_CANVAS_INIT,{container:c,width:r,height:i});const d=Object.assign(Object.assign({},l),{container:c,width:r||f[0],height:i||f[1],background:s,renderer:a,cursor:o,devicePixelRatio:u}),h=new qY(d);this.context.canvas=h,yield h.ready,this.emit(Le.AFTER_CANVAS_INIT,{canvas:h})}})}updateCanvas(e){var n,r;const{renderer:i,cursor:a,height:o,width:s}=e,l=this.context.canvas;l&&(i&&(this.emit(Le.BEFORE_RENDERER_CHANGE,{renderer:this.options.renderer}),l.setRenderer(i),this.emit(Le.AFTER_RENDERER_CHANGE,{renderer:i})),a&&l.setCursor(a),(je(s)||je(o))&&this.setSize((n=s??this.options.width)!==null&&n!==void 0?n:0,(r=o??this.options.height)!==null&&r!==void 0?r:0))}initRuntime(){this.context.options=this.options,this.context.batch||(this.context.batch=new Bat(this.context)),this.context.plugin||(this.context.plugin=new Zat(this.context)),this.context.viewport||(this.context.viewport=new Jat(this.context)),this.context.transform||(this.context.transform=new Kat(this.context)),this.context.element||(this.context.element=new Gat(this.context)),this.context.animation||(this.context.animation=new jat(this.context)),this.context.layout||(this.context.layout=new Yat(this.context)),this.context.behavior||(this.context.behavior=new $at(this.context))}prepare(){return qn(this,void 0,void 0,function*(){if(yield Promise.resolve(),this.destroyed){console.error(Ul("The graph instance has been destroyed"));return}yield this.initCanvas(),this.initRuntime()})}render(){return qn(this,void 0,void 0,function*(){if(yield this.prepare(),vi(this,new ni(Le.BEFORE_RENDER)),this.options.layout)if(!this.rendered&&RZe(this.options.layout)){const e=yield this.context.element.preLayoutDraw({type:"render"});yield Promise.all([e==null?void 0:e.finished,this.autoFit()])}else{const e=this.context.element.draw({type:"render"});yield Promise.all([e==null?void 0:e.finished,this.context.layout.postLayout()]),yield this.autoFit()}else{const e=this.context.element.draw({type:"render"});yield Promise.all([e==null?void 0:e.finished,this.autoFit()])}this.rendered=!0,vi(this,new ni(Le.AFTER_RENDER))})}draw(){return qn(this,void 0,void 0,function*(){var e;yield this.prepare(),yield(e=this.context.element.draw())===null||e===void 0?void 0:e.finished})}layout(e){return qn(this,void 0,void 0,function*(){yield this.context.layout.postLayout(e)})}stopLayout(){this.context.layout.stopLayout()}clear(){return qn(this,void 0,void 0,function*(){const{model:e,element:n}=this.context;e.setData({}),e.clearChanges(),n==null||n.clear()})}destroy(){var e;vi(this,new ni(Le.BEFORE_DESTROY));const{layout:n,animation:r,element:i,model:a,canvas:o,behavior:s,plugin:l}=this.context;l==null||l.destroy(),s==null||s.destroy(),n==null||n.destroy(),r==null||r.destroy(),i==null||i.destroy(),a.destroy(),o==null||o.destroy(),this.options={},this.context={},this.off(),(e=globalThis.removeEventListener)===null||e===void 0||e.call(globalThis,"resize",this.onResize),this.destroyed=!0,vi(this,new ni(Le.AFTER_DESTROY))}getCanvas(){return this.context.canvas}resize(e,n){var r;const i=HY((r=this.context.canvas)===null||r===void 0?void 0:r.getContainer()),a=[e||i[0],n||i[1]];if(!this.context.canvas)return;const o=this.context.canvas.getSize();br(a,o)||(vi(this,new ni(Le.BEFORE_SIZE_CHANGE,{size:a})),this.context.canvas.resize(...a),vi(this,new ni(Le.AFTER_SIZE_CHANGE,{size:a})))}fitView(e,n){return qn(this,void 0,void 0,function*(){var r;yield(r=this.context.viewport)===null||r===void 0?void 0:r.fitView(e,n)})}fitCenter(e){return qn(this,void 0,void 0,function*(){var n;yield(n=this.context.viewport)===null||n===void 0?void 0:n.fitCenter({animation:e})})}autoFit(){return qn(this,void 0,void 0,function*(){const{autoFit:e}=this.context.options;if(e)if(an(e))e==="view"?yield this.fitView():e==="center"&&(yield this.fitCenter());else{const{type:n,animation:r}=e;n==="view"?yield this.fitView(e.options,r):n==="center"&&(yield this.fitCenter(r))}})}focusElement(e,n){return qn(this,void 0,void 0,function*(){var r;yield(r=this.context.viewport)===null||r===void 0?void 0:r.focusElements(Array.isArray(e)?e:[e],{animation:n})})}zoomBy(e,n,r){return qn(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",scale:e,origin:r},n)})}zoomTo(e,n,r){return qn(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",scale:e,origin:r},n)})}getZoom(){return this.context.viewport.getZoom()}rotateBy(e,n,r){return qn(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",rotate:e,origin:r},n)})}rotateTo(e,n,r){return qn(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",rotate:e,origin:r},n)})}getRotation(){return this.context.viewport.getRotation()}translateBy(e,n){return qn(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",translate:e},n)})}translateTo(e,n){return qn(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",translate:e},n)})}getPosition(){return In([0,0],this.getCanvasByViewport([0,0]))}translateElementBy(e,n){return qn(this,arguments,void 0,function*(r,i,a=!0){var o,s;const[l,u]=jr(r)?[r,(o=i)!==null&&o!==void 0?o:!0]:[{[r]:i},a];Object.entries(l).forEach(([c,f])=>this.context.model.translateNodeLikeBy(c,f)),yield(s=this.context.element.draw({animation:u,stage:"translate"}))===null||s===void 0?void 0:s.finished})}translateElementTo(e,n){return qn(this,arguments,void 0,function*(r,i,a=!0){var o,s;const[l,u]=jr(r)?[r,(o=i)!==null&&o!==void 0?o:!0]:[{[r]:i},a];Object.entries(l).forEach(([c,f])=>this.context.model.translateNodeLikeTo(c,f)),yield(s=this.context.element.draw({animation:u,stage:"translate"}))===null||s===void 0?void 0:s.finished})}getElementPosition(e){return this.context.model.getElementPosition(e)}getElementRenderStyle(e){return vp(this.context.element.getElement(e).attributes,["context"])}setElementVisibility(e,n){return qn(this,arguments,void 0,function*(r,i,a=!0){var o,s;const[l,u]=jr(r)?[r,(o=i)!==null&&o!==void 0?o:!0]:[{[r]:i},a],c={nodes:[],edges:[],combos:[]};Object.entries(l).forEach(([h,p])=>{const g=this.getElementType(h);c[`${g}s`].push({id:h,style:{visibility:p}})});const{model:f,element:d}=this.context;f.preventUpdateNodeLikeHierarchy(()=>{f.updateData(c)}),yield(s=d.draw({animation:u,stage:"visibility"}))===null||s===void 0?void 0:s.finished})}showElement(e,n){return qn(this,void 0,void 0,function*(){const r=Array.isArray(e)?e:[e];yield this.setElementVisibility(Object.fromEntries(r.map(i=>[i,"visible"])),n)})}hideElement(e,n){return qn(this,void 0,void 0,function*(){const r=Array.isArray(e)?e:[e];yield this.setElementVisibility(Object.fromEntries(r.map(i=>[i,"hidden"])),n)})}getElementVisibility(e){var n,r;const i=this.context.element.getElement(e);return(r=(n=i==null?void 0:i.style)===null||n===void 0?void 0:n.visibility)!==null&&r!==void 0?r:"visible"}setElementZIndex(e,n){return qn(this,void 0,void 0,function*(){var r;const i={nodes:[],edges:[],combos:[]},a=jr(e)?e:{[e]:n};Object.entries(a).forEach(([l,u])=>{const c=this.getElementType(l);i[`${c}s`].push({id:l,style:{zIndex:u}})});const{model:o,element:s}=this.context;o.preventUpdateNodeLikeHierarchy(()=>o.updateData(i)),yield(r=s.draw({animation:!1,stage:"zIndex"}))===null||r===void 0?void 0:r.finished})}frontElement(e){return qn(this,void 0,void 0,function*(){const n=Array.isArray(e)?e:[e],{model:r}=this.context,i={};n.map(a=>{const o=r.getFrontZIndex(a);if(r.getElementType(a)==="combo"){const l=r.getAncestorsData(a,Fn).at(-1)||this.getComboData(a),u=[l,...r.getDescendantsData(ce(l))],c=o-YY(l);u.forEach(d=>{i[ce(d)]=this.getElementZIndex(ce(d))+c});const{internal:f}=fD(u.map(ce),d=>r.getRelatedEdgesData(d));f.forEach(d=>{const h=ce(d);i[h]=this.getElementZIndex(h)+c})}else i[a]=o}),yield this.setElementZIndex(i)})}getElementZIndex(e){return YY(this.context.model.getElementDataById(e))}setElementState(e,n){return qn(this,arguments,void 0,function*(r,i,a=!0){var o,s;const[l,u]=jr(r)?[r,(o=i)!==null&&o!==void 0?o:!0]:[{[r]:i},a],c=d=>d?Array.isArray(d)?d:[d]:[],f={nodes:[],edges:[],combos:[]};Object.entries(l).forEach(([d,h])=>{const p=this.getElementType(d);f[`${p}s`].push({id:d,states:c(h)})}),this.updateData(f),yield(s=this.context.element.draw({animation:u,stage:"state"}))===null||s===void 0?void 0:s.finished})}getElementState(e){return this.context.model.getElementState(e)}getElementRenderBounds(e){return this.context.element.getElement(e).getRenderBounds()}collapseElement(e){return qn(this,arguments,void 0,function*(n,r=!0){const{model:i,element:a}=this.context;if(Ia(i.getNodeLikeData([n])[0])||this.isCollapsingExpanding)return;typeof r=="boolean"&&(r={animation:r,align:!0});const o=i.getElementType(n);yield this.frontElement(n),this.isCollapsingExpanding=!0,this.setElementCollapsibility(n,!0),o==="node"?yield a.collapseNode(n,r):o==="combo"&&(yield a.collapseCombo(n,!!r.animation)),this.isCollapsingExpanding=!1})}expandElement(e){return qn(this,arguments,void 0,function*(n,r=!0){const{model:i,element:a}=this.context;if(!Ia(i.getNodeLikeData([n])[0])||this.isCollapsingExpanding)return;typeof r=="boolean"&&(r={animation:r,align:!0});const o=i.getElementType(n);this.isCollapsingExpanding=!0,this.setElementCollapsibility(n,!1),o==="node"?yield a.expandNode(n,r):o==="combo"&&(yield a.expandCombo(n,!!r.animation)),this.isCollapsingExpanding=!1})}setElementCollapsibility(e,n){const r=this.getElementType(e);r==="node"?this.updateNodeData([{id:e,style:{collapsed:n}}]):r==="combo"&&this.updateComboData([{id:e,style:{collapsed:n}}])}toDataURL(){return qn(this,arguments,void 0,function*(e={}){return this.context.canvas.toDataURL(e)})}getCanvasByViewport(e){return this.context.canvas.getCanvasByViewport(e)}getViewportByCanvas(e){return this.context.canvas.getViewportByCanvas(e)}getClientByCanvas(e){return this.context.canvas.getClientByCanvas(e)}getCanvasByClient(e){return this.context.canvas.getCanvasByClient(e)}getViewportCenter(){return this.context.viewport.getViewportCenter()}getCanvasCenter(){return this.context.viewport.getCanvasCenter()}on(e,n,r){return super.on(e,n,r)}once(e,n){return super.once(e,n)}off(e,n){return super.off(e,n)}}Wc.defaultOptions={autoResize:!1,theme:"light",rotation:0,zoom:1,zoomRange:[.01,10]};var Qat=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function V4(t,e){const{getNodeData:n=(s,l)=>{if(s.depth=l,!s.children)return s;const{children:u}=s,c=Qat(s,["children"]);return Object.assign(Object.assign({},c),{children:u.map(f=>f.id)})},getEdgeData:r=(s,l)=>({source:s.id,target:l.id}),getChildren:i=s=>s.children||[]}=e||{},a=[],o=[];return Mf(t,(s,l)=>{a.push(n(s,l));const u=i(s);for(const c of u)o.push(r(s,c))},s=>i(s),"TB"),{nodes:a,edges:o}}class eot extends bu{beforeDraw(e){const{add:n,update:r}=e,{model:i}=this.context;return[...n.edges.entries(),...r.edges.entries()].forEach(([,a])=>{Afe(i,a)}),e}}const Afe=(t,e)=>{const{source:n,target:r}=e,i=t.getElementDataById(n),a=t.getElementDataById(r),o=XB(i,f=>t.getParentData(f,Fn)),s=XB(a,f=>t.getParentData(f,Fn)),l=ce(o),u=ce(s),c={sourceNode:l,targetNode:u};return e.style?Object.assign(e.style,c):e.style=c,e},tot=(t,e,n)=>{const[r,i]=e,[a,o]=n;if(i===r)return a;const s=(t-r)/(i-r);return a+s*(o-a)},not=(t,e,n)=>{const[r,i]=e,[a,o]=n,s=Math.log(t-r+1)/Math.log(i-r+1);return a+s*(o-a)},rot=(t,e,n,r=2)=>{const[i,a]=e,[o,s]=n,l=Math.pow((t-i)/(a-i),r);return o+l*(s-o)},iot=(t,e,n)=>{const[r,i]=e,[a,o]=n,s=Math.sqrt((t-r)/(i-r));return a+s*(o-a)};class M_ extends bu{constructor(e,n){super(e,me({},M_.defaultOptions,n)),this.assignSizeByCentrality=(r,i,a,o,s,l)=>{const u=[i,a],c=[o[0],s[0]],f=[o[1],s[1]],d=[o[2],s[2]],h=(p,g)=>{if(typeof l=="function")return l(p,u,g);switch(l){case"linear":return tot(p,u,g);case"log":return not(p,u,g);case"pow":return rot(p,u,g,2);case"sqrt":return iot(p,u,g);default:return g[0]}};return[h(r,c),h(r,f),h(r,d)]}}beforeDraw(e){const{model:n}=this.context,r=n.getNodeData(),i=ao(this.options.maxSize),a=ao(this.options.minSize),o=this.getCentralities(this.options.centrality),s=o.size>0?Math.max(...o.values()):0,l=o.size>0?Math.min(...o.values()):0;return r.forEach(u=>{var c;const f=this.assignSizeByCentrality(o.get(ce(u))||0,l,s,a,i,this.options.scale),d=(c=this.context.element)===null||c===void 0?void 0:c.getElement(ce(u)),h={size:f};this.assignLabelStyle(h,f,u,d),(!d||!W1(h,d.attributes))&&no(e,d?"update":"add","node",me(u,{style:h}),!0)}),e}assignLabelStyle(e,n,r,i){var a;const o=i?i.config.style:(a=this.context.element)===null||a===void 0?void 0:a.getElementComputedStyle("node",r);if(Object.assign(e,mc(o,["labelFontSize","labelLineHeight"])),this.options.mapLabelSize){const s=this.getLabelSizeByNodeSize(n,1/0,Number(e.labelFontSize));Object.assign(e,{labelFontSize:s,labelLineHeight:s+IUe(e.labelPadding)})}return e}getLabelSizeByNodeSize(e,n,r){const i=Math.min(...e)/2,[a,o]=Array.isArray(this.options.mapLabelSize)?this.options.mapLabelSize:[r,n];return Math.min(o,Math.max(i,a))}getCentralities(e){const{model:n}=this.context,r=n.getData();if(typeof e=="function")return e(r);const i=n.getRelatedEdgesData.bind(n);return nue(r,i,e)}}M_.defaultOptions={centrality:{type:"degree"},maxSize:80,minSize:20,scale:"linear",mapLabelSize:!1};class C_ extends bu{constructor(e,n){super(e,Object.assign({},C_.defaultOptions,n))}get ref(){return this.context.model.getRootsData()[0]}afterLayout(){var e;const n=Yr(this.ref),{graph:r,model:i}=this.context;(e=i.getData().nodes)===null||e===void 0||e.forEach(o=>{var s;if(ce(o)===ce(this.ref))return;const l=iue(In(Yr(o),n)),u=Math.abs(l)>Math.PI/2,c=!o.children||o.children.length===0,f=ce(o),d=(s=this.context.element)===null||s===void 0?void 0:s.getElement(f);if(!d||!d.isVisible())return;const h=ao(r.getElementRenderStyle(f).size)[0]/2,p=(c?1:-1)*(h+this.options.offset),g=[["translate",p*Math.cos(l),p*Math.sin(l)],["rotate",u?Pa(l)+180:Pa(l)]];i.updateNodeData([{id:ce(o),style:{labelTextAlign:u===c?"right":"left",labelTextBaseline:"middle",labelTransform:g}}])}),r.draw()}}C_.defaultOptions={offset:5};const aot="quadratic",ZY=["top","top-right","right","right-bottom","bottom","bottom-left","left","left-top"];class P_ extends bu{constructor(e,n){super(e,Object.assign({},P_.defaultOptions,n)),this.cacheMergeStyle=new Map,this.getAffectedParallelEdges=r=>{const{add:{edges:i},update:{nodes:a,edges:o,combos:s},remove:{edges:l}}=r,{model:u}=this.context,c=new Map,f=(p,g)=>{u.getRelatedEdgesData(g).forEach(m=>!c.has(ce(m))&&c.set(ce(m),m))};a.forEach(f),s.forEach(f);const d=p=>{const g=u.getEdgeData().map(m=>Afe(u,m));oot(p,g).forEach(m=>!c.has(ce(m))&&c.set(ce(m),m))};if(l.size&&l.forEach(d),i.size&&i.forEach(d),o.size){const p=wfe(j4(u.getChanges())).update.edges;o.forEach(g=>{var v;d(g);const m=(v=p.find(y=>ce(y.value)===ce(g)))===null||v===void 0?void 0:v.original;m&&!q4(g,m)&&d(m)})}Ys(this.options.edges)||c.forEach((p,g)=>!this.options.edges.includes(g)&&c.delete(g));const h=u.getEdgeData().map(ce);return new Map([...c].sort((p,g)=>h.indexOf(p[0])-h.indexOf(g[0])))},this.applyBundlingStyle=(r,i,a)=>{const{edgeMap:o,reverses:s}=KY(i);o.forEach(l=>{l.forEach((u,c,f)=>{var d;const h=f.length,p=u.style||{};if(u.source===u.target){const m=ZY.length;p.loopPlacement=ZY[c%m],p.loopDist=Math.floor(c/m)*a+50}else if(h===1)p.curveOffset=0;else{const m=(c%2===0?1:-1)*(s[`${u.source}|${u.target}|${c}`]?-1:1);p.curveOffset=h%2===1?m*Math.ceil(c/2)*a*2:m*(Math.floor(c/2)*a*2+a)}const g=Object.assign(u,{type:aot,style:p}),v=(d=this.context.element)===null||d===void 0?void 0:d.getElement(ce(u));(!v||!W1(g.style,v.attributes))&&no(r,v?"update":"add","edge",g,!0)})})},this.resetEdgeStyle=r=>{const i=r.style||{},a=this.cacheMergeStyle.get(ce(r))||{};return Object.keys(a).forEach(o=>{br(i[o],a[o])&&(r[o]?i[o]=r[o]:delete i[o])}),Object.assign(r,{style:i})},this.applyMergingStyle=(r,i)=>{const{edgeMap:a,reverses:o}=KY(i);a.forEach(s=>{var l;if(s.length===1){const c=s[0],f=(l=this.context.element)===null||l===void 0?void 0:l.getElement(ce(c)),d=this.resetEdgeStyle(c);(!f||!W1(d,f.attributes))&&no(r,f?"update":"add","edge",d);return}const u=s.map(({source:c,target:f,style:d={}},h)=>{const{startArrow:p,endArrow:g}=d,v={},[m,y]=o[`${c}|${f}|${h}`]?["endArrow","startArrow"]:["startArrow","endArrow"];return M0(p)&&(v[m]=p),M0(g)&&(v[y]=g),v}).reduce((c,f)=>Object.assign(Object.assign({},c),f),{});s.forEach((c,f,d)=>{var h;if(f!==0){no(r,"remove","edge",c);return}const p=Object.assign({},Ue(this.options.style)?this.options.style(d):this.options.style,{childrenData:d});this.cacheMergeStyle.set(ce(c),p);const g=Object.assign(Object.assign({},c),{type:"line",style:Object.assign(Object.assign(Object.assign({},c.style),u),p)}),v=(h=this.context.element)===null||h===void 0?void 0:h.getElement(ce(c));(!v||!W1(g.style,v.attributes))&&no(r,v?"update":"add","edge",g,!0)})})}}beforeDraw(e){const n=this.getAffectedParallelEdges(e);return n.size===0||(this.options.mode==="bundle"?this.applyBundlingStyle(e,n,this.options.distance):this.applyMergingStyle(e,n)),e}}P_.defaultOptions={mode:"bundle",distance:15};const KY=t=>{const e=new Map,n=new Set,r={},i=new Map;for(const[a,o]of t){if(n.has(a))continue;const{source:s,target:l}=o,u=`${s}-${l}`;e.has(u)||(e.set(u,[]),i.set(u,new Set));const c=e.get(u),f=i.get(u);c&&f&&!f.has(a)&&(c.push(o),f.add(a),n.add(a));for(const[d,h]of t)if(!(n.has(d)||d===a)&&q4(o,h)){const p=e.get(u),g=i.get(u);p&&g&&!g.has(d)&&(p.push(h),g.add(d),s===h.target&&l===h.source&&(r[`${h.source}|${h.target}|${p.length-1}`]=!0),n.add(d))}}return{edgeMap:e,reverses:r}},oot=(t,e,n)=>e.filter(r=>q4(r,t)),q4=(t,e)=>{const{sourceNode:n,targetNode:r}=t.style||{},{sourceNode:i,targetNode:a}=e.style||{};return n===i&&r===a||n===a&&r===i};class sot extends bu{beforeDraw(e,n){const{stage:r}=n;if(r==="visibility")return e;const{model:i}=this.context,{update:{nodes:a,edges:o,combos:s}}=e,l=(u,c)=>{i.getRelatedEdgesData(c).forEach(d=>!o.has(ce(d))&&o.set(ce(d),d))};return a.forEach(l),s.forEach(l),e}}const lot={animation:{"combo-collapse":Kle,"combo-expand":CUe,"node-collapse":Xle,"node-expand":TUe,"path-in":Zle,"path-out":MUe,fade:kUe,translate:AUe},behavior:{"brush-select":am,"click-select":yw,"collapse-expand":Cw,"create-edge":Pw,"drag-canvas":Dw,"drag-element-force":zZe,"drag-element":cm,"fix-element-size":Lw,"focus-element":Rw,"hover-activate":Nw,"lasso-select":BZe,"auto-adapt-label":gw,"optimize-viewport-transform":Fw,"scroll-canvas":zw,"zoom-canvas":jw},combo:{circle:zXe,rect:jXe},edge:{cubic:gd,line:Mue,polyline:Aw,quadratic:Tw,"cubic-horizontal":Ew,"cubic-radial":Ow,"cubic-vertical":kw},layout:{"antv-dagre":VJe,"combo-combined":FQe,"compact-box":r1.compactBox,"d3-force":zQe,"force-atlas2":irt,circular:GJe,concentric:yD,dagre:a_,dendrogram:r1.dendrogram,fishbone:o_,force:nce,fruchterman:srt,grid:urt,indented:r1.indented,mds:ice,mindmap:r1.mindmap,radial:yrt,random:Ort,snake:s_},node:{circle:lm,diamond:CXe,ellipse:ww,hexagon:RXe,html:_w,image:wue,rect:Sue,star:FXe,donut:xw,triangle:Sw},palette:{spectral:$rt,tableau:Vrt,oranges:qrt,greens:Wrt,blues:Grt},theme:{dark:Tat,light:Cat},plugin:{"bubble-sets":c_,"edge-bundling":d_,"edge-filter-lens":h_,"grid-line":v_,background:l_,contextmenu:f_,fisheye:p_,fullscreen:g_,history:m_,hull:b_,legend:x_,minimap:w_,snapline:__,timebar:S_,toolbar:E_,tooltip:O_,watermark:k_},transform:{"arrange-draw-order":Pat,"collapse-expand-combo":Dat,"collapse-expand-node":Iat,"get-edge-actual-ends":eot,"map-node-size":M_,"place-radial-labels":C_,"process-parallel-edges":P_,"update-related-edges":sot},shape:{circle:$a,ellipse:xp,group:fr,html:ud,image:l4,line:Es,path:yr,polygon:Ic,polyline:Gv,rect:Vr,text:Va,label:vu,badge:pd}};function uot(){Object.entries(lot).forEach(([t,e])=>{Object.entries(e).forEach(([n,r])=>{A_(t,n,r)})})}uot();const W4=["#1783FF","#F08F56","#D580FF","#00C9C9","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"],Tfe=["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],Gx=class Gx extends bu{constructor(e,n){super(e,Object.assign({},Gx.defaultOptions,n))}beforeDraw(e){const n=this.context.model.getNodeData();if(n.length===0)return e;let r=0;const i=(a,o)=>{var l;const s=n.find(u=>u.id==a);s&&(s.style||(s.style={}),s.style.color=o||this.options.colors[r++%this.options.colors.length],(l=s.children)==null||l.forEach(u=>{var c;return i(u,(c=s.style)==null?void 0:c.color)}))};return n.filter(a=>a.depth===1).forEach(a=>i(a.id)),e}};yt(Gx,"defaultOptions",{colors:W4});let OD=Gx;class cot extends Sue{get data(){return this.context.model.getElementDataById(this.id).data}getLabelStyle(){return{text:this.data.name,fill:"#2078B4",fontSize:16,fontWeight:400,textAlign:"left",transform:[["translate",-55,-10]]}}getKeyStyle(e){return{...super.getKeyStyle(e),fill:"#fff"}}drawDescriptionShape(e,n){const r={text:this.data.description||"-",fontSize:14,fill:"#343f4a",textAlign:"left",fontStyle:"italic",transform:[["translate",-55,10]],wordWrapWidth:152};this.upsert("position",vu,r,n)}drawOrganizationIconShape(e,n){var a;const{fill:r="#1783FF"}=e,i={text:(((a=this.data)==null?void 0:a.name)||"V").slice(0,1),fontSize:18,textAlign:"center",transform:[["translate",-200/2+32/2+8,0]],fill:"#000",backgroundFill:r,backgroundRadius:4,backgroundWidth:32,backgroundHeight:32,backgroundOpacity:.5};this.upsert("organization-icon",pd,i,n)}render(e=this.parsedAttributes,n=this){super.render(e,n),this.drawDescriptionShape(e,n),this.drawOrganizationIconShape(e,n)}}function fot(t){return V4(t,{getNodeData:(e,n)=>{const{children:r,...i}=e;return{id:e.name,depth:n,data:{depth:n,...i}}},getEdgeData:(e,n)=>({source:e.name,target:n.name})})}function dot(t,e){return t.reduce((n,r)=>{const i=e(r);return n[i]||(n[i]=[]),n[i].push(r),n},{})}A_(Sc.TRANSFORM,"assign-color-by-branch",OD);const hot={type:"light",view:{viewFill:"#FFF",plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},interval:{rect:{fillOpacity:.8}},line:{line:{lineWidth:2}},area:{area:{fillOpacity:.6}},point:{point:{lineWidth:1}}},pot={type:"academy",view:{viewFill:"#FFF",plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},interval:{rect:{fillOpacity:.8}},line:{line:{lineWidth:2}},area:{area:{fillOpacity:.6}},point:{point:{lineWidth:1}}},Li={default:hot,academy:pot},mm={default:{type:"assign-color-by-branch",colors:W4},academy:{type:"assign-color-by-branch",colors:Tfe}},got=St({time:dt(),value:Gi([cr({message:"value must be a number"}),dt({message:"value must be a string"})]),group:dt().optional()}),Mfe={data:Rn(got).describe("Data for area chart, such as, [{ time: '2018', value: 99.9 }].").nonempty({message:"Area chart data cannot be empty."}),stack:T0().optional().default(!1).describe("Whether stacking is enabled. When enabled, area charts require a 'group' field in the data."),title:Di,theme:Ir,axisXTitle:El,axisYTitle:gu},vot={name:"generate_area_chart",description:"Generate a area chart to show data trends under continuous independent variables and observe the overall data trend, such as, displacement = velocity (average or instantaneous)  time: s = v  t. If the x-axis is time (t) and the y-axis is velocity (v) at each moment, an area chart allows you to observe the trend of velocity over time and infer the distance traveled by the area's size.",inputSchema:Lr(Mfe)},mot=St(Mfe),yot=Xt({props:{data:{type:Object,required:!0},stack:{type:Boolean,default:!1},title:{type:String,default:"default"},theme:{type:String,default:"default"},axisXTitle:{type:String,default:""},axisYTitle:{type:String,default:""}},setup:t=>{let e=null;const n=st(),{data:r,stack:i,title:a,theme:o,axisXTitle:s,axisYTitle:l}=bn(t),u=De(()=>r.value.map(p=>({time:p.time,value:typeof p.value=="string"?parseFloat(p.value):p.value,group:p.group})));let c={},f=[],d=[];i.value?(c={x:"time",y:"value",color:"group"},f=[{type:"stackY"}],d=[{type:"area",style:{fillOpacity:.6}},{type:"line",style:{lineWidth:2,strokeOpacity:.6}}]):(c={x:"time",y:"value"},d=[{type:"area",style:{fillOpacity:.6,...o.value==="academy"?{}:{fill:"linear-gradient(-90deg, white 0%, #3A95FF 100%)"}}},{type:"line",style:{lineWidth:2,strokeOpacity:.6}},{type:"point",encode:{shape:"point"},style:{fill:"white",lineWidth:1}}]),on(()=>{e=h(n.value)});function h(p){return e=new Pi({container:p}),e.options({type:"view",theme:Li[o.value],title:{title:a.value,align:"center"},data:u.value,encode:c,autoFit:!0,legend:{color:{position:"right"}},transform:f,insetRight:12,style:{minHeight:1},axis:{y:{title:l.value||!1},x:{title:s.value||!1}},children:d}),e==null||e.render(),e}return()=>V("div",null,[V("div",{ref:n},null)])}}),bot={schema:mot,tool:vot,component:yot},xot=St({category:dt(),value:Gi([cr({message:"value must be a number"}),dt({message:"value must be a string"})]),group:dt().optional()}),Cfe={data:Rn(xot).describe("Data for bar chart, such as, [{ category: '', value: 10 }].").nonempty({message:"Bar chart data cannot be empty."}),group:T0().optional().default(!1).describe("Whether grouping is enabled. When enabled, bar charts require a 'group' field in the data. When `group` is true, `stack` should be false."),stack:T0().optional().default(!0).describe("Whether stacking is enabled. When enabled, bar charts require a 'group' field in the data. When `stack` is true, `group` should be false."),title:Di,theme:Ir,axisXTitle:El,axisYTitle:gu},wot={name:"generate_bar_chart",description:"Generate a bar chart to show data for numerical comparisons among different categories, such as, comparing categorical data and for horizontal comparisons.",inputSchema:Lr(Cfe)},_ot=St(Cfe),Sot=Xt({props:{data:{type:Object,required:!0},group:{type:Boolean,default:!1},stack:{type:Boolean,default:!0},title:{type:String,default:"default"},theme:{type:String,default:"default"},axisXTitle:{type:String,default:""},axisYTitle:{type:String,default:""}},setup:t=>{let e=null;const n=st(),{data:r,group:i,stack:a,title:o,theme:s,axisXTitle:l,axisYTitle:u}=bn(t),c=De(()=>r.value.map(v=>({category:v.category,value:typeof v.value=="string"?parseFloat(v.value):v.value,group:v.group}))),f=De(()=>{var v;return((v=(c.value||[])[0])==null?void 0:v.group)!==void 0});let d=[],h={},p={};s.value==="default"&&(h={radiusTopLeft:4,radiusTopRight:4}),i.value&&(d=[{type:"dodgeX"}]),a.value&&(d=[{type:"stackY"}]),f.value?p={x:"category",y:"value",color:"group"}:p={x:"category",y:"value",color:"category"},on(()=>{e=g(n.value)});function g(v){return e=new Pi({container:v}),e.options({type:"interval",theme:Li[s.value],title:{title:o.value,align:"center"},data:c.value,encode:p,autoFit:!0,legend:{color:{position:"right"}},transform:d,coordinate:{transform:[{type:"transpose"}]},insetRight:12,style:{...h,columnWidthRatio:.8},axis:{x:{title:u.value},y:{title:l.value}}}),e==null||e.render(),e}return()=>V("div",null,[V("div",{ref:n},null)])}}),Eot={schema:_ot,tool:wot,component:Sot},Oot=St({category:dt().describe("Category of the data point, such as ''."),value:Gi([cr({message:"value must be a number"}),dt({message:"value must be a string"})]).describe("Value of the data point, such as 10."),group:dt().optional().describe("Optional group for the data point, used for grouping in the boxplot.")}),Pfe={data:Rn(Oot).describe("Data for boxplot chart, such as, [{ category: '', value: 10 }] or [{ category: '', value: 20, group: '' }].").nonempty({message:"Boxplot chart data cannot be empty."}),theme:Ir,title:Di,axisXTitle:El,axisYTitle:gu},kot={name:"generate_boxplot_chart",description:"Generate a boxplot chart to show data for statistical summaries among different categories, such as, comparing the distribution of data points across categories.",inputSchema:Lr(Pfe)},Aot=St(Pfe),Tot=Xt({props:{data:{type:Object,required:!0},title:{type:String,default:"default"},theme:{type:String,default:"default"},axisXTitle:{type:String,default:""},axisYTitle:{type:String,default:""}},setup:t=>{let e=null;const n=st(),{data:r,theme:i,title:a,axisYTitle:o,axisXTitle:s}=bn(t),l=De(()=>r.value.map(d=>({category:d.category,value:typeof d.value=="string"?parseFloat(d.value):d.value,group:d.group}))),u=De(()=>{var d;return((d=(l.value||[])[0])==null?void 0:d.group)!==void 0});let c={};u.value?c={x:"category",y:"value",color:"group",series:"group"}:c={x:"category",y:"value",color:"category"},on(()=>{e=f(n.value)});function f(d){return e=new Pi({container:d}),e.options({type:"boxplot",theme:Li[i.value],title:{title:a.value,align:"center"},autoFit:!0,data:l.value,legend:{color:{position:"right"}},axis:{y:{title:o.value||!1},x:{title:s.value||!1}},encode:c,scale:{x:{paddingInner:.6,paddingOuter:.3},series:{paddingInner:.3,paddingOuter:.1}},style:{stroke:"black"}}),e.render(),e}return()=>V("div",null,[V("div",{ref:n},null)])}}),Mot={schema:Aot,tool:kot,component:Tot},Cot=St({category:dt(),value:Gi([cr({message:"value must be a number"}),dt({message:"value must be a string"})]),group:dt().optional()}),Dfe={data:Rn(Cot).describe("Data for column chart, such as, [{ category: '', value: 825, group: '' }].").nonempty({message:"Column chart data cannot be empty."}),group:T0().optional().default(!0).describe("Whether grouping is enabled. When enabled, column charts require a 'group' field in the data. When `group` is true, `stack` should be false."),stack:T0().optional().default(!1).describe("Whether stacking is enabled. When enabled, column charts require a 'group' field in the data. When `stack` is true, `group` should be false."),title:Di,theme:Ir,axisXTitle:El,axisYTitle:gu},Pot={name:"generate_column_chart",description:"Generate a column chart, which are best for comparing categorical data, such as, when values are close, column charts are preferable because our eyes are better at judging height than other visual elements like area or angles.",inputSchema:Lr(Dfe)},Dot=St(Dfe),Iot=Xt({props:{data:{type:Object,required:!0},group:{type:Boolean,default:!1},stack:{type:Boolean,default:!0},title:{type:String,default:"default"},theme:{type:String,default:"default"},axisXTitle:{type:String,default:""},axisYTitle:{type:String,default:""}},setup:t=>{let e=null;const n=st(),{data:r,group:i,stack:a,title:o,theme:s,axisXTitle:l,axisYTitle:u}=bn(t),c=De(()=>r.value.map(v=>({category:v.category,value:typeof v.value=="string"?parseFloat(v.value):v.value,group:v.group}))),f=De(()=>{var v;return((v=(c.value||[])[0])==null?void 0:v.group)!==void 0});let d=[],h={},p={};s.value==="default"&&(h={radiusTopLeft:4,radiusTopRight:4}),i.value&&(d=[{type:"dodgeX"}]),a.value&&(d=[{type:"stackY"}]),f.value?p={x:"category",y:"value",color:"group"}:p={x:"category",y:"value",color:"category"},on(()=>{e=g(n.value)});function g(v){return e=new Pi({container:v}),e.options({theme:Li[s.value],title:{title:o.value,align:"center"},data:c.value,type:"interval",encode:p,transform:d,insetRight:12,style:{...h,columnWidthRatio:.8},autoFit:!0,legend:{color:{position:"right"}},axis:{x:{title:l.value},y:{title:u.value}}}),e==null||e.render(),e}return()=>V("div",null,[V("div",{ref:n},null)])}}),Lot={schema:Dot,tool:Pot,component:Iot},Rot=St({type:Pv(["column","line"]).describe("The optional value can be 'column' or 'line'."),data:Rn(Gi([cr(),dt()])).describe("When type is column, the data represents quantities, such as [91.9, 99.1, 101.6, 114.4, 121]. When type is line, the data represents ratios and its values are recommended to be less than 1, such as [0.055, 0.06, 0.062, 0.07, 0.075]."),axisYTitle:dt().default("").describe("Set the y-axis title of the chart series, such as, axisYTitle: ''.").optional()}),Not=St({categories:Rn(dt()).describe("Categories for dual axes chart, such as, ['2015', '2016', '2017'].").nonempty({message:"Dual axes chart categories cannot be empty."}),series:Rn(Rot).describe("Series for dual axes chart, such as, [{ type: 'column', data: [91.9, 99.1, 101.6, 114.4, 121], axisYTitle: '' }, { type: 'line', data: [0.055, 0.06, 0.062, 0.07, 0.075], 'axisYTitle': '' }].").nonempty({message:"Dual axes chart series cannot be empty."})}),Ife={data:Not,theme:Ir,title:Di,axisXTitle:El},Fot={name:"generate_dual_axes_chart",description:"Generate a dual axes chart which is a combination chart that integrates two different chart types, typically combining a bar chart with a line chart to display both the trend and comparison of data, such as, the trend of sales and profit over time.",inputSchema:Lr(Ife)},zot=St(Ife),jot=Xt({props:{data:{type:Object,required:!0},title:{type:String,default:"default"},theme:{type:String,default:"default"},axisXTitle:{type:String,default:""}},setup:t=>{let e=null;const n=st(),{data:r,title:i,theme:a}=bn(t),o=De(()=>r.value.categories),s=De(()=>r.value.series.map(h=>({type:h.type,axisYTitle:h.axisYTitle,data:h.data.map(p=>typeof p=="string"?parseFloat(p):p)})));let l=function(h){return h.Column="column",h.Line="line",h}({});function u(h,p){const g=h.sort((y,b)=>{const x=["column","line"];return x.indexOf(y.type)-x.indexOf(b.type)}).map(y=>{const{type:b,axisYTitle:x,...w}=y,_={...w,axis:{y:{title:x}},encode:{x:"category",y:x,color:()=>x},legend:{color:{itemMarker:E=>E===x?"smooth":"rect"}},data:void 0};return b===l.Column?{..._,type:"interval",style:{columnWidthRatio:.8,...c}}:b===l.Line?{..._,type:b,axis:{y:{position:"right",title:x}},encode:{x:"category",y:x,shape:"smooth",color:()=>x},style:{lineWidth:2},scale:{y:{independent:!0}}}:_}),v=p.map((y,b)=>{const x={category:y};return h.forEach((w,_)=>{const E=w.axisYTitle||`value_${_+1}`;x[E]=w.data[b]}),x}),m=h.map(y=>y.type===l.Line?"smooth":"rect");return{children:g,data:v,legendTypeList:m}}let c={};a.value==="default"&&(c={radiusTopLeft:4,radiusTopRight:4});const f=u(s.value,o.value);on(()=>{e=d(n.value)});function d(h){return e=new Pi({container:h}),e.options({type:"view",theme:Li[a.value],title:{title:i.value,align:"center"},autoFit:!0,legend:{color:{position:"right"}},...f}),e==null||e.render(),e}return()=>V("div",null,[V("div",{ref:n},null)])}}),Bot={schema:zot,tool:Fot,component:jot};var hg={},JY;function $ot(){return JY||(JY=1,hg.createCanvas=function(t,e){return Object.assign(document.createElement("canvas"),{width:t,height:e})},hg.createImageData=function(t,e,n){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(t);case 2:return new ImageData(t,e);default:return new ImageData(t,e,n)}},hg.loadImage=function(t,e){return new Promise(function(n,r){const i=Object.assign(document.createElement("img"),e);function a(){i.onload=null,i.onerror=null}i.onload=function(){a(),n(i)},i.onerror=function(){a(),r(new Error('Failed to load the image "'+t+'"'))},i.src=t})}),hg}var Lfe=$ot();class qg extends Error{constructor(e){super(e),this.name="ValidateError"}}const Rfe=t=>{const e=new Set(t.nodes.map(i=>i.name)),n=new Set;for(const i of t.nodes){if(n.has(i.name))throw new qg(`Invalid parameters: node's name '${i.name}' should be unique.`);n.add(i.name)}for(const i of t.edges){if(!e.has(i.source))throw new qg(`Invalid parameters: edge's source '${i.source}' should exist in nodes.`);if(!e.has(i.target))throw new qg(`Invalid parameters: edge's target '${i.target}' should exist in nodes.`)}const r=new Set;for(const i of t.edges){const a=`${i.source}-${i.target}`;if(r.has(a))throw new qg(`Invalid parameters: edge pair '${a}' should be unique.`);r.add(a)}return!0},Nfe=t=>{const e=t,n=new Set,r=i=>{if(n.has(i.name))throw new qg(`Invalid parameters: node's name '${i.name}' should be unique.`);if(n.add(i.name),i.children)for(let a=0;a<i.children.length;a++){const o=i.children[a];r(o)}};return r(e),!0},Ffe=m2(()=>St({name:dt(),children:Rn(Ffe).optional()})),zfe={data:Ffe.describe("Data for fishbone diagram chart, such as, { name: 'main topic', children: [{ name: 'topic 1', children: [{ name: 'subtopic 1-1' }] }.").refine(Nfe,{message:"Invalid parameters: node name is not unique.",path:["data"]}),theme:Ir},Vot={name:"generate_fishbone_diagram",description:"Generate a fishbone diagram chart to uses a fish skeleton, like structure to display the causes or effects of a core problem, with the problem as the fish head and the causes/effects as the fish bones. It suits problems that can be split into multiple related factors.",inputSchema:Lr(zfe)},qot=St(zfe);let hC=null,pC=null;const QY=t=>{hC||(hC=Lfe.createCanvas(0,0),pC=hC.getContext("2d"));const e=[t.fontStyle||"normal",t.fontWeight||"normal",`${t.fontSize||12}px`,t.fontFamily||"sans-serif"].join(" ");return pC.font=e,pC.measureText(t.text).width},Wot=(t,e)=>{const n="system-ui, sans-serif";return e===0?[QY({text:t,fontSize:24,fontWeight:"bold",fontFamily:n})+80,70]:e===1?[QY({text:t,fontSize:18,fontFamily:n})+50,42]:[2,30]};function Got(t){return V4(t,{getNodeData:(e,n)=>{if(e.id=e.name,e.depth=n,!e.children)return e;const{children:r,...i}=e;return{...i,children:r.map(a=>a.name)}},getEdgeData:(e,n)=>({source:e.name,target:n.name})})}const Hot=Xt({props:{data:{type:Object,required:!0},theme:{type:String,default:"default"}},setup:t=>{let e=null;const n=st(),{data:r,theme:i}=bn(t),a=Got(r.value);on(()=>{e=o(n.value)});function o(s){return e=new Wc({container:s,autoFit:{type:"view"},data:a,devicePixelRatio:3,padding:20,node:{type:"rect",style:l=>{var c;const u={radius:8,size:Wot(l.id,l.depth),labelText:l.id,labelPlacement:"left",labelFontFamily:"Gill Sans"};return l.depth===0?Object.assign(u,{fill:"#EFF0F0",labelFill:"#262626",labelFontWeight:"bold",labelFontSize:24,labelOffsetY:4,labelPlacement:"center",labelLineHeight:24}):l.depth===1?Object.assign(u,{labelFontSize:18,labelFill:"#fff",labelFillOpacity:.9,labelOffsetY:5,labelPlacement:"center",fill:(c=l.style)==null?void 0:c.color}):Object.assign(u,{fill:"transparent",labelFontSize:16,labeFill:"#262626"}),u}},edge:{type:"polyline",style:{lineWidth:3,stroke:function(l){return this.getNodeData(l.target).style.color||"#99ADD1"}}},layout:{type:"fishbone",direction:"RL",hGap:40,vGap:60},transforms:[mm[i.value]]}),e.render(),e}return()=>V("div",{class:"p-5 mx-auto"},[V("div",{ref:n},null)])}}),Yot={schema:qot,tool:Vot,component:Hot},jfe={data:St({nodes:Rn(jle).nonempty({message:"At least one node is required."}),edges:Rn(Ble)}).describe("Data for flow diagram chart, such as, { nodes: [{ name: 'node1' }, { name: 'node2' }], edges: [{ source: 'node1', target: 'node2', name: 'edge1' }] }.").refine(Rfe,{message:"Invalid parameters",path:["data","edges"]}),theme:Ir},Uot={name:"generate_flow_diagram",description:"Generate a flow diagram chart to show the steps and decision points of a process or system, such as, scenarios requiring linear process presentation.",inputSchema:Lr(jfe)},Xot=St(jfe),Zot=Xt({props:{data:{type:Object,required:!0},theme:{type:String,default:"default"}},setup:t=>{let e=null;const n=st(),{data:r,theme:i}=bn(t),a={nodes:r.value.nodes.map(s=>({...s,id:s.name})),edges:r.value.edges.map(s=>({...s,id:`${s.source}-${s.target}`}))};on(()=>{e=o(n.value)});function o(s){return e=new Wc({container:s,data:a,devicePixelRatio:3,autoFit:"view",padding:20,animation:!1,node:{type:"rect",style:{size:l=>[l.name.length*15+30,35],radius:6,iconText:l=>l.name,iconFontSize:12,iconFontWeight:800}},edge:{type:"polyline",style:{lineWidth:2,radius:10,stroke:"#99ADD1",endArrow:!0,labelText:l=>l.name,labelFill:"#555555",labelFontWeight:800,labelBackground:!0,labelBackgroundFill:"rgba(255,255,255,0.6)",labelBackgroundOpacity:1,labelBackgroundLineWidth:2,labelPadding:[2,5],labelBackgroundRadius:2,router:{type:"orth"}}},layout:{type:"dagre",rankdir:"LR"},transforms:[mm[i.value]]}),e.render(),e}return()=>V("div",{class:"p-5 mx-auto"},[V("div",{ref:n},null)])}}),Kot={schema:Xot,tool:Uot,component:Zot},Jot=St({category:dt(),value:Gi([cr({message:"value must be a number"}),dt({message:"value must be a string"})])}),Bfe={data:Rn(Jot).describe("Data for funnel chart, such as, [{ category: '', value: 50000 }, { category: '', value: 35000 }, { category: '', value: 25000 }, { category: '', value: 15000 }, { category: '', value: 8000 }].").nonempty({message:"Funnel chart data cannot be empty."}),theme:Ir,title:Di},Qot={name:"generate_funnel_chart",description:"Generate a funnel chart to visualize the progressive reduction of data as it passes through stages, such as, the conversion rates of users from visiting a website to completing a purchase.",inputSchema:Lr(Bfe)},est=St(Bfe),tst=Xt({props:{data:{type:Object,required:!0},title:{type:String,default:"default"},theme:{type:String,default:"default"}},setup:t=>{let e=null;const n=st(),{data:r,title:i,theme:a}=bn(t),o=(u,c)=>`${((u-c)/u*100).toFixed(2)} %`,s=De(()=>r.value.map(u=>({category:u.category,value:typeof u.value=="string"?parseFloat(u.value):u.value})));on(()=>{e=l(n.value)});function l(u){return e=new Pi({container:u}),e.options({type:"view",data:s.value,theme:Li[a.value],title:{title:i.value,align:"center"},padding:40,children:[{type:"interval",data:s,encode:{x:"category",y:"value",color:"category",shape:"funnel"},transform:[{type:"symmetryY"}],scale:{x:{padding:0}},coordinate:{transform:[{type:"transpose"}]},legend:{color:{position:"top",layout:{justifyContent:"center"}}},labels:[{text:c=>`${c.category}
${c.value}`,position:"inside",transform:[{type:"contrastReverse"}]},{text:(c,f)=>f!==0?"":"",style:{"font-size":"1px",color:"#666","letter-spacing":"0px"},position:"top-right",fill:"#666",dx:35,dy:-8},{text:(c,f)=>f!==0?"":"",position:"top-right",textAlign:"left",textBaseline:"middle",fill:"#666",dx:40},{text:(c,f,d)=>f!==0?o(d[f-1].value,d[f].value):"",position:"top-right",textAlign:"left",textBaseline:"middle",dx:80}]},{type:"connector",data:[{startX:s.value[0].category,startY:s.value[s.value.length-1].category,endX:0,endY:(s.value[0].value-s.value[s.value.length-1].value)/2}],encode:{x:"startX",x1:"startY",y:"endX",y1:"endY"},style:{stroke:"#666",markerEnd:!1,connectLength1:-12,offset2:-20,connectorStroke:"#0649f2",lineDash:[12,2]},labels:[{text:"",position:"left",textAlign:"start",textBaseline:"middle",fill:"#666",dx:10},{text:o(s.value[0].value,s.value[s.value.length-1].value),position:"left",textAlign:"start",dx:50,fill:"#000"}]}],axis:!1,animate:!1}),e==null||e.render(),e}return()=>V("div",{class:"w-full flex justify-center"},[V("div",{ref:n},null)])}}),nst={schema:est,tool:Qot,component:tst},$fe={data:Rn(Gi([cr({message:"value must be a number"}),dt({message:"value must be a string"})])).describe("Data for histogram chart, such as, [78, 88, 60, 100, 95].").nonempty({message:"Histogram chart data cannot be empty."}),binNumber:Gi([cr(),EOe(),OOe()]).optional().default(null).describe("Number of intervals to define the number of intervals in a histogram."),theme:Ir,title:Di,axisXTitle:El,axisYTitle:gu},rst={name:"generate_histogram_chart",description:"Generate a histogram chart to show the frequency of data points within a certain range. It can observe data distribution, such as, normal and skewed distributions, and identify data concentration areas and extreme points.",inputSchema:Lr($fe)},ist=St($fe),ast=Xt({props:{data:{type:Array,required:!0},binNumber:{type:Object},theme:{type:String,default:"default"},title:{type:String,default:""},axisXTitle:{type:String,default:""},axisYTitle:{type:String,default:""}},setup:t=>{let e=null;const n=st(),{data:r,title:i,theme:a,axisXTitle:o,axisYTitle:s,binNumber:l}=bn(t),u=st("asc"),c=De(()=>r.value.map(d=>typeof d=="string"?parseFloat(d):d).sort((d,h)=>u.value==="asc"?d-h:h-d));on(()=>{e=f(n.value)}),bf(()=>{u.value&&(e=f(n.value))});function f(d){return e=new Pi({container:d}),e.options({type:"interval",theme:Li[a.value],data:c.value,title:{title:i.value,align:"center"},encode:{x:h=>h,y:"count"},transform:[{type:"binX",y:"count",thresholds:l.value}],style:{minHeight:1,columnWidthRatio:1,inset:.5},axis:{x:{title:o.value},y:{title:s.value}},animate:!1}),e==null||e.render(),e}return()=>V("div",{class:"w-full flex justify-center flex-col items-center"},[V("div",{class:"w-full flex justify-end px-5"},[V(fU,{value:u.value,onChange:d=>u.value=d,style:{width:"120px"}},{default:()=>[V(H1,{value:"asc"},{default:()=>[We("")]}),V(H1,{value:"desc"},{default:()=>[We("")]})]})]),V("div",{ref:n},null)])}}),ost={schema:ist,tool:rst,component:ast},sst=St({time:dt(),value:Gi([cr({message:"value must be a number"}),dt({message:"value must be a string"})]),group:dt().optional()}),Vfe={data:Rn(sst).describe("Data for line chart, such as, [{ time: '2015', value: 23 }].").nonempty({message:"Line chart data cannot be empty."}),theme:Ir,title:Di,axisXTitle:El,axisYTitle:gu},lst={name:"generate_line_chart",description:"Generate a line chart to show trends over time, such as, the ratio of Apple computer sales to Apple's profits changed from 2000 to 2016.",inputSchema:Lr(Vfe)},ust=St(Vfe),cst=Xt({props:{data:{type:Array,required:!0},theme:{type:String,default:"default"},title:{type:String,default:""},axisXTitle:{type:String,default:""},axisYTitle:{type:String,default:""}},setup:t=>{let e=null;const n=st(),{data:r,title:i,theme:a,axisXTitle:o,axisYTitle:s}=bn(t),l=De(()=>r.value.map(d=>({time:d.time,value:typeof d.value=="string"?parseFloat(d.value):d.value,group:d.group}))),u=De(()=>{var d;return((d=(l||[])[0])==null?void 0:d.group)!==void 0});let c={};u?c={x:"time",y:"value",color:"group"}:c={x:"time",y:"value"},on(()=>{e=f(n.value)});function f(d){return e=new Pi({container:d}),e.options({type:"view",title:{title:i.value,align:"center"},data:l.value,encode:c,theme:Li[a.value],insetRight:12,insetTop:4,style:{minHeight:1},axis:{y:{title:s.value||!1},x:{title:o.value||!1}},children:[{type:"line",style:{lineWidth:2},labels:[{text:"value",style:{textAlign:"center",dy:-12},transform:[{type:"overlapDodgeY"}]}]},{type:"point",encode:{shape:"point"},style:{fill:"white",lineWidth:1}}]}),e==null||e.render(),e}return()=>V("div",{class:"w-full flex justify-center"},[V("div",{ref:n},null)])}}),fst={schema:ust,tool:lst,component:cst},qfe={percent:cr().describe("The percentage value to display in the liquid chart, should be a number between 0 and 1, where 1 represents 100%. For example, 0.75 represents 75%.").min(0,{message:"Value must be at least 0."}).max(1,{message:"Value must be at most 1."}),shape:Pv(["circle","rect","pin","triangle"]).optional().default("circle").describe("The shape of the liquid chart, can be 'circle', 'rect', 'pin', or 'triangle'. Default is 'circle'."),theme:Ir,title:Di},dst={name:"generate_liquid_chart",description:"Generate a liquid chart to visualize a single value as a percentage, such as, the current occupancy rate of a reservoir or the completion percentage of a project.",inputSchema:Lr(qfe)},hst=St(qfe),pst=Xt({props:{percent:{type:Number,required:!0,validator:t=>t>=0&&t<=1},shape:{type:String,default:"circle"},theme:{type:String,default:"default"},title:{type:String,default:""}},setup:t=>{let e=null;const n=st(),{percent:r,shape:i,theme:a,title:o}=bn(t);on(()=>{e=s(n.value)});function s(l){return e=new Pi({container:l}),e.options({type:"liquid",theme:Li[a.value],title:{title:o.value,align:"center"},data:r.value,style:{shape:i,contentFontSize:20,contentFill:"#000",contentStroke:"#fff",contentLineWidth:2,outlineBorder:4,outlineDistance:4,waveLength:128},animate:!1}),e==null||e.render(),e}return()=>V("div",{class:"w-full flex justify-center"},[V("div",{ref:n},null)])}}),gst={schema:hst,tool:dst,component:pst};class Wfe extends go{getKeyStyle(e){const[n,r]=this.getSize(e),i=super.getKeyStyle(e);return{width:n,height:r,...i}}drawKeyShape(e,n){const r=this.getKeyStyle(e);return this.upsert("key","rect",r,n)}render(e=this.parsedAttributes,n=this){super.render(e,n)}}yt(Wfe,"defaultStyleProps",{...go.defaultStyleProps,showIcon:!1});const Gfe=m2(()=>St({name:dt(),children:Rn(Gfe).optional()})),Hfe={data:Gfe.describe("Data for mind map chart, such as, { name: 'main topic', children: [{ name: 'topic 1', children: [{ name:'subtopic 1-1' }] }.").refine(Nfe,{message:"Invalid parameters: node name is not unique.",path:["data"]}),theme:Ir},vst={name:"generate_mind_map",description:"Generate a mind map chart to organizes and presents information in a hierarchical structure with branches radiating from a central topic, such as, a diagram showing the relationship between a main topic and its subtopics.",inputSchema:Lr(Hfe)},mst=St(Hfe);A_(Sc.NODE,"mindmap",Wfe);let gC=null,vC=null;const yst=t=>{gC||(gC=Lfe.createCanvas(0,0),vC=gC.getContext("2d"));const e=[t.fontStyle||"normal",t.fontWeight||"normal",`${t.fontSize||12}px`,t.fontFamily].join(" ");return vC.font=e,vC.measureText(t.text).width},Yfe={fill:"#EFF0F0",labelFill:"#262626",labelFontSize:24,labelFontWeight:600,labelOffsetY:8,labelPlacement:"center",ports:[{placement:"right"},{placement:"left"}],radius:8},Ufe={fill:"transparent",labelPlacement:"center",labelFontSize:16,ports:[{placement:"right-bottom"},{placement:"left-bottom"}]},Xfe=(t,e)=>{const n=e?40:30;return yst({text:t,fontSize:(e?Yfe:Ufe).labelFontSize,fontFamily:"Gill Sans"})+n},bst=(t,e)=>[Xfe(t,e),e?36:32],xst=(t,e)=>{if(!e)return"center";const n=Yr(t)[0];return Yr(e)[0]>n?"left":"right"};function wst(t){return V4(t,{getNodeData:(e,n)=>{if(e.id=e.name,e.depth=n,!e.children)return e;const{children:r,...i}=e;return{...i,children:r.map(a=>a.name)}},getEdgeData:(e,n)=>({source:e.name,target:n.name})})}const _st=Xt({props:{data:{type:Object,required:!0},theme:{type:String,default:"default"}},setup:t=>{let e=null;const n=st(),{data:r,theme:i}=bn(t),a=wst(r.value),o=r.value.name;on(()=>{e=s(n.value)});function s(l){return e=new Wc({container:l,waitForRender:300,data:a,devicePixelRatio:3,padding:24,autoFit:{type:"view"},node:{type:"mindmap",style:function(u){var h,p,g;const c=xst(u,this.getParentData(ce(u),"tree")),f=ce(u)===o,d=u.depth;return{direction:c,labelText:ce(u),size:bst(ce(u),f),labelFontFamily:"Gill Sans",lineWidth:2,radius:8,stroke:d===0?"#f1f4f5":(h=u.style)==null?void 0:h.color,labelBackground:!0,labelBackgroundFill:"transparent",labelPadding:c==="left"?[2,0,10,40]:[2,40,10,0],...f?Yfe:Ufe,fill:d===0?"#f1f4f5":d===1?(p=u.style)==null?void 0:p.color:"transparent",labelFill:d===0?"#262626":d===1?"#FFF":(g=u.style)==null?void 0:g.color,ports:[{placement:"left"},{placement:"right"}]}}},edge:{type:"cubic-horizontal",style:{lineWidth:1.5,stroke:function(u){return this.getNodeData(u.target).depth>1?this.getNodeData(u.target).style.color:"#99ADD1"}}},layout:{type:"mindmap",direction:"H",getHeight:()=>30,getWidth:u=>Xfe(u.id,u.id===o),getVGap:()=>14,getHGap:()=>64,animation:!1},transforms:[mm[i.value]],animation:!1}),e.render(),e}return()=>V("div",{class:"p-5 mx-auto"},[V("div",{ref:n},null)])}}),Sst={schema:mst,tool:vst,component:_st},Zfe={data:St({nodes:Rn(jle).nonempty({message:"At least one node is required."}),edges:Rn(Ble)}).describe("Data for network graph chart, such as, { nodes: [{ name: 'node1' }, { name: 'node2' }], edges: [{ source: 'node1', target: 'node2', name: 'edge1' }] }").refine(Rfe,{message:"Invalid parameters",path:["data","edges"]}),theme:Ir},Est={name:"generate_network_graph",description:"Generate a network graph chart to show relationships (edges) between entities (nodes), such as, relationships between people in social networks.",inputSchema:Lr(Zfe)},Ost=St(Zfe),kst=Xt({props:{data:{type:Object,required:!0},theme:{type:String,default:"default"}},setup:t=>{let e=null;const n=st(),{data:r,theme:i}=bn(t),a={nodes:r.value.nodes.map(s=>({...s,id:s.name})),edges:r.value.edges.map(s=>({...s,id:`${s.source}-${s.target}`}))};on(()=>{e=o(n.value)});function o(s){return e=new Wc({container:s,data:a,devicePixelRatio:3,autoFit:"view",padding:20,animation:!1,node:{type:"circle",style:{size:20,labelText:l=>l.name,labelSize:10,labelFontSize:10,labelBackground:!0}},edge:{style:{labelText:l=>l.name,labelFontSize:10,labelBackground:!0,endArrow:!0},animation:{enter:!1}},layout:{type:"force-atlas2",preventOverlap:!0,kr:600},transforms:["process-parallel-edges",mm[i.value]]}),e.render(),e}return()=>V("div",{class:"p-5"},[V("div",{ref:n},null)])}}),Ast={schema:Ost,tool:Est,component:kst};A_(Sc.NODE,"organization-chart-node",cot);const Kfe=m2(()=>St({name:dt(),description:dt().optional(),children:Rn(Kfe).optional()})),Jfe={data:Kfe.describe("Data for organization chart, such as, { name: 'CEO', description: 'Chief Executive Officer', children: [{ name: 'CTO', description: 'Chief Technology Officer', children: [{ name: 'Dev Manager', description: 'Development Manager' }] }] }."),orient:Pv(["horizontal","vertical"]).default("vertical").describe("Orientation of the organization chart, either horizontal or vertical. Default is vertical, when the level of the chart is more than 3, it is recommended to use horizontal orientation."),theme:Ir},Tst={name:"generate_organization_chart",description:"Generate an organization chart to visualize the hierarchical structure of an organization, such as, a diagram showing the relationship between a CEO and their direct reports.",inputSchema:Lr(Jfe)},Mst=St(Jfe),Cst=Xt({props:{data:{type:Object,required:!0},orient:{type:String,default:"vertical"},theme:{type:String,default:"default"}},setup(t){let e=null;const n=st(),{data:r,orient:i,theme:a}=bn(t),o=fot(r.value),s=i.value==="horizontal";on(()=>{e=l(n.value)});function l(u){return e=new Wc({container:u,data:o,devicePixelRatio:3,padding:24,autoFit:{type:"view"},node:{type:"organization-chart-node",style:{labelPlacement:"center",lineWidth:0,ports:s?[{placement:"left"},{placement:"right"}]:[{placement:"top"},{placement:"bottom"}],radius:4,shadowBlur:10,shadowColor:"#e0e0e0",shadowOffsetX:3,size:[200,60]},palette:{type:"group",field:c=>c.data.name,color:mm[a.value].colors}},edge:{type:"polyline",style:{router:{type:"orth"},stroke:"#99ADD1"}},layout:{type:"dagre",rankdir:s?"LR":"TB"},animation:!1,behaviors:[]}),e==null||e.render(),e}return()=>V("div",{class:"w-full mx-auto"},[V("div",{ref:n},null)])}}),Pst={schema:Mst,tool:Tst,component:Cst},Dst=St({category:dt({message:"category must be a string"}),value:Gi([cr({message:"value must be a number"}),dt({message:"value must be a string"})])}),Qfe={data:Rn(Dst).describe("Data for pie chart, such as, [{ category: '', value: 27 }].").nonempty({message:"Pie chart data cannot be empty."}),innerRadius:cr().default(0).describe("Set the innerRadius of pie chart, the value between 0 and 1. Set the pie chart as a donut chart. Set the value to 0.6 or number in [0 ,1] to enable it."),theme:Ir,title:Di},Ist={name:"generate_pie_chart",description:"Generate a pie chart to show the proportion of parts, such as, market share and budget allocation.",inputSchema:Lr(Qfe)},Lst=St(Qfe),Rst=Xt({props:{data:{type:Object,required:!0},innerRadius:{type:Number,default:0},title:{type:String,default:"default"},theme:{type:String,default:"default"}},setup:t=>{let e=null;const n=st(),{data:r,innerRadius:i,title:a,theme:o}=bn(t),s=De(()=>r.value.map(u=>({category:u.category,value:typeof u.value=="string"?parseFloat(u.value):u.value})));on(()=>{e=l(n.value)});function l(u){return e=new Pi({container:u}),e.options({type:"interval",theme:Li[o.value],title:{title:a.value,align:"center"},autoFit:!0,data:s.value,encode:{y:"value",color:"category"},transform:[{type:"stackY"}],coordinate:{type:"theta",outerRadius:.95,innerRadius:i.value},style:{radius:4,stroke:"#fff",lineWidth:1},labels:[{text:c=>`${c.category}: ${c.value}`,position:"outside",radius:.85,fontSize:12,transform:[{type:"overlapHide"}]}],legend:{color:{position:"bottom",layout:{justifyContent:"center"}}},animate:!1,axis:!1}),e==null||e.render(),e}return()=>V("div",null,[V("div",{ref:n},null)])}}),Nst={schema:Lst,tool:Ist,component:Rst},Fst=St({name:dt({message:"name must be a string"}),value:Gi([cr({message:"value must be a number"}),dt({message:"value must be a string"})]),group:dt().optional()}),ede={data:Rn(Fst).describe("Data for radar chart, such as, [{ name: 'Design', value: 70 }].").nonempty({message:"Radar chart data cannot be empty."}),theme:Ir,title:Di},zst={name:"generate_radar_chart",description:"Generate a radar chart to display multidimensional data (four dimensions or more), such as, evaluate Huawei and Apple phones in terms of five dimensions: ease of use, functionality, camera, benchmark scores, and battery life.",inputSchema:Lr(ede)},jst=St(ede);function Bst(t){if(!t||t.length===0)return[];const e=dot(t,n=>n.group||"");return Object.entries(e).map(([n,r])=>({...(r||[]).reduce((a,{name:o,value:s})=>(a[o]=s,a),{}),group:n}))}const $st=Xt({props:{data:{type:Object,required:!0},title:{type:String,default:"default"},theme:{type:String,default:"default"}},setup:t=>{let e=null;const n=st(),{data:r,title:i,theme:a}=bn(t),o=De(()=>r.value.map(c=>({name:c.name,value:typeof c.value=="string"?parseFloat(c.value):c.value,group:c.group}))),s=Bst(o.value),l=Object.keys(s[0]||{}).filter(c=>c!=="group");on(()=>{e=u(n.value)});function u(c){return e=new Pi({container:c}),e.options({title:{title:i.value,align:"center"},theme:Li[a.value],inset:18,type:"line",data:s,autoFit:!0,coordinate:{type:"radar"},encode:{position:l,color:"group"},style:{lineWidth:2,lineCap:"round",lineJoin:"round"},legend:{color:s.length>1?{itemMarker:"point"}:!1},scale:Object.fromEntries(Array.from({length:l.length},(f,d)=>[`position${d===0?"":d}`,{domainMin:0,nice:!0}])),axis:Object.fromEntries(Array.from({length:l.length},(f,d)=>[`position${d===0?"":d}`,{zIndex:1,titleFontSize:10,titleSpacing:8,label:!0,labelFill:"#000",labelOpacity:.45,labelFontSize:10,line:!0,lineFill:"#000",lineStrokeOpacity:.25,tickFilter:(h,p)=>!(d!==0&&p===0),tickCount:4,gridStrokeOpacity:.45,gridStroke:"#000",gridLineWidth:1,gridLineDash:[4,4]}])),interaction:{tooltip:!1}}),e==null||e.render(),e}return()=>V("div",null,[V("div",{ref:n},null)])}}),Vst={schema:jst,tool:zst,component:$st},qst=St({source:dt({message:"source must be a string"}),target:dt({message:"target must be a string"}),value:Gi([cr({message:"value must be a number"}),dt({message:"value must be a string"})])}),tde={data:Rn(qst).describe("Date for sankey chart, such as, [{ source: 'Landing Page', target: 'Product Page', value: 50000 }, { source: 'Product Page', target: 'Add to Cart', value: 35000 }, { source: 'Add to Cart', target: 'Checkout', value: 25000 }, { source: 'Checkout', target: 'Payment', value: 15000 }, { source: 'Payment', target: 'Purchase Completed', value: 8000 }].").nonempty({message:"Sankey chart data cannot be empty."}),nodeAlign:Pv(["left","right","justify","center"]).optional().default("center").describe("Alignment of nodes in the sankey chart, such as, 'left', 'right', 'justify', or 'center'."),theme:Ir,title:Di},Wst={name:"generate_sankey_chart",description:"Generate a sankey chart to visualize the flow of data between different stages or categories, such as, the user journey from landing on a page to completing a purchase.",inputSchema:Lr(tde)},Gst=St(tde),Hst=Xt({props:{data:{type:Object,required:!0},nodeAlign:{type:String,default:"center"},theme:{type:String,default:"default"},title:{type:String,default:""}},setup:t=>{let e=null;const n=st(),{data:r,nodeAlign:i,title:a,theme:o}=bn(t),s=De(()=>r.value.map(u=>({source:u.source,target:u.target,value:typeof u.value=="string"?parseFloat(u.value):u.value})));on(()=>{e=l(n.value)});function l(u){return e=new Pi({container:u}),e.options({title:{title:a.value,align:"center"},theme:Li[o.value],type:"sankey",layout:{nodeAlign:i,nodePadding:.01},autoFit:!0,data:{type:"inline",value:s.value,transform:[{type:"custom",callback:c=>({links:c})}]},scale:{color:{range:o.value==="academy"?Tfe:W4}},style:{labelSpacing:2,nodeLineWidth:1,linkFillOpacity:.3},animate:!1,tooltip:!1,legend:!1}),e==null||e.render(),e}return()=>V("div",null,[V("div",{ref:n},null)])}}),Yst={schema:Gst,tool:Wst,component:Hst},Ust=St({x:Gi([cr({message:"x must be a number"}),dt({message:"x must be a string"})]),y:Gi([cr({message:"y must be a number"}),dt({message:"y must be a string"})])}),nde={data:Rn(Ust).describe("Data for scatter chart, such as, [{ x: 10, y: 15 }].").nonempty({message:"Scatter chart data cannot be empty."}),theme:Ir,title:Di,axisXTitle:El,axisYTitle:gu},Xst={name:"generate_scatter_chart",description:"Generate a scatter chart to show the relationship between two variables, helps discover their relationship or trends, such as, the strength of correlation, data distribution patterns.",inputSchema:Lr(nde)},Zst=St(nde),Kst=Xt({props:{data:{type:Object,required:!0},theme:{type:String,default:"default"},title:{type:String,default:""},axisXTitle:{type:String,default:""},axisYTitle:{type:String,default:""}},setup:t=>{let e=null;const n=st(),{data:r,title:i,theme:a,axisYTitle:o,axisXTitle:s}=bn(t),l=De(()=>r.value.map(c=>({x:typeof c.x=="string"?parseFloat(c.x):c.x,y:typeof c.y=="string"?parseFloat(c.y):c.y})));on(()=>{e=u(n.value)});function u(c){return e=new Pi({container:c}),e.options({type:"point",theme:Li[a.value],autoFit:!0,data:l,title:{title:i.value,align:"center"},encode:{x:"x",y:"y"},axis:{x:{title:s.value},y:{title:o.value}},insetRight:4,style:{lineWidth:1},legend:{size:!1},animate:!1,tooltip:!1}),e==null||e.render(),e}return()=>V("div",null,[V("div",{ref:n},null)])}}),Jst={schema:Zst,tool:Xst,component:Kst},rde=m2(()=>St({name:dt(),value:cr(),children:Rn(rde).optional()})),ide={data:Rn(rde).describe("Data for treemap chart, such as, [{ name: 'Design', value: 70, children: [{ name: 'Tech', value: 20 }] }].").nonempty({message:"Treemap chart data cannot be empty."}),theme:Ir,title:Di},Qst={name:"generate_treemap_chart",description:"Generate a treemap chart to display hierarchical data and can intuitively show comparisons between items at the same level, such as, show disk space usage with treemap.",inputSchema:Lr(ide)},elt=St(ide),tlt=Xt({props:{data:{type:Object,required:!0},theme:{type:String,default:"default"},title:{type:String,default:""}},setup:t=>{let e=null;const n=st(),{data:r,title:i,theme:a}=bn(t);on(()=>{e=o(n.value)});function o(s){return e=new Pi({container:s}),e.options({type:"treemap",theme:Li[a.value],autoFit:!0,title:{title:i.value,align:"center"},data:{type:"inline",value:{name:"root",children:r.value}},layout:{tile:"treemapBinary",paddingInner:2},encode:{value:"value"},style:{fillOpacity:.8,labelFontSize:10},tooltip:!1,legend:!1,animate:!1}),e==null||e.render(),e}return()=>V("div",null,[V("div",{ref:n},null)])}}),nlt={schema:elt,tool:Qst,component:tlt},rlt=St({label:dt().optional().describe("Label for the venn chart segment, such as 'A', 'B', or 'C'."),value:cr().describe("Value for the venn chart segment, such as 10, 20, or 30."),sets:Rn(dt()).describe("Array of set names that this segment belongs to, such as ['A', 'B'] for an intersection between sets A and B.")}),ade={data:Rn(rlt).describe("Data for venn chart, such as, [{ label: 'A', value: 10, sets: ['A'] }, { label: 'B', value: 20, sets: ['B'] }, { label: 'C', value: 30, sets: ['C'] }, { label: 'AB', value: 5, sets: ['A', 'B'] }].").nonempty({message:"Venn chart data cannot be empty."}),theme:Ir,title:Di},ilt={name:"generate_venn_chart",description:"Generate a Venn diagram to visualize the relationships between different sets, showing how they intersect and overlap, such as the commonalities and differences between various groups.",inputSchema:Lr(ade)},alt=St(ade),olt=Xt({props:{data:{type:Object,required:!0},theme:{type:String,default:"default"},title:{type:String,default:""}},setup:t=>{let e=null;const n=st(),{data:r,title:i,theme:a}=bn(t);on(()=>{e=o(n.value)});function o(s){return e=new Pi({container:s}),e.options({type:"path",theme:Li[a.value],autoFit:!0,title:{title:i.value,align:"center"},data:{type:"inline",value:r.value,transform:[{type:"venn",padding:8,sets:"sets",size:"value",as:["key","path"]}]},encode:{d:"path",color:"key"},style:{opacity:l=>l.sets.length>1?.001:.65},labels:[{position:"inside",text:l=>l.label||"",fill:"#000",fillOpacity:.85,fontSize:10}],legend:!1,axis:!1,tooltip:!1,animate:!1}),e==null||e.render(),e}return()=>V("div",null,[V("div",{ref:n},null)])}}),slt={schema:alt,tool:ilt,component:olt},llt=St({category:dt().describe("Category of the data point, such as ''."),value:Gi([cr({message:"value must be a number"}),dt({message:"value must be a string"})]),group:dt().optional().describe("Optional group for the data point, used for grouping in the violin chart.")}),ode={data:Rn(llt).describe("Data for violin chart, such as, [{ category: '', value: 10 }] or [{ category: '', value: 20, group: '' }].").nonempty({message:"Violin chart data cannot be empty."}),theme:Ir,title:Di,axisXTitle:El,axisYTitle:gu},ult={name:"generate_violin_chart",description:"Generate a violin chart to show data for statistical summaries among different categories, such as, comparing the distribution of data points across categories.",inputSchema:Lr(ode)},clt=St(ode),flt=Xt({props:{data:{type:Object,required:!0},theme:{type:String,default:"default"},title:{type:String,default:""},axisXTitle:{type:String,default:""},axisYTitle:{type:String,default:""}},setup:t=>{let e=null;const n=st(),{data:r,title:i,theme:a,axisXTitle:o,axisYTitle:s}=bn(t),l=De(()=>r.value.map(h=>({category:h.category,value:typeof h.value=="string"?parseFloat(h.value):h.value,group:h.group}))),u=De(()=>{var h;return((h=(l.value||[])[0])==null?void 0:h.group)!==void 0});let c={},f=[];u.value?(c={x:"category",y:"y",color:"group",series:"group",size:"size"},f=[{type:"density",data:{transform:[{type:"map",callback:h=>({...h,group:String(h.group)})},{type:"kde",field:"value",groupBy:["category","group"]},{type:"log",callback:h=>console.log(h.map(p=>typeof p.group))}]},encode:c},{type:"boxplot",encode:{x:"category",y:"value",series:"group",color:"group",shape:"violin"},style:{opacity:.5,strokeOpacity:.5,point:!1}}]):(c={x:"category",y:"y",color:"category",size:"size"},f=[{type:"density",data:{transform:[{type:"kde",field:"value",groupBy:["category"],size:20}]},encode:c},{type:"boxplot",encode:{x:"category",y:"value",color:"category",shape:"violin"},style:{opacity:.5,strokeOpacity:.5,point:!1}}]),on(()=>{e=d(n.value)});function d(h){return e=new Pi({container:h}),e.options({type:"view",theme:Li[a.value],autoFit:!0,title:{title:i.value,align:"center"},legend:{color:{position:"right"}},data:l.value,axis:{y:{title:s.value||!1},x:{title:o.value||!1}},children:f}),e==null||e.render(),e}return()=>V("div",{class:"p-5"},[V("div",{ref:n},null)])}}),dlt={schema:clt,tool:ult,component:flt},hlt=St({text:dt({message:"text must be a string"}).describe('Text to be displayed in the word cloud, such as "Hello World".'),value:Gi([cr({message:"value must be a number"}),dt({message:"value must be a string"})])}),sde={data:Rn(hlt).describe("Data for word cloud chart, such as, [{ value: 4.272, text: '' }].").nonempty({message:"Word cloud chart data cannot be empty."}),theme:Ir,title:Di},plt={name:"generate_word_cloud_chart",description:"Generate a word cloud chart to show word frequency or weight through text size variation, such as, analyzing common words in social media, reviews, or feedback.",inputSchema:Lr(sde)},glt=St(sde),vlt=Xt({props:{data:{type:Object,required:!0},theme:{type:String,default:"default"},title:{type:String,default:""}},setup:t=>{let e=null;const n=st(),{data:r,title:i,theme:a}=bn(t),o=De(()=>r.value.map(l=>({text:l.text,value:typeof l.value=="string"?parseFloat(l.value):l.value})));on(()=>{e=s(n.value)});function s(l){return e=new Pi({container:l}),e.options({type:"wordCloud",theme:Li[a.value],autoFit:!0,layout:{fontSize:[8,42]},title:{title:i.value,align:"center"},data:o.value,encode:{text:"text",color:"text",value:"value"},legend:!1}),e==null||e.render(),e}return()=>V("div",{class:"p-5 flex justify-center w-full"},[V("div",{ref:n,class:"w-full"},null)])}}),mlt={schema:glt,tool:plt,component:vlt},ylt=St({x:dt({message:"x must be a string"}),y:dt({message:"y must be a string"}),value:Gi([cr({message:"value must be a number"}),dt({message:"value must be a string"})])}),lde={data:Rn(ylt).describe("Data for heatmap chart, such as, [{ x: 'Alaska', y: '2018', value: 99.9 }].").nonempty({message:"Heatmap chart data cannot be empty."}),title:Di,theme:Ir,axisXTitle:El,axisYTitle:gu},blt={name:"generate_heatmap_chart",description:"Generate a heatmap chart to visualize two-dimensional data. It represents the magnitude of data values through variations in color intensity and is commonly used to display matrix data, correlations, or frequency distributions.",inputSchema:Lr(lde)},xlt=St(lde),wlt=Xt({props:{data:{type:Object,required:!0},title:{type:String,default:"default"},theme:{type:String,default:"default"},axisXTitle:{type:String,default:""},axisYTitle:{type:String,default:""}},setup:t=>{let e=null;const n=st(),{data:r,title:i,theme:a,axisXTitle:o,axisYTitle:s}=bn(t),l=De(()=>r.value.map(c=>({x:String(c.x),y:String(c.y),value:typeof c.value=="string"?parseFloat(c.value):c.value})));on(()=>{e=u(n.value)});function u(c){return e=new Pi({container:c}),e.options({type:"cell",theme:Li[a.value],title:{title:i.value,align:"center"},autoFit:!0,data:l.value,axis:{y:{title:s.value},x:{title:o.value}},encode:{x:"x",y:"y",color:"value"},animate:{enter:{type:"fadeIn"}}}),e==null||e.render(),e}return()=>V("div",null,[V("div",{ref:n},null)])}}),_lt={schema:xlt,tool:blt,component:wlt},Slt=Object.freeze(Object.defineProperty({__proto__:null,area:bot,bar:Eot,boxplot:Mot,column:Lot,dualAxes:Bot,fishboneDiagram:Yot,flowDiagram:Kot,funnel:nst,heatmap:_lt,histogram:ost,line:fst,liquid:gst,mindMap:Sst,networkGraph:Ast,organizationChart:Pst,pie:Nst,radar:Vst,sankey:Yst,scatter:Jst,treemap:nlt,venn:slt,violin:dlt,wordCloud:mlt},Symbol.toStringTag,{value:"Module"})),Elt=Xt({props:{message:{type:Object,required:!0},lastModifiedMessage:{type:Object},isLast:{type:Boolean,required:!0},isExpanded:{type:Boolean,required:!0},onToggleExpand:{type:Function,required:!0}},emits:["heightChange"],setup:(t,e)=>{const{isLast:n}=bn(t),r=st(null),{height:i}=Ode(r),a=st(0);return bf(()=>{const o=a.value===0;n.value&&i.value!==0&&i.value!==1/0&&i.value!==a.value&&(o||e.emit("heightChange",i.value>a.value),a.value=i.value)}),()=>V("div",{ref:r,style:{position:"relative"}},[V(Olt,t,null)])}}),Olt=Xt({props:{message:{type:Object,required:!0},lastModifiedMessage:{type:Object},isLast:{type:Boolean,required:!0},isExpanded:{type:Boolean,required:!0},onToggleExpand:{type:Function,required:!0}},setup:t=>{Fo([ape,ope,spe,lpe,Ime,qme,Xme,Ybe,qbe,eye,exe,Tye,s1e,mxe,Axe,k1e,G1e,R1e,Abe,vbe,fxe,G0e,Lve,lve,yve,Eve,tve,Jve,IX,LX,V0e,yme,jX,BX,w0e,Lge]);const{message:e,lastModifiedMessage:n,isLast:r,isExpanded:i}=bn(t),{onToggleExpand:a}=t,o=pu(),{postMessage:s}=o,{mcpServers:l,state:u}=fp(o),c=De(()=>i.value?["1"]:[]),f=De(()=>i.value?[]:["1"]),d=async N=>{var L;(L=u.value.currentTaskItem)!=null&&L.id?Cu.ai.uploadToSandbox(u.value.currentTaskItem.id,N.file).then(B=>{s({type:"askResponse",askResponse:"messageResponse",text:JSON.stringify(B),images:[]})}).catch(B=>{Z4.error("Upload failed: "+B.message),s({type:"askResponse",askResponse:"messageResponse",text:"",images:[]})}):Z4.error("Upload files to sandbox only within tasks.")},h=De(()=>{if(e.value.text!=null&&e.value.say==="api_req_started"){const N=JSON.parse(e.value.text);return[N.cost,N.cancelReason,N.streamingFailedMessage]}return[void 0,void 0,void 0]}),p=De(()=>{var N,L;return r.value&&((N=n.value)==null?void 0:N.ask)==="api_req_failed"?(L=n.value)==null?void 0:L.text:void 0}),g=De(()=>{var N,L,B;return r.value&&(((N=n.value)==null?void 0:N.ask)==="command"||((L=n.value)==null?void 0:L.say)==="command")&&((B=n.value.text)==null?void 0:B.includes(O1))}),v=De(()=>{var N,L,B,$;return r.value&&(((N=n.value)==null?void 0:N.ask)==="code"||((L=n.value)==null?void 0:L.say)==="code")&&(($=(B=JSON.parse(n.value.text??""))==null?void 0:B.text)==null?void 0:$.length)>0}),m=De(()=>{var N,L;return r.value&&(((N=n.value)==null?void 0:N.ask)==="upload_file_to_sandbox"||((L=n.value)==null?void 0:L.say)==="upload_file_to_sandbox")}),y=De(()=>{var N;return r.value&&((N=n.value)==null?void 0:N.say)==="mcp_server_request_started"}),b=De(()=>{var N;return r.value&&((N=n.value)==null?void 0:N.say)==="rag_server_request_started"}),x=De(()=>{var N;return r.value&&((N=n.value)==null?void 0:N.say)==="use_echart_function"}),w=De(()=>{var N,L;return r.value&&(((N=n.value)==null?void 0:N.ask)==="execute_sql"||((L=n.value)==null?void 0:L.say)==="execute_sql")}),_=De(()=>{var N,L;return r.value&&(((N=n.value)==null?void 0:N.ask)==="list_all_tables"||((L=n.value)==null?void 0:L.say)==="list_all_tables")}),E=De(()=>{var N,L;return r.value&&(((N=n.value)==null?void 0:N.ask)==="get_table_detail"||((L=n.value)==null?void 0:L.say)==="get_table_detail")}),S=De(()=>e.value.type==="ask"?e.value.ask:e.value.say),O="var(--foreground)",A="var(--warningForeground)",T="var(--errorForeground)",I="var(--charts-green)",D="var(--descriptionForeground)",R=De(()=>{switch(S.value){case"mistake_limit_reached":return[V("span",{class:"codicon codicon-error",style:{color:T,marginBottom:"-1.5px"}},null),V("span",{style:{color:T,fontWeight:"bold"}},[We("InfiniSynapse is having trouble...")])];case"auto_approval_max_req_reached":return[V("span",{class:"codicon codicon-warning",style:{color:T,marginBottom:"-1.5px"}},null),V("span",{style:{color:T,fontWeight:"bold"}},[We("Maximum Requests Reached")])];case"command":return[g.value?V("div",null,[V(Ns,{size:"small"},null)]):V("span",{class:"codicon codicon-terminal",style:{color:O,marginBottom:"-1.5px"}},null),V("span",{style:{color:O,fontWeight:"bold"}},[We("InfiniSynapse wants to execute this commands:")])];case"code":return[v.value?V("div",null,[V(Ns,{size:"small"},null)]):V("span",{class:"codicon codicon-code",style:{color:O,marginBottom:"-1.5px"}},null),V("span",{style:{color:O,fontWeight:"bold"}},[We("InfiniSynapse wants to execute this code:")])];case"upload_file_to_sandbox":return[m.value?V("div",null,[V(Ns,{size:"small"},null)]):V("span",{class:"codicon codicon-cloud-upload",style:{color:O,marginBottom:"-1.5px"}},null),V("span",{style:{color:O,fontWeight:"bold"}},[We("InfiniSynapse wants to upload file to sandbox:")])];case"use_echart_function":const N=JSON.parse(e.value.text||"{}");return[x.value?V("div",null,[V(Ns,{size:"small"},null)]):V("span",{class:"codicon codicon-pie-chart",style:{color:O,marginBottom:"-1.5px"}},null),V("span",{style:{color:O,fontWeight:"bold"}},[We("InfiniSynapse wants to use")," ",V("code",{style:{wordBreak:"break-all"}},[N.function_name])," ",We("function:")])];case"use_mcp_server":const L=JSON.parse(e.value.text||"{}");return[y.value?V("div",null,[V(Ns,{size:"small"},null)]):V("span",{class:"codicon codicon-server",style:{color:O,marginBottom:"-1.5px"}},null),V("span",{style:{color:O,fontWeight:"bold"}},[We("InfiniSynapse wants to")," ",L.type==="use_mcp_tool"?"use a tool":"access a resource",We(" on the")," ",V("code",{style:{wordBreak:"break-all"}},[L.serverName]),We(" Mcp sever:")])];case"use_rag_server":const B=JSON.parse(e.value.text||"{}");return[b.value?V("div",null,[V(Ns,{size:"small"},null)]):V("span",{class:"codicon codicon-server",style:{color:O,marginBottom:"-1.5px"}},null),V("span",{style:{color:O,fontWeight:"bold"}},[We("InfiniSynapse wants to request the rag server:")," ",V("code",{style:{wordBreak:"break-all"}},[B.serverName])])];case"execute_sql":return[w.value?V("div",null,[V(Ns,{size:"small"},null)]):V("span",{class:"codicon codicon-database",style:{color:O,marginBottom:"-1.5px"}},null),V("span",{style:{color:O,fontWeight:"bold"}},[We("InfiniSynapse wants to execute SQL queries")])];case"list_all_tables":const $=JSON.parse(e.value.text||"{}");return[_.value?V("div",null,[V(Ns,{size:"small"},null)]):V("span",{class:"codicon codicon-database",style:{color:O,marginBottom:"-1.5px"}},null),V("span",{style:{color:O,fontWeight:"bold"}},[We("InfiniSynapse wants to get all tables on database "),`${$.databaseName}`,We(":")," "])];case"get_table_detail":const G=JSON.parse(e.value.text||"{}");return[E.value?V("div",null,[V(Ns,{size:"small"},null)]):V("span",{class:"codicon codicon-database",style:{color:O,marginBottom:"-1.5px"}},null),V("span",{style:{color:O,fontWeight:"bold"}},[We("InfiniSynapse wants to get schema for "),`${G.databaseName}`,We(" in")," ",`${G.tableName}`,We(":")," "])];case"completion_result":return[V("span",{class:"codicon codicon-check",style:{color:I,marginBottom:"-1.5px"}},null),V("span",{style:{color:I,fontWeight:"bold"}},[We("Task Completed")])];case"api_req_started":const W=(U,Y)=>V("div",{style:{width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center"}},[V("span",{class:`codicon codicon-${U}`,style:{color:Y,fontSize:16,marginBottom:"-1.5px"}},null)]);return[h.value[1]!=null?h.value[1]==="user_cancelled"?W("error",D):W("error",T):h.value[0]!=null?W("check",I):h.value[2]!=null?W("error",T):V("div",null,[V(Ns,{size:"small"},null)]),h.value[1]!=null?h.value[1]==="user_cancelled"?V("span",{style:{color:O,fontWeight:"bold"}},[We("API Request Cancelled")]):V("span",{style:{color:T,fontWeight:"bold"}},[We("API Streaming Failed")]):h.value[0]!=null?V("span",{style:{color:O,fontWeight:"bold"}},[We("API Request")]):(p.value&&V("span",{style:{color:T,fontWeight:"bold"}},[We("API Request Failed")]),V("span",{style:{color:O,fontWeight:"bold"}},[We("API Request...")]))];case"followup":return[V("span",{class:"codicon codicon-question",style:{color:O,marginBottom:"-1.5px"}},null),V("span",{style:{color:O,fontWeight:"bold"}},[We("InfiniSynapse has a question:")])];default:return[null,null]}}),F={display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},z={margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"};if(e.value.ask==="command"||e.value.say==="command"){const N=G=>{const W=G.indexOf(O1);return W===-1?{command:G,output:""}:{command:G.slice(0,W).trim(),output:G.slice(W+O1.length).trim().split("").map(U=>{switch(U){case"	":return"   ";case"\b":return"";case"\f":return"";case"\v":return"";default:return U}}).join("")}},L=De(()=>N(e.value.text||"")),B=De(()=>L.value.command.endsWith(E9)),$=De(()=>B.value?L.value.command.slice(0,-E9.length):L.value.command);return()=>V(Or,null,[V("div",{style:{padding:"8px 16px"}},[R.value[1]&&V("div",{style:F},[R.value[0],R.value[1]]),V(na,{codeFoldable:!1,modelValue:`\`\`\`shell
${$.value}
\`\`\``},null)]),L.value.output.length>0&&V(ka,{activeKey:f.value,onChange:()=>{a()},bordered:!1,expandIconPosition:"end"},{default:()=>[V(Aa,{key:"1",header:V("div",{class:"flex gap-2 items-center"},[V("span",{class:"codicon codicon-debug-console",style:{color:O,marginBottom:"-1.5px"}},null),V("div",{style:{display:"flex",alignItems:"center",gap:"10px",fontWeight:600}},[We("Command Output")])])},{default:()=>[V(na,{codeFoldable:!1,modelValue:`\`\`\`shell
${L.value.output}
\`\`\``},null)]})]}),B.value&&V("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:T,padding:"0 16px"}},[V("i",{class:"codicon codicon-warning"},null),V("span",null,[We("The model has determined this command requires explicit approval.")])])])}if(e.value.ask==="code"||e.value.say==="code"){const N=W=>{if(W&&W.length>0){const U=JSON.parse(W);return{code:U.code,output:U.output.join(`
`).trim().split("").map(Y=>{switch(Y){case"	":return"   ";case"\b":return"";case"\f":return"";case"\v":return"";default:return Y}}).join(""),result:U.result.map(Y=>JSON.parse(Y))}}else return{code:"",output:"",result:[]}},L=De(()=>N(e.value.text||"")),B=W=>{const U=/size (\d+)x(\d+)/,Y=W.match(U);if(Y){const q=Y[1],K=Y[2];return{width:q,height:K}}},$=De(()=>L.value.code.endsWith(O9)),G=De(()=>$.value?L.value.code.slice(0,-O9.length):L.value.code);return()=>V(Or,null,[V("div",{style:{padding:"8px 16px"}},[R.value[1]&&V("div",{style:F},[R.value[0],R.value[1]]),V(na,{codeFoldable:!1,modelValue:`\`\`\`python
${G.value}
\`\`\``},null)]),L.value.output.length>0&&V(ka,{activeKey:f.value,onChange:()=>{a()},bordered:!1,expandIconPosition:"end"},{default:()=>[V(Aa,{key:"1",header:V("div",{class:"flex gap-2 items-center"},[V("span",{class:"codicon codicon-debug-console",style:{color:O,marginBottom:"-1.5px"}},null),V("div",{style:{display:"flex",alignItems:"center",gap:"10px",fontWeight:600}},[We("Code Output")])])},{default:()=>[V(na,{codeFoldable:!1,modelValue:`\`\`\`shell
${L.value.output}
\`\`\``},null)]})]}),L.value.result&&L.value.result.length>0&&L.value.result.map(W=>{var U,Y,q,K,J,Q;return V(Or,null,[W.png&&V("div",{style:{width:`${((U=B(W.text??""))==null?void 0:U.width)??0}px`,height:`${((Y=B(W.text??""))==null?void 0:Y.height)??0}px`,backgroundImage:`url('data:image/png;base64,${W.png}')`,backgroundRepeat:"no-repeat",backgroundSize:"contain"}},null),W.jpeg&&V("div",{style:{width:`${((q=B(W.text??""))==null?void 0:q.width)??0}px`,height:`${((K=B(W.text??""))==null?void 0:K.height)??0}px`,backgroundImage:`url('data:image/png;base64,${W.jpeg}')`,backgroundRepeat:"no-repeat",backgroundSize:"contain"}},null),W.svg&&V("div",{style:{width:`${((J=B(W.text??""))==null?void 0:J.width)??0}px`,height:`${((Q=B(W.text??""))==null?void 0:Q.height)??0}px`,backgroundImage:`url('data:image/png;base64,${W.svg}')`,backgroundRepeat:"no-repeat",backgroundSize:"contain"}},null),W.markdown&&V(na,{codeFoldable:!1,modelValue:W.markdown},null)])}),$.value&&V("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:T,padding:"0 16px"}},[V("i",{class:"codicon codicon-warning"},null),V("span",null,[We("The model has determined this code requires explicit approval.")])])])}if(e.value.ask==="use_rag_server"||e.value.say==="use_rag_server"){const N=De(()=>JSON.parse(e.value.text||"{}"));return()=>V(ka,{activeKey:[1],bordered:!1,ghost:!0,expandIconPosition:"end"},{default:()=>[V(Aa,{key:"1",header:V("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},[R.value[0],R.value[1]])},{default:()=>[V("div",null,[N.value.type==="use_rag_tool"&&V(Dd,{code:N.value.question,language:"markdown",isExpanded:!0,onToggleExpand:a},null)])]})],expandIcon:()=>V(Or,null,null)})}if(e.value.ask==="execute_sql"||e.value.say==="execute_sql"){const N=De(()=>JSON.parse(e.value.text||"{}"));return()=>V(Or,null,[V(ka,{activeKey:[1],bordered:!1,ghost:!0,expandIconPosition:"end"},{default:()=>[V(Aa,{key:"1",header:V("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},[R.value[0],R.value[1]])},{default:()=>[V("div",null,[N.value.type==="execute_sql"&&V(Dd,{code:N.value.query,language:"sql",isExpanded:!0,onToggleExpand:a},null)])]})],expandIcon:()=>V(Or,null,null)}),N.value.requiresApproval&&V("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:T,padding:"0 16px"}},[V("i",{class:"codicon codicon-warning"},null),V("span",null,[We("The model has determined this query requires explicit approval.")])])])}if(e.value.ask==="list_all_tables"||e.value.say==="list_all_tables")return()=>V("div",{style:{padding:"8px 16px"}},[R.value[1]&&V("div",{style:F},[R.value[0],R.value[1]])]);if(e.value.ask==="get_table_detail"||e.value.say==="get_table_detail")return()=>V("div",{style:{padding:"8px 16px"}},[R.value[1]&&V("div",{style:F},[R.value[0],R.value[1]])]);if(e.value.ask==="use_echart_function"||e.value.say==="use_echart_function"){const N=De(()=>{try{const L=JSON.parse(e.value.text||"{}"),B=JSON.parse(L.arguments??"{}");if(B)return B.sql}catch{}});return()=>V(ka,{activeKey:[1],bordered:!1,ghost:!0,expandIconPosition:"end"},{default:()=>[V(Aa,{key:"1",header:V("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},[R.value[0],R.value[1]])},{default:()=>[N.value&&V(Dd,{code:N.value,language:"sql",isExpanded:!0,onToggleExpand:a},null)]})],expandIcon:()=>V(Or,null,null)})}if(e.value.ask==="use_mcp_server"||e.value.say==="use_mcp_server"){const N=De(()=>JSON.parse(e.value.text||"{}")),L=De(()=>l.value.find(B=>B.name===N.value.serverName));return()=>V(ka,{activeKey:[1],bordered:!1,ghost:!0,expandIconPosition:"end"},{default:()=>[V(Aa,{key:"1",header:V("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},[R.value[0],R.value[1]])},{default:()=>{var B,$,G,W,U,Y,q,K;return[V("div",null,[N.value.type==="access_mcp_resource"&&V(Pde,{item:{...XEe(N.value.uri||"",(B=L==null?void 0:L.value)==null?void 0:B.resources,($=L==null?void 0:L.value)==null?void 0:$.resourceTemplates)||{name:"",mimeType:"",description:""},uri:N.value.uri||""}},null),N.value.type==="use_mcp_tool"&&V(Or,null,[V("div",{onClick:J=>J.stopPropagation()},[V(Dde,{tool:{name:N.value.toolName||"",description:((U=(W=(G=L==null?void 0:L.value)==null?void 0:G.tools)==null?void 0:W.find(J=>J.name===N.value.toolName))==null?void 0:U.description)||"",autoApprove:((K=(q=(Y=L==null?void 0:L.value)==null?void 0:Y.tools)==null?void 0:q.find(J=>J.name===N.value.toolName))==null?void 0:K.autoApprove)||!1},serverName:N.value.serverName},null)]),N.value.arguments&&N.value.arguments!=="{}"&&V("div",{style:{marginTop:"8px"}},[V("div",{style:{marginBottom:"4px",opacity:.8,fontSize:"12px",textTransform:"uppercase"}},[We("Arguments")]),V(Dd,{code:N.value.arguments,language:"json",isExpanded:!0,onToggleExpand:a},null)])])])]}})],expandIcon:()=>V(Or,null,null)})}switch(e.value.type){case"say":switch(e.value.say){case"echart_function_response":{const U=De(()=>JSON.parse(e.value.text||"{}"));if(U.value.arguments){const Y=JSON.parse(U.value.arguments),q=Object.values(Slt).filter(K=>K.tool.name===U.value.function_name);if(q&&q.length>0){const K=q[0],J=K.schema.safeParse(Y);if(J.success){const Q=K.component,se=J.data;return se.theme="academy",()=>V("div",{class:"min-h-[500px]"},[V(Q,se,null)])}else return console.error("Invalid chart arguments:",J.error),()=>V(ka,{activeKey:c.value,onChange:()=>{a()},bordered:!1,expandIconPosition:"end"},{default:()=>[V(Aa,{key:"1",header:V("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},[V("span",{class:"codicon codicon-debug-rerun",style:{color:A,marginBottom:"-1.5px"}},null),V("span",{style:{color:A,fontWeight:"bold"}},[We("Working")]),V("p",{style:{...z,color:A,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},[We("Generating Echart, please be patient...")])])},{default:()=>[V("p",{style:{...z,color:T}},[We("Invalid chart arguments: "),J.error.message])]})]})}}}case"api_req_started":return()=>V(Or,null,[V(ka,{activeKey:c.value,onChange:()=>{a()},bordered:!1,expandIconPosition:"end"},{default:()=>[V(Aa,{key:"1",header:V("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},[R.value[0],R.value[1],h.value[0]!=null&&Number.parseFloat(h.value[0].toString())>0&&V(AD,{color:"processing",onClick:U=>U.stopPropagation()},{default:()=>{var U;return[We("$"),(U=Number(h.value[0]||0))==null?void 0:U.toFixed(4)]},icon:()=>V(a2,null,null)})])},{default:()=>[V("div",null,[V(Dd,{code:JSON.parse(e.value.text||"{}").request,isExpanded:!0,onToggleExpand:a},null)])]})]}),V("div",{style:{padding:"8px 16px"}},[(h.value[0]==null&&p.value||h.value[2])&&V(Or,null,[(()=>{var Y;const U=klt(p.value);return U&&U.code==="insufficient_credits"&&typeof U.current_balance=="number"&&typeof U.total_spent=="number"&&typeof U.total_promotions=="number"&&typeof U.message=="string"?V(YEe,{currentBalance:U.current_balance,totalSpent:U.total_spent,totalPromotions:U.total_promotions,message:U.message},null):V("p",{style:{...z,color:T}},[p.value||h.value[2],((Y=p==null?void 0:p.value)==null?void 0:Y.toLowerCase().includes("powershell"))&&V(Or,null,[V("br",null,null),V("br",null,null),We("It seems like you're having Windows PowerShell issues, please see this")," ",V("a",{style:{color:"inherit",textDecoration:"underline"}},[We("troubleshooting guide")]),We(".")])])})()])])]);case"api_req_finished":return()=>null;case"text":return()=>V("div",{style:{padding:"0 16px"}},[V(na,{codeFoldable:!1,modelValue:e.value.text},null)]);case"reasoning":return()=>V("div",{style:{padding:"0 16px"}},[e.value.text&&V("div",{onClick:a,style:{cursor:"pointer",color:"gray",fontStyle:"italic",overflow:"hidden"}},[i.value?V("div",{style:{marginTop:-3}},[V("span",{style:{fontWeight:"bold",display:"block",marginBottom:"4px"}},[We("Reasoning")," ",V("span",{class:"codicon codicon-chevron-down",style:{display:"inline-block",transform:"translateY(3px)",marginLeft:"1.5px"}},null)]),e.value.text.split(`
`).map((U,Y)=>V(Or,{key:Y},[U,Y<(e.value.text??"").split(`
`).length-1&&V("br",null,null)]))]):V("div",{style:{display:"flex",alignItems:"center"}},[V("span",{style:{fontWeight:"bold",marginRight:"4px"}},[We("Reasoning:")]),V("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",direction:"rtl",textAlign:"left",flex:1}},[e.value.text+""]),V("span",{class:"codicon codicon-chevron-right",style:{marginLeft:"4px",flexShrink:0}},null)])])]);case"user_feedback":return()=>V("div",{style:{borderRadius:"3px",backgroundColor:"var(--badge-background)",color:"var(--badge-foreground)",padding:"16px",whiteSpace:"pre-line",wordWrap:"break-word"}},[V("span",{style:{display:"block"}},[e.value.text])]);case"error":switch(De(()=>{var Y;return(Y=e.value.text)!=null&&Y.startsWith("Error execute_sql")?"execute_sql":"general"}).value){case"execute_sql":return()=>V(ka,{activeKey:c.value,onChange:()=>{a()},bordered:!1,expandIconPosition:"end"},{default:()=>[V(Aa,{key:"1",header:V("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},[V("span",{class:"codicon codicon-debug-rerun",style:{color:A,marginBottom:"-1.5px"}},null),V("span",{style:{color:A,fontWeight:"bold"}},[We("Working")]),V("p",{style:{...z,color:A,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},[We("Generating infinite SQL, please be patient...")])])},{default:()=>[V("p",{style:{...z,color:T}},[e.value.text])]})]});default:return()=>V(ka,{activeKey:c.value,onChange:()=>{a()},bordered:!1,expandIconPosition:"end"},{default:()=>[V(Aa,{key:"1",header:V("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},[V("span",{class:"codicon codicon-error",style:{color:T,marginBottom:"-1.5px"}},null),V("span",{style:{color:T,fontWeight:"bold"}},[We("Error")]),V("p",{style:{...z,color:T,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},[We("We encountered some minor issues and are trying to fix them automatically...")])])},{default:()=>[V("p",{style:{...z,color:T}},[e.value.text])]})]})}case"completion_result":const N=De(()=>{var U;return((U=e.value.text)==null?void 0:U.endsWith(Xm))??!1}),L=De(()=>{var U;return N.value?(U=e.value.text)==null?void 0:U.slice(0,-Xm.length):e.value.text});return()=>V(ka,{activeKey:[1],bordered:!1,expandIconPosition:"end",ghost:!0},{default:()=>[V(Aa,{key:"1",header:V("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},[R.value[0],R.value[1]])},{default:()=>[V(na,{codeFoldable:!1,modelValue:L.value},null)]})],expandIcon:()=>V(Or,null,null)});case"rag_server_response":return()=>V(Or,null,[R.value[0]&&V("div",{style:F},[R.value[0],R.value[1]]),V("div",{style:{paddingTop:10}},[V(na,{modelValue:e.value.text,codeFoldable:!1},null)])]);case"mcp_server_response":return()=>V(ka,{activeKey:[1],bordered:!1,expandIconPosition:"end"},{default:()=>[V(Aa,{key:"1",header:V("div",{class:"flex gap-2 items-center"},[V("span",{class:"codicon codicon-server",style:{color:O,marginBottom:"-1.5px"}},null),V("div",{style:{display:"flex",alignItems:"center",gap:"10px",fontWeight:"bold"}},[We("MCP Response")])])},{default:()=>{var U,Y,q;return[(U=e.value.text)!=null&&U.startsWith("http")||(Y=e.value.text)!=null&&Y.startsWith("https")||(q=e.value.text)!=null&&q.startsWith("data:image/png;base64")?V("img",{src:e.value.text,alt:"MCP Server Response",style:{maxWidth:"100%",maxHeight:"400px",borderRadius:"8px"}},null):V(Dd,{code:e.value.text,language:"json",isExpanded:!0,onToggleExpand:a},null)]}})],expandIcon:()=>V(Or,null,null)});case"sql_query_result":let $=function(U){var Y=0;return Array.from(U).map(function(q){q.charCodeAt(0)>255?Y+=2:Y++}),Y};const B=De(()=>JSON.parse(e.value.text||"{}")),G=U=>typeof U=="object"?JSON.stringify(U):U,W=(B.value.columns??[]).map(U=>({title:U.title,dataIndex:U.dataIndex,align:"center",customRender:({text:Y})=>V("div",{class:"flex items-center justify-center w-full",style:{minWidth:`${$(U.title)*10+10}px`}},[G(Y)])}));return()=>V("div",{style:{padding:"0 16px"}},[V(Ide,{scroll:{x:!0,y:"400px"},dataSource:B.value.datas,columns:W,pagination:{pageSize:5}},null)]);default:return()=>V(Or,null,[R.value[0]&&V("div",{style:F},[R.value[0],R.value[1]]),V("div",{style:{paddingTop:10}},[V(na,{modelValue:e.value.text,codeFoldable:!1},null)])])}case"ask":switch(e.value.ask){case"upload_file_to_sandbox":return()=>V(Or,null,[V("div",{style:{padding:"8px 16px"}},[R.value[1]&&V("div",{style:F},[R.value[0],R.value[1]]),V("div",{class:"w-1/3 py-5"},[V(upe,{customRequest:d,showUploadList:!1,disabled:!r.value},{default:()=>[V("p",{class:"ant-upload-drag-icon"},[V(RD,null,null)]),V("p",{class:"ant-upload-text"},[We("Click or drag file to this area to upload")]),V("p",{style:{color:"var(--descriptionForeground)"}},[We("Support for a single upload. Strictly prohibit from uploading company data or other band files")])]})])])]);case"mistake_limit_reached":return()=>V("div",{style:{padding:"8px 16px"}},[V("div",{style:F},[R.value[0],R.value[1]]),V("p",{style:{...z,color:T}},[e.value.text])]);case"auto_approval_max_req_reached":return()=>V("div",{style:{padding:"8px 16px"}},[V("div",{style:F},[R.value[0],R.value[1]]),V("p",{style:{...z,color:T}},[e.value.text])]);case"completion_result":if(e.value.text){const N=De(()=>{var B;return((B=e.value.text)==null?void 0:B.endsWith(Xm))??!1}),L=De(()=>{var B;return N?(B=e.value.text)==null?void 0:B.slice(0,-Xm.length):e.value.text});return()=>V("div",null,[V("div",{style:{...F}},[R.value[0],R.value[1]]),V("div",{style:{color:"var(--charts-green)"}},[V(na,{codeFoldable:!1,modelValue:L.value},null)])])}else return()=>null;case"followup":{const N=De(()=>{let L,B,$;try{const G=JSON.parse(e.value.text||"{}");L=G.question,B=G.options,$=G.selected}catch{L=e.value.text}return{question:L,options:B,selected:$}});return()=>{var L;return V("div",{style:{padding:"0 16px"}},[R.value[1]&&V("div",{style:F},[R.value[0],R.value[1]]),V("div",{style:{paddingTop:10}},[V(na,{codeFoldable:!1,modelValue:N.value.question},null),V(S9,{options:N.value.options,selected:N.value.selected,isActive:r.value&&((L=n==null?void 0:n.value)==null?void 0:L.ask)==="followup"},null)])])}}case"plan_mode_response":{const N=De(()=>{let L,B,$;try{const G=De(()=>JSON.parse(e.value.text||"{}"));L=G.value.response,B=G.value.options,$=G.value.selected}catch{L=e.value.text}return{response:L,options:B,selected:$}});return()=>{var L;return V("div",{style:{padding:"0 16px"}},[V(na,{codeFoldable:!1,modelValue:N.value.response},null),V(S9,{options:N.value.options,selected:N.value.selected,isActive:r.value&&((L=n==null?void 0:n.value)==null?void 0:L.ask)==="plan_mode_response"},null)])}}default:return()=>null}}}});function klt(t){if(t)try{const e=t.indexOf("{"),n=t.lastIndexOf("}");if(e!==-1&&n!==-1){const r=t.substring(e,n+1);return JSON.parse(r)}}catch{}}const Alt=Xt({setup:()=>{const t=pu(),{state:e}=fp(t),{postMessage:n}=t,r=st(),i=st(),a=st(),o=st("zh-CN"),s=async()=>{const y=await Cu.ai.listCategorys({page:1,pageSize:5});r.value=y},l=async()=>{a.value=await Cu.ai.listTasks({search_category_id:i.value,page:1,pageSize:10})},u=async()=>{const y=await Cu.ai.getPreferLanguage();o.value=y};on(async()=>{n({type:"webviewDidLaunch"}),await s(),await u()}),bf(async()=>{l()});const c=st(""),f=st(!1),d=De(()=>{const{selectedProvider:y,selectedModelId:b}=Hx(e.value.apiConfiguration),x="unknown";if(!e.value.apiConfiguration)return x;switch(y){case"anthropic":case"openai":return`openai-compat:${b}`;default:return`${y}:${b}`}}),h=async y=>{await Cu.ai.deleteTask(y),await l()},p=y=>{Cu.ai.showTaskWithId(y)},g=(y,b)=>{y=y.trim(),(y||b.length>0)&&n({type:"newTask",text:y,images:b}),c.value=""},v=De(()=>e.value.chatSettings.mode),m=y=>{y&&setTimeout(()=>{var x;v.value!==y&&n({type:"togglePlanActMode",chatSettings:{mode:y},chatContent:{message:(x=c.value)!=null&&x.trim()?c.value:void 0,images:[]}})},0)};return()=>{var y,b,x,w,_;return V("div",{class:"h-full container flex items-center pt-[10%] mx-auto flex-col gap-3"},[V("div",{class:"flex items-center justify-center flex-col w-1/2 gap-5"},[V("div",{class:"flex items-center gap-2 text-black"},[V("div",{class:"size-[32px]"},[V("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[V("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"},null)])]),V("h1",{class:"font-extrabold text-4xl !mb-0"},[We("InfiniSynapse")])]),V("div",{class:"w-full relative"},[V(oU,{class:"",style:{padding:"8px 60px 8px 10px"},placeholder:"...",autoSize:{minRows:3,maxRows:3},value:c.value,"onUpdate:value":E=>c.value=E},null),V("div",{class:"absolute right-[20px] bottom-[28px]"},[V(kde,{type:"primary",color:"rgba(0,0,0,0.65)",style:{display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>{g(c.value,[])},icon:V("i",{class:"input-icon-button codicon codicon-send"},null)},null)])])]),V("div",{class:"mx-[20px] mb-[10px] flex items-center justify-between w-1/2"},[V("div",{class:"flex items-center justify-between w-full"},[V("div",{class:"flex items-center gap-2 w-full"},[V("div",null,[V("span",{style:{display:"flex",alignItems:"center",gap:"6px"}},[V("button",{onClick:()=>f.value=!f.value,style:{color:"var(--descriptionForeground)"},class:"border-none disabled:cursor-not-allowed disabled:opacity-50 flex items-center gap-2"},[V("i",{class:"codicon codicon-robot",style:{fontSize:"16px",fontWeight:"bold"}},null),V("span",{class:"hover:underline"},[d.value])])]),V(dU,{open:f.value,"onUpdate:open":E=>f.value=E,title:"Settings"},{default:()=>[V(uU,{key:"chattextarea_apioptions",showModelOptions:!0,isPopup:!0,onDone:()=>f.value=!1},null)]})]),V("div",null,[V("input",{id:"plan_mode",class:"hidden",checked:v.value==="plan",type:"checkbox",onChange:E=>{const S=E.target.checked;m(S?"plan":"act")}},null),V("label",{for:"plan_mode",class:"px-2 py-2 cursor-pointer rounded-full flex items-center gap-[4px] select-none",style:{background:v.value==="plan"?"black":"rgba(0,0,0,0.06)",color:v.value==="plan"?"#fff":"rgba(0,0,0,0.88)"}},[v.value==="plan"?V("i",{class:"codicon codicon-check"},null):V("i",{class:"codicon codicon-circle-large"},null),We("Plan")])])]),V("div",null,[V(fU,{class:"w-[90px]",size:"middle",value:o.value,onChange:async E=>{await Cu.ai.updatePreferLanguage(E),await u()}},{default:()=>[V(H1,{value:"en"},{default:()=>[We("en")]}),V(H1,{value:"zh-CN"},{default:()=>[We("zh-CN")]})]})])])]),V("div",{class:"mx-[20px] mb-[10px] flex w-1/2 flex-col gap-2"},[V("p",{class:"font-bold text-md flex gap-2 items-center"},[((y=r.value)==null?void 0:y.items)&&((b=r.value)==null?void 0:b.items.length)>0&&((w=(x=r.value)==null?void 0:x.items)==null?void 0:w.map(E=>V("div",null,[V("input",{id:E.id.toString(),class:"hidden",checked:i.value===E.id,type:"checkbox",onChange:S=>{S.target.checked?i.value=E.id:i.value=void 0}},null),V("label",{for:E.id.toString(),key:E.id,class:"px-3 py-2 cursor-pointer rounded-full flex items-center gap-2 select-none",style:{background:i.value===E.id?"black":"rgba(0,0,0,0.06)",color:i.value===E.id?"#fff":"rgba(0,0,0,0.88)"}},[E.category_name])])))]),V("div",{class:"flex flex-wrap gap-2"},[((_=a.value)==null?void 0:_.items)&&a.value.items.length>0&&a.value.items.map(E=>V(G1,{placement:"topLeft",title:E.task_name,key:E.id},{default:()=>[V(AD,{class:"cursor-pointer chat_tag",key:E.id,closable:!0,bordered:!1,onClick:()=>p(E.id)},{default:()=>[V("div",{class:"flex-1 text-ellipsis overflow-hidden text-nowrap max-w-[200px]"},[E.task_name])],closeIcon:()=>V(cU,{title:"Are you sure you want to delete this task?",onConfirm:()=>{h(E.id)}},{default:()=>[V(aU,null,null)]})})]}))])])])}}});function Tlt(t){const e=[];for(let n=0;n<t.length;n++)if(t[n].type==="say"&&t[n].say==="api_req_started"){const r=JSON.parse(t[n].text||"{}");let i=n+1;for(;i<t.length;){if(t[i].type==="say"&&t[i].say==="api_req_finished"){const a=JSON.parse(t[i].text||"{}"),o={...r,...a};e.push({...t[n],text:JSON.stringify(o)}),n=i;break}i++}i===t.length&&e.push(t[n])}return t.filter(n=>!(n.type==="say"&&n.say==="api_req_finished")).map(n=>n.type==="say"&&n.say==="api_req_started"&&e.find(i=>i.ts===n.ts)||n)}function Mlt(t){const e={totalTokensIn:0,totalTokensOut:0,totalCacheWrites:void 0,totalCacheReads:void 0,totalCost:0};return t.forEach(n=>{if(n.type==="say"&&(n.say==="api_req_started"||n.say==="deleted_api_reqs")&&n.text)try{const r=JSON.parse(n.text),{tokensIn:i,tokensOut:a,cacheWrites:o,cacheReads:s,cost:l}=r;typeof i=="number"&&(e.totalTokensIn+=i),typeof a=="number"&&(e.totalTokensOut+=a),typeof o=="number"&&(e.totalCacheWrites=(e.totalCacheWrites??0)+o),typeof s=="number"&&(e.totalCacheReads=(e.totalCacheReads??0)+s),typeof l=="number"&&(e.totalCost+=l)}catch(r){console.error("Error parsing JSON:",r)}}),e}const eU=20,Clt=Xt({props:{showHistoryView:{type:Function,required:!0}},setup:t=>{const e=pu(),{state:n}=fp(e),{postMessage:r,bindEvent:i,unbindEvent:a}=e,o=De(()=>n.value.infiniMessages),s=De(()=>n.value.apiConfiguration),l=De(()=>o.value.at(0)),u=De(()=>Tlt(ZEe(KEe(o.value.slice(1))))),c=De(()=>Mlt(u.value)),f=De(()=>{const ue=ke=>{if(!ke.text)return 0;const{tokensIn:Se,tokensOut:Me,cacheWrites:Be,cacheReads:en}=JSON.parse(ke.text);return(Se||0)+(Me||0)+(Be||0)+(en||0)},he=K4(u.value,ke=>ke.say!=="api_req_started"?!1:ue(ke)>0);if(he)return ue(he)}),d=st(""),h=st(null),p=st(!1),g=st([]),v=st(void 0),m=st(!1),y=st("Approve"),b=st("Reject"),x=st(!1),w=st(null),_=st({}),E=st(null),S=st(!1),O=st(!1),A=st(!1),T=De(()=>o.value.at(-1)),I=De(()=>o.value.at(-2));bf(()=>{var ue,he,ke,Se;if(T.value)switch((ue=T.value)==null?void 0:ue.type){case"ask":const Me=T.value.partial===!0;switch(T.value.ask){case"api_req_failed":p.value=!0,v.value="api_req_failed",m.value=!0,y.value="Retry",b.value="Start New Task";break;case"mistake_limit_reached":p.value=!1,v.value="mistake_limit_reached",m.value=!0,y.value="Proceed Anyways",b.value="Start New Task";break;case"auto_approval_max_req_reached":p.value=!0,v.value="auto_approval_max_req_reached",m.value=!0,y.value="Proceed",b.value="Start New Task";break;case"followup":p.value=Me,v.value="followup",m.value=!1;break;case"plan_mode_response":p.value=Me,v.value="plan_mode_response",m.value=!1;break;case"upload_file_to_sandbox":p.value=Me,v.value="upload_file_to_sandbox",m.value=!1,y.value=void 0,b.value=void 0;break;case"command":p.value=Me,v.value="command",m.value=!Me,y.value="Run Command",b.value="Reject";break;case"command_output":p.value=!1,v.value="command_output",m.value=!0,y.value="Proceed While Running",b.value=void 0;break;case"code":p.value=Me,v.value="code",m.value=!Me,y.value="Run Code",b.value="Reject";break;case"code_output":p.value=!1,v.value="code_output",m.value=!0,y.value="Proceed While Running",b.value=void 0;break;case"code_result":p.value=!1,v.value="code_result",m.value=!0,y.value="Proceed While Running",b.value=void 0;break;case"use_mcp_server":p.value=Me,v.value="use_mcp_server",m.value=!Me,y.value="Approve",b.value="Reject";break;case"use_rag_server":p.value=Me,v.value="use_rag_server",m.value=!Me,y.value="Approve",b.value="Reject";break;case"execute_sql":p.value=Me,v.value="execute_sql",m.value=!Me,y.value="Run SQL",b.value="Reject";break;case"list_all_tables":p.value=Me,v.value="list_all_tables",m.value=!Me,y.value="Run",b.value="Reject";break;case"get_table_detail":p.value=Me,v.value="get_table_detail",m.value=!Me,y.value="Run",b.value="Reject";break;case"completion_result":p.value=Me,v.value="completion_result",m.value=!Me,y.value="Start New Task",b.value=void 0;break;case"resume_task":p.value=!1,v.value="resume_task",m.value=!0,y.value="Resume Task",b.value=void 0,x.value=!1;break;case"resume_completed_task":p.value=!1,v.value="resume_completed_task",m.value=!0,y.value="Start New Task",b.value=void 0,x.value=!1;break}break;case"say":switch(T.value.say){case"api_req_started":(((he=I.value)==null?void 0:he.ask)==="command_output"||((ke=I.value)==null?void 0:ke.ask)==="code_output"||((Se=I.value)==null?void 0:Se.ask)==="code_result")&&(d.value="",p.value=!0,g.value=[],v.value=void 0,m.value=!1);break}break}}),bf(()=>{o.value.length===0&&(p.value=!1,v.value=void 0,m.value=!1,y.value="Approve",b.value="Reject")}),Wi(()=>{var ue;return(ue=l.value)==null?void 0:ue.ts},(ue,he)=>{ue&&(_.value={})});const D=De(()=>{var Se,Me;if(!!((Se=u.value.at(-1))!=null&&Se.ask)&&v.value!==void 0&&m.value&&y.value!==void 0)return!1;if(((Me=u.value.at(-1))==null?void 0:Me.partial)===!0)return!0;{const Be=K4(u.value,en=>en.say==="api_req_started");if(Be&&Be.text!=null&&Be.say==="api_req_started"&&JSON.parse(Be.text).cost===void 0)return!0}return!1}),R=(ue,he)=>{if(ue=ue.trim(),ue||he.length>0){if(o.value.length===0)r({type:"newTask",text:ue,images:he});else if(v.value)switch(v.value){case"followup":case"plan_mode_response":case"upload_file_to_sandbox":case"command":case"command_output":case"code":case"code_output":case"code_result":case"use_mcp_server":case"use_rag_server":case"get_table_detail":case"execute_sql":case"list_all_tables":case"completion_result":case"resume_task":case"resume_completed_task":case"mistake_limit_reached":r({type:"askResponse",askResponse:"messageResponse",text:ue,images:he});break}d.value="",p.value=!0,g.value=[],v.value=void 0,m.value=!1,S.value=!1}},F=()=>{r({type:"clearTask"})},z=(ue,he)=>{const ke=ue==null?void 0:ue.trim();switch(v.value){case"api_req_failed":case"command":case"command_output":case"code":case"code_output":case"code_result":case"get_table_detail":case"execute_sql":case"list_all_tables":case"use_mcp_server":case"use_rag_server":case"resume_task":case"mistake_limit_reached":case"auto_approval_max_req_reached":ke||he&&he.length>0?r({type:"askResponse",askResponse:"yesButtonClicked",text:ke,images:he}):r({type:"askResponse",askResponse:"yesButtonClicked"}),d.value="",g.value=[];break;case"completion_result":case"resume_completed_task":F();break}p.value=!0,v.value=void 0,m.value=!1,S.value=!1},N=(ue,he)=>{const ke=ue==null?void 0:ue.trim();if(D.value){r({type:"cancelTask"}),x.value=!0;return}switch(v.value){case"api_req_failed":case"mistake_limit_reached":case"auto_approval_max_req_reached":F();break;case"command":case"code":case"use_mcp_server":case"use_rag_server":case"get_table_detail":case"execute_sql":case"list_all_tables":ke||he&&he.length>0?r({type:"askResponse",askResponse:"noButtonClicked",text:ke,images:he}):r({type:"askResponse",askResponse:"noButtonClicked"}),d.value="",g.value=[];break}p.value=!0,v.value=void 0,m.value=!1,S.value=!1},L=()=>{F()},B=De(()=>Hx(s==null?void 0:s.value).selectedModelInfo);De(()=>!B.value.supportsImages||p.value||g.value.length>=eU);const $=ue=>{var he;switch(ue.type){case"action":switch(ue.action){case"didBecomeVisible":!p.value&&!m.value&&((he=h.value)==null||he.focus());break}break;case"selectedImages":const ke=ue.images??[];ke.length>0&&(g.value=[...g.value,...ke].slice(0,eU));break;case"invoke":switch(ue.invoke){case"sendMessage":R(ue.text??"",ue.images??[]);break;case"primaryButtonClick":z(ue.text??"",ue.images??[]);break;case"secondaryButtonClick":N(ue.text??"",ue.images??[]);break}}};on(()=>{i("webviewMessage",$),r({type:"webviewDidLaunch"})}),mv(()=>{a("webviewMessage",$)}),bf(ue=>{const he=setTimeout(()=>{var ke;!p.value&&!m.value&&((ke=h.value)==null||ke.focus())});ue(()=>{he&&clearTimeout(he)})});const G=De(()=>u.value.filter(ue=>{var he;switch(ue.ask){case"completion_result":if(ue.text==="")return!1;break;case"api_req_failed":case"resume_task":case"resume_completed_task":return!1}switch(ue.say){case"api_req_finished":case"api_req_retried":case"deleted_api_reqs":return!1;case"text":if((ue.text??"")===""&&(((he=ue.images)==null?void 0:he.length)??0)===0)return!1;break;case"mcp_server_request_started":case"rag_server_request_started":return!1}return!0})),W=De(()=>G.value),U=Ade(()=>{K.value.scrollToIndex(W.value.length-1,{align:"end"})},10),Y=()=>{K.value.scrollToIndex(W.value.length-1,{align:"end"})},q=De(()=>({count:W.value.length,getScrollElement:()=>w.value,estimateSize:()=>1e3})),K=jxe(q),J=De(()=>K.value.getVirtualItems()),Q=De(()=>K.value.getTotalSize()),se=ue=>{ue&&K.value.measureElement(ue)},de=ue=>{const he=_.value[ue]??!1,ke=W.value.at(-1),Se=Array.isArray(ke)?ke[0].ts===ue:(ke==null?void 0:ke.ts)===ue,Me=W.value.at(-2),Be=Array.isArray(Me)?Me[0].ts===ue:(Me==null?void 0:Me.ts)===ue,en=Se&&!Array.isArray(ke)&&(ke==null?void 0:ke.say)==="api_req_started"&&!_.value[ke.ts];if(_.value={..._.value,[ue]:!_.value[ue]},he||(S.value=!0),he&&A.value){const Ht=setTimeout(()=>{Y()},0);return()=>clearTimeout(Ht)}else if(Se||Be)if(he){if(Be&&!en)return;const Ht=setTimeout(()=>{Y()},0);return()=>clearTimeout(Ht)}else{const Ht=setTimeout(()=>{var wt;(wt=K.value)==null||wt.scrollToIndex(W.value.length-(Se?1:2),{align:"start"})},0);return()=>clearTimeout(Ht)}},ye=ue=>{S.value||(ue?U():setTimeout(()=>{Y()},0))};Wi([S,W],()=>{S.value||setTimeout(async()=>{await U()},50)},{immediate:!0,deep:!0}),Tde([K],()=>{const ue=K.value.scrollOffset??0,he=K.value.getOffsetForIndex(W.value.length-1,"end")??[0,"end"];ue>=he[0]&&(A.value=!0,A.value&&(S.value=!1),O.value=S.value&&!A.value)},{debounce:10,immediate:!0,deep:!0}),Mde(window,"wheel",ue=>{var ke;const he=ue;he.deltaY&&he.deltaY<0&&(ke=E.value)!=null&&ke.contains(he.target)&&(S.value=!0)},{passive:!0});const Ee=De(()=>l?"Type a message...":"Type your task here...");return()=>V("div",{class:"h-full w-full p-3 overflow-hidden flex flex-col bg-white"},[l.value?V(Vxe,{class:"flex-shrink-0",task:l.value,tokensIn:c.value.totalTokensIn,tokensOut:c.value.totalTokensOut,doesModelSupportPromptCache:B.value.supportsPromptCache,cacheWrites:c.value.totalCacheWrites,cacheReads:c.value.totalCacheReads,totalCost:c.value.totalCost,lastApiReqTotalTokens:f.value,onClose:L},null):V(Alt,null,null),l.value&&V("div",{ref:E,class:"flex-1 h-full overflow-hidden flex flex-col"},[V("div",{class:"overflow-auto flex-1 min-h-[100px]",ref:w},[V("div",{style:{height:`${Q.value}px`,width:"100%",position:"relative"}},[J.value.map(ue=>{const he=W.value[ue.index];return Array.isArray(he)?V("div",{key:ue.index},[We("Todo: group")]):V("div",{key:ue.index,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${ue.start??0}px)`},"data-index":ue.index,ref:se},[V(Elt,{class:"py-1 pr-3",key:he.ts,message:he,isExpanded:_.value[he.ts]||!1,onToggleExpand:()=>de(he.ts),lastModifiedMessage:u.value.at(-1),isLast:ue.index===W.value.length-1,onHeightChange:ye},null)])})])]),V(Wxe,{class:"flex-shrink-0"},null),O.value?V("div",{class:"flex flex-shrink-0",style:{padding:"10px 15px 0px 15px"}},[V(ol,{onClick:()=>{U(),S.value=!1}},{default:()=>[V("span",{class:"codicon codicon-chevron-down",style:{fontSize:"18px"}},null)]})]):V("div",{class:"flex-shrink-0 flex",style:{opacity:y.value||b.value||D.value?m.value||D.value&&!x.value?1:.5:0,padding:`${y.value||b.value||D.value?"10":"0"}px 15px 0px 15px`}},[y.value&&!D.value&&V(ol,{disabled:!m.value,style:{flex:b.value?1:2,marginRight:b.value?"6px":"0"},onClick:()=>z(d.value,g.value)},{default:()=>[y.value]}),(b.value||D.value)&&V(ol,{disabled:!m.value&&!(D.value&&!x.value),style:{flex:D.value?2:1,marginLeft:D.value?0:"6px"},onClick:()=>N(d.value,g.value)},{default:()=>[D.value?"Cancel":b.value]})])]),l.value&&V(Gxe,{class:"flex-shrink-0",inputRef:h,isRunning:D.value,inputValue:d.value,"onUpdate:inputValue":ue=>d.value=ue,textAreaDisabled:p.value,placeholderText:Ee.value,onSend:()=>R(d.value,g.value),onHeightChange:()=>{A.value&&Y()}},null)])}}),Cut=Xt({setup:()=>{const t=pu(),{postMessage:e,bindEvent:n,unbindEvent:r}=t,i=s=>{switch(s.type){case"action":switch(s.action){case"settingsButtonClicked":a.push("/ai/settings");break;case"historyButtonClicked":a.push("/history");break;case"mcpButtonClicked":a.push("/ai/mcp");break;case"chatButtonClicked":a.push("/tasks");break}break}};on(()=>{n("webviewMessage",i),e({type:"webviewDidLaunch"})}),mv(()=>{r("webviewMessage",i)});const a=Cde(),o=()=>{a.push("/history")};return()=>V(Clt,{showHistoryView:o},null)}});export{Cut as default};
